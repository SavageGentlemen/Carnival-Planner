(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var RF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function II(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TI={exports:{}},dg={},kI={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=Symbol.for("react.element"),LF=Symbol.for("react.portal"),jF=Symbol.for("react.fragment"),DF=Symbol.for("react.strict_mode"),MF=Symbol.for("react.profiler"),OF=Symbol.for("react.provider"),HF=Symbol.for("react.context"),VF=Symbol.for("react.forward_ref"),KF=Symbol.for("react.suspense"),zF=Symbol.for("react.memo"),GF=Symbol.for("react.lazy"),tB=Symbol.iterator;function qF(t){return t===null||typeof t!="object"?null:(t=tB&&t[tB]||t["@@iterator"],typeof t=="function"?t:null)}var SI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NI=Object.assign,UI={};function hc(t,e,n){this.props=t,this.context=e,this.refs=UI,this.updater=n||SI}hc.prototype.isReactComponent={};hc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function FI(){}FI.prototype=hc.prototype;function Zw(t,e,n){this.props=t,this.context=e,this.refs=UI,this.updater=n||SI}var Jw=Zw.prototype=new FI;Jw.constructor=Zw;NI(Jw,hc.prototype);Jw.isPureReactComponent=!0;var nB=Array.isArray,QI=Object.prototype.hasOwnProperty,Xw={current:null},PI={key:!0,ref:!0,__self:!0,__source:!0};function RI(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)QI.call(e,r)&&!PI.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Sd,type:t,key:i,ref:o,props:s,_owner:Xw.current}}function WF(t,e){return{$$typeof:Sd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sd}function $F(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rB=/\/+/g;function Up(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$F(""+t.key):e.toString(36)}function Ef(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sd:case LF:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Up(o,0):r,nB(s)?(n="",t!=null&&(n=t.replace(rB,"$&/")+"/"),Ef(s,e,n,"",function(h){return h})):s!=null&&(Yw(s)&&(s=WF(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",nB(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Up(i,l);o+=Ef(i,e,n,u,s)}else if(u=qF(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Up(i,l++),o+=Ef(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bh(t,e,n){if(t==null)return t;var r=[],s=0;return Ef(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ZF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ar={current:null},If={transition:null},JF={ReactCurrentDispatcher:ar,ReactCurrentBatchConfig:If,ReactCurrentOwner:Xw};function LI(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Bh,forEach:function(t,e,n){Bh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bh(t,function(){e++}),e},toArray:function(t){return Bh(t,function(e){return e})||[]},only:function(t){if(!Yw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=hc;Ge.Fragment=jF;Ge.Profiler=MF;Ge.PureComponent=Zw;Ge.StrictMode=DF;Ge.Suspense=KF;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JF;Ge.act=LI;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=NI({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)QI.call(e,u)&&!PI.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Sd,type:t.type,key:s,ref:i,props:r,_owner:o}};Ge.createContext=function(t){return t={$$typeof:HF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OF,_context:t},t.Consumer=t};Ge.createElement=RI;Ge.createFactory=function(t){var e=RI.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:VF,render:t}};Ge.isValidElement=Yw;Ge.lazy=function(t){return{$$typeof:GF,_payload:{_status:-1,_result:t},_init:ZF}};Ge.memo=function(t,e){return{$$typeof:zF,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=If.transition;If.transition={};try{t()}finally{If.transition=e}};Ge.unstable_act=LI;Ge.useCallback=function(t,e){return ar.current.useCallback(t,e)};Ge.useContext=function(t){return ar.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return ar.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return ar.current.useEffect(t,e)};Ge.useId=function(){return ar.current.useId()};Ge.useImperativeHandle=function(t,e,n){return ar.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return ar.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return ar.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return ar.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return ar.current.useReducer(t,e,n)};Ge.useRef=function(t){return ar.current.useRef(t)};Ge.useState=function(t){return ar.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return ar.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return ar.current.useTransition()};Ge.version="18.3.1";kI.exports=Ge;var j=kI.exports;const rm=II(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XF=j,YF=Symbol.for("react.element"),eQ=Symbol.for("react.fragment"),tQ=Object.prototype.hasOwnProperty,nQ=XF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rQ={key:!0,ref:!0,__self:!0,__source:!0};function jI(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tQ.call(e,r)&&!rQ.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YF,type:t,key:i,ref:o,props:s,_owner:nQ.current}}dg.Fragment=eQ;dg.jsx=jI;dg.jsxs=jI;TI.exports=dg;var A=TI.exports,$0={},DI={exports:{}},Dr={},MI={exports:{}},OI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,oe){var Y=G.length;G.push(oe);e:for(;0<Y;){var ve=Y-1>>>1,ue=G[ve];if(0<s(ue,oe))G[ve]=oe,G[Y]=ue,Y=ve;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var oe=G[0],Y=G.pop();if(Y!==oe){G[0]=Y;e:for(var ve=0,ue=G.length,fe=ue>>>1;ve<fe;){var pe=2*(ve+1)-1,de=G[pe],ae=pe+1,Fe=G[ae];if(0>s(de,Y))ae<ue&&0>s(Fe,de)?(G[ve]=Fe,G[ae]=Y,ve=ae):(G[ve]=de,G[pe]=Y,ve=pe);else if(ae<ue&&0>s(Fe,Y))G[ve]=Fe,G[ae]=Y,ve=ae;else break e}}return oe}function s(G,oe){var Y=G.sortIndex-oe.sortIndex;return Y!==0?Y:G.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],m=1,p=null,w=3,C=!1,b=!1,x=!1,U=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(G){for(var oe=n(h);oe!==null;){if(oe.callback===null)r(h);else if(oe.startTime<=G)r(h),oe.sortIndex=oe.expirationTime,e(u,oe);else break;oe=n(h)}}function H(G){if(x=!1,N(G),!b)if(n(u)!==null)b=!0,Ae(V);else{var oe=n(h);oe!==null&&me(H,oe.startTime-G)}}function V(G,oe){b=!1,x&&(x=!1,T(B),B=-1),C=!0;var Y=w;try{for(N(oe),p=n(u);p!==null&&(!(p.expirationTime>oe)||G&&!D());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,w=p.priorityLevel;var ue=ve(p.expirationTime<=oe);oe=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(u)&&r(u),N(oe)}else r(u);p=n(u)}if(p!==null)var fe=!0;else{var pe=n(h);pe!==null&&me(H,pe.startTime-oe),fe=!1}return fe}finally{p=null,w=Y,C=!1}}var M=!1,I=null,B=-1,S=5,P=-1;function D(){return!(t.unstable_now()-P<S)}function O(){if(I!==null){var G=t.unstable_now();P=G;var oe=!0;try{oe=I(!0,G)}finally{oe?R():(M=!1,I=null)}}else M=!1}var R;if(typeof E=="function")R=function(){E(O)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,se=Z.port2;Z.port1.onmessage=O,R=function(){se.postMessage(null)}}else R=function(){U(O,0)};function Ae(G){I=G,M||(M=!0,R())}function me(G,oe){B=U(function(){G(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){b||C||(b=!0,Ae(V))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var Y=w;w=oe;try{return G()}finally{w=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=w;w=G;try{return oe()}finally{w=Y}},t.unstable_scheduleCallback=function(G,oe,Y){var ve=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ve+Y:ve):Y=ve,G){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,G={id:m++,callback:oe,priorityLevel:G,startTime:Y,expirationTime:ue,sortIndex:-1},Y>ve?(G.sortIndex=Y,e(h,G),n(u)===null&&G===n(h)&&(x?(T(B),B=-1):x=!0,me(H,Y-ve))):(G.sortIndex=ue,e(u,G),b||C||(b=!0,Ae(V))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var oe=w;return function(){var Y=w;w=oe;try{return G.apply(this,arguments)}finally{w=Y}}}})(OI);MI.exports=OI;var sQ=MI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iQ=j,Rr=sQ;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HI=new Set,qu={};function BA(t,e){Vl(t,e),Vl(t+"Capture",e)}function Vl(t,e){for(qu[t]=e,t=0;t<e.length;t++)HI.add(e[t])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Z0=Object.prototype.hasOwnProperty,aQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sB={},iB={};function oQ(t){return Z0.call(iB,t)?!0:Z0.call(sB,t)?!1:aQ.test(t)?iB[t]=!0:(sB[t]=!0,!1)}function AQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lQ(t,e,n,r){if(e===null||typeof e>"u"||AQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function or(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tn[t]=new or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tn[e]=new or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tn[t]=new or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tn[t]=new or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tn[t]=new or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tn[t]=new or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tn[t]=new or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tn[t]=new or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tn[t]=new or(t,5,!1,t.toLowerCase(),null,!1,!1)});var ev=/[\-:]([a-z])/g;function tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ev,tv);Tn[e]=new or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ev,tv);Tn[e]=new or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ev,tv);Tn[e]=new or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tn[t]=new or(t,1,!1,t.toLowerCase(),null,!1,!1)});Tn.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tn[t]=new or(t,1,!1,t.toLowerCase(),null,!0,!0)});function nv(t,e,n,r){var s=Tn.hasOwnProperty(e)?Tn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lQ(e,n,s,r)&&(n=null),r||s===null?oQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ki=iQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bh=Symbol.for("react.element"),ml=Symbol.for("react.portal"),gl=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),J0=Symbol.for("react.profiler"),VI=Symbol.for("react.provider"),KI=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),Y0=Symbol.for("react.suspense_list"),iv=Symbol.for("react.memo"),Ba=Symbol.for("react.lazy"),zI=Symbol.for("react.offscreen"),aB=Symbol.iterator;function Dc(t){return t===null||typeof t!="object"?null:(t=aB&&t[aB]||t["@@iterator"],typeof t=="function"?t:null)}var Lt=Object.assign,Fp;function au(t){if(Fp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fp=e&&e[1]||""}return`
`+Fp+t}var Qp=!1;function Pp(t,e){if(!t||Qp)return"";Qp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Qp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?au(t):""}function cQ(t){switch(t.tag){case 5:return au(t.type);case 16:return au("Lazy");case 13:return au("Suspense");case 19:return au("SuspenseList");case 0:case 2:case 15:return t=Pp(t.type,!1),t;case 11:return t=Pp(t.type.render,!1),t;case 1:return t=Pp(t.type,!0),t;default:return""}}function ey(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gl:return"Fragment";case ml:return"Portal";case J0:return"Profiler";case rv:return"StrictMode";case X0:return"Suspense";case Y0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case KI:return(t.displayName||"Context")+".Consumer";case VI:return(t._context.displayName||"Context")+".Provider";case sv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iv:return e=t.displayName||null,e!==null?e:ey(t.type)||"Memo";case Ba:e=t._payload,t=t._init;try{return ey(t(e))}catch{}}return null}function uQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ey(e);case 8:return e===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function eo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dQ(t){var e=GI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ch(t){t._valueTracker||(t._valueTracker=dQ(t))}function qI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=GI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ty(t,e){var n=e.checked;return Lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=eo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WI(t,e){e=e.checked,e!=null&&nv(t,"checked",e,!1)}function ny(t,e){WI(t,e);var n=eo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ry(t,e.type,n):e.hasOwnProperty("defaultValue")&&ry(t,e.type,eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function AB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ry(t,e,n){(e!=="number"||sm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ou=Array.isArray;function kl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+eo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(ou(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:eo(n)}}function $I(t,e){var n=eo(e.value),r=eo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eh,JI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eh=Eh||document.createElement("div"),Eh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hQ=["Webkit","ms","Moz","O"];Object.keys(Bu).forEach(function(t){hQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bu[e]=Bu[t]})});function XI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bu.hasOwnProperty(t)&&Bu[t]?(""+e).trim():e+"px"}function YI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var fQ=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ay(t,e){if(e){if(fQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function oy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ay=null;function av(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ly=null,Sl=null,Nl=null;function uB(t){if(t=Fd(t)){if(typeof ly!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=pg(e),ly(t.stateNode,t.type,e))}}function e1(t){Sl?Nl?Nl.push(t):Nl=[t]:Sl=t}function t1(){if(Sl){var t=Sl,e=Nl;if(Nl=Sl=null,uB(t),e)for(t=0;t<e.length;t++)uB(e[t])}}function n1(t,e){return t(e)}function r1(){}var Rp=!1;function s1(t,e,n){if(Rp)return t(e,n);Rp=!0;try{return n1(t,e,n)}finally{Rp=!1,(Sl!==null||Nl!==null)&&(r1(),t1())}}function $u(t,e){var n=t.stateNode;if(n===null)return null;var r=pg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var cy=!1;if(Ri)try{var Mc={};Object.defineProperty(Mc,"passive",{get:function(){cy=!0}}),window.addEventListener("test",Mc,Mc),window.removeEventListener("test",Mc,Mc)}catch{cy=!1}function mQ(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var bu=!1,im=null,am=!1,uy=null,gQ={onError:function(t){bu=!0,im=t}};function pQ(t,e,n,r,s,i,o,l,u){bu=!1,im=null,mQ.apply(gQ,arguments)}function yQ(t,e,n,r,s,i,o,l,u){if(pQ.apply(this,arguments),bu){if(bu){var h=im;bu=!1,im=null}else throw Error(ie(198));am||(am=!0,uy=h)}}function bA(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dB(t){if(bA(t)!==t)throw Error(ie(188))}function wQ(t){var e=t.alternate;if(!e){if(e=bA(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dB(s),t;if(i===r)return dB(s),e;i=i.sibling}throw Error(ie(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function a1(t){return t=wQ(t),t!==null?o1(t):null}function o1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=o1(t);if(e!==null)return e;t=t.sibling}return null}var A1=Rr.unstable_scheduleCallback,hB=Rr.unstable_cancelCallback,vQ=Rr.unstable_shouldYield,xQ=Rr.unstable_requestPaint,$t=Rr.unstable_now,_Q=Rr.unstable_getCurrentPriorityLevel,ov=Rr.unstable_ImmediatePriority,l1=Rr.unstable_UserBlockingPriority,om=Rr.unstable_NormalPriority,BQ=Rr.unstable_LowPriority,c1=Rr.unstable_IdlePriority,hg=null,Gs=null;function bQ(t){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(hg,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:IQ,CQ=Math.log,EQ=Math.LN2;function IQ(t){return t>>>=0,t===0?32:31-(CQ(t)/EQ|0)|0}var Ih=64,Th=4194304;function Au(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Am(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Au(l):(i&=o,i!==0&&(r=Au(i)))}else o=n&~s,o!==0?r=Au(o):i!==0&&(r=Au(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vs(e),s=1<<n,r|=t[n],e&=~s;return r}function TQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kQ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vs(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=TQ(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function dy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function u1(){var t=Ih;return Ih<<=1,!(Ih&4194240)&&(Ih=64),t}function Lp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Nd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function SQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Av(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var lt=0;function d1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var h1,lv,f1,m1,g1,hy=!1,kh=[],Ha=null,Va=null,Ka=null,Zu=new Map,Ju=new Map,Ea=[],NQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fB(t,e){switch(t){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Zu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(e.pointerId)}}function Oc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Fd(e),e!==null&&lv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function UQ(t,e,n,r,s){switch(e){case"focusin":return Ha=Oc(Ha,t,e,n,r,s),!0;case"dragenter":return Va=Oc(Va,t,e,n,r,s),!0;case"mouseover":return Ka=Oc(Ka,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zu.set(i,Oc(Zu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ju.set(i,Oc(Ju.get(i)||null,t,e,n,r,s)),!0}return!1}function p1(t){var e=Oo(t.target);if(e!==null){var n=bA(e);if(n!==null){if(e=n.tag,e===13){if(e=i1(n),e!==null){t.blockedOn=e,g1(t.priority,function(){f1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ay=r,n.target.dispatchEvent(r),Ay=null}else return e=Fd(n),e!==null&&lv(e),t.blockedOn=n,!1;e.shift()}return!0}function mB(t,e,n){Tf(t)&&n.delete(e)}function FQ(){hy=!1,Ha!==null&&Tf(Ha)&&(Ha=null),Va!==null&&Tf(Va)&&(Va=null),Ka!==null&&Tf(Ka)&&(Ka=null),Zu.forEach(mB),Ju.forEach(mB)}function Hc(t,e){t.blockedOn===e&&(t.blockedOn=null,hy||(hy=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,FQ)))}function Xu(t){function e(s){return Hc(s,t)}if(0<kh.length){Hc(kh[0],t);for(var n=1;n<kh.length;n++){var r=kh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ha!==null&&Hc(Ha,t),Va!==null&&Hc(Va,t),Ka!==null&&Hc(Ka,t),Zu.forEach(e),Ju.forEach(e),n=0;n<Ea.length;n++)r=Ea[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ea.length&&(n=Ea[0],n.blockedOn===null);)p1(n),n.blockedOn===null&&Ea.shift()}var Ul=Ki.ReactCurrentBatchConfig,lm=!0;function QQ(t,e,n,r){var s=lt,i=Ul.transition;Ul.transition=null;try{lt=1,cv(t,e,n,r)}finally{lt=s,Ul.transition=i}}function PQ(t,e,n,r){var s=lt,i=Ul.transition;Ul.transition=null;try{lt=4,cv(t,e,n,r)}finally{lt=s,Ul.transition=i}}function cv(t,e,n,r){if(lm){var s=fy(t,e,n,r);if(s===null)qp(t,e,r,cm,n),fB(t,r);else if(UQ(s,t,e,n,r))r.stopPropagation();else if(fB(t,r),e&4&&-1<NQ.indexOf(t)){for(;s!==null;){var i=Fd(s);if(i!==null&&h1(i),i=fy(t,e,n,r),i===null&&qp(t,e,r,cm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qp(t,e,r,null,n)}}var cm=null;function fy(t,e,n,r){if(cm=null,t=av(r),t=Oo(t),t!==null)if(e=bA(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cm=t,null}function y1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_Q()){case ov:return 1;case l1:return 4;case om:case BQ:return 16;case c1:return 536870912;default:return 16}default:return 16}}var Pa=null,uv=null,kf=null;function w1(){if(kf)return kf;var t,e=uv,n=e.length,r,s="value"in Pa?Pa.value:Pa.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return kf=s.slice(t,1<r?1-r:void 0)}function Sf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sh(){return!0}function gB(){return!1}function Mr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sh:gB,this.isPropagationStopped=gB,this}return Lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sh)},persist:function(){},isPersistent:Sh}),e}var fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dv=Mr(fc),Ud=Lt({},fc,{view:0,detail:0}),RQ=Mr(Ud),jp,Dp,Vc,fg=Lt({},Ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vc&&(Vc&&t.type==="mousemove"?(jp=t.screenX-Vc.screenX,Dp=t.screenY-Vc.screenY):Dp=jp=0,Vc=t),jp)},movementY:function(t){return"movementY"in t?t.movementY:Dp}}),pB=Mr(fg),LQ=Lt({},fg,{dataTransfer:0}),jQ=Mr(LQ),DQ=Lt({},Ud,{relatedTarget:0}),Mp=Mr(DQ),MQ=Lt({},fc,{animationName:0,elapsedTime:0,pseudoElement:0}),OQ=Mr(MQ),HQ=Lt({},fc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VQ=Mr(HQ),KQ=Lt({},fc,{data:0}),yB=Mr(KQ),zQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qQ[t])?!!e[t]:!1}function hv(){return WQ}var $Q=Lt({},Ud,{key:function(t){if(t.key){var e=zQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hv,charCode:function(t){return t.type==="keypress"?Sf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZQ=Mr($Q),JQ=Lt({},fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wB=Mr(JQ),XQ=Lt({},Ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hv}),YQ=Mr(XQ),eP=Lt({},fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),tP=Mr(eP),nP=Lt({},fg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rP=Mr(nP),sP=[9,13,27,32],fv=Ri&&"CompositionEvent"in window,Cu=null;Ri&&"documentMode"in document&&(Cu=document.documentMode);var iP=Ri&&"TextEvent"in window&&!Cu,v1=Ri&&(!fv||Cu&&8<Cu&&11>=Cu),vB=" ",xB=!1;function x1(t,e){switch(t){case"keyup":return sP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pl=!1;function aP(t,e){switch(t){case"compositionend":return _1(e);case"keypress":return e.which!==32?null:(xB=!0,vB);case"textInput":return t=e.data,t===vB&&xB?null:t;default:return null}}function oP(t,e){if(pl)return t==="compositionend"||!fv&&x1(t,e)?(t=w1(),kf=uv=Pa=null,pl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return v1&&e.locale!=="ko"?null:e.data;default:return null}}var AP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _B(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AP[t.type]:e==="textarea"}function B1(t,e,n,r){e1(r),e=um(e,"onChange"),0<e.length&&(n=new dv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Eu=null,Yu=null;function lP(t){Q1(t,0)}function mg(t){var e=vl(t);if(qI(e))return t}function cP(t,e){if(t==="change")return e}var b1=!1;if(Ri){var Op;if(Ri){var Hp="oninput"in document;if(!Hp){var BB=document.createElement("div");BB.setAttribute("oninput","return;"),Hp=typeof BB.oninput=="function"}Op=Hp}else Op=!1;b1=Op&&(!document.documentMode||9<document.documentMode)}function bB(){Eu&&(Eu.detachEvent("onpropertychange",C1),Yu=Eu=null)}function C1(t){if(t.propertyName==="value"&&mg(Yu)){var e=[];B1(e,Yu,t,av(t)),s1(lP,e)}}function uP(t,e,n){t==="focusin"?(bB(),Eu=e,Yu=n,Eu.attachEvent("onpropertychange",C1)):t==="focusout"&&bB()}function dP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mg(Yu)}function hP(t,e){if(t==="click")return mg(e)}function fP(t,e){if(t==="input"||t==="change")return mg(e)}function mP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:mP;function ed(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Z0.call(e,s)||!bs(t[s],e[s]))return!1}return!0}function CB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function EB(t,e){var n=CB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CB(n)}}function E1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function I1(){for(var t=window,e=sm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sm(t.document)}return e}function mv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gP(t){var e=I1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E1(n.ownerDocument.documentElement,n)){if(r!==null&&mv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=EB(n,i);var o=EB(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pP=Ri&&"documentMode"in document&&11>=document.documentMode,yl=null,my=null,Iu=null,gy=!1;function IB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gy||yl==null||yl!==sm(r)||(r=yl,"selectionStart"in r&&mv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Iu&&ed(Iu,r)||(Iu=r,r=um(my,"onSelect"),0<r.length&&(e=new dv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yl)))}function Nh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wl={animationend:Nh("Animation","AnimationEnd"),animationiteration:Nh("Animation","AnimationIteration"),animationstart:Nh("Animation","AnimationStart"),transitionend:Nh("Transition","TransitionEnd")},Vp={},T1={};Ri&&(T1=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function gg(t){if(Vp[t])return Vp[t];if(!wl[t])return t;var e=wl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in T1)return Vp[t]=e[n];return t}var k1=gg("animationend"),S1=gg("animationiteration"),N1=gg("animationstart"),U1=gg("transitionend"),F1=new Map,TB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lo(t,e){F1.set(t,e),BA(e,[t])}for(var Kp=0;Kp<TB.length;Kp++){var zp=TB[Kp],yP=zp.toLowerCase(),wP=zp[0].toUpperCase()+zp.slice(1);lo(yP,"on"+wP)}lo(k1,"onAnimationEnd");lo(S1,"onAnimationIteration");lo(N1,"onAnimationStart");lo("dblclick","onDoubleClick");lo("focusin","onFocus");lo("focusout","onBlur");lo(U1,"onTransitionEnd");Vl("onMouseEnter",["mouseout","mouseover"]);Vl("onMouseLeave",["mouseout","mouseover"]);Vl("onPointerEnter",["pointerout","pointerover"]);Vl("onPointerLeave",["pointerout","pointerover"]);BA("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));BA("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));BA("onBeforeInput",["compositionend","keypress","textInput","paste"]);BA("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));BA("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));BA("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vP=new Set("cancel close invalid load scroll toggle".split(" ").concat(lu));function kB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yQ(r,e,void 0,t),t.currentTarget=null}function Q1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;kB(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;kB(s,l,h),i=u}}}if(am)throw t=uy,am=!1,uy=null,t}function Bt(t,e){var n=e[xy];n===void 0&&(n=e[xy]=new Set);var r=t+"__bubble";n.has(r)||(P1(e,t,2,!1),n.add(r))}function Gp(t,e,n){var r=0;e&&(r|=4),P1(n,t,r,e)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function td(t){if(!t[Uh]){t[Uh]=!0,HI.forEach(function(n){n!=="selectionchange"&&(vP.has(n)||Gp(n,!1,t),Gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uh]||(e[Uh]=!0,Gp("selectionchange",!1,e))}}function P1(t,e,n,r){switch(y1(e)){case 1:var s=QQ;break;case 4:s=PQ;break;default:s=cv}n=s.bind(null,e,n,t),s=void 0,!cy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Oo(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}s1(function(){var h=i,m=av(n),p=[];e:{var w=F1.get(t);if(w!==void 0){var C=dv,b=t;switch(t){case"keypress":if(Sf(n)===0)break e;case"keydown":case"keyup":C=ZQ;break;case"focusin":b="focus",C=Mp;break;case"focusout":b="blur",C=Mp;break;case"beforeblur":case"afterblur":C=Mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=pB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=jQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=YQ;break;case k1:case S1:case N1:C=OQ;break;case U1:C=tP;break;case"scroll":C=RQ;break;case"wheel":C=rP;break;case"copy":case"cut":case"paste":C=VQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=wB}var x=(e&4)!==0,U=!x&&t==="scroll",T=x?w!==null?w+"Capture":null:w;x=[];for(var E=h,N;E!==null;){N=E;var H=N.stateNode;if(N.tag===5&&H!==null&&(N=H,T!==null&&(H=$u(E,T),H!=null&&x.push(nd(E,H,N)))),U)break;E=E.return}0<x.length&&(w=new C(w,b,null,n,m),p.push({event:w,listeners:x}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",w&&n!==Ay&&(b=n.relatedTarget||n.fromElement)&&(Oo(b)||b[Li]))break e;if((C||w)&&(w=m.window===m?m:(w=m.ownerDocument)?w.defaultView||w.parentWindow:window,C?(b=n.relatedTarget||n.toElement,C=h,b=b?Oo(b):null,b!==null&&(U=bA(b),b!==U||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=h),C!==b)){if(x=pB,H="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=wB,H="onPointerLeave",T="onPointerEnter",E="pointer"),U=C==null?w:vl(C),N=b==null?w:vl(b),w=new x(H,E+"leave",C,n,m),w.target=U,w.relatedTarget=N,H=null,Oo(m)===h&&(x=new x(T,E+"enter",b,n,m),x.target=N,x.relatedTarget=U,H=x),U=H,C&&b)t:{for(x=C,T=b,E=0,N=x;N;N=ZA(N))E++;for(N=0,H=T;H;H=ZA(H))N++;for(;0<E-N;)x=ZA(x),E--;for(;0<N-E;)T=ZA(T),N--;for(;E--;){if(x===T||T!==null&&x===T.alternate)break t;x=ZA(x),T=ZA(T)}x=null}else x=null;C!==null&&SB(p,w,C,x,!1),b!==null&&U!==null&&SB(p,U,b,x,!0)}}e:{if(w=h?vl(h):window,C=w.nodeName&&w.nodeName.toLowerCase(),C==="select"||C==="input"&&w.type==="file")var V=cP;else if(_B(w))if(b1)V=fP;else{V=dP;var M=uP}else(C=w.nodeName)&&C.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(V=hP);if(V&&(V=V(t,h))){B1(p,V,n,m);break e}M&&M(t,w,h),t==="focusout"&&(M=w._wrapperState)&&M.controlled&&w.type==="number"&&ry(w,"number",w.value)}switch(M=h?vl(h):window,t){case"focusin":(_B(M)||M.contentEditable==="true")&&(yl=M,my=h,Iu=null);break;case"focusout":Iu=my=yl=null;break;case"mousedown":gy=!0;break;case"contextmenu":case"mouseup":case"dragend":gy=!1,IB(p,n,m);break;case"selectionchange":if(pP)break;case"keydown":case"keyup":IB(p,n,m)}var I;if(fv)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else pl?x1(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(v1&&n.locale!=="ko"&&(pl||B!=="onCompositionStart"?B==="onCompositionEnd"&&pl&&(I=w1()):(Pa=m,uv="value"in Pa?Pa.value:Pa.textContent,pl=!0)),M=um(h,B),0<M.length&&(B=new yB(B,t,null,n,m),p.push({event:B,listeners:M}),I?B.data=I:(I=_1(n),I!==null&&(B.data=I)))),(I=iP?aP(t,n):oP(t,n))&&(h=um(h,"onBeforeInput"),0<h.length&&(m=new yB("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=I))}Q1(p,e)})}function nd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function um(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$u(t,n),i!=null&&r.unshift(nd(t,i,s)),i=$u(t,e),i!=null&&r.push(nd(t,i,s))),t=t.return}return r}function ZA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SB(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=$u(n,i),u!=null&&o.unshift(nd(n,u,l))):s||(u=$u(n,i),u!=null&&o.push(nd(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xP=/\r\n?/g,_P=/\u0000|\uFFFD/g;function NB(t){return(typeof t=="string"?t:""+t).replace(xP,`
`).replace(_P,"")}function Fh(t,e,n){if(e=NB(e),NB(t)!==e&&n)throw Error(ie(425))}function dm(){}var py=null,yy=null;function wy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vy=typeof setTimeout=="function"?setTimeout:void 0,BP=typeof clearTimeout=="function"?clearTimeout:void 0,UB=typeof Promise=="function"?Promise:void 0,bP=typeof queueMicrotask=="function"?queueMicrotask:typeof UB<"u"?function(t){return UB.resolve(null).then(t).catch(CP)}:vy;function CP(t){setTimeout(function(){throw t})}function Wp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xu(e)}function za(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function FB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mc=Math.random().toString(36).slice(2),Ms="__reactFiber$"+mc,rd="__reactProps$"+mc,Li="__reactContainer$"+mc,xy="__reactEvents$"+mc,EP="__reactListeners$"+mc,IP="__reactHandles$"+mc;function Oo(t){var e=t[Ms];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Li]||n[Ms]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=FB(t);t!==null;){if(n=t[Ms])return n;t=FB(t)}return e}t=n,n=t.parentNode}return null}function Fd(t){return t=t[Ms]||t[Li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function pg(t){return t[rd]||null}var _y=[],xl=-1;function co(t){return{current:t}}function bt(t){0>xl||(t.current=_y[xl],_y[xl]=null,xl--)}function pt(t,e){xl++,_y[xl]=t.current,t.current=e}var to={},Hn=co(to),vr=co(!1),eA=to;function Kl(t,e){var n=t.type.contextTypes;if(!n)return to;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xr(t){return t=t.childContextTypes,t!=null}function hm(){bt(vr),bt(Hn)}function QB(t,e,n){if(Hn.current!==to)throw Error(ie(168));pt(Hn,e),pt(vr,n)}function R1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ie(108,uQ(t)||"Unknown",s));return Lt({},n,r)}function fm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||to,eA=Hn.current,pt(Hn,t),pt(vr,vr.current),!0}function PB(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=R1(t,e,eA),r.__reactInternalMemoizedMergedChildContext=t,bt(vr),bt(Hn),pt(Hn,t)):bt(vr),pt(vr,n)}var _i=null,yg=!1,$p=!1;function L1(t){_i===null?_i=[t]:_i.push(t)}function TP(t){yg=!0,L1(t)}function uo(){if(!$p&&_i!==null){$p=!0;var t=0,e=lt;try{var n=_i;for(lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_i=null,yg=!1}catch(s){throw _i!==null&&(_i=_i.slice(t+1)),A1(ov,uo),s}finally{lt=e,$p=!1}}return null}var _l=[],Bl=0,mm=null,gm=0,Wr=[],$r=0,tA=null,bi=1,Ci="";function No(t,e){_l[Bl++]=gm,_l[Bl++]=mm,mm=t,gm=e}function j1(t,e,n){Wr[$r++]=bi,Wr[$r++]=Ci,Wr[$r++]=tA,tA=t;var r=bi;t=Ci;var s=32-vs(r)-1;r&=~(1<<s),n+=1;var i=32-vs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bi=1<<32-vs(e)+s|n<<s|r,Ci=i+t}else bi=1<<i|n<<s|r,Ci=t}function gv(t){t.return!==null&&(No(t,1),j1(t,1,0))}function pv(t){for(;t===mm;)mm=_l[--Bl],_l[Bl]=null,gm=_l[--Bl],_l[Bl]=null;for(;t===tA;)tA=Wr[--$r],Wr[$r]=null,Ci=Wr[--$r],Wr[$r]=null,bi=Wr[--$r],Wr[$r]=null}var Qr=null,Nr=null,Tt=!1,ps=null;function D1(t,e){var n=Jr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function RB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qr=t,Nr=za(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qr=t,Nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=tA!==null?{id:bi,overflow:Ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qr=t,Nr=null,!0):!1;default:return!1}}function By(t){return(t.mode&1)!==0&&(t.flags&128)===0}function by(t){if(Tt){var e=Nr;if(e){var n=e;if(!RB(t,e)){if(By(t))throw Error(ie(418));e=za(n.nextSibling);var r=Qr;e&&RB(t,e)?D1(r,n):(t.flags=t.flags&-4097|2,Tt=!1,Qr=t)}}else{if(By(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Tt=!1,Qr=t}}}function LB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qr=t}function Qh(t){if(t!==Qr)return!1;if(!Tt)return LB(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wy(t.type,t.memoizedProps)),e&&(e=Nr)){if(By(t))throw M1(),Error(ie(418));for(;e;)D1(t,e),e=za(e.nextSibling)}if(LB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nr=za(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nr=null}}else Nr=Qr?za(t.stateNode.nextSibling):null;return!0}function M1(){for(var t=Nr;t;)t=za(t.nextSibling)}function zl(){Nr=Qr=null,Tt=!1}function yv(t){ps===null?ps=[t]:ps.push(t)}var kP=Ki.ReactCurrentBatchConfig;function Kc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Ph(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jB(t){var e=t._init;return e(t._payload)}function O1(t){function e(T,E){if(t){var N=T.deletions;N===null?(T.deletions=[E],T.flags|=16):N.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function r(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function s(T,E){return T=$a(T,E),T.index=0,T.sibling=null,T}function i(T,E,N){return T.index=N,t?(N=T.alternate,N!==null?(N=N.index,N<E?(T.flags|=2,E):N):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,E,N,H){return E===null||E.tag!==6?(E=n0(N,T.mode,H),E.return=T,E):(E=s(E,N),E.return=T,E)}function u(T,E,N,H){var V=N.type;return V===gl?m(T,E,N.props.children,H,N.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ba&&jB(V)===E.type)?(H=s(E,N.props),H.ref=Kc(T,E,N),H.return=T,H):(H=Lf(N.type,N.key,N.props,null,T.mode,H),H.ref=Kc(T,E,N),H.return=T,H)}function h(T,E,N,H){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=r0(N,T.mode,H),E.return=T,E):(E=s(E,N.children||[]),E.return=T,E)}function m(T,E,N,H,V){return E===null||E.tag!==7?(E=Wo(N,T.mode,H,V),E.return=T,E):(E=s(E,N),E.return=T,E)}function p(T,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return E=n0(""+E,T.mode,N),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bh:return N=Lf(E.type,E.key,E.props,null,T.mode,N),N.ref=Kc(T,null,E),N.return=T,N;case ml:return E=r0(E,T.mode,N),E.return=T,E;case Ba:var H=E._init;return p(T,H(E._payload),N)}if(ou(E)||Dc(E))return E=Wo(E,T.mode,N,null),E.return=T,E;Ph(T,E)}return null}function w(T,E,N,H){var V=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return V!==null?null:l(T,E,""+N,H);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case bh:return N.key===V?u(T,E,N,H):null;case ml:return N.key===V?h(T,E,N,H):null;case Ba:return V=N._init,w(T,E,V(N._payload),H)}if(ou(N)||Dc(N))return V!==null?null:m(T,E,N,H,null);Ph(T,N)}return null}function C(T,E,N,H,V){if(typeof H=="string"&&H!==""||typeof H=="number")return T=T.get(N)||null,l(E,T,""+H,V);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case bh:return T=T.get(H.key===null?N:H.key)||null,u(E,T,H,V);case ml:return T=T.get(H.key===null?N:H.key)||null,h(E,T,H,V);case Ba:var M=H._init;return C(T,E,N,M(H._payload),V)}if(ou(H)||Dc(H))return T=T.get(N)||null,m(E,T,H,V,null);Ph(E,H)}return null}function b(T,E,N,H){for(var V=null,M=null,I=E,B=E=0,S=null;I!==null&&B<N.length;B++){I.index>B?(S=I,I=null):S=I.sibling;var P=w(T,I,N[B],H);if(P===null){I===null&&(I=S);break}t&&I&&P.alternate===null&&e(T,I),E=i(P,E,B),M===null?V=P:M.sibling=P,M=P,I=S}if(B===N.length)return n(T,I),Tt&&No(T,B),V;if(I===null){for(;B<N.length;B++)I=p(T,N[B],H),I!==null&&(E=i(I,E,B),M===null?V=I:M.sibling=I,M=I);return Tt&&No(T,B),V}for(I=r(T,I);B<N.length;B++)S=C(I,T,B,N[B],H),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?B:S.key),E=i(S,E,B),M===null?V=S:M.sibling=S,M=S);return t&&I.forEach(function(D){return e(T,D)}),Tt&&No(T,B),V}function x(T,E,N,H){var V=Dc(N);if(typeof V!="function")throw Error(ie(150));if(N=V.call(N),N==null)throw Error(ie(151));for(var M=V=null,I=E,B=E=0,S=null,P=N.next();I!==null&&!P.done;B++,P=N.next()){I.index>B?(S=I,I=null):S=I.sibling;var D=w(T,I,P.value,H);if(D===null){I===null&&(I=S);break}t&&I&&D.alternate===null&&e(T,I),E=i(D,E,B),M===null?V=D:M.sibling=D,M=D,I=S}if(P.done)return n(T,I),Tt&&No(T,B),V;if(I===null){for(;!P.done;B++,P=N.next())P=p(T,P.value,H),P!==null&&(E=i(P,E,B),M===null?V=P:M.sibling=P,M=P);return Tt&&No(T,B),V}for(I=r(T,I);!P.done;B++,P=N.next())P=C(I,T,B,P.value,H),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?B:P.key),E=i(P,E,B),M===null?V=P:M.sibling=P,M=P);return t&&I.forEach(function(O){return e(T,O)}),Tt&&No(T,B),V}function U(T,E,N,H){if(typeof N=="object"&&N!==null&&N.type===gl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case bh:e:{for(var V=N.key,M=E;M!==null;){if(M.key===V){if(V=N.type,V===gl){if(M.tag===7){n(T,M.sibling),E=s(M,N.props.children),E.return=T,T=E;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ba&&jB(V)===M.type){n(T,M.sibling),E=s(M,N.props),E.ref=Kc(T,M,N),E.return=T,T=E;break e}n(T,M);break}else e(T,M);M=M.sibling}N.type===gl?(E=Wo(N.props.children,T.mode,H,N.key),E.return=T,T=E):(H=Lf(N.type,N.key,N.props,null,T.mode,H),H.ref=Kc(T,E,N),H.return=T,T=H)}return o(T);case ml:e:{for(M=N.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){n(T,E.sibling),E=s(E,N.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=r0(N,T.mode,H),E.return=T,T=E}return o(T);case Ba:return M=N._init,U(T,E,M(N._payload),H)}if(ou(N))return b(T,E,N,H);if(Dc(N))return x(T,E,N,H);Ph(T,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,E!==null&&E.tag===6?(n(T,E.sibling),E=s(E,N),E.return=T,T=E):(n(T,E),E=n0(N,T.mode,H),E.return=T,T=E),o(T)):n(T,E)}return U}var Gl=O1(!0),H1=O1(!1),pm=co(null),ym=null,bl=null,wv=null;function vv(){wv=bl=ym=null}function xv(t){var e=pm.current;bt(pm),t._currentValue=e}function Cy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fl(t,e){ym=t,wv=bl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pr=!0),t.firstContext=null)}function ts(t){var e=t._currentValue;if(wv!==t)if(t={context:t,memoizedValue:e,next:null},bl===null){if(ym===null)throw Error(ie(308));bl=t,ym.dependencies={lanes:0,firstContext:t}}else bl=bl.next=t;return e}var Ho=null;function _v(t){Ho===null?Ho=[t]:Ho.push(t)}function V1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_v(e)):(n.next=s.next,s.next=n),e.interleaved=n,ji(t,r)}function ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ba=!1;function Bv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ga(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ji(t,n)}return s=r.interleaved,s===null?(e.next=e,_v(r)):(e.next=s.next,s.next=e),r.interleaved=e,ji(t,n)}function Nf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}function DB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wm(t,e,n,r){var s=t.updateQueue;ba=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=h=u=null,l=i;do{var w=l.lane,C=l.eventTime;if((r&w)===w){m!==null&&(m=m.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,x=l;switch(w=e,C=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(C,p,w);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,w=typeof b=="function"?b.call(C,p,w):b,w==null)break e;p=Lt({},p,w);break e;case 2:ba=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,w=s.effects,w===null?s.effects=[l]:w.push(l))}else C={eventTime:C,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=C,u=p):m=m.next=C,o|=w;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;w=l,l=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rA|=o,t.lanes=o,t.memoizedState=p}}function MB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ie(191,s));s.call(r)}}}var Qd={},qs=co(Qd),sd=co(Qd),id=co(Qd);function Vo(t){if(t===Qd)throw Error(ie(174));return t}function bv(t,e){switch(pt(id,e),pt(sd,t),pt(qs,Qd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=iy(e,t)}bt(qs),pt(qs,e)}function ql(){bt(qs),bt(sd),bt(id)}function z1(t){Vo(id.current);var e=Vo(qs.current),n=iy(e,t.type);e!==n&&(pt(sd,t),pt(qs,n))}function Cv(t){sd.current===t&&(bt(qs),bt(sd))}var Qt=co(0);function vm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zp=[];function Ev(){for(var t=0;t<Zp.length;t++)Zp[t]._workInProgressVersionPrimary=null;Zp.length=0}var Uf=Ki.ReactCurrentDispatcher,Jp=Ki.ReactCurrentBatchConfig,nA=0,Rt=null,An=null,vn=null,xm=!1,Tu=!1,ad=0,SP=0;function Nn(){throw Error(ie(321))}function Iv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function Tv(t,e,n,r,s,i){if(nA=i,Rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uf.current=t===null||t.memoizedState===null?QP:PP,t=n(r,s),Tu){i=0;do{if(Tu=!1,ad=0,25<=i)throw Error(ie(301));i+=1,vn=An=null,e.updateQueue=null,Uf.current=RP,t=n(r,s)}while(Tu)}if(Uf.current=_m,e=An!==null&&An.next!==null,nA=0,vn=An=Rt=null,xm=!1,e)throw Error(ie(300));return t}function kv(){var t=ad!==0;return ad=0,t}function Ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Rt.memoizedState=vn=t:vn=vn.next=t,vn}function ns(){if(An===null){var t=Rt.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var e=vn===null?Rt.memoizedState:vn.next;if(e!==null)vn=e,An=t;else{if(t===null)throw Error(ie(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},vn===null?Rt.memoizedState=vn=t:vn=vn.next=t}return vn}function od(t,e){return typeof e=="function"?e(t):e}function Xp(t){var e=ns(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=An,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var m=h.lane;if((nA&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Rt.lanes|=m,rA|=m}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,bs(r,e.memoizedState)||(pr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Rt.lanes|=i,rA|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=ns(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bs(i,e.memoizedState)||(pr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function G1(){}function q1(t,e){var n=Rt,r=ns(),s=e(),i=!bs(r.memoizedState,s);if(i&&(r.memoizedState=s,pr=!0),r=r.queue,Sv(Z1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vn!==null&&vn.memoizedState.tag&1){if(n.flags|=2048,Ad(9,$1.bind(null,n,r,s,e),void 0,null),xn===null)throw Error(ie(349));nA&30||W1(n,e,s)}return s}function W1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $1(t,e,n,r){e.value=n,e.getSnapshot=r,J1(e)&&X1(t)}function Z1(t,e,n){return n(function(){J1(e)&&X1(t)})}function J1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function X1(t){var e=ji(t,1);e!==null&&xs(e,t,1,-1)}function OB(t){var e=Ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:t},e.queue=t,t=t.dispatch=FP.bind(null,Rt,t),[e.memoizedState,t]}function Ad(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Y1(){return ns().memoizedState}function Ff(t,e,n,r){var s=Ds();Rt.flags|=t,s.memoizedState=Ad(1|e,n,void 0,r===void 0?null:r)}function wg(t,e,n,r){var s=ns();r=r===void 0?null:r;var i=void 0;if(An!==null){var o=An.memoizedState;if(i=o.destroy,r!==null&&Iv(r,o.deps)){s.memoizedState=Ad(e,n,i,r);return}}Rt.flags|=t,s.memoizedState=Ad(1|e,n,i,r)}function HB(t,e){return Ff(8390656,8,t,e)}function Sv(t,e){return wg(2048,8,t,e)}function eT(t,e){return wg(4,2,t,e)}function tT(t,e){return wg(4,4,t,e)}function nT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rT(t,e,n){return n=n!=null?n.concat([t]):null,wg(4,4,nT.bind(null,e,t),n)}function Nv(){}function sT(t,e){var n=ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iT(t,e){var n=ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aT(t,e,n){return nA&21?(bs(n,e)||(n=u1(),Rt.lanes|=n,rA|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pr=!0),t.memoizedState=n)}function NP(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var r=Jp.transition;Jp.transition={};try{t(!1),e()}finally{lt=n,Jp.transition=r}}function oT(){return ns().memoizedState}function UP(t,e,n){var r=Wa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AT(t))lT(e,n);else if(n=V1(t,e,n,r),n!==null){var s=rr();xs(n,t,r,s),cT(n,e,r)}}function FP(t,e,n){var r=Wa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AT(t))lT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,bs(l,o)){var u=e.interleaved;u===null?(s.next=s,_v(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=V1(t,e,s,r),n!==null&&(s=rr(),xs(n,t,r,s),cT(n,e,r))}}function AT(t){var e=t.alternate;return t===Rt||e!==null&&e===Rt}function lT(t,e){Tu=xm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}var _m={readContext:ts,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},QP={readContext:ts,useCallback:function(t,e){return Ds().memoizedState=[t,e===void 0?null:e],t},useContext:ts,useEffect:HB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ff(4194308,4,nT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ff(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ff(4,2,t,e)},useMemo:function(t,e){var n=Ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ds();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=UP.bind(null,Rt,t),[r.memoizedState,t]},useRef:function(t){var e=Ds();return t={current:t},e.memoizedState=t},useState:OB,useDebugValue:Nv,useDeferredValue:function(t){return Ds().memoizedState=t},useTransition:function(){var t=OB(!1),e=t[0];return t=NP.bind(null,t[1]),Ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Rt,s=Ds();if(Tt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),xn===null)throw Error(ie(349));nA&30||W1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,HB(Z1.bind(null,r,i,t),[t]),r.flags|=2048,Ad(9,$1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ds(),e=xn.identifierPrefix;if(Tt){var n=Ci,r=bi;n=(r&~(1<<32-vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ad++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PP={readContext:ts,useCallback:sT,useContext:ts,useEffect:Sv,useImperativeHandle:rT,useInsertionEffect:eT,useLayoutEffect:tT,useMemo:iT,useReducer:Xp,useRef:Y1,useState:function(){return Xp(od)},useDebugValue:Nv,useDeferredValue:function(t){var e=ns();return aT(e,An.memoizedState,t)},useTransition:function(){var t=Xp(od)[0],e=ns().memoizedState;return[t,e]},useMutableSource:G1,useSyncExternalStore:q1,useId:oT,unstable_isNewReconciler:!1},RP={readContext:ts,useCallback:sT,useContext:ts,useEffect:Sv,useImperativeHandle:rT,useInsertionEffect:eT,useLayoutEffect:tT,useMemo:iT,useReducer:Yp,useRef:Y1,useState:function(){return Yp(od)},useDebugValue:Nv,useDeferredValue:function(t){var e=ns();return An===null?e.memoizedState=t:aT(e,An.memoizedState,t)},useTransition:function(){var t=Yp(od)[0],e=ns().memoizedState;return[t,e]},useMutableSource:G1,useSyncExternalStore:q1,useId:oT,unstable_isNewReconciler:!1};function ms(t,e){if(t&&t.defaultProps){e=Lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ey(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vg={isMounted:function(t){return(t=t._reactInternals)?bA(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rr(),s=Wa(t),i=Ni(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ga(t,i,s),e!==null&&(xs(e,t,s,r),Nf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rr(),s=Wa(t),i=Ni(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ga(t,i,s),e!==null&&(xs(e,t,s,r),Nf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rr(),r=Wa(t),s=Ni(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ga(t,s,r),e!==null&&(xs(e,t,r,n),Nf(e,t,r))}};function VB(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ed(n,r)||!ed(s,i):!0}function uT(t,e,n){var r=!1,s=to,i=e.contextType;return typeof i=="object"&&i!==null?i=ts(i):(s=xr(e)?eA:Hn.current,r=e.contextTypes,i=(r=r!=null)?Kl(t,s):to),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function KB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vg.enqueueReplaceState(e,e.state,null)}function Iy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ts(i):(i=xr(e)?eA:Hn.current,s.context=Kl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ey(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vg.enqueueReplaceState(s,s.state,null),wm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wl(t,e){try{var n="",r=e;do n+=cQ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function e0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ty(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var LP=typeof WeakMap=="function"?WeakMap:Map;function dT(t,e,n){n=Ni(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bm||(bm=!0,jy=r),Ty(t,e)},n}function hT(t,e,n){n=Ni(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ty(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ty(t,e),typeof r!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new LP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=JP.bind(null,t,e,n),e.then(t,t))}function GB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qB(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ni(-1,1),e.tag=2,Ga(n,e,1))),n.lanes|=1),t)}var jP=Ki.ReactCurrentOwner,pr=!1;function er(t,e,n,r){e.child=t===null?H1(e,null,n,r):Gl(e,t.child,n,r)}function WB(t,e,n,r,s){n=n.render;var i=e.ref;return Fl(e,s),r=Tv(t,e,n,r,i,s),n=kv(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Di(t,e,s)):(Tt&&n&&gv(e),e.flags|=1,er(t,e,r,s),e.child)}function $B(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Dv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,fT(t,e,i,r,s)):(t=Lf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ed,n(o,r)&&t.ref===e.ref)return Di(t,e,s)}return e.flags|=1,t=$a(i,r),t.ref=e.ref,t.return=e,e.child=t}function fT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ed(i,r)&&t.ref===e.ref)if(pr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(pr=!0);else return e.lanes=t.lanes,Di(t,e,s)}return ky(t,e,n,r,s)}function mT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(El,Sr),Sr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(El,Sr),Sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pt(El,Sr),Sr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pt(El,Sr),Sr|=r;return er(t,e,s,n),e.child}function gT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ky(t,e,n,r,s){var i=xr(n)?eA:Hn.current;return i=Kl(e,i),Fl(e,s),n=Tv(t,e,n,r,i,s),r=kv(),t!==null&&!pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Di(t,e,s)):(Tt&&r&&gv(e),e.flags|=1,er(t,e,n,s),e.child)}function ZB(t,e,n,r,s){if(xr(n)){var i=!0;fm(e)}else i=!1;if(Fl(e,s),e.stateNode===null)Qf(t,e),uT(e,n,r),Iy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=ts(h):(h=xr(n)?eA:Hn.current,h=Kl(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&KB(e,o,r,h),ba=!1;var w=e.memoizedState;o.state=w,wm(e,r,o,s),u=e.memoizedState,l!==r||w!==u||vr.current||ba?(typeof m=="function"&&(Ey(e,n,m,r),u=e.memoizedState),(l=ba||VB(e,n,l,r,w,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,K1(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:ms(e.type,l),o.props=h,p=e.pendingProps,w=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ts(u):(u=xr(n)?eA:Hn.current,u=Kl(e,u));var C=n.getDerivedStateFromProps;(m=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||w!==u)&&KB(e,o,r,u),ba=!1,w=e.memoizedState,o.state=w,wm(e,r,o,s);var b=e.memoizedState;l!==p||w!==b||vr.current||ba?(typeof C=="function"&&(Ey(e,n,C,r),b=e.memoizedState),(h=ba||VB(e,n,h,r,w,b,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Sy(t,e,n,r,i,s)}function Sy(t,e,n,r,s,i){gT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&PB(e,n,!1),Di(t,e,i);r=e.stateNode,jP.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gl(e,t.child,null,i),e.child=Gl(e,null,l,i)):er(t,e,l,i),e.memoizedState=r.state,s&&PB(e,n,!0),e.child}function pT(t){var e=t.stateNode;e.pendingContext?QB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&QB(t,e.context,!1),bv(t,e.containerInfo)}function JB(t,e,n,r,s){return zl(),yv(s),e.flags|=256,er(t,e,n,r),e.child}var Ny={dehydrated:null,treeContext:null,retryLane:0};function Uy(t){return{baseLanes:t,cachePool:null,transitions:null}}function yT(t,e,n){var r=e.pendingProps,s=Qt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(Qt,s&1),t===null)return by(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Bg(o,r,0,null),t=Wo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Uy(n),e.memoizedState=Ny,t):Uv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return DP(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$a(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$a(l,i):(i=Wo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Uy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ny,r}return i=t.child,t=i.sibling,r=$a(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uv(t,e){return e=Bg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rh(t,e,n,r){return r!==null&&yv(r),Gl(e,t.child,null,n),t=Uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=e0(Error(ie(422))),Rh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Bg({mode:"visible",children:r.children},s,0,null),i=Wo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Gl(e,t.child,null,o),e.child.memoizedState=Uy(o),e.memoizedState=Ny,i);if(!(e.mode&1))return Rh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ie(419)),r=e0(i,r,void 0),Rh(t,e,o,r)}if(l=(o&t.childLanes)!==0,pr||l){if(r=xn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ji(t,s),xs(r,t,s,-1))}return jv(),r=e0(Error(ie(421))),Rh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=XP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nr=za(s.nextSibling),Qr=e,Tt=!0,ps=null,t!==null&&(Wr[$r++]=bi,Wr[$r++]=Ci,Wr[$r++]=tA,bi=t.id,Ci=t.overflow,tA=e),e=Uv(e,r.children),e.flags|=4096,e)}function XB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cy(t.return,e,n)}function t0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(er(t,e,r.children,n),r=Qt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XB(t,n,e);else if(t.tag===19)XB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(Qt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),t0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}t0(e,!0,n,null,i);break;case"together":t0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rA|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=$a(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$a(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MP(t,e,n){switch(e.tag){case 3:pT(e),zl();break;case 5:z1(e);break;case 1:xr(e.type)&&fm(e);break;case 4:bv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pt(pm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(Qt,Qt.current&1),e.flags|=128,null):n&e.child.childLanes?yT(t,e,n):(pt(Qt,Qt.current&1),t=Di(t,e,n),t!==null?t.sibling:null);pt(Qt,Qt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(Qt,Qt.current),r)break;return null;case 22:case 23:return e.lanes=0,mT(t,e,n)}return Di(t,e,n)}var vT,Fy,xT,_T;vT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fy=function(){};xT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vo(qs.current);var i=null;switch(n){case"input":s=ty(t,s),r=ty(t,r),i=[];break;case"select":s=Lt({},s,{value:void 0}),r=Lt({},r,{value:void 0}),i=[];break;case"textarea":s=sy(t,s),r=sy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dm)}ay(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(qu.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(qu.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Bt("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};_T=function(t,e,n,r){n!==r&&(e.flags|=4)};function zc(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OP(t,e,n){var r=e.pendingProps;switch(pv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return xr(e.type)&&hm(),Un(e),null;case 3:return r=e.stateNode,ql(),bt(vr),bt(Hn),Ev(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ps!==null&&(Oy(ps),ps=null))),Fy(t,e),Un(e),null;case 5:Cv(e);var s=Vo(id.current);if(n=e.type,t!==null&&e.stateNode!=null)xT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Un(e),null}if(t=Vo(qs.current),Qh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ms]=e,r[rd]=i,t=(e.mode&1)!==0,n){case"dialog":Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":case"embed":Bt("load",r);break;case"video":case"audio":for(s=0;s<lu.length;s++)Bt(lu[s],r);break;case"source":Bt("error",r);break;case"img":case"image":case"link":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"input":oB(r,i),Bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",r);break;case"textarea":lB(r,i),Bt("invalid",r)}ay(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Fh(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Fh(r.textContent,l,t),s=["children",""+l]):qu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Bt("scroll",r)}switch(n){case"input":Ch(r),AB(r,i,!0);break;case"textarea":Ch(r),cB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ms]=e,t[rd]=r,vT(t,e,!1,!1),e.stateNode=t;e:{switch(o=oy(n,r),n){case"dialog":Bt("cancel",t),Bt("close",t),s=r;break;case"iframe":case"object":case"embed":Bt("load",t),s=r;break;case"video":case"audio":for(s=0;s<lu.length;s++)Bt(lu[s],t);s=r;break;case"source":Bt("error",t),s=r;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),s=r;break;case"details":Bt("toggle",t),s=r;break;case"input":oB(t,r),s=ty(t,r),Bt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Lt({},r,{value:void 0}),Bt("invalid",t);break;case"textarea":lB(t,r),s=sy(t,r),Bt("invalid",t);break;default:s=r}ay(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?YI(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&JI(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wu(t,u):typeof u=="number"&&Wu(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qu.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Bt("scroll",t):u!=null&&nv(t,i,u,o))}switch(n){case"input":Ch(t),AB(t,r,!1);break;case"textarea":Ch(t),cB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+eo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?kl(t,!!r.multiple,i,!1):r.defaultValue!=null&&kl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)_T(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Vo(id.current),Vo(qs.current),Qh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ms]=e,(i=r.nodeValue!==n)&&(t=Qr,t!==null))switch(t.tag){case 3:Fh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ms]=e,e.stateNode=r}return Un(e),null;case 13:if(bt(Qt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&Nr!==null&&e.mode&1&&!(e.flags&128))M1(),zl(),e.flags|=98560,i=!1;else if(i=Qh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ie(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ie(317));i[Ms]=e}else zl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),i=!1}else ps!==null&&(Oy(ps),ps=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qt.current&1?dn===0&&(dn=3):jv())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return ql(),Fy(t,e),t===null&&td(e.stateNode.containerInfo),Un(e),null;case 10:return xv(e.type._context),Un(e),null;case 17:return xr(e.type)&&hm(),Un(e),null;case 19:if(bt(Qt),i=e.memoizedState,i===null)return Un(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)zc(i,!1);else{if(dn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vm(t),o!==null){for(e.flags|=128,zc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(Qt,Qt.current&1|2),e.child}t=t.sibling}i.tail!==null&&$t()>$l&&(e.flags|=128,r=!0,zc(i,!1),e.lanes=4194304)}else{if(!r)if(t=vm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Tt)return Un(e),null}else 2*$t()-i.renderingStartTime>$l&&n!==1073741824&&(e.flags|=128,r=!0,zc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$t(),e.sibling=null,n=Qt.current,pt(Qt,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return Lv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sr&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function HP(t,e){switch(pv(e),e.tag){case 1:return xr(e.type)&&hm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ql(),bt(vr),bt(Hn),Ev(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cv(e),null;case 13:if(bt(Qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));zl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(Qt),null;case 4:return ql(),null;case 10:return xv(e.type._context),null;case 22:case 23:return Lv(),null;case 24:return null;default:return null}}var Lh=!1,Ln=!1,VP=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Cl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dt(t,e,r)}else n.current=null}function Qy(t,e,n){try{n()}catch(r){Dt(t,e,r)}}var YB=!1;function KP(t,e){if(py=lm,t=I1(),mv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,m=0,p=t,w=null;t:for(;;){for(var C;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(C=p.firstChild)!==null;)w=p,p=C;for(;;){if(p===t)break t;if(w===n&&++h===s&&(l=o),w===i&&++m===r&&(u=o),(C=p.nextSibling)!==null)break;p=w,w=p.parentNode}p=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yy={focusedElem:t,selectionRange:n},lm=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,U=b.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?x:ms(e.type,x),U);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(H){Dt(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return b=YB,YB=!1,b}function ku(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Qy(e,n,i)}s=s.next}while(s!==r)}}function xg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Py(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function BT(t){var e=t.alternate;e!==null&&(t.alternate=null,BT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ms],delete e[rd],delete e[xy],delete e[EP],delete e[IP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bT(t){return t.tag===5||t.tag===3||t.tag===4}function eb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ry(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dm));else if(r!==4&&(t=t.child,t!==null))for(Ry(t,e,n),t=t.sibling;t!==null;)Ry(t,e,n),t=t.sibling}function Ly(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ly(t,e,n),t=t.sibling;t!==null;)Ly(t,e,n),t=t.sibling}var _n=null,gs=!1;function pa(t,e,n){for(n=n.child;n!==null;)CT(t,e,n),n=n.sibling}function CT(t,e,n){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(hg,n)}catch{}switch(n.tag){case 5:Ln||Cl(n,e);case 6:var r=_n,s=gs;_n=null,pa(t,e,n),_n=r,gs=s,_n!==null&&(gs?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(gs?(t=_n,n=n.stateNode,t.nodeType===8?Wp(t.parentNode,n):t.nodeType===1&&Wp(t,n),Xu(t)):Wp(_n,n.stateNode));break;case 4:r=_n,s=gs,_n=n.stateNode.containerInfo,gs=!0,pa(t,e,n),_n=r,gs=s;break;case 0:case 11:case 14:case 15:if(!Ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Qy(n,e,o),s=s.next}while(s!==r)}pa(t,e,n);break;case 1:if(!Ln&&(Cl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Dt(n,e,l)}pa(t,e,n);break;case 21:pa(t,e,n);break;case 22:n.mode&1?(Ln=(r=Ln)||n.memoizedState!==null,pa(t,e,n),Ln=r):pa(t,e,n);break;default:pa(t,e,n)}}function tb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VP),e.forEach(function(r){var s=YP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:_n=l.stateNode,gs=!1;break e;case 3:_n=l.stateNode.containerInfo,gs=!0;break e;case 4:_n=l.stateNode.containerInfo,gs=!0;break e}l=l.return}if(_n===null)throw Error(ie(160));CT(i,o,s),_n=null,gs=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Dt(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ET(e,t),e=e.sibling}function ET(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hs(e,t),Ls(t),r&4){try{ku(3,t,t.return),xg(3,t)}catch(x){Dt(t,t.return,x)}try{ku(5,t,t.return)}catch(x){Dt(t,t.return,x)}}break;case 1:hs(e,t),Ls(t),r&512&&n!==null&&Cl(n,n.return);break;case 5:if(hs(e,t),Ls(t),r&512&&n!==null&&Cl(n,n.return),t.flags&32){var s=t.stateNode;try{Wu(s,"")}catch(x){Dt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&WI(s,i),oy(l,o);var h=oy(l,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?YI(s,p):m==="dangerouslySetInnerHTML"?JI(s,p):m==="children"?Wu(s,p):nv(s,m,p,h)}switch(l){case"input":ny(s,i);break;case"textarea":$I(s,i);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?kl(s,!!i.multiple,C,!1):w!==!!i.multiple&&(i.defaultValue!=null?kl(s,!!i.multiple,i.defaultValue,!0):kl(s,!!i.multiple,i.multiple?[]:"",!1))}s[rd]=i}catch(x){Dt(t,t.return,x)}}break;case 6:if(hs(e,t),Ls(t),r&4){if(t.stateNode===null)throw Error(ie(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Dt(t,t.return,x)}}break;case 3:if(hs(e,t),Ls(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xu(e.containerInfo)}catch(x){Dt(t,t.return,x)}break;case 4:hs(e,t),Ls(t);break;case 13:hs(e,t),Ls(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pv=$t())),r&4&&tb(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ln=(h=Ln)||m,hs(e,t),Ln=h):hs(e,t),Ls(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Be=t,m=t.child;m!==null;){for(p=Be=m;Be!==null;){switch(w=Be,C=w.child,w.tag){case 0:case 11:case 14:case 15:ku(4,w,w.return);break;case 1:Cl(w,w.return);var b=w.stateNode;if(typeof b.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){Dt(r,n,x)}}break;case 5:Cl(w,w.return);break;case 22:if(w.memoizedState!==null){rb(p);continue}}C!==null?(C.return=w,Be=C):rb(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=XI("display",o))}catch(x){Dt(t,t.return,x)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(x){Dt(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:hs(e,t),Ls(t),r&4&&tb(t);break;case 21:break;default:hs(e,t),Ls(t)}}function Ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bT(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wu(s,""),r.flags&=-33);var i=eb(t);Ly(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=eb(t);Ry(t,l,o);break;default:throw Error(ie(161))}}catch(u){Dt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zP(t,e,n){Be=t,IT(t)}function IT(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Lh;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Ln;l=Lh;var h=Ln;if(Lh=o,(Ln=u)&&!h)for(Be=s;Be!==null;)o=Be,u=o.child,o.tag===22&&o.memoizedState!==null?sb(s):u!==null?(u.return=o,Be=u):sb(s);for(;i!==null;)Be=i,IT(i),i=i.sibling;Be=s,Lh=l,Ln=h}nb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):nb(t)}}function nb(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ln||xg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ln)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ms(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&MB(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}MB(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Xu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Ln||e.flags&512&&Py(e)}catch(w){Dt(e,e.return,w)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function rb(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function sb(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xg(4,e)}catch(u){Dt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Dt(e,s,u)}}var i=e.return;try{Py(e)}catch(u){Dt(e,i,u)}break;case 5:var o=e.return;try{Py(e)}catch(u){Dt(e,o,u)}}}catch(u){Dt(e,e.return,u)}if(e===t){Be=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Be=l;break}Be=e.return}}var GP=Math.ceil,Bm=Ki.ReactCurrentDispatcher,Fv=Ki.ReactCurrentOwner,es=Ki.ReactCurrentBatchConfig,tt=0,xn=null,nn=null,En=0,Sr=0,El=co(0),dn=0,ld=null,rA=0,_g=0,Qv=0,Su=null,mr=null,Pv=0,$l=1/0,vi=null,bm=!1,jy=null,qa=null,jh=!1,Ra=null,Cm=0,Nu=0,Dy=null,Pf=-1,Rf=0;function rr(){return tt&6?$t():Pf!==-1?Pf:Pf=$t()}function Wa(t){return t.mode&1?tt&2&&En!==0?En&-En:kP.transition!==null?(Rf===0&&(Rf=u1()),Rf):(t=lt,t!==0||(t=window.event,t=t===void 0?16:y1(t.type)),t):1}function xs(t,e,n,r){if(50<Nu)throw Nu=0,Dy=null,Error(ie(185));Nd(t,n,r),(!(tt&2)||t!==xn)&&(t===xn&&(!(tt&2)&&(_g|=n),dn===4&&Ia(t,En)),_r(t,r),n===1&&tt===0&&!(e.mode&1)&&($l=$t()+500,yg&&uo()))}function _r(t,e){var n=t.callbackNode;kQ(t,e);var r=Am(t,t===xn?En:0);if(r===0)n!==null&&hB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hB(n),e===1)t.tag===0?TP(ib.bind(null,t)):L1(ib.bind(null,t)),bP(function(){!(tt&6)&&uo()}),n=null;else{switch(d1(r)){case 1:n=ov;break;case 4:n=l1;break;case 16:n=om;break;case 536870912:n=c1;break;default:n=om}n=PT(n,TT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TT(t,e){if(Pf=-1,Rf=0,tt&6)throw Error(ie(327));var n=t.callbackNode;if(Ql()&&t.callbackNode!==n)return null;var r=Am(t,t===xn?En:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Em(t,r);else{e=r;var s=tt;tt|=2;var i=ST();(xn!==t||En!==e)&&(vi=null,$l=$t()+500,qo(t,e));do try{$P();break}catch(l){kT(t,l)}while(!0);vv(),Bm.current=i,tt=s,nn!==null?e=0:(xn=null,En=0,e=dn)}if(e!==0){if(e===2&&(s=dy(t),s!==0&&(r=s,e=My(t,s))),e===1)throw n=ld,qo(t,0),Ia(t,r),_r(t,$t()),n;if(e===6)Ia(t,r);else{if(s=t.current.alternate,!(r&30)&&!qP(s)&&(e=Em(t,r),e===2&&(i=dy(t),i!==0&&(r=i,e=My(t,i))),e===1))throw n=ld,qo(t,0),Ia(t,r),_r(t,$t()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Uo(t,mr,vi);break;case 3:if(Ia(t,r),(r&130023424)===r&&(e=Pv+500-$t(),10<e)){if(Am(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){rr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vy(Uo.bind(null,t,mr,vi),e);break}Uo(t,mr,vi);break;case 4:if(Ia(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GP(r/1960))-r,10<r){t.timeoutHandle=vy(Uo.bind(null,t,mr,vi),r);break}Uo(t,mr,vi);break;case 5:Uo(t,mr,vi);break;default:throw Error(ie(329))}}}return _r(t,$t()),t.callbackNode===n?TT.bind(null,t):null}function My(t,e){var n=Su;return t.current.memoizedState.isDehydrated&&(qo(t,e).flags|=256),t=Em(t,e),t!==2&&(e=mr,mr=n,e!==null&&Oy(e)),t}function Oy(t){mr===null?mr=t:mr.push.apply(mr,t)}function qP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ia(t,e){for(e&=~Qv,e&=~_g,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),r=1<<n;t[n]=-1,e&=~r}}function ib(t){if(tt&6)throw Error(ie(327));Ql();var e=Am(t,0);if(!(e&1))return _r(t,$t()),null;var n=Em(t,e);if(t.tag!==0&&n===2){var r=dy(t);r!==0&&(e=r,n=My(t,r))}if(n===1)throw n=ld,qo(t,0),Ia(t,e),_r(t,$t()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Uo(t,mr,vi),_r(t,$t()),null}function Rv(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&($l=$t()+500,yg&&uo())}}function sA(t){Ra!==null&&Ra.tag===0&&!(tt&6)&&Ql();var e=tt;tt|=1;var n=es.transition,r=lt;try{if(es.transition=null,lt=1,t)return t()}finally{lt=r,es.transition=n,tt=e,!(tt&6)&&uo()}}function Lv(){Sr=El.current,bt(El)}function qo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BP(n)),nn!==null)for(n=nn.return;n!==null;){var r=n;switch(pv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hm();break;case 3:ql(),bt(vr),bt(Hn),Ev();break;case 5:Cv(r);break;case 4:ql();break;case 13:bt(Qt);break;case 19:bt(Qt);break;case 10:xv(r.type._context);break;case 22:case 23:Lv()}n=n.return}if(xn=t,nn=t=$a(t.current,null),En=Sr=e,dn=0,ld=null,Qv=_g=rA=0,mr=Su=null,Ho!==null){for(e=0;e<Ho.length;e++)if(n=Ho[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ho=null}return t}function kT(t,e){do{var n=nn;try{if(vv(),Uf.current=_m,xm){for(var r=Rt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xm=!1}if(nA=0,vn=An=Rt=null,Tu=!1,ad=0,Fv.current=null,n===null||n.return===null){dn=1,ld=e,nn=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=En,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var w=m.alternate;w?(m.updateQueue=w.updateQueue,m.memoizedState=w.memoizedState,m.lanes=w.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=GB(o);if(C!==null){C.flags&=-257,qB(C,o,l,i,e),C.mode&1&&zB(i,h,e),e=C,u=h;var b=e.updateQueue;if(b===null){var x=new Set;x.add(u),e.updateQueue=x}else b.add(u);break e}else{if(!(e&1)){zB(i,h,e),jv();break e}u=Error(ie(426))}}else if(Tt&&l.mode&1){var U=GB(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),qB(U,o,l,i,e),yv(Wl(u,l));break e}}i=u=Wl(u,l),dn!==4&&(dn=2),Su===null?Su=[i]:Su.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=dT(i,u,e);DB(i,T);break e;case 1:l=u;var E=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(qa===null||!qa.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var H=hT(i,l,e);DB(i,H);break e}}i=i.return}while(i!==null)}UT(n)}catch(V){e=V,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(!0)}function ST(){var t=Bm.current;return Bm.current=_m,t===null?_m:t}function jv(){(dn===0||dn===3||dn===2)&&(dn=4),xn===null||!(rA&268435455)&&!(_g&268435455)||Ia(xn,En)}function Em(t,e){var n=tt;tt|=2;var r=ST();(xn!==t||En!==e)&&(vi=null,qo(t,e));do try{WP();break}catch(s){kT(t,s)}while(!0);if(vv(),tt=n,Bm.current=r,nn!==null)throw Error(ie(261));return xn=null,En=0,dn}function WP(){for(;nn!==null;)NT(nn)}function $P(){for(;nn!==null&&!vQ();)NT(nn)}function NT(t){var e=QT(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,e===null?UT(t):nn=e,Fv.current=null}function UT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HP(n,e),n!==null){n.flags&=32767,nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dn=6,nn=null;return}}else if(n=OP(n,e,Sr),n!==null){nn=n;return}if(e=e.sibling,e!==null){nn=e;return}nn=e=t}while(e!==null);dn===0&&(dn=5)}function Uo(t,e,n){var r=lt,s=es.transition;try{es.transition=null,lt=1,ZP(t,e,n,r)}finally{es.transition=s,lt=r}return null}function ZP(t,e,n,r){do Ql();while(Ra!==null);if(tt&6)throw Error(ie(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(SQ(t,i),t===xn&&(nn=xn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jh||(jh=!0,PT(om,function(){return Ql(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=es.transition,es.transition=null;var o=lt;lt=1;var l=tt;tt|=4,Fv.current=null,KP(t,n),ET(n,t),gP(yy),lm=!!py,yy=py=null,t.current=n,zP(n),xQ(),tt=l,lt=o,es.transition=i}else t.current=n;if(jh&&(jh=!1,Ra=t,Cm=s),i=t.pendingLanes,i===0&&(qa=null),bQ(n.stateNode),_r(t,$t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bm)throw bm=!1,t=jy,jy=null,t;return Cm&1&&t.tag!==0&&Ql(),i=t.pendingLanes,i&1?t===Dy?Nu++:(Nu=0,Dy=t):Nu=0,uo(),null}function Ql(){if(Ra!==null){var t=d1(Cm),e=es.transition,n=lt;try{if(es.transition=null,lt=16>t?16:t,Ra===null)var r=!1;else{if(t=Ra,Ra=null,Cm=0,tt&6)throw Error(ie(331));var s=tt;for(tt|=4,Be=t.current;Be!==null;){var i=Be,o=i.child;if(Be.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Be=h;Be!==null;){var m=Be;switch(m.tag){case 0:case 11:case 15:ku(8,m,i)}var p=m.child;if(p!==null)p.return=m,Be=p;else for(;Be!==null;){m=Be;var w=m.sibling,C=m.return;if(BT(m),m===h){Be=null;break}if(w!==null){w.return=C,Be=w;break}Be=C}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var U=x.sibling;x.sibling=null,x=U}while(x!==null)}}Be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Be=o;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ku(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,Be=T;break e}Be=i.return}}var E=t.current;for(Be=E;Be!==null;){o=Be;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Be=N;else e:for(o=E;Be!==null;){if(l=Be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xg(9,l)}}catch(V){Dt(l,l.return,V)}if(l===o){Be=null;break e}var H=l.sibling;if(H!==null){H.return=l.return,Be=H;break e}Be=l.return}}if(tt=s,uo(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(hg,t)}catch{}r=!0}return r}finally{lt=n,es.transition=e}}return!1}function ab(t,e,n){e=Wl(n,e),e=dT(t,e,1),t=Ga(t,e,1),e=rr(),t!==null&&(Nd(t,1,e),_r(t,e))}function Dt(t,e,n){if(t.tag===3)ab(t,t,n);else for(;e!==null;){if(e.tag===3){ab(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qa===null||!qa.has(r))){t=Wl(n,t),t=hT(e,t,1),e=Ga(e,t,1),t=rr(),e!==null&&(Nd(e,1,t),_r(e,t));break}}e=e.return}}function JP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&n,xn===t&&(En&n)===n&&(dn===4||dn===3&&(En&130023424)===En&&500>$t()-Pv?qo(t,0):Qv|=n),_r(t,e)}function FT(t,e){e===0&&(t.mode&1?(e=Th,Th<<=1,!(Th&130023424)&&(Th=4194304)):e=1);var n=rr();t=ji(t,e),t!==null&&(Nd(t,e,n),_r(t,n))}function XP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FT(t,n)}function YP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),FT(t,n)}var QT;QT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)pr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pr=!1,MP(t,e,n);pr=!!(t.flags&131072)}else pr=!1,Tt&&e.flags&1048576&&j1(e,gm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qf(t,e),t=e.pendingProps;var s=Kl(e,Hn.current);Fl(e,n),s=Tv(null,e,r,t,s,n);var i=kv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(r)?(i=!0,fm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bv(e),s.updater=vg,e.stateNode=s,s._reactInternals=e,Iy(e,r,t,n),e=Sy(null,e,r,!0,i,n)):(e.tag=0,Tt&&i&&gv(e),er(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=t4(r),t=ms(r,t),s){case 0:e=ky(null,e,r,t,n);break e;case 1:e=ZB(null,e,r,t,n);break e;case 11:e=WB(null,e,r,t,n);break e;case 14:e=$B(null,e,r,ms(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),ky(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),ZB(t,e,r,s,n);case 3:e:{if(pT(e),t===null)throw Error(ie(387));r=e.pendingProps,i=e.memoizedState,s=i.element,K1(t,e),wm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wl(Error(ie(423)),e),e=JB(t,e,r,n,s);break e}else if(r!==s){s=Wl(Error(ie(424)),e),e=JB(t,e,r,n,s);break e}else for(Nr=za(e.stateNode.containerInfo.firstChild),Qr=e,Tt=!0,ps=null,n=H1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zl(),r===s){e=Di(t,e,n);break e}er(t,e,r,n)}e=e.child}return e;case 5:return z1(e),t===null&&by(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,wy(r,s)?o=null:i!==null&&wy(r,i)&&(e.flags|=32),gT(t,e),er(t,e,o,n),e.child;case 6:return t===null&&by(e),null;case 13:return yT(t,e,n);case 4:return bv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gl(e,null,r,n):er(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),WB(t,e,r,s,n);case 7:return er(t,e,e.pendingProps,n),e.child;case 8:return er(t,e,e.pendingProps.children,n),e.child;case 12:return er(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pt(pm,r._currentValue),r._currentValue=o,i!==null)if(bs(i.value,o)){if(i.children===s.children&&!vr.current){e=Di(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ni(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Cy(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ie(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}er(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fl(e,n),s=ts(s),r=r(s),e.flags|=1,er(t,e,r,n),e.child;case 14:return r=e.type,s=ms(r,e.pendingProps),s=ms(r.type,s),$B(t,e,r,s,n);case 15:return fT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ms(r,s),Qf(t,e),e.tag=1,xr(r)?(t=!0,fm(e)):t=!1,Fl(e,n),uT(e,r,s),Iy(e,r,s,n),Sy(null,e,r,!0,t,n);case 19:return wT(t,e,n);case 22:return mT(t,e,n)}throw Error(ie(156,e.tag))};function PT(t,e){return A1(t,e)}function e4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(t,e,n,r){return new e4(t,e,n,r)}function Dv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t4(t){if(typeof t=="function")return Dv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sv)return 11;if(t===iv)return 14}return 2}function $a(t,e){var n=t.alternate;return n===null?(n=Jr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Dv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gl:return Wo(n.children,s,i,e);case rv:o=8,s|=8;break;case J0:return t=Jr(12,n,e,s|2),t.elementType=J0,t.lanes=i,t;case X0:return t=Jr(13,n,e,s),t.elementType=X0,t.lanes=i,t;case Y0:return t=Jr(19,n,e,s),t.elementType=Y0,t.lanes=i,t;case zI:return Bg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VI:o=10;break e;case KI:o=9;break e;case sv:o=11;break e;case iv:o=14;break e;case Ba:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=Jr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Wo(t,e,n,r){return t=Jr(7,t,r,e),t.lanes=n,t}function Bg(t,e,n,r){return t=Jr(22,t,r,e),t.elementType=zI,t.lanes=n,t.stateNode={isHidden:!1},t}function n0(t,e,n){return t=Jr(6,t,null,e),t.lanes=n,t}function r0(t,e,n){return e=Jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lp(0),this.expirationTimes=Lp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mv(t,e,n,r,s,i,o,l,u){return t=new n4(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bv(i),t}function r4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ml,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function RT(t){if(!t)return to;t=t._reactInternals;e:{if(bA(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(xr(n))return R1(t,n,e)}return e}function LT(t,e,n,r,s,i,o,l,u){return t=Mv(n,r,!0,t,s,i,o,l,u),t.context=RT(null),n=t.current,r=rr(),s=Wa(n),i=Ni(r,s),i.callback=e??null,Ga(n,i,s),t.current.lanes=s,Nd(t,s,r),_r(t,r),t}function bg(t,e,n,r){var s=e.current,i=rr(),o=Wa(s);return n=RT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ni(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ga(s,e,o),t!==null&&(xs(t,s,o,i),Nf(t,s,o)),o}function Im(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ob(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ov(t,e){ob(t,e),(t=t.alternate)&&ob(t,e)}function s4(){return null}var jT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hv(t){this._internalRoot=t}Cg.prototype.render=Hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));bg(t,e,null,null)};Cg.prototype.unmount=Hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sA(function(){bg(null,t,null,null)}),e[Li]=null}};function Cg(t){this._internalRoot=t}Cg.prototype.unstable_scheduleHydration=function(t){if(t){var e=m1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ea.length&&e!==0&&e<Ea[n].priority;n++);Ea.splice(n,0,t),n===0&&p1(t)}};function Vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Eg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ab(){}function i4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Im(o);i.call(h)}}var o=LT(e,r,t,0,null,!1,!1,"",Ab);return t._reactRootContainer=o,t[Li]=o.current,td(t.nodeType===8?t.parentNode:t),sA(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Im(u);l.call(h)}}var u=Mv(t,0,!1,null,null,!1,!1,"",Ab);return t._reactRootContainer=u,t[Li]=u.current,td(t.nodeType===8?t.parentNode:t),sA(function(){bg(e,u,n,r)}),u}function Ig(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Im(o);l.call(u)}}bg(e,o,t,s)}else o=i4(n,e,t,s,r);return Im(o)}h1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Au(e.pendingLanes);n!==0&&(Av(e,n|1),_r(e,$t()),!(tt&6)&&($l=$t()+500,uo()))}break;case 13:sA(function(){var r=ji(t,1);if(r!==null){var s=rr();xs(r,t,1,s)}}),Ov(t,1)}};lv=function(t){if(t.tag===13){var e=ji(t,134217728);if(e!==null){var n=rr();xs(e,t,134217728,n)}Ov(t,134217728)}};f1=function(t){if(t.tag===13){var e=Wa(t),n=ji(t,e);if(n!==null){var r=rr();xs(n,t,e,r)}Ov(t,e)}};m1=function(){return lt};g1=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};ly=function(t,e,n){switch(e){case"input":if(ny(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pg(r);if(!s)throw Error(ie(90));qI(r),ny(r,s)}}}break;case"textarea":$I(t,n);break;case"select":e=n.value,e!=null&&kl(t,!!n.multiple,e,!1)}};n1=Rv;r1=sA;var a4={usingClientEntryPoint:!1,Events:[Fd,vl,pg,e1,t1,Rv]},Gc={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o4={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=a1(t),t===null?null:t.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||s4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{hg=Dh.inject(o4),Gs=Dh}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a4;Dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(e))throw Error(ie(200));return r4(t,e,null,n)};Dr.createRoot=function(t,e){if(!Vv(t))throw Error(ie(299));var n=!1,r="",s=jT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mv(t,1,!1,null,null,n,!1,r,s),t[Li]=e.current,td(t.nodeType===8?t.parentNode:t),new Hv(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=a1(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return sA(t)};Dr.hydrate=function(t,e,n){if(!Eg(e))throw Error(ie(200));return Ig(null,t,e,!0,n)};Dr.hydrateRoot=function(t,e,n){if(!Vv(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LT(e,null,t,1,n??null,s,!1,i,o),t[Li]=e.current,td(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cg(e)};Dr.render=function(t,e,n){if(!Eg(e))throw Error(ie(200));return Ig(null,t,e,!1,n)};Dr.unmountComponentAtNode=function(t){if(!Eg(t))throw Error(ie(40));return t._reactRootContainer?(sA(function(){Ig(null,null,t,!1,function(){t._reactRootContainer=null,t[Li]=null})}),!0):!1};Dr.unstable_batchedUpdates=Rv;Dr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Eg(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Ig(t,e,n,!1,r)};Dr.version="18.3.1-next-f1338f8080-20240426";function DT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DT)}catch(t){console.error(t)}}DT(),DI.exports=Dr;var MT=DI.exports,lb=MT;$0.createRoot=lb.createRoot,$0.hydrateRoot=lb.hydrateRoot;const A4="modulepreload",l4=function(t){return"/"+t},cb={},Hy=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=l4(u),u in cb)return;cb[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":A4,h||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((w,C)=>{p.addEventListener("load",w),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var ub={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},c4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},HT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let w=(l&15)<<2|h>>6,C=h&63;u||(C=64,o||(w=64)),r.push(n[m],n[p],n[w],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new u4;const w=i<<2|l>>4;if(r.push(w),h!==64){const C=l<<4&240|h>>2;if(r.push(C),p!==64){const b=h<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d4=function(t){const e=OT(t);return HT.encodeByteArray(e,!0)},Tm=function(t){return d4(t).replace(/\./g,"")},VT=function(t){try{return HT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=()=>h4().__FIREBASE_DEFAULTS__,m4=()=>{if(typeof process>"u"||typeof ub>"u")return;const t=ub.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VT(t[1]);return e&&JSON.parse(e)},Tg=()=>{try{return f4()||m4()||g4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},KT=t=>{var e,n;return(n=(e=Tg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zT=t=>{const e=KT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},GT=()=>{var t;return(t=Tg())===null||t===void 0?void 0:t.config},qT=t=>{var e;return(e=Tg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tm(JSON.stringify(n)),Tm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function v4(){var t;const e=(t=Tg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function B4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b4(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WT(){return!v4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kv(){try{return typeof indexedDB=="object"}catch{return!1}}function $T(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function C4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="FirebaseError";class is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=E4,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CA.prototype.create)}}class CA{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?I4(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new is(s,l,r)}}function I4(t,e){return t.replace(T4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const T4=/\{\$([^}]+)}/g;function k4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iA(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(db(i)&&db(o)){if(!iA(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function db(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function uu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function S4(t,e){const n=new N4(t,e);return n.subscribe.bind(n)}class N4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");U4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=s0),s.error===void 0&&(s.error=s0),s.complete===void 0&&(s.complete=s0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function s0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class Lr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new p4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P4(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q4(t){return t===Fo?void 0:t}function P4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const L4={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},j4=We.INFO,D4={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},M4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=D4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let zv=class{constructor(e){this.name=e,this._logLevel=j4,this._logHandler=M4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}};const O4=(t,e)=>e.some(n=>t instanceof n);let hb,fb;function H4(){return hb||(hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V4(){return fb||(fb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZT=new WeakMap,Vy=new WeakMap,JT=new WeakMap,i0=new WeakMap,Gv=new WeakMap;function K4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ui(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ZT.set(n,t)}).catch(()=>{}),Gv.set(e,t),e}function z4(t){if(Vy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vy.set(t,e)}let Ky={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function G4(t){Ky=t(Ky)}function q4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(a0(this),e,...n);return JT.set(r,e.sort?e.sort():[e]),Ui(r)}:V4().includes(t)?function(...e){return t.apply(a0(this),e),Ui(ZT.get(this))}:function(...e){return Ui(t.apply(a0(this),e))}}function W4(t){return typeof t=="function"?q4(t):(t instanceof IDBTransaction&&z4(t),O4(t,H4())?new Proxy(t,Ky):t)}function Ui(t){if(t instanceof IDBRequest)return K4(t);if(i0.has(t))return i0.get(t);const e=W4(t);return e!==t&&(i0.set(t,e),Gv.set(e,t)),e}const a0=t=>Gv.get(t);function kg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ui(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ui(o.result),u.oldVersion,u.newVersion,Ui(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}function o0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Ui(n).then(()=>{})}const $4=["get","getKey","getAll","getAllKeys","count"],Z4=["put","add","delete","clear"],A0=new Map;function mb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(A0.get(e))return A0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Z4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$4.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return A0.set(e,i),i}G4(t=>({...t,get:(e,n,r)=>mb(e,n)||t.get(e,n,r),has:(e,n)=>!!mb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function X4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zy="@firebase/app",gb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new zv("@firebase/app"),Y4="@firebase/app-compat",eR="@firebase/analytics-compat",tR="@firebase/analytics",nR="@firebase/app-check-compat",rR="@firebase/app-check",sR="@firebase/auth",iR="@firebase/auth-compat",aR="@firebase/database",oR="@firebase/data-connect",AR="@firebase/database-compat",lR="@firebase/functions",cR="@firebase/functions-compat",uR="@firebase/installations",dR="@firebase/installations-compat",hR="@firebase/messaging",fR="@firebase/messaging-compat",mR="@firebase/performance",gR="@firebase/performance-compat",pR="@firebase/remote-config",yR="@firebase/remote-config-compat",wR="@firebase/storage",vR="@firebase/storage-compat",xR="@firebase/firestore",_R="@firebase/vertexai-preview",BR="@firebase/firestore-compat",bR="firebase",CR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="[DEFAULT]",ER={[zy]:"fire-core",[Y4]:"fire-core-compat",[tR]:"fire-analytics",[eR]:"fire-analytics-compat",[rR]:"fire-app-check",[nR]:"fire-app-check-compat",[sR]:"fire-auth",[iR]:"fire-auth-compat",[aR]:"fire-rtdb",[oR]:"fire-data-connect",[AR]:"fire-rtdb-compat",[lR]:"fire-fn",[cR]:"fire-fn-compat",[uR]:"fire-iid",[dR]:"fire-iid-compat",[hR]:"fire-fcm",[fR]:"fire-fcm-compat",[mR]:"fire-perf",[gR]:"fire-perf-compat",[pR]:"fire-rc",[yR]:"fire-rc-compat",[wR]:"fire-gcs",[vR]:"fire-gcs-compat",[xR]:"fire-fst",[BR]:"fire-fst-compat",[_R]:"fire-vertex","fire-js":"fire-js",[bR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=new Map,IR=new Map,qy=new Map;function pb(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rs(t){const e=t.name;if(qy.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;qy.set(e,t);for(const n of km.values())pb(n,t);for(const n of IR.values())pb(n,t);return!0}function ho(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ys(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Za=new CA("app","Firebase",TR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Za.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=CR;function XT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gy,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Za.create("bad-app-name",{appName:String(s)});if(n||(n=GT()),!n)throw Za.create("no-options");const i=km.get(s);if(i){if(iA(n,i.options)&&iA(r,i.config))return i;throw Za.create("duplicate-app",{appName:s})}const o=new R4(s);for(const u of qy.values())o.addComponent(u);const l=new kR(n,r,o);return km.set(s,l),l}function Sg(t=Gy){const e=km.get(t);if(!e&&t===Gy&&GT())return XT();if(!e)throw Za.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let s=(r=ER[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(l.join(" "));return}rs(new Lr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="firebase-heartbeat-database",NR=1,cd="firebase-heartbeat-store";let l0=null;function YT(){return l0||(l0=kg(SR,NR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Za.create("idb-open",{originalErrorMessage:t.message})})),l0}async function UR(t){try{const n=(await YT()).transaction(cd),r=await n.objectStore(cd).get(ek(t));return await n.done,r}catch(e){if(e instanceof is)Mi.warn(e.message);else{const n=Za.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(n.message)}}}async function yb(t,e){try{const r=(await YT()).transaction(cd,"readwrite");await r.objectStore(cd).put(e,ek(t)),await r.done}catch(n){if(n instanceof is)Mi.warn(n.message);else{const r=Za.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mi.warn(r.message)}}}function ek(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1024,QR=30*24*60*60*1e3;class PR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=QR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wb(),{heartbeatsToSend:r,unsentEntries:s}=RR(this._heartbeatsCache.heartbeats),i=Tm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Mi.warn(n),""}}}function wb(){return new Date().toISOString().substring(0,10)}function RR(t,e=FR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),vb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kv()?$T().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vb(t){return Tm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){rs(new Lr("platform-logger",e=>new J4(e),"PRIVATE")),rs(new Lr("heartbeat",e=>new PR(e),"PRIVATE")),Mn(zy,gb,t),Mn(zy,gb,"esm2017"),Mn("fire-js","")}jR("");function qv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function tk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DR=tk,nk=new CA("auth","Firebase",tk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new zv("@firebase/auth");function MR(t,...e){Sm.logLevel<=We.WARN&&Sm.warn(`Auth (${EA}): ${t}`,...e)}function jf(t,...e){Sm.logLevel<=We.ERROR&&Sm.error(`Auth (${EA}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,...e){throw $v(t,...e)}function _s(t,...e){return $v(t,...e)}function Wv(t,e,n){const r=Object.assign(Object.assign({},DR()),{[e]:n});return new CA("auth","Firebase",r).create(e,{appName:t.name})}function Fi(t){return Wv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ss(t,"argument-error"),Wv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $v(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nk.create(t,...e)}function Qe(t,e,...n){if(!t)throw $v(e,...n)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jf(e),new Error(e)}function Oi(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function HR(){return xb()==="http:"||xb()==="https:"}function xb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HR()||_4()||"connection"in navigator)?navigator.onLine:!0}function KR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Oi(n>e,"Short delay should be less than long delay!"),this.isMobile=w4()||B4()}get(){return VR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e){Oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new Rd(3e4,6e4);function zi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gi(t,e,n,r,s={}){return sk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Pd(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return x4()||(h.referrerPolicy="no-referrer"),rk.fetch()(ik(t,t.config.apiHost,n,l),h)})}async function sk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zR),e);try{const s=new WR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Mh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mh(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Mh(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Mh(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Wv(t,m,h);ss(t,m)}}catch(s){if(s instanceof is)throw s;ss(t,"network-request-failed",{message:String(s)})}}async function Ld(t,e,n,r,s={}){const i=await Gi(t,e,n,r,s);return"mfaPendingCredential"in i&&ss(t,"multi-factor-auth-required",{_serverResponse:i}),i}function ik(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Zv(t.config,s):`${t.config.apiScheme}://${s}`}function qR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_s(this.auth,"network-request-failed")),GR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_s(t,e,r);return s.customData._tokenResponse=n,s}function _b(t){return t!==void 0&&t.enterprise!==void 0}class $R{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ZR(t,e){return Gi(t,"GET","/v2/recaptchaConfig",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(t,e){return Gi(t,"POST","/v1/accounts:delete",e)}async function ak(t,e){return Gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XR(t,e=!1){const n=nt(t),r=await n.getIdToken(e),s=Jv(r);Qe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Uu(c0(s.auth_time)),issuedAtTime:Uu(c0(s.iat)),expirationTime:Uu(c0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function c0(t){return Number(t)*1e3}function Jv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const s=VT(n);return s?JSON.parse(s):(jf("Failed to decode base64 JWT payload"),null)}catch(s){return jf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bb(t){const e=Jv(t);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof is&&YR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ud(t,ak(n,{idToken:r}));Qe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ok(i.providerUserInfo):[],l=nL(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),m=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new $y(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function tL(t){const e=nt(t);await Nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ok(t){return t.map(e=>{var{providerId:n}=e,r=qv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e){const n=await sk(t,{},async()=>{const r=Pd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=ik(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",rk.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sL(t,e){return Gi(t,"POST","/v2/accounts:revokeToken",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const n=Bb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Pl;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Qe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Qe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pl,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t,e){Qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ii{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=qv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $y(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ud(this,this.stsTokenManager.getToken(this.auth,e));return Qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XR(this,e)}reload(){return tL(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ys(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await ud(this,JR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,h,m;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(s=n.email)!==null&&s!==void 0?s:void 0,C=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(l=n.tenantId)!==null&&l!==void 0?l:void 0,U=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(h=n.createdAt)!==null&&h!==void 0?h:void 0,E=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:N,emailVerified:H,isAnonymous:V,providerData:M,stsTokenManager:I}=n;Qe(N&&I,e,"internal-error");const B=Pl.fromJSON(this.name,I);Qe(typeof N=="string",e,"internal-error"),ya(p,e.name),ya(w,e.name),Qe(typeof H=="boolean",e,"internal-error"),Qe(typeof V=="boolean",e,"internal-error"),ya(C,e.name),ya(b,e.name),ya(x,e.name),ya(U,e.name),ya(T,e.name),ya(E,e.name);const S=new Ii({uid:N,auth:e,email:w,emailVerified:H,displayName:p,isAnonymous:V,photoURL:b,phoneNumber:C,tenantId:x,stsTokenManager:B,createdAt:T,lastLoginAt:E});return M&&Array.isArray(M)&&(S.providerData=M.map(P=>Object.assign({},P))),U&&(S._redirectEventId=U),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Pl;s.updateFromServerResponse(n);const i=new Ii({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Nm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Qe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ok(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Pl;l.updateFromIdToken(r);const u=new Ii({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new $y(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;function Ti(t){Oi(t instanceof Function,"Expected a class definition");let e=bb.get(t);return e?(Oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ak.type="NONE";const Cb=Ak;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e,n){return`firebase:${t}:${e}:${n}`}class Rl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Df(this.userKey,s.apiKey,i),this.fullPersistenceKey=Df("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ii._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rl(Ti(Cb),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Ti(Cb);const o=Df(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const m=await h._get(o);if(m){const p=Ii._fromJSON(e,m);h!==i&&(l=p),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Rl(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Rl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fk(e))return"Blackberry";if(mk(e))return"Webos";if(ck(e))return"Safari";if((e.includes("chrome/")||uk(e))&&!e.includes("edge/"))return"Chrome";if(hk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lk(t=hn()){return/firefox\//i.test(t)}function ck(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uk(t=hn()){return/crios\//i.test(t)}function dk(t=hn()){return/iemobile/i.test(t)}function hk(t=hn()){return/android/i.test(t)}function fk(t=hn()){return/blackberry/i.test(t)}function mk(t=hn()){return/webos/i.test(t)}function Xv(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iL(t=hn()){var e;return Xv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aL(){return b4()&&document.documentMode===10}function gk(t=hn()){return Xv(t)||hk(t)||mk(t)||fk(t)||/windows phone/i.test(t)||dk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t,e=[]){let n;switch(t){case"Browser":n=Eb(hn());break;case"Worker":n=`${Eb(hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${EA}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(t,e={}){return Gi(t,"GET","/v2/passwordPolicy",zi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=6;class cL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ib(this),this.idTokenSubscription=new Ib(this),this.beforeStateQueue=new oL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ti(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ak(this,{idToken:e}),r=await Ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ys(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ys(this.app))return Promise.reject(Fi(this));const n=e?nt(e):null;return n&&Qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ys(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ys(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AL(this),n=new cL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new CA("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ti(e)||this._popupRedirectResolver;Qe(n,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[Ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ys(t){return nt(t)}class Ib{constructor(e){this.auth=e,this.observer=null,this.addObserver=S4(n=>this.observer=n)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dL(t){Ng=t}function yk(t){return Ng.loadJS(t)}function hL(){return Ng.recaptchaEnterpriseScript}function fL(){return Ng.gapiScript}function mL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const gL="recaptcha-enterprise",pL="NO_RECAPTCHA";class yL{constructor(e){this.type=gL,this.auth=Ys(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{ZR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new $R(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;_b(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(pL)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&_b(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=hL();u.length!==0&&(u+=l),yk(u).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function Tb(t,e,n,r=!1){const s=new yL(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Um(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Tb(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Tb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t,e){const n=ho(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(iA(i,e??{}))return s;ss(s,"already-initialized")}return n.initialize({options:e})}function vL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xL(t,e,n){const r=Ys(t);Qe(r._canInitEmulator,r,"emulator-config-failed"),Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=wk(e),{host:o,port:l}=_L(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),BL()}function wk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _L(t){const e=wk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:kb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:kb(o)}}}function kb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,n){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function bL(t,e){return Gi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(t,e){return Ld(t,"POST","/v1/accounts:signInWithPassword",zi(t,e))}async function vk(t,e){return Gi(t,"POST","/v1/accounts:sendOobCode",zi(t,e))}async function EL(t,e){return vk(t,e)}async function IL(t,e){return vk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",zi(t,e))}async function kL(t,e){return Ld(t,"POST","/v1/accounts:signInWithEmailLink",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends Yv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new dd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,n,"signInWithPassword",CL);case"emailLink":return TL(e,{email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,r,"signUpPassword",bL);case"emailLink":return kL(e,{idToken:n,email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e){return Ld(t,"POST","/v1/accounts:signInWithIdp",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="http://localhost";class aA extends Yv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new aA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=qv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new aA(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ll(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ll(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ll(e,n)}buildRequest(){const e={requestUri:SL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UL(t){const e=cu(uu(t)).link,n=e?cu(uu(e)).deep_link_id:null,r=cu(uu(t)).deep_link_id;return(r?cu(uu(r)).link:null)||r||n||e||t}class ex{constructor(e){var n,r,s,i,o,l;const u=cu(uu(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(r=u.oobCode)!==null&&r!==void 0?r:null,p=NL((s=u.mode)!==null&&s!==void 0?s:null);Qe(h&&m&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=m,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=UL(e);try{return new ex(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.providerId=gc.PROVIDER_ID}static credential(e,n){return dd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ex.parseLink(n);return Qe(r,"argument-error"),dd._fromEmailAndCode(e,r.code,r.tenantId)}}gc.PROVIDER_ID="password";gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends jd{constructor(){super("facebook.com")}static credential(e){return aA._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return aA._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bi.credential(n,r)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends jd{constructor(){super("github.com")}static credential(e){return aA._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ka.credential(e.oauthAccessToken)}catch{return null}}}ka.GITHUB_SIGN_IN_METHOD="github.com";ka.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends jd{constructor(){super("twitter.com")}static credential(e,n){return aA._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sa.credential(n,r)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e){return Ld(t,"POST","/v1/accounts:signUp",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ii._fromIdTokenResponse(e,r,s),o=Sb(r);return new oA({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Sb(r);return new oA({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Sb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends is{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fm(e,n,r,s)}}function xk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fm._fromErrorAndOperation(t,i,e,r):i})}async function QL(t,e,n=!1){const r=await ud(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oA._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e,n=!1){const{auth:r}=t;if(ys(r.app))return Promise.reject(Fi(r));const s="reauthenticate";try{const i=await ud(t,xk(r,s,e,t),n);Qe(i.idToken,r,"internal-error");const o=Jv(i.idToken);Qe(o,r,"internal-error");const{sub:l}=o;return Qe(t.uid===l,r,"user-mismatch"),oA._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ss(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e,n=!1){if(ys(t.app))return Promise.reject(Fi(t));const r="signIn",s=await xk(t,r,e),i=await oA._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function RL(t,e){return _k(Ys(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t){const e=Ys(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LL(t,e,n){const r=Ys(t);await Um(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",IL)}async function jL(t,e,n){if(ys(t.app))return Promise.reject(Fi(t));const r=Ys(t),o=await Um(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Bk(t),u}),l=await oA._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function DL(t,e,n){return ys(t.app)?Promise.reject(Fi(t)):RL(nt(t),gc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Bk(t),r})}async function bk(t,e){const n=nt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await EL(n.auth,s);i!==t.email&&await t.reload()}function ML(t,e,n,r){return nt(t).onIdTokenChanged(e,n,r)}function OL(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function HL(t,e,n,r){return nt(t).onAuthStateChanged(e,n,r)}function Ck(t){return nt(t).signOut()}const Qm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qm,"1"),this.storage.removeItem(Qm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=1e3,KL=10;class Ik extends Ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);aL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ik.type="LOCAL";const zL=Ik;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk extends Ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Tk.type="SESSION";const kk=Tk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ug(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await GL(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ug.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=nx("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const w=p;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(w.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return window}function WL(t){Ws().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return typeof Ws().WorkerGlobalScope<"u"&&typeof Ws().importScripts=="function"}async function $L(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function JL(){return Sk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="firebaseLocalStorageDb",XL=1,Pm="firebaseLocalStorage",Uk="fbase_key";class Dd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fg(t,e){return t.transaction([Pm],e?"readwrite":"readonly").objectStore(Pm)}function YL(){const t=indexedDB.deleteDatabase(Nk);return new Dd(t).toPromise()}function Zy(){const t=indexedDB.open(Nk,XL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Pm,{keyPath:Uk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Pm)?e(r):(r.close(),await YL(),e(await Zy()))})})}async function Nb(t,e,n){const r=Fg(t,!0).put({[Uk]:e,value:n});return new Dd(r).toPromise()}async function ej(t,e){const n=Fg(t,!1).get(e),r=await new Dd(n).toPromise();return r===void 0?null:r.value}function Ub(t,e){const n=Fg(t,!0).delete(e);return new Dd(n).toPromise()}const tj=800,nj=3;class Fk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ug._getInstance(JL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $L(),!this.activeServiceWorker)return;this.sender=new qL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zy();return await Nb(e,Qm,"1"),await Ub(e,Qm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ej(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ub(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fg(s,!1).getAll();return new Dd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fk.type="LOCAL";const rj=Fk;new Rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t,e){return e?Ti(e):(Qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends Yv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ll(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ll(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sj(t){return _k(t.auth,new rx(t),t.bypassAuthState)}function ij(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),PL(n,new rx(t),t.bypassAuthState)}async function aj(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),QL(n,new rx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sj;case"linkViaPopup":case"linkViaRedirect":return aj;case"reauthViaPopup":case"reauthViaRedirect":return ij;default:ss(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new Rd(2e3,1e4);async function Aj(t,e,n){if(ys(t.app))return Promise.reject(_s(t,"operation-not-supported-in-this-environment"));const r=Ys(t);OR(t,e,tx);const s=Qk(r,n);return new Ko(r,"signInViaPopup",e,s).executeNotNull()}class Ko extends Pk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");const e=nx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_s(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oj.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="pendingRedirect",Mf=new Map;class cj extends Pk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mf.get(this.auth._key());if(!e){try{const r=await uj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mf.set(this.auth._key(),e)}return this.bypassAuthState||Mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uj(t,e){const n=fj(e),r=hj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dj(t,e){Mf.set(t._key(),e)}function hj(t){return Ti(t._redirectPersistence)}function fj(t){return Df(lj,t.config.apiKey,t.name)}async function mj(t,e){return await Ys(t)._initializationPromise,Rk(t,e,!1)}async function Rk(t,e,n=!1){if(ys(t.app))return Promise.reject(Fi(t));const r=Ys(t),s=Qk(r,e),o=await new cj(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=10*60*1e3;class pj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Lk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_s(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fb(e))}saveEventToCache(e){this.cachedEventUids.add(Fb(e)),this.lastProcessedEventTime=Date.now()}}function Fb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(t,e={}){return Gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xj=/^https?/;async function _j(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wj(t);for(const n of e)try{if(Bj(n))return}catch{}ss(t,"unauthorized-domain")}function Bj(t){const e=Wy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xj.test(n))return!1;if(vj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new Rd(3e4,6e4);function Qb(){const t=Ws().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Cj(t){return new Promise((e,n)=>{var r,s,i;function o(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),n(_s(t,"network-request-failed"))},timeout:bj.get()})}if(!((s=(r=Ws().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ws().gapi)===null||i===void 0)&&i.load)o();else{const l=mL("iframefcb");return Ws()[l]=()=>{gapi.load?o():n(_s(t,"network-request-failed"))},yk(`${fL()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Of=null,e})}let Of=null;function Ej(t){return Of=Of||Cj(t),Of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=new Rd(5e3,15e3),Tj="__/auth/iframe",kj="emulator/auth/iframe",Sj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uj(t){const e=t.config;Qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zv(e,kj):`https://${t.config.authDomain}/${Tj}`,r={apiKey:e.apiKey,appName:t.name,v:EA},s=Nj.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Pd(r).slice(1)}`}async function Fj(t){const e=await Ej(t),n=Ws().gapi;return Qe(n,t,"internal-error"),e.open({where:document.body,url:Uj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=_s(t,"network-request-failed"),l=Ws().setTimeout(()=>{i(o)},Ij.get());function u(){Ws().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pj=500,Rj=600,Lj="_blank",jj="http://localhost";class Pb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dj(t,e,n,r=Pj,s=Rj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Qj),{width:r.toString(),height:s.toString(),top:i,left:o}),h=hn().toLowerCase();n&&(l=uk(h)?Lj:n),lk(h)&&(e=e||jj,u.scrollbars="yes");const m=Object.entries(u).reduce((w,[C,b])=>`${w}${C}=${b},`,"");if(iL(h)&&l!=="_self")return Mj(e||"",l),new Pb(null);const p=window.open(e||"",l,m);Qe(p,t,"popup-blocked");try{p.focus()}catch{}return new Pb(p)}function Mj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="__/auth/handler",Hj="emulator/auth/handler",Vj=encodeURIComponent("fac");async function Rb(t,e,n,r,s,i){Qe(t.config.authDomain,t,"auth-domain-config-required"),Qe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:EA,eventId:s};if(e instanceof tx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",k4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof jd){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await t._getAppCheckToken(),h=u?`#${Vj}=${encodeURIComponent(u)}`:"";return`${Kj(t)}?${Pd(l).slice(1)}${h}`}function Kj({config:t}){return t.emulator?Zv(t,Hj):`https://${t.authDomain}/${Oj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="webStorageSupport";class zj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kk,this._completeRedirectFn=Rk,this._overrideRedirectResult=dj}async _openPopup(e,n,r,s){var i;Oi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Rb(e,n,r,Wy(),s);return Dj(e,o,nx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Rb(e,n,r,Wy(),s);return WL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Oi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Fj(e),r=new pj(e);return n.register("authEvent",s=>(Qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(u0,{type:u0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[u0];o!==void 0&&n(!!o),ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_j(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gk()||ck()||Xv()}}const Gj=zj;var Lb="@firebase/auth",jb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $j(t){rs(new Lr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Qe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pk(t)},h=new uL(r,s,i,u);return vL(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rs(new Lr("auth-internal",e=>{const n=Ys(e.getProvider("auth").getImmediate());return(r=>new qj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(Lb,jb,Wj(t)),Mn(Lb,jb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=5*60,Jj=qT("authIdTokenMaxAge")||Zj;let Db=null;const Xj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jj)return;const s=n==null?void 0:n.token;Db!==s&&(Db=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Yj(t=Sg()){const e=ho(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wL(t,{popupRedirectResolver:Gj,persistence:[rj,zL,kk]}),r=qT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Xj(i.toString());OL(n,o,()=>o(n.currentUser)),ML(n,l=>o(l))}}const s=KT("auth");return s&&xL(n,`http://${s}`),n}function eD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=_s("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",eD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$j("Browser");var Mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,jk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,B){function S(){}S.prototype=B.prototype,I.D=B.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(P,D,O){for(var R=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)R[Z-2]=arguments[Z];return B.prototype[D].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,B,S){S||(S=0);var P=Array(16);if(typeof B=="string")for(var D=0;16>D;++D)P[D]=B.charCodeAt(S++)|B.charCodeAt(S++)<<8|B.charCodeAt(S++)<<16|B.charCodeAt(S++)<<24;else for(D=0;16>D;++D)P[D]=B[S++]|B[S++]<<8|B[S++]<<16|B[S++]<<24;B=I.g[0],S=I.g[1],D=I.g[2];var O=I.g[3],R=B+(O^S&(D^O))+P[0]+3614090360&4294967295;B=S+(R<<7&4294967295|R>>>25),R=O+(D^B&(S^D))+P[1]+3905402710&4294967295,O=B+(R<<12&4294967295|R>>>20),R=D+(S^O&(B^S))+P[2]+606105819&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(B^D&(O^B))+P[3]+3250441966&4294967295,S=D+(R<<22&4294967295|R>>>10),R=B+(O^S&(D^O))+P[4]+4118548399&4294967295,B=S+(R<<7&4294967295|R>>>25),R=O+(D^B&(S^D))+P[5]+1200080426&4294967295,O=B+(R<<12&4294967295|R>>>20),R=D+(S^O&(B^S))+P[6]+2821735955&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(B^D&(O^B))+P[7]+4249261313&4294967295,S=D+(R<<22&4294967295|R>>>10),R=B+(O^S&(D^O))+P[8]+1770035416&4294967295,B=S+(R<<7&4294967295|R>>>25),R=O+(D^B&(S^D))+P[9]+2336552879&4294967295,O=B+(R<<12&4294967295|R>>>20),R=D+(S^O&(B^S))+P[10]+4294925233&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(B^D&(O^B))+P[11]+2304563134&4294967295,S=D+(R<<22&4294967295|R>>>10),R=B+(O^S&(D^O))+P[12]+1804603682&4294967295,B=S+(R<<7&4294967295|R>>>25),R=O+(D^B&(S^D))+P[13]+4254626195&4294967295,O=B+(R<<12&4294967295|R>>>20),R=D+(S^O&(B^S))+P[14]+2792965006&4294967295,D=O+(R<<17&4294967295|R>>>15),R=S+(B^D&(O^B))+P[15]+1236535329&4294967295,S=D+(R<<22&4294967295|R>>>10),R=B+(D^O&(S^D))+P[1]+4129170786&4294967295,B=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(B^S))+P[6]+3225465664&4294967295,O=B+(R<<9&4294967295|R>>>23),R=D+(B^S&(O^B))+P[11]+643717713&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^B&(D^O))+P[0]+3921069994&4294967295,S=D+(R<<20&4294967295|R>>>12),R=B+(D^O&(S^D))+P[5]+3593408605&4294967295,B=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(B^S))+P[10]+38016083&4294967295,O=B+(R<<9&4294967295|R>>>23),R=D+(B^S&(O^B))+P[15]+3634488961&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^B&(D^O))+P[4]+3889429448&4294967295,S=D+(R<<20&4294967295|R>>>12),R=B+(D^O&(S^D))+P[9]+568446438&4294967295,B=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(B^S))+P[14]+3275163606&4294967295,O=B+(R<<9&4294967295|R>>>23),R=D+(B^S&(O^B))+P[3]+4107603335&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^B&(D^O))+P[8]+1163531501&4294967295,S=D+(R<<20&4294967295|R>>>12),R=B+(D^O&(S^D))+P[13]+2850285829&4294967295,B=S+(R<<5&4294967295|R>>>27),R=O+(S^D&(B^S))+P[2]+4243563512&4294967295,O=B+(R<<9&4294967295|R>>>23),R=D+(B^S&(O^B))+P[7]+1735328473&4294967295,D=O+(R<<14&4294967295|R>>>18),R=S+(O^B&(D^O))+P[12]+2368359562&4294967295,S=D+(R<<20&4294967295|R>>>12),R=B+(S^D^O)+P[5]+4294588738&4294967295,B=S+(R<<4&4294967295|R>>>28),R=O+(B^S^D)+P[8]+2272392833&4294967295,O=B+(R<<11&4294967295|R>>>21),R=D+(O^B^S)+P[11]+1839030562&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^B)+P[14]+4259657740&4294967295,S=D+(R<<23&4294967295|R>>>9),R=B+(S^D^O)+P[1]+2763975236&4294967295,B=S+(R<<4&4294967295|R>>>28),R=O+(B^S^D)+P[4]+1272893353&4294967295,O=B+(R<<11&4294967295|R>>>21),R=D+(O^B^S)+P[7]+4139469664&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^B)+P[10]+3200236656&4294967295,S=D+(R<<23&4294967295|R>>>9),R=B+(S^D^O)+P[13]+681279174&4294967295,B=S+(R<<4&4294967295|R>>>28),R=O+(B^S^D)+P[0]+3936430074&4294967295,O=B+(R<<11&4294967295|R>>>21),R=D+(O^B^S)+P[3]+3572445317&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^B)+P[6]+76029189&4294967295,S=D+(R<<23&4294967295|R>>>9),R=B+(S^D^O)+P[9]+3654602809&4294967295,B=S+(R<<4&4294967295|R>>>28),R=O+(B^S^D)+P[12]+3873151461&4294967295,O=B+(R<<11&4294967295|R>>>21),R=D+(O^B^S)+P[15]+530742520&4294967295,D=O+(R<<16&4294967295|R>>>16),R=S+(D^O^B)+P[2]+3299628645&4294967295,S=D+(R<<23&4294967295|R>>>9),R=B+(D^(S|~O))+P[0]+4096336452&4294967295,B=S+(R<<6&4294967295|R>>>26),R=O+(S^(B|~D))+P[7]+1126891415&4294967295,O=B+(R<<10&4294967295|R>>>22),R=D+(B^(O|~S))+P[14]+2878612391&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~B))+P[5]+4237533241&4294967295,S=D+(R<<21&4294967295|R>>>11),R=B+(D^(S|~O))+P[12]+1700485571&4294967295,B=S+(R<<6&4294967295|R>>>26),R=O+(S^(B|~D))+P[3]+2399980690&4294967295,O=B+(R<<10&4294967295|R>>>22),R=D+(B^(O|~S))+P[10]+4293915773&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~B))+P[1]+2240044497&4294967295,S=D+(R<<21&4294967295|R>>>11),R=B+(D^(S|~O))+P[8]+1873313359&4294967295,B=S+(R<<6&4294967295|R>>>26),R=O+(S^(B|~D))+P[15]+4264355552&4294967295,O=B+(R<<10&4294967295|R>>>22),R=D+(B^(O|~S))+P[6]+2734768916&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~B))+P[13]+1309151649&4294967295,S=D+(R<<21&4294967295|R>>>11),R=B+(D^(S|~O))+P[4]+4149444226&4294967295,B=S+(R<<6&4294967295|R>>>26),R=O+(S^(B|~D))+P[11]+3174756917&4294967295,O=B+(R<<10&4294967295|R>>>22),R=D+(B^(O|~S))+P[2]+718787259&4294967295,D=O+(R<<15&4294967295|R>>>17),R=S+(O^(D|~B))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+B&4294967295,I.g[1]=I.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+O&4294967295}r.prototype.u=function(I,B){B===void 0&&(B=I.length);for(var S=B-this.blockSize,P=this.B,D=this.h,O=0;O<B;){if(D==0)for(;O<=S;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<B;)if(P[D++]=I.charCodeAt(O++),D==this.blockSize){s(this,P),D=0;break}}else for(;O<B;)if(P[D++]=I[O++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=B},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var B=1;B<I.length-8;++B)I[B]=0;var S=8*this.o;for(B=I.length-8;B<I.length;++B)I[B]=S&255,S/=256;for(this.u(I),I=Array(16),B=S=0;4>B;++B)for(var P=0;32>P;P+=8)I[S++]=this.g[B]>>>P&255;return I};function i(I,B){var S=l;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=B(I)}function o(I,B){this.h=B;for(var S=[],P=!0,D=I.length-1;0<=D;D--){var O=I[D]|0;P&&O==B||(S[D]=O,P=!1)}this.g=S}var l={};function u(I){return-128<=I&&128>I?i(I,function(B){return new o([B|0],0>B?-1:0)}):new o([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return U(h(-I));for(var B=[],S=1,P=0;I>=S;P++)B[P]=I/S|0,S*=4294967296;return new o(B,0)}function m(I,B){if(I.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(I.charAt(0)=="-")return U(m(I.substring(1),B));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(B,8)),P=p,D=0;D<I.length;D+=8){var O=Math.min(8,I.length-D),R=parseInt(I.substring(D,D+O),B);8>O?(O=h(Math.pow(B,O)),P=P.j(O).add(h(R))):(P=P.j(S),P=P.add(h(R)))}return P}var p=u(0),w=u(1),C=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-U(this).m();for(var I=0,B=1,S=0;S<this.g.length;S++){var P=this.i(S);I+=(0<=P?P:4294967296+P)*B,B*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(x(this))return"-"+U(this).toString(I);for(var B=h(Math.pow(I,6)),S=this,P="";;){var D=H(S,B).g;S=T(S,D.j(B));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=D,b(S))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var B=0;B<I.g.length;B++)if(I.g[B]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=T(this,I),x(I)?-1:b(I)?0:1};function U(I){for(var B=I.g.length,S=[],P=0;P<B;P++)S[P]=~I.g[P];return new o(S,~I.h).add(w)}t.abs=function(){return x(this)?U(this):this},t.add=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],P=0,D=0;D<=B;D++){var O=P+(this.i(D)&65535)+(I.i(D)&65535),R=(O>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=R>>>16,O&=65535,R&=65535,S[D]=R<<16|O}return new o(S,S[S.length-1]&-2147483648?-1:0)};function T(I,B){return I.add(U(B))}t.j=function(I){if(b(this)||b(I))return p;if(x(this))return x(I)?U(this).j(U(I)):U(U(this).j(I));if(x(I))return U(this.j(U(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var B=this.g.length+I.g.length,S=[],P=0;P<2*B;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<I.g.length;D++){var O=this.i(P)>>>16,R=this.i(P)&65535,Z=I.i(D)>>>16,se=I.i(D)&65535;S[2*P+2*D]+=R*se,E(S,2*P+2*D),S[2*P+2*D+1]+=O*se,E(S,2*P+2*D+1),S[2*P+2*D+1]+=R*Z,E(S,2*P+2*D+1),S[2*P+2*D+2]+=O*Z,E(S,2*P+2*D+2)}for(P=0;P<B;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=B;P<2*B;P++)S[P]=0;return new o(S,0)};function E(I,B){for(;(I[B]&65535)!=I[B];)I[B+1]+=I[B]>>>16,I[B]&=65535,B++}function N(I,B){this.g=I,this.h=B}function H(I,B){if(b(B))throw Error("division by zero");if(b(I))return new N(p,p);if(x(I))return B=H(U(I),B),new N(U(B.g),U(B.h));if(x(B))return B=H(I,U(B)),new N(U(B.g),B.h);if(30<I.g.length){if(x(I)||x(B))throw Error("slowDivide_ only works with positive integers.");for(var S=w,P=B;0>=P.l(I);)S=V(S),P=V(P);var D=M(S,1),O=M(P,1);for(P=M(P,2),S=M(S,2);!b(P);){var R=O.add(P);0>=R.l(I)&&(D=D.add(S),O=R),P=M(P,1),S=M(S,1)}return B=T(I,D.j(B)),new N(D,B)}for(D=p;0<=I.l(B);){for(S=Math.max(1,Math.floor(I.m()/B.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=h(S),R=O.j(B);x(R)||0<R.l(I);)S-=P,O=h(S),R=O.j(B);b(O)&&(O=w),D=D.add(O),I=T(I,R)}return new N(D,I)}t.A=function(I){return H(this,I).h},t.and=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],P=0;P<B;P++)S[P]=this.i(P)&I.i(P);return new o(S,this.h&I.h)},t.or=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],P=0;P<B;P++)S[P]=this.i(P)|I.i(P);return new o(S,this.h|I.h)},t.xor=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],P=0;P<B;P++)S[P]=this.i(P)^I.i(P);return new o(S,this.h^I.h)};function V(I){for(var B=I.g.length+1,S=[],P=0;P<B;P++)S[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(S,I.h)}function M(I,B){var S=B>>5;B%=32;for(var P=I.g.length-S,D=[],O=0;O<P;O++)D[O]=0<B?I.i(O+S)>>>B|I.i(O+S+1)<<32-B:I.i(O+S);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,$o=o}).apply(typeof Mb<"u"?Mb:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dk,du,Mk,Hf,Jy,Ok,Hk,Vk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,_){return d==Array.prototype||d==Object.prototype||(d[y]=_.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var _=r;d=d.split(".");for(var F=0;F<d.length-1;F++){var z=d[F];if(!(z in _))break e;_=_[z]}d=d[d.length-1],F=_[d],y=y(F),y!=F&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}function i(d,y){d instanceof String&&(d+="");var _=0,F=!1,z={next:function(){if(!F&&_<d.length){var X=_++;return{value:y(X,d[X]),done:!1}}return F=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(d){return d||function(){return i(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function h(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function m(d,y,_){return d.call.apply(d.bind,arguments)}function p(d,y,_){if(!d)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,F),d.apply(y,z)}}return function(){return d.apply(y,arguments)}}function w(d,y,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,w.apply(null,arguments)}function C(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var F=_.slice();return F.push.apply(F,arguments),d.apply(this,F)}}function b(d,y){function _(){}_.prototype=y.prototype,d.aa=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Qb=function(F,z,X){for(var le=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)le[ot-2]=arguments[ot];return y.prototype[z].apply(F,le)}}function x(d){const y=d.length;if(0<y){const _=Array(y);for(let F=0;F<y;F++)_[F]=d[F];return _}return[]}function U(d,y){for(let _=1;_<arguments.length;_++){const F=arguments[_];if(u(F)){const z=d.length||0,X=F.length||0;d.length=z+X;for(let le=0;le<X;le++)d[z+le]=F[le]}else d.push(F)}}class T{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function E(d){return/^[\s\xa0]*$/.test(d)}function N(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function H(d){return H[" "](d),d}H[" "]=function(){};var V=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function M(d,y,_){for(const F in d)y.call(_,d[F],F,d)}function I(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function B(d){const y={};for(const _ in d)y[_]=d[_];return y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,y){let _,F;for(let z=1;z<arguments.length;z++){F=arguments[z];for(_ in F)d[_]=F[_];for(let X=0;X<S.length;X++)_=S[X],Object.prototype.hasOwnProperty.call(F,_)&&(d[_]=F[_])}}function D(d){var y=1;d=d.split(":");const _=[];for(;0<y&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function O(d){l.setTimeout(()=>{throw d},0)}function R(){var d=oe;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Z{constructor(){this.h=this.g=null}add(y,_){const F=se.get();F.set(y,_),this.h?this.h.next=F:this.g=F,this.h=F}}var se=new T(()=>new Ae,d=>d.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let me,G=!1,oe=new Z,Y=()=>{const d=l.Promise.resolve(void 0);me=()=>{d.then(ve)}};var ve=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(_){O(_)}var y=se;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}G=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};l.addEventListener("test",_,y),l.removeEventListener("test",_,y)}catch{}return d}();function de(d,y){if(fe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var _=this.type=d.type,F=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(V){e:{try{H(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else _=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement);this.relatedTarget=y,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ae[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&de.aa.h.call(this)}}b(de,fe);var ae={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),et=0;function Cr(d,y,_,F,z){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!F,this.ha=z,this.key=++et,this.da=this.fa=!1}function jt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Vn(d){this.src=d,this.g={},this.h=0}Vn.prototype.add=function(d,y,_,F,z){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var le=wt(d,y,F,z);return-1<le?(y=d[le],_||(y.fa=!1)):(y=new Cr(y,this.src,X,!!F,z),y.fa=_,d.push(y)),y};function kn(d,y){var _=y.type;if(_ in d.g){var F=d.g[_],z=Array.prototype.indexOf.call(F,y,void 0),X;(X=0<=z)&&Array.prototype.splice.call(F,z,1),X&&(jt(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function wt(d,y,_,F){for(var z=0;z<d.length;++z){var X=d[z];if(!X.da&&X.listener==y&&X.capture==!!_&&X.ha==F)return z}return-1}var vt="closure_lm_"+(1e6*Math.random()|0),Ze={};function rn(d,y,_,F,z){if(Array.isArray(y)){for(var X=0;X<y.length;X++)rn(d,y[X],_,F,z);return null}return _=Ar(_),d&&d[Fe]?d.K(y,_,h(F)?!!F.capture:!1,z):xt(d,y,_,!1,F,z)}function xt(d,y,_,F,z,X){if(!y)throw Error("Invalid event type");var le=h(z)?!!z.capture:!!z,ot=Ji(d);if(ot||(d[vt]=ot=new Vn(d)),_=ot.add(y,_,F,le,X),_.proxy)return _;if(F=Sn(),_.proxy=F,F.src=d,F.listener=_,d.addEventListener)pe||(z=le),z===void 0&&(z=!1),d.addEventListener(y.toString(),F,z);else if(d.attachEvent)d.attachEvent(Zi(y.toString()),F);else if(d.addListener&&d.removeListener)d.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Sn(){function d(_){return y.call(d.src,d.listener,_)}const y=NA;return d}function Wi(d,y,_,F,z){if(Array.isArray(y))for(var X=0;X<y.length;X++)Wi(d,y[X],_,F,z);else F=h(F)?!!F.capture:!!F,_=Ar(_),d&&d[Fe]?(d=d.i,y=String(y).toString(),y in d.g&&(X=d.g[y],_=wt(X,_,F,z),-1<_&&(jt(X[_]),Array.prototype.splice.call(X,_,1),X.length==0&&(delete d.g[y],d.h--)))):d&&(d=Ji(d))&&(y=d.g[y.toString()],d=-1,y&&(d=wt(y,_,F,z)),(_=-1<d?y[d]:null)&&$i(_))}function $i(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Fe])kn(y.i,d);else{var _=d.type,F=d.proxy;y.removeEventListener?y.removeEventListener(_,F,d.capture):y.detachEvent?y.detachEvent(Zi(_),F):y.addListener&&y.removeListener&&y.removeListener(F),(_=Ji(y))?(kn(_,d),_.h==0&&(_.src=null,y[vt]=null)):jt(d)}}}function Zi(d){return d in Ze?Ze[d]:Ze[d]="on"+d}function NA(d,y){if(d.da)d=!0;else{y=new de(y,this);var _=d.listener,F=d.ha||d.src;d.fa&&$i(d),d=_.call(F,y)}return d}function Ji(d){return d=d[vt],d instanceof Vn?d:null}var ri="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ar(d){return typeof d=="function"?d:(d[ri]||(d[ri]=function(y){return d.handleEvent(y)}),d[ri])}function Nt(){ue.call(this),this.i=new Vn(this),this.M=this,this.F=null}b(Nt,ue),Nt.prototype[Fe]=!0,Nt.prototype.removeEventListener=function(d,y,_,F){Wi(this,d,y,_,F)};function Jt(d,y){var _,F=d.F;if(F)for(_=[];F;F=F.F)_.push(F);if(d=d.M,F=y.type||y,typeof y=="string")y=new fe(y,d);else if(y instanceof fe)y.target=y.target||d;else{var z=y;y=new fe(F,d),P(y,z)}if(z=!0,_)for(var X=_.length-1;0<=X;X--){var le=y.g=_[X];z=Es(le,F,!0,y)&&z}if(le=y.g=d,z=Es(le,F,!0,y)&&z,z=Es(le,F,!1,y)&&z,_)for(X=0;X<_.length;X++)le=y.g=_[X],z=Es(le,F,!1,y)&&z}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var _=d.g[y],F=0;F<_.length;F++)jt(_[F]);delete d.g[y],d.h--}}this.F=null},Nt.prototype.K=function(d,y,_,F){return this.i.add(String(d),y,!1,_,F)},Nt.prototype.L=function(d,y,_,F){return this.i.add(String(d),y,!0,_,F)};function Es(d,y,_,F){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,X=0;X<y.length;++X){var le=y[X];if(le&&!le.da&&le.capture==_){var ot=le.listener,Xt=le.ha||le.src;le.fa&&kn(d.i,le),z=ot.call(Xt,F)!==!1&&z}}return z&&!F.defaultPrevented}function yo(d,y,_){if(typeof d=="function")_&&(d=w(d,_));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:l.setTimeout(d,y||0)}function si(d){d.g=yo(()=>{d.g=null,d.i&&(d.i=!1,si(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class wo extends ue{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:si(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(d){ue.call(this),this.h=d,this.g={}}b(Is,ue);var lr=[];function Xi(d){M(d.g,function(y,_){this.g.hasOwnProperty(_)&&$i(y)},d),d.g={}}Is.prototype.N=function(){Is.aa.N.call(this),Xi(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yi=l.JSON.stringify,bc=l.JSON.parse,Ts=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function os(){}os.prototype.h=null;function ea(d){return d.h||(d.h=d.i())}function vo(){}var As={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ta(){fe.call(this,"d")}b(ta,fe);function ii(){fe.call(this,"c")}b(ii,fe);var Kn={},ai=null;function na(){return ai=ai||new Nt}Kn.La="serverreachability";function xo(d){fe.call(this,Kn.La,d)}b(xo,fe);function ks(d){const y=na();Jt(y,new xo(y))}Kn.STAT_EVENT="statevent";function oi(d,y){fe.call(this,Kn.STAT_EVENT,d),this.stat=y}b(oi,fe);function sn(d){const y=na();Jt(y,new oi(y,d))}Kn.Ma="timingevent";function _o(d,y){fe.call(this,Kn.Ma,d),this.size=y}b(_o,fe);function Ss(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},y)}function Ai(){this.g=!0}Ai.prototype.xa=function(){this.g=!1};function cr(d,y,_,F,z,X){d.info(function(){if(d.g)if(X)for(var le="",ot=X.split("&"),Xt=0;Xt<ot.length;Xt++){var Xe=ot[Xt].split("=");if(1<Xe.length){var dt=Xe[0];Xe=Xe[1];var Ft=dt.split("_");le=2<=Ft.length&&Ft[1]=="type"?le+(dt+"="+Xe+"&"):le+(dt+"=redacted&")}}else le=null;else le=X;return"XMLHTTP REQ ("+F+") [attempt "+z+"]: "+y+`
`+_+`
`+le})}function Ee(d,y,_,F,z,X,le){d.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+z+"]: "+y+`
`+_+`
`+X+" "+le})}function zn(d,y,_,F){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+FA(d,_)+(F?" "+F:"")})}function UA(d,y){d.info(function(){return"TIMEOUT: "+y})}Ai.prototype.info=function(){};function FA(d,y){if(!d.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(d=0;d<_.length;d++)if(Array.isArray(_[d])){var F=_[d];if(!(2>F.length)){var z=F[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return Yi(_)}catch{return y}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ra={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function ct(){}b(ct,os),ct.prototype.g=function(){return new XMLHttpRequest},ct.prototype.i=function(){return{}},Gn=new ct;function zt(d,y,_,F){this.j=d,this.i=y,this.l=_,this.R=F||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new an}function an(){this.i=null,this.g="",this.h=!1}var Bo={},sa={};function ia(d,y,_){d.L=1,d.v=q(_t(y)),d.m=_,d.P=!0,it(d,null)}function it(d,y){d.F=Date.now(),oa(d),d.A=_t(d.v);var _=d.A,F=d.R;Array.isArray(F)||(F=[String(F)]),rh(_.i,"t",F),d.C=0,_=d.j.J,d.h=new an,d.g=ch(d.j,_?y:null,!d.m),0<d.O&&(d.M=new wo(w(d.Y,d,d.g),d.O)),y=d.U,_=d.g,F=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(lr[0]=z.toString()),z=lr);for(var X=0;X<z.length;X++){var le=rn(_,z[X],F||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=d.H?B(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),ks(),cr(d.i,d.u,d.A,d.l,d.R,d.m)}zt.prototype.ca=function(d){d=d.target;const y=this.M;y&&Zn(d)==3?y.j():this.Y(d)},zt.prototype.Y=function(d){try{if(d==this.g)e:{const Ft=Zn(this.g);var y=this.g.Ba();const ma=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Sc(this.g)))){this.J||Ft!=4||y==7||(y==8||0>=ma?ks(3):ks(2)),bo(this);var _=this.g.Z();this.X=_;t:if(QA(this)){var F=Sc(this.g);d="";var z=F.length,X=Zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ls(this),Us(this);var le="";break t}this.h.i=new l.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,d+=this.h.i.decode(F[y],{stream:!(X&&y==z-1)});F.length=0,this.h.g+=d,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,Ee(this.i,this.u,this.A,this.l,this.R,Ft,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,Xt=this.g;if((ot=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ot)){var Xe=ot;break t}}Xe=null}if(_=Xe)zn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,li(this,_);else{this.o=!1,this.s=3,sn(12),ls(this),Us(this);break e}}if(this.P){_=!0;let Gt;for(;!this.J&&this.C<le.length;)if(Gt=aa(this,le),Gt==sa){Ft==4&&(this.s=4,sn(14),_=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Bo){this.s=4,sn(15),zn(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else zn(this.i,this.l,Gt,null),li(this,Gt);if(QA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||le.length!=0||this.h.h||(this.s=1,sn(16),_=!1),this.o=this.o&&_,!_)zn(this.i,this.l,le,"[Invalid Chunked Response]"),ls(this),Us(this);else if(0<le.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),OA(dt),dt.M=!0,sn(11))}}else zn(this.i,this.l,le,null),li(this,le);Ft==4&&ls(this),this.o&&!this.J&&(Ft==4?Uc(this.j,this):(this.o=!1,oa(this)))}else Cp(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),ls(this),Us(this)}}}catch{}finally{}};function QA(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function aa(d,y){var _=d.C,F=y.indexOf(`
`,_);return F==-1?sa:(_=Number(y.substring(_,F)),isNaN(_)?Bo:(F+=1,F+_>y.length?sa:(y=y.slice(F,F+_),d.C=F+_,y)))}zt.prototype.cancel=function(){this.J=!0,ls(this)};function oa(d){d.S=Date.now()+d.I,PA(d,d.I)}function PA(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ss(w(d.ba,d),y)}function bo(d){d.B&&(l.clearTimeout(d.B),d.B=null)}zt.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(UA(this.i,this.A),this.L!=2&&(ks(),sn(17)),ls(this),this.s=2,Us(this)):PA(this,this.S-d)};function Us(d){d.j.G==0||d.J||Uc(d.j,d)}function ls(d){bo(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Xi(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function li(d,y){try{var _=d.j;if(_.G!=0&&(_.g==d||De(_.h,d))){if(!d.K&&De(_.h,d)&&_.G==3){try{var F=_.Da.g.parse(y)}catch{F=null}if(Array.isArray(F)&&F.length==3){var z=F;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<d.F)VA(_),DA(_);else break e;MA(_),sn(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ss(w(_.Za,_),6e3));if(1>=Fs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else fi(_,11)}else if((d.K||_.g==d)&&VA(_),!E(y))for(z=_.Da.g.parse(y),y=0;y<z.length;y++){let Xe=z[y];if(_.T=Xe[0],Xe=Xe[1],_.G==2)if(Xe[0]=="c"){_.K=Xe[1],_.ia=Xe[2];const dt=Xe[3];dt!=null&&(_.la=dt,_.j.info("VER="+_.la));const Ft=Xe[4];Ft!=null&&(_.Aa=Ft,_.j.info("SVER="+_.Aa));const ma=Xe[5];ma!=null&&typeof ma=="number"&&0<ma&&(F=1.5*ma,_.L=F,_.j.info("backChannelRequestTimeoutMs_="+F)),F=_;const Gt=d.g;if(Gt){const zA=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zA){var X=F.h;X.g||zA.indexOf("spdy")==-1&&zA.indexOf("quic")==-1&&zA.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(at(X,X.h),X.h=null))}if(F.D){const Ps=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ps&&(F.ya=Ps,Q(F.I,F.D,Ps))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-d.F,_.j.info("Handshake RTT: "+_.R+"ms")),F=_;var le=d;if(F.qa=KA(F,F.J?F.ia:null,F.W),le.K){qn(F.h,le);var ot=le,Xt=F.L;Xt&&(ot.I=Xt),ot.B&&(bo(ot),oa(ot)),F.g=le}else ds(F);0<_.i.length&&fa(_)}else Xe[0]!="stop"&&Xe[0]!="close"||fi(_,7);else _.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?fi(_,7):jA(_):Xe[0]!="noop"&&_.l&&_.l.ta(Xe),_.v=0)}}ks(4)}catch{}}var ci=class{constructor(d,y){this.g=d,this.map=y}};function Co(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Fs(d){return d.h?1:d.g?d.g.size:0}function De(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function at(d,y){d.g?d.g.add(y):d.h=y}function qn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Co.prototype.cancel=function(){if(this.i=Se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Se(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.D);return y}return x(d.i)}function cs(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var y=[],_=d.length,F=0;F<_;F++)y.push(d[F]);return y}y=[],_=0;for(F in d)y[_++]=d[F];return y}function la(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var y=[];d=d.length;for(var _=0;_<d;_++)y.push(_);return y}y=[],_=0;for(const F in d)y[_++]=F;return y}}}function Pe(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var _=la(d),F=cs(d),z=F.length,X=0;X<z;X++)y.call(void 0,F[X],_&&_[X],d)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(d,y){if(d){d=d.split("&");for(var _=0;_<d.length;_++){var F=d[_].indexOf("="),z=null;if(0<=F){var X=d[_].substring(0,F);z=d[_].substring(F+1)}else X=d[_];y(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Wn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Wn){this.h=d.h,ui(this,d.j),this.o=d.o,this.g=d.g,Or(this,d.s),this.l=d.l;var y=d.i,_=new us;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Er(this,_),this.m=d.m}else d&&(y=String(d).match(mt))?(this.h=!1,ui(this,y[1]||"",!0),this.o=te(y[2]||""),this.g=te(y[3]||"",!0),Or(this,y[4]),this.l=te(y[5]||"",!0),Er(this,y[6]||"",!0),this.m=te(y[7]||"")):(this.h=!1,this.i=new us(null,this.h))}Wn.prototype.toString=function(){var d=[],y=this.j;y&&d.push(we(y,Je,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(we(y,Je,!0),"@"),d.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&d.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(we(_,_.charAt(0)=="/"?mn:Me,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",we(_,ua)),d.join("")};function _t(d){return new Wn(d)}function ui(d,y,_){d.j=_?te(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Or(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Er(d,y,_){y instanceof us?(d.i=y,Hr(d.i,d.h)):(_||(y=we(y,on)),d.i=new us(y,d.h))}function Q(d,y,_){d.i.set(y,_)}function q(d){return Q(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function te(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function we(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,Le),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Le(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Je=/[#\/\?@]/g,Me=/[#\?:]/g,mn=/[#\?]/g,on=/[#\?@]/g,ua=/#/g;function us(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function $n(d){d.g||(d.g=new Map,d.h=0,d.i&&ca(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}t=us.prototype,t.add=function(d,y){$n(this),this.i=null,d=Ne(this,d);var _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function Eo(d,y){$n(d),y=Ne(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function di(d,y){return $n(d),y=Ne(d,y),d.g.has(y)}t.forEach=function(d,y){$n(this),this.g.forEach(function(_,F){_.forEach(function(z){d.call(y,z,F,this)},this)},this)},t.na=function(){$n(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let F=0;F<y.length;F++){const z=d[F];for(let X=0;X<z.length;X++)_.push(y[F])}return _},t.V=function(d){$n(this);let y=[];if(typeof d=="string")di(this,d)&&(y=y.concat(this.g.get(Ne(this,d))));else{d=Array.from(this.g.values());for(let _=0;_<d.length;_++)y=y.concat(d[_])}return y},t.set=function(d,y){return $n(this),this.i=null,d=Ne(this,d),di(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function rh(d,y,_){Eo(d,y),0<_.length&&(d.i=null,d.g.set(Ne(d,y),x(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var F=y[_];const X=encodeURIComponent(String(F)),le=this.V(F);for(F=0;F<le.length;F++){var z=X;le[F]!==""&&(z+="="+encodeURIComponent(String(le[F]))),d.push(z)}}return this.i=d.join("&")};function Ne(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Hr(d,y){y&&!d.j&&($n(d),d.i=null,d.g.forEach(function(_,F){var z=F.toLowerCase();F!=z&&(Eo(this,F),rh(this,z,_))},d)),d.j=y}function ut(d,y){const _=new Ai;if(l.Image){const F=new Image;F.onload=C(Vr,_,"TestLoadImage: loaded",!0,y,F),F.onerror=C(Vr,_,"TestLoadImage: error",!1,y,F),F.onabort=C(Vr,_,"TestLoadImage: abort",!1,y,F),F.ontimeout=C(Vr,_,"TestLoadImage: timeout",!1,y,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=d}else y(!1)}function sh(d,y){const _=new Ai,F=new AbortController,z=setTimeout(()=>{F.abort(),Vr(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:F.signal}).then(X=>{clearTimeout(z),X.ok?Vr(_,"TestPingServer: ok",!0,y):Vr(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Vr(_,"TestPingServer: error",!1,y)})}function Vr(d,y,_,F,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),F(_)}catch{}}function Cc(){this.g=new Ts}function Ec(d,y,_){const F=_||"";try{Pe(d,function(z,X){let le=z;h(z)&&(le=Yi(z)),y.push(F+X+"="+encodeURIComponent(le))})}catch(z){throw y.push(F+"type="+encodeURIComponent("_badmap")),z}}function Kr(d){this.l=d.Ub||null,this.j=d.eb||!1}b(Kr,os),Kr.prototype.g=function(){return new da(this.l,this.j)},Kr.prototype.i=function(d){return function(){return d}}({});function da(d,y){Nt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(da,Nt),t=da.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Ir(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||l).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ut(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ha(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ha(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ut(this):Ir(this),this.readyState==3&&ha(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ut(this))},t.Qa=function(d){this.g&&(this.response=d,Ut(this))},t.ga=function(){this.g&&Ut(this)};function Ut(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ir(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function Ir(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ic(d){let y="";return M(d,function(_,F){y+=F,y+=":",y+=_,y+=`\r
`}),y}function RA(d,y,_){e:{for(F in _){var F=!1;break e}F=!0}F||(_=Ic(_),typeof d=="string"?_!=null&&encodeURIComponent(String(_)):Q(d,y,_))}function Ct(d){Nt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ct,Nt);var ih=/^https?$/i,Tc=["POST","PUT"];t=Ct.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,_,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?ea(this.o):ea(Gn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(X){ah(this,X);return}if(d=_||"",_=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var z in F)_.set(z,F[z]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const X of F.keys())_.set(X,F.get(X));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Tc,y,void 0))||F||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,le]of _)this.g.setRequestHeader(X,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ur(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){ah(this,X)}};function ah(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,kc(d),LA(d)}function kc(d){d.A||(d.A=!0,Jt(d,"complete"),Jt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Jt(this,"complete"),Jt(this,"abort"),LA(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),LA(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ke(this):this.bb())},t.bb=function(){Ke(this)};function Ke(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Zn(d)!=4||d.Z()!=2)){if(d.u&&Zn(d)==4)yo(d.Ea,0,d);else if(Jt(d,"readystatechange"),Zn(d)==4){d.h=!1;try{const le=d.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var F;if(F=le===0){var z=String(d.D).match(mt)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),F=!ih.test(z?z.toLowerCase():"")}_=F}if(_)Jt(d,"complete"),Jt(d,"success");else{d.m=6;try{var X=2<Zn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",kc(d)}}finally{LA(d)}}}}function LA(d,y){if(d.g){ur(d);const _=d.g,F=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Jt(d,"ready");try{_.onreadystatechange=F}catch{}}}function ur(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Zn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),bc(y)}};function Sc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Cp(d){const y={};d=(d.g&&2<=Zn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<d.length;F++){if(E(d[F]))continue;var _=D(d[F]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=y[z]||[];y[z]=X,X.push(_)}I(y,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function oh(d){this.Aa=0,this.i=[],this.j=new Ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hi("baseRetryDelayMs",5e3,d),this.cb=hi("retryDelaySeedMs",1e4,d),this.Wa=hi("forwardChannelMaxRetries",2,d),this.wa=hi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Co(d&&d.concurrentRequestLimit),this.Da=new Cc,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=oh.prototype,t.la=8,t.G=1,t.connect=function(d,y,_,F){sn(0),this.W=d,this.H=y||{},_&&F!==void 0&&(this.H.OSID=_,this.H.OAID=F),this.F=this.X,this.I=KA(this,null,this.W),fa(this)};function jA(d){if(Ah(d),d.G==3){var y=d.U++,_=_t(d.I);if(Q(_,"SID",d.K),Q(_,"RID",y),Q(_,"TYPE","terminate"),Io(d,_),y=new zt(d,d.j,y),y.L=2,y.v=q(_t(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=y.v,_=!0),_||(y.g=ch(y.j,null),y.g.ea(y.v)),y.F=Date.now(),oa(y)}lh(d)}function DA(d){d.g&&(OA(d),d.g.cancel(),d.g=null)}function Ah(d){DA(d),d.u&&(l.clearTimeout(d.u),d.u=null),VA(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function fa(d){if(!Aa(d.h)&&!d.s){d.s=!0;var y=d.Ga;me||Y(),G||(me(),G=!0),oe.add(y,d),d.B=0}}function Ep(d,y){return Fs(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ss(w(d.Ga,d,y),Fc(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new zt(this,this.j,d);let X=this.o;if(this.S&&(X?(X=B(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var F=this.i[_];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(y+=F,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Nc(this,z,y),_=_t(this.I),Q(_,"RID",d),Q(_,"CVER",22),this.D&&Q(_,"X-HTTP-Session-Id",this.D),Io(this,_),X&&(this.O?y="headers="+encodeURIComponent(String(Ic(X)))+"&"+y:this.m&&RA(_,this.m,X)),at(this.h,z),this.Ua&&Q(_,"TYPE","init"),this.P?(Q(_,"$req",y),Q(_,"SID","null"),z.T=!0,ia(z,_,null)):ia(z,_,y),this.G=2}}else this.G==3&&(d?Tr(this,d):this.i.length==0||Aa(this.h)||Tr(this))};function Tr(d,y){var _;y?_=y.l:_=d.U++;const F=_t(d.I);Q(F,"SID",d.K),Q(F,"RID",_),Q(F,"AID",d.T),Io(d,F),d.m&&d.o&&RA(F,d.m,d.o),_=new zt(d,d.j,_,d.B+1),d.m===null&&(_.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Nc(d,_,1e3),_.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),at(d.h,_),ia(_,F,y)}function Io(d,y){d.H&&M(d.H,function(_,F){Q(y,F,_)}),d.l&&Pe({},function(_,F){Q(y,F,_)})}function Nc(d,y,_){_=Math.min(d.i.length,_);var F=d.l?w(d.l.Na,d.l,d):null;e:{var z=d.i;let X=-1;for(;;){const le=["count="+_];X==-1?0<_?(X=z[0].g,le.push("ofs="+X)):X=0:le.push("ofs="+X);let ot=!0;for(let Xt=0;Xt<_;Xt++){let Xe=z[Xt].g;const dt=z[Xt].map;if(Xe-=X,0>Xe)X=Math.max(0,z[Xt].g-100),ot=!1;else try{Ec(dt,le,"req"+Xe+"_")}catch{F&&F(dt)}}if(ot){F=le.join("&");break e}}}return d=d.i.splice(0,_),y.D=d,F}function ds(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;me||Y(),G||(me(),G=!0),oe.add(y,d),d.v=0}}function MA(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ss(w(d.Fa,d),Fc(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,HA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ss(w(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),DA(this),HA(this))};function OA(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function HA(d){d.g=new zt(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=_t(d.qa);Q(y,"RID","rpc"),Q(y,"SID",d.K),Q(y,"AID",d.T),Q(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Q(y,"TO",d.ja),Q(y,"TYPE","xmlhttp"),Io(d,y),d.m&&d.o&&RA(y,d.m,d.o),d.L&&(d.g.I=d.L);var _=d.g;d=d.ia,_.L=1,_.v=q(_t(y)),_.m=null,_.P=!0,it(_,d)}t.Za=function(){this.C!=null&&(this.C=null,DA(this),MA(this),sn(19))};function VA(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Uc(d,y){var _=null;if(d.g==y){VA(d),OA(d),d.g=null;var F=2}else if(De(d.h,y))_=y.D,qn(d.h,y),F=1;else return;if(d.G!=0){if(y.o)if(F==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var z=d.B;F=na(),Jt(F,new _o(F,_)),fa(d)}else ds(d);else if(z=y.s,z==3||z==0&&0<y.X||!(F==1&&Ep(d,y)||F==2&&MA(d)))switch(_&&0<_.length&&(y=d.h,y.i=y.i.concat(_)),z){case 1:fi(d,5);break;case 4:fi(d,10);break;case 3:fi(d,6);break;default:fi(d,2)}}}function Fc(d,y){let _=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(_*=2),_*y}function fi(d,y){if(d.j.info("Error code "+y),y==2){var _=w(d.fb,d),F=d.Xa;const z=!F;F=new Wn(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ui(F,"https"),q(F),z?ut(F.toString(),_):sh(F.toString(),_)}else sn(2);d.G=0,d.l&&d.l.sa(y),lh(d),Ah(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function lh(d){if(d.G=0,d.ka=[],d.l){const y=Se(d.h);(y.length!=0||d.i.length!=0)&&(U(d.ka,y),U(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function KA(d,y,_){var F=_ instanceof Wn?_t(_):new Wn(_);if(F.g!="")y&&(F.g=y+"."+F.g),Or(F,F.s);else{var z=l.location;F=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var X=new Wn(null);F&&ui(X,F),y&&(X.g=y),z&&Or(X,z),_&&(X.l=_),F=X}return _=d.D,y=d.ya,_&&y&&Q(F,_,y),Q(F,"VER",d.la),Io(d,F),F}function ch(d,y,_){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ct(new Kr({eb:_})):new Ct(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qc(){}t=Qc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function To(){}To.prototype.g=function(d,y){return new gn(d,y)};function gn(d,y){Nt.call(this),this.g=new oh(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!E(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!E(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new zr(this)}b(gn,Nt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){jA(this.g)},gn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.u&&(_={},_.__data__=Yi(d),d=_);y.i.push(new ci(y.Ya++,d)),y.G==3&&fa(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,jA(this.g),delete this.g,gn.aa.N.call(this)};function Qs(d){ta.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}b(Qs,ta);function uh(){ii.call(this),this.status=1}b(uh,ii);function zr(d){this.g=d}b(zr,Qc),zr.prototype.ua=function(){Jt(this.g,"a")},zr.prototype.ta=function(d){Jt(this.g,new Qs(d))},zr.prototype.sa=function(d){Jt(this.g,new uh)},zr.prototype.ra=function(){Jt(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Vk=function(){return new To},Hk=function(){return na()},Ok=Kn,Jy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Hf=Ns,ra.COMPLETE="complete",Mk=ra,vo.EventType=As,As.OPEN="a",As.CLOSE="b",As.ERROR="c",As.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,du=vo,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,Dk=Ct}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new zv("@firebase/firestore");function Al(){return AA.logLevel}function re(t,...e){if(AA.logLevel<=We.DEBUG){const n=e.map(sx);AA.debug(`Firestore (${pc}): ${t}`,...n)}}function Zt(t,...e){if(AA.logLevel<=We.ERROR){const n=e.map(sx);AA.error(`Firestore (${pc}): ${t}`,...n)}}function Zl(t,...e){if(AA.logLevel<=We.WARN){const n=e.map(sx);AA.warn(`Firestore (${pc}): ${t}`,...n)}}function sx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: `+t;throw Zt(e),new Error(e)}function Ie(t,e){t||be()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pn.UNAUTHENTICATED))}shutdown(){}}class nD{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $s,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $s)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new tD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Pn(e)}}class rD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new iD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=oD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function zk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Ve(0,0))}static max(){return new Te(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class st extends hd{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new st(n)}static emptyPath(){return new st([])}}const AD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends hd{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return AD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ce(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ce(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new ce(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(st.fromString(e))}static fromName(e){return new ge(st.fromString(e).popFirst(5))}static empty(){return new ge(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new st(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Xy(t){return t.fields.find(e=>e.kind===2)}function Qo(t){return t.fields.filter(e=>e.kind!==2)}Rm.UNKNOWN_ID=-1;class Vf{constructor(e,n){this.fieldPath=e,this.kind=n}}class fd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fd(0,jr.min())}}function Gk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Te.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new jr(s,ge.empty(),e)}function qk(t){return new jr(t.readTime,t.key,-1)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(Te.min(),ge.empty(),-1)}static max(){return new jr(Te.max(),ge.empty(),-1)}}function ax(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==Wk)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(m=>{o[h]=m,++l,l===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new $s,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Fu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=ox(r.target.error);this.V.reject(new Fu(e,s))}}static open(e,n,r,s){try{return new Qg(n,e.transaction(s,r))}catch(i){throw new Fu(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new cD(n)}}class Ja{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Ja.S(hn())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),Ro(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Kv())return!1;if(Ja.v())return!0;const e=hn(),n=Ja.S(e),r=0<n&&n<10,s=Zk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(re("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ce(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ce(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fu(e,o))},s.onupgradeneeded=i=>{re("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{re("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=Qg.open(this.db,e,i?"readonly":"readwrite",r),u=s(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),$.reject(h))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,h=u.name!=="FirebaseError"&&o<3;if(re("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Zk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class lD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ro(this.B.delete())}}class Fu extends ce{constructor(e,n){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function mo(t){return t.name==="IndexedDbTransactionError"}class cD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(re("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ro(r)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),Ro(this.store.add(e))}get(e){return Ro(this.store.get(e)).next(n=>(n===void 0&&(n=null),re("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),Ro(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),Ro(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new $((o,l)=>{i.onerror=u=>{l(u.target.error)},i.onsuccess=u=>{o(u.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(l,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new $((r,s)=>{n.onerror=i=>{const o=ox(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new $((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const u=new lD(l),h=n(l.primaryKey,l.value,u);if(h instanceof $){const m=h.catch(p=>(u.done(),$.reject(p)));r.push(m)}u.isDone?s():u.K===null?l.continue():l.continue(u.K)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ro(t){return new $((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=ox(r.target.error);n(s)}})}let Hb=!1;function ox(t){const e=Ja.S(hn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hb||(Hb=!0,setTimeout(()=>{throw r},0)),r}}return t}class uD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){re("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{re("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){mo(n)?re("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await fo(n)}await this.X(6e4)})}}class dD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return $.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return re("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(l=>{s-=l,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(l=>(re("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=qk(i);ax(o,r)>0&&(r=o)}),new jr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}yr.oe=-1;function Pg(t){return t==null}function md(t){return t===0&&1/t==-1/0}function Jk(t){return typeof t=="number"&&Number.isInteger(t)&&!md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vb(e)),e=hD(t.get(n),e);return Vb(e)}function hD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Vb(t){return t+""}function Os(t){const e=t.length;if(Ie(e>=2),e===2)return Ie(t.charAt(0)===""&&t.charAt(1)===""),st.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&be(),t.charAt(o+1)){case"":const l=t.substring(i,o);let u;s.length===0?u=l:(s+=l,u=s,s=""),r.push(u);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:be()}i=o+2}return new st(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t,e){return[t,sr(e)]}function Xk(t,e,n){return[t,sr(e),n]}const fD={},mD=["prefixPath","collectionGroup","readTime","documentId"],gD=["prefixPath","collectionGroup","documentId"],pD=["collectionGroup","readTime","prefixPath","documentId"],yD=["canonicalId","targetId"],wD=["targetId","path"],vD=["path","targetId"],xD=["collectionId","parent"],_D=["indexId","uid"],BD=["uid","sequenceNumber"],bD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CD=["indexId","uid","orderedDocumentKey"],ED=["userId","collectionPath","documentId"],ID=["userId","collectionPath","largestBatchId"],TD=["userId","collectionGroup","largestBatchId"],Yk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kD=[...Yk,"documentOverlays"],eS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tS=eS,Ax=[...tS,"indexConfiguration","indexState","indexEntries"],SD=Ax,ND=[...Ax,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends $k{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function fn(t,e){const n=Ce(t);return Ja.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function IA(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??bn.RED,this.left=s??bn.EMPTY,this.right=i??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new bn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,s,i){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gb(this.data.getIterator())}getIteratorFrom(e){return new Gb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Gb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function JA(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new wr([])}unionWith(e){let n=new ft(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rS("Invalid base64 string: "+i):i}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const UD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=UD.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function no(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cx(t){const e=t.mapValue.fields.__previous_value__;return lx(e)?cx(e):e}function gd(t){const e=Hi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class ro{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zf={nullValue:"NULL_VALUE"};function lA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lx(t)?4:sS(t)?9007199254740991:Rg(t)?10:11:be()}function Zs(t,e){if(t===e)return!0;const n=lA(t);if(n!==lA(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gd(t).isEqual(gd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Hi(s.timestampValue),l=Hi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return no(s.bytesValue).isEqual(no(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return It(s.geoPointValue.latitude)===It(i.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return It(s.integerValue)===It(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=It(s.doubleValue),l=It(i.doubleValue);return o===l?md(o)===md(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],Zs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(zb(o)!==zb(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Zs(o[u],l[u])))return!1;return!0}(t,e);default:return be()}}function pd(t,e){return(t.values||[]).find(n=>Zs(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=lA(t),r=lA(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=It(i.integerValue||i.doubleValue),u=It(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return qb(t.timestampValue,e.timestampValue);case 4:return qb(gd(t),gd(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(i,o){const l=no(i),u=no(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const m=Re(l[h],u[h]);if(m!==0)return m}return Re(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Re(It(i.latitude),It(o.latitude));return l!==0?l:Re(It(i.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,m;const p=i.fields||{},w=o.fields||{},C=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=(u=w.value)===null||u===void 0?void 0:u.arrayValue,x=Re(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0);return x!==0?x:Wb(C,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===La.mapValue&&o===La.mapValue)return 0;if(i===La.mapValue)return 1;if(o===La.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const w=Re(u[p],m[p]);if(w!==0)return w;const C=so(l[u[p]],h[m[p]]);if(C!==0)return C}return Re(u.length,m.length)}(t.mapValue,e.mapValue);default:throw be()}}function qb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Hi(t),r=Hi(e),s=Re(n.seconds,r.seconds);return s!==0?s:Re(n.nanos,r.nanos)}function Wb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=so(n[s],r[s]);if(i)return i}return Re(n.length,r.length)}function Xl(t){return ew(t)}function ew(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return no(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ew(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ew(n.fields[o])}`;return s+"}"}(t.mapValue):be()}function yd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tw(t){return!!t&&"integerValue"in t}function wd(t){return!!t&&"arrayValue"in t}function $b(t){return!!t&&"nullValue"in t}function Zb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gf(t){return!!t&&"mapValue"in t}function Rg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return IA(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const iS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function QD(t){return"nullValue"in t?zf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?yd(ro.empty(),ge.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Rg(t)?iS:{mapValue:{}}:be()}function PD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?yd(ro.empty(),ge.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?iS:"mapValue"in t?Rg(t)?{mapValue:{}}:La:be()}function Jb(t,e){const n=so(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Xb(t,e){const n=so(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Qu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){IA(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jn(Qu(this.value))}}function aS(t){const e=[];return IA(t.fields,(n,r)=>{const s=new kt([n]);if(Gf(r)){const i=aS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Mt(e,0,Te.min(),Te.min(),Te.min(),jn.empty(),0)}static newFoundDocument(e,n,r,s){return new Mt(e,1,n,Te.min(),r,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,Te.min(),Te.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,Te.min(),Te.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.position=e,this.inclusive=n}}function Yb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ge.comparator(ge.fromName(o.referenceValue),n.key):r=so(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function eC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n="asc"){this.field=e,this.dir=n}}function RD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{}class $e extends oS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LD(e,n,r):n==="array-contains"?new MD(e,r):n==="in"?new hS(e,r):n==="not-in"?new OD(e,r):n==="array-contains-any"?new HD(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jD(e,r):new DD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(so(n,this.value)):n!==null&&lA(this.value)===lA(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends oS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new At(e,n)}matches(e){return ec(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ec(t){return t.op==="and"}function nw(t){return t.op==="or"}function ux(t){return AS(t)&&ec(t)}function AS(t){for(const e of t.filters)if(e instanceof At)return!1;return!0}function rw(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+Xl(t.value);if(ux(t))return t.filters.map(e=>rw(e)).join(",");{const e=t.filters.map(n=>rw(n)).join(",");return`${t.op}(${e})`}}function lS(t,e){return t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.field.isEqual(s.field)&&Zs(r.value,s.value)}(t,e):t instanceof At?function(r,s){return s instanceof At&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&lS(o,s.filters[l]),!0):!1}(t,e):void be()}function cS(t,e){const n=t.filters.concat(e);return At.create(n,t.op)}function uS(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${Xl(n.value)}`}(t):t instanceof At?function(n){return n.op.toString()+" {"+n.getFilters().map(uS).join(" ,")+"}"}(t):"Filter"}class LD extends $e{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class jD extends $e{constructor(e,n){super(e,"in",n),this.keys=dS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DD extends $e{constructor(e,n){super(e,"not-in",n),this.keys=dS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class MD extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wd(n)&&pd(n.arrayValue,this.value)}}class hS extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pd(this.value.arrayValue,n)}}class OD extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!pd(this.value.arrayValue,n)}}class HD extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function sw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VD(t,e,n,r,s,i,o)}function cA(t){const e=Ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xl(r)).join(",")),e.ue=n}return e.ue}function Md(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eC(t.startAt,e.startAt)&&eC(t.endAt,e.endAt)}function Lm(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function jm(t,e){return t.filters.filter(n=>n instanceof $e&&n.field.isEqual(e))}function tC(t,e,n){let r=zf,s=!0;for(const i of jm(t,e)){let o=zf,l=!0;switch(i.op){case"<":case"<=":o=QD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,l=!1;break;case"!=":case"not-in":o=zf}Jb({value:r,inclusive:s},{value:o,inclusive:l})<0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Jb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function nC(t,e,n){let r=La,s=!0;for(const i of jm(t,e)){let o=La,l=!0;switch(i.op){case">=":case">":o=PD(i.value),l=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,l=!1;break;case"!=":case"not-in":o=La}Xb({value:r,inclusive:s},{value:o,inclusive:l})>0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Xb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fS(t,e,n,r,s,i,o,l){return new yc(t,e,n,r,s,i,o,l)}function Od(t){return new yc(t)}function rC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mS(t){return t.collectionGroup!==null}function Pu(t){const e=Ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ft(kt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new vd(i,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new vd(kt.keyField(),r))}return e.ce}function Pr(t){const e=Ce(t);return e.le||(e.le=KD(e,Pu(t))),e.le}function KD(t,e){if(t.limitType==="F")return sw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new vd(s.field,i)});const n=t.endAt?new Yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yl(t.startAt.position,t.startAt.inclusive):null;return sw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iw(t,e){const n=t.filters.concat([e]);return new yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dm(t,e,n){return new yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lg(t,e){return Md(Pr(t),Pr(e))&&t.limitType===e.limitType}function gS(t){return`${cA(Pr(t))}|lt:${t.limitType}`}function ll(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>uS(s)).join(", ")}]`),Pg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Xl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Xl(s)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function Hd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ge.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Pu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Yb(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Pu(r),s)||r.endAt&&!function(o,l,u){const h=Yb(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Pu(r),s))}(t,e)}function pS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yS(t){return(e,n)=>{let r=!1;for(const s of Pu(t)){const i=zD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zD(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?so(u,h):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){IA(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return nS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new yt(ge.comparator);function Ur(){return GD}const wS=new yt(ge.comparator);function hu(...t){let e=wS;for(const n of t)e=e.insert(n.key,n);return e}function vS(t){let e=wS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hs(){return Ru()}function xS(){return Ru()}function Ru(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}const qD=new yt(ge.comparator),WD=new ft(ge.comparator);function je(...t){let e=WD;for(const n of t)e=e.add(n);return e}const $D=new ft(Re);function dx(){return $D}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function _S(t){return{integerValue:""+t}}function ZD(t,e){return Jk(e)?_S(e):hx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this._=void 0}}function JD(t,e,n){return t instanceof tc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&lx(i)&&(i=cx(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof uA?bS(t,e):t instanceof dA?CS(t,e):function(s,i){const o=BS(s,i),l=sC(o)+sC(s.Pe);return tw(o)&&tw(s.Pe)?_S(l):hx(s.serializer,l)}(t,e)}function XD(t,e,n){return t instanceof uA?bS(t,e):t instanceof dA?CS(t,e):n}function BS(t,e){return t instanceof xd?function(r){return tw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class tc extends jg{}class uA extends jg{constructor(e){super(),this.elements=e}}function bS(t,e){const n=ES(e);for(const r of t.elements)n.some(s=>Zs(s,r))||n.push(r);return{arrayValue:{values:n}}}class dA extends jg{constructor(e){super(),this.elements=e}}function CS(t,e){let n=ES(e);for(const r of t.elements)n=n.filter(s=>!Zs(s,r));return{arrayValue:{values:n}}}class xd extends jg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function sC(t){return It(t.integerValue||t.doubleValue)}function ES(t){return wd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.field=e,this.transform=n}}function YD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uA&&s instanceof uA||r instanceof dA&&s instanceof dA?Jl(r.elements,s.elements,Zs):r instanceof xd&&s instanceof xd?Zs(r.Pe,s.Pe):r instanceof tc&&s instanceof tc}(t.transform,e.transform)}class eM{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mg{}function IS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Og(t.key,Dn.none()):new wc(t.key,t.data,Dn.none());{const n=t.data,r=jn.empty();let s=new ft(kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qi(t.key,r,new wr(s.toArray()),Dn.none())}}function tM(t,e,n){t instanceof wc?function(s,i,o){const l=s.value.clone(),u=aC(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(s,i,o){if(!qf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=aC(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(TS(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Lu(t,e,n,r){return t instanceof wc?function(i,o,l,u){if(!qf(i.precondition,o))return l;const h=i.value.clone(),m=oC(i.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(i,o,l,u){if(!qf(i.precondition,o))return l;const h=oC(i.fieldTransforms,u,o),m=o.data;return m.setAll(TS(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return qf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function nM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=BS(r.transform,s||null);i!=null&&(n===null&&(n=jn.empty()),n.set(r.field,i))}return n||null}function iC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jl(r,s,(i,o)=>YD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wc extends Mg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qi extends Mg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function TS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aC(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,XD(o,l,n[s]))}return r}function oC(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,JD(i,o,e))}return r}class Og extends Mg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kS extends Mg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&tM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xS();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=IS(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(n,r)=>iC(n,r))&&Jl(this.baseMutations,e.baseMutations,(n,r)=>iC(n,r))}}class mx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=function(){return qD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,Ye;function sM(t){switch(t){default:return be();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function SS(t){if(t===void 0)return Zt("GRPC error has no .code"),ee.UNKNOWN;switch(t){case en.OK:return ee.OK;case en.CANCELLED:return ee.CANCELLED;case en.UNKNOWN:return ee.UNKNOWN;case en.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case en.INTERNAL:return ee.INTERNAL;case en.UNAVAILABLE:return ee.UNAVAILABLE;case en.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case en.NOT_FOUND:return ee.NOT_FOUND;case en.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case en.ABORTED:return ee.ABORTED;case en.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case en.DATA_LOSS:return ee.DATA_LOSS;default:return be()}}(Ye=en||(en={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new $o([4294967295,4294967295],0);function AC(t){const e=iM().encode(t),n=new jk;return n.update(e),new Uint8Array(n.digest())}function lC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $o([n,r],0),new $o([s,i],0)]}class px{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fu(`Invalid padding: ${n}`);if(r<0)throw new fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$o.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply($o.fromNumber(r)));return s.compare(aM)===1&&(s=new $o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=AC(e),[r,s]=lC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new px(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=AC(e),[r,s]=lC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vd(Te.min(),s,new yt(Re),Ur(),je())}}class Kd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kd(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class NS{constructor(e,n){this.targetId=e,this.me=n}}class US{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cC{constructor(){this.fe=0,this.ge=dC(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=je(),n=je(),r=je();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:be()}}),new Kd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ur(),this.qe=uC(),this.Qe=new yt(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Lm(i))if(r===0){const o=new ge(i.path);this.Ue(n,o,Mt.newNoDocument(o,Te.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=no(r).toUint8Array()}catch(u){if(u instanceof rS)return Zl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new px(o,s,i)}catch(u){return Zl(u instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Lm(l.target)){const u=new ge(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Mt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=je();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Vd(e,n,this.Qe,this.ke,r);return this.ke=Ur(),this.qe=uC(),this.Qe=new yt(Re),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uC(){return new yt(ge.comparator)}function dC(){return new yt(ge.comparator)}const AM={asc:"ASCENDING",desc:"DESCENDING"},lM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cM={and:"AND",or:"OR"};class uM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function aw(t,e){return t.useProto3Json||Pg(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dM(t,e){return nc(t,e.toTimestamp())}function ir(t){return Ie(!!t),Te.fromTimestamp(function(n){const r=Hi(n);return new Ve(r.seconds,r.nanos)}(t))}function yx(t,e){return ow(t,e).canonicalString()}function ow(t,e){const n=function(s){return new st(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QS(t){const e=st.fromString(t);return Ie(VS(e)),e}function Mm(t,e){return yx(t.databaseId,e.path)}function Zo(t,e){const n=QS(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(LS(n))}function PS(t,e){return yx(t.databaseId,e)}function RS(t){const e=QS(t);return e.length===4?st.emptyPath():LS(e)}function Aw(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LS(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hC(t,e,n){return{name:Mm(t,e),fields:n.value.mapValue.fields}}function hM(t,e,n){const r=Zo(t,e.name),s=ir(e.updateTime),i=e.createTime?ir(e.createTime):Te.min(),o=new jn({mapValue:{fields:e.fields}}),l=Mt.newFoundDocument(r,s,i,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function fM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Ie(m===void 0||typeof m=="string"),Ht.fromBase64String(m||"")):(Ie(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Ht.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const m=h.code===void 0?ee.UNKNOWN:SS(h.code);return new ce(m,h.message||"")}(o);n=new US(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zo(t,r.document.name),i=ir(r.document.updateTime),o=r.document.createTime?ir(r.document.createTime):Te.min(),l=new jn({mapValue:{fields:r.document.fields}}),u=Mt.newFoundDocument(s,i,o,l),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Wf(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zo(t,r.document),i=r.readTime?ir(r.readTime):Te.min(),o=Mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Wf([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zo(t,r.document),i=r.removedTargetIds||[];n=new Wf([],i,s,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new rM(s,i),l=r.targetId;n=new NS(l,o)}}return n}function Om(t,e){let n;if(e instanceof wc)n={update:hC(t,e.key,e.value)};else if(e instanceof Og)n={delete:Mm(t,e.key)};else if(e instanceof qi)n={update:hC(t,e.key,e.data),updateMask:vM(e.fieldMask)};else{if(!(e instanceof kS))return be();n={verify:Mm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xd)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:be()}(t,e.precondition)),n}function lw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Dn.updateTime(ir(i.updateTime)):i.exists!==void 0?Dn.exists(i.exists):Dn.none()}(e.currentDocument):Dn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,l){let u=null;if("setToServerValue"in l)Ie(l.setToServerValue==="REQUEST_TIME"),u=new tc;else if("appendMissingElements"in l){const m=l.appendMissingElements.values||[];u=new uA(m)}else if("removeAllFromArray"in l){const m=l.removeAllFromArray.values||[];u=new dA(m)}else"increment"in l?u=new xd(o,l.increment):be();const h=kt.fromServerFormat(l.fieldPath);return new Dg(h,u)}(t,s)):[];if(e.update){e.update.name;const s=Zo(t,e.update.name),i=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const h=u.fieldPaths||[];return new wr(h.map(m=>kt.fromServerFormat(m)))}(e.updateMask);return new qi(s,i,o,n,r)}return new wc(s,i,n,r)}if(e.delete){const s=Zo(t,e.delete);return new Og(s,n)}if(e.verify){const s=Zo(t,e.verify);return new kS(s,n)}return be()}function mM(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?ir(s.updateTime):ir(i);return o.isEqual(Te.min())&&(o=ir(i)),new eM(o,s.transformResults||[])}(n,e))):[]}function jS(t,e){return{documents:[PS(t,e.path)]}}function DS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PS(t,s);const i=function(h){if(h.length!==0)return HS(At.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(w){return{field:cl(w.field),direction:pM(w.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=aw(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function MS(t){let e=RS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const w=OS(p);return w instanceof At&&ux(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(w=>function(b){return new vd(ul(b.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(w))}(n.orderBy));let l=null;n.limit&&(l=function(p){let w;return w=typeof p=="object"?p.value:p,Pg(w)?null:w}(n.limit));let u=null;n.startAt&&(u=function(p){const w=!!p.before,C=p.values||[];return new Yl(C,w)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const w=!p.before,C=p.values||[];return new Yl(C,w)}(n.endAt)),fS(e,s,o,i,l,"F",u,h)}function gM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ul(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ul(n.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ul(n.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ul(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return $e.create(ul(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return At.create(n.compositeFilter.filters.map(r=>OS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function pM(t){return AM[t]}function yM(t){return lM[t]}function wM(t){return cM[t]}function cl(t){return{fieldPath:t.canonicalString()}}function ul(t){return kt.fromServerFormat(t.fieldPath)}function HS(t){return t instanceof $e?function(n){if(n.op==="=="){if(Zb(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if($b(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zb(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if($b(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:yM(n.op),value:n.value}}}(t):t instanceof At?function(n){const r=n.getFilters().map(s=>HS(s));return r.length===1?r[0]:{compositeFilter:{op:wM(n.op),filters:r}}}(t):be()}function vM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,r,s,i=Te.min(),o=Te.min(),l=Ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.ct=e}}function xM(t,e){let n;if(e.document)n=hM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ge.fromSegments(e.noDocument.path),s=fA(e.noDocument.readTime);n=Mt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return be();{const r=ge.fromSegments(e.unknownDocument.path),s=fA(e.unknownDocument.version);n=Mt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Ve(s[0],s[1]);return Te.fromTimestamp(i)}(e.readTime)),n}function fC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Mm(i,o.key),fields:o.data.value.mapValue.fields,updateTime:nc(i,o.version.toTimestamp()),createTime:nc(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hA(e.version)};else{if(!e.isUnknownDocument())return be();r.unknownDocument={path:n.path.toArray(),version:hA(e.version)}}return r}function Hm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hA(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fA(t){const e=new Ve(t.seconds,t.nanoseconds);return Te.fromTimestamp(e)}function Lo(t,e){const n=(e.baseMutations||[]).map(i=>lw(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const l=e.mutations[i+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>lw(t.ct,i)),s=Ve.fromMillis(e.localWriteTimeMs);return new fx(e.batchId,s,n,r)}function mu(t){const e=fA(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?fA(t.lastLimboFreeSnapshotVersion):Te.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return Ie(i.documents.length===1),Pr(Od(RS(i.documents[0])))}(t.query):function(i){return Pr(MS(i))}(t.query),new ki(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ht.fromBase64String(t.resumeToken))}function zS(t,e){const n=hA(e.snapshotVersion),r=hA(e.lastLimboFreeSnapshotVersion);let s;s=Lm(e.target)?jS(t.ct,e.target):DS(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cA(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function GS(t){const e=MS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dm(e,e.limit,"L"):e}function d0(t,e){return new gx(e.largestBatchId,lw(t.ct,e.overlayMutation))}function mC(t,e){const n=e.path.lastSegment();return[t,sr(e.path.popLast()),n]}function gC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:hA(r.readTime),documentKey:sr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{getBundleMetadata(e,n){return pC(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:fA(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return pC(e).put(function(s){return{bundleId:s.id,createTime:hA(ir(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return yC(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:GS(i.bundledQuery),readTime:fA(i.readTime)}}(r)})}saveNamedQuery(e,n){return yC(e).put(function(s){return{name:s.name,readTime:hA(ir(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function pC(t){return fn(t,"bundles")}function yC(t){return fn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Hg(e,r)}getOverlay(e,n){return qc(e).get(mC(this.userId,n)).next(r=>r?d0(this.serializer,r):null)}getOverlays(e,n){const r=Hs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const l=new gx(n,o);s.push(this.ht(e,l))}),$.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(sr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(qc(e).j("collectionPathOverlayIndex",l))}),$.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hs(),i=sr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return qc(e).U("collectionPathOverlayIndex",o).next(l=>{for(const u of l){const h=d0(this.serializer,u);s.set(h.getKey(),h)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hs();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return qc(e).J({index:"collectionGroupOverlayIndex",range:l},(u,h,m)=>{const p=d0(this.serializer,h);i.size()<s||p.largestBatchId===o?(i.set(p.getKey(),p),o=p.largestBatchId):m.done()}).next(()=>i)}ht(e,n){return qc(e).put(function(s,i,o){const[l,u,h]=mC(i,o.mutation.key);return{userId:i,collectionPath:u,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Om(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function qc(t){return fn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{Pt(e){return fn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Ht.fromUint8Array(r):Ht.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(It(e.integerValue));else if("doubleValue"in e){const r=It(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),md(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Hi(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(no(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?sS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Rg(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):be()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",l=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(It(l)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),ge.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}jo.vt=new jo;function bM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function wC(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=bM(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class CM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=wC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=wC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class EM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class IM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Wc{constructor(){this.jt=new CM,this.Ht=new EM(this.jt),this.Jt=new IM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Do(this.indexId,this.documentKey,this.arrayValue,r)}}function wa(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=vC(t.arrayValue,e.arrayValue),n!==0?n:(n=vC(t.directionalValue,e.directionalValue),n!==0?n:ge.comparator(t.documentKey,e.documentKey)))}function vC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.Xt=new ft((n,r)=>kt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ie(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Xy(e);if(n!==void 0&&!this.sn(n))return!1;const r=Qo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!s.has(l.field.canonicalString())){const u=r[i];if(!this.on(l,u)||!this._n(this.en[o++],u))return!1}++i}for(;i<r.length;++i){const l=r[i];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new ft(kt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Vf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Vf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Vf(r.field,r.dir==="asc"?0:1)));return new Rm(Rm.UNKNOWN_ID,this.collectionId,n,fd.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t){var e,n;if(Ie(t instanceof $e||t instanceof At),t instanceof $e){if(t instanceof hS){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>$e.create(t.field,"==",i)))||[];return At.create(s,"or")}return t}const r=t.filters.map(s=>qS(s));return At.create(r,t.op)}function TM(t){if(t.getFilters().length===0)return[];const e=dw(qS(t));return Ie(WS(e)),cw(e)||uw(e)?[e]:e.getFilters()}function cw(t){return t instanceof $e}function uw(t){return t instanceof At&&ux(t)}function WS(t){return cw(t)||uw(t)||function(n){if(n instanceof At&&nw(n)){for(const r of n.getFilters())if(!cw(r)&&!uw(r))return!1;return!0}return!1}(t)}function dw(t){if(Ie(t instanceof $e||t instanceof At),t instanceof $e)return t;if(t.filters.length===1)return dw(t.filters[0]);const e=t.filters.map(r=>dw(r));let n=At.create(e,t.op);return n=Vm(n),WS(n)?n:(Ie(n instanceof At),Ie(ec(n)),Ie(n.filters.length>1),n.filters.reduce((r,s)=>wx(r,s)))}function wx(t,e){let n;return Ie(t instanceof $e||t instanceof At),Ie(e instanceof $e||e instanceof At),n=t instanceof $e?e instanceof $e?function(s,i){return At.create([s,i],"and")}(t,e):_C(t,e):e instanceof $e?_C(e,t):function(s,i){if(Ie(s.filters.length>0&&i.filters.length>0),ec(s)&&ec(i))return cS(s,i.getFilters());const o=nw(s)?s:i,l=nw(s)?i:s,u=o.filters.map(h=>wx(h,l));return At.create(u,"or")}(t,e),Vm(n)}function _C(t,e){if(ec(e))return cS(e,t.getFilters());{const n=e.filters.map(r=>wx(t,r));return At.create(n,"or")}}function Vm(t){if(Ie(t instanceof $e||t instanceof At),t instanceof $e)return t;const e=t.getFilters();if(e.length===1)return Vm(e[0]);if(AS(t))return t;const n=e.map(s=>Vm(s)),r=[];return n.forEach(s=>{s instanceof $e?r.push(s):s instanceof At&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:At.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.un=new vx}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(jr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class vx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ft(st.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ft(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Uint8Array(0);class SM{constructor(e,n){this.databaseId=n,this.cn=new vx,this.ln=new go(r=>cA(r),(r,s)=>Md(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:sr(s)};return BC(e).put(i)}return $.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[zk(n),""],!1,!0);return BC(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Os(o.parent))}return r})}addFieldIndex(e,n){const r=$c(e),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=YA(e);return i.next(l=>{o.put(gC(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=$c(e),s=YA(e),i=XA(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$c(e),r=XA(e),s=YA(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return $.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new xC(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=XA(e);let s=!0;const i=new Map;return $.forEach(this.hn(n),o=>this.Pn(e,o).next(l=>{s&&(s=!!l),i.set(o,l)})).next(()=>{if(s){let o=je();const l=[];return $.forEach(i,(u,h)=>{re("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(u)} to execute ${cA(n)}`);const m=function(N,H){const V=Xy(H);if(V===void 0)return null;for(const M of jm(N,V.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(h,u),p=function(N,H){const V=new Map;for(const M of Qo(H))for(const I of jm(N,M.fieldPath))switch(I.op){case"==":case"in":V.set(M.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return V.set(M.fieldPath.canonicalString(),I.value),Array.from(V.values())}return null}(h,u),w=function(N,H){const V=[];let M=!0;for(const I of Qo(H)){const B=I.kind===0?tC(N,I.fieldPath,N.startAt):nC(N,I.fieldPath,N.startAt);V.push(B.value),M&&(M=B.inclusive)}return new Yl(V,M)}(h,u),C=function(N,H){const V=[];let M=!0;for(const I of Qo(H)){const B=I.kind===0?nC(N,I.fieldPath,N.endAt):tC(N,I.fieldPath,N.endAt);V.push(B.value),M&&(M=B.inclusive)}return new Yl(V,M)}(h,u),b=this.In(u,h,w),x=this.In(u,h,C),U=this.Tn(u,h,p),T=this.En(u.indexId,m,b,w.inclusive,x,C.inclusive,U);return $.forEach(T,E=>r.G(E,n.limit).next(N=>{N.forEach(H=>{const V=ge.fromSegments(H.documentKey);o.has(V)||(o=o.add(V),l.push(V))})}))}).next(()=>l)}return $.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=TM(At.create(e.filters,"and")).map(r=>sw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,i.length),h=u/(n!=null?n.length:1),m=[];for(let p=0;p<u;++p){const w=n?this.dn(n[p/h]):Vh,C=this.An(e,w,r[p%h],s),b=this.Rn(e,w,i[p%h],o),x=l.map(U=>this.An(e,w,U,!0));m.push(...this.createRange(C,b,x))}return m}An(e,n,r,s){const i=new Do(e,ge.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new Do(e,ge.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new xC(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const l of i)r.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return $.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(u){let h=new ft(kt.comparator),m=!1;for(const p of u.filters)for(const w of p.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?m=!0:h=h.add(w.field));for(const p of u.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Wc;for(const s of Qo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);jo.vt.It(i,o)}return r.zt()}dn(e){const n=new Wc;return jo.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Wc;return jo.vt.It(yd(this.databaseId,n),r.Yt(function(i){const o=Qo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Wc);let i=0;for(const o of Qo(e)){const l=r[i++];for(const u of s)if(this.fn(n,o.fieldPath)&&wd(l))s=this.gn(s,o,l);else{const h=u.Yt(o.kind);jo.vt.It(l,h)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const l of s){const u=new Wc;u.seed(l.zt()),jo.vt.It(o,u.Yt(n.kind)),i.push(u)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof $e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=$c(e),s=YA(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return $.forEach(i,l=>s.get([l.indexId,this.uid]).next(u=>{o.push(function(m,p){const w=p?new fd(p.sequenceNumber,new jr(fA(p.readTime),new ge(Os(p.documentKey)),p.largestBatchId)):fd.empty(),C=m.fields.map(([b,x])=>new Vf(kt.fromServerFormat(b),x));return new Rm(m.indexId,m.collectionGroup,C,w)}(l,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Re(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=$c(e),i=YA(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>$.forEach(l,u=>i.put(gC(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(r.set(s.collectionGroup,l),$.forEach(l,u=>this.wn(e,s,u).next(h=>{const m=this.Sn(i,u);return h.isEqual(m)?$.resolve():this.bn(e,i,u,h,m)}))))})}Dn(e,n,r,s){return XA(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return XA(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=XA(e);let i=new ft(wa);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,l)=>{i=i.add(new Do(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>i)}Sn(e,n){let r=new ft(wa);const s=this.Vn(n,e);if(s==null)return r;const i=Xy(n);if(i!=null){const o=e.data.field(i.fieldPath);if(wd(o))for(const l of o.arrayValue.values||[])r=r.add(new Do(n.indexId,e.key,this.dn(l),s))}else r=r.add(new Do(n.indexId,e.key,Vh,s));return r}bn(e,n,r,s,i){re("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,h,m,p,w){const C=u.getIterator(),b=h.getIterator();let x=JA(C),U=JA(b);for(;x||U;){let T=!1,E=!1;if(x&&U){const N=m(x,U);N<0?E=!0:N>0&&(T=!0)}else x!=null?E=!0:T=!0;T?(p(U),U=JA(b)):E?(w(x),x=JA(C)):(x=JA(C),U=JA(b))}}(s,i,wa,l=>{o.push(this.Dn(e,n,r,l))},l=>{o.push(this.vn(e,n,r,l))}),$.waitFor(o)}yn(e){let n=1;return YA(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>wa(o,l)).filter((o,l,u)=>!l||wa(o,u[l-1])!==0);const s=[];s.push(e);for(const o of r){const l=wa(o,e),u=wa(o,n);if(l===0)s[0]=e.Zt();else if(l>0&&u<0)s.push(o),s.push(o.Zt());else if(u>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const l=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Vh,[]],u=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Vh,[]];i.push(IDBKeyRange.bound(l,u))}return i}Cn(e,n){return wa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bC)}getMinOffset(e,n){return $.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||be())).next(bC)}}function BC(t){return fn(t,"collectionParents")}function XA(t){return fn(t,"indexEntries")}function $c(t){return fn(t,"indexConfiguration")}function YA(t){return fn(t,"indexState")}function bC(t){Ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;ax(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new jr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.J({range:o},(m,p,w)=>(l++,w.delete()));i.push(u.next(()=>{Ie(l===1)}));const h=[];for(const m of n.mutations){const p=Xk(e,m.key.path,n.batchId);i.push(s.delete(p)),h.push(m.key)}return $.waitFor(i).next(()=>h)}function Km(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw be();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(41943040,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);class Vg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){Ie(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Vg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return va(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=dl(e),o=va(e);return o.add({}).next(l=>{Ie(typeof l=="number");const u=new fx(l,n,r,s),h=function(C,b,x){const U=x.baseMutations.map(E=>Om(C.ct,E)),T=x.mutations.map(E=>Om(C.ct,E));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:U,mutations:T}}(this.serializer,this.userId,u),m=[];let p=new ft((w,C)=>Re(w.canonicalString(),C.canonicalString()));for(const w of s){const C=Xk(this.userId,w.key.path,l);p=p.add(w.key.path.popLast()),m.push(o.put(h)),m.push(i.put(C,fD))}return p.forEach(w=>{m.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Fn[l]=u.keys()}),$.waitFor(m).next(()=>u)})}lookupMutationBatch(e,n){return va(e).get(n).next(r=>r?(Ie(r.userId===this.userId),Lo(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?$.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return va(e).J({index:"userMutationsIndex",range:s},(o,l,u)=>{l.userId===this.userId&&(Ie(l.batchId>=r),i=Lo(this.serializer,l)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return va(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return va(e).U("userMutationsIndex",n).next(r=>r.map(s=>Lo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Kf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return dl(e).J({range:s},(o,l,u)=>{const[h,m,p]=o,w=Os(m);if(h===this.userId&&n.path.isEqual(w))return va(e).get(p).next(C=>{if(!C)throw be();Ie(C.userId===this.userId),i.push(Lo(this.serializer,C))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(Re);const s=[];return n.forEach(i=>{const o=Kf(this.userId,i.path),l=IDBKeyRange.lowerBound(o),u=dl(e).J({range:l},(h,m,p)=>{const[w,C,b]=h,x=Os(C);w===this.userId&&i.path.isEqual(x)?r=r.add(b):p.done()});s.push(u)}),$.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Kf(this.userId,r),o=IDBKeyRange.lowerBound(i);let l=new ft(Re);return dl(e).J({range:o},(u,h,m)=>{const[p,w,C]=u,b=Os(w);p===this.userId&&r.isPrefixOf(b)?b.length===s&&(l=l.add(C)):m.done()}).next(()=>this.xn(e,l))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(va(e).get(i).next(o=>{if(o===null)throw be();Ie(o.userId===this.userId),r.push(Lo(this.serializer,o))}))}),$.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return $S(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),$.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return dl(e).J({range:r},(i,o,l)=>{if(i[0]===this.userId){const u=Os(i[1]);s.push(u)}else l.done()}).next(()=>{Ie(s.length===0)})})}containsKey(e,n){return ZS(e,this.userId,n)}Nn(e){return JS(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ZS(t,e,n){const r=Kf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return dl(t).J({range:i,H:!0},(l,u,h)=>{const[m,p,w]=l;m===e&&p===s&&(o=!0),h.done()}).next(()=>o)}function va(t){return fn(t,"mutations")}function dl(t){return fn(t,"documentMutations")}function JS(t){return fn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new mA(0)}static kn(){return new mA(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new mA(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Te.fromTimestamp(new Ve(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>el(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Ie(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return el(e).J((o,l)=>{const u=mu(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>$.waitFor(i)).next(()=>s)}forEachTarget(e,n){return el(e).J((r,s)=>{const i=mu(s);n(i)})}qn(e){return EC(e).get("targetGlobalKey").next(n=>(Ie(n!==null),n))}Qn(e,n){return EC(e).put("targetGlobalKey",n)}Kn(e,n){return el(e).put(zS(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=cA(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return el(e).J({range:s,index:"queryTargetsIndex"},(o,l,u)=>{const h=mu(l);Md(n,h.target)&&(i=h,u.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Na(e);return n.forEach(o=>{const l=sr(o.path);s.push(i.put({targetId:r,path:l})),s.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(s)}removeMatchingKeys(e,n,r){const s=Na(e);return $.forEach(n,i=>{const o=sr(i.path);return $.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Na(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Na(e);let i=je();return s.J({range:r,H:!0},(o,l,u)=>{const h=Os(o[1]),m=new ge(h);i=i.add(m)}).next(()=>i)}containsKey(e,n){const r=sr(n.path),s=IDBKeyRange.bound([r],[zk(r)],!1,!0);let i=0;return Na(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,l],u,h)=>{o!==0&&(i++,h.done())}).next(()=>i>0)}ot(e,n){return el(e).get(n).next(r=>r?mu(r):null)}}function el(t){return fn(t,"targets")}function EC(t){return fn(t,"targetGlobal")}function Na(t){return fn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC([t,e],[n,r]){const s=Re(t,n);return s===0?Re(e,r):s}class UM{constructor(e){this.Un=e,this.buffer=new ft(IC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();IC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mo(n)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await fo(n)}await this.Hn(3e5)})}}class QM{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(yr.oe);const r=new UM(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(CC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,l,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Al()<=We.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function PM(t,e){return new QM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n){this.db=e,this.garbageCollector=PM(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return Kh(e,r)}removeReference(e,n,r){return Kh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Kh(e,n)}nr(e,n){return function(s,i){let o=!1;return JS(s).Y(l=>ZS(s,l,i).next(u=>(u&&(o=!0),$.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,l)=>{if(l<=n){const u=this.nr(e,o).next(h=>{if(!h)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Te.min()),Na(e).delete(function(p){return[0,sr(p.path)]}(o))))});s.push(u)}}).next(()=>$.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Kh(e,n)}tr(e,n){const r=Na(e);let s,i=yr.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:u,sequenceNumber:h})=>{o===0?(i!==yr.oe&&n(new ge(Os(s)),i),i=h,s=u):i=yr.oe}).next(()=>{i!==yr.oe&&n(new ge(Os(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kh(t,e){return Na(t).put(function(r,s){return{targetId:0,path:sr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ko(e).put(r)}removeEntry(e,n,r){return ko(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Hm(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Mt.newInvalidDocument(n);return ko(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zc(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Mt.newInvalidDocument(n)};return ko(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zc(n))},(s,i)=>{r={document:this.ir(n,i),size:Km(i)}}).next(()=>r)}getEntries(e,n){let r=Ur();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Ur(),s=new yt(ge.comparator);return this._r(e,n,(i,o)=>{const l=this.ir(i,o);r=r.insert(i,l),s=s.insert(i,Km(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return $.resolve();let s=new ft(SC);n.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(Zc(s.first()),Zc(s.last())),o=s.getIterator();let l=o.getNext();return ko(e).J({index:"documentKeyIndex",range:i},(u,h,m)=>{const p=ge.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&SC(l,p)<0;)r(l,null),l=o.getNext();l&&l.isEqual(p)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?m.$(Zc(l)):m.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),Hm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ko(e).U(IDBKeyRange.bound(l,u,!0)).next(h=>{i==null||i.incrementDocumentReadCount(h.length);let m=Ur();for(const p of h){const w=this.ir(ge.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);w.isFoundDocument()&&(Hd(n,w)||s.has(w.key))&&(m=m.insert(w.key,w))}return m})}getAllFromCollectionGroup(e,n,r,s){let i=Ur();const o=kC(n,r),l=kC(n,jr.max());return ko(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(u,h,m)=>{const p=this.ir(ge.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(p.key,p),i.size===s&&m.done()}).next(()=>i)}newChangeBuffer(e){return new jM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return TC(e).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}rr(e,n){return TC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=xM(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return Mt.newInvalidDocument(e)}}function YS(t){return new LM(t)}class jM extends XS{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new go(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ft((i,o)=>Re(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const l=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,l.readTime)),o.isValidDocument()){const u=fC(this.cr.serializer,o);s=s.add(i.path.popLast());const h=Km(u);r+=h-l.size,n.push(this.cr.addEntry(e,i,u))}else if(r-=l.size,this.trackRemovals){const u=fC(this.cr.serializer,o.convertToNoDocument(Te.min()));n.push(this.cr.addEntry(e,i,u))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function TC(t){return fn(t,"remoteDocumentGlobal")}function ko(t){return fn(t,"remoteDocumentsV14")}function Zc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kC(t,e){const n=e.documentKey.path.toArray();return[t,Hm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SC(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Re(n[i],r[i]),s)return s;return s=Re(n.length,r.length),s||(s=Re(n[n.length-2],r[r.length-2]),s||Re(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Lu(r.mutation,s,wr.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const s=Hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=hu();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Ur();const o=Ru(),l=function(){return Ru()}();return n.forEach((u,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof qi)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Lu(m.mutation,h,m.mutation.getFieldMask(),Ve.now())):o.set(h.key,wr.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var p;return l.set(h,new DM(m,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ru();let s=new yt((o,l)=>o-l),i=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||wr.empty();m=l.applyToLocalView(h,m),r.set(u,m);const p=(s.get(l.batchId)||je()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,m=u.value,p=xS();m.forEach(w=>{if(!i.has(w)){const C=IS(n.get(w),r.get(w));C!==null&&p.set(w,C),i=i.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(Hs());let l=-1,u=i;return o.next(h=>$.forEach(h,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{u=u.insert(m,w)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,je())).next(m=>({batchId:l,changes:vS(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let s=hu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=hu();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,u=>{const h=function(p,w){return new yc(w,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,w)=>{o=o.insert(p,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,Mt.newInvalidDocument(m)))});let l=hu();return o.forEach((u,h)=>{const m=i.get(u);m!==void 0&&Lu(m.mutation,h,wr.empty(),Ve.now()),Hd(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:GS(s.bundledQuery),readTime:ir(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.overlays=new yt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=Hs(),i=n.length+1,o=new ge(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new yt((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=Hs(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const l=Hs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>l.set(h,m)),!(l.size()>=s)););return $.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gx(n,r));let i=this.Ir.get(n);i===void 0&&(i=je(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Tr=new ft(wn.Er),this.dr=new ft(wn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new wn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new wn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ge(new st([])),r=new wn(n,e),s=new wn(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new st([])),r=new wn(n,e),s=new wn(n,e+1);let i=je();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new wn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(wn.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fx(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new wn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wn(n,0),s=new wn(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(Re);return n.forEach(s=>{const i=new wn(s,0),o=new wn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ge.isDocumentKey(i)||(i=i.child(""));const o=new wn(new ge(i),0);let l=new ft(Re);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),$.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const i=new wn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new wn(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.Mr=e,this.docs=function(){return new yt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let r=Ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Mt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ur();const o=n.path,l=new ge(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||ax(qk(m),r)<=0||(s.has(m.key)||Hd(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){be()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zM(this)}getSize(e){return $.resolve(this.size)}}class zM extends XS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.persistence=e,this.Nr=new go(n=>cA(n),Md),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xx,this.targetCount=0,this.kr=mA.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new mA(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new yr(0),this.Kr=!1,this.Kr=!0,this.$r=new HM,this.referenceDelegate=e(this),this.Ur=new GM(this),this.indexManager=new kM,this.remoteDocumentCache=function(s){return new KM(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new KS(n),this.Gr=new MM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new VM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new qM(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class qM extends $k{constructor(e){super(),this.currentSequenceNumber=e}}class Kg{constructor(e){this.persistence=e,this.Jr=new xx,this.Yr=null}static Zr(e){return new Kg(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=ge.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Qg("createOrUpgrade",n);r<1&&s>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kb,{unique:!0}),u.createObjectStore("documentMutations")}(e),NC(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=$.resolve();return r<3&&s>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),NC(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(u,h){return h.store("mutations").U().next(m=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kb,{unique:!0});const p=h.store("mutations"),w=m.map(C=>p.put(C));return $.waitFor(w)})}(e,i))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(u){const h=u.createObjectStore("documentOverlays",{keyPath:ED});h.createIndex("collectionPathOverlayIndex",ID,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",TD,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:mD});h.createIndex("documentKeyIndex",gD),h.createIndex("collectionGroupIndex",pD)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:_D}).createIndex("sequenceNumberIndex",BD,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:bD}).createIndex("documentKeyIndex",CD,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=Km(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>$.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>$.forEach(l,u=>{Ie(u.userId===i.userId);const h=Lo(this.serializer,u);return $S(e,i.userId,h).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,l)=>{const u=new st(o),h=function(p){return[0,sr(p)]}(u);i.push(n.get(h).next(m=>m?$.resolve():(p=>n.put({targetId:0,path:sr(p),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>$.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:xD});const r=n.store("collectionParents"),s=new vx,i=o=>{if(s.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:sr(u)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const u=new st(o);return i(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,u],h)=>{const m=Os(l);return i(m.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=mu(s),o=zS(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const l=n.store("remoteDocumentsV14"),u=function(p){return p.document?new ge(st.fromString(p.document.name).popFirst(5)):p.noDocument?ge.fromSegments(p.noDocument.path):p.unknownDocument?ge.fromSegments(p.unknownDocument.path):be()}(o).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(l.put(h))}).next(()=>$.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=YS(this.serializer),i=new tN(Kg.Zr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(u=>{var h;let m=(h=l.get(u.userId))!==null&&h!==void 0?h:je();Lo(this.serializer,u).keys().forEach(p=>m=m.add(p)),l.set(u.userId,m)}),$.forEach(l,(u,h)=>{const m=new Pn(h),p=Hg.lt(this.serializer,m),w=i.getIndexManager(m),C=Vg.lt(m,this.serializer,w,i.referenceDelegate);return new eN(s,C,p,w).recalculateAndSaveOverlaysForDocumentKeys(new Yy(n,yr.oe),u).next()})})}}function NC(t){t.createObjectStore("targetDocuments",{keyPath:wD}).createIndex("documentTargetsIndex",vD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yD,{unique:!0}),t.createObjectStore("targetGlobal")}const h0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _x{constructor(e,n,r,s,i,o,l,u,h,m,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=l,this.ci=h,this.li=m,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=w=>Promise.resolve(),!_x.D())throw new ce(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RM(this,s),this.Ai=n+"main",this.serializer=new KS(u),this.Ri=new Ja(this.Ai,this.hi,new WM(this.serializer)),this.$r=new BM,this.Ur=new NM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YS(this.serializer),this.Gr=new _M,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&Zt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(ee.FAILED_PRECONDITION,h0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new yr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(mo(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Jc(e).get("owner").next(n=>$.resolve(this.vi(n)))}Ci(e){return zh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=fn(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(l=>i.indexOf(l)===-1);return $.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):Jc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ce(ee.FAILED_PRECONDITION,h0);return!1}}return!(!this.networkEnabled||!this.inForeground)||zh(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(i||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&re("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Yy(e,yr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zh(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Vg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Hg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(u){return u===17?ND:u===16?SD:u===15?Ax:u===14?tS:u===13?eS:u===12?kD:u===11?Yk:void be()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,l=>(o=new Yy(l,this.Qr?this.Qr.next():yr.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ce(ee.FAILED_PRECONDITION,Wk);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return Jc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ce(ee.FAILED_PRECONDITION,h0)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jc(e).put("owner",n)}static D(){return Ja.D()}bi(e){const n=Jc(e);return n.get("owner").next(r=>this.vi(r)?(re("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Zt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;WT()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Zt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jc(t){return fn(t,"owner")}function zh(t){return fn(t,"clientMetadata")}function nN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=je(),s=je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Bx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WT()?8:Zk(hn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $M;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Al()<=We.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Al()<=We.DEBUG&&re("QueryEngine","Query:",ll(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Al()<=We.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(n))):$.resolve())}Yi(e,n){if(rC(n))return $.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dm(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=je(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Dm(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return rC(n)||s.isEqual(Te.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?$.resolve(null):(Al()<=We.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ll(n)),this.rs(e,o,n,Gk(s,-1)).next(l=>l))})}ts(e,n){let r=new ft(yS(e));return n.forEach((s,i)=>{Hd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Al()<=We.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",ll(n)),this.Ji.getDocumentsMatchingQuery(e,n,jr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new yt(Re),this._s=new go(i=>cA(i),Md),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function sN(t,e,n,r){return new ZM(t,e,n,r)}async function iN(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=je();for(const h of s){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of i){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function JM(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,m){const p=h.batch,w=p.keys();let C=$.resolve();return w.forEach(b=>{C=C.next(()=>m.getEntry(u,b)).next(x=>{const U=h.docVersions.get(b);Ie(U!==null),x.version.compareTo(U)<0&&(p.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),m.addEntry(x)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=je();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function aN(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function XM(t,e){const n=Ce(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((m,p)=>{const w=s.get(p);if(!w)return;l.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,p)));let C=w.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(Ht.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):m.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(m.resumeToken,r)),s=s.insert(p,C),function(x,U,T){return x.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(w,C,m)&&l.push(n.Ur.updateTargetData(i,C))});let u=Ur(),h=je();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(YM(i,o,e.documentUpdates).next(m=>{u=m.Ps,h=m.Is})),!r.isEqual(Te.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function YM(t,e,n){let r=je(),s=je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ur();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Te.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):re("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function eO(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zm(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ki(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function rc(t,e,n){const r=Ce(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!mo(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function hw(t,e,n){const r=Ce(t);let s=Te.min(),i=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,m){const p=Ce(u),w=p._s.get(m);return w!==void 0?$.resolve(p.os.get(w)):p.Ur.getTargetData(h,m)}(r,o,Pr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Te.min(),n?i:je())).next(l=>(lN(r,pS(e),l),{documents:l,Ts:i})))}function oN(t,e){const n=Ce(t),r=Ce(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function AN(t,e){const n=Ce(t),r=n.us.get(e)||Te.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,Gk(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(lN(n,e,s),s))}function lN(t,e,n){let r=t.us.get(e)||Te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}function UC(t,e){return`firestore_clients_${t}_${e}`}function FC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function f0(t,e){return`firestore_targets_${t}_${e}`}class Gm{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ce(s.error.code,s.error.message))),o?new Gm(e,n,s.state,i):(Zt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ce(r.error.code,r.error.message))),i?new ju(e,r.state,s):(Zt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=dx();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Jk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new qm(e,i):(Zt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class bx{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new bx(n.clientId,n.onlineState):(Zt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fw{constructor(){this.activeTargetIds=dx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class m0{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new yt(Re),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=UC(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new fw),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(UC(this.persistenceKey,r));if(s){const i=qm.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(f0(this.persistenceKey,e));if(s){const i=ju.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(f0(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return re("SharedClientState","READ",e,n),n}setItem(e,n){re("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(re("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Zt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=yr.oe;if(i!=null)try{const l=JSON.parse(i);Ie(typeof l=="number"),o=l}catch(l){Zt("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);r!==yr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new Gm(this.currentUser,e,n,r),i=FC(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=FC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=f0(this.persistenceKey,e),i=new ju(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return qm.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Gm.Rs(new Pn(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return ju.Rs(s,n)}Ls(e){return bx.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],l=[];return i.forEach(u=>{s.has(u)||o.push(u)}),s.forEach(u=>{i.has(u)||l.push(u)}),this.syncEngine.io(o,l).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=dx();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class cN{constructor(){this.so=new fw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function g0(){return Gh===null?Gh=function(){return 268435456+Math.round(2147483648*Math.random())}():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class sO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=g0(),u=this.xo(n,r.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(m=>(re("RestConnection",`Received RPC '${n}' ${l}: `,m),m),m=>{throw Zl("RestConnection",`RPC '${n}' ${l} failed with error: `,m,"url: ",u,"request:",s),m})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=nO[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=g0();return new Promise((o,l)=>{const u=new Dk;u.setWithCredentials(!0),u.listenOnce(Mk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hf.NO_ERROR:const m=u.getResponseJson();re(Fn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case Hf.TIMEOUT:re(Fn,`RPC '${e}' ${i} timed out`),l(new ce(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Hf.HTTP_ERROR:const p=u.getStatus();if(re(Fn,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const b=function(U){const T=U.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(T)>=0?T:ee.UNKNOWN}(C.status);l(new ce(b,C.message))}else l(new ce(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ce(ee.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{re(Fn,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);re(Fn,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=g0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Vk(),l=Hk(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");re(Fn,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);let w=!1,C=!1;const b=new rO({Io:U=>{C?re(Fn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(w||(re(Fn,`Opening RPC '${e}' stream ${s} transport.`),p.open(),w=!0),re(Fn,`RPC '${e}' stream ${s} sending:`,U),p.send(U))},To:()=>p.close()}),x=(U,T,E)=>{U.listen(T,N=>{try{E(N)}catch(H){setTimeout(()=>{throw H},0)}})};return x(p,du.EventType.OPEN,()=>{C||(re(Fn,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),x(p,du.EventType.CLOSE,()=>{C||(C=!0,re(Fn,`RPC '${e}' stream ${s} transport closed`),b.So())}),x(p,du.EventType.ERROR,U=>{C||(C=!0,Zl(Fn,`RPC '${e}' stream ${s} transport errored:`,U),b.So(new ce(ee.UNAVAILABLE,"The operation could not be completed")))}),x(p,du.EventType.MESSAGE,U=>{var T;if(!C){const E=U.data[0];Ie(!!E);const N=E,H=N.error||((T=N[0])===null||T===void 0?void 0:T.error);if(H){re(Fn,`RPC '${e}' stream ${s} received error:`,H);const V=H.status;let M=function(S){const P=en[S];if(P!==void 0)return SS(P)}(V),I=H.message;M===void 0&&(M=ee.INTERNAL,I="Unknown error status: "+V+" with message "+H.message),C=!0,b.So(new ce(M,I)),p.close()}else re(Fn,`RPC '${e}' stream ${s} received:`,E),b.bo(E)}}),x(l,Ok.STAT_EVENT,U=>{U.stat===Jy.PROXY?re(Fn,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Jy.NOPROXY&&re(Fn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){return typeof window<"u"?window:null}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){return new uM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Zt(n.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ce(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iO extends hN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fM(this.serializer,e),r=function(i){if(!("targetChange"in i))return Te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?ir(o.readTime):Te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Aw(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Lm(u)?{documents:jS(i,u)}:{query:DS(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=FS(i,o.resumeToken);const h=aw(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Te.min())>0){l.readTime=nc(i,o.snapshotVersion.toTimestamp());const h=aw(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=gM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Aw(this.serializer),n.removeTarget=e,this.a_(n)}}class aO extends hN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mM(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Aw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Om(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,ow(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ce(ee.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,ow(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(ee.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class AO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zt(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{TA(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Ce(u);h.L_.add(4),await zd(h),h.q_.set("Unknown"),h.L_.delete(4),await Gg(h)}(this))})}),this.q_=new AO(r,s)}}async function Gg(t){if(TA(t))for(const e of t.B_)await e(!0)}async function zd(t){for(const e of t.B_)await e(!1)}function qg(t,e){const n=Ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ix(n)?Ex(n):xc(n).r_()&&Cx(n,e))}function sc(t,e){const n=Ce(t),r=xc(n);n.N_.delete(e),r.r_()&&fN(n,e),n.N_.size===0&&(r.r_()?r.o_():TA(n)&&n.q_.set("Unknown"))}function Cx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xc(t).A_(e)}function fN(t,e){t.Q_.xe(e),xc(t).R_(e)}function Ex(t){t.Q_=new oM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xc(t).start(),t.q_.v_()}function Ix(t){return TA(t)&&!xc(t).n_()&&t.N_.size>0}function TA(t){return Ce(t).L_.size===0}function mN(t){t.Q_=void 0}async function cO(t){t.q_.set("Online")}async function uO(t){t.N_.forEach((e,n)=>{Cx(t,e)})}async function dO(t,e){mN(t),Ix(t)?(t.q_.M_(e),Ex(t)):t.q_.set("Unknown")}async function hO(t,e,n){if(t.q_.set("Online"),e instanceof US&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wm(t,r)}else if(e instanceof Wf?t.Q_.Ke(e):e instanceof NS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Te.min()))try{const r=await aN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.N_.get(h);m&&i.N_.set(h,m.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const m=i.N_.get(u);if(!m)return;i.N_.set(u,m.withResumeToken(Ht.EMPTY_BYTE_STRING,m.snapshotVersion)),fN(i,u);const p=new ki(m.target,u,h,m.sequenceNumber);Cx(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){re("RemoteStore","Failed to raise snapshot:",r),await Wm(t,r)}}async function Wm(t,e,n){if(!mo(e))throw e;t.L_.add(1),await zd(t),t.q_.set("Offline"),n||(n=()=>aN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Gg(t)})}function gN(t,e){return e().catch(n=>Wm(t,n,e))}async function vc(t){const e=Ce(t),n=io(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fO(e);)try{const s=await eO(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,mO(e,s)}catch(s){await Wm(e,s)}pN(e)&&yN(e)}function fO(t){return TA(t)&&t.O_.length<10}function mO(t,e){t.O_.push(e);const n=io(t);n.r_()&&n.V_&&n.m_(e.mutations)}function pN(t){return TA(t)&&!io(t).n_()&&t.O_.length>0}function yN(t){io(t).start()}async function gO(t){io(t).p_()}async function pO(t){const e=io(t);for(const n of t.O_)e.m_(n.mutations)}async function yO(t,e,n){const r=t.O_.shift(),s=mx.from(r,e,n);await gN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vc(t)}async function wO(t,e){e&&io(t).V_&&await async function(r,s){if(function(o){return sM(o)&&o!==ee.ABORTED}(s.code)){const i=r.O_.shift();io(r).s_(),await gN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await vc(r)}}(t,e),pN(t)&&yN(t)}async function PC(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=TA(n);n.L_.add(3),await zd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Gg(n)}async function mw(t,e){const n=Ce(t);e?(n.L_.delete(2),await Gg(n)):e||(n.L_.add(2),await zd(n),n.q_.set("Unknown"))}function xc(t){return t.K_||(t.K_=function(n,r,s){const i=Ce(n);return i.w_(),new iO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:cO.bind(null,t),Ro:uO.bind(null,t),mo:dO.bind(null,t),d_:hO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ix(t)?Ex(t):t.q_.set("Unknown")):(await t.K_.stop(),mN(t))})),t.K_}function io(t){return t.U_||(t.U_=function(n,r,s){const i=Ce(n);return i.w_(),new aO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gO.bind(null,t),mo:wO.bind(null,t),f_:pO.bind(null,t),g_:yO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vc(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Tx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kx(t,e){if(Zt("AsyncQueue",`${e}: ${t}`),mo(t))return new ce(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=hu(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new jl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.W_=new yt(ge.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ic{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ic(e,n,jl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class xO{constructor(){this.queries=LC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ce(n),i=s.queries;s.queries=LC(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new ce(ee.ABORTED,"Firestore shutting down"))}}function LC(){return new go(t=>gS(t),Lg)}async function Sx(t,e){const n=Ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new vO,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=kx(o,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ux(n)}async function Nx(t,e){const n=Ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _O(t,e){const n=Ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Ux(n)}function BO(t,e,n){const r=Ce(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ux(t){t.Y_.forEach(e=>{e.next()})}var gw,jC;(jC=gw||(gw={})).ea="default",jC.Cache="cache";class Fx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.key=e}}class vN{constructor(e){this.key=e}}class bO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=je(),this.mutatedKeys=je(),this.Aa=yS(e),this.Ra=new jl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new RC,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const w=s.get(m),C=Hd(this.query,p)?p:null,b=!!w&&this.mutatedKeys.has(w.key),x=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;w&&C?w.data.isEqual(C.data)?b!==x&&(r.track({type:3,doc:C}),U=!0):this.ga(w,C)||(r.track({type:2,doc:C}),U=!0,(u&&this.Aa(C,u)>0||h&&this.Aa(C,h)<0)&&(l=!0)):!w&&C?(r.track({type:0,doc:C}),U=!0):w&&!C&&(r.track({type:1,doc:w}),U=!0,(u||h)&&(l=!0)),U&&(C?(o=o.add(C),i=x?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,p)=>function(C,b){const x=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return x(C)-x(b)}(m.type,p.type)||this.Aa(m.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new ic(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new RC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new vN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wN(r))}),n}ba(e){this.Ta=e.Ts,this.da=je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ic.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class EO{constructor(e){this.key=e,this.va=!1}}class IO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new go(l=>gS(l),Lg),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(ge.comparator),this.Na=new Map,this.La=new xx,this.Ba={},this.ka=new Map,this.qa=mA.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TO(t,e,n=!0){const r=Wg(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await xN(r,e,n,!0),s}async function kO(t,e){const n=Wg(t);await xN(n,e,!0,!1)}async function xN(t,e,n,r){const s=await zm(t.localStore,Pr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Qx(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&qg(t.remoteStore,s),l}async function Qx(t,e,n,r,s){t.Ka=(p,w,C)=>async function(x,U,T,E){let N=U.view.ma(T);N.ns&&(N=await hw(x.localStore,U.query,!1).then(({documents:I})=>U.view.ma(I,N)));const H=E&&E.targetChanges.get(U.targetId),V=E&&E.targetMismatches.get(U.targetId)!=null,M=U.view.applyChanges(N,x.isPrimaryClient,H,V);return pw(x,U.targetId,M.wa),M.snapshot}(t,p,w,C);const i=await hw(t.localStore,e,!0),o=new bO(e,i.Ts),l=o.ma(i.documents),u=Kd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);pw(t,n,h.wa);const m=new CO(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function SO(t,e,n){const r=Ce(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Lg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sc(r.remoteStore,s.targetId),ac(r,s.targetId)}).catch(fo)):(ac(r,s.targetId),await rc(r.localStore,s.targetId,!0))}async function NO(t,e){const n=Ce(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sc(n.remoteStore,r.targetId))}async function UO(t,e,n){const r=jx(t);try{const s=await function(o,l){const u=Ce(o),h=Ve.now(),m=l.reduce((C,b)=>C.add(b.key),je());let p,w;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=Ur(),x=je();return u.cs.getEntries(C,m).next(U=>{b=U,b.forEach((T,E)=>{E.isValidDocument()||(x=x.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,b)).next(U=>{p=U;const T=[];for(const E of l){const N=nM(E,p.get(E.key).overlayedDocument);N!=null&&T.push(new qi(E.key,N,aS(N.value.mapValue),Dn.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,T,l)}).next(U=>{w=U;const T=U.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(C,U.batchId,T)})}).then(()=>({batchId:w.batchId,changes:vS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new yt(Re)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await po(r,s.changes),await vc(r.remoteStore)}catch(s){const i=kx(s,"Failed to persist write");n.reject(i)}}async function _N(t,e){const n=Ce(t);try{const r=await XM(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ie(o.va):s.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await po(n,r,e)}catch(r){await fo(r)}}function DC(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Ce(o);u.onlineState=l;let h=!1;u.queries.forEach((m,p)=>{for(const w of p.j_)w.Z_(l)&&(h=!0)}),h&&Ux(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FO(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new yt(ge.comparator);o=o.insert(i,Mt.newNoDocument(i,Te.min()));const l=je().add(i),u=new Vd(Te.min(),new Map,new yt(Re),o,l);await _N(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Lx(r)}else await rc(r.localStore,e,!1).then(()=>ac(r,e,n)).catch(fo)}async function QO(t,e){const n=Ce(t),r=e.batch.batchId;try{const s=await JM(n.localStore,e);Rx(n,r,null),Px(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await po(n,s)}catch(s){await fo(s)}}async function PO(t,e,n){const r=Ce(t);try{const s=await function(o,l){const u=Ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(Ie(p!==null),m=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);Rx(r,e,n),Px(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await po(r,s)}catch(s){await fo(s)}}function Px(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Rx(t,e,n){const r=Ce(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function ac(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||BN(t,r)})}function BN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lx(t))}function pw(t,e,n){for(const r of n)r instanceof wN?(t.La.addReference(r.key,e),RO(t,r)):r instanceof vN?(re("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||BN(t,r.key)):be()}function RO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(r),Lx(t))}function Lx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(st.fromString(e)),r=t.qa.next();t.Na.set(r,new EO(n)),t.Oa=t.Oa.insert(n,r),qg(t.remoteStore,new ki(Pr(Od(n.path)),r,"TargetPurposeLimboResolution",yr.oe))}}async function po(t,e,n){const r=Ce(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Bx.Wi(u.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const m=Ce(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(h,w=>$.forEach(w.$i,C=>m.persistence.referenceDelegate.addReference(p,w.targetId,C)).next(()=>$.forEach(w.Ui,C=>m.persistence.referenceDelegate.removeReference(p,w.targetId,C)))))}catch(p){if(!mo(p))throw p;re("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const w=p.targetId;if(!p.fromCache){const C=m.os.get(w),b=C.snapshotVersion,x=C.withLastLimboFreeSnapshotVersion(b);m.os=m.os.insert(w,x)}}}(r.localStore,i))}async function LO(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=await iN(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new ce(ee.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await po(n,r.hs)}}function jO(t,e){const n=Ce(t),r=n.Na.get(e);if(r&&r.va)return je().add(r.key);{let s=je();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}async function DO(t,e){const n=Ce(t),r=await hw(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&pw(n,e.targetId,s.wa),s}async function MO(t,e){const n=Ce(t);return AN(n.localStore,e).then(r=>po(n,r))}async function OO(t,e,n,r){const s=Ce(t),i=await function(l,u){const h=Ce(l),m=Ce(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",p=>m.Mn(p,u).next(w=>w?h.localDocuments.getDocuments(p,w):$.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await vc(s.remoteStore):n==="acknowledged"||n==="rejected"?(Rx(s,e,r||null),Px(s,e),function(l,u){Ce(Ce(l).mutationQueue).On(u)}(s.localStore,e)):be(),await po(s,i)):re("SyncEngine","Cannot apply mutation batch with id: "+e)}async function HO(t,e){const n=Ce(t);if(Wg(n),jx(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await MC(n,r.toArray());n.Qa=!0,await mw(n.remoteStore,!0);for(const i of s)qg(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(ac(n,o),rc(n.localStore,o,!0))),sc(n.remoteStore,o)}),await s,await MC(n,r),function(o){const l=Ce(o);l.Na.forEach((u,h)=>{sc(l.remoteStore,h)}),l.La.pr(),l.Na=new Map,l.Oa=new yt(ge.comparator)}(n),n.Qa=!1,await mw(n.remoteStore,!1)}}async function MC(t,e,n){const r=Ce(t),s=[],i=[];for(const o of e){let l;const u=r.Ma.get(o);if(u&&u.length!==0){l=await zm(r.localStore,Pr(u[0]));for(const h of u){const m=r.Fa.get(h),p=await DO(r,m);p.snapshot&&i.push(p.snapshot)}}else{const h=await oN(r.localStore,o);l=await zm(r.localStore,h),await Qx(r,bN(h),o,!1,l.resumeToken)}s.push(l)}return r.Ca.d_(i),s}function bN(t){return fS(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function VO(t){return function(n){return Ce(Ce(n).persistence).Qi()}(Ce(t).localStore)}async function KO(t,e,n,r){const s=Ce(t);if(s.Qa)return void re("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await AN(s.localStore,pS(i[0])),l=Vd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ht.EMPTY_BYTE_STRING);await po(s,o,l);break}case"rejected":await rc(s.localStore,e,!0),ac(s,e,r);break;default:be()}}async function zO(t,e,n){const r=Wg(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){re("SyncEngine","Adding an already active target "+s);continue}const i=await oN(r.localStore,s),o=await zm(r.localStore,i);await Qx(r,bN(i),o.targetId,!1,o.resumeToken),qg(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await rc(r.localStore,s,!1).then(()=>{sc(r.remoteStore,s),ac(r,s)}).catch(fo)}}function Wg(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_N.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FO.bind(null,e),e.Ca.d_=_O.bind(null,e.eventManager),e.Ca.$a=BO.bind(null,e.eventManager),e}function jx(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PO.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return sN(this.persistence,new rN,e.initialUser,this.serializer)}Ga(e){return new tN(Kg.Zr,this.serializer)}Wa(e){return new cN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class CN extends _d{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await jx(this.Ja.syncEngine),await vc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return sN(this.persistence,new rN,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new FM(r,e.asyncQueue,n)}Ha(e,n){const r=new dD(n,this.persistence);return new uD(e.asyncQueue,r)}Ga(e){const n=nN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new _x(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,uN(),$f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new cN}}class GO extends CN{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof m0&&(this.sharedClientState.syncEngine={no:OO.bind(null,n),ro:KO.bind(null,n),io:zO.bind(null,n),Qi:VO.bind(null,n),eo:MO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await HO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=uN();if(!m0.D(n))throw new ce(ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new m0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LO.bind(null,this.syncEngine),await mw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xO}()}createDatastore(e){const n=zg(e.databaseInfo.databaseId),r=function(i){return new sO(i)}(e.databaseInfo);return function(i,o,l,u){return new oO(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new lO(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>DC(this.syncEngine,n,0),function(){return QC.D()?new QC:new tO}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,m){const p=new IO(s,i,o,l,u,h);return m&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ce(s);re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await zd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Pn.UNAUTHENTICATED,this.clientId=ix.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function p0(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function OC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WO(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>PC(e.remoteStore,s)),t._onlineComponents=e}async function WO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await p0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zl("Error using user provided cache. Falling back to memory cache: "+n),await p0(t,new _d)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await p0(t,new _d);return t._offlineComponents}async function EN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await OC(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await OC(t,new Bd))),t._onlineComponents}function $O(t){return EN(t).then(e=>e.syncEngine)}async function $m(t){const e=await EN(t),n=e.eventManager;return n.onListen=TO.bind(null,e.syncEngine),n.onUnlisten=SO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NO.bind(null,e.syncEngine),n}function ZO(t,e,n={}){const r=new $s;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const m=new Dx({next:w=>{m.Za(),o.enqueueAndForget(()=>Nx(i,p));const C=w.docs.has(l);!C&&w.fromCache?h.reject(new ce(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&u&&u.source==="server"?h.reject(new ce(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),p=new Fx(Od(l.path),m,{includeMetadataChanges:!0,_a:!0});return Sx(i,p)}(await $m(t),t.asyncQueue,e,n,r)),r.promise}function JO(t,e,n={}){const r=new $s;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const m=new Dx({next:w=>{m.Za(),o.enqueueAndForget(()=>Nx(i,p)),w.fromCache&&u.source==="server"?h.reject(new ce(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),p=new Fx(l,m,{includeMetadataChanges:!0,_a:!0});return Sx(i,p)}(await $m(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t,e,n){if(!n)throw new ce(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kN(t,e,n,r){if(e===!0&&r===!0)throw new ce(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VC(t){if(!ge.isDocumentKey(t))throw new ce(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KC(t){if(ge.isDocumentKey(t))throw new ce(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function Br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$g(t);throw new ce(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mx{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kk;switch(r.type){case"firstParty":return new sD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=HC.get(n);r&&(re("ComponentProvider","Removing Datastore"),HC.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class In{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class Qi extends ei{constructor(e,n,r){super(e,n,Od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new ge(e))}withConverter(e){return new Qi(this.firestore,e,this._path)}}function un(t,e,...n){if(t=nt(t),TN("collection","path",e),t instanceof Mx){const r=st.fromString(e,...n);return KC(r),new Qi(t,null,r)}{if(!(t instanceof In||t instanceof Qi))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return KC(r),new Qi(t.firestore,null,r)}}function ze(t,e,...n){if(t=nt(t),arguments.length===1&&(e=ix.newId()),TN("doc","path",e),t instanceof Mx){const r=st.fromString(e,...n);return VC(r),new In(t,null,new ge(r))}{if(!(t instanceof In||t instanceof Qi))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return VC(r),new In(t.firestore,t instanceof Qi?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dN(this,"async_queue_retry"),this.Vu=()=>{const r=$f();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$f();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new $s;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!mo(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Zt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Tx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function qC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Js extends Mx{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new GC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GC(e),this._firestoreClient=void 0,await e}}}function SN(t,e,n){const r=ho(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(iA(i,e))return s;throw new ce(ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Gd(t){if(t._terminated)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XO(t),t._firestoreClient}function XO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,m){return new FD(l,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,IN(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new qO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gA(Ht.fromBase64String(e))}catch(n){throw new ce(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gA(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=/^__.*__$/;class eH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new wc(e,this.data,n,this.fieldTransforms)}}class NN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Xg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UN(this.Cu)&&YO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zg(e)}Qu(e,n,r,s=!1){return new Xg({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yg(t){const e=t._freezeSettings(),n=zg(t._databaseId);return new tH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FN(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Kx("Data must be an object, but it was:",o,r);const l=PN(r,o);let u,h;if(i.merge)u=new wr(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const w=yw(e,p,n);if(!o.contains(w))throw new ce(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);LN(m,w)||m.push(w)}u=new wr(m),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new eH(new jn(l),u,h)}class ep extends kA{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ep}}function QN(t,e,n){return new Xg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ox extends kA{_toFieldTransform(e){return new Dg(e.path,new tc)}isEqual(e){return e instanceof Ox}}class Hx extends kA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=QN(this,e,!0),r=this.Ku.map(i=>SA(i,n)),s=new uA(r);return new Dg(e.path,s)}isEqual(e){return e instanceof Hx&&iA(this.Ku,e.Ku)}}class Vx extends kA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=QN(this,e,!0),r=this.Ku.map(i=>SA(i,n)),s=new dA(r);return new Dg(e.path,s)}isEqual(e){return e instanceof Vx&&iA(this.Ku,e.Ku)}}function nH(t,e,n,r){const s=t.Qu(1,e,n);Kx("Data must be an object, but it was:",s,r);const i=[],o=jn.empty();IA(r,(u,h)=>{const m=zx(e,u,n);h=nt(h);const p=s.Nu(m);if(h instanceof ep)i.push(m);else{const w=SA(h,p);w!=null&&(i.push(m),o.set(m,w))}});const l=new wr(i);return new NN(o,l,s.fieldTransforms)}function rH(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[yw(e,r,n)],u=[s];if(i.length%2!=0)throw new ce(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<i.length;w+=2)l.push(yw(e,i[w])),u.push(i[w+1]);const h=[],m=jn.empty();for(let w=l.length-1;w>=0;--w)if(!LN(h,l[w])){const C=l[w];let b=u[w];b=nt(b);const x=o.Nu(C);if(b instanceof ep)h.push(C);else{const U=SA(b,x);U!=null&&(h.push(C),m.set(C,U))}}const p=new wr(h);return new NN(m,p,o.fieldTransforms)}function sH(t,e,n,r=!1){return SA(n,t.Qu(r?4:3,e))}function SA(t,e){if(RN(t=nt(t)))return Kx("Unsupported field value:",e,t),PN(t,e);if(t instanceof kA)return function(r,s){if(!UN(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=SA(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ve.fromDate(r);return{timestampValue:nc(s.serializer,i)}}if(r instanceof Ve){const i=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nc(s.serializer,i)}}if(r instanceof Zg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gA)return{bytesValue:FS(s.serializer,r._byteString)};if(r instanceof In){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Jg)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return hx(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${$g(r)}`)}(t,e)}function PN(t,e){const n={};return nS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):IA(t,(r,s)=>{const i=SA(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function RN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Zg||t instanceof gA||t instanceof In||t instanceof kA||t instanceof Jg)}function Kx(t,e,n){if(!RN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=$g(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function yw(t,e,n){if((e=nt(e))instanceof qd)return e._internalPath;if(typeof e=="string")return zx(t,e);throw Zm("Field path arguments must be of type string or ",t,!1,void 0,n)}const iH=new RegExp("[~\\*/\\[\\]]");function zx(t,e,n){if(e.search(iH)>=0)throw Zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qd(...e.split("."))._internalPath}catch{throw Zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ce(ee.INVALID_ARGUMENT,l+t+u)}function LN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aH extends jN{data(){return super.data()}}function tp(t,e){return typeof e=="string"?zx(t,e):e instanceof qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gx{}class np extends Gx{}function _c(t,e,...n){let r=[];e instanceof Gx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof sp).length,l=i.filter(u=>u instanceof Wd).length;if(o>1||o>0&&l>0)throw new ce(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wd extends np{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wd(e,n,r)}_apply(e){const n=this._parse(e);return ON(e._query,n),new ei(e.firestore,e.converter,iw(e._query,n))}_parse(e){const n=Yg(e.firestore);return function(i,o,l,u,h,m,p){let w;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){$C(p,m);const C=[];for(const b of p)C.push(WC(u,i,b));w={arrayValue:{values:C}}}else w=WC(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||$C(p,m),w=sH(l,o,p,m==="in"||m==="not-in");return $e.create(h,m,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rp(t,e,n){const r=e,s=tp("where",t);return Wd._create(s,r,n)}class sp extends Gx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:At.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)ON(o,u),o=iw(o,u)}(e._query,n),new ei(e.firestore,e.converter,iw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ip extends np{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ip(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vd(i,o)}(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new yc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qx(t,e="asc"){const n=e,r=tp("orderBy",t);return ip._create(r,n)}class ap extends np{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ap(e,n,r)}_apply(e){return new ei(e.firestore,e.converter,Dm(e._query,this._limit,this._limitType))}}function MN(t){return ap._create("limit",t,"F")}function WC(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new ce(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mS(e)&&n.indexOf("/")!==-1)throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!ge.isDocumentKey(r))throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yd(t,new ge(r))}if(n instanceof In)return yd(t,n._key);throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$g(n)}.`)}function $C(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ON(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HN{convertValue(e,n="none"){switch(lA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return IA(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>It(o.doubleValue));return new Jg(i)}convertGeoPoint(e){return new Zg(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gd(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Ie(VS(r));const s=new ro(r.get(1),r.get(3)),i=new ge(r.popFirst(5));return s.isEqual(n)||Zt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wx extends jN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Du extends Wx{data(e={}){return super.data(e)}}class $x{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Il(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Du(this._firestore,this._userDataWriter,r.key,r,new Il(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Du(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Il(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Du(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Il(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:oH(l.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){t=Br(t,In);const e=Br(t.firestore,Js);return ZO(Gd(e),t._key).then(n=>KN(e,t,n))}class Zx extends HN{constructor(e){super(),this.firestore=e}convertBytes(e){return new gA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}}function Ua(t){t=Br(t,ei);const e=Br(t.firestore,Js),n=Gd(e),r=new Zx(e);return DN(t._query),JO(n,t._query).then(s=>new $x(e,r,t,s))}function nr(t,e,n){t=Br(t,In);const r=Br(t.firestore,Js),s=VN(t.converter,e,n);return Zd(r,[FN(Yg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dn.none())])}function pA(t,e,n,...r){t=Br(t,In);const s=Br(t.firestore,Js),i=Yg(s);let o;return o=typeof(e=nt(e))=="string"||e instanceof qd?rH(i,"updateDoc",t._key,e,n,r):nH(i,"updateDoc",t._key,e),Zd(s,[o.toMutation(t._key,Dn.exists(!0))])}function $d(t){return Zd(Br(t.firestore,Js),[new Og(t._key,Dn.none())])}function oc(t,e){const n=Br(t.firestore,Js),r=ze(t),s=VN(t.converter,e);return Zd(n,[FN(Yg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then(()=>r)}function Vs(t,...e){var n,r,s;t=nt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||qC(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(qC(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,h,m;if(t instanceof In)h=Br(t.firestore,Js),m=Od(t._key.path),u={next:p=>{e[o]&&e[o](KN(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Br(t,ei);h=Br(p.firestore,Js),m=p._query;const w=new Zx(h);u={next:C=>{e[o]&&e[o](new $x(h,w,p,C))},error:e[o+1],complete:e[o+2]},DN(t._query)}return function(w,C,b,x){const U=new Dx(x),T=new Fx(C,U,b);return w.asyncQueue.enqueueAndForget(async()=>Sx(await $m(w),T)),()=>{U.Za(),w.asyncQueue.enqueueAndForget(async()=>Nx(await $m(w),T))}}(Gd(h),m,l,u)}function Zd(t,e){return function(r,s){const i=new $s;return r.asyncQueue.enqueueAndForget(async()=>UO(await $O(r),s,i)),i.promise}(Gd(t),e)}function KN(t,e,n){const r=n.docs.get(e._key),s=new Zx(t);return new Wx(t,s,e._key,r,new Il(n.hasPendingWrites,n.fromCache),e.converter)}class AH{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=GN(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function zN(t){return new AH(t)}class lH{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bd.provider,this._offlineComponentProvider={build:n=>new CN(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class cH{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bd.provider,this._offlineComponentProvider={build:n=>new GO(n,e==null?void 0:e.cacheSizeBytes)}}}function GN(t){return new lH(void 0)}function qN(){return new cH}function Jm(){return new Ox("serverTimestamp")}function WN(...t){return new Hx("arrayUnion",t)}function $N(...t){return new Vx("arrayRemove",t)}(function(e,n=!0){(function(s){pc=s})(EA),rs(new Lr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Js(new nD(r.getProvider("auth-internal")),new aD(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ce(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(h.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Mn(Ob,"4.7.3",e),Mn(Ob,"4.7.3","esm2017")})();const ZC=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:HN,Bytes:gA,CollectionReference:Qi,DocumentReference:In,DocumentSnapshot:Wx,FieldPath:qd,FieldValue:kA,Firestore:Js,FirestoreError:ce,GeoPoint:Zg,Query:ei,QueryCompositeFilterConstraint:sp,QueryConstraint:np,QueryDocumentSnapshot:Du,QueryFieldFilterConstraint:Wd,QueryLimitConstraint:ap,QueryOrderByConstraint:ip,QuerySnapshot:$x,SnapshotMetadata:Il,Timestamp:Ve,VectorValue:Jg,_AutoId:ix,_ByteString:Ht,_DatabaseId:ro,_DocumentKey:ge,_EmptyAuthCredentialsProvider:Kk,_FieldPath:kt,_cast:Br,_logWarn:Zl,_validateIsNotUsedTogether:kN,addDoc:oc,arrayRemove:$N,arrayUnion:WN,collection:un,deleteDoc:$d,doc:ze,ensureFirestoreConfigured:Gd,executeWrite:Zd,getDoc:ws,getDocs:Ua,initializeFirestore:SN,limit:MN,onSnapshot:Vs,orderBy:qx,persistentLocalCache:zN,persistentMultipleTabManager:qN,persistentSingleTabManager:GN,query:_c,serverTimestamp:Jm,setDoc:nr,updateDoc:pA,where:rp},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH="type.googleapis.com/google.protobuf.Int64Value",dH="type.googleapis.com/google.protobuf.UInt64Value";function ZN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ww(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ww(e));if(typeof t=="function"||typeof t=="object")return ZN(t,e=>ww(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Xm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case uH:case dH:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Xm(e)):typeof t=="function"||typeof t=="object"?ZN(t,e=>Xm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dl extends is{constructor(e,n,r){super(`${Jx}/${e}`,n||""),this.details=r}}function hH(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function fH(t,e){let n=hH(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!JC[o])return new Dl("internal","internal");n=JC[o],r=o}const l=i.message;typeof l=="string"&&(r=l),s=i.details,s!==void 0&&(s=Xm(s))}}catch{}return n==="ok"?null:new Dl(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="us-central1";function gH(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Dl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class pH{constructor(e,n,r,s,i=vw,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new mH(n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=vw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function yH(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function wH(t,e,n){return r=>xH(t,e,r,{})}async function vH(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function xH(t,e,n,r){const s=t._url(e);return _H(t,s,n,r)}async function _H(t,e,n,r){n=ww(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const l=r.timeout||7e4,u=gH(l),h=await Promise.race([vH(e,s,i,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!h)throw new Dl("cancelled","Firebase Functions instance was deleted.");const m=fH(h.status,h.json);if(m)throw m;if(!h.json)throw new Dl("internal","Response is not valid JSON object.");let p=h.json.data;if(typeof p>"u"&&(p=h.json.result),typeof p>"u")throw new Dl("internal","Response is missing data field.");return{data:Xm(p)}}const XC="@firebase/functions",YC="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH="auth-internal",bH="app-check-internal",CH="messaging-internal";function EH(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(BH),l=r.getProvider(CH),u=r.getProvider(bH);return new pH(i,o,l,u,s,t)};rs(new Lr(Jx,n,"PUBLIC").setMultipleInstances(!0)),Mn(XC,YC,e),Mn(XC,YC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t=Sg(),e=vw){const r=ho(nt(t),Jx).getImmediate({identifier:e}),s=zT("functions");return s&&IH(r,...s),r}function IH(t,e,n){yH(nt(t),e,n)}function Ot(t,e,n){return wH(nt(t),e)}EH(fetch.bind(self));var TH="firebase",kH="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(TH,kH,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebasestorage.googleapis.com",XN="storageBucket",SH=2*60*1e3,NH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt extends is{constructor(e,n,r=0){super(y0(e),`Firebase Storage: ${n} (${y0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return y0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vt||(Vt={}));function y0(t){return"storage/"+t}function Xx(){const t="An unknown error occurred, please check the error payload for server response.";return new Kt(Vt.UNKNOWN,t)}function UH(t){return new Kt(Vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function FH(t){return new Kt(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function QH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Kt(Vt.UNAUTHENTICATED,t)}function PH(){return new Kt(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RH(t){return new Kt(Vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function LH(){return new Kt(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jH(){return new Kt(Vt.CANCELED,"User canceled the upload/download.")}function DH(t){return new Kt(Vt.INVALID_URL,"Invalid URL '"+t+"'.")}function MH(t){return new Kt(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OH(){return new Kt(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XN+"' property when initializing the app?")}function HH(){return new Kt(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VH(){return new Kt(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KH(t){return new Kt(Vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xw(t){return new Kt(Vt.INVALID_ARGUMENT,t)}function YN(){return new Kt(Vt.APP_DELETED,"The Firebase app was deleted.")}function zH(t){return new Kt(Vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mu(t,e){return new Kt(Vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xc(t){throw new Kt(Vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Fr.makeFromUrl(e,n)}catch{return new Fr(e,"")}if(r.path==="")return r;throw MH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function h(H){H.path_=decodeURIComponent(H.path)}const m="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${p}/${m}/b/${s}/o${w}`,"i"),b={bucket:1,path:3},x=n===JN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",T=new RegExp(`^https?://${x}/${s}/${U}`,"i"),N=[{regex:l,indices:u,postModify:i},{regex:C,indices:b,postModify:h},{regex:T,indices:{bucket:1,path:2},postModify:h}];for(let H=0;H<N.length;H++){const V=N[H],M=V.regex.exec(e);if(M){const I=M[V.indices.bucket];let B=M[V.indices.path];B||(B=""),r=new Fr(I,B),V.postModify(r);break}}if(r==null)throw DH(e);return r}}class GH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let h=!1;function m(...U){h||(h=!0,e.apply(null,U))}function p(U){s=setTimeout(()=>{s=null,t(C,u())},U)}function w(){i&&clearTimeout(i)}function C(U,...T){if(h){w();return}if(U){w(),m.call(null,U,...T);return}if(u()||o){w(),m.call(null,U,...T);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,p(N)}let b=!1;function x(U){b||(b=!0,w(),!h&&(s!==null?(U||(l=2),clearTimeout(s),p(0)):U||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function WH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $H(t){return t!==void 0}function ZH(t){return typeof t=="object"&&!Array.isArray(t)}function Yx(t){return typeof t=="string"||t instanceof String}function eE(t){return e_()&&t instanceof Blob}function e_(){return typeof Blob<"u"}function tE(t,e,n,r){if(r<e)throw xw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw xw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function e2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Jo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Jo||(Jo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e,n,r,s,i,o,l,u,h,m,p,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=p,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,b)=>{this.resolve_=C,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Jo.NO_ERROR,u=i.getStatus();if(!l||JH(u,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===Jo.ABORT;r(!1,new qh(!1,null,m));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new qh(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());$H(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=Xx();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?YN():jH();o(u)}else{const u=LH();o(u)}};this.canceled_?n(!1,new qh(!1,null,!0)):this.backoffId_=qH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function rV(t,e,n,r,s,i,o=!0){const l=e2(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return tV(h,e),YH(h,n),eV(h,i),nV(h,r),new XH(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iV(...t){const e=sV();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(e_())return new Blob(t);throw new Kt(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(t){if(typeof atob>"u")throw KH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w0{constructor(e,n){this.data=e,this.contentType=n||null}}function AV(t,e){switch(t){case Ks.RAW:return new w0(t2(e));case Ks.BASE64:case Ks.BASE64URL:return new w0(n2(t,e));case Ks.DATA_URL:return new w0(cV(e),uV(e))}throw Xx()}function t2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function lV(t){let e;try{e=decodeURIComponent(t)}catch{throw Mu(Ks.DATA_URL,"Malformed data URL.")}return t2(e)}function n2(t,e){switch(t){case Ks.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Mu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ks.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Mu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=oV(e)}catch(s){throw s.message.includes("polyfill")?s:Mu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class r2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Mu(Ks.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=dV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function cV(t){const e=new r2(t);return e.base64?n2(Ks.BASE64,e.rest):lV(e.rest)}function uV(t){return new r2(t).contentType}function dV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){let r=0,s="";eE(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(eE(this.data_)){const r=this.data_,s=aV(r,e,n);return s===null?null:new Fa(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Fa(r,!0)}}static getBlob(...e){if(e_()){const n=e.map(r=>r instanceof Fa?r.data_:r);return new Fa(iV.apply(null,n))}else{const n=e.map(o=>Yx(o)?AV(Ks.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Fa(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t){let e;try{e=JSON.parse(t)}catch{return null}return ZH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function fV(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function i2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t,e){return e}class Xn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||mV}}let Wh=null;function gV(t){return!Yx(t)||t.length<2?t:i2(t)}function a2(){if(Wh)return Wh;const t=[];t.push(new Xn("bucket")),t.push(new Xn("generation")),t.push(new Xn("metageneration")),t.push(new Xn("name","fullPath",!0));function e(i,o){return gV(o)}const n=new Xn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Xn("size");return s.xform=r,t.push(s),t.push(new Xn("timeCreated")),t.push(new Xn("updated")),t.push(new Xn("md5Hash",null,!0)),t.push(new Xn("cacheControl",null,!0)),t.push(new Xn("contentDisposition",null,!0)),t.push(new Xn("contentEncoding",null,!0)),t.push(new Xn("contentLanguage",null,!0)),t.push(new Xn("contentType",null,!0)),t.push(new Xn("metadata","customMetadata",!0)),Wh=t,Wh}function pV(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Fr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function yV(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return pV(r,t),r}function o2(t,e,n){const r=s2(e);return r===null?null:yV(t,r,n)}function wV(t,e,n,r){const s=s2(e);if(s===null||!Yx(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const m=t.bucket,p=t.fullPath,w="/b/"+o(m)+"/o/"+o(p),C=op(w,n,r),b=e2({alt:"media",token:h});return C+b})[0]}function vV(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class t_{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t){if(!t)throw Xx()}function xV(t,e){function n(r,s){const i=o2(t,s,e);return A2(i!==null),i}return n}function _V(t,e){function n(r,s){const i=o2(t,s,e);return A2(i!==null),wV(i,s,t.host,t._protocol)}return n}function l2(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=PH():s=QH():n.getStatus()===402?s=FH(t.bucket):n.getStatus()===403?s=RH(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function c2(t){const e=l2(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=UH(t.path)),i.serverResponse=s.serverResponse,i}return n}function BV(t,e,n){const r=e.fullServerUrl(),s=op(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new t_(s,i,_V(t,n),o);return l.errorHandler=c2(e),l}function bV(t,e){const n=e.fullServerUrl(),r=op(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,h){}const l=new t_(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=c2(e),l}function CV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function EV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=CV(null,e)),r}function IV(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let H=0;H<2;H++)N=N+Math.random().toString().slice(2);return N}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const h=EV(e,r,s),m=vV(h,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+u+"--",C=Fa.getBlob(p,r,w);if(C===null)throw HH();const b={name:h.fullPath},x=op(i,t.host,t._protocol),U="POST",T=t.maxUploadRetryTime,E=new t_(x,U,xV(t,n),T);return E.urlParams=b,E.headers=o,E.body=C.uploadData(),E.errorHandler=l2(e),E}class TV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Xc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class kV extends TV{initXhr(){this.xhr_.responseType="text"}}function n_(){return new kV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this._service=e,n instanceof Fr?this._location=n:this._location=Fr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yA(e,n)}get root(){const e=new Fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return i2(this._location.path)}get storage(){return this._service}get parent(){const e=hV(this._location.path);if(e===null)return null;const n=new Fr(this._location.bucket,e);return new yA(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw zH(e)}}function SV(t,e,n){t._throwIfRoot("uploadBytes");const r=IV(t.storage,t._location,a2(),new Fa(e,!0),n);return t.storage.makeRequestWithTokens(r,n_).then(s=>({metadata:s,ref:t}))}function NV(t){t._throwIfRoot("getDownloadURL");const e=BV(t.storage,t._location,a2());return t.storage.makeRequestWithTokens(e,n_).then(n=>{if(n===null)throw VH();return n})}function UV(t){t._throwIfRoot("deleteObject");const e=bV(t.storage,t._location);return t.storage.makeRequestWithTokens(e,n_)}function FV(t,e){const n=fV(t._location.path,e),r=new Fr(t._location.bucket,n);return new yA(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(t){return/^[A-Za-z]+:\/\//.test(t)}function PV(t,e){return new yA(t,e)}function u2(t,e){if(t instanceof r_){const n=t;if(n._bucket==null)throw OH();const r=new yA(n,n._bucket);return e!=null?u2(r,e):r}else return e!==void 0?FV(t,e):t}function RV(t,e){if(e&&QV(e)){if(t instanceof r_)return PV(t,e);throw xw("To use ref(service, url), the first argument must be a Storage instance.")}else return u2(t,e)}function nE(t,e){const n=e==null?void 0:e[XN];return n==null?null:Fr.makeFromBucketSpec(n,t)}function LV(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:y4(s,t.app.options.projectId))}class r_{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=JN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SH,this._maxUploadRetryTime=NH,this._requests=new Set,s!=null?this._bucket=Fr.makeFromBucketSpec(s,this._host):this._bucket=nE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fr.makeFromBucketSpec(this._url,e):this._bucket=nE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yA(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new GH(YN());{const o=rV(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const rE="@firebase/storage",sE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="storage";function Ac(t,e,n){return t=nt(t),SV(t,e,n)}function lc(t){return t=nt(t),NV(t)}function h2(t){return t=nt(t),UV(t)}function ao(t,e){return t=nt(t),RV(t,e)}function jV(t=Sg(),e){t=nt(t);const r=ho(t,d2).getImmediate({identifier:e}),s=zT("storage");return s&&DV(r,...s),r}function DV(t,e,n,r={}){LV(t,e,n,r)}function MV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new r_(n,r,s,e,EA)}function OV(){rs(new Lr(d2,MV,"PUBLIC").setMultipleInstances(!0)),Mn(rE,sE,""),Mn(rE,sE,"esm2017")}OV();const f2="@firebase/installations",s_="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=1e4,g2=`w:${s_}`,p2="FIS_v2",HV="https://firebaseinstallations.googleapis.com/v1",VV=60*60*1e3,KV="installations",zV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wA=new CA(KV,zV,GV);function y2(t){return t instanceof is&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2({projectId:t}){return`${HV}/projects/${t}/installations`}function v2(t){return{token:t.token,requestStatus:2,expiresIn:WV(t.expiresIn),creationTime:Date.now()}}async function x2(t,e){const r=(await e.json()).error;return wA.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function _2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qV(t,{refreshToken:e}){const n=_2(t);return n.append("Authorization",$V(e)),n}async function B2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WV(t){return Number(t.replace("s","000"))}function $V(t){return`${p2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=w2(t),s=_2(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={fid:n,authVersion:p2,appId:t.appId,sdkVersion:g2},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await B2(()=>fetch(r,l));if(u.ok){const h=await u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:v2(h.authToken)}}else throw await x2("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=/^[cdef][\w-]{21}$/,_w="";function YV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=e5(t);return XV.test(n)?n:_w}catch{return _w}}function e5(t){return JV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new Map;function E2(t,e){const n=Ap(t);I2(n,e),t5(n,e)}function I2(t,e){const n=C2.get(t);if(n)for(const r of n)r(e)}function t5(t,e){const n=n5();n&&n.postMessage({key:t,fid:e}),r5()}let zo=null;function n5(){return!zo&&"BroadcastChannel"in self&&(zo=new BroadcastChannel("[Firebase] FID Change"),zo.onmessage=t=>{I2(t.data.key,t.data.fid)}),zo}function r5(){C2.size===0&&zo&&(zo.close(),zo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="firebase-installations-database",i5=1,vA="firebase-installations-store";let v0=null;function i_(){return v0||(v0=kg(s5,i5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vA)}}})),v0}async function Ym(t,e){const n=Ap(t),s=(await i_()).transaction(vA,"readwrite"),i=s.objectStore(vA),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&E2(t,e.fid),e}async function T2(t){const e=Ap(t),r=(await i_()).transaction(vA,"readwrite");await r.objectStore(vA).delete(e),await r.done}async function lp(t,e){const n=Ap(t),s=(await i_()).transaction(vA,"readwrite"),i=s.objectStore(vA),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&E2(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(t){let e;const n=await lp(t.appConfig,r=>{const s=a5(r),i=o5(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===_w?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function a5(t){const e=t||{fid:YV(),registrationStatus:0};return k2(e)}function o5(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(wA.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=A5(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:l5(t)}:{installationEntry:e}}async function A5(t,e){try{const n=await ZV(t,e);return Ym(t.appConfig,n)}catch(n){throw y2(n)&&n.customData.serverCode===409?await T2(t.appConfig):await Ym(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function l5(t){let e=await iE(t.appConfig);for(;e.registrationStatus===1;)await b2(100),e=await iE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await a_(t);return r||n}return e}function iE(t){return lp(t,e=>{if(!e)throw wA.create("installation-not-found");return k2(e)})}function k2(t){return c5(t)?{fid:t.fid,registrationStatus:0}:t}function c5(t){return t.registrationStatus===1&&t.registrationTime+m2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5({appConfig:t,heartbeatServiceProvider:e},n){const r=d5(t,n),s=qV(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={installation:{sdkVersion:g2,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await B2(()=>fetch(r,l));if(u.ok){const h=await u.json();return v2(h)}else throw await x2("Generate Auth Token",u)}function d5(t,{fid:e}){return`${w2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(t,e=!1){let n;const r=await lp(t.appConfig,i=>{if(!S2(i))throw wA.create("not-registered");const o=i.authToken;if(!e&&m5(o))return i;if(o.requestStatus===1)return n=h5(t,e),i;{if(!navigator.onLine)throw wA.create("app-offline");const l=p5(i);return n=f5(t,l),l}});return n?await n:r.authToken}async function h5(t,e){let n=await aE(t.appConfig);for(;n.authToken.requestStatus===1;)await b2(100),n=await aE(t.appConfig);const r=n.authToken;return r.requestStatus===0?o_(t,e):r}function aE(t){return lp(t,e=>{if(!S2(e))throw wA.create("not-registered");const n=e.authToken;return y5(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function f5(t,e){try{const n=await u5(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ym(t.appConfig,r),n}catch(n){if(y2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await T2(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ym(t.appConfig,r)}throw n}}function S2(t){return t!==void 0&&t.registrationStatus===2}function m5(t){return t.requestStatus===2&&!g5(t)}function g5(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+VV}function p5(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function y5(t){return t.requestStatus===1&&t.requestTime+m2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(t){const e=t,{installationEntry:n,registrationPromise:r}=await a_(e);return r?r.catch(console.error):o_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e=!1){const n=t;return await x5(n),(await o_(n,e)).token}async function x5(t){const{registrationPromise:e}=await a_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t){if(!t||!t.options)throw x0("App Configuration");if(!t.name)throw x0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw x0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function x0(t){return wA.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="installations",B5="installations-internal",b5=t=>{const e=t.getProvider("app").getImmediate(),n=_5(e),r=ho(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},C5=t=>{const e=t.getProvider("app").getImmediate(),n=ho(e,N2).getImmediate();return{getId:()=>w5(n),getToken:s=>v5(n,s)}};function E5(){rs(new Lr(N2,b5,"PUBLIC")),rs(new Lr(B5,C5,"PRIVATE"))}E5();Mn(f2,s_);Mn(f2,s_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="/firebase-messaging-sw.js",T5="/firebase-cloud-messaging-push-scope",U2="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",k5="https://fcmregistrations.googleapis.com/v1",F2="google.c.a.c_id",S5="google.c.a.c_l",N5="google.c.a.ts",U5="google.c.a.e";var oE;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(oE||(oE={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var bd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(bd||(bd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function F5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="fcm_token_details_db",Q5=5,AE="fcm_token_object_Store";async function P5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(_0))return null;let e=null;return(await kg(_0,Q5,{upgrade:async(r,s,i,o)=>{var l;if(s<2||!r.objectStoreNames.contains(AE))return;const u=o.objectStore(AE),h=await u.index("fcmSenderId").get(t);if(await u.clear(),!!h){if(s===2){const m=h;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:(l=m.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:xi(m.vapidKey)}}}else if(s===3){const m=h;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:xi(m.auth),p256dh:xi(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:xi(m.vapidKey)}}}else if(s===4){const m=h;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:xi(m.auth),p256dh:xi(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:xi(m.vapidKey)}}}}}})).close(),await o0(_0),await o0("fcm_vapid_details_db"),await o0("undefined"),R5(e)?e:null}function R5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="firebase-messaging-database",j5=1,Cd="firebase-messaging-store";let B0=null;function Q2(){return B0||(B0=kg(L5,j5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Cd)}}})),B0}async function D5(t){const e=P2(t),r=await(await Q2()).transaction(Cd).objectStore(Cd).get(e);if(r)return r;{const s=await P5(t.appConfig.senderId);if(s)return await A_(t,s),s}}async function A_(t,e){const n=P2(t),s=(await Q2()).transaction(Cd,"readwrite");return await s.objectStore(Cd).put(e,n),await s.done,e}function P2({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},On=new CA("messaging","Messaging",M5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(t,e){const n=await c_(t),r=R2(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(l_(t.appConfig),s)).json()}catch(o){throw On.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw On.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw On.create("token-subscribe-no-token");return i.token}async function H5(t,e){const n=await c_(t),r=R2(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${l_(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw On.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw On.create("token-update-failed",{errorInfo:o})}if(!i.token)throw On.create("token-update-no-token");return i.token}async function V5(t,e){const r={method:"DELETE",headers:await c_(t)};try{const i=await(await fetch(`${l_(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw On.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw On.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function l_({projectId:t}){return`${k5}/projects/${t}/registrations`}async function c_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function R2({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==U2&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=7*24*60*60*1e3;async function z5(t){const e=await q5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:xi(e.getKey("auth")),p256dh:xi(e.getKey("p256dh"))},r=await D5(t.firebaseDependencies);if(r){if(W5(r.subscriptionOptions,n))return Date.now()>=r.createTime+K5?G5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await V5(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return lE(t.firebaseDependencies,n)}else return lE(t.firebaseDependencies,n)}async function G5(t,e){try{const n=await H5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await A_(t.firebaseDependencies,r),n}catch(n){throw n}}async function lE(t,e){const r={token:await O5(t,e),createTime:Date.now(),subscriptionOptions:e};return await A_(t,r),r.token}async function q5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:F5(e)})}function W5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return $5(e,t),Z5(e,t),J5(e,t),e}function $5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function Z5(t,e){e.data&&(t.data=e.data)}function J5(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;l&&(t.fcmOptions.link=l);const u=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t){return typeof t=="object"&&!!t&&F2 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t){if(!t||!t.options)throw b0("App Configuration Object");if(!t.name)throw b0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw b0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function b0(t){return On.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Y5(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3(t){try{t.swRegistration=await navigator.serviceWorker.register(I5,{scope:T5}),t.swRegistration.update().catch(()=>{})}catch(e){throw On.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n3(t,e){if(!e&&!t.swRegistration&&await t3(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw On.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=U2)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t,e){if(!navigator)throw On.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw On.create("permission-blocked");return await r3(t,e==null?void 0:e.vapidKey),await n3(t,e==null?void 0:e.serviceWorkerRegistration),z5(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s3(t,e,n){const r=i3(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[F2],message_name:n[S5],message_time:n[N5],message_device_time:Math.floor(Date.now()/1e3)})}function i3(t){switch(t){case bd.NOTIFICATION_CLICKED:return"notification_open";case bd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a3(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===bd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(cE(n)):t.onMessageHandler.next(cE(n)));const r=n.data;X5(r)&&r[U5]==="1"&&await s3(t,n.messageType,r)}const uE="@firebase/messaging",dE="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=t=>{const e=new e3(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>a3(e,n)),e},A3=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>L2(e,r)}};function l3(){rs(new Lr("messaging",o3,"PUBLIC")),rs(new Lr("messaging-internal",A3,"PRIVATE")),Mn(uE,dE),Mn(uE,dE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(){try{await $T()}catch{return!1}return typeof window<"u"&&Kv()&&C4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t,e){if(!navigator)throw On.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t=Sg()){return j2().then(e=>{if(!e)throw On.create("unsupported-browser")},e=>{throw On.create("indexed-db-unsupported")}),ho(nt(t),"messaging").getImmediate()}async function d3(t,e){return t=nt(t),L2(t,e)}function hE(t,e){return t=nt(t),c3(t,e)}l3();const h3={apiKey:"AIzaSyCWp0X6bLJBsyYKTjUaVsXBSuVD8KeeEqY",authDomain:"carnival-planner.firebaseapp.com",projectId:"carnival-planner",storageBucket:"carnival-planner.firebasestorage.app",messagingSenderId:"1036340118282",appId:"1:1036340118282:web:809dc12c298ff1b8f2f0f3",measurementId:"G-XC1K69PSVC"},Pt=XT(h3),ja=Yj(Pt),ke=SN(Pt,{localCache:zN({tabManager:qN()})},"squad-db"),oo=jV(Pt);Promise.resolve(!0);console.log("Firestore initialized");let Si=null;const u_=async()=>{try{return await j2()?(Si=u3(Pt),console.log("Firebase Messaging initialized"),Si):(console.log("Firebase Messaging not supported in this browser"),null)}catch(t){return console.log("Error initializing Firebase Messaging:",t),null}},f3=async t=>{try{if(await Notification.requestPermission()!=="granted")return console.log("Notification permission denied"),null;if(Si||await u_(),!Si)return null;const n=await d3(Si,{vapidKey:t});return console.log("FCM Token:",n),n}catch(e){return console.log("Error getting FCM token:",e),null}},m3=t=>{Si?hE(Si,t):u_().then(()=>{Si&&hE(Si,t)})};u_();const $h="/assets/carnival-logo-CBA9n7vt.png",C0=[{name:"Sugar Mas (St. Kitts)",date:"2026-01-01"},{name:"St. Croix Carnival",date:"2026-01-03"},{name:"Carnaval Ponceno (Puerto Rico)",date:"2026-02-12"},{name:"Aruba Carnival",date:"2026-02-14"},{name:"Barranquilla Carnival (Colombia)",date:"2026-02-14"},{name:"Martinique Carnival",date:"2026-02-15"},{name:"Rio Carnival (Brazil)",date:"2026-02-15"},{name:"Carnaval De Saint-Martin",date:"2026-02-15"},{name:"Mas Domnik (Dominica)",date:"2026-02-16"},{name:"Carriacou & Petite Martinique",date:"2026-02-16"},{name:"Venezuela Carnival",date:"2026-02-16"},{name:"Trinidad Carnival",date:"2026-02-16"},{name:"Guyana Mashramani",date:"2026-02-23"},{name:"Carnaval De San Pedro (Belize)",date:"2026-02-23"},{name:"Cape Town Carnival (South Africa)",date:"2026-03-21"},{name:"Virgin Gorda Easter Festival",date:"2026-04-05"},{name:"Jamaica Carnival",date:"2026-04-12"},{name:"Tampa Bay Carnival (USA)",date:"2026-04-18"},{name:"St. Maarten Carnival",date:"2026-04-30"},{name:"St. Thomas Carnival (USVI)",date:"2026-05-02"},{name:"Cayman Carnival Batabano",date:"2026-05-09"},{name:"Braccanal (Cayman Islands)",date:"2026-05-13"},{name:"Berlin Carnival (Germany)",date:"2026-05-22"},{name:"Atlanta Caribbean Carnival",date:"2026-05-23"},{name:"Aalborg Karneval (Denmark)",date:"2026-05-23"},{name:"Orlando Carnival",date:"2026-05-24"},{name:"Luton International Carnival (UK)",date:"2026-05-24"},{name:"Guyana Independence",date:"2026-05-26"},{name:"Munich Carnival (Germany)",date:"2026-06-04"},{name:"Bahamas Carnival",date:"2026-06-06"},{name:"South Carolina Carnival",date:"2026-06-11"},{name:"Bermuda Carnival",date:"2026-06-15"},{name:"Hollywood Carnival (USA)",date:"2026-06-20"},{name:"Caymas Carnival (Cayman Islands)",date:"2026-06-20"},{name:"Philadelphia Carnival",date:"2026-06-20"},{name:"Vienna Carnival (Austria)",date:"2026-06-26"},{name:"Vincy Mas (St. Vincent)",date:"2026-07-06"},{name:"Saint Lucia Carnival",date:"2026-07-20"},{name:"Anguilla Summer Festival",date:"2026-07-24"},{name:"Zomercarnaval (Rotterdam)",date:"2026-07-25"},{name:"Toronto Caribbean Carnival (Caribana)",date:"2026-08-01"},{name:"Crop Over (Barbados)",date:"2026-08-03"},{name:"Antigua Carnival",date:"2026-08-03"},{name:"Nevis Culturama Festival",date:"2026-08-04"},{name:"Cariwest (Canada)",date:"2026-08-07"},{name:"Spice Mas (Grenada)",date:"2026-08-10"},{name:"Notting Hill Carnival (London)",date:"2026-08-31"},{name:"New York Carnival (Labor Day)",date:"2026-09-07"},{name:"Japan Caribbean Carnival",date:"2026-09-23"},{name:"Miami Carnival",date:"2026-10-11"},{name:"Tobago Carnival",date:"2026-11-01"}];function D2(t,e){const n=j.useRef(e);j.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const g3=1;function p3(t){return Object.freeze({__version:g3,map:t})}function y3(t,e){return Object.freeze({...t,...e})}const M2=j.createContext(null),O2=M2.Provider;function d_(){const t=j.useContext(M2);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function w3(t){function e(n,r){const{instance:s,context:i}=t(n).current;return j.useImperativeHandle(r,()=>s),n.children==null?null:rm.createElement(O2,{value:i},n.children)}return j.forwardRef(e)}function v3(t){function e(n,r){const[s,i]=j.useState(!1),{instance:o}=t(n,i).current;j.useImperativeHandle(r,()=>o),j.useEffect(function(){s&&o.update()},[o,s,n.children]);const l=o._contentNode;return l?MT.createPortal(n.children,l):null}return j.forwardRef(e)}function x3(t){function e(n,r){const{instance:s}=t(n).current;return j.useImperativeHandle(r,()=>s),null}return j.forwardRef(e)}function H2(t,e){const n=j.useRef();j.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function h_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function _3(t,e){return function(r,s){const i=d_(),o=t(h_(r,i),i);return D2(i.map,r.attribution),H2(o.current,r.eventHandlers),e(o.current,i,r,s),o}}var Bw={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(RF,function(n){var r="1.9.4";function s(a){var c,f,g,v;for(f=1,g=arguments.length;f<g;f++){v=arguments[f];for(c in v)a[c]=v[c]}return a}var i=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function o(a,c){var f=Array.prototype.slice;if(a.bind)return a.bind.apply(a,f.call(arguments,1));var g=f.call(arguments,2);return function(){return a.apply(c,g.length?g.concat(f.call(arguments)):arguments)}}var l=0;function u(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,c,f){var g,v,k,K;return K=function(){g=!1,v&&(k.apply(f,v),v=!1)},k=function(){g?v=arguments:(a.apply(f,arguments),setTimeout(K,c),g=!0)},k}function m(a,c,f){var g=c[1],v=c[0],k=g-v;return a===g&&f?a:((a-v)%k+k)%k+v}function p(){return!1}function w(a,c){if(c===!1)return a;var f=Math.pow(10,c===void 0?6:c);return Math.round(a*f)/f}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function b(a){return C(a).split(/\s+/)}function x(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var f in c)a.options[f]=c[f];return a.options}function U(a,c,f){var g=[];for(var v in a)g.push(encodeURIComponent(f?v.toUpperCase():v)+"="+encodeURIComponent(a[v]));return(!c||c.indexOf("?")===-1?"?":"&")+g.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function E(a,c){return a.replace(T,function(f,g){var v=c[g];if(v===void 0)throw new Error("No value provided for variable "+f);return typeof v=="function"&&(v=v(c)),v})}var N=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function H(a,c){for(var f=0;f<a.length;f++)if(a[f]===c)return f;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var I=0;function B(a){var c=+new Date,f=Math.max(0,16-(c-I));return I=c+f,window.setTimeout(a,f)}var S=window.requestAnimationFrame||M("RequestAnimationFrame")||B,P=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function D(a,c,f){if(f&&S===B)a.call(c);else return S.call(window,o(a,c))}function O(a){a&&P.call(window,a)}var R={__proto__:null,extend:s,create:i,bind:o,get lastId(){return l},stamp:u,throttle:h,wrapNum:m,falseFn:p,formatNum:w,trim:C,splitWords:b,setOptions:x,getParamString:U,template:E,isArray:N,indexOf:H,emptyImageUrl:V,requestFn:S,cancelFn:P,requestAnimFrame:D,cancelAnimFrame:O};function Z(){}Z.extend=function(a){var c=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=c.__super__=this.prototype,g=i(f);g.constructor=c,c.prototype=g;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(c[v]=this[v]);return a.statics&&s(c,a.statics),a.includes&&(se(a.includes),s.apply(null,[g].concat(a.includes))),s(g,a),delete g.statics,delete g.includes,g.options&&(g.options=f.options?i(f.options):{},s(g.options,a.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,K=g._initHooks.length;k<K;k++)g._initHooks[k].call(this)}},c},Z.include=function(a){var c=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},Z.mergeOptions=function(a){return s(this.prototype.options,a),this},Z.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),f=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function se(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=N(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ae={on:function(a,c,f){if(typeof a=="object")for(var g in a)this._on(g,a[g],c);else{a=b(a);for(var v=0,k=a.length;v<k;v++)this._on(a[v],c,f)}return this},off:function(a,c,f){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var g in a)this._off(g,a[g],c);else{a=b(a);for(var v=arguments.length===1,k=0,K=a.length;k<K;k++)v?this._off(a[k]):this._off(a[k],c,f)}return this},_on:function(a,c,f,g){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,f)===!1){f===this&&(f=void 0);var v={fn:c,ctx:f};g&&(v.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(v)}},_off:function(a,c,f){var g,v,k;if(this._events&&(g=this._events[a],!!g)){if(arguments.length===1){if(this._firingCount)for(v=0,k=g.length;v<k;v++)g[v].fn=p;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var K=this._listens(a,c,f);if(K!==!1){var W=g[K];this._firingCount&&(W.fn=p,this._events[a]=g=g.slice()),g.splice(K,1)}}},fire:function(a,c,f){if(!this.listens(a,f))return this;var g=s({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var v=this._events[a];if(v){this._firingCount=this._firingCount+1||1;for(var k=0,K=v.length;k<K;k++){var W=v[k],J=W.fn;W.once&&this.off(a,J,W.ctx),J.call(W.ctx||this,g)}this._firingCount--}}return f&&this._propagateEvent(g),this},listens:function(a,c,f,g){typeof a!="string"&&console.warn('"string" type argument expected');var v=c;typeof c!="function"&&(g=!!c,v=void 0,f=void 0);var k=this._events&&this._events[a];if(k&&k.length&&this._listens(a,v,f)!==!1)return!0;if(g){for(var K in this._eventParents)if(this._eventParents[K].listens(a,c,f,g))return!0}return!1},_listens:function(a,c,f){if(!this._events)return!1;var g=this._events[a]||[];if(!c)return!!g.length;f===this&&(f=void 0);for(var v=0,k=g.length;v<k;v++)if(g[v].fn===c&&g[v].ctx===f)return v;return!1},once:function(a,c,f){if(typeof a=="object")for(var g in a)this._on(g,a[g],c,!0);else{a=b(a);for(var v=0,k=a.length;v<k;v++)this._on(a[v],c,f,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[u(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[u(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};Ae.addEventListener=Ae.on,Ae.removeEventListener=Ae.clearAllEventListeners=Ae.off,Ae.addOneTimeEventListener=Ae.once,Ae.fireEvent=Ae.fire,Ae.hasEventListeners=Ae.listens;var me=Z.extend(Ae);function G(a,c,f){this.x=f?Math.round(a):a,this.y=f?Math.round(c):c}var oe=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(a){return this.clone()._add(Y(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Y(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new G(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new G(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(a){a=Y(a);var c=a.x-this.x,f=a.y-this.y;return Math.sqrt(c*c+f*f)},equals:function(a){return a=Y(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Y(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function Y(a,c,f){return a instanceof G?a:N(a)?new G(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new G(a.x,a.y):new G(a,c,f)}function ve(a,c){if(a)for(var f=c?[a,c]:a,g=0,v=f.length;g<v;g++)this.extend(f[g])}ve.prototype={extend:function(a){var c,f;if(!a)return this;if(a instanceof G||typeof a[0]=="number"||"x"in a)c=f=Y(a);else if(a=ue(a),c=a.min,f=a.max,!c||!f)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=f.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(a){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,f;return typeof a[0]=="number"||a instanceof G?a=Y(a):a=ue(a),a instanceof ve?(c=a.min,f=a.max):c=f=a,c.x>=this.min.x&&f.x<=this.max.x&&c.y>=this.min.y&&f.y<=this.max.y},intersects:function(a){a=ue(a);var c=this.min,f=this.max,g=a.min,v=a.max,k=v.x>=c.x&&g.x<=f.x,K=v.y>=c.y&&g.y<=f.y;return k&&K},overlaps:function(a){a=ue(a);var c=this.min,f=this.max,g=a.min,v=a.max,k=v.x>c.x&&g.x<f.x,K=v.y>c.y&&g.y<f.y;return k&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,f=this.max,g=Math.abs(c.x-f.x)*a,v=Math.abs(c.y-f.y)*a;return ue(Y(c.x-g,c.y-v),Y(f.x+g,f.y+v))},equals:function(a){return a?(a=ue(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function ue(a,c){return!a||a instanceof ve?a:new ve(a,c)}function fe(a,c){if(a)for(var f=c?[a,c]:a,g=0,v=f.length;g<v;g++)this.extend(f[g])}fe.prototype={extend:function(a){var c=this._southWest,f=this._northEast,g,v;if(a instanceof de)g=a,v=a;else if(a instanceof fe){if(g=a._southWest,v=a._northEast,!g||!v)return this}else return a?this.extend(ae(a)||pe(a)):this;return!c&&!f?(this._southWest=new de(g.lat,g.lng),this._northEast=new de(v.lat,v.lng)):(c.lat=Math.min(g.lat,c.lat),c.lng=Math.min(g.lng,c.lng),f.lat=Math.max(v.lat,f.lat),f.lng=Math.max(v.lng,f.lng)),this},pad:function(a){var c=this._southWest,f=this._northEast,g=Math.abs(c.lat-f.lat)*a,v=Math.abs(c.lng-f.lng)*a;return new fe(new de(c.lat-g,c.lng-v),new de(f.lat+g,f.lng+v))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof de||"lat"in a?a=ae(a):a=pe(a);var c=this._southWest,f=this._northEast,g,v;return a instanceof fe?(g=a.getSouthWest(),v=a.getNorthEast()):g=v=a,g.lat>=c.lat&&v.lat<=f.lat&&g.lng>=c.lng&&v.lng<=f.lng},intersects:function(a){a=pe(a);var c=this._southWest,f=this._northEast,g=a.getSouthWest(),v=a.getNorthEast(),k=v.lat>=c.lat&&g.lat<=f.lat,K=v.lng>=c.lng&&g.lng<=f.lng;return k&&K},overlaps:function(a){a=pe(a);var c=this._southWest,f=this._northEast,g=a.getSouthWest(),v=a.getNorthEast(),k=v.lat>c.lat&&g.lat<f.lat,K=v.lng>c.lng&&g.lng<f.lng;return k&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=pe(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(a,c){return a instanceof fe?a:new fe(a,c)}function de(a,c,f){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,f!==void 0&&(this.alt=+f)}de.prototype={equals:function(a,c){if(!a)return!1;a=ae(a);var f=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return f<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return et.distance(this,ae(a))},wrap:function(){return et.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,f=c/Math.cos(Math.PI/180*this.lat);return pe([this.lat-c,this.lng-f],[this.lat+c,this.lng+f])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function ae(a,c,f){return a instanceof de?a:N(a)&&typeof a[0]!="object"?a.length===3?new de(a[0],a[1],a[2]):a.length===2?new de(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new de(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new de(a,c,f)}var Fe={latLngToPoint:function(a,c){var f=this.projection.project(a),g=this.scale(c);return this.transformation._transform(f,g)},pointToLatLng:function(a,c){var f=this.scale(c),g=this.transformation.untransform(a,f);return this.projection.unproject(g)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,f=this.scale(a),g=this.transformation.transform(c.min,f),v=this.transformation.transform(c.max,f);return new ve(g,v)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?m(a.lng,this.wrapLng,!0):a.lng,f=this.wrapLat?m(a.lat,this.wrapLat,!0):a.lat,g=a.alt;return new de(f,c,g)},wrapLatLngBounds:function(a){var c=a.getCenter(),f=this.wrapLatLng(c),g=c.lat-f.lat,v=c.lng-f.lng;if(g===0&&v===0)return a;var k=a.getSouthWest(),K=a.getNorthEast(),W=new de(k.lat-g,k.lng-v),J=new de(K.lat-g,K.lng-v);return new fe(W,J)}},et=s({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var f=Math.PI/180,g=a.lat*f,v=c.lat*f,k=Math.sin((c.lat-a.lat)*f/2),K=Math.sin((c.lng-a.lng)*f/2),W=k*k+Math.cos(g)*Math.cos(v)*K*K,J=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*J}}),Cr=6378137,jt={R:Cr,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,f=this.MAX_LATITUDE,g=Math.max(Math.min(f,a.lat),-f),v=Math.sin(g*c);return new G(this.R*a.lng*c,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(a){var c=180/Math.PI;return new de((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=Cr*Math.PI;return new ve([-a,-a],[a,a])}()};function Vn(a,c,f,g){if(N(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=f,this._d=g}Vn.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new G((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function kn(a,c,f,g){return new Vn(a,c,f,g)}var wt=s({},et,{code:"EPSG:3857",projection:jt,transformation:function(){var a=.5/(Math.PI*jt.R);return kn(a,.5,-a,.5)}()}),vt=s({},wt,{code:"EPSG:900913"});function Ze(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function rn(a,c){var f="",g,v,k,K,W,J;for(g=0,k=a.length;g<k;g++){for(W=a[g],v=0,K=W.length;v<K;v++)J=W[v],f+=(v?"L":"M")+J.x+" "+J.y;f+=c?Ee.svg?"z":"x":""}return f||"M0 0"}var xt=document.documentElement.style,Sn="ActiveXObject"in window,Wi=Sn&&!document.addEventListener,$i="msLaunchUri"in navigator&&!("documentMode"in document),Zi=cr("webkit"),NA=cr("android"),Ji=cr("android 2")||cr("android 3"),ri=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ar=NA&&cr("Google")&&ri<537&&!("AudioNode"in window),Nt=!!window.opera,Jt=!$i&&cr("chrome"),Es=cr("gecko")&&!Zi&&!Nt&&!Sn,yo=!Jt&&cr("safari"),si=cr("phantom"),wo="OTransition"in xt,Is=navigator.platform.indexOf("Win")===0,lr=Sn&&"transition"in xt,Xi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ji,Yi="MozPerspective"in xt,bc=!window.L_DISABLE_3D&&(lr||Xi||Yi)&&!wo&&!si,Ts=typeof orientation<"u"||cr("mobile"),os=Ts&&Zi,ea=Ts&&Xi,vo=!window.PointerEvent&&window.MSPointerEvent,As=!!(window.PointerEvent||vo),ta="ontouchstart"in window||!!window.TouchEvent,ii=!window.L_NO_TOUCH&&(ta||As),Kn=Ts&&Nt,ai=Ts&&Es,na=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xo=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",p,c),window.removeEventListener("testPassiveEventSupport",p,c)}catch{}return a}(),ks=function(){return!!document.createElement("canvas").getContext}(),oi=!!(document.createElementNS&&Ze("svg").createSVGRect),sn=!!oi&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_o=!oi&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Ss=navigator.platform.indexOf("Mac")===0,Ai=navigator.platform.indexOf("Linux")===0;function cr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ee={ie:Sn,ielt9:Wi,edge:$i,webkit:Zi,android:NA,android23:Ji,androidStock:Ar,opera:Nt,chrome:Jt,gecko:Es,safari:yo,phantom:si,opera12:wo,win:Is,ie3d:lr,webkit3d:Xi,gecko3d:Yi,any3d:bc,mobile:Ts,mobileWebkit:os,mobileWebkit3d:ea,msPointer:vo,pointer:As,touch:ii,touchNative:ta,mobileOpera:Kn,mobileGecko:ai,retina:na,passiveEvents:xo,canvas:ks,svg:oi,vml:_o,inlineSvg:sn,mac:Ss,linux:Ai},zn=Ee.msPointer?"MSPointerDown":"pointerdown",UA=Ee.msPointer?"MSPointerMove":"pointermove",FA=Ee.msPointer?"MSPointerUp":"pointerup",Ns=Ee.msPointer?"MSPointerCancel":"pointercancel",ra={touchstart:zn,touchmove:UA,touchend:FA,touchcancel:Ns},Gn={touchstart:oa,touchmove:aa,touchend:aa,touchcancel:aa},ct={},zt=!1;function an(a,c,f){return c==="touchstart"&&QA(),Gn[c]?(f=Gn[c].bind(this,f),a.addEventListener(ra[c],f,!1),f):(console.warn("wrong event specified:",c),p)}function Bo(a,c,f){if(!ra[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(ra[c],f,!1)}function sa(a){ct[a.pointerId]=a}function ia(a){ct[a.pointerId]&&(ct[a.pointerId]=a)}function it(a){delete ct[a.pointerId]}function QA(){zt||(document.addEventListener(zn,sa,!0),document.addEventListener(UA,ia,!0),document.addEventListener(FA,it,!0),document.addEventListener(Ns,it,!0),zt=!0)}function aa(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var f in ct)c.touches.push(ct[f]);c.changedTouches=[c],a(c)}}function oa(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Ut(c),aa(a,c)}function PA(a){var c={},f,g;for(g in a)f=a[g],c[g]=f&&f.bind?f.bind(a):f;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var bo=200;function Us(a,c){a.addEventListener("dblclick",c);var f=0,g;function v(k){if(k.detail!==1){g=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var K=Ic(k);if(!(K.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!K.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var W=Date.now();W-f<=bo?(g++,g===2&&c(PA(k))):g=1,f=W}}}return a.addEventListener("click",v),{dblclick:c,simDblclick:v}}function ls(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var li=Or(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ci=Or(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Co=ci==="webkitTransition"||ci==="OTransition"?ci+"End":"transitionend";function Aa(a){return typeof a=="string"?document.getElementById(a):a}function Fs(a,c){var f=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!f||f==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(a,null);f=g?g[c]:null}return f==="auto"?null:f}function De(a,c,f){var g=document.createElement(a);return g.className=c||"",f&&f.appendChild(g),g}function at(a){var c=a.parentNode;c&&c.removeChild(a)}function qn(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Se(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function cs(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function la(a,c){if(a.classList!==void 0)return a.classList.contains(c);var f=Wn(a);return f.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(f)}function Pe(a,c){if(a.classList!==void 0)for(var f=b(c),g=0,v=f.length;g<v;g++)a.classList.add(f[g]);else if(!la(a,c)){var k=Wn(a);ca(a,(k?k+" ":"")+c)}}function mt(a,c){a.classList!==void 0?a.classList.remove(c):ca(a,C((" "+Wn(a)+" ").replace(" "+c+" "," ")))}function ca(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function Wn(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function _t(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&ui(a,c)}function ui(a,c){var f=!1,g="DXImageTransform.Microsoft.Alpha";try{f=a.filters.item(g)}catch{if(c===1)return}c=Math.round(c*100),f?(f.Enabled=c!==100,f.Opacity=c):a.style.filter+=" progid:"+g+"(opacity="+c+")"}function Or(a){for(var c=document.documentElement.style,f=0;f<a.length;f++)if(a[f]in c)return a[f];return!1}function Er(a,c,f){var g=c||new G(0,0);a.style[li]=(Ee.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(f?" scale("+f+")":"")}function Q(a,c){a._leaflet_pos=c,Ee.any3d?Er(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function q(a){return a._leaflet_pos||new G(0,0)}var te,we,Le;if("onselectstart"in document)te=function(){Ne(window,"selectstart",Ut)},we=function(){ut(window,"selectstart",Ut)};else{var Je=Or(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);te=function(){if(Je){var a=document.documentElement.style;Le=a[Je],a[Je]="none"}},we=function(){Je&&(document.documentElement.style[Je]=Le,Le=void 0)}}function Me(){Ne(window,"dragstart",Ut)}function mn(){ut(window,"dragstart",Ut)}var on,ua;function us(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&($n(),on=a,ua=a.style.outlineStyle,a.style.outlineStyle="none",Ne(window,"keydown",$n))}function $n(){on&&(on.style.outlineStyle=ua,on=void 0,ua=void 0,ut(window,"keydown",$n))}function Eo(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function di(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var rh={__proto__:null,TRANSFORM:li,TRANSITION:ci,TRANSITION_END:Co,get:Aa,getStyle:Fs,create:De,remove:at,empty:qn,toFront:Se,toBack:cs,hasClass:la,addClass:Pe,removeClass:mt,setClass:ca,getClass:Wn,setOpacity:_t,testProp:Or,setTransform:Er,setPosition:Q,getPosition:q,get disableTextSelection(){return te},get enableTextSelection(){return we},disableImageDrag:Me,enableImageDrag:mn,preventOutline:us,restoreOutline:$n,getSizedParentNode:Eo,getScale:di};function Ne(a,c,f,g){if(c&&typeof c=="object")for(var v in c)Cc(a,v,c[v],f);else{c=b(c);for(var k=0,K=c.length;k<K;k++)Cc(a,c[k],f,g)}return this}var Hr="_leaflet_events";function ut(a,c,f,g){if(arguments.length===1)sh(a),delete a[Hr];else if(c&&typeof c=="object")for(var v in c)Ec(a,v,c[v],f);else if(c=b(c),arguments.length===2)sh(a,function(W){return H(c,W)!==-1});else for(var k=0,K=c.length;k<K;k++)Ec(a,c[k],f,g);return this}function sh(a,c){for(var f in a[Hr]){var g=f.split(/\d/)[0];(!c||c(g))&&Ec(a,g,null,null,f)}}var Vr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cc(a,c,f,g){var v=c+u(f)+(g?"_"+u(g):"");if(a[Hr]&&a[Hr][v])return this;var k=function(W){return f.call(g||a,W||window.event)},K=k;!Ee.touchNative&&Ee.pointer&&c.indexOf("touch")===0?k=an(a,c,k):Ee.touch&&c==="dblclick"?k=Us(a,k):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(Vr[c]||c,k,Ee.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(k=function(W){W=W||window.event,Tc(a,W)&&K(W)},a.addEventListener(Vr[c],k,!1)):a.addEventListener(c,K,!1):a.attachEvent("on"+c,k),a[Hr]=a[Hr]||{},a[Hr][v]=k}function Ec(a,c,f,g,v){v=v||c+u(f)+(g?"_"+u(g):"");var k=a[Hr]&&a[Hr][v];if(!k)return this;!Ee.touchNative&&Ee.pointer&&c.indexOf("touch")===0?Bo(a,c,k):Ee.touch&&c==="dblclick"?ls(a,k):"removeEventListener"in a?a.removeEventListener(Vr[c]||c,k,!1):a.detachEvent("on"+c,k),a[Hr][v]=null}function Kr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function da(a){return Cc(a,"wheel",Kr),this}function ha(a){return Ne(a,"mousedown touchstart dblclick contextmenu",Kr),a._leaflet_disable_click=!0,this}function Ut(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Ir(a){return Ut(a),Kr(a),this}function Ic(a){if(a.composedPath)return a.composedPath();for(var c=[],f=a.target;f;)c.push(f),f=f.parentNode;return c}function RA(a,c){if(!c)return new G(a.clientX,a.clientY);var f=di(c),g=f.boundingClientRect;return new G((a.clientX-g.left)/f.x-c.clientLeft,(a.clientY-g.top)/f.y-c.clientTop)}var Ct=Ee.linux&&Ee.chrome?window.devicePixelRatio:Ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ih(a){return Ee.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Ct:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Tc(a,c){var f=c.relatedTarget;if(!f)return!0;try{for(;f&&f!==a;)f=f.parentNode}catch{return!1}return f!==a}var ah={__proto__:null,on:Ne,off:ut,stopPropagation:Kr,disableScrollPropagation:da,disableClickPropagation:ha,preventDefault:Ut,stop:Ir,getPropagationPath:Ic,getMousePosition:RA,getWheelDelta:ih,isExternalTarget:Tc,addListener:Ne,removeListener:ut},kc=me.extend({run:function(a,c,f,g){this.stop(),this._el=a,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=q(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,f=this._duration*1e3;c<f?this._runFrame(this._easeOut(c/f),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var f=this._startPos.add(this._offset.multiplyBy(a));c&&f._round(),Q(this._el,f),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Ke=me.extend({options:{crs:wt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=x(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ae(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ci&&Ee.any3d&&!Ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,Co,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,f){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(ae(a),c,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=s({animate:f.animate},f.zoom),f.pan=s({animate:f.animate,duration:f.duration},f.pan));var g=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,f.zoom):this._tryAnimatedPan(a,f.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,f.pan&&f.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,f){var g=this.getZoomScale(c),v=this.getSize().divideBy(2),k=a instanceof G?a:this.latLngToContainerPoint(a),K=k.subtract(v).multiplyBy(1-1/g),W=this.containerPointToLatLng(v.add(K));return this.setView(W,c,{zoom:f})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():pe(a);var f=Y(c.paddingTopLeft||c.padding||[0,0]),g=Y(c.paddingBottomRight||c.padding||[0,0]),v=this.getBoundsZoom(a,!1,f.add(g));if(v=typeof c.maxZoom=="number"?Math.min(c.maxZoom,v):v,v===1/0)return{center:a.getCenter(),zoom:v};var k=g.subtract(f).divideBy(2),K=this.project(a.getSouthWest(),v),W=this.project(a.getNorthEast(),v),J=this.unproject(K.add(W).divideBy(2).add(k),v);return{center:J,zoom:v}},fitBounds:function(a,c){if(a=pe(a),!a.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(a,c);return this.setView(f.center,f.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=Y(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Pe(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,f,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,f){if(f=f||{},f.animate===!1||!Ee.any3d)return this.setView(a,c,f);this._stop();var g=this.project(this.getCenter()),v=this.project(a),k=this.getSize(),K=this._zoom;a=ae(a),c=c===void 0?K:c;var W=Math.max(k.x,k.y),J=W*this.getZoomScale(K,c),ne=v.distanceTo(g)||1,xe=1.42,Ue=xe*xe;function Oe(Yt){var _h=Yt?-1:1,UF=Yt?J:W,FF=J*J-W*W+_h*Ue*Ue*ne*ne,QF=2*UF*Ue*ne,Np=FF/QF,eB=Math.sqrt(Np*Np+1)-Np,PF=eB<1e-9?-18:Math.log(eB);return PF}function Jn(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function pn(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}function Gr(Yt){return Jn(Yt)/pn(Yt)}var dr=Oe(0);function $A(Yt){return W*(pn(dr)/pn(dr+xe*Yt))}function TF(Yt){return W*(pn(dr)*Gr(dr+xe*Yt)-Jn(dr))/Ue}function kF(Yt){return 1-Math.pow(1-Yt,1.5)}var SF=Date.now(),X_=(Oe(1)-dr)/xe,NF=f.duration?1e3*f.duration:1e3*X_*.8;function Y_(){var Yt=(Date.now()-SF)/NF,_h=kF(Yt)*X_;Yt<=1?(this._flyToFrame=D(Y_,this),this._move(this.unproject(g.add(v.subtract(g).multiplyBy(TF(_h)/ne)),K),this.getScaleZoom(W/$A(_h),K),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Y_.call(this),this},flyToBounds:function(a,c){var f=this._getBoundsCenterZoom(a,c);return this.flyTo(f.center,f.zoom,c)},setMaxBounds:function(a){return a=pe(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var f=this.getCenter(),g=this._limitCenter(f,this._zoom,pe(a));return f.equals(g)||this.panTo(g,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var f=Y(c.paddingTopLeft||c.padding||[0,0]),g=Y(c.paddingBottomRight||c.padding||[0,0]),v=this.project(this.getCenter()),k=this.project(a),K=this.getPixelBounds(),W=ue([K.min.add(f),K.max.subtract(g)]),J=W.getSize();if(!W.contains(k)){this._enforcingBounds=!0;var ne=k.subtract(W.getCenter()),xe=W.extend(k).getSize().subtract(J);v.x+=ne.x<0?-xe.x:xe.x,v.y+=ne.y<0?-xe.y:xe.y,this.panTo(this.unproject(v),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),g=c.divideBy(2).round(),v=f.divideBy(2).round(),k=g.subtract(v);return!k.x&&!k.y?this:(a.animate&&a.pan?this.panBy(k):(a.pan&&this._rawPanBy(k),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,f,a):navigator.geolocation.getCurrentPosition(c,f,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,f=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,f=a.coords.longitude,g=new de(c,f),v=g.toBounds(a.coords.accuracy*2),k=this._locateOptions;if(k.setView){var K=this.getBoundsZoom(v);this.setView(g,k.maxZoom?Math.min(K,k.maxZoom):K)}var W={latlng:g,bounds:v,timestamp:a.timestamp};for(var J in a.coords)typeof a.coords[J]=="number"&&(W[J]=a.coords[J]);this.fire("locationfound",W)}},addHandler:function(a,c){if(!c)return this;var f=this[a]=new c(this);return this._handlers.push(f),this.options[a]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),at(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)at(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var f="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),g=De("div",f,c||this._mapPane);return a&&(this._panes[a]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),f=this.unproject(a.getTopRight());return new fe(c,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,f){a=pe(a),f=Y(f||[0,0]);var g=this.getZoom()||0,v=this.getMinZoom(),k=this.getMaxZoom(),K=a.getNorthWest(),W=a.getSouthEast(),J=this.getSize().subtract(f),ne=ue(this.project(W,g),this.project(K,g)).getSize(),xe=Ee.any3d?this.options.zoomSnap:1,Ue=J.x/ne.x,Oe=J.y/ne.y,Jn=c?Math.max(Ue,Oe):Math.min(Ue,Oe);return g=this.getScaleZoom(Jn,g),xe&&(g=Math.round(g/(xe/100))*(xe/100),g=c?Math.ceil(g/xe)*xe:Math.floor(g/xe)*xe),Math.max(v,Math.min(k,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var f=this._getTopLeftPoint(a,c);return new ve(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var f=this.options.crs;return c=c===void 0?this._zoom:c,f.scale(a)/f.scale(c)},getScaleZoom:function(a,c){var f=this.options.crs;c=c===void 0?this._zoom:c;var g=f.zoom(a*f.scale(c));return isNaN(g)?1/0:g},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ae(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Y(a),c)},layerPointToLatLng:function(a){var c=Y(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(ae(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ae(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(pe(a))},distance:function(a,c){return this.options.crs.distance(ae(a),ae(c))},containerPointToLayerPoint:function(a){return Y(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Y(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(Y(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(a)))},mouseEventToContainerPoint:function(a){return RA(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=Aa(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ne(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ee.any3d,Pe(a,"leaflet-container"+(Ee.touch?" leaflet-touch":"")+(Ee.retina?" leaflet-retina":"")+(Ee.ielt9?" leaflet-oldie":"")+(Ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Fs(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Q(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pe(a.markerPane,"leaflet-zoom-hide"),Pe(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,f){Q(this._mapPane,new G(0,0));var g=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var v=this._zoom!==c;this._moveStart(v,f)._move(a,c)._moveEnd(v),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,f,g){c===void 0&&(c=this._zoom);var v=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),g?f&&f.pinch&&this.fire("zoom",f):((v||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Q(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[u(this._container)]=this;var c=a?ut:Ne;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ee.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var f=[],g,v=c==="mouseout"||c==="mouseover",k=a.target||a.srcElement,K=!1;k;){if(g=this._targets[u(k)],g&&(c==="click"||c==="preclick")&&this._draggableMoved(g)){K=!0;break}if(g&&g.listens(c,!0)&&(v&&!Tc(k,a)||(f.push(g),v))||k===this._container)break;k=k.parentNode}return!f.length&&!K&&!v&&this.listens(c,!0)&&(f=[this]),f},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var f=a.type;f==="mousedown"&&us(c),this._fireDOMEvent(a,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,f){if(a.type==="click"){var g=s({},a);g.type="preclick",this._fireDOMEvent(g,g.type,f)}var v=this._findEventTargets(a,c);if(f){for(var k=[],K=0;K<f.length;K++)f[K].listens(c,!0)&&k.push(f[K]);v=k.concat(v)}if(v.length){c==="contextmenu"&&Ut(a);var W=v[0],J={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ne=W.getLatLng&&(!W._radius||W._radius<=10);J.containerPoint=ne?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(a),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ne?W.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(K=0;K<v.length;K++)if(v[K].fire(c,J,!0),J.originalEvent._stopped||v[K].options.bubblingMouseEvents===!1&&H(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return q(this._mapPane)||new G(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var f=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var f=this.getSize()._divideBy(2);return this.project(a,c)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,f){var g=this._getNewPixelOrigin(f,c);return this.project(a,c)._subtract(g)},_latLngBoundsToNewLayerBounds:function(a,c,f){var g=this._getNewPixelOrigin(f,c);return ue([this.project(a.getSouthWest(),c)._subtract(g),this.project(a.getNorthWest(),c)._subtract(g),this.project(a.getSouthEast(),c)._subtract(g),this.project(a.getNorthEast(),c)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,f){if(!f)return a;var g=this.project(a,c),v=this.getSize().divideBy(2),k=new ve(g.subtract(v),g.add(v)),K=this._getBoundsOffset(k,f,c);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?a:this.unproject(g.add(K),c)},_limitOffset:function(a,c){if(!c)return a;var f=this.getPixelBounds(),g=new ve(f.min.add(a),f.max.add(a));return a.add(this._getBoundsOffset(g,c))},_getBoundsOffset:function(a,c,f){var g=ue(this.project(c.getNorthEast(),f),this.project(c.getSouthWest(),f)),v=g.min.subtract(a.min),k=g.max.subtract(a.max),K=this._rebound(v.x,-k.x),W=this._rebound(v.y,-k.y);return new G(K,W)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),f=this.getMaxZoom(),g=Ee.any3d?this.options.zoomSnap:1;return g&&(a=Math.round(a/g)*g),Math.max(c,Math.min(f,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var f=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,c),!0)},_createAnimProxy:function(){var a=this._proxy=De("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var f=li,g=this._proxy.style[f];Er(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),g===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){at(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();Er(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(c),v=this._getCenterOffset(a)._divideBy(1-1/g);return f.animate!==!0&&!this.getSize().contains(v)?!1:(D(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,f,g){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,Pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function LA(a,c){return new Ke(a,c)}var ur=Z.extend({options:{position:"topright"},initialize:function(a){x(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),f=this.getPosition(),g=a._controlCorners[f];return Pe(c,"leaflet-control"),f.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(at(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Zn=function(a){return new ur(a)};Ke.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",f=this._controlContainer=De("div",c+"control-container",this._container);function g(v,k){var K=c+v+" "+c+k;a[v+k]=De("div",K,f)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)at(this._controlCorners[a]);at(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Sc=ur.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,f,g){return f<g?-1:g<f?1:0}},initialize:function(a,c,f){x(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in a)this._addLayer(a[g],g);for(g in c)this._addLayer(c[g],g,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ur.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=De("div",a),f=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ha(c),da(c);var g=this._section=De("section",a+"-list");f&&(this._map.on("click",this.collapse,this),Ne(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=De("a",a+"-toggle",c);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ne(v,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Ut(k),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=De("div",a+"-base",g),this._separator=De("div",a+"-separator",g),this._overlaysList=De("div",a+"-overlays",g),c.appendChild(g)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,f){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(g,v){return this.options.sortFunction(g.layer,v.layer,g.name,v.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;qn(this._baseLayersList),qn(this._overlaysList),this._layerControlInputs=[];var a,c,f,g,v=0;for(f=0;f<this._layers.length;f++)g=this._layers[f],this._addItem(g),c=c||g.overlay,a=a||!g.overlay,v+=g.overlay?0:1;return this.options.hideSingleBase&&(a=a&&v>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(u(a.target)),f=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;f&&this._map.fire(f,c)},_createRadioElement:function(a,c){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=f,g.firstChild},_addItem:function(a){var c=document.createElement("label"),f=this._map.hasLayer(a.layer),g;a.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=f):g=this._createRadioElement("leaflet-base-layers_"+u(this),f),this._layerControlInputs.push(g),g.layerId=u(a.layer),Ne(g,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+a.name;var k=document.createElement("span");c.appendChild(k),k.appendChild(g),k.appendChild(v);var K=a.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,f,g=[],v=[];this._handlingClick=!0;for(var k=a.length-1;k>=0;k--)c=a[k],f=this._getLayer(c.layerId).layer,c.checked?g.push(f):c.checked||v.push(f);for(k=0;k<v.length;k++)this._map.hasLayer(v[k])&&this._map.removeLayer(v[k]);for(k=0;k<g.length;k++)this._map.hasLayer(g[k])||this._map.addLayer(g[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,f,g=this._map.getZoom(),v=a.length-1;v>=0;v--)c=a[v],f=this._getLayer(c.layerId).layer,c.disabled=f.options.minZoom!==void 0&&g<f.options.minZoom||f.options.maxZoom!==void 0&&g>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ne(a,"click",Ut),this.expand();var c=this;setTimeout(function(){ut(a,"click",Ut),c._preventClick=!1})}}),Cp=function(a,c,f){return new Sc(a,c,f)},hi=ur.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",f=De("div",c+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,c+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,c+"-out",f,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,f,g,v){var k=De("a",f,g);return k.innerHTML=a,k.href="#",k.title=c,k.setAttribute("role","button"),k.setAttribute("aria-label",c),ha(k),Ne(k,"click",Ir),Ne(k,"click",v,this),Ne(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";mt(this._zoomInButton,c),mt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Pe(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Pe(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ke.mergeOptions({zoomControl:!0}),Ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hi,this.addControl(this.zoomControl))});var oh=function(a){return new hi(a)},jA=ur.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",f=De("div",c),g=this.options;return this._addScales(g,c+"-line",f),a.on(g.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),f},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,f){a.metric&&(this._mScale=De("div",c,f)),a.imperial&&(this._iScale=De("div",c,f))},_update:function(){var a=this._map,c=a.getSize().y/2,f=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(f)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),f=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,f,c/a)},_updateImperial:function(a){var c=a*3.2808399,f,g,v;c>5280?(f=c/5280,g=this._getRoundNum(f),this._updateScale(this._iScale,g+" mi",g/f)):(v=this._getRoundNum(c),this._updateScale(this._iScale,v+" ft",v/c))},_updateScale:function(a,c,f){a.style.width=Math.round(this.options.maxWidth*f)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),f=a/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,c*f}}),DA=function(a){return new jA(a)},Ah='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fa=ur.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ee.inlineSvg?Ah+" ":"")+"Leaflet</a>"},initialize:function(a){x(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=De("div","leaflet-control-attribution"),ha(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var f=[];this.options.prefix&&f.push(this.options.prefix),a.length&&f.push(a.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Ke.mergeOptions({attributionControl:!0}),Ke.addInitHook(function(){this.options.attributionControl&&new fa().addTo(this)});var Ep=function(a){return new fa(a)};ur.Layers=Sc,ur.Zoom=hi,ur.Scale=jA,ur.Attribution=fa,Zn.layers=Cp,Zn.zoom=oh,Zn.scale=DA,Zn.attribution=Ep;var Tr=Z.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tr.addTo=function(a,c){return a.addHandler(c,this),this};var Io={Events:Ae},Nc=Ee.touch?"touchstart mousedown":"mousedown",ds=me.extend({options:{clickTolerance:3},initialize:function(a,c,f,g){x(this,g),this._element=a,this._dragStartTarget=c||a,this._preventOutline=f},enable:function(){this._enabled||(Ne(this._dragStartTarget,Nc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ds._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,Nc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!la(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){ds._dragging===this&&this.finishDrag();return}if(!(ds._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(ds._dragging=this,this._preventOutline&&us(this._element),Me(),te(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,f=Eo(this._element);this._startPoint=new G(c.clientX,c.clientY),this._startPos=q(this._element),this._parentScale=di(f);var g=a.type==="mousedown";Ne(document,g?"mousemove":"touchmove",this._onMove,this),Ne(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,f=new G(c.clientX,c.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Ut(a),this._moved||(this.fire("dragstart"),this._moved=!0,Pe(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Q(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),mn(),we();var c=this._moved&&this._moving;this._moving=!1,ds._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function MA(a,c,f){var g,v=[1,4,2,8],k,K,W,J,ne,xe,Ue,Oe;for(k=0,xe=a.length;k<xe;k++)a[k]._code=Qs(a[k],c);for(W=0;W<4;W++){for(Ue=v[W],g=[],k=0,xe=a.length,K=xe-1;k<xe;K=k++)J=a[k],ne=a[K],J._code&Ue?ne._code&Ue||(Oe=gn(ne,J,Ue,c,f),Oe._code=Qs(Oe,c),g.push(Oe)):(ne._code&Ue&&(Oe=gn(ne,J,Ue,c,f),Oe._code=Qs(Oe,c),g.push(Oe)),g.push(J));a=g}return a}function OA(a,c){var f,g,v,k,K,W,J,ne,xe;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ue=ae([0,0]),Oe=pe(a),Jn=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());Jn<1700&&(Ue=HA(a));var pn=a.length,Gr=[];for(f=0;f<pn;f++){var dr=ae(a[f]);Gr.push(c.project(ae([dr.lat-Ue.lat,dr.lng-Ue.lng])))}for(W=J=ne=0,f=0,g=pn-1;f<pn;g=f++)v=Gr[f],k=Gr[g],K=v.y*k.x-k.y*v.x,J+=(v.x+k.x)*K,ne+=(v.y+k.y)*K,W+=K*3;W===0?xe=Gr[0]:xe=[J/W,ne/W];var $A=c.unproject(Y(xe));return ae([$A.lat+Ue.lat,$A.lng+Ue.lng])}function HA(a){for(var c=0,f=0,g=0,v=0;v<a.length;v++){var k=ae(a[v]);c+=k.lat,f+=k.lng,g++}return ae([c/g,f/g])}var VA={__proto__:null,clipPolygon:MA,polygonCenter:OA,centroid:HA};function Uc(a,c){if(!c||!a.length)return a.slice();var f=c*c;return a=ch(a,f),a=lh(a,f),a}function Fc(a,c,f){return Math.sqrt(zr(a,c,f,!0))}function fi(a,c,f){return zr(a,c,f)}function lh(a,c){var f=a.length,g=typeof Uint8Array<"u"?Uint8Array:Array,v=new g(f);v[0]=v[f-1]=1,KA(a,v,c,0,f-1);var k,K=[];for(k=0;k<f;k++)v[k]&&K.push(a[k]);return K}function KA(a,c,f,g,v){var k=0,K,W,J;for(W=g+1;W<=v-1;W++)J=zr(a[W],a[g],a[v],!0),J>k&&(K=W,k=J);k>f&&(c[K]=1,KA(a,c,f,g,K),KA(a,c,f,K,v))}function ch(a,c){for(var f=[a[0]],g=1,v=0,k=a.length;g<k;g++)uh(a[g],a[v])>c&&(f.push(a[g]),v=g);return v<k-1&&f.push(a[k-1]),f}var Qc;function To(a,c,f,g,v){var k=g?Qc:Qs(a,f),K=Qs(c,f),W,J,ne;for(Qc=K;;){if(!(k|K))return[a,c];if(k&K)return!1;W=k||K,J=gn(a,c,W,f,v),ne=Qs(J,f),W===k?(a=J,k=ne):(c=J,K=ne)}}function gn(a,c,f,g,v){var k=c.x-a.x,K=c.y-a.y,W=g.min,J=g.max,ne,xe;return f&8?(ne=a.x+k*(J.y-a.y)/K,xe=J.y):f&4?(ne=a.x+k*(W.y-a.y)/K,xe=W.y):f&2?(ne=J.x,xe=a.y+K*(J.x-a.x)/k):f&1&&(ne=W.x,xe=a.y+K*(W.x-a.x)/k),new G(ne,xe,v)}function Qs(a,c){var f=0;return a.x<c.min.x?f|=1:a.x>c.max.x&&(f|=2),a.y<c.min.y?f|=4:a.y>c.max.y&&(f|=8),f}function uh(a,c){var f=c.x-a.x,g=c.y-a.y;return f*f+g*g}function zr(a,c,f,g){var v=c.x,k=c.y,K=f.x-v,W=f.y-k,J=K*K+W*W,ne;return J>0&&(ne=((a.x-v)*K+(a.y-k)*W)/J,ne>1?(v=f.x,k=f.y):ne>0&&(v+=K*ne,k+=W*ne)),K=a.x-v,W=a.y-k,g?K*K+W*W:new G(v,k)}function d(a){return!N(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function y(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(a)}function _(a,c){var f,g,v,k,K,W,J,ne;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var xe=ae([0,0]),Ue=pe(a),Oe=Ue.getNorthWest().distanceTo(Ue.getSouthWest())*Ue.getNorthEast().distanceTo(Ue.getNorthWest());Oe<1700&&(xe=HA(a));var Jn=a.length,pn=[];for(f=0;f<Jn;f++){var Gr=ae(a[f]);pn.push(c.project(ae([Gr.lat-xe.lat,Gr.lng-xe.lng])))}for(f=0,g=0;f<Jn-1;f++)g+=pn[f].distanceTo(pn[f+1])/2;if(g===0)ne=pn[0];else for(f=0,k=0;f<Jn-1;f++)if(K=pn[f],W=pn[f+1],v=K.distanceTo(W),k+=v,k>g){J=(k-g)/v,ne=[W.x-J*(W.x-K.x),W.y-J*(W.y-K.y)];break}var dr=c.unproject(Y(ne));return ae([dr.lat+xe.lat,dr.lng+xe.lng])}var F={__proto__:null,simplify:Uc,pointToSegmentDistance:Fc,closestPointOnSegment:fi,clipSegment:To,_getEdgeIntersection:gn,_getBitCode:Qs,_sqClosestPointOnSegment:zr,isFlat:d,_flat:y,polylineCenter:_},z={project:function(a){return new G(a.lng,a.lat)},unproject:function(a){return new de(a.y,a.x)},bounds:new ve([-180,-90],[180,90])},X={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,f=this.R,g=a.lat*c,v=this.R_MINOR/f,k=Math.sqrt(1-v*v),K=k*Math.sin(g),W=Math.tan(Math.PI/4-g/2)/Math.pow((1-K)/(1+K),k/2);return g=-f*Math.log(Math.max(W,1e-10)),new G(a.lng*c*f,g)},unproject:function(a){for(var c=180/Math.PI,f=this.R,g=this.R_MINOR/f,v=Math.sqrt(1-g*g),k=Math.exp(-a.y/f),K=Math.PI/2-2*Math.atan(k),W=0,J=.1,ne;W<15&&Math.abs(J)>1e-7;W++)ne=v*Math.sin(K),ne=Math.pow((1-ne)/(1+ne),v/2),J=Math.PI/2-2*Math.atan(k*ne)-K,K+=J;return new de(K*c,a.x*c/f)}},le={__proto__:null,LonLat:z,Mercator:X,SphericalMercator:jt},ot=s({},et,{code:"EPSG:3395",projection:X,transformation:function(){var a=.5/(Math.PI*X.R);return kn(a,.5,-a,.5)}()}),Xt=s({},et,{code:"EPSG:4326",projection:z,transformation:kn(1/180,1,-1/180,.5)}),Xe=s({},Fe,{projection:z,transformation:kn(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var f=c.lng-a.lng,g=c.lat-a.lat;return Math.sqrt(f*f+g*g)},infinite:!0});Fe.Earth=et,Fe.EPSG3395=ot,Fe.EPSG3857=wt,Fe.EPSG900913=vt,Fe.EPSG4326=Xt,Fe.Simple=Xe;var dt=me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[u(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[u(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var f=this.getEvents();c.on(f,this),this.once("remove",function(){c.off(f,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ke.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=u(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return u(a)in this._layers},eachLayer:function(a,c){for(var f in this._layers)a.call(c,this._layers[f]);return this},_addLayers:function(a){a=a?N(a)?a:[a]:[];for(var c=0,f=a.length;c<f;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[u(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=u(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,f=this._getZoomSpan();for(var g in this._zoomBoundLayers){var v=this._zoomBoundLayers[g].options;a=v.minZoom===void 0?a:Math.min(a,v.minZoom),c=v.maxZoom===void 0?c:Math.max(c,v.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ft=dt.extend({initialize:function(a,c){x(this,c),this._layers={};var f,g;if(a)for(f=0,g=a.length;f<g;f++)this.addLayer(a[f])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),f,g;for(f in this._layers)g=this._layers[f],g[a]&&g[a].apply(g,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var f in this._layers)a.call(c,this._layers[f]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return u(a)}}),ma=function(a,c){return new Ft(a,c)},Gt=Ft.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Ft.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Ft.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new fe;for(var c in this._layers){var f=this._layers[c];a.extend(f.getBounds?f.getBounds():f.getLatLng())}return a}}),zA=function(a,c){return new Gt(a,c)},Ps=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){x(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var f=this._getIconUrl(a);if(!f){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(f,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(g,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(a,c){var f=this.options,g=f[c+"Size"];typeof g=="number"&&(g=[g,g]);var v=Y(g),k=Y(c==="shadow"&&f.shadowAnchor||f.iconAnchor||v&&v.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(f.className||""),k&&(a.style.marginLeft=-k.x+"px",a.style.marginTop=-k.y+"px"),v&&(a.style.width=v.x+"px",a.style.height=v.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return Ee.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function lF(a){return new Ps(a)}var Pc=Ps.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Pc.imagePath!="string"&&(Pc.imagePath=this._detectIconPath()),(this.options.imagePath||Pc.imagePath)+Ps.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(f,g,v){var k=g.exec(f);return k&&k[v]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=De("div","leaflet-default-icon-path",document.body),c=Fs(a,"background-image")||Fs(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),F_=Tr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new ds(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pe(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,f=c._map,g=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,k=q(c._icon),K=f.getPixelBounds(),W=f.getPixelOrigin(),J=ue(K.min._subtract(W).add(v),K.max._subtract(W).subtract(v));if(!J.contains(k)){var ne=Y((Math.max(J.max.x,k.x)-J.max.x)/(K.max.x-J.max.x)-(Math.min(J.min.x,k.x)-J.min.x)/(K.min.x-J.min.x),(Math.max(J.max.y,k.y)-J.max.y)/(K.max.y-J.max.y)-(Math.min(J.min.y,k.y)-J.min.y)/(K.min.y-J.min.y)).multiplyBy(g);f.panBy(ne,{animate:!1}),this._draggable._newPos._add(ne),this._draggable._startPos._add(ne),Q(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=D(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,f=c._shadow,g=q(c._icon),v=c._map.layerPointToLatLng(g);f&&Q(f,g),c._latlng=v,a.latlng=v,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),dh=dt.extend({options:{icon:new Pc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){x(this,c),this._latlng=ae(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=ae(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=a.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(f.title=a.title),f.tagName==="IMG"&&(f.alt=a.alt||"")),Pe(f,c),a.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(f,"focus",this._panOnFocus,this);var v=a.icon.createShadow(this._shadow),k=!1;v!==this._shadow&&(this._removeShadow(),k=!0),v&&(Pe(v,c),v.alt=""),this._shadow=v,a.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&k&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),at(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&at(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Q(this._icon,a),this._shadow&&Q(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),F_)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new F_(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&_t(this._icon,a),this._shadow&&_t(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,f=c.iconSize?Y(c.iconSize):Y(0,0),g=c.iconAnchor?Y(c.iconAnchor):Y(0,0);a.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:f.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cF(a,c){return new dh(a,c)}var ga=dt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return x(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hh=ga.extend({options:{fill:!0,radius:10},initialize:function(a,c){x(this,c),this._latlng=ae(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=ae(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return ga.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,f=this._clickTolerance(),g=[a+f,c+f];this._pxBounds=new ve(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function uF(a,c){return new hh(a,c)}var Ip=hh.extend({initialize:function(a,c,f){if(typeof c=="number"&&(c=s({},f,{radius:c})),x(this,c),this._latlng=ae(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:ga.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,f=this._map,g=f.options.crs;if(g.distance===et.distance){var v=Math.PI/180,k=this._mRadius/et.R/v,K=f.project([c+k,a]),W=f.project([c-k,a]),J=K.add(W).divideBy(2),ne=f.unproject(J).lat,xe=Math.acos((Math.cos(k*v)-Math.sin(c*v)*Math.sin(ne*v))/(Math.cos(c*v)*Math.cos(ne*v)))/v;(isNaN(xe)||xe===0)&&(xe=k/Math.cos(Math.PI/180*c)),this._point=J.subtract(f.getPixelOrigin()),this._radius=isNaN(xe)?0:J.x-f.project([ne,a-xe]).x,this._radiusY=J.y-K.y}else{var Ue=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Ue).x}this._updateBounds()}});function dF(a,c,f){return new Ip(a,c,f)}var mi=ga.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){x(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,f=null,g=zr,v,k,K=0,W=this._parts.length;K<W;K++)for(var J=this._parts[K],ne=1,xe=J.length;ne<xe;ne++){v=J[ne-1],k=J[ne];var Ue=g(a,v,k,!0);Ue<c&&(c=Ue,f=g(a,v,k))}return f&&(f.distance=Math.sqrt(c)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=ae(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new fe,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],f=d(a),g=0,v=a.length;g<v;g++)f?(c[g]=ae(a[g]),this._bounds.extend(c[g])):c[g]=this._convertLatLngs(a[g]);return c},_project:function(){var a=new ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new G(a,a);this._rawPxBounds&&(this._pxBounds=new ve([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,f){var g=a[0]instanceof de,v=a.length,k,K;if(g){for(K=[],k=0;k<v;k++)K[k]=this._map.latLngToLayerPoint(a[k]),f.extend(K[k]);c.push(K)}else for(k=0;k<v;k++)this._projectLatlngs(a[k],c,f)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,f,g,v,k,K,W,J;for(f=0,v=0,k=this._rings.length;f<k;f++)for(J=this._rings[f],g=0,K=J.length;g<K-1;g++)W=To(J[g],J[g+1],a,g,!0),W&&(c[v]=c[v]||[],c[v].push(W[0]),(W[1]!==J[g+1]||g===K-2)&&(c[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,f=0,g=a.length;f<g;f++)a[f]=Uc(a[f],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var f,g,v,k,K,W,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(f=0,k=this._parts.length;f<k;f++)for(W=this._parts[f],g=0,K=W.length,v=K-1;g<K;v=g++)if(!(!c&&g===0)&&Fc(a,W[v],W[g])<=J)return!0;return!1}});function hF(a,c){return new mi(a,c)}mi._flat=y;var GA=mi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return OA(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=mi.prototype._convertLatLngs.call(this,a),f=c.length;return f>=2&&c[0]instanceof de&&c[0].equals(c[f-1])&&c.pop(),c},_setLatLngs:function(a){mi.prototype._setLatLngs.call(this,a),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,f=new G(c,c);if(a=new ve(a.min.subtract(f),a.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,v=this._rings.length,k;g<v;g++)k=MA(this._rings[g],a,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,f,g,v,k,K,W,J,ne;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(k=0,J=this._parts.length;k<J;k++)for(f=this._parts[k],K=0,ne=f.length,W=ne-1;K<ne;W=K++)g=f[K],v=f[W],g.y>a.y!=v.y>a.y&&a.x<(v.x-g.x)*(a.y-g.y)/(v.y-g.y)+g.x&&(c=!c);return c||mi.prototype._containsPoint.call(this,a,!0)}});function fF(a,c){return new GA(a,c)}var gi=Gt.extend({initialize:function(a,c){x(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=N(a)?a:a.features,f,g,v;if(c){for(f=0,g=c.length;f<g;f++)v=c[f],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var k=this.options;if(k.filter&&!k.filter(a))return this;var K=fh(a,k);return K?(K.feature=ph(a),K.defaultOptions=K.options,this.resetStyle(K),k.onEachFeature&&k.onEachFeature(a,K),this.addLayer(K)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function fh(a,c){var f=a.type==="Feature"?a.geometry:a,g=f?f.coordinates:null,v=[],k=c&&c.pointToLayer,K=c&&c.coordsToLatLng||Tp,W,J,ne,xe;if(!g&&!f)return null;switch(f.type){case"Point":return W=K(g),Q_(k,a,W,c);case"MultiPoint":for(ne=0,xe=g.length;ne<xe;ne++)W=K(g[ne]),v.push(Q_(k,a,W,c));return new Gt(v);case"LineString":case"MultiLineString":return J=mh(g,f.type==="LineString"?0:1,K),new mi(J,c);case"Polygon":case"MultiPolygon":return J=mh(g,f.type==="Polygon"?1:2,K),new GA(J,c);case"GeometryCollection":for(ne=0,xe=f.geometries.length;ne<xe;ne++){var Ue=fh({geometry:f.geometries[ne],type:"Feature",properties:a.properties},c);Ue&&v.push(Ue)}return new Gt(v);case"FeatureCollection":for(ne=0,xe=f.features.length;ne<xe;ne++){var Oe=fh(f.features[ne],c);Oe&&v.push(Oe)}return new Gt(v);default:throw new Error("Invalid GeoJSON object.")}}function Q_(a,c,f,g){return a?a(c,f):new dh(f,g&&g.markersInheritOptions&&g)}function Tp(a){return new de(a[1],a[0],a[2])}function mh(a,c,f){for(var g=[],v=0,k=a.length,K;v<k;v++)K=c?mh(a[v],c-1,f):(f||Tp)(a[v]),g.push(K);return g}function kp(a,c){return a=ae(a),a.alt!==void 0?[w(a.lng,c),w(a.lat,c),w(a.alt,c)]:[w(a.lng,c),w(a.lat,c)]}function gh(a,c,f,g){for(var v=[],k=0,K=a.length;k<K;k++)v.push(c?gh(a[k],d(a[k])?0:c-1,f,g):kp(a[k],g));return!c&&f&&v.length>0&&v.push(v[0].slice()),v}function qA(a,c){return a.feature?s({},a.feature,{geometry:c}):ph(c)}function ph(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Sp={toGeoJSON:function(a){return qA(this,{type:"Point",coordinates:kp(this.getLatLng(),a)})}};dh.include(Sp),Ip.include(Sp),hh.include(Sp),mi.include({toGeoJSON:function(a){var c=!d(this._latlngs),f=gh(this._latlngs,c?1:0,!1,a);return qA(this,{type:(c?"Multi":"")+"LineString",coordinates:f})}}),GA.include({toGeoJSON:function(a){var c=!d(this._latlngs),f=c&&!d(this._latlngs[0]),g=gh(this._latlngs,f?2:c?1:0,!0,a);return c||(g=[g]),qA(this,{type:(f?"Multi":"")+"Polygon",coordinates:g})}}),Ft.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(f){c.push(f.toGeoJSON(a).geometry.coordinates)}),qA(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var f=c==="GeometryCollection",g=[];return this.eachLayer(function(v){if(v.toGeoJSON){var k=v.toGeoJSON(a);if(f)g.push(k.geometry);else{var K=ph(k);K.type==="FeatureCollection"?g.push.apply(g,K.features):g.push(K)}}}),f?qA(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function P_(a,c){return new gi(a,c)}var mF=P_,yh=dt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,f){this._url=a,this._bounds=pe(c),x(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){at(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Se(this._image),this},bringToBack:function(){return this._map&&cs(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=pe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:De("img");if(Pe(c,"leaflet-image-layer"),this._zoomAnimated&&Pe(c,"leaflet-zoom-animated"),this.options.className&&Pe(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onload=o(this.fire,this,"load"),c.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Er(this._image,f,c)},_reset:function(){var a=this._image,c=new ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=c.getSize();Q(a,c.min),a.style.width=f.x+"px",a.style.height=f.y+"px"},_updateOpacity:function(){_t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),gF=function(a,c,f){return new yh(a,c,f)},R_=yh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:De("video");if(Pe(c,"leaflet-image-layer"),this._zoomAnimated&&Pe(c,"leaflet-zoom-animated"),this.options.className&&Pe(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onloadeddata=o(this.fire,this,"load"),a){for(var f=c.getElementsByTagName("source"),g=[],v=0;v<f.length;v++)g.push(f[v].src);this._url=f.length>0?g:[c.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var K=De("source");K.src=this._url[k],c.appendChild(K)}}});function pF(a,c,f){return new R_(a,c,f)}var L_=yh.extend({_initImage:function(){var a=this._image=this._url;Pe(a,"leaflet-image-layer"),this._zoomAnimated&&Pe(a,"leaflet-zoom-animated"),this.options.className&&Pe(a,this.options.className),a.onselectstart=p,a.onmousemove=p}});function yF(a,c,f){return new L_(a,c,f)}var Rs=dt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof de||N(a))?(this._latlng=ae(a),x(this,c)):(x(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&_t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&_t(this._container,1),this.bringToFront(),this.options.interactive&&(Pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(_t(this._container,0),this._removeTimeout=setTimeout(o(at,void 0,this._container),200)):at(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ae(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Se(this._container),this},bringToBack:function(){return this._map&&cs(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof Gt){c=null;var f=this._source._layers;for(var g in f)if(f[g]._map){c=f[g];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=Y(this.options.offset),f=this._getAnchor();this._zoomAnimated?Q(this._container,a.add(f)):c=c.add(a).add(f);var g=this._containerBottom=-c.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=g+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Ke.include({_initOverlay:function(a,c,f,g){var v=c;return v instanceof a||(v=new a(g).setContent(c)),f&&v.setLatLng(f),v}}),dt.include({_initOverlay:function(a,c,f,g){var v=f;return v instanceof a?(x(v,g),v._source=this):(v=c&&!g?c:new a(g,this),v.setContent(f)),v}});var wh=Rs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Rs.prototype.openOn.call(this,a)},onAdd:function(a){Rs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ga||this._source.on("preclick",Kr))},onRemove:function(a){Rs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ga||this._source.off("preclick",Kr))},getEvents:function(){var a=Rs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=De("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=De("div",a+"-content-wrapper",c);if(this._contentNode=De("div",a+"-content",f),ha(c),da(this._contentNode),Ne(c,"contextmenu",Kr),this._tipContainer=De("div",a+"-tip-container",c),this._tip=De("div",a+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=De("a",a+"-close-button",c);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(g,"click",function(v){Ut(v),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var f=a.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),c.width=f+1+"px",c.whiteSpace="",c.height="";var g=a.offsetHeight,v=this.options.maxHeight,k="leaflet-popup-scrolled";v&&g>v?(c.height=v+"px",Pe(a,k)):mt(a,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),f=this._getAnchor();Q(this._container,c.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(Fs(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+c,g=this._containerWidth,v=new G(this._containerLeft,-f-this._containerBottom);v._add(q(this._container));var k=a.layerPointToContainerPoint(v),K=Y(this.options.autoPanPadding),W=Y(this.options.autoPanPaddingTopLeft||K),J=Y(this.options.autoPanPaddingBottomRight||K),ne=a.getSize(),xe=0,Ue=0;k.x+g+J.x>ne.x&&(xe=k.x+g-ne.x+J.x),k.x-xe-W.x<0&&(xe=k.x-W.x),k.y+f+J.y>ne.y&&(Ue=k.y+f-ne.y+J.y),k.y-Ue-W.y<0&&(Ue=k.y-W.y),(xe||Ue)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([xe,Ue]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),wF=function(a,c){return new wh(a,c)};Ke.mergeOptions({closePopupOnClick:!0}),Ke.include({openPopup:function(a,c,f){return this._initOverlay(wh,a,c,f).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),dt.include({bindPopup:function(a,c){return this._popup=this._initOverlay(wh,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Gt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Ir(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof ga)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var vh=Rs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Rs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Rs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Rs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=De("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,f,g=this._map,v=this._container,k=g.latLngToContainerPoint(g.getCenter()),K=g.layerPointToContainerPoint(a),W=this.options.direction,J=v.offsetWidth,ne=v.offsetHeight,xe=Y(this.options.offset),Ue=this._getAnchor();W==="top"?(c=J/2,f=ne):W==="bottom"?(c=J/2,f=0):W==="center"?(c=J/2,f=ne/2):W==="right"?(c=0,f=ne/2):W==="left"?(c=J,f=ne/2):K.x<k.x?(W="right",c=0,f=ne/2):(W="left",c=J+(xe.x+Ue.x)*2,f=ne/2),a=a.subtract(Y(c,f,!0)).add(xe).add(Ue),mt(v,"leaflet-tooltip-right"),mt(v,"leaflet-tooltip-left"),mt(v,"leaflet-tooltip-top"),mt(v,"leaflet-tooltip-bottom"),Pe(v,"leaflet-tooltip-"+W),Q(v,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&_t(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),vF=function(a,c){return new vh(a,c)};Ke.include({openTooltip:function(a,c,f){return this._initOverlay(vh,a,c,f).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),dt.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vh,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[c](f),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Gt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(Ne(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ne(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,f,g;this._tooltip.options.sticky&&a.originalEvent&&(f=this._map.mouseEventToContainerPoint(a.originalEvent),g=this._map.containerPointToLayerPoint(f),c=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(c)}});var j_=Ps.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),f=this.options;if(f.html instanceof Element?(qn(c),c.appendChild(f.html)):c.innerHTML=f.html!==!1?f.html:"",f.bgPos){var g=Y(f.bgPos);c.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function xF(a){return new j_(a)}Ps.Default=Pc;var Rc=dt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){x(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),at(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Se(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(cs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof G?a:new G(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,f=-a(-1/0,1/0),g=0,v=c.length,k;g<v;g++)k=c[g].style.zIndex,c[g]!==this._container&&k&&(f=a(f,+k));isFinite(f)&&(this.options.zIndex=f+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ee.ielt9){_t(this._container,this.options.opacity);var a=+new Date,c=!1,f=!1;for(var g in this._tiles){var v=this._tiles[g];if(!(!v.current||!v.loaded)){var k=Math.min(1,(a-v.loaded)/200);_t(v.el,k),k<1?c=!0:(v.active?f=!0:this._onOpaqueTile(v),v.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),c&&(O(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=De("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===a?(this._levels[f].el.style.zIndex=c-Math.abs(a-f),this._onUpdateLevel(f)):(at(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var g=this._levels[a],v=this._map;return g||(g=this._levels[a]={},g.el=De("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=c,g.origin=v.project(v.unproject(v.getPixelOrigin()),a).round(),g.zoom=a,this._setZoomTransform(g,v.getCenter(),v.getZoom()),p(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var a,c,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var g=c.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)at(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,f,g){var v=Math.floor(a/2),k=Math.floor(c/2),K=f-1,W=new G(+v,+k);W.z=+K;var J=this._tileCoordsToKey(W),ne=this._tiles[J];return ne&&ne.active?(ne.retain=!0,!0):(ne&&ne.loaded&&(ne.retain=!0),K>g?this._retainParent(v,k,K,g):!1)},_retainChildren:function(a,c,f,g){for(var v=2*a;v<2*a+2;v++)for(var k=2*c;k<2*c+2;k++){var K=new G(v,k);K.z=f+1;var W=this._tileCoordsToKey(K),J=this._tiles[W];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);f+1<g&&this._retainChildren(v,k,f+1,g)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,f,g){var v=Math.round(c);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var k=this.options.updateWhenZooming&&v!==this._tileZoom;(!g||k)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(a),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var f in this._levels)this._setZoomTransform(this._levels[f],a,c)},_setZoomTransform:function(a,c,f){var g=this._map.getZoomScale(f,a.zoom),v=a.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(c,f)).round();Ee.any3d?Er(a.el,v,g):Q(a.el,v)},_resetGrid:function(){var a=this._map,c=a.options.crs,f=this._tileSize=this.getTileSize(),g=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],g).x/f.x),Math.ceil(a.project([0,c.wrapLng[1]],g).x/f.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],g).y/f.x),Math.ceil(a.project([c.wrapLat[1],0],g).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,f=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),g=c.getZoomScale(f,this._tileZoom),v=c.project(a,this._tileZoom).floor(),k=c.getSize().divideBy(g*2);return new ve(v.subtract(k),v.add(k))},_update:function(a){var c=this._map;if(c){var f=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(a),v=this._pxBoundsToTileRange(g),k=v.getCenter(),K=[],W=this.options.keepBuffer,J=new ve(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ne in this._tiles){var xe=this._tiles[ne].coords;(xe.z!==this._tileZoom||!J.contains(new G(xe.x,xe.y)))&&(this._tiles[ne].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(a,f);return}for(var Ue=v.min.y;Ue<=v.max.y;Ue++)for(var Oe=v.min.x;Oe<=v.max.x;Oe++){var Jn=new G(Oe,Ue);if(Jn.z=this._tileZoom,!!this._isValidTile(Jn)){var pn=this._tiles[this._tileCoordsToKey(Jn)];pn?pn.current=!0:K.push(Jn)}}if(K.sort(function(dr,$A){return dr.distanceTo(k)-$A.distanceTo(k)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gr=document.createDocumentFragment();for(Oe=0;Oe<K.length;Oe++)this._addTile(K[Oe],Gr);this._level.el.appendChild(Gr)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var f=this._globalTileRange;if(!c.wrapLng&&(a.x<f.min.x||a.x>f.max.x)||!c.wrapLat&&(a.y<f.min.y||a.y>f.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(a);return pe(this.options.bounds).overlaps(g)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,f=this.getTileSize(),g=a.scaleBy(f),v=g.add(f),k=c.unproject(g,a.z),K=c.unproject(v,a.z);return[k,K]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),f=new fe(c[0],c[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),f=new G(+c[0],+c[1]);return f.z=+c[2],f},_removeTile:function(a){var c=this._tiles[a];c&&(at(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Pe(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=p,a.onmousemove=p,Ee.ielt9&&this.options.opacity<1&&_t(a,this.options.opacity)},_addTile:function(a,c){var f=this._getTilePos(a),g=this._tileCoordsToKey(a),v=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(v),this.createTile.length<2&&D(o(this._tileReady,this,a,null,v)),Q(v,f),this._tiles[g]={el:v,coords:a,current:!0},c.appendChild(v),this.fire("tileloadstart",{tile:v,coords:a})},_tileReady:function(a,c,f){c&&this.fire("tileerror",{error:c,tile:f,coords:a});var g=this._tileCoordsToKey(a);f=this._tiles[g],f&&(f.loaded=+new Date,this._map._fadeAnimated?(_t(f.el,0),O(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),c||(Pe(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ee.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new G(this._wrapX?m(a.x,this._wrapX):a.x,this._wrapY?m(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new ve(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function _F(a){return new Rc(a)}var WA=Rc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=x(this,c),c.detectRetina&&Ee.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var f=document.createElement("img");return Ne(f,"load",o(this._tileOnLoad,this,c,f)),Ne(f,"error",o(this._tileOnError,this,c,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(a),f},getTileUrl:function(a){var c={r:Ee.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=f),c["-y"]=f}return E(this._url,s(c,this.options))},_tileOnLoad:function(a,c){Ee.ielt9?setTimeout(o(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,f){var g=this.options.errorTileUrl;g&&c.getAttribute("src")!==g&&(c.src=g),a(f,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,f=this.options.zoomReverse,g=this.options.zoomOffset;return f&&(a=c-a),a+g},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=p,c.onerror=p,!c.complete)){c.src=V;var f=this._tiles[a].coords;at(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:f})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",V),Rc.prototype._removeTile.call(this,a)},_tileReady:function(a,c,f){if(!(!this._map||f&&f.getAttribute("src")===V))return Rc.prototype._tileReady.call(this,a,c,f)}});function D_(a,c){return new WA(a,c)}var M_=WA.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var f=s({},this.defaultWmsParams);for(var g in c)g in this.options||(f[g]=c[g]);c=x(this,c);var v=c.detectRetina&&Ee.retina?2:1,k=this.getTileSize();f.width=k.x*v,f.height=k.y*v,this.wmsParams=f},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,WA.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),f=this._crs,g=ue(f.project(c[0]),f.project(c[1])),v=g.min,k=g.max,K=(this._wmsVersion>=1.3&&this._crs===Xt?[v.y,v.x,k.y,k.x]:[v.x,v.y,k.x,k.y]).join(","),W=WA.prototype.getTileUrl.call(this,a);return W+U(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(a,c){return s(this.wmsParams,a),c||this.redraw(),this}});function BF(a,c){return new M_(a,c)}WA.WMS=M_,D_.wms=BF;var pi=dt.extend({options:{padding:.1},initialize:function(a){x(this,a),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var f=this._map.getZoomScale(c,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,c),k=g.multiplyBy(-f).add(v).subtract(this._map._getNewPixelOrigin(a,c));Ee.any3d?Er(this._container,k,f):Q(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),f=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new ve(f,f.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),O_=pi.extend({options:{tolerance:0},getEvents:function(){var a=pi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ne(a,"mousemove",this._onMouseMove,this),Ne(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,at(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var a=this._bounds,c=this._container,f=a.getSize(),g=Ee.retina?2:1;Q(c,a.min),c.width=g*f.x,c.height=g*f.y,c.style.width=f.x+"px",c.style.height=f.y+"px",Ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[u(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,f=c.next,g=c.prev;f?f.prev=g:this._drawLast=g,g?g.next=f:this._drawFirst=f,delete a._order,delete this._layers[u(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),f=[],g,v;for(v=0;v<c.length;v++){if(g=Number(c[v]),isNaN(g))return;f.push(g)}a.options._dashArray=f}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ve,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var f=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)a=g.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var f,g,v,k,K=a._parts,W=K.length,J=this._ctx;if(W){for(J.beginPath(),f=0;f<W;f++){for(g=0,v=K[f].length;g<v;g++)k=K[f][g],J[g?"lineTo":"moveTo"](k.x,k.y);c&&J.closePath()}this._fillStroke(J,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,f=this._ctx,g=Math.max(Math.round(a._radius),1),v=(Math.max(Math.round(a._radiusY),1)||g)/g;v!==1&&(f.save(),f.scale(1,v)),f.beginPath(),f.arc(c.x,c.y/v,g,0,Math.PI*2,!1),v!==1&&f.restore(),this._fillStroke(f,a)}},_fillStroke:function(a,c){var f=c.options;f.fill&&(a.globalAlpha=f.fillOpacity,a.fillStyle=f.fillColor||f.color,a.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=f.opacity,a.lineWidth=f.weight,a.strokeStyle=f.color,a.lineCap=f.lineCap,a.lineJoin=f.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),f,g,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(f))&&(g=f);this._fireEvent(g?[g]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(mt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var f,g,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(c)&&(g=f);g!==this._hoveredLayer&&(this._handleMouseOut(a),g&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([g],a,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,f){this._map._fireDOMEvent(c,f||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var f=c.next,g=c.prev;if(f)f.prev=g;else return;g?g.next=f:f&&(this._drawFirst=f),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var f=c.next,g=c.prev;if(g)g.next=f;else return;f?f.prev=g:g&&(this._drawLast=g),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function H_(a){return Ee.canvas?new O_(a):null}var Lc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bF={_initContainer:function(){this._container=De("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=Lc("shape");Pe(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=Lc("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;at(c),a.removeInteractiveTarget(c),delete this._layers[u(a)]},_updateStyle:function(a){var c=a._stroke,f=a._fill,g=a.options,v=a._container;v.stroked=!!g.stroke,v.filled=!!g.fill,g.stroke?(c||(c=a._stroke=Lc("stroke")),v.appendChild(c),c.weight=g.weight+"px",c.color=g.color,c.opacity=g.opacity,g.dashArray?c.dashStyle=N(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=g.lineCap.replace("butt","flat"),c.joinstyle=g.lineJoin):c&&(v.removeChild(c),a._stroke=null),g.fill?(f||(f=a._fill=Lc("fill")),v.appendChild(f),f.color=g.fillColor||g.color,f.opacity=g.fillOpacity):f&&(v.removeChild(f),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),f=Math.round(a._radius),g=Math.round(a._radiusY||f);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+f+","+g+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){Se(a._container)},_bringToBack:function(a){cs(a._container)}},xh=Ee.vml?Lc:Ze,jc=pi.extend({_initContainer:function(){this._container=xh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){at(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var a=this._bounds,c=a.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,f.setAttribute("width",c.x),f.setAttribute("height",c.y)),Q(f,a.min),f.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=xh("path");a.options.className&&Pe(c,a.options.className),a.options.interactive&&Pe(c,"leaflet-interactive"),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){at(a._path),a.removeInteractiveTarget(a._path),delete this._layers[u(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,f=a.options;c&&(f.stroke?(c.setAttribute("stroke",f.color),c.setAttribute("stroke-opacity",f.opacity),c.setAttribute("stroke-width",f.weight),c.setAttribute("stroke-linecap",f.lineCap),c.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?c.setAttribute("stroke-dasharray",f.dashArray):c.removeAttribute("stroke-dasharray"),f.dashOffset?c.setAttribute("stroke-dashoffset",f.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),f.fill?(c.setAttribute("fill",f.fillColor||f.color),c.setAttribute("fill-opacity",f.fillOpacity),c.setAttribute("fill-rule",f.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,rn(a._parts,c))},_updateCircle:function(a){var c=a._point,f=Math.max(Math.round(a._radius),1),g=Math.max(Math.round(a._radiusY),1)||f,v="a"+f+","+g+" 0 1,0 ",k=a._empty()?"M0 0":"M"+(c.x-f)+","+c.y+v+f*2+",0 "+v+-f*2+",0 ";this._setPath(a,k)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){Se(a._path)},_bringToBack:function(a){cs(a._path)}});Ee.vml&&jc.include(bF);function V_(a){return Ee.svg||Ee.vml?new jc(a):null}Ke.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&H_(a)||V_(a)}});var K_=GA.extend({initialize:function(a,c){GA.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=pe(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function CF(a,c){return new K_(a,c)}jc.create=xh,jc.pointsToPath=rn,gi.geometryToLayer=fh,gi.coordsToLatLng=Tp,gi.coordsToLatLngs=mh,gi.latLngToCoords=kp,gi.latLngsToCoords=gh,gi.getFeature=qA,gi.asFeature=ph,Ke.mergeOptions({boxZoom:!0});var z_=Tr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){at(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),te(),Me(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ne(document,{contextmenu:Ir,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=De("div","leaflet-zoom-box",this._container),Pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new ve(this._point,this._startPoint),f=c.getSize();Q(this._box,c.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(at(this._box),mt(this._container,"leaflet-crosshair")),we(),mn(),ut(document,{contextmenu:Ir,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var c=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ke.addInitHook("addHandler","boxZoom",z_),Ke.mergeOptions({doubleClickZoom:!0});var G_=Tr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,f=c.getZoom(),g=c.options.zoomDelta,v=a.originalEvent.shiftKey?f-g:f+g;c.options.doubleClickZoom==="center"?c.setZoom(v):c.setZoomAround(a.containerPoint,v)}});Ke.addInitHook("addHandler","doubleClickZoom",G_),Ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var q_=Tr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new ds(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=pe(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),f=this._initialWorldOffset,g=this._draggable._newPos.x,v=(g-c+f)%a+c-f,k=(g+c+f)%a-c-f,K=Math.abs(v+f)<Math.abs(k+f)?v:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(a){var c=this._map,f=c.options,g=!f.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),g)c.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,K=f.easeLinearity,W=v.multiplyBy(K/k),J=W.distanceTo([0,0]),ne=Math.min(f.inertiaMaxSpeed,J),xe=W.multiplyBy(ne/J),Ue=ne/(f.inertiaDeceleration*K),Oe=xe.multiplyBy(-Ue/2).round();!Oe.x&&!Oe.y?c.fire("moveend"):(Oe=c._limitOffset(Oe,c.options.maxBounds),D(function(){c.panBy(Oe,{duration:Ue,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});Ke.addInitHook("addHandler","dragging",q_),Ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var W_=Tr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ne(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,f=a.scrollTop||c.scrollTop,g=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(g,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},f=this.keyCodes,g,v;for(g=0,v=f.left.length;g<v;g++)c[f.left[g]]=[-1*a,0];for(g=0,v=f.right.length;g<v;g++)c[f.right[g]]=[a,0];for(g=0,v=f.down.length;g<v;g++)c[f.down[g]]=[0,a];for(g=0,v=f.up.length;g<v;g++)c[f.up[g]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},f=this.keyCodes,g,v;for(g=0,v=f.zoomIn.length;g<v;g++)c[f.zoomIn[g]]=a;for(g=0,v=f.zoomOut.length;g<v;g++)c[f.zoomOut[g]]=-a},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,f=this._map,g;if(c in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(g=this._panKeys[c],a.shiftKey&&(g=Y(g).multiplyBy(3)),f.options.maxBounds&&(g=f._limitOffset(Y(g),f.options.maxBounds)),f.options.worldCopyJump){var v=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(g)));f.panTo(v)}else f.panBy(g)}else if(c in this._zoomKeys)f.setZoom(f.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Ir(a)}}});Ke.addInitHook("addHandler","keyboard",W_),Ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $_=Tr.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=ih(a),f=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var g=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),g),Ir(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),f=this._map.options.zoomSnap||0;a._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,k=f?Math.ceil(v/f)*f:v,K=a._limitZoom(c+(this._delta>0?k:-k))-c;this._delta=0,this._startTime=null,K&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+K):a.setZoomAround(this._lastMousePos,c+K))}});Ke.addInitHook("addHandler","scrollWheelZoom",$_);var EF=600;Ke.mergeOptions({tapHold:Ee.touchNative&&Ee.safari&&Ee.mobile,tapTolerance:15});var Z_=Tr.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new G(c.clientX,c.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",Ut),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),EF),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){ut(document,"touchend",Ut),ut(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new G(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var f=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});f._simulated=!0,c.target.dispatchEvent(f)}});Ke.addInitHook("addHandler","tapHold",Z_),Ke.mergeOptions({touchZoom:Ee.touch,bounceAtZoomLimits:!0});var J_=Tr.extend({addHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var f=c.mouseEventToContainerPoint(a.touches[0]),g=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(f.add(g)._divideBy(2))),this._startDist=f.distanceTo(g),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),Ut(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,f=c.mouseEventToContainerPoint(a.touches[0]),g=c.mouseEventToContainerPoint(a.touches[1]),v=f.distanceTo(g)/this._startDist;if(this._zoom=c.getScaleZoom(v,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&v<1||this._zoom>c.getMaxZoom()&&v>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var k=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(v===1&&k.x===0&&k.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var K=o(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(K,this,!0),Ut(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ke.addInitHook("addHandler","touchZoom",J_),Ke.BoxZoom=z_,Ke.DoubleClickZoom=G_,Ke.Drag=q_,Ke.Keyboard=W_,Ke.ScrollWheelZoom=$_,Ke.TapHold=Z_,Ke.TouchZoom=J_,n.Bounds=ve,n.Browser=Ee,n.CRS=Fe,n.Canvas=O_,n.Circle=Ip,n.CircleMarker=hh,n.Class=Z,n.Control=ur,n.DivIcon=j_,n.DivOverlay=Rs,n.DomEvent=ah,n.DomUtil=rh,n.Draggable=ds,n.Evented=me,n.FeatureGroup=Gt,n.GeoJSON=gi,n.GridLayer=Rc,n.Handler=Tr,n.Icon=Ps,n.ImageOverlay=yh,n.LatLng=de,n.LatLngBounds=fe,n.Layer=dt,n.LayerGroup=Ft,n.LineUtil=F,n.Map=Ke,n.Marker=dh,n.Mixin=Io,n.Path=ga,n.Point=G,n.PolyUtil=VA,n.Polygon=GA,n.Polyline=mi,n.Popup=wh,n.PosAnimation=kc,n.Projection=le,n.Rectangle=K_,n.Renderer=pi,n.SVG=jc,n.SVGOverlay=L_,n.TileLayer=WA,n.Tooltip=vh,n.Transformation=Vn,n.Util=R,n.VideoOverlay=R_,n.bind=o,n.bounds=ue,n.canvas=H_,n.circle=dF,n.circleMarker=uF,n.control=Zn,n.divIcon=xF,n.extend=s,n.featureGroup=zA,n.geoJSON=P_,n.geoJson=mF,n.gridLayer=_F,n.icon=lF,n.imageOverlay=gF,n.latLng=ae,n.latLngBounds=pe,n.layerGroup=ma,n.map=LA,n.marker=cF,n.point=Y,n.polygon=fF,n.polyline=hF,n.popup=wF,n.rectangle=CF,n.setOptions=x,n.stamp=u,n.svg=V_,n.svgOverlay=yF,n.tileLayer=D_,n.tooltip=vF,n.transformation=kn,n.version=r,n.videoOverlay=pF;var IF=window.L;n.noConflict=function(){return window.L=IF,this},window.L=n})})(Bw,Bw.exports);var Jd=Bw.exports;const f_=II(Jd);function m_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function g_(t,e){return e==null?function(r,s){const i=j.useRef();return i.current||(i.current=t(r,s)),i}:function(r,s){const i=j.useRef();i.current||(i.current=t(r,s));const o=j.useRef(r),{instance:l}=i.current;return j.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),i}}function B3(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var i;(i=e.layerContainer)==null||i.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function V2(t){return function(n){const r=d_(),s=t(h_(n,r),r);return D2(r.map,n.attribution),H2(s.current,n.eventHandlers),B3(s.current,r),s}}function b3(t,e){const n=g_(t,e),r=V2(n);return w3(r)}function C3(t,e){const n=g_(t),r=_3(n,e);return v3(r)}function E3(t,e){const n=g_(t,e),r=V2(n);return x3(r)}function I3(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function T3(){return d_().map}function bw(){return bw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bw.apply(this,arguments)}function k3({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:i,placeholder:o,style:l,whenReady:u,zoom:h,...m},p){const[w]=j.useState({className:s,id:i,style:l}),[C,b]=j.useState(null);j.useImperativeHandle(p,()=>(C==null?void 0:C.map)??null,[C]);const x=j.useCallback(T=>{if(T!==null&&C===null){const E=new Jd.Map(T,m);n!=null&&h!=null?E.setView(n,h):t!=null&&E.fitBounds(t,e),u!=null&&E.whenReady(u),b(p3(E))}},[]);j.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const U=C?rm.createElement(O2,{value:C},r):o??null;return rm.createElement("div",bw({},w,{ref:x}),U)}const S3=j.forwardRef(k3),fE=b3(function({position:e,...n},r){const s=new Jd.Marker(e,n);return m_(s,y3(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),mE=C3(function(e,n){const r=new Jd.Popup(e,n.overlayContainer);return m_(r,n)},function(e,n,{position:r},s){j.useEffect(function(){const{instance:o}=e;function l(h){h.popup===o&&(o.update(),s(!0))}function u(h){h.popup===o&&s(!1)}return n.map.on({popupopen:l,popupclose:u}),n.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var m;n.map.off({popupopen:l,popupclose:u}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(o)}},[e,n,s,r])}),N3=E3(function({url:e,...n},r){const s=new Jd.TileLayer(e,h_(n,r));return m_(s,r)},function(e,n,r){I3(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...h},m)=>j.createElement("svg",{ref:m,...U3,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${F3(t)}`,l].join(" "),...h},[...e.map(([p,w])=>j.createElement(p,w)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=he("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=he("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=he("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=he("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=he("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=he("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=he("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=he("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=he("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=he("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=he("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=he("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=he("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=he("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=he("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=he("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=he("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=he("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=he("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=he("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=he("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=he("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=he("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=he("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=he("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=he("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=he("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=he("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=he("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=he("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=he("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=he("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=he("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=he("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=he("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);delete f_.Icon.Default.prototype._getIconUrl;f_.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const wE=t=>f_.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 24px; height: 24px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>`,iconSize:[24,24],iconAnchor:[12,24],popupAnchor:[0,-24]}),Yc={accommodation:{label:"Accommodation",color:"#3B82F6",icon:K2},costume:{label:"Costume Pickup",color:"#F59E0B",icon:r6},fete:{label:"Fete Location",color:"#EC4899",icon:$2},meetup:{label:"Meetup Spot",color:"#10B981",icon:tr},scraped:{label:"Live Events",color:"#8B5CF6",icon:br}};function o6({center:t,zoom:e}){const n=T3();return j.useEffect(()=>{t&&n.setView(t,e||13)},[t,e,n]),null}function A6(t,e,n,r){const i=(n-t)*Math.PI/180,o=(r-e)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}const vE={trinidad:{center:[10.6918,-61.2225],zoom:11,country:"Trinidad & Tobago"},"stkitts-sugar-mas":{center:[17.3026,-62.7177],zoom:12,country:"St. Kitts"},stcroix:{center:[17.7246,-64.8348],zoom:11,country:"St. Croix, USVI"},dominica:{center:[15.415,-61.371],zoom:11,country:"Dominica"},aruba:{center:[12.5211,-69.9683],zoom:12,country:"Aruba"},"guyana-mashramani":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},guyana:{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},"guyana-independence":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},jamaica:{center:[18.0179,-76.8099],zoom:11,country:"Jamaica"},stmaarten:{center:[18.0425,-63.0548],zoom:12,country:"St. Maarten"},bahamas:{center:[25.0343,-77.3963],zoom:12,country:"Bahamas"},bermuda:{center:[32.3078,-64.7505],zoom:13,country:"Bermuda"},vincymas:{center:[13.1587,-61.2248],zoom:12,country:"St. Vincent"},antigua:{center:[17.1274,-61.8468],zoom:12,country:"Antigua"},stlucia:{center:[14.0101,-60.987],zoom:11,country:"St. Lucia"},tobago:{center:[11.1889,-60.732],zoom:11,country:"Tobago"},nottinghill:{center:[51.5156,-.205],zoom:14,country:"London, UK"},miami:{center:[25.7617,-80.1918],zoom:11,country:"Miami, FL"},tampa:{center:[27.9506,-82.4572],zoom:12,country:"Tampa, FL"},"cayman-batabano":{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},stthomas:{center:[18.3358,-64.8963],zoom:13,country:"St. Thomas, USVI"},atlanta:{center:[33.749,-84.388],zoom:12,country:"Atlanta, GA"},hollywood:{center:[34.0928,-118.3287],zoom:13,country:"Hollywood, CA"},caymas:{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},toronto:{center:[43.65107,-79.347015],zoom:12,country:"Toronto, Canada"},barbados:{center:[13.1939,-59.5432],zoom:12,country:"Barbados"},nevis:{center:[17.15,-62.58],zoom:12,country:"Nevis"},grenada:{center:[12.0529,-61.7523],zoom:12,country:"Grenada"},"ny-labor-day":{center:[40.6782,-73.9442],zoom:13,country:"Brooklyn, NY"},japan:{center:[35.6762,139.6503],zoom:10,country:"Tokyo, Japan"}};function l6({locations:t=[],scrapedEvents:e=[],onLocationsChange:n,carnivalName:r,carnivalId:s}){const[i,o]=j.useState(!1),[l,u]=j.useState({name:"",type:"fete",lat:"",lng:""}),[h,m]=j.useState(""),[p,w]=j.useState([]),[C,b]=j.useState(!1),x=t.find(I=>I.type==="accommodation"),U=vE[s]||vE.trinidad,T=j.useMemo(()=>{if(x)return[x.lat,x.lng];if(t.length>0)return[t[0].lat,t[0].lng];const I=e.find(B=>B.lat&&B.lng);return I?[I.lat,I.lng]:U.center},[t,x,U,e]),E=async()=>{if(h.trim()){b(!0);try{const B=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h)}`)).json();w(B.slice(0,5))}catch(I){console.error("Search error:",I)}b(!1)}},N=I=>{u({...l,lat:parseFloat(I.lat),lng:parseFloat(I.lon),name:l.name||I.display_name.split(",")[0]}),w([]),m("")},H=()=>{if(!l.name||!l.lat||!l.lng)return;const I={id:Date.now().toString(),name:l.name,type:l.type,lat:parseFloat(l.lat),lng:parseFloat(l.lng)};n([...t,I]),u({name:"",type:"fete",lat:"",lng:""}),o(!1)},V=I=>{n(t.filter(B=>B.id!==I))},M=I=>{if(!x||I.type==="accommodation")return null;const B=A6(x.lat,x.lng,I.lat,I.lng);return B<1?`${Math.round(B*1e3)}m`:`${B.toFixed(1)}km`};return A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(br,{className:"w-5 h-5 text-purple-500"}),"Fete Map - ",r]}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-7",children:[" ",U.country]})]}),A.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition",children:[A.jsx(Ol,{className:"w-4 h-4"}),"Add Pin"]})]}),i&&A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"text",placeholder:"Location name",value:l.name,onChange:I=>u({...l,name:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("select",{value:l.type,onChange:I=>u({...l,type:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white",children:Object.entries(Yc).map(([I,{label:B}])=>A.jsx("option",{value:I,children:B},I))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Search for a place...",value:h,onChange:I=>m(I.target.value),onKeyPress:I=>I.key==="Enter"&&E(),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("button",{onClick:E,disabled:C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:C?"...":"Search"})]}),p.length>0&&A.jsx("ul",{className:"bg-white dark:bg-gray-600 border dark:border-gray-500 rounded-lg max-h-40 overflow-y-auto",children:p.map((I,B)=>A.jsx("li",{onClick:()=>N(I),className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-500 cursor-pointer text-sm truncate dark:text-white",children:I.display_name},B))}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"number",step:"any",placeholder:"Latitude",value:l.lat,onChange:I=>u({...l,lat:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("input",{type:"number",step:"any",placeholder:"Longitude",value:l.lng,onChange:I=>u({...l,lng:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:H,disabled:!l.name||!l.lat||!l.lng,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Location"}),A.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}),A.jsx("div",{className:"h-[400px] rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-600",children:A.jsxs(S3,{center:T,zoom:U.zoom,style:{height:"100%",width:"100%"},children:[A.jsx(N3,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),A.jsx(o6,{center:T,zoom:U.zoom}),t.map(I=>{var B,S;return A.jsx(fE,{position:[I.lat,I.lng],icon:wE(((B=Yc[I.type])==null?void 0:B.color)||"#6B7280"),children:A.jsxs(mE,{children:[A.jsx("div",{className:"font-medium",children:I.name}),A.jsx("div",{className:"text-xs text-gray-500",children:(S=Yc[I.type])==null?void 0:S.label}),M(I)&&A.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-1 mt-1",children:[A.jsx(X3,{className:"w-3 h-3"}),M(I)," from accommodation"]})]})},I.id)}),e.filter(I=>I.lat&&I.lng).map(I=>A.jsx(fE,{position:[I.lat,I.lng],icon:wE(Yc.scraped.color),children:A.jsxs(mE,{children:[A.jsx("div",{className:"font-medium",children:I.title}),A.jsx("div",{className:"text-xs text-purple-600 font-bold mb-1",children:"Live Event"}),I.venue&&A.jsx("div",{className:"text-xs text-gray-500 mb-2",children:I.venue}),A.jsx("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",className:"block text-center px-2 py-1 bg-purple-100 text-purple-700 text-[10px] font-bold rounded uppercase hover:bg-purple-200 transition",children:"Find Tickets"})]})},I.id))]})}),t.length>0&&A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Saved Locations"}),A.jsx("div",{className:"grid gap-2",children:t.map(I=>{const B=Yc[I.type],S=(B==null?void 0:B.icon)||br,P=M(I);return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:(B==null?void 0:B.color)||"#6B7280"},children:A.jsx(S,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:I.name}),A.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B==null?void 0:B.label,P&&`  ${P} from stay`]})]})]}),A.jsx("button",{onClick:()=>V(I.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(Xs,{className:"w-4 h-4"})})]},I.id)})})]}),!x&&t.length===0&&A.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[A.jsx(K2,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),A.jsx("p",{children:"Start by adding your accommodation location"}),A.jsx("p",{className:"text-sm",children:"Then add fetes, costume pickup, and meetup spots"})]})]})}let Po=[{id:"1",text:"Who's ready for the road?! ",senderId:"2",senderName:"Soca Junkie",createdAt:new Date(Date.now()-864e5).toISOString(),isBot:!1},{id:"2",text:"My costume is ready! The Monarch section looks fire ",senderId:"3",senderName:"Fete King",createdAt:new Date(Date.now()-8e7).toISOString(),isBot:!1},{id:"3",text:"Just waiting on my flight confirmation.",senderId:"4",senderName:"Carnival Baby",createdAt:new Date(Date.now()-7e7).toISOString(),isBot:!1},{id:"4",text:"Welcome to Trinidad! I'm your Carnival Concierge. Ask me anything about fete locations, transport, or safety tips!",senderId:"bot",senderName:"Carnival Concierge",createdAt:new Date(Date.now()-6e4).toISOString(),isBot:!0}];const c6=(t,e,n)=>{if(e)return n(Po),()=>{};if(!t)return console.warn("subscribeToMessages aborted: No squadId provided."),()=>{};console.log("Subscribing to messages for squad:",t);const r=un(ke,"squads",t,"messages"),s=_c(r,qx("createdAt","asc"),MN(50));return Vs(s,o=>{const l=o.docs.map(u=>{var h;return{id:u.id,...u.data(),createdAt:(h=u.data().createdAt)!=null&&h.toDate?u.data().createdAt.toDate().toISOString():new Date().toISOString()}});n(l)},o=>{console.error(" Chat subscription error:",o)})},u6=async(t,e,n,r,s,i)=>{let o=null;if(r)if(s)o=URL.createObjectURL(r);else try{const u=ao(oo,`squads/${t}/${Date.now()}_${r.name}`),h=await Ac(u,r);o=await lc(h.ref)}catch(u){console.error("Image upload failed:",u)}const l={text:n,imageUrl:o,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString(),senderId:e.uid||"demo-user",senderName:e.displayName||"Me",senderPhoto:e.photoURL||null,createdAt:s?new Date().toISOString():Jm(),isBot:!1};if(s){const u={id:Date.now().toString(),...l};Po=[...Po,u],i([...Po]),setTimeout(()=>{const h=xE(n||(r?"Nice photo! ":"...")),m={id:(Date.now()+1).toString(),text:h,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:new Date().toISOString(),isBot:!0};Po=[...Po,m],i([...Po])},1500);return}if(!t){console.warn("sendMessage aborted: No squadId provided.");return}console.log("Sending message to Firestore...",{squadId:t,messageData:l}),await oc(un(ke,"squads",t,"messages"),l),l.isBot||setTimeout(async()=>{const u=xE(n||(r?"Nice photo! ":"...")),h={text:u,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:Jm(),isBot:!0,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString()};try{await oc(un(ke,"squads",t,"messages"),h),console.log(" AI Concierge replied:",u)}catch(m){console.error("Failed to send AI reply:",m)}},2e3)},xE=t=>{const e=t.toLowerCase();return e.includes("fete")||e.includes("party")?"Based on your schedule, I recommend 'Phuket' on Friday night. It's close to your Airbnb in Woodbrook and tickets are running low! ":e.includes("food")||e.includes("hungry")||e.includes("eat")?"You have to try 'Sauce Doubles' in Curepe! Or if you're near the Savannah, check out the corn soup vendor near the exit. ":e.includes("transport")||e.includes("taxi")||e.includes("uber")?"Rideshare apps like TT RideShare are reliable. For late nights, I recommend pre-booking a driver for your squad. Safety first! ":e.includes("costume")||e.includes("mas")?"Costume pickup for Tribe is at the Queen's Park Savannah. Don't forget your distribution slip and ID! ":"That sounds like a vibe! Remember to stay hydrated . Need help with transport or fete tickets?"};function d6({squadId:t,user:e,isDemoMode:n}){const[r,s]=j.useState([]),[i,o]=j.useState(""),[l,u]=j.useState(null),[h,m]=j.useState(null),p=j.useRef(null),w=j.useRef(null);console.log("SquadChat Rendered. squadId:",t,"User:",e==null?void 0:e.uid),j.useEffect(()=>{const U=c6(n?"demo-squad":t,n,T=>{s(T)});return()=>U()},[t,n]),j.useEffect(()=>{var x;(x=p.current)==null||x.scrollIntoView({behavior:"smooth"})},[r]),j.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);const C=x=>{if(x.target.files&&x.target.files[0]){const U=x.target.files[0];u(U),m(URL.createObjectURL(U))}},b=async x=>{if(x.preventDefault(),!i.trim()&&!l)return;const U=i,T=l;o(""),u(null),m(null);try{await u6(n?"demo-squad":t,e,U,T,n,s)}catch(E){console.error("Failed to send:",E),o(U)}};return t?A.jsxs("div",{className:"flex flex-col h-[65vh] sm:h-[600px] bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[A.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center shadow-md z-10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-full backdrop-blur-sm",children:A.jsx(gE,{className:"w-5 h-5 text-white"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Squad Chat"}),A.jsxs("p",{className:"text-xs text-purple-100 opacity-90 flex items-center gap-1",children:[A.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),"Carnival Concierge Active"]})]})]}),n&&A.jsx("span",{className:"px-2 py-1 text-[10px] font-black tracking-widest bg-yellow-400 text-yellow-900 rounded uppercase",children:"Demo"})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900/50",children:[r.length===0?A.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 opacity-50",children:A.jsx("p",{children:"No messages yet. Say hi!"})}):r.map(x=>{const U=x.senderId===((e==null?void 0:e.uid)||"demo-user"),T=x.isBot;let E=!1,N=null;return x.expiresAt&&(N=new Date(x.expiresAt),new Date>N&&(E=!0)),A.jsx("div",{className:`flex w-full ${U?"justify-end":"justify-start"}`,children:A.jsxs("div",{className:`flex max-w-[85%] sm:max-w-[80%] gap-2 ${U?"flex-row-reverse":"flex-row"}`,children:[A.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center shadow-sm 
                    ${T?"bg-gradient-to-br from-pink-500 to-orange-400":"bg-gray-300 dark:bg-gray-700"}`,children:T?A.jsx(gE,{className:"w-4 h-4 text-white"}):A.jsx(zs,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{className:`flex flex-col ${U?"items-end":"items-start"}`,children:[A.jsx("span",{className:"text-[10px] text-gray-400 mb-1 ml-1",children:x.senderName}),A.jsxs("div",{className:`px-4 py-2 sm:py-3 rounded-2xl shadow-sm text-sm leading-relaxed relative break-words
                        ${U?"bg-blue-600 text-white rounded-tr-none":T?"bg-white dark:bg-gray-800 border-l-4 border-pink-500 text-gray-800 dark:text-gray-100 rounded-tl-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-tl-none"}
                    `,children:[x.imageUrl&&A.jsx("div",{className:"mb-2",children:E?A.jsxs("div",{className:"w-48 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg flex flex-col items-center justify-center text-gray-500",children:[A.jsx(Xf,{className:"w-8 h-8 mb-1 opacity-50"}),A.jsx("span",{className:"text-xs italic",children:"Image expired"})]}):A.jsxs("div",{className:"relative group",children:[A.jsx("img",{src:x.imageUrl,alt:"Shared",className:"w-48 h-48 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(x.imageUrl,"_blank")}),A.jsx("span",{className:"absolute top-2 right-2 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded backdrop-blur-sm",children:" 24h"})]})}),x.text]}),A.jsx("span",{className:"text-[10px] text-gray-400 mt-1 opacity-50",children:new Date(x.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},x.id)}),A.jsx("div",{ref:p})]}),A.jsxs("form",{onSubmit:b,className:"p-2 sm:p-4 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700",children:[h&&A.jsxs("div",{className:"mb-3 relative inline-block",children:[A.jsx("img",{src:h,alt:"Preview",className:"h-20 w-20 object-cover rounded-lg border border-purple-200"}),A.jsx("button",{type:"button",onClick:()=>{u(null),m(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600",children:A.jsx(as,{className:"w-3 h-3"})})]}),A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("input",{type:"file",ref:w,onChange:C,accept:"image/*",className:"hidden"}),A.jsx("button",{type:"button",onClick:()=>{var x;return(x=w.current)==null?void 0:x.click()},className:"p-2 sm:p-3 flex-shrink-0 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-xl transition-colors",title:"Upload Image (Expires in 24h)",children:A.jsx(cc,{className:"w-5 h-5"})}),A.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:l?"Add caption...":"Message squad...",className:"flex-1 px-3 py-2 sm:px-4 sm:py-3 bg-gray-100 dark:bg-gray-900 border-0 rounded-xl focus:ring-2 focus:ring-purple-500 dark:text-white placeholder-gray-400 transition-all text-sm sm:text-base min-w-0"}),A.jsx("button",{type:"submit",disabled:!i.trim()&&!l,className:"p-2 sm:p-3 flex-shrink-0 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-purple-500/30",children:A.jsx(X2,{className:"w-5 h-5"})})]})]})]}):A.jsxs("div",{className:"flex flex-col h-[300px] items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700 p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:A.jsx(zs,{className:"w-8 h-8 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"No Active Squad"}),A.jsx("p",{className:"text-gray-500 text-sm max-w-xs mx-auto",children:"Join or create a squad above to verify your Road Mode connection and start chatting!"})]})}const Ew={ticket:{label:"Ticket",icon:Bs,color:"#F59E0B"},photo:{label:"Photo",icon:Jf,color:"#3B82F6"}};function h6({files:t=[],onFilesChange:e,carnivalName:n,carnivalId:r,userId:s}){const[i,o]=j.useState(!1),[l,u]=j.useState(""),[h,m]=j.useState(null),[p,w]=j.useState("ticket"),[C,b]=j.useState(""),x=j.useRef(null),U=async V=>{const M=V.target.files[0];if(!M)return;const I=10*1024*1024;if(M.size>I){alert("File too large. Maximum size is 10MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp","application/pdf"].includes(M.type)){alert("Invalid file type. Please upload an image (JPG, PNG, GIF, WebP) or PDF.");return}o(!0),u("Uploading...");try{const S=Date.now(),P=M.name.split(".").pop(),D=`users/${s}/carnivals/${r}/${S}.${P}`,O=ao(oo,D);await Ac(O,M);const R=await lc(O),Z={id:S.toString(),name:C||M.name.split(".")[0],type:p,url:R,storagePath:D,originalName:M.name,uploadedAt:new Date().toISOString(),fileType:M.type};e([...t,Z]),b(""),u(""),x.current&&(x.current.value="")}catch(S){console.error("Upload error:",S),alert("Failed to upload file. Please try again.")}o(!1)},T=async V=>{if(confirm("Are you sure you want to delete this file?"))try{const M=ao(oo,V.storagePath);await h2(M),e(t.filter(I=>I.id!==V.id))}catch(M){console.error("Delete error:",M),e(t.filter(I=>I.id!==V.id))}},E=V=>{const M=document.createElement("a");M.href=V.url,M.download=V.originalName||V.name,M.target="_blank",document.body.appendChild(M),M.click(),document.body.removeChild(M)},N=t.filter(V=>V.type==="ticket"),H=t.filter(V=>V.type==="photo");return A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(Jf,{className:"w-5 h-5 text-purple-500"}),"Media Vault"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Store your tickets, photos, and important documents for ",n]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-4 border border-purple-100 dark:border-purple-800",children:[A.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Upload New File"}),A.jsxs("div",{className:"grid gap-3",children:[A.jsxs("div",{className:"flex gap-3",children:[A.jsx("input",{type:"text",placeholder:"File label (e.g., 'Tribe Costume Receipt')",value:C,onChange:V=>b(V.target.value),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:p,onChange:V=>w(V.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:Object.entries(Ew).map(([V,{label:M}])=>A.jsx("option",{value:V,children:M},V))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{ref:x,type:"file",accept:"image/*,.pdf",onChange:U,className:"hidden",id:"file-upload"}),A.jsx("label",{htmlFor:"file-upload",className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed rounded-lg cursor-pointer transition ${i?"border-gray-300 bg-gray-50 dark:bg-gray-800 cursor-not-allowed":"border-purple-300 hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20"}`,children:i?A.jsxs(A.Fragment,{children:[A.jsx(St,{className:"w-5 h-5 animate-spin text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:l})]}):A.jsxs(A.Fragment,{children:[A.jsx(i6,{className:"w-5 h-5 text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Click to upload image or PDF (max 10MB)"})]})})]})]})]}),N.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(Bs,{className:"w-4 h-4 text-yellow-500"}),"Tickets (",N.length,")"]}),A.jsx("div",{className:"grid gap-3",children:N.map(V=>A.jsx(f6,{file:V,onView:m,onDownload:E,onDelete:T},V.id))})]}),H.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(Jf,{className:"w-4 h-4 text-blue-500"}),"Photos (",H.length,")"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:H.map(V=>A.jsx(m6,{file:V,onView:m,onDownload:E,onDelete:T},V.id))})]}),t.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(Jf,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No files uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload your tickets, costume receipts, and travel photos"})]}),h&&A.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>m(null),children:A.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",onClick:V=>V.stopPropagation(),children:[A.jsx("button",{onClick:()=>m(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300",children:A.jsx(as,{className:"w-8 h-8"})}),h.fileType==="application/pdf"?A.jsx("iframe",{src:h.url,className:"w-full h-[80vh] rounded-lg"}):A.jsx("img",{src:h.url,alt:h.name,className:"max-w-full max-h-[80vh] mx-auto rounded-lg"}),A.jsx("p",{className:"text-white text-center mt-4 font-medium",children:h.name})]})})]})}function f6({file:t,onView:e,onDownload:n,onDelete:r}){const s=Ew[t.type]||Ew.ticket,i=s.icon;return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${s.color}20`},children:A.jsx(i,{className:"w-5 h-5",style:{color:s.color}})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:t.name}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.uploadedAt).toLocaleDateString()})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(__,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 text-gray-500 hover:text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition",children:A.jsx(Yd,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(Xs,{className:"w-4 h-4"})})]})]})}function m6({file:t,onView:e,onDownload:n,onDelete:r}){return A.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600",children:[A.jsx("img",{src:t.url,alt:t.name,className:"w-full h-32 object-cover cursor-pointer",onClick:()=>e(t)}),A.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(__,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(Yd,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 bg-red-500/50 hover:bg-red-500/70 rounded-full text-white transition",children:A.jsx(Xs,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-2 truncate",children:t.name})]})}const Zh={trinidad:"https://open.spotify.com/embed/playlist/2H61cIhlAeFVmreSMqvui3",jamaica:"https://open.spotify.com/embed/playlist/37i9dQZF1DX82pCGH5USnM",miami:"https://open.spotify.com/embed/playlist/37i9dQZF1DXS1X4r7p38D5",stlucia:"https://open.spotify.com/embed/playlist/37i9dQZF1DX62XscWx9t6h",barbados:"https://open.spotify.com/embed/playlist/37i9dQZF1DX23V8kYg8jC2",stkitts:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stcroix:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stthomas:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",default:"https://open.spotify.com/embed/playlist/28bCuQ5IhyPbmvJx30ZMea"};function g6({activeCarnivalId:t,isPremium:e}){const[n,r]=j.useState(!1),[s,i]=j.useState(!1),[o,l]=j.useState(!1),u=()=>{if(!t)return{key:"default",url:Zh.default};const p=Object.keys(Zh).find(C=>t.toLowerCase().includes(C)),w=Zh[p]||Zh.default;return{key:p||"default (fallback)",url:w}},{key:h,url:m}=u();return n?A.jsxs("div",{className:`fixed z-40 transition-all duration-300 shadow-2xl overflow-hidden bg-black/90 backdrop-blur-md border border-white/20 rounded-t-2xl sm:rounded-2xl
      ${s?"bottom-24 right-4 w-64 h-16 rounded-full":"bottom-0 sm:bottom-24 right-0 sm:right-4 w-full sm:w-80 h-[400px]"}`,children:[A.jsxs("div",{className:`flex items-center justify-between p-3 bg-gradient-to-r from-pink-600 to-purple-700 text-white
        ${s?"h-full":""}`,children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(_A,{className:"w-5 h-5 animate-pulse"}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-bold text-sm",children:s?"Carnival Vibes":o?"Team Soca Live":"Soca Vibes Player"}),!s&&A.jsx("button",{onClick:()=>l(!o),className:"text-[10px] bg-white/20 px-2 py-0.5 rounded-full hover:bg-white/30 transition text-left w-fit",children:o?"Switch to Playlist":"Switch to Live Radio"})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[s?A.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(W3,{className:"w-4 h-4"})}):A.jsx("button",{onClick:()=>i(!0),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(J3,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(as,{className:"w-4 h-4"})})]})]}),!s&&A.jsxs("div",{className:"h-[calc(100%-48px)] bg-black relative",children:[!e&&!o&&A.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-yellow-500/90 text-black text-xs font-bold px-2 py-1 text-center",children:"Upgrade directly in Spotify for ad-free listening"}),o?A.jsx("iframe",{src:"https://ice23.securenetsystems.net/TSDC",width:"100%",height:"100%",frameBorder:"0",allow:"autoplay; encrypted-media;",title:"Team Soca Live"}):A.jsx("iframe",{style:{borderRadius:"12px"},src:m,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Soca Playlist"})]})]}):A.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-24 right-4 z-40 bg-gradient-to-r from-pink-500 to-purple-600 text-white p-3 rounded-full shadow-lg hover:scale-110 transition-transform animate-bounce-slow","aria-label":"Open Vibes Player",children:A.jsx(_A,{className:"w-6 h-6"})})}function p6({users:t,onDeleteUser:e,onDeleteAll:n,onClose:r}){const[s,i]=j.useState(new Set),[o,l]=j.useState(!1),u=j.useMemo(()=>t.filter(w=>{var x,U;const C=((x=w.profile)==null?void 0:x.email)&&w.profile.email.trim()!=="",b=((U=w.profile)==null?void 0:U.displayName)&&w.profile.displayName.trim()!==""&&w.profile.displayName!=="User";return!C&&!b}),[t]),h=w=>{const C=new Set(s);C.has(w)?C.delete(w):C.add(w),i(C)},m=()=>{s.size===u.length?i(new Set):i(new Set(u.map(w=>w.id)))},p=()=>{o?(n(Array.from(s)),l(!1),i(new Set)):l(!0)};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-xl overflow-hidden animate-fadeIn",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-red-50 dark:bg-red-900/10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400",children:A.jsx(eU,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Database Cleanup"}),A.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:["Found ",u.length," incomplete records"]})]})]}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition",children:A.jsx(as,{className:"w-5 h-5 text-gray-500"})})]}),A.jsx("div",{className:"p-4",children:u.length===0?A.jsxs("div",{className:"text-center py-12 text-gray-500",children:[A.jsx(Xd,{className:"w-12 h-12 mx-auto mb-3 text-green-500 opacity-50"}),A.jsx("p",{children:"Database is clean! No incomplete users found."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:s.size>0&&s.size===u.length,onChange:m,className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),A.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select All (",u.length,")"]})]}),s.size>0&&A.jsxs("button",{onClick:p,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition ${o?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-300"}`,children:[A.jsx(Xs,{className:"w-4 h-4"}),o?"CONFIRM DELETION":`Delete (${s.size})`]})]}),A.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:A.jsxs("table",{className:"w-full text-sm text-left",children:[A.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-xs uppercase text-gray-500 font-medium sticky top-0 backdrop-blur-sm",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-3 w-10"}),A.jsx("th",{className:"p-3",children:"User ID"}),A.jsx("th",{className:"p-3",children:"Created"}),A.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),A.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:u.map(w=>{var C;return A.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition",children:[A.jsx("td",{className:"p-3",children:A.jsx("input",{type:"checkbox",checked:s.has(w.id),onChange:()=>h(w.id),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"})}),A.jsx("td",{className:"p-3 font-mono text-xs text-gray-500",children:w.id}),A.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-300",children:(C=w.createdAt)!=null&&C.toDate?w.createdAt.toDate().toLocaleDateString():"Unknown"}),A.jsx("td",{className:"p-3 text-right",children:A.jsx("button",{onClick:()=>e(w.id),className:"text-gray-400 hover:text-red-500 transition",title:"Delete single user",children:A.jsx(Xs,{className:"w-4 h-4"})})})]},w.id)})})]})})]})}),u.length>0&&A.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 border-t border-yellow-100 dark:border-yellow-900/20 flex items-start gap-3 text-xs text-yellow-800 dark:text-yellow-200",children:[A.jsx(p_,{className:"w-4 h-4 shrink-0 mt-0.5"}),A.jsxs("p",{children:[A.jsx("strong",{children:"Warning:"})," Deleting users is permanent. This will remove their record from the 'users' collection. If they sign in again, a new record will be created."]})]})]})}const y6=({onScheduleDetected:t})=>{const[e,n]=j.useState(!1),[r,s]=j.useState(""),[i,o]=j.useState(""),l=window.SpeechRecognition||window.webkitSpeechRecognition;if(!l)return null;const u=new l;u.continuous=!1,u.lang="en-US",u.interimResults=!1;const h=()=>{n(!0),o('Listening... Say "Add [Event] for [Day] at [Time]"'),u.start()},m=()=>{n(!1),u.stop()};u.onresult=w=>{const C=w.results[0][0].transcript;s(C),o("Processing..."),p(C),n(!1)},u.onerror=w=>{console.error("Voice Error:",w.error),n(!1),o("Error listening. Try again.")};const p=w=>{let C=w,b="",x="";const U=w.toLowerCase();(U.startsWith("add")||U.startsWith("schedule")||U.startsWith("remind me to"))&&(C=w.replace(/^(Add|Schedule|Remind me to)\s+/i,""));const T=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(const N of T)U.includes(N.toLowerCase())&&(b=N,C=C.replace(new RegExp(`(on|for)?\\s*${N}`,"i"),""));const E=C.match(/(\d{1,2}(?::\d{2})?\s?(?:am|pm)?)/i);E&&(E[0].toLowerCase().includes("am")||E[0].toLowerCase().includes("pm")||E[0].includes(":"))&&(x=E[0],C=C.replace(E[0],"")),C=C.replace(/\s+(at|for|on)\s*$/i,"").trim(),C=C.replace(/^\s+(at|for|on)\s+/i,"").trim(),C?(o(`Found: ${C} (${b||"No Day"} @ ${x||"No Time"})`),t({name:C,day:b||"Friday",time:x||"12:00 PM",note:`Voice: "${w}"`})):o("Could not understand event name.")};return A.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700 mt-4",children:[A.jsxs("button",{onClick:e?m:h,className:`
            flex items-center gap-2 px-6 py-3 rounded-full font-bold transition-all transform hover:scale-105
            ${e?"bg-red-500 text-white animate-pulse shadow-red-500/50 shadow-lg":"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg"}
        `,children:[e?A.jsx(Z3,{className:"w-5 h-5"}):A.jsx(q2,{className:"w-5 h-5"}),e?"Stop Listening":"Voice Add Event (Free)"]}),(r||i)&&A.jsxs("div",{className:"mt-3 text-center",children:[A.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r&&`"${r}"`}),A.jsx("p",{className:"text-xs text-blue-500 mt-1 font-mono",children:i})]})]})},Jh=[{id:"default-fete-map-banner",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-banner",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-banner",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-banner",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-fete-map-inline",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-inline",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-inline",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-inline",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"madd-colors-banner-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"banner",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1},{id:"madd-colors-inline-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"inline",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1}];function Xh({placement:t="banner",className:e="",onUpgradeClick:n}){const[r,s]=j.useState([]),[i,o]=j.useState(0),[l,u]=j.useState(!1),[h,m]=j.useState(!0),[p,w]=j.useState(null);if(j.useEffect(()=>{m(!0),w(null);const E=un(ke,"promoAds"),N=_c(E,rp("active","==",!0)),H=Vs(N,V=>{const M=[];V.forEach(P=>{M.push({id:P.id,...P.data()})});const I=M.filter(P=>P.placement===t),B=Jh.find(P=>P.id.includes("madd-colors")&&P.placement===t);let S=I;if(I.length===0?S=Jh.filter(P=>P.placement===t):B&&(I.some(D=>D.id.includes("madd-colors"))||(S=[...I,{...B,isDefault:!1}])),S.length>0)s(S);else{const P=Jh.filter(D=>D.placement===t);s(P)}m(!1)},V=>{console.error(`PromoAd [${t}] error:`,V);const M=Jh.filter(I=>I.placement===t);s(M),w(null),m(!1)});return()=>H()},[t]),j.useEffect(()=>{if(r.length<=1)return;const E=setInterval(()=>{o(N=>(N+1)%r.length)},8e3);return()=>clearInterval(E)},[r.length]),h||l||r.length===0)return null;const C=Math.min(i,r.length-1),b=r[C];if(!b||!b.imageUrl)return null;const x=b.mediaType==="video",U=b.id.includes("madd-colors")?!1:b.isDefault;b.id.includes("madd-colors")||b.linkUrl;const T=()=>{U&&n?n():b.linkUrl&&window.open(b.linkUrl,"_blank","noopener,noreferrer")};return A.jsx("div",{className:`p-4 relative ${e}`,children:A.jsxs("div",{onClick:T,className:`relative overflow-hidden rounded-lg shadow-md ${b.linkUrl||U?"cursor-pointer hover:shadow-lg transition-shadow":""}`,children:[x?A.jsx("video",{src:b.imageUrl,className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onError:E=>console.error("Video load error:",E)}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Promotion",className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},onError:E=>{console.error("Image load error:",b.imageUrl),E.target.style.display="none"}}),b.title&&A.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:[A.jsx("p",{className:"text-white text-sm font-bold truncate",children:b.title}),U&&A.jsx("p",{className:"text-yellow-300 text-xs font-medium",children:"Tap to upgrade to Premium"})]}),A.jsx("div",{className:"absolute top-1 left-1 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded",children:U?"PREMIUM":"AD"}),A.jsx("button",{onClick:E=>{E.stopPropagation(),u(!0)},className:"absolute top-1 right-1 p-1 bg-black/50 hover:bg-black/70 text-white rounded-full transition",children:A.jsx(as,{className:"w-3 h-3"})}),r.length>1&&A.jsx("div",{className:"absolute bottom-2 right-2 flex gap-1",children:r.map((E,N)=>A.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition ${N===i?"bg-white":"bg-white/50"}`},N))})]})})}const _E=[{id:"banner",label:"Top Banner"},{id:"sidebar",label:"Sidebar"},{id:"inline",label:"Inline (Between Sections)"}];function w6(){const[t,e]=j.useState([]),[n,r]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[u,h]=j.useState({title:"",linkUrl:"",placement:"banner"}),m=j.useRef(null);j.useEffect(()=>{const b=un(ke,"promoAds"),x=Vs(b,U=>{const T=[];U.forEach(E=>{T.push({id:E.id,...E.data()})}),T.sort((E,N)=>(N.createdAt||0)-(E.createdAt||0)),e(T)});return()=>x()},[]);const p=async b=>{const x=b.target.files[0];if(!x)return;const U=x.type.startsWith("video/"),T=U?10*1024*1024:5*1024*1024;if(x.size>T){alert(`File too large. Maximum size is ${U?"10MB for videos":"5MB for images"}.`);return}const E=["image/jpeg","image/png","image/gif","image/webp"],N=["video/mp4","video/webm"];if(![...E,...N].includes(x.type)){alert("Invalid file type. Please upload JPG, PNG, GIF, WebP, MP4, or WebM.");return}r(!0),i("Preparing upload...");const V=setTimeout(()=>{r(!1),i(""),alert("Upload timed out after 60 seconds. Please check your connection and try again."),m.current&&(m.current.value="")},6e4);try{const M=Date.now(),I=x.name.split(".").pop(),B=`promoAds/${M}.${I}`,S=ao(oo,B);i("Uploading to storage..."),console.log("Uploading file to Storage...",B),await Ac(S,x),i("Getting download URL...");const P=await lc(S);console.log("File uploaded, URL:",P);const D=x.type.startsWith("video/"),O={title:u.title||"",linkUrl:u.linkUrl||"",placement:u.placement,imageUrl:P,mediaType:D?"video":"image",storagePath:B,active:!0,createdAt:M};i("Saving ad data..."),console.log("Saving ad metadata to Firestore...",O);const R=await oc(un(ke,"promoAds"),O);console.log("Ad saved to Firestore successfully, ID:",R.id),clearTimeout(V),alert("Ad uploaded successfully!"),h({title:"",linkUrl:"",placement:"banner"}),l(!1),m.current&&(m.current.value="")}catch(M){clearTimeout(V),console.error("Upload error:",M),console.error("Error code:",M.code),console.error("Error message:",M.message),console.error("Full error:",JSON.stringify(M,null,2)),M.code==="storage/unauthorized"?alert("Upload failed: You do not have permission to upload ads. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):M.code==="storage/canceled"?alert("Upload was cancelled."):M.code==="permission-denied"?alert("Firestore permission denied: You do not have permission to save ad metadata. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):alert(`Failed to upload ad: ${M.code||"Unknown error"} - ${M.message||"Please try again."}`)}r(!1),i("")},w=async b=>{try{await pA(ze(ke,"promoAds",b.id),{active:!b.active})}catch(x){console.error("Toggle error:",x)}},C=async b=>{if(confirm("Delete this ad?"))try{if(b.storagePath){const x=ao(oo,b.storagePath);await h2(x).catch(()=>{})}await $d(ze(ke,"promoAds",b.id))}catch(x){console.error("Delete error:",x)}};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(Xf,{className:"w-5 h-5 text-orange-500"}),"Ad Manager"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload promotional ads and flyers for free users"})]}),A.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition",children:[A.jsx(Ol,{className:"w-4 h-4"}),"New Ad"]})]}),o&&A.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4 border border-orange-200 dark:border-orange-800 space-y-3",children:[A.jsxs("div",{className:"grid gap-3",children:[A.jsx("input",{type:"text",placeholder:"Ad title (optional)",value:u.title,onChange:b=>h({...u,title:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"url",placeholder:"Link URL (optional) - where to go when clicked",value:u.linkUrl,onChange:b=>h({...u,linkUrl:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:u.placement,onChange:b=>h({...u,placement:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:_E.map(b=>A.jsx("option",{value:b.id,children:b.label},b.id))})]}),A.jsx("input",{ref:m,type:"file",accept:"image/*,video/mp4,video/webm",onChange:p,className:"hidden",id:"ad-upload"}),A.jsx("label",{htmlFor:"ad-upload",className:`flex flex-col items-center justify-center gap-2 px-4 py-4 border-2 border-dashed rounded-lg cursor-pointer transition ${n?"border-gray-300 bg-gray-50 cursor-not-allowed":"border-orange-300 hover:border-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/30"}`,children:n?A.jsxs(A.Fragment,{children:[A.jsx(St,{className:"w-5 h-5 animate-spin text-orange-500"}),A.jsx("span",{className:"text-orange-600",children:s||"Uploading..."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Xf,{className:"w-5 h-5 text-orange-500"}),A.jsx(a6,{className:"w-5 h-5 text-orange-500"})]}),A.jsx("span",{className:"text-orange-600 font-medium",children:"Click to upload image or video"}),A.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Images: max 5MB (1200x300 recommended) | Videos: max 10MB (MP4, WebM)"})]})})]}),t.length>0?A.jsx("div",{className:"space-y-3",children:t.map(b=>{var x;return A.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-lg border transition ${b.active?"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 opacity-60"}`,children:[b.mediaType==="video"?A.jsx("video",{src:b.imageUrl,className:"w-20 h-14 object-cover rounded",muted:!0}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Ad",className:"w-20 h-14 object-cover rounded"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:b.title||"Untitled Ad"}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((x=_E.find(U=>U.id===b.placement))==null?void 0:x.label)||b.placement,b.linkUrl&&"  Has link"]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>w(b),className:`p-2 rounded-lg transition ${b.active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:b.active?"Active - Click to disable":"Inactive - Click to enable",children:b.active?A.jsx(nU,{className:"w-5 h-5"}):A.jsx(tU,{className:"w-5 h-5"})}),b.linkUrl&&A.jsx("a",{href:b.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(x_,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>C(b),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(Xs,{className:"w-4 h-4"})})]})]},b.id)})}):A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(Xf,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No ads uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload flyers and promotions to show to free users"})]})]})}const eu="carnival-planner-v1",v6=["djkrss1@gmail.com"],x6=ln(Pt);function _6(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),[o,l]=j.useState(""),[u,h]=j.useState(null),[m,p]=j.useState({total:0,premium:0,free:0}),[w,C]=j.useState(!1),[b,x]=j.useState(!1),[U,T]=j.useState(null),[E,N]=j.useState(!1),[H,V]=j.useState(!1),M=async Z=>{if(confirm("Are you sure you want to delete this user? This cannot be undone."))try{await Hy(async()=>{const{deleteDoc:se}=await Promise.resolve().then(()=>ZC);return{deleteDoc:se}},void 0).then(({deleteDoc:se})=>{se(ze(ke,"users",Z))}),e(se=>se.filter(Ae=>Ae.id!==Z)),p(se=>({...se,total:se.total-1,free:se.free-1}))}catch(se){console.error("Delete error:",se),alert("Failed to delete user: "+se.message)}},I=async Z=>{try{const{deleteDoc:se}=await Hy(async()=>{const{deleteDoc:me}=await Promise.resolve().then(()=>ZC);return{deleteDoc:me}},void 0);let Ae=0;for(const me of Z)await se(ze(ke,"users",me)),Ae++;e(me=>me.filter(G=>!Z.includes(G.id))),p(me=>({...me,total:me.total-Ae,free:me.free-Ae})),alert(`Successfully deleted ${Ae} users.`)}catch(se){console.error("Batch delete error:",se),alert("Batch delete failed partially: "+se.message)}},B=async()=>{N(!0),T("Migrating users from Firebase Auth...");try{const se=await Ot(x6,"migrateAuthUsers")({});T(se.data.message),await P()}catch(Z){console.error("Auth migration error:",Z),T(`Auth migration failed: ${Z.message}`)}N(!1)},S=async()=>{var Z,se,Ae,me,G,oe,Y,ve,ue,fe,pe,de,ae,Fe,et,Cr;x(!0),T("Starting migration...");try{const jt=new Map;let Vn=[];try{const wt=await Ua(un(ke,"user-activity"));console.log("[Migration] Found",wt.size,"user-activity records"),Vn.push(`${wt.size} activity records`);for(const vt of wt.docs){const Ze=vt.data(),rn=Ze.uid;if(rn)if(!jt.has(rn))jt.set(rn,{createdAt:Ze.loginAt,lastLoginAt:Ze.loginAt,email:Ze.email||null,displayName:Ze.displayName||null});else{const xt=jt.get(rn);((se=(Z=Ze.loginAt)==null?void 0:Z.toMillis)==null?void 0:se.call(Z))<((me=(Ae=xt.createdAt)==null?void 0:Ae.toMillis)==null?void 0:me.call(Ae))&&(xt.createdAt=Ze.loginAt),((oe=(G=Ze.loginAt)==null?void 0:G.toMillis)==null?void 0:oe.call(G))>((ve=(Y=xt.lastLoginAt)==null?void 0:Y.toMillis)==null?void 0:ve.call(Y))&&(xt.lastLoginAt=Ze.loginAt),!xt.email&&Ze.email&&(xt.email=Ze.email),!xt.displayName&&Ze.displayName&&(xt.displayName=Ze.displayName)}}}catch(wt){console.log("[Migration] Could not fetch user-activity:",wt.message)}try{const wt=await Ua(un(ke,"artifacts",eu,"users"));console.log("[Migration] Found",wt.size,"artifact users"),Vn.push(`${wt.size} artifact users`);for(const vt of wt.docs){const Ze=vt.id,rn=vt.data();jt.has(Ze)||jt.set(Ze,{createdAt:rn.createdAt||Ve.now(),lastLoginAt:rn.lastLoginAt||Ve.now(),email:null,displayName:null})}}catch(wt){console.log("[Migration] Could not fetch artifacts:",wt.message)}T(`Found ${jt.size} unique users (${Vn.join(", ")})...`);let kn=0;for(const[wt,vt]of jt)try{const Ze=ze(ke,"users",wt),rn=await ws(Ze);if(!rn.exists())await nr(Ze,vt),kn++;else{const xt=rn.data(),Sn={};vt.createdAt&&(!xt.createdAt||((fe=(ue=vt.createdAt).toMillis)==null?void 0:fe.call(ue))<((de=(pe=xt.createdAt)==null?void 0:pe.toMillis)==null?void 0:de.call(pe)))&&(Sn.createdAt=vt.createdAt),vt.lastLoginAt&&(!xt.lastLoginAt||((Fe=(ae=vt.lastLoginAt).toMillis)==null?void 0:Fe.call(ae))>((Cr=(et=xt.lastLoginAt)==null?void 0:et.toMillis)==null?void 0:Cr.call(et)))&&(Sn.lastLoginAt=vt.lastLoginAt),!xt.email&&vt.email&&(Sn.email=vt.email),!xt.displayName&&vt.displayName&&(Sn.displayName=vt.displayName),Object.keys(Sn).length>0&&(await nr(Ze,Sn,{merge:!0}),kn++)}}catch(Ze){console.error(`Failed to migrate user ${wt}:`,Ze)}T(`Migration complete! Migrated ${kn} users.`),await P()}catch(jt){console.error("Migration error:",jt),T(`Migration failed: ${jt.message}`)}x(!1)},P=async()=>{var Z,se,Ae,me,G;r(!0),i(null);try{console.log("[AdminAnalytics] Fetching users...");const oe=new Map;try{console.log("[AdminAnalytics] Attempting to fetch users collection...");const ue=await Ua(un(ke,"users"));console.log("[AdminAnalytics] SUCCESS: Found",ue.size,"user documents in users collection"),ue.docs.forEach(fe=>console.log("[AdminAnalytics] User doc:",fe.id,fe.data()));for(const fe of ue.docs){const pe=fe.id,de=fe.data();oe.set(pe,{id:pe,createdAt:de.createdAt,lastLoginAt:de.lastLoginAt,profile:{email:de.email||null,displayName:de.displayName||null},source:"users"})}}catch(ue){console.log("[AdminAnalytics] Could not fetch users collection:",ue.message)}try{console.log("[AdminAnalytics] Attempting to fetch user-activity collection...");const ue=await Ua(un(ke,"user-activity"));console.log("[AdminAnalytics] SUCCESS: Found",ue.size,"activity records");for(const fe of ue.docs){const pe=fe.data(),de=pe.uid;if(de&&!oe.has(de))oe.set(de,{id:de,createdAt:pe.loginAt||null,lastLoginAt:pe.loginAt||null,profile:{email:pe.email||null,displayName:pe.displayName||null},source:"user-activity"});else if(de&&oe.has(de)){const ae=oe.get(de);pe.loginAt&&(!ae.lastLoginAt||((se=(Z=pe.loginAt).toMillis)==null?void 0:se.call(Z))>((me=(Ae=ae.lastLoginAt).toMillis)==null?void 0:me.call(Ae)))&&(ae.lastLoginAt=pe.loginAt),!ae.profile.email&&pe.email&&(ae.profile.email=pe.email)}}}catch(ue){console.log("[AdminAnalytics] Could not fetch user-activity collection:",ue.message)}try{console.log("[AdminAnalytics] Attempting to fetch artifacts collection...");const ue=await Ua(un(ke,"artifacts",eu,"users"));console.log("[AdminAnalytics] SUCCESS: Found",ue.size,"users in artifacts collection");for(const fe of ue.docs){const pe=fe.id;if(!oe.has(pe)){const de=fe.data();oe.set(pe,{id:pe,createdAt:de.createdAt||null,lastLoginAt:de.lastLoginAt||null,profile:{email:null,displayName:null},source:"artifacts"})}}}catch(ue){console.log("[AdminAnalytics] Could not fetch artifacts collection:",ue.message)}const Y=[];for(const[ue,fe]of oe){try{const de=ze(ke,"users",ue,"profile","info"),ae=await ws(de);if(ae.exists()){const Fe=ae.data();fe.profile={...fe.profile,...Fe,email:Fe.email||fe.profile.email,displayName:Fe.displayName||fe.profile.displayName}}}catch{}fe.isPremium=!1,fe.carnivalCount=0;try{const de=ze(ke,"users",ue,"apps",eu),ae=await ws(de);if(ae.exists()){const Fe=ae.data();fe.isPremium=!!Fe.premiumActive,Fe.selectedCarnivals&&(fe.carnivalCount=Object.keys(Fe.selectedCarnivals).length)}}catch{try{const ae=ze(ke,"artifacts",eu,"users",ue),Fe=await ws(ae);if(Fe.exists()){const et=Fe.data();fe.isPremium=!!et.premiumActive,et.selectedCarnivals&&(fe.carnivalCount=Object.keys(et.selectedCarnivals).length)}}catch{}}const pe=((G=fe.profile)==null?void 0:G.email)||"";pe&&v6.includes(pe.toLowerCase())&&(fe.isPremium=!0,fe.premiumOverride=!0),Y.push(fe)}console.log("[AdminAnalytics] Total unique users found:",Y.length),Y.sort((ue,fe)=>{var ae,Fe,et,Cr;const pe=((Fe=(ae=ue.createdAt)==null?void 0:ae.toDate)==null?void 0:Fe.call(ae))||new Date(0);return(((Cr=(et=fe.createdAt)==null?void 0:et.toDate)==null?void 0:Cr.call(et))||new Date(0))-pe}),e(Y);const ve=Y.filter(ue=>ue.isPremium).length;p({total:Y.length,premium:ve,free:Y.length-ve})}catch(oe){console.error("Error fetching users:",oe),i(oe.message||"Failed to fetch users")}r(!1)};j.useEffect(()=>{P()},[]);const D=async()=>{C(!0),await P(),C(!1)},O=async(Z,se,Ae)=>{if(Ae){alert("This user has premium via email override. Cannot toggle manually.");return}try{const me=ze(ke,"users",Z,"apps",eu);await nr(me,{premiumActive:!se,premiumUpdatedAt:Ve.now(),premiumUpdatedBy:"admin-manual"},{merge:!0}),e(G=>G.map(oe=>oe.id===Z?{...oe,isPremium:!se}:oe)),p(G=>({...G,premium:se?G.premium-1:G.premium+1,free:se?G.free+1:G.free-1})),alert(`Premium ${se?"disabled":"enabled"} for user.`)}catch(me){console.error("Error toggling premium:",me),alert("Failed to update premium status: "+me.message)}},R=t.filter(Z=>{var G,oe;const se=((G=Z.profile)==null?void 0:G.email)||Z.id,Ae=((oe=Z.profile)==null?void 0:oe.displayName)||"",me=o.toLowerCase();return se.toLowerCase().includes(me)||Ae.toLowerCase().includes(me)});return n?A.jsxs("div",{className:"flex items-center justify-center py-12",children:[A.jsx(St,{className:"w-8 h-8 animate-spin text-blue-500"}),A.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading user data..."})]}):s?A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:s}),A.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(tr,{className:"w-5 h-5 text-blue-500"}),"User Analytics"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View and manage registered users"})]}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[A.jsxs("button",{onClick:B,disabled:E,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition disabled:opacity-50",children:[E?A.jsx(St,{className:"w-4 h-4 animate-spin"}):A.jsx(Yd,{className:"w-4 h-4"}),"Migrate Auth Users"]}),A.jsxs("button",{onClick:S,disabled:b,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:[b?A.jsx(St,{className:"w-4 h-4 animate-spin"}):A.jsx(tr,{className:"w-4 h-4"}),"Migrate Data"]}),A.jsxs("button",{onClick:()=>V(!H),className:`flex items-center gap-1 px-3 py-1.5 text-sm rounded-lg transition ${H?"bg-red-600 text-white hover:bg-red-700":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}`,children:[A.jsx(eU,{className:"w-4 h-4"}),H?"Close Cleanup":"Cleanup Tool"]}),A.jsxs("button",{onClick:D,disabled:w,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:[A.jsx(e6,{className:`w-4 h-4 ${w?"animate-spin":""}`}),"Refresh"]})]})]}),H&&A.jsx(p6,{users:t,onDeleteUser:M,onDeleteAll:I,onClose:()=>V(!1)}),U&&A.jsx("div",{className:`p-3 rounded-lg text-sm ${U.includes("failed")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:U}),A.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(tr,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Total Users"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.total})]}),A.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(eg,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Premium"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.premium})]}),A.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(tr,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Free"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.free})]})]}),A.jsxs("div",{className:"relative",children:[A.jsx(J2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search by email or name...",value:o,onChange:Z=>l(Z.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),A.jsx("div",{className:"space-y-2",children:R.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:o?"No users match your search":"No users found"}):R.map(Z=>{var se,Ae,me,G;return A.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[A.jsxs("div",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600",onClick:()=>h(u===Z.id?null:Z.id),children:[(se=Z.profile)!=null&&se.avatarUrl?A.jsx("img",{src:Z.profile.avatarUrl,alt:"",className:"w-10 h-10 rounded-full object-cover"}):A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-500 flex items-center justify-center",children:A.jsx(tr,{className:"w-5 h-5 text-gray-400 dark:text-gray-300"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:((Ae=Z.profile)==null?void 0:Ae.displayName)||"No name"}),Z.isPremium&&A.jsxs("span",{className:`px-1.5 py-0.5 text-xs rounded-full flex items-center gap-1 ${Z.premiumOverride?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:[A.jsx(eg,{className:"w-3 h-3"}),Z.premiumOverride?"Admin":"Premium"]})]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:((me=Z.profile)==null?void 0:me.email)||Z.id})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[Z.carnivalCount>0&&A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[A.jsx(br,{className:"w-4 h-4"}),Z.carnivalCount," carnival",Z.carnivalCount!==1?"s":""]}),u===Z.id?A.jsx(D3,{className:"w-5 h-5 text-gray-400"}):A.jsx(j3,{className:"w-5 h-5 text-gray-400"})]})]}),u===Z.id&&A.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"User ID"}),A.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 truncate",children:Z.id})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:((G=Z.profile)==null?void 0:G.bio)||"No bio"})]})]}),A.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-600",children:[A.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Premium Status"}),A.jsx("button",{onClick:oe=>{oe.stopPropagation(),O(Z.id,Z.isPremium,Z.premiumOverride)},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition ${Z.isPremium?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:Z.isPremium?A.jsxs(A.Fragment,{children:[A.jsx(nU,{className:"w-5 h-5"}),A.jsx("span",{children:"Premium Active"})]}):A.jsxs(A.Fragment,{children:[A.jsx(tU,{className:"w-5 h-5"}),A.jsx("span",{children:"Free User"})]})})]})]})]},Z.id)})}),A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:["Showing ",R.length," of ",t.length," users"]})]})}const B6=[{name:"TRIBE Carnival",carnivalId:"trinidad",type:"mas",website:"https://tribecarnival.com",tags:["Premium","High Energy","Popular"]},{name:"The Lost Tribe",carnivalId:"trinidad",type:"mas",website:"https://losttribecarnival.com",tags:["Creative","Thematic","Premium"]},{name:"Bliss Carnival",carnivalId:"trinidad",type:"mas",website:"https://blisscarnival.com",tags:["Premium","Exclusive"]},{name:"YUMA Vibe",carnivalId:"trinidad",type:"mas",website:"https://yumavibe.com",tags:["Young","Energetic","Party"]},{name:"Harts Carnival",carnivalId:"trinidad",type:"mas",website:"https://hartscarnival.com",tags:["Traditional","Family","Fun"]},{name:"Pure Carnival",carnivalId:"trinidad",type:"mas",website:"https://pure.carnival-tribe.com",tags:["Fun","All Inclusive"]},{name:"Paparazzi Carnival",carnivalId:"trinidad",type:"mas",website:"https://paparazzicarnival.com",tags:["Thematic","Design"]},{name:"Ronnie and Caro",carnivalId:"trinidad",type:"mas",website:"https://ronnieandcaro.com",tags:["Big Band","Winner"]},{name:"K2K Alliance",carnivalId:"trinidad",type:"mas",website:"https://k2k-alliance.com",tags:["Artistic","Couture"]},{name:"Resonate Carnival",carnivalId:"trinidad",type:"mas",tags:["New","Vibes"]},{name:"Showtime Carnival",carnivalId:"trinidad",type:"mas",tags:["Affordable","Fun"]},{name:"Spirit Mas",carnivalId:"trinidad",type:"mas",tags:["Inaugural","Exciting"]},{name:"Exousia Mas",carnivalId:"trinidad",type:"mas",tags:["Small Band","Detailed"]},{name:"Just Wee and Friends",carnivalId:"trinidad",type:"mas",tags:["J'ouvert","Fun"]},{name:"Xodus Carnival",carnivalId:"jamaica",type:"mas",website:"https://xoduscarnival.com",tags:["Premium","Big Band"]},{name:"Bacchanal Jamaica",carnivalId:"jamaica",type:"mas",website:"https://bacchanaljamaica.com",tags:["Legacy","Big Band"]},{name:"Xaymaca International",carnivalId:"jamaica",type:"mas",website:"https://xaymacainternational.com",tags:["Premium","Vibes"]},{name:"Yardmas Carnival",carnivalId:"jamaica",type:"mas",website:"https://yardmas.com",tags:["New","Local"]},{name:"GenX Jamaica",carnivalId:"jamaica",type:"mas",website:"https://genxcarnival.com",tags:["Miami Link","Fun"]},{name:"Ocho Rios Carnival",carnivalId:"jamaica",type:"mas",tags:["North Coast","Holiday"]},{name:"GenX Carnival",carnivalId:"miami",type:"mas",website:"https://genx.carnival-tribe.com",tags:["Big Band","Winner"]},{name:"Ramajay Mas",carnivalId:"miami",type:"mas",website:"https://ramajaymas.com",tags:["Vibes","Party"]},{name:"Revel Nation",carnivalId:"miami",type:"mas",tags:["Premium","Service"]},{name:"One Island Band",carnivalId:"miami",type:"mas",website:"https://oneislandband.com",tags:["Big Band","Fun"]},{name:"Freaks Mas",carnivalId:"miami",type:"mas",website:"https://freaksmas.com",tags:["Energy","New York Link"]},{name:"Dingolay Mas",carnivalId:"miami",type:"mas",tags:["Vibrant","Fun"]},{name:"K-Paya",carnivalId:"miami",type:"mas",tags:["Party","Vibes"]},{name:"Savage Mas",carnivalId:"miami",type:"mas",tags:["Sexy","Fun"]},{name:"Euphoria Mas",carnivalId:"miami",type:"mas",tags:["Service","Quality"]},{name:"UCOM (United Colours of Mas)",carnivalId:"nottinghill",type:"mas",website:"https://unitedcoloursofmas.com",tags:["Modern","Premium"]},{name:"Chocolate Nation",carnivalId:"nottinghill",type:"mas",website:"https://chocolatenationmas.com",tags:["Vibes","Service"]},{name:"Mangrove Carnival",carnivalId:"nottinghill",type:"mas",tags:["Traditional","Community"]},{name:"Gemz Mas",carnivalId:"nottinghill",type:"mas",tags:["Sexy","Fun"]},{name:"Caribbean Sessions",carnivalId:"nottinghill",type:"mas",tags:["Party","Inclusive"]},{name:"Colours Carnival",carnivalId:"nottinghill",type:"mas",tags:["Colourful","Fun"]},{name:"Saldenah Carnival",carnivalId:"toronto",type:"mas",website:"https://saldenahcarnival.com",tags:["Legendary","Big Band","Winner"]},{name:"Carnival Nationz",carnivalId:"toronto",type:"mas",website:"https://carnivalnationz.com",tags:["Big Band","Vibes"]},{name:"Toronto Revellers",carnivalId:"toronto",type:"mas",website:"https://torontorevellers.com",tags:["Community","Fun"]},{name:"Tribal Carnival",carnivalId:"toronto",type:"mas",tags:["Culture","Mas"]},{name:"Venom Mas",carnivalId:"toronto",type:"mas",tags:["Sexy","Party"]},{name:"Fantazia",carnivalId:"toronto",type:"mas",tags:["Fun","Service"]},{name:"Krave The Band",carnivalId:"barbados",type:"mas",website:"https://kravetheband.com",tags:["Premium","Luxury"]},{name:"Aura Experience",carnivalId:"barbados",type:"mas",website:"https://auraexperience.com",tags:["Rihanna","Vibes"]},{name:"Zulu International",carnivalId:"barbados",type:"mas",tags:["Fun","Party"]},{name:"Baje International",carnivalId:"barbados",type:"mas",tags:["Legacy","Service"]},{name:"Erup The Band",carnivalId:"barbados",type:"mas",tags:["Energy","Soca"]},{name:"Oro Luxury Carnival",carnivalId:"grenada",type:"mas",tags:["Premium","Luxury"]},{name:"Xtravo",carnivalId:"grenada",type:"mas",tags:["Party","Vibes"]},{name:"Lavish The Band",carnivalId:"grenada",type:"mas",tags:["Service","Costumes"]},{name:"Legends Carnival",carnivalId:"stlucia",type:"mas",tags:["Big Band","Fun"]},{name:"Xuovo",carnivalId:"stlucia",type:"mas",tags:["Vibes","Party"]},{name:"Fuzion Mas",carnivalId:"stlucia",type:"mas",tags:["Premium","Service"]},{name:"Insane Carnival",carnivalId:"antigua",type:"mas",tags:["Fun","Party"]},{name:"Myst Carnival",carnivalId:"antigua",type:"mas",tags:["Sexy","Vibes"]},{name:"Seaduced",carnivalId:"antigua",type:"mas",tags:["Luxury","Premium"]},{name:"Madd Colors Carnival",carnivalId:"atlanta",type:"mas",website:"https://maddcolorscarnival.com/",tags:["Premium","#1 Band"]},{name:"We Kinda Ting",carnivalId:"atlanta",type:"mas",tags:["Fun","Local"]},{name:"Savage Mas",carnivalId:"atlanta",type:"mas",tags:["Sexy","Vibes"]},{name:"Panache",carnivalId:"atlanta",type:"mas",tags:["Service","Costumes"]}];function b6({carnivalId:t}){const[e,n]=j.useState(""),[r,s]=j.useState("all"),i=j.useMemo(()=>B6.filter(l=>{if(t&&l.carnivalId!==t)return!1;const u=e.toLowerCase(),h=l.name.toLowerCase().includes(u)||l.tags.some(p=>p.toLowerCase().includes(u)),m=r==="all"||l.type===r;return h&&m}),[t,e,r]),o=l=>{switch(l){case"trinidad":return"Trinidad";case"jamaica":return"Jamaica";case"miami":return"Miami";case"nottinghill":return"London";case"toronto":return"Toronto";case"barbados":return"Barbados";case"grenada":return"Grenada";case"antigua":return"Antigua";case"stlucia":return"St. Lucia";case"atlanta":return"Atlanta";default:return l}};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:A.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[A.jsx(pE,{className:"w-5 h-5 text-purple-500"}),"Costume Bands"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Find your perfect fit for ",t?o(t):"Carnival"]})]}),A.jsxs("div",{className:"relative w-full md:w-64",children:[A.jsx(J2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search bands...",value:e,onChange:l=>n(l.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 transition"})]})]})}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((l,u)=>A.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-300 hover:border-purple-300 dark:hover:border-purple-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:l.name}),!t&&A.jsxs("span",{className:"text-xs font-medium text-gray-500 flex items-center gap-1 mt-1",children:[A.jsx(br,{className:"w-3 h-3"}),o(l.carnivalId)]})]}),l.website&&A.jsx("a",{href:l.website,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-full hover:bg-purple-100 hover:text-purple-600 dark:hover:bg-purple-900/40 dark:hover:text-purple-400 transition",children:A.jsx(x_,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:l.tags.map((h,m)=>A.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-300 rounded-md",children:h},m))})]},u))}),i.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(pE,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),A.jsx("p",{children:"No bands found matching your search."})]})]})}function C6({onGetStarted:t,logo:e,onTryDemo:n}){const[r,s]=j.useState(0),[i,o]=j.useState({x:0,y:0});return j.useEffect(()=>{const l=()=>s(window.scrollY),u=h=>o({x:h.clientX,y:h.clientY});return window.addEventListener("scroll",l),window.addEventListener("mousemove",u),()=>{window.removeEventListener("scroll",l),window.removeEventListener("mousemove",u)}},[]),A.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden selection:bg-pink-500 selection:text-white font-sans",children:[A.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[A.jsx("div",{className:"absolute w-[800px] h-[800px] bg-indigo-600/20 rounded-full blur-[120px] mix-blend-screen transition-transform duration-100 ease-out",style:{top:-200,left:-200,transform:`translate(${i.x*.02}px, ${i.y*.02}px)`}}),A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-pink-600/20 rounded-full blur-[100px] mix-blend-screen transition-transform duration-100 ease-out",style:{bottom:-100,right:-100,transform:`translate(${i.x*-.03}px, ${i.y*-.03}px)`}})]}),A.jsx("nav",{className:"fixed top-0 w-full z-50 px-6 py-4 backdrop-blur-md border-b border-white/5 bg-black/50",children:A.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-pink-500 to-indigo-600 flex items-center justify-center font-bold text-sm",children:"CP"}),A.jsx("span",{className:"font-bold tracking-tight text-white/90",children:"Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-sm font-semibold transition-all",children:"Log In"})]})}),A.jsxs("section",{className:"relative z-10 pt-40 pb-20 px-6 max-w-7xl mx-auto flex flex-col items-center text-center",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm mb-8 animate-fadeIn",children:[A.jsxs("span",{className:"relative flex h-2 w-2",children:[A.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),A.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),A.jsx("span",{className:"text-xs font-medium text-gray-400 tracking-wide uppercase",children:"V2.0 Now Live"})]}),A.jsxs("h1",{className:"text-6xl md:text-8xl font-black tracking-tighter mb-8 bg-clip-text text-transparent bg-gradient-to-b from-white via-white to-gray-500 leading-tight",children:["The Operating System",A.jsx("br",{}),A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500",children:"For Carnival."})]}),A.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mb-12 leading-relaxed",children:"The all-in-one workspace for your next carnival. Budget, schedule, squad sync, and ticketing  seamlessly integrated."}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[A.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-white text-black rounded-full font-bold text-lg shadow-[0_0_40px_-10px_rgba(255,255,255,0.3)] hover:shadow-[0_0_60px_-10px_rgba(255,255,255,0.5)] transition-all transform hover:scale-105",children:["Start Planning For Free",A.jsx(Zf,{className:"inline-block ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),A.jsx("button",{onClick:n,className:"px-8 py-4 bg-white/10 hover:bg-white/20 border border-white/10 text-white rounded-full font-bold text-lg backdrop-blur-sm transition-all transform hover:scale-105",children:"Try Live Demo"})]}),A.jsxs("div",{className:"mt-20 relative w-full max-w-5xl aspect-[16/9] bg-gray-900/50 rounded-xl border border-white/10 backdrop-blur-sm overflow-hidden shadow-2xl group",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"}),A.jsxs("div",{className:"absolute top-4 left-4 right-4 h-4 flex gap-2",children:[A.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]}),A.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:A.jsxs("div",{className:"text-center space-y-4",children:[A.jsx("div",{className:"inline-block p-4 rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 shadow-xl mb-4 group-hover:scale-110 transition-transform duration-500",children:A.jsx(Ed,{className:"w-12 h-12 text-white"})}),A.jsx("div",{className:"text-2xl font-bold text-white/50",children:"Mission Control"})]})})]})]}),A.jsx("div",{className:"w-full bg-white/5 border-y border-white/5 py-4 overflow-hidden relative z-10 backdrop-blur-sm",children:A.jsxs("div",{className:"flex animate-marquee whitespace-nowrap gap-12 text-sm font-medium text-gray-400 uppercase tracking-widest",children:[A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"}),A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"})]})}),A.jsxs("section",{className:"relative z-10 py-32 px-6 max-w-7xl mx-auto",children:[A.jsx("div",{className:"mb-16",children:A.jsxs("h2",{className:"text-4xl md:text-5xl font-black mb-6",children:["Everything you need.",A.jsx("br",{}),"Nothing you don't."]})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]",children:[A.jsxs("div",{className:"md:col-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col justify-between",children:[A.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-20 group-hover:opacity-40 transition-opacity",children:A.jsx(tr,{className:"w-48 h-48 text-indigo-500 transform rotate-12 translate-x-12 -translate-y-12"})}),A.jsxs("div",{children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center mb-4 text-indigo-400",children:A.jsx(tr,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Squad Sync"}),A.jsx("p",{className:"text-gray-400 max-w-sm",children:"Real-time collaboration. See when your friends add events, update budgets, or get road ready."})]}),A.jsxs("div",{className:"flex -space-x-4 mt-8",children:[[1,2,3,4].map(l=>A.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-gray-500 transform transition-transform group-hover:translate-x-2",style:{transitionDelay:`${l*50}ms`},children:"User"},l)),A.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-600 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-white z-10",children:"+3"})]})]}),A.jsxs("div",{className:"md:row-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center mb-4 text-green-400",children:A.jsx(dp,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Smart Budget"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Track every costume payment, fete ticket, and flight."}),A.jsxs("div",{className:"mt-auto space-y-4",children:[A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Costume Deposit"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$300"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-3/4 h-full rounded-full"})})]}),A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Flight (MIA  POS)"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$850"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-full h-full rounded-full"})})]})]})]}),A.jsxs("div",{className:"relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"}),A.jsx("div",{className:"absolute inset-0 opacity-30 grayscale group-hover:grayscale-0 transition-all duration-700",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0)",backgroundSize:"24px 24px"}}),A.jsxs("div",{className:"relative z-20 h-full flex flex-col justify-end",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center mb-4 text-purple-400",children:A.jsx(q3,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Live Map"}),A.jsx("p",{className:"text-gray-400",children:"Discover events near your AirBnb."})]})]}),A.jsxs("div",{className:"col-span-1 md:col-span-2 relative group overflow-hidden rounded-3xl bg-gradient-to-br from-teal-900 to-gray-900 border border-white/10 hover:border-teal-500/30 transition-all p-8 flex items-center justify-between",children:[A.jsxs("div",{className:"max-w-xs",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-500/20 flex items-center justify-center mb-4 text-teal-400",children:A.jsx(up,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Soca Passport"}),A.jsx("p",{className:"text-gray-400",children:"Your digital carnival identity. Syncs seamlessly with the Soca Passport app."})]}),A.jsxs("div",{className:"hidden sm:block relative w-64 h-40 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 shadow-2xl transform rotate-3 group-hover:rotate-0 transition-transform duration-500",children:[A.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 rounded-full bg-teal-500"}),A.jsx("div",{className:"absolute top-4 right-4 text-[10px] font-mono opacity-50",children:"9438-2910"}),A.jsx("div",{className:"absolute bottom-4 left-4 text-xs font-bold",children:"FEBUARY 2026"})]})]})]})]}),A.jsxs("section",{className:"relative z-10 py-32 text-center px-6",children:[A.jsx("h2",{className:"text-5xl md:text-7xl font-black mb-8",children:"Ready to jump?"}),A.jsx("button",{onClick:t,className:"px-10 py-5 bg-white text-black rounded-full font-bold text-xl hover:scale-105 transition-transform shadow-2xl",children:"Get Started Now"}),A.jsxs("div",{className:"mt-16 text-sm text-gray-500 flex flex-col md:flex-row items-center justify-center gap-8",children:[A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(B_,{className:"w-4 h-4"})," Global Support"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(eh,{className:"w-4 h-4"})," Secure Data"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(_A,{className:"w-4 h-4"})," Vibes Included"]})]})]}),A.jsx("div",{className:"w-full border-t border-white/10 p-8 text-center text-gray-600 text-sm",children:" 2026 Carnival Planner. Built for the culture."})]})}const Qa="Carnival Planner",gr="support@carnival-planner.com",hp="December 12, 2025";function E6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Privacy Policy",icon:eh,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(He,{title:"1. Introduction",children:A.jsxs("p",{children:[Qa,' ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application and website (collectively, the "Service").']})}),A.jsxs(He,{title:"2. Information We Collect",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Personal Information"}),A.jsx("p",{className:"mb-4",children:"When you sign in with Google, we collect:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Email address"}),A.jsx("li",{children:"Display name"}),A.jsx("li",{children:"Profile picture URL"}),A.jsx("li",{children:"Google account unique identifier"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 User-Generated Content"}),A.jsx("p",{className:"mb-4",children:"Information you voluntarily provide includes:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Carnival planning data (budgets, schedules, packing lists)"}),A.jsx("li",{children:"Costume and band information"}),A.jsx("li",{children:"Squad member names and coordination data"}),A.jsx("li",{children:"Uploaded media files (tickets, photos, documents)"}),A.jsx("li",{children:"Map pins and location notes"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Payment Information"}),A.jsx("p",{children:"For premium subscriptions, payment processing is handled securely by Stripe. We do not store your credit card numbers. We receive only transaction confirmation, subscription status, and billing email from Stripe."})]}),A.jsx(He,{title:"3. How We Use Your Information",children:A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsx("li",{children:"To provide and maintain the Service"}),A.jsx("li",{children:"To authenticate your identity via Google Sign-In"}),A.jsx("li",{children:"To process premium subscription payments via Stripe"}),A.jsx("li",{children:"To sync your carnival planning data across devices"}),A.jsx("li",{children:"To send push notifications for squad alerts (if enabled)"}),A.jsx("li",{children:"To improve and optimize our Service"}),A.jsx("li",{children:"To respond to your inquiries and support requests"})]})}),A.jsxs(He,{title:"4. Data Storage and Security",children:[A.jsx("p",{className:"mb-4",children:"Your data is stored using Firebase services provided by Google:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Manages secure sign-in"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Cloud Firestore:"})," Stores your planning data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Storage:"})," Stores uploaded media files"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Cloud Messaging:"})," Delivers push notifications"]})]}),A.jsx("p",{children:"We implement industry-standard security measures including encryption in transit (TLS) and at rest. Firebase services are SOC 2 and ISO 27001 certified."})]}),A.jsxs(He,{title:"5. Third-Party Services",children:[A.jsx("p",{className:"mb-4",children:"We use the following third-party services:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Google (Firebase):"})," Authentication, database, storage, and hosting. ",A.jsx("a",{href:"https://firebase.google.com/support/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Firebase Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing. ",A.jsx("a",{href:"https://stripe.com/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Stripe Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"OpenStreetMap:"})," Map tiles for the Fete Map feature. ",A.jsx("a",{href:"https://wiki.osmfoundation.org/wiki/Privacy_Policy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"OSM Privacy Policy"})]})]})]}),A.jsxs(He,{title:"6. Your Rights (GDPR/CCPA)",children:[A.jsx("p",{className:"mb-4",children:"Depending on your location, you may have the following rights:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Rectification:"})," Correct inaccurate personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Erasure:"})," Request deletion of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Portability:"})," Receive your data in a portable format"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Opt-out:"})," Opt out of certain data processing"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Non-discrimination:"})," We will not discriminate against you for exercising your rights"]})]}),A.jsxs("p",{className:"mt-4",children:["To exercise these rights, contact us at ",A.jsx("a",{href:`mailto:${gr}`,className:"text-pink-400 hover:underline",children:gr}),"."]})]}),A.jsx(He,{title:"7. Data Retention",children:A.jsx("p",{children:"We retain your personal data for as long as your account is active. If you delete your account, we will delete your data within 30 days, except where we are legally required to retain it."})}),A.jsx(He,{title:"8. Children's Privacy",children:A.jsx("p",{children:"Our Service is not intended for children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected such information, please contact us immediately."})}),A.jsx(He,{title:"9. Changes to This Policy",children:A.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'})}),A.jsxs(He,{title:"10. Contact Us",children:[A.jsx("p",{children:"If you have questions about this Privacy Policy, please contact us at:"}),A.jsx("p",{className:"mt-2",children:A.jsx("a",{href:`mailto:${gr}`,className:"text-pink-400 hover:underline",children:gr})})]})]})}function I6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Terms of Service",icon:V3,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(He,{title:"1. Acceptance of Terms",children:A.jsxs("p",{children:["By accessing or using ",Qa,' ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.']})}),A.jsx(He,{title:"2. Description of Service",children:A.jsxs("p",{children:[Qa," is a Progressive Web App that helps users plan and organize Caribbean carnival events. The Service includes free features (budget planning, scheduling, squad coordination) and premium subscription features (interactive maps, media vault, offline mode)."]})}),A.jsxs(He,{title:"3. User Accounts",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Registration"}),A.jsx("p",{className:"mb-4",children:"You must sign in with a valid Google account to use the Service. You are responsible for maintaining the security of your account."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Account Responsibilities"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"You must provide accurate information"}),A.jsx("li",{children:"You are responsible for all activities under your account"}),A.jsx("li",{children:"You must notify us immediately of any unauthorized use"})]})]}),A.jsxs(He,{title:"4. Premium Subscriptions",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.1 Subscription Plans"}),A.jsx("p",{className:"mb-4",children:"We offer monthly ($4.99/month) and yearly ($39.99/year) subscription plans. Prices are subject to change with reasonable notice."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.2 Billing"}),A.jsx("p",{className:"mb-4",children:"Subscriptions are billed in advance on a recurring basis. Payment is processed through Stripe. Your subscription will automatically renew unless you cancel before the renewal date."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.3 Cancellation"}),A.jsx("p",{children:"You may cancel your subscription at any time. You will continue to have access to premium features until the end of your current billing period. See our Refund Policy for details."})]}),A.jsxs(He,{title:"5. User Content",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.1 Your Content"}),A.jsx("p",{className:"mb-4",children:"You retain ownership of all content you upload to the Service (schedules, media, notes). By uploading content, you grant us a limited license to store, display, and process it to provide the Service."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.2 Content Restrictions"}),A.jsx("p",{className:"mb-2",children:"You agree not to upload content that:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Is illegal, harmful, or offensive"}),A.jsx("li",{children:"Infringes on intellectual property rights"}),A.jsx("li",{children:"Contains malware or malicious code"}),A.jsx("li",{children:"Violates others' privacy"})]})]}),A.jsxs(He,{title:"6. Acceptable Use",children:[A.jsx("p",{className:"mb-2",children:"You agree not to:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Use the Service for any unlawful purpose"}),A.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),A.jsx("li",{children:"Interfere with or disrupt the Service"}),A.jsx("li",{children:"Reverse engineer or decompile the Service"}),A.jsx("li",{children:"Use automated systems to access the Service without permission"})]})]}),A.jsx(He,{title:"7. Intellectual Property",children:A.jsxs("p",{children:["The Service, including its design, features, and content (excluding user content), is owned by ",Qa," and protected by intellectual property laws. You may not copy, modify, or distribute our intellectual property without permission."]})}),A.jsx(He,{title:"8. Disclaimer of Warranties",children:A.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE. YOUR USE OF THE SERVICE IS AT YOUR OWN RISK.'})}),A.jsx(He,{title:"9. Limitation of Liability",children:A.jsxs("p",{children:["TO THE MAXIMUM EXTENT PERMITTED BY LAW, ",Qa.toUpperCase()," SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE, EVEN IF WE HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."]})}),A.jsx(He,{title:"10. Termination",children:A.jsx("p",{children:"We may terminate or suspend your account at any time for violation of these Terms. You may delete your account at any time. Upon termination, your right to use the Service will immediately cease."})}),A.jsx(He,{title:"11. Governing Law",children:A.jsxs("p",{children:["These Terms shall be governed by the laws of the jurisdiction in which ",Qa," operates, without regard to conflict of law principles."]})}),A.jsx(He,{title:"12. Changes to Terms",children:A.jsx("p",{children:"We may modify these Terms at any time. We will notify you of significant changes via email or in-app notification. Continued use of the Service after changes constitutes acceptance of the new Terms."})}),A.jsx(He,{title:"13. Contact",children:A.jsxs("p",{children:["For questions about these Terms, contact us at ",A.jsx("a",{href:`mailto:${gr}`,className:"text-pink-400 hover:underline",children:gr}),"."]})})]})}function T6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Cookie Policy",icon:M3,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(He,{title:"1. What Are Cookies",children:A.jsx("p",{children:"Cookies are small text files stored on your device when you visit a website. They help websites remember your preferences and improve your experience."})}),A.jsxs(He,{title:"2. How We Use Cookies",children:[A.jsxs("p",{className:"mb-4",children:[Qa," uses cookies and similar technologies for the following purposes:"]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Essential Cookies (Required)"}),A.jsx("p",{className:"mb-4",children:"These cookies are necessary for the Service to function and cannot be disabled:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Maintains your signed-in session securely"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Session Management:"})," Remembers your authentication state"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Functional Cookies"}),A.jsx("p",{className:"mb-4",children:"These cookies enhance your experience:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Preferences:"})," Remembers your dark mode setting"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Local Storage:"})," Caches carnival data for offline access (Premium feature)"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Third-Party Cookies"}),A.jsx("p",{className:"mb-2",children:"Our third-party services may set their own cookies:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase/Google:"})," Authentication and analytics"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing security"]})]})]}),A.jsx(He,{title:"3. Cookie Details",children:A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left text-sm mb-4",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b border-gray-700",children:[A.jsx("th",{className:"py-2 pr-4",children:"Cookie Name"}),A.jsx("th",{className:"py-2 pr-4",children:"Purpose"}),A.jsx("th",{className:"py-2 pr-4",children:"Duration"}),A.jsx("th",{className:"py-2",children:"Type"})]})}),A.jsxs("tbody",{className:"text-gray-400",children:[A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"firebase-auth"}),A.jsx("td",{className:"py-2 pr-4",children:"User authentication"}),A.jsx("td",{className:"py-2 pr-4",children:"Session"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"__stripe_mid"}),A.jsx("td",{className:"py-2 pr-4",children:"Fraud prevention"}),A.jsx("td",{className:"py-2 pr-4",children:"1 year"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"darkMode"}),A.jsx("td",{className:"py-2 pr-4",children:"Theme preference"}),A.jsx("td",{className:"py-2 pr-4",children:"Persistent"}),A.jsx("td",{className:"py-2",children:"Functional"})]})]})]})})}),A.jsxs(He,{title:"4. Local Storage",children:[A.jsx("p",{className:"mb-4",children:"In addition to cookies, we use browser local storage for:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Caching carnival data for offline access (Premium)"}),A.jsx("li",{children:"Storing FCM tokens for push notifications"}),A.jsx("li",{children:"Temporary UI state"})]})]}),A.jsxs(He,{title:"5. Managing Cookies",children:[A.jsx("p",{className:"mb-4",children:"You can manage cookies through your browser settings:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Chrome:"})," Settings  Privacy and security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firefox:"})," Settings  Privacy & Security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Safari:"})," Preferences  Privacy  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Edge:"})," Settings  Cookies and site permissions"]})]}),A.jsx("p",{className:"mt-4 text-yellow-400",children:"Note: Disabling essential cookies may prevent you from using the Service."})]}),A.jsx(He,{title:"6. Updates to This Policy",children:A.jsx("p",{children:"We may update this Cookie Policy to reflect changes in our practices or for legal reasons. Check this page periodically for updates."})}),A.jsx(He,{title:"7. Contact",children:A.jsxs("p",{children:["For questions about our use of cookies, contact us at ",A.jsx("a",{href:`mailto:${gr}`,className:"text-pink-400 hover:underline",children:gr}),"."]})})]})}function k6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Refund Policy",icon:up,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(He,{title:"1. Premium Subscription",children:A.jsxs("p",{children:[Qa," offers premium subscriptions at $4.99/month or $39.99/year. This policy explains our refund terms for these subscriptions."]})}),A.jsxs(He,{title:"2. Subscription Cancellation",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 How to Cancel"}),A.jsx("p",{className:"mb-4",children:"You can cancel your subscription at any time by:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:["Contacting us at ",A.jsx("a",{href:`mailto:${gr}`,className:"text-pink-400 hover:underline",children:gr})]}),A.jsx("li",{children:"Managing your subscription through Stripe's customer portal (link provided in your confirmation email)"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Effect of Cancellation"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Your premium access continues until the end of your current billing period"}),A.jsx("li",{children:"You will not be charged again after cancellation"}),A.jsx("li",{children:"No partial refunds are provided for unused time in the current billing period"})]})]}),A.jsxs(He,{title:"3. Refund Eligibility",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Eligible for Refund"}),A.jsx("p",{className:"mb-2",children:"We offer refunds in the following situations:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Technical Issues:"})," If the Service was unavailable or significantly impaired for an extended period"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Accidental Purchase:"})," If you accidentally subscribed and request a refund within 48 hours, without using premium features"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Duplicate Charges:"})," If you were charged multiple times for the same subscription period"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Not Eligible for Refund"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Change of mind after using premium features"}),A.jsx("li",{children:"Requests made after 30 days from the charge date"}),A.jsx("li",{children:"Failure to cancel before renewal (you must cancel before renewal to avoid charges)"}),A.jsx("li",{children:"Issues caused by your device, browser, or internet connection"})]})]}),A.jsxs(He,{title:"4. How to Request a Refund",children:[A.jsx("p",{className:"mb-4",children:"To request a refund:"}),A.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[A.jsxs("li",{children:["Email us at ",A.jsx("a",{href:`mailto:${gr}`,className:"text-pink-400 hover:underline",children:gr})]}),A.jsx("li",{children:"Include your account email and the date of the charge"}),A.jsx("li",{children:"Explain the reason for your refund request"})]}),A.jsx("p",{className:"mt-4",children:"We will review your request and respond within 5 business days."})]}),A.jsxs(He,{title:"5. Refund Processing",children:[A.jsx("p",{className:"mb-4",children:"If your refund is approved:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Refunds are processed through Stripe to your original payment method"}),A.jsx("li",{children:"Allow 5-10 business days for the refund to appear on your statement"}),A.jsx("li",{children:"Your premium access will be revoked upon refund"})]})]}),A.jsx(He,{title:"6. Free Trial",children:A.jsx("p",{children:"We do not currently offer free trials. All core features are free to use. Premium features require a paid subscription."})}),A.jsx(He,{title:"7. Price Changes",children:A.jsx("p",{children:"If we increase subscription prices, existing subscribers will be notified at least 30 days in advance. You may cancel before the new price takes effect to avoid being charged at the higher rate."})}),A.jsx(He,{title:"8. Contact",children:A.jsxs("p",{children:["For refund requests or questions about this policy, contact us at ",A.jsx("a",{href:`mailto:${gr}`,className:"text-pink-400 hover:underline",children:gr}),"."]})})]})}function fp({title:t,icon:e,onBack:n,logo:r,children:s}){return A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(y_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r&&A.jsx("img",{src:r,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(e,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:t})]})]}),A.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:s}),A.jsx("footer",{className:"mt-12 text-center text-gray-500 text-sm",children:A.jsx("p",{children:"Carnival Planner - Plan your Mas. Track your Fetes. Coordinate your Squad."})})]})]})}function He({title:t,children:e}){return A.jsxs("div",{className:"mb-8",children:[A.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:t}),A.jsx("div",{className:"text-gray-300 leading-relaxed",children:e})]})}function S6(){const[t,e]=j.useState(null),[n,r]=j.useState(!1),[s,i]=j.useState(!1),[o,l]=j.useState(!1);j.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const m=localStorage.getItem("pwa-install-dismissed");m&&(Date.now()-parseInt(m))/864e5<7&&l(!0);const p=C=>{C.preventDefault(),e(C),o||r(!0)},w=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",w),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",w)}},[o]);const u=async()=>{if(!t)return;t.prompt();const{outcome:m}=await t.userChoice;m==="accepted"&&i(!0),e(null),r(!1)},h=()=>{r(!1),l(!0),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return!n||s?null:A.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 animate-slideUp md:left-auto md:right-4 md:max-w-sm safe-bottom",children:A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-2xl p-4 text-white",children:[A.jsx("button",{onClick:h,className:"absolute top-2 right-2 p-1 hover:bg-white/20 rounded-full transition-colors",children:A.jsx(as,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx(s6,{className:"w-6 h-6"})}),A.jsxs("div",{className:"flex-1 pr-6",children:[A.jsx("h3",{className:"font-bold text-lg mb-1",children:"Add to Home Screen"}),A.jsx("p",{className:"text-white/80 text-sm mb-3",children:"Install Carnival Planner for quick access and offline use!"}),A.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-colors",children:[A.jsx(Yd,{className:"w-4 h-4"}),"Install App"]})]})]})]})})}function N6({onBack:t,logo:e,user:n}){const[r,s]=j.useState(""),[i,o]=j.useState(""),[l,u]=j.useState((n==null?void 0:n.email)||""),[h,m]=j.useState(!1),[p,w]=j.useState(!1),[C,b]=j.useState(""),x=async U=>{if(U.preventDefault(),!i.trim()||!l.trim()){b("Please fill in all required fields");return}m(!0),b("");try{await oc(un(ke,"support-requests"),{email:l.trim(),subject:r.trim()||"General Inquiry",message:i.trim(),userId:(n==null?void 0:n.uid)||null,userName:(n==null?void 0:n.displayName)||null,status:"new",createdAt:Ve.now()}),w(!0),s(""),o("")}catch(T){console.error("Error submitting support request:",T),b("Failed to send message. Please try again.")}finally{m(!1)}};return p?A.jsx("div",{className:"min-h-screen bg-slate-950 text-white flex items-center justify-center p-6",children:A.jsxs("div",{className:"text-center max-w-md",children:[A.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx(L3,{className:"w-10 h-10 text-green-400"})}),A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Message Sent!"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Thank you for reaching out. We'll get back to you as soon as possible."}),A.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold hover:opacity-90 transition-opacity",children:"Back to App"})]})}):A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-2xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(y_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e&&A.jsx("img",{src:e,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(C_,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Contact Support"})]})]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:[A.jsx("p",{className:"text-gray-400 mb-6",children:"Have a question, feedback, or need help? Send us a message and we'll get back to you as soon as possible."}),A.jsxs("form",{onSubmit:x,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address *"}),A.jsxs("div",{className:"relative",children:[A.jsx(b_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:l,onChange:U=>u(U.target.value),placeholder:"your@email.com",required:!0,className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Subject"}),A.jsxs("select",{value:r,onChange:U=>s(U.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-pink-500 transition-colors",children:[A.jsx("option",{value:"",className:"bg-gray-900",children:"Select a topic..."}),A.jsx("option",{value:"General Question",className:"bg-gray-900",children:"General Question"}),A.jsx("option",{value:"Premium Subscription",className:"bg-gray-900",children:"Premium Subscription"}),A.jsx("option",{value:"Technical Issue",className:"bg-gray-900",children:"Technical Issue"}),A.jsx("option",{value:"Feature Request",className:"bg-gray-900",children:"Feature Request"}),A.jsx("option",{value:"Refund Request",className:"bg-gray-900",children:"Refund Request"}),A.jsx("option",{value:"Account Issue",className:"bg-gray-900",children:"Account Issue"}),A.jsx("option",{value:"Other",className:"bg-gray-900",children:"Other"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message *"}),A.jsx("textarea",{value:i,onChange:U=>o(U.target.value),placeholder:"How can we help you?",required:!0,rows:6,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors resize-none"})]}),C&&A.jsx("p",{className:"text-red-400 text-sm",children:C}),A.jsx("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold text-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:h?A.jsxs(A.Fragment,{children:[A.jsx(St,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):A.jsxs(A.Fragment,{children:[A.jsx(X2,{className:"w-5 h-5"}),"Send Message"]})})]})]}),A.jsxs("p",{className:"text-gray-500 text-sm text-center mt-8",children:["You can also email us directly at"," ",A.jsx("a",{href:"mailto:support@carnival-planner.com",className:"text-pink-400 hover:underline",children:"support@carnival-planner.com"})]})]})]})}function U6(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null);j.useEffect(()=>{const l=_c(un(ke,"support-requests"),qx("createdAt","desc")),u=Vs(l,h=>{const m=h.docs.map(p=>({id:p.id,...p.data()}));e(m),r(!1),i(null)},h=>{console.error("SupportAdmin query failed:",h),i(h.message),r(!1)});return()=>u()},[]);const o=async l=>{confirm("Delete this support request?")&&await $d(ze(ke,"support-requests",l))};return n?A.jsx("div",{className:"text-center py-8 text-gray-500",children:A.jsx(St,{className:"w-6 h-6 animate-spin mx-auto"})}):s?A.jsxs("div",{className:"p-8 text-center bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:[A.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load support requests: ",s]}),A.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This may require a Firestore index. Check the console."})]}):A.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h3",{className:"font-bold text-lg mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(C_,{className:"w-5 h-5"}),"Support Requests (",t.length,")"]}),t.length===0?A.jsx("p",{className:"text-gray-500 text-center py-4",children:"No support requests yet"}):A.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.map(l=>{var u,h;return A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:l.email}),A.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),A.jsx("span",{className:"text-sm text-gray-500",children:l.subject||"General"})]}),A.jsx("button",{onClick:()=>o(l.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:A.jsx(Xs,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm whitespace-pre-wrap",children:l.message}),A.jsx("p",{className:"text-xs text-gray-400 mt-2",children:((h=(u=l.createdAt)==null?void 0:u.toDate)==null?void 0:h.call(u).toLocaleString())||"Unknown date"})]},l.id)})})]})}function F6({user:t,onClose:e}){const[n,r]=j.useState(!1),[s,i]=j.useState(""),[o,l]=j.useState(!1),[u,h]=j.useState(""),[m,p]=j.useState({displayName:"",bio:"",avatarUrl:""}),[w,C]=j.useState(!1),[b,x]=j.useState(!1),[U,T]=j.useState(!1),[E,N]=j.useState(""),H=j.useRef(null);j.useEffect(()=>{if(!t)return;(async()=>{try{const S=ze(ke,"users",t.uid,"profile","info"),P=await ws(S);if(P.exists()){const D=P.data();p({displayName:D.displayName||t.displayName||"",bio:D.bio||"",avatarUrl:D.avatarUrl||t.photoURL||""})}else p({displayName:t.displayName||"",bio:"",avatarUrl:t.photoURL||""})}catch(S){console.log("Could not load profile:",S)}})()},[t]);const V=async()=>{if(t){x(!0),h("");try{const B=ze(ke,"users",t.uid,"profile","info");await nr(B,{displayName:m.displayName,bio:m.bio,avatarUrl:m.avatarUrl,updatedAt:Ve.now()},{merge:!0}),C(!1),N("Profile saved!"),setTimeout(()=>N(""),3e3)}catch(B){console.error("Error saving profile:",B),h("Could not save profile. Please try again.")}finally{x(!1)}}},M=async B=>{const S=B.target.files[0];if(!S||!t)return;if(S.size>2*1024*1024){h("Image too large. Max 2MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(S.type)){h("Please upload a JPG, PNG, GIF, or WebP image.");return}T(!0),h("");try{const D=Date.now(),O=S.name.split(".").pop(),R=`avatars/${t.uid}/${D}.${O}`,Z=ao(oo,R);await Ac(Z,S);const se=await lc(Z);p(me=>({...me,avatarUrl:se}));const Ae=ze(ke,"users",t.uid,"profile","info");await nr(Ae,{avatarUrl:se,updatedAt:Ve.now()},{merge:!0}),N("Avatar updated!"),setTimeout(()=>N(""),3e3)}catch(D){console.error("Avatar upload error:",D),h("Could not upload avatar. Please try again.")}finally{T(!1),H.current&&(H.current.value="")}},I=async()=>{if(s!=="DELETE"){h("Please type DELETE to confirm");return}l(!0),h("");try{const B=ln(Pt);await Ot(B,"deleteUserAccount")(),await Ck(ja),window.location.reload()}catch(B){console.error("Error deleting account:",B),h(B.message||"Failed to delete account. Please try again."),l(!1)}};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Account Settings"}),e&&A.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:A.jsx(as,{className:"w-5 h-5"})})]}),E&&A.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 text-sm",children:E}),u&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:u}),A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-5",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:m.avatarUrl?A.jsx("img",{src:m.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):A.jsx(zs,{className:"w-10 h-10 text-gray-400"})}),A.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:M,className:"hidden",id:"avatar-upload"}),A.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 rounded-full text-white cursor-pointer hover:bg-blue-700 transition",children:U?A.jsx(St,{className:"w-4 h-4 animate-spin"}):A.jsx(cc,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex-1",children:w?A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:m.displayName,onChange:B=>p(S=>({...S,displayName:B.target.value})),placeholder:"Your name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("textarea",{value:m.bio,onChange:B=>p(S=>({...S,bio:B.target.value})),placeholder:"Tell us about yourself...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm resize-none",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[m.bio.length,"/200"]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{onClick:V,disabled:b,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[b?A.jsx(St,{className:"w-4 h-4 animate-spin"}):A.jsx(t6,{className:"w-4 h-4"}),"Save"]}),A.jsx("button",{onClick:()=>C(!1),className:"px-3 py-1.5 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"})]})]}):A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white mb-1",children:m.displayName||"No name set"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:t==null?void 0:t.email}),m.bio&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:m.bio}),A.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:[A.jsx(Z2,{className:"w-4 h-4"}),"Edit Profile"]})]})})]})}),A.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h4",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[A.jsx(p_,{className:"w-5 h-5"}),"Danger Zone"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),n?A.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[A.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3",children:"This will permanently delete:"}),A.jsxs("ul",{className:"text-sm text-red-500 dark:text-red-400 list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"All your carnival plans and data"}),A.jsx("li",{children:"Uploaded photos and documents"}),A.jsx("li",{children:"Squad memberships"}),A.jsx("li",{children:"Your account and login"})]}),A.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Type ",A.jsx("span",{className:"font-mono bg-gray-200 dark:bg-gray-700 px-1 rounded",children:"DELETE"})," to confirm:"]}),A.jsx("input",{type:"text",value:s,onChange:B=>i(B.target.value),placeholder:"Type DELETE",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-3"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>{r(!1),i(""),h("")},disabled:o,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:"Cancel"}),A.jsx("button",{onClick:I,disabled:o||s!=="DELETE",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:o?A.jsxs(A.Fragment,{children:[A.jsx(St,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Xs,{className:"w-4 h-4"}),"Delete Forever"]})})]})]}):A.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[A.jsx(Xs,{className:"w-4 h-4"}),"Delete My Account"]})]})]})]})}const Q6={BRONZE:{name:"Bronze",color:"from-amber-600 to-amber-800",textColor:"text-amber-600",bgColor:"bg-amber-100 dark:bg-amber-900/30",icon:"",medalImage:"/images/passport/medal_bronze.png",bgImage:"/images/passport/bg_bronze.png"},SILVER:{name:"Silver",color:"from-gray-400 to-gray-600",textColor:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-700/30",icon:"",medalImage:"/images/passport/medal_silver.png",bgImage:"/images/passport/bg_silver.png"},GOLD:{name:"Gold",color:"from-yellow-400 to-amber-500",textColor:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",icon:"",medalImage:"/images/passport/medal_gold.png",bgImage:"/images/passport/bg_gold.png"},PLATINUM:{name:"Platinum",color:"from-purple-400 to-indigo-600",textColor:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30",icon:"",medalImage:"/images/passport/medal_platinum.png",bgImage:"/images/passport/bg_platinum.png"}},P6={COMMON:"border-gray-300 dark:border-gray-600",RARE:"border-blue-400 dark:border-blue-500",EPIC:"border-purple-500 dark:border-purple-400",LEGENDARY:"border-yellow-400 dark:border-yellow-500"};function R6({user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s,onOpenCheckin:i,onViewStamps:o,onViewAchievements:l,onViewLeaderboard:u,onViewRewards:h}){const[m,p]=j.useState(null),[w,C]=j.useState([]),[b,x]=j.useState(!0),[U,T]=j.useState(null),[E,N]=j.useState(null);if(j.useEffect(()=>{if(!r||!t||!r||!t)return;if(s){N({inSquad:!0,squadName:"Insane Carnival Squad",stats:{totalCredits:1250,totalEvents:8,countriesVisited:2,memberCount:3},members:[{userId:t.uid,displayName:t.displayName||"You",profilePictureUrl:t.photoURL,totalCredits:350,currentTier:"BRONZE"},{userId:"demo-2",displayName:"Sarah J",profilePictureUrl:null,totalCredits:500,currentTier:"SILVER"},{userId:"demo-3",displayName:"Mike T",profilePictureUrl:null,totalCredits:400,currentTier:"BRONZE"}].sort((S,P)=>P.totalCredits-S.totalCredits)});return}(async()=>{const S=ln(Pt),P=Ot(S,"getSquadPassportStats");try{const D=await P({planId:r});D.data.inSquad&&N(D.data)}catch(D){console.error("Failed to load squad stats",D)}})()},[r,t]),j.useEffect(()=>{if(!t)return;if(s){p({totalCredits:1250,currentTier:"GOLD",tierProgress:{nextTier:"PLATINUM",creditsToNextTier:750,progressPercent:62},totalEvents:8,countriesVisited:["TT","BB"],unlockedAchievements:["first-checkin","island-hopper"],achievementPoints:150,achievementDefinitions:{}}),C([{id:"1",eventTitle:"Soca Brainwash",countryCode:"TT",rarity:"LEGENDARY"},{id:"2",eventTitle:"Roast Cruise",countryCode:"BB",rarity:"RARE"},{id:"3",eventTitle:"AM Bush",countryCode:"TT",rarity:"EPIC"}]),x(!1);return}(async()=>{x(!0),T(null);try{const S=ln(Pt),D=await Ot(S,"getPassportProfile")();p(D.data);try{const R=await Ot(S,"getPassportStamps")({limit:5});C(R.data.stamps||[])}catch(O){console.warn("Error loading stamps (non-critical):",O),C([])}}catch(S){console.error("Error loading passport data:",S),T(S.message)}finally{x(!1)}})()},[t,s]),b)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] animate-pulse",children:[A.jsx("div",{className:"p-4 bg-teal-100 dark:bg-teal-900/30 rounded-full mb-4",children:A.jsx(St,{className:"w-8 h-8 text-teal-500 animate-spin"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your passport..."})]});if(U)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[A.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:A.jsx(up,{className:"w-8 h-8 text-red-500"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Unable to Load Passport"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:U}),A.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-teal-500 text-white rounded-xl font-medium hover:bg-teal-600 transition-colors",children:"Try Again"})]});const H=Q6[(m==null?void 0:m.currentTier)||"BRONZE"],V=(m==null?void 0:m.tierProgress)||{},M=(m==null?void 0:m.unlockedAchievements)||[],I=(m==null?void 0:m.achievementDefinitions)||{};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsxs("div",{className:"relative overflow-hidden rounded-3xl p-6 text-white shadow-xl min-h-[180px]",style:{backgroundImage:`url(${H.bgImage})`,backgroundSize:"cover",backgroundPosition:"center"},children:[A.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${H.color} opacity-60`}),A.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full -ml-10 -mb-10 blur-xl"}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-20 h-20 flex items-center justify-center",children:A.jsx("img",{src:H.medalImage,alt:`${H.name} Medal`,className:"w-full h-full object-contain drop-shadow-lg"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black tracking-tight drop-shadow-md",children:"SOCA PASSPORT"}),A.jsxs("p",{className:"text-white/90 text-sm font-medium drop-shadow",children:[H.name," Tier"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-3xl font-black drop-shadow-md",children:(m==null?void 0:m.totalCredits)||0}),A.jsx("p",{className:"text-xs text-white/80 uppercase tracking-wider font-medium",children:"Credits"})]})]}),V.nextTier&&A.jsxs("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-4",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{className:"font-medium",children:H.name}),A.jsxs("span",{className:"text-white/90",children:[V.creditsToNextTier," to ",V.nextTier]})]}),A.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:A.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:`${V.progressPercent}%`}})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-teal-100 dark:bg-teal-900/30 flex items-center justify-center",children:A.jsx(Bs,{className:"w-5 h-5 text-teal-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(m==null?void 0:m.totalEvents)||0}),A.jsx("p",{className:"text-xs text-gray-500",children:"Events"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:A.jsx(br,{className:"w-5 h-5 text-blue-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((m==null?void 0:m.countriesVisited)||[]).length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Countries"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:A.jsx(Ou,{className:"w-5 h-5 text-yellow-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:M.length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Achievements"})]})]}),A.jsxs("button",{onClick:i,className:"w-full group relative overflow-hidden bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl p-5 shadow-lg shadow-teal-500/20 transition-all hover:-translate-y-1 active:scale-[0.99]",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),A.jsxs("div",{className:"relative flex items-center justify-center gap-3",children:[A.jsx(Ed,{className:"w-6 h-6"}),A.jsx("span",{className:"text-lg font-bold",children:"CHECK IN TO EVENT"}),A.jsx(E0,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),A.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl p-5 text-white shadow-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(Ml,{className:"w-6 h-6"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Rewards Market"}),A.jsx("p",{className:"text-white/80 text-sm",children:"Redeem your credits"})]})]}),A.jsx("button",{onClick:h,className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"Browse Rewards"})]})}),E&&A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-5 shadow-lg text-white",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:A.jsx(tr,{className:"w-6 h-6 text-white"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:E.squadName}),A.jsx("p",{className:"text-white/70 text-sm",children:"Squad Passport Stats"})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-2xl font-bold",children:E.stats.totalCredits.toLocaleString()}),A.jsx("p",{className:"text-xs text-white/70",children:"Total Credits"})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-black/20 rounded-xl p-3 flex items-center gap-3",children:[A.jsx(Bs,{className:"w-5 h-5 text-purple-200"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:E.stats.totalEvents}),A.jsx("p",{className:"text-xs text-white/60",children:"Squad Events"})]})]}),A.jsxs("div",{className:"bg-black/20 rounded-xl p-3 flex items-center gap-3",children:[A.jsx(br,{className:"w-5 h-5 text-blue-200"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:E.stats.countriesVisited}),A.jsx("p",{className:"text-xs text-white/60",children:"Countries"})]})]})]}),A.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center gap-2 overflow-x-auto pb-1 scrollbar-hide",children:E.members.map((B,S)=>A.jsxs("div",{className:"flex-shrink-0 relative",children:[A.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${B.userId===t.uid?"border-yellow-400":"border-white/20"} overflow-hidden bg-gray-800`,children:B.profilePictureUrl?A.jsx("img",{src:B.profilePictureUrl,alt:"",className:"w-10 h-10 object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold text-white/50",children:B.displayName?B.displayName.charAt(0):"?"})}),A.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 text-[8px] font-bold px-1 rounded-full border border-gray-700",children:["#",S+1]})]},B.userId))})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(tg,{className:"w-5 h-5 text-yellow-500"}),"Recent Stamps"]}),w.length>0&&A.jsxs("button",{onClick:o,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(E0,{className:"w-4 h-4"})]})]}),w.length===0?A.jsxs("div",{className:"text-center py-8",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:A.jsx(Bs,{className:"w-8 h-8 text-gray-400"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"No stamps yet"}),A.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Check in to your first event!"})]}):A.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-1 px-1",children:w.map(B=>A.jsxs("div",{className:`flex-shrink-0 w-24 h-24 rounded-2xl border-2 ${P6[B.rarity]} bg-gray-50 dark:bg-gray-700 flex flex-col items-center justify-center p-2 text-center`,children:[A.jsx("span",{className:"text-2xl mb-1",children:B.countryCode==="TT"?"":B.countryCode==="US"?"":B.countryCode==="JM"?"":B.countryCode==="BB"?"":B.countryCode==="LC"?"":B.countryCode==="VC"?"":""}),A.jsx("p",{className:"text-[10px] font-medium text-gray-700 dark:text-gray-300 truncate w-full",children:B.eventTitle}),A.jsx("p",{className:"text-[8px] text-gray-400 uppercase",children:B.rarity})]},B.id))})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(w_,{className:"w-5 h-5 text-purple-500"}),"Achievements",A.jsxs("span",{className:"text-xs font-normal text-gray-400",children:[M.length,"/",Object.keys(I).length]})]}),A.jsxs("button",{onClick:l,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(E0,{className:"w-4 h-4"})]})]}),A.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.values(I).map(B=>{const S=M.includes(B.id);return A.jsx("div",{className:`aspect-square rounded-xl flex items-center justify-center text-2xl transition-all ${S?"bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40 shadow-sm":"bg-gray-100 dark:bg-gray-700 opacity-40 grayscale"}`,title:`${B.name}${S?" ":""}`,children:B.icon},B.id)})}),(m==null?void 0:m.achievementPoints)>0&&A.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-purple-500",children:[A.jsx(uc,{className:"w-4 h-4"}),A.jsxs("span",{className:"font-medium",children:[m.achievementPoints," Achievement Points"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-5 text-white shadow-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(rU,{className:"w-6 h-6"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Leaderboard"}),A.jsx("p",{className:"text-white/70 text-sm",children:"See how you rank"})]})]}),A.jsx("button",{onClick:u,className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"View Rankings"})]})})]})}function L6({isOpen:t,onClose:e,onSuccess:n}){var C,b,x,U,T,E,N,H;const[r,s]=j.useState(""),[i,o]=j.useState(!1),[l,u]=j.useState(null),[h,m]=j.useState(null);j.useEffect(()=>{t&&(s(""),u(null),m(null))},[t]);const p=async V=>{if(V.preventDefault(),!r.trim()){u("Please enter an access code");return}o(!0),u(null);try{const M=ln(Pt),B=await Ot(M,"passportCheckin")({accessCode:r.trim()});m(B.data),setTimeout(()=>{n==null||n(B.data)},3e3)}catch(M){console.error("Check-in error:",M);const I=M.message||"Check-in failed. Please try again.";M.code==="functions/not-found"?u("Invalid or expired access code."):M.code==="functions/already-exists"?u("You have already checked in to this event."):u(I)}finally{o(!1)}},w=V=>V.toUpperCase().replace(/[^A-Z0-9-]/g,"");return t?A.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:[A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden animate-slideUp",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-10",children:A.jsx(as,{className:"w-5 h-5"})}),h?A.jsxs("div",{className:"p-8 text-center",children:[A.jsxs("div",{className:"relative mb-6",children:[A.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-teal-400 to-emerald-500 rounded-3xl flex items-center justify-center shadow-lg shadow-teal-500/30 animate-bounce",children:A.jsx(Xd,{className:"w-16 h-16 text-white"})}),A.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:A.jsx(uc,{className:"w-4 h-4 text-yellow-900"})})]}),A.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2",children:"Check-in Complete!"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"You earned a new stamp"}),A.jsx("div",{className:"inline-block mb-6",children:A.jsxs("div",{className:`px-6 py-4 rounded-2xl border-2 ${((C=h.stamp)==null?void 0:C.rarity)==="LEGENDARY"?"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":((b=h.stamp)==null?void 0:b.rarity)==="EPIC"?"border-purple-400 bg-purple-50 dark:bg-purple-900/20":((x=h.stamp)==null?void 0:x.rarity)==="RARE"?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 bg-gray-50 dark:bg-gray-700/50"}`,children:[A.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(U=h.stamp)==null?void 0:U.eventTitle}),A.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[(E=(T=h.stamp)==null?void 0:T.rarity)==null?void 0:E.toLowerCase()," Stamp  #",(N=h.stamp)==null?void 0:N.editionNumber]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 rounded-2xl p-4 text-white mb-4",children:[A.jsxs("div",{className:"flex items-center justify-center gap-3",children:[A.jsx(Ed,{className:"w-6 h-6"}),A.jsxs("span",{className:"text-3xl font-black",children:["+",h.creditsEarned]}),A.jsx("span",{className:"text-white/80",children:"Credits"})]}),h.bonusCredits>0&&A.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 text-sm text-white/90",children:[A.jsx(Ml,{className:"w-4 h-4"}),A.jsxs("span",{children:["+",h.bonusCredits," Achievement Bonus!"]})]})]}),((H=h.newAchievements)==null?void 0:H.length)>0&&A.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-2xl p-4 mb-4",children:[A.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:" Achievement Unlocked!"}),h.newAchievements.map(V=>A.jsxs("div",{className:"flex items-center justify-center gap-2",children:[A.jsx("span",{className:"text-2xl",children:V.icon}),A.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:V.name})]},V.id))]}),h.tierChanged&&A.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 text-white mb-4",children:A.jsxs("p",{className:"font-bold text-lg",children:[" You ranked up to ",h.newTier,"!"]})}),A.jsx("button",{onClick:e,className:"w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-2xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Done"})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-emerald-500 p-6 text-white text-center",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(Bs,{className:"w-8 h-8"})}),A.jsx("h2",{className:"text-2xl font-black",children:"Event Check-in"}),A.jsx("p",{className:"text-teal-100 text-sm mt-1",children:"Enter your access code to earn stamps"})]}),A.jsxs("form",{onSubmit:p,className:"p-6",children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Code"}),A.jsx("input",{type:"text",value:r,onChange:V=>s(w(V.target.value)),placeholder:"e.g. PRO-123-4567",className:"w-full px-5 py-4 text-2xl font-mono font-bold text-center tracking-widest bg-gray-50 dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 dark:text-white transition-all uppercase",disabled:i,autoFocus:!0}),A.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Get this code from the event host or promoter"})]}),l&&A.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[A.jsx(cp,{className:"w-5 h-5 flex-shrink-0"}),A.jsx("span",{children:l})]}),A.jsx("button",{type:"submit",disabled:i||!r.trim(),className:"w-full py-4 bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl font-bold text-lg shadow-lg shadow-teal-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:i?A.jsxs(A.Fragment,{children:[A.jsx(St,{className:"w-5 h-5 animate-spin"}),"Checking in..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Ed,{className:"w-5 h-5"}),"Claim Stamp"]})})]})]})]}),A.jsx("style",{children:`
                @keyframes slideUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-slideUp {
                    animation: slideUp 0.3s ease-out;
                }
            `})]}):null}const BE={TT:"",US:"",JM:"",BB:"",LC:"",VC:"",GD:"",AG:"",KN:"",BS:"",BM:"",GY:"",CA:"",GB:"",VG:"",VI:"",KY:"",SX:"",MQ:"",GP:"",PR:"",CU:"",HT:"",DO:"",AW:"",CW:"",JP:"",XX:""},tl={LEGENDARY:{name:"Legendary",borderColor:"border-yellow-400",bgColor:"bg-gradient-to-br from-yellow-50 to-amber-100 dark:from-yellow-900/20 dark:to-amber-900/30",textColor:"text-yellow-600 dark:text-yellow-400",glow:"shadow-lg shadow-yellow-400/30"},EPIC:{name:"Epic",borderColor:"border-purple-400",bgColor:"bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/30",textColor:"text-purple-600 dark:text-purple-400",glow:"shadow-lg shadow-purple-400/20"},RARE:{name:"Rare",borderColor:"border-blue-400",bgColor:"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-900/20 dark:to-cyan-900/30",textColor:"text-blue-600 dark:text-blue-400",glow:""},COMMON:{name:"Common",borderColor:"border-gray-300 dark:border-gray-600",bgColor:"bg-gray-50 dark:bg-gray-700/50",textColor:"text-gray-600 dark:text-gray-400",glow:""}};function j6({user:t,onBack:e}){const[n,r]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(null),[u,h]=j.useState("ALL"),[m,p]=j.useState(new Set);j.useEffect(()=>{if(!t)return;(async()=>{var U;i(!0),l(null);try{const T=ln(Pt),N=await Ot(T,"getPassportStamps")({limit:100,rarity:u==="ALL"?null:u});r(N.data.stamps||[]);const H=new Set(((U=N.data.stamps)==null?void 0:U.filter(V=>V.isFavorite).map(V=>V.id))||[]);p(H)}catch(T){console.error("Error loading stamps:",T),l(T.message)}finally{i(!1)}})()},[t,u]);const w=x=>{p(U=>{const T=new Set(U);return T.has(x)?T.delete(x):T.add(x),T})},C=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",b=n.reduce((x,U)=>(x[U.rarity]=(x[U.rarity]||0)+1,x),{});return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(v_,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(tg,{className:"w-6 h-6 text-yellow-500"}),"Stamp Collection"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," stamps collected"]})]})]}),A.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 -mx-1 px-1",children:[A.jsxs("button",{onClick:()=>h("ALL"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${u==="ALL"?"bg-teal-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["All (",n.length,")"]}),["LEGENDARY","EPIC","RARE","COMMON"].map(x=>A.jsxs("button",{onClick:()=>h(x),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${u===x?`${tl[x].bgColor} ${tl[x].textColor} border ${tl[x].borderColor}`:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[tl[x].name," (",b[x]||0,")"]},x))]}),s&&A.jsx("div",{className:"flex items-center justify-center py-20",children:A.jsx(St,{className:"w-8 h-8 text-teal-500 animate-spin"})}),o&&!s&&A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:o}),A.jsx("button",{onClick:()=>h("ALL"),className:"px-4 py-2 bg-teal-500 text-white rounded-xl",children:"Retry"})]}),!s&&!o&&n.length===0&&A.jsxs("div",{className:"text-center py-16",children:[A.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center",children:A.jsx(tg,{className:"w-10 h-10 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 mb-2",children:"No Stamps Yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Check in to events to start collecting stamps!"})]}),!s&&n.length>0&&A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n.map(x=>{const U=tl[x.rarity]||tl.COMMON,T=m.has(x.id);return A.jsxs("div",{className:`relative rounded-2xl border-2 ${U.borderColor} ${U.bgColor} ${U.glow} p-4 transition-all hover:scale-[1.02] cursor-pointer`,children:[A.jsx("button",{onClick:()=>w(x.id),className:"absolute top-2 right-2 p-1.5 rounded-full bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 transition-colors",children:A.jsx(z3,{className:`w-4 h-4 ${T?"fill-red-500 text-red-500":"text-gray-400"}`})}),A.jsx("div",{className:"text-4xl mb-3 text-center",children:BE[x.countryCode]||BE.XX}),A.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm text-center truncate mb-1",children:x.eventTitle}),A.jsxs("p",{className:`text-xs ${U.textColor} text-center font-medium uppercase tracking-wide`,children:[U.name," #",x.editionNumber]}),A.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 space-y-1",children:[A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(xA,{className:"w-3 h-3"}),A.jsx("span",{children:C(x.stampedAt)})]}),x.location&&A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(br,{className:"w-3 h-3"}),A.jsx("span",{className:"truncate",children:x.location})]})]}),A.jsx("div",{className:"mt-2 text-center",children:A.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 rounded-full text-xs font-medium",children:["+",x.creditsEarned," credits"]})})]},x.id)})})]})}const D6={first_stamp:{id:"first_stamp",name:"First Steps",description:"Claim your first stamp",icon:"",category:"MILESTONE",points:50,criteria:{type:"EVENT_COUNT",target:1}},island_hopper:{id:"island_hopper",name:"Island Hopper",description:"Check in at 3 different countries",icon:"",category:"TRAVEL",points:500,criteria:{type:"COUNTRY_COUNT",target:3}},sunrise_warrior:{id:"sunrise_warrior",name:"Sunrise Warrior",description:"Check in at 5 J'ouvert or early morning events",icon:"",category:"EVENTS",points:300,criteria:{type:"EVENT_TYPE",target:5}},loyal_fan:{id:"loyal_fan",name:"Loyal Fan",description:"Check in to 10 events total",icon:"",category:"MILESTONE",points:250,criteria:{type:"EVENT_COUNT",target:10}},tier_up:{id:"tier_up",name:"Moving Up",description:"Reach Silver tier",icon:"",category:"MILESTONE",points:200,criteria:{type:"TIER_REACHED",target:"SILVER"}}},Yh={MILESTONE:"from-blue-500 to-indigo-500",TRAVEL:"from-teal-500 to-cyan-500",EVENTS:"from-orange-500 to-amber-500",SOCIAL:"from-pink-500 to-rose-500"};function M6({profile:t,onBack:e}){const n=(t==null?void 0:t.unlockedAchievements)||[],r=(t==null?void 0:t.achievementPoints)||0,s=(t==null?void 0:t.totalEvents)||0,i=((t==null?void 0:t.countriesVisited)||[]).length,o=(t==null?void 0:t.currentTier)||"BRONZE",l=(t==null?void 0:t.eventTypeStats)||{},u=p=>{const{criteria:w}=p;let C=0,b=w.target;switch(w.type){case"EVENT_COUNT":C=s;break;case"COUNTRY_COUNT":C=i;break;case"TIER_REACHED":const x=["BRONZE","SILVER","GOLD","PLATINUM"],U=x.indexOf(o),T=x.indexOf(w.target);C=U>=T?1:0,b=1;break;case"EVENT_TYPE":C=(l.jouvert||0)+(l.breakfast||0)+(l.early_morning||0);break;default:C=0}return{current:Math.min(C,b),target:b,percent:Math.min(100,Math.floor(C/b*100))}},h=Object.values(D6).map(p=>({...p,isUnlocked:n.includes(p.id),progress:u(p)})),m=h.filter(p=>p.isUnlocked).length;return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(v_,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(w_,{className:"w-6 h-6 text-purple-500"}),"Achievements"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[m,"/",h.length," unlocked"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-5 text-white mb-6 shadow-lg shadow-purple-500/20",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-purple-200 text-sm",children:"Total Points Earned"}),A.jsx("p",{className:"text-4xl font-black",children:r})]}),A.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(uc,{className:"w-8 h-8"})})]})}),A.jsx("div",{className:"space-y-4",children:h.map(p=>A.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-2xl border overflow-hidden transition-all ${p.isUnlocked?"border-purple-200 dark:border-purple-800 shadow-sm":"border-gray-200 dark:border-gray-700 opacity-75"}`,children:[A.jsx("div",{className:`h-1 bg-gradient-to-r ${Yh[p.category]||Yh.MILESTONE}`}),A.jsx("div",{className:"p-4",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center text-2xl ${p.isUnlocked?"bg-purple-100 dark:bg-purple-900/30":"bg-gray-100 dark:bg-gray-700 grayscale"}`,children:p.icon}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-start justify-between gap-2",children:[A.jsxs("div",{children:[A.jsx("h3",{className:`font-bold ${p.isUnlocked?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:p.name}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.description})]}),p.isUnlocked?A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg text-xs font-medium",children:[A.jsx(Xd,{className:"w-3 h-3"}),"Unlocked"]}):A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-500 rounded-lg text-xs font-medium",children:[A.jsx(Cw,{className:"w-3 h-3"}),"Locked"]})]}),!p.isUnlocked&&A.jsxs("div",{className:"mt-3",children:[A.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[A.jsx("span",{children:"Progress"}),A.jsxs("span",{children:[p.progress.current,"/",p.progress.target]})]}),A.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:A.jsx("div",{className:`h-full rounded-full bg-gradient-to-r ${Yh[p.category]||Yh.MILESTONE} transition-all duration-500`,style:{width:`${p.progress.percent}%`}})})]}),A.jsx("div",{className:"mt-2",children:A.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium ${p.isUnlocked?"text-purple-600 dark:text-purple-400":"text-gray-400"}`,children:[A.jsx(uc,{className:"w-3 h-3"}),p.isUnlocked?`+${p.points} points earned`:`${p.points} points`]})})]})]})})]},p.id))}),A.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-2xl text-center",children:[A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"More achievements coming soon!"}),A.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Squad Leader  Ocean Voyager  Carnival Royalty  and more..."})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Iw=function(t,e){return Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Iw(t,e)};function Cs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Iw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Tw=function(){return Tw=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tw.apply(this,arguments)};function Yn(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(m){try{h(r.next(m))}catch(p){o(p)}}function u(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):s(m.value).then(l,u)}h((r=r.apply(t,[])).next())})}function Qn(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(m){return u([h,m])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ef(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var Vi=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),mp=function(t,e){return Vi.fromClientRect(t,e.getBoundingClientRect())},O6=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Vi(0,0,r,s)},gp=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Wt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},bE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tf=0;tf<bE.length;tf++)H6[bE.charCodeAt(tf)]=tf;var CE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nf=0;nf<CE.length;nf++)gu[CE.charCodeAt(nf)]=nf;var V6=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)i=gu[t.charCodeAt(r)],o=gu[t.charCodeAt(r+1)],l=gu[t.charCodeAt(r+2)],u=gu[t.charCodeAt(r+3)],m[s++]=i<<2|o>>4,m[s++]=(o&15)<<4|l>>2,m[s++]=(l&3)<<6|u&63;return h},K6=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},z6=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Xo=5,E_=11,I0=2,G6=E_-Xo,iU=65536>>Xo,q6=1<<Xo,T0=q6-1,W6=1024>>Xo,$6=iU+W6,Z6=$6,J6=32,X6=Z6+J6,Y6=65536>>E_,eK=1<<G6,tK=eK-1,EE=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},nK=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},rK=function(t,e){var n=V6(t),r=Array.isArray(n)?z6(n):new Uint32Array(n),s=Array.isArray(n)?K6(n):new Uint16Array(n),i=24,o=EE(s,i/2,r[4]/2),l=r[5]===2?EE(s,(i+r[4])/2):nK(r,Math.ceil((i+r[4])/4));return new sK(r[0],r[1],r[2],r[3],o,l)},sK=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Xo],n=(n<<I0)+(e&T0),this.data[n];if(e<=65535)return n=this.index[iU+(e-55296>>Xo)],n=(n<<I0)+(e&T0),this.data[n];if(e<this.highStart)return n=X6-Y6+(e>>E_),n=this.index[n],n+=e>>Xo&tK,n=this.index[n],n=(n<<I0)+(e&T0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),IE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rf=0;rf<IE.length;rf++)iK[IE.charCodeAt(rf)]=rf;var aK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",TE=50,oK=1,aU=2,oU=3,AK=4,lK=5,kE=7,AU=8,SE=9,Da=10,kw=11,NE=12,Sw=13,cK=14,pu=15,Nw=16,sf=17,tu=18,uK=19,UE=20,Uw=21,nu=22,k0=23,nl=24,kr=25,yu=26,wu=27,rl=28,dK=29,Mo=30,hK=31,af=32,of=33,Fw=34,Qw=35,Pw=36,Id=37,Rw=38,Yf=39,em=40,S0=41,lU=42,fK=43,mK=[9001,65288],cU="!",qe="",Af="",Lw=rK(aK),yi=[Mo,Pw],jw=[oK,aU,oU,lK],uU=[Da,AU],FE=[wu,yu],gK=jw.concat(uU),QE=[Rw,Yf,em,Fw,Qw],pK=[pu,Sw],yK=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(i,o){var l=Lw.get(i);if(l>TE?(s.push(!0),l-=TE):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),n.push(Nw);if(l===AK||l===kw){if(o===0)return r.push(o),n.push(Mo);var u=n[o-1];return gK.indexOf(u)===-1?(r.push(r[o-1]),n.push(u)):(r.push(o),n.push(Mo))}if(r.push(o),l===hK)return n.push(e==="strict"?Uw:Id);if(l===lU||l===dK)return n.push(Mo);if(l===fK)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(Id):n.push(Mo);n.push(l)}),[r,n,s]},N0=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=n;i<=r.length;){i++;var o=r[i];if(o===e)return!0;if(o!==Da)break}if(s===Da)for(var i=n;i>0;){i--;var l=r[i];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var u=n;u<=r.length;){u++;var o=r[u];if(o===e)return!0;if(o!==Da)break}if(l!==Da)break}return!1},PE=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Da)n--;else return r}return 0},wK=function(t,e,n,r,s){if(n[r]===0)return qe;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return qe;var o=i-1,l=i+1,u=e[i],h=o>=0?e[o]:0,m=e[l];if(u===aU&&m===oU)return qe;if(jw.indexOf(u)!==-1)return cU;if(jw.indexOf(m)!==-1||uU.indexOf(m)!==-1)return qe;if(PE(i,e)===AU)return Af;if(Lw.get(t[i])===kw||(u===af||u===of)&&Lw.get(t[l])===kw||u===kE||m===kE||u===SE||[Da,Sw,pu].indexOf(u)===-1&&m===SE||[sf,tu,uK,nl,rl].indexOf(m)!==-1||PE(i,e)===nu||N0(k0,nu,i,e)||N0([sf,tu],Uw,i,e)||N0(NE,NE,i,e))return qe;if(u===Da)return Af;if(u===k0||m===k0)return qe;if(m===Nw||u===Nw)return Af;if([Sw,pu,Uw].indexOf(m)!==-1||u===cK||h===Pw&&pK.indexOf(u)!==-1||u===rl&&m===Pw||m===UE||yi.indexOf(m)!==-1&&u===kr||yi.indexOf(u)!==-1&&m===kr||u===wu&&[Id,af,of].indexOf(m)!==-1||[Id,af,of].indexOf(u)!==-1&&m===yu||yi.indexOf(u)!==-1&&FE.indexOf(m)!==-1||FE.indexOf(u)!==-1&&yi.indexOf(m)!==-1||[wu,yu].indexOf(u)!==-1&&(m===kr||[nu,pu].indexOf(m)!==-1&&e[l+1]===kr)||[nu,pu].indexOf(u)!==-1&&m===kr||u===kr&&[kr,rl,nl].indexOf(m)!==-1)return qe;if([kr,rl,nl,sf,tu].indexOf(m)!==-1)for(var p=i;p>=0;){var w=e[p];if(w===kr)return qe;if([rl,nl].indexOf(w)!==-1)p--;else break}if([wu,yu].indexOf(m)!==-1)for(var p=[sf,tu].indexOf(u)!==-1?o:i;p>=0;){var w=e[p];if(w===kr)return qe;if([rl,nl].indexOf(w)!==-1)p--;else break}if(Rw===u&&[Rw,Yf,Fw,Qw].indexOf(m)!==-1||[Yf,Fw].indexOf(u)!==-1&&[Yf,em].indexOf(m)!==-1||[em,Qw].indexOf(u)!==-1&&m===em||QE.indexOf(u)!==-1&&[UE,yu].indexOf(m)!==-1||QE.indexOf(m)!==-1&&u===wu||yi.indexOf(u)!==-1&&yi.indexOf(m)!==-1||u===nl&&yi.indexOf(m)!==-1||yi.concat(kr).indexOf(u)!==-1&&m===nu&&mK.indexOf(t[l])===-1||yi.concat(kr).indexOf(m)!==-1&&u===tu)return qe;if(u===S0&&m===S0){for(var C=n[i],b=1;C>0&&(C--,e[C]===S0);)b++;if(b%2!==0)return qe}return u===af&&m===of?qe:Af},vK=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=yK(t,e.lineBreak),r=n[0],s=n[1],i=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(l){return[kr,Mo,lU].indexOf(l)!==-1?Id:l}));var o=e.wordBreak==="keep-all"?i.map(function(l,u){return l&&t[u]>=19968&&t[u]<=40959}):void 0;return[r,s,o]},xK=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===cU,this.start=r,this.end=s}return t.prototype.slice=function(){return Wt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),_K=function(t,e){var n=gp(t),r=vK(n,e),s=r[0],i=r[1],o=r[2],l=n.length,u=0,h=0;return{next:function(){if(h>=l)return{done:!0,value:null};for(var m=qe;h<l&&(m=wK(n,i,s,++h,o))===qe;);if(m!==qe||h===l){var p=new xK(n,m,u,h);return u=h,{value:p,done:!1}}return{done:!0,value:null}}}},BK=1,bK=2,th=4,RE=8,ng=10,LE=47,Hu=92,CK=9,EK=32,lf=34,ru=61,IK=35,TK=36,kK=37,cf=39,uf=40,su=41,SK=95,fr=45,NK=33,UK=60,FK=62,QK=64,PK=91,RK=93,LK=61,jK=123,df=63,DK=125,jE=124,MK=126,OK=128,DE=65533,U0=42,Go=43,HK=44,VK=58,KK=59,Td=46,zK=0,GK=8,qK=11,WK=14,$K=31,ZK=127,js=-1,dU=48,hU=97,fU=101,JK=102,XK=117,YK=122,mU=65,gU=69,pU=70,e8=85,t8=90,Rn=function(t){return t>=dU&&t<=57},n8=function(t){return t>=55296&&t<=57343},sl=function(t){return Rn(t)||t>=mU&&t<=pU||t>=hU&&t<=JK},r8=function(t){return t>=hU&&t<=YK},s8=function(t){return t>=mU&&t<=t8},i8=function(t){return r8(t)||s8(t)},a8=function(t){return t>=OK},hf=function(t){return t===ng||t===CK||t===EK},rg=function(t){return i8(t)||a8(t)||t===SK},ME=function(t){return rg(t)||Rn(t)||t===fr},o8=function(t){return t>=zK&&t<=GK||t===qK||t>=WK&&t<=$K||t===ZK},Ca=function(t,e){return t!==Hu?!1:e!==ng},ff=function(t,e,n){return t===fr?rg(e)||Ca(e,n):rg(t)?!0:!!(t===Hu&&Ca(t,e))},F0=function(t,e,n){return t===Go||t===fr?Rn(e)?!0:e===Td&&Rn(n):Rn(t===Td?e:t)},A8=function(t){var e=0,n=1;(t[e]===Go||t[e]===fr)&&(t[e]===fr&&(n=-1),e++);for(var r=[];Rn(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Wt.apply(void 0,r),10):0;t[e]===Td&&e++;for(var i=[];Rn(t[e]);)i.push(t[e++]);var o=i.length,l=o?parseInt(Wt.apply(void 0,i),10):0;(t[e]===gU||t[e]===fU)&&e++;var u=1;(t[e]===Go||t[e]===fr)&&(t[e]===fr&&(u=-1),e++);for(var h=[];Rn(t[e]);)h.push(t[e++]);var m=h.length?parseInt(Wt.apply(void 0,h),10):0;return n*(s+l*Math.pow(10,-o))*Math.pow(10,u*m)},l8={type:2},c8={type:3},u8={type:4},d8={type:13},h8={type:8},f8={type:21},m8={type:9},g8={type:10},p8={type:11},y8={type:12},w8={type:14},mf={type:23},v8={type:1},x8={type:25},_8={type:24},B8={type:26},b8={type:27},C8={type:28},E8={type:29},I8={type:31},Dw={type:32},yU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(gp(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==Dw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case lf:return this.consumeStringToken(lf);case IK:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(ME(n)||Ca(r,s)){var i=ff(n,r,s)?bK:BK,o=this.consumeName();return{type:5,value:o,flags:i}}break;case TK:if(this.peekCodePoint(0)===ru)return this.consumeCodePoint(),d8;break;case cf:return this.consumeStringToken(cf);case uf:return l8;case su:return c8;case U0:if(this.peekCodePoint(0)===ru)return this.consumeCodePoint(),w8;break;case Go:if(F0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case HK:return u8;case fr:var l=e,u=this.peekCodePoint(0),h=this.peekCodePoint(1);if(F0(l,u,h))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ff(l,u,h))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(u===fr&&h===FK)return this.consumeCodePoint(),this.consumeCodePoint(),_8;break;case Td:if(F0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case LE:if(this.peekCodePoint(0)===U0)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===U0&&(m=this.consumeCodePoint(),m===LE))return this.consumeToken();if(m===js)return this.consumeToken()}break;case VK:return B8;case KK:return b8;case UK:if(this.peekCodePoint(0)===NK&&this.peekCodePoint(1)===fr&&this.peekCodePoint(2)===fr)return this.consumeCodePoint(),this.consumeCodePoint(),x8;break;case QK:var p=this.peekCodePoint(0),w=this.peekCodePoint(1),C=this.peekCodePoint(2);if(ff(p,w,C)){var o=this.consumeName();return{type:7,value:o}}break;case PK:return C8;case Hu:if(Ca(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case RK:return E8;case LK:if(this.peekCodePoint(0)===ru)return this.consumeCodePoint(),h8;break;case jK:return p8;case DK:return y8;case XK:case e8:var b=this.peekCodePoint(0),x=this.peekCodePoint(1);return b===Go&&(sl(x)||x===df)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case jE:if(this.peekCodePoint(0)===ru)return this.consumeCodePoint(),m8;if(this.peekCodePoint(0)===jE)return this.consumeCodePoint(),f8;break;case MK:if(this.peekCodePoint(0)===ru)return this.consumeCodePoint(),g8;break;case js:return Dw}return hf(e)?(this.consumeWhiteSpace(),I8):Rn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):rg(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Wt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();sl(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===df&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Wt.apply(void 0,e.map(function(u){return u===df?dU:u})),16),i=parseInt(Wt.apply(void 0,e.map(function(u){return u===df?pU:u})),16);return{type:30,start:s,end:i}}var o=parseInt(Wt.apply(void 0,e),16);if(this.peekCodePoint(0)===fr&&sl(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var l=[];sl(n)&&l.length<6;)l.push(n),n=this.consumeCodePoint();var i=parseInt(Wt.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===uf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===uf?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===js)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===cf||n===lf){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===js||this.peekCodePoint(0)===su)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),mf)}for(;;){var s=this.consumeCodePoint();if(s===js||s===su)return{type:22,value:Wt.apply(void 0,e)};if(hf(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===js||this.peekCodePoint(0)===su?(this.consumeCodePoint(),{type:22,value:Wt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),mf);if(s===lf||s===cf||s===uf||o8(s))return this.consumeBadUrlRemnants(),mf;if(s===Hu)if(Ca(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),mf;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;hf(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===su||e===js)return;Ca(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Wt.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===js||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===ng)return this._value.splice(0,r),v8;if(s===Hu){var i=this._value[r+1];i!==js&&i!==void 0&&(i===ng?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Ca(s,i)&&(n+=this.consumeStringSlice(r),n+=Wt(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=th,r=this.peekCodePoint(0);for((r===Go||r===fr)&&e.push(this.consumeCodePoint());Rn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===Td&&Rn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=RE;Rn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===gU||r===fU)&&((s===Go||s===fr)&&Rn(i)||Rn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=RE;Rn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[A8(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(ff(s,i,o)){var l=this.consumeName();return{type:15,number:n,flags:r,unit:l}}return s===kK?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(sl(e)){for(var n=Wt(e);sl(this.peekCodePoint(0))&&n.length<6;)n+=Wt(this.consumeCodePoint());hf(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||n8(r)||r>1114111?DE:r}return e===js?DE:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(ME(n))e+=Wt(n);else if(Ca(n,this.peekCodePoint(0)))e+=Wt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),wU=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new yU;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||k8(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Dw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),nh=function(t){return t.type===15},Bc=function(t){return t.type===17},ht=function(t){return t.type===20},T8=function(t){return t.type===0},Mw=function(t,e){return ht(t)&&t.value===e},vU=function(t){return t.type!==31},dc=function(t){return t.type!==31&&t.type!==4},ti=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},k8=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ao=function(t){return t.type===17||t.type===15},tn=function(t){return t.type===16||Ao(t)},xU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Cn={type:17,number:0,flags:th},I_={type:16,number:50,flags:th},Ma={type:16,number:100,flags:th},vu=function(t,e,n){var r=t[0],s=t[1];return[gt(r,e),gt(typeof s<"u"?s:r,n)]},gt=function(t,e){if(t.type===16)return t.number/100*e;if(nh(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},_U="deg",BU="grad",bU="rad",CU="turn",pp={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case _U:return Math.PI*e.number/180;case BU:return Math.PI/200*e.number;case bU:return e.number;case CU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},EU=function(t){return t.type===15&&(t.unit===_U||t.unit===BU||t.unit===bU||t.unit===CU)},IU=function(t){var e=t.filter(ht).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Cn,Cn];case"to top":case"bottom":return Xr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Cn,Ma];case"to right":case"left":return Xr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ma,Ma];case"to bottom":case"top":return Xr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ma,Cn];case"to left":case"right":return Xr(270)}return 0},Xr=function(t){return Math.PI*t/180},Xa={name:"color",parse:function(t,e){if(e.type===18){var n=S8[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return Oa(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return Oa(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return Oa(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return Oa(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var l=Pi[e.value.toUpperCase()];if(typeof l<"u")return l}return Pi.TRANSPARENT}},Ya=function(t){return(255&t)===0},yn=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},Oa=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},OE=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},HE=function(t,e){var n=e.filter(dc);if(n.length===3){var r=n.map(OE),s=r[0],i=r[1],o=r[2];return Oa(s,i,o,1)}if(n.length===4){var l=n.map(OE),s=l[0],i=l[1],o=l[2],u=l[3];return Oa(s,i,o,u)}return 0};function Q0(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var VE=function(t,e){var n=e.filter(dc),r=n[0],s=n[1],i=n[2],o=n[3],l=(r.type===17?Xr(r.number):pp.parse(t,r))/(Math.PI*2),u=tn(s)?s.number/100:0,h=tn(i)?i.number/100:0,m=typeof o<"u"&&tn(o)?gt(o,1):1;if(u===0)return Oa(h*255,h*255,h*255,1);var p=h<=.5?h*(u+1):h+u-h*u,w=h*2-p,C=Q0(w,p,l+1/3),b=Q0(w,p,l),x=Q0(w,p,l-1/3);return Oa(C*255,b*255,x*255,m)},S8={hsl:VE,hsla:VE,rgb:HE,rgba:HE},Vu=function(t,e){return Xa.parse(t,wU.create(e).parseComponentValue())},Pi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},N8={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ht(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},U8={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yp=function(t,e){var n=Xa.parse(t,e[0]),r=e[1];return r&&tn(r)?{color:n,stop:r}:{color:n,stop:null}},KE=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=Cn),r.stop===null&&(r.stop=Ma);for(var s=[],i=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var u=gt(l,e);u>i?s.push(u):s.push(i),i=u}else s.push(null)}for(var h=null,o=0;o<s.length;o++){var m=s[o];if(m===null)h===null&&(h=o);else if(h!==null){for(var p=o-h,w=s[h-1],C=(m-w)/(p+1),b=1;b<=p;b++)s[h+b-1]=C*b;h=null}}return t.map(function(x,U){var T=x.color;return{color:T,stop:Math.max(Math.min(1,s[U]/e),0)}})},F8=function(t,e,n){var r=e/2,s=n/2,i=gt(t[0],e)-r,o=s-gt(t[1],n);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},Q8=function(t,e,n){var r=typeof t=="number"?t:F8(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),i=e/2,o=n/2,l=s/2,u=Math.sin(r-Math.PI/2)*l,h=Math.cos(r-Math.PI/2)*l;return[s,i-h,i+h,o-u,o+u]},fs=function(t,e){return Math.sqrt(t*t+e*e)},zE=function(t,e,n,r,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(o,l){var u=l[0],h=l[1],m=fs(n-u,r-h);return(s?m<o.optimumDistance:m>o.optimumDistance)?{optimumCorner:l,optimumDistance:m}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},P8=function(t,e,n,r,s){var i=0,o=0;switch(t.size){case 0:t.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)i=o=Math.min(fs(e,n),fs(e,n-s),fs(e-r,n),fs(e-r,n-s));else if(t.shape===1){var l=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),u=zE(r,s,e,n,!0),h=u[0],m=u[1];i=fs(h-e,(m-n)/l),o=l*i}break;case 1:t.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)i=o=Math.max(fs(e,n),fs(e,n-s),fs(e-r,n),fs(e-r,n-s));else if(t.shape===1){var l=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),p=zE(r,s,e,n,!1),h=p[0],m=p[1];i=fs(h-e,(m-n)/l),o=l*i}break}return Array.isArray(t.size)&&(i=gt(t.size[0],r),o=t.size.length===2?gt(t.size[1],s):i),[i,o]},R8=function(t,e){var n=Xr(180),r=[];return ti(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&o.value==="to"){n=IU(s);return}else if(EU(o)){n=pp.parse(t,o);return}}var l=yp(t,s);r.push(l)}),{angle:n,stops:r,type:1}},gf=function(t,e){var n=Xr(180),r=[];return ti(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=IU(s);return}else if(EU(o)){n=(pp.parse(t,o)+Xr(270))%Xr(360);return}}var l=yp(t,s);r.push(l)}),{angle:n,stops:r,type:1}},L8=function(t,e){var n=Xr(180),r=[],s=1,i=0,o=3,l=[];return ti(e).forEach(function(u,h){var m=u[0];if(h===0){if(ht(m)&&m.value==="linear"){s=1;return}else if(ht(m)&&m.value==="radial"){s=2;return}}if(m.type===18){if(m.name==="from"){var p=Xa.parse(t,m.values[0]);r.push({stop:Cn,color:p})}else if(m.name==="to"){var p=Xa.parse(t,m.values[0]);r.push({stop:Ma,color:p})}else if(m.name==="color-stop"){var w=m.values.filter(dc);if(w.length===2){var p=Xa.parse(t,w[1]),C=w[0];Bc(C)&&r.push({stop:{type:16,number:C.number*100,flags:C.flags},color:p})}}}}),s===1?{angle:(n+Xr(180))%Xr(360),stops:r,type:s}:{size:o,shape:i,stops:r,position:l,type:s}},TU="closest-side",kU="farthest-side",SU="closest-corner",NU="farthest-corner",UU="circle",FU="ellipse",QU="cover",PU="contain",j8=function(t,e){var n=0,r=3,s=[],i=[];return ti(e).forEach(function(o,l){var u=!0;if(l===0){var h=!1;u=o.reduce(function(p,w){if(h)if(ht(w))switch(w.value){case"center":return i.push(I_),p;case"top":case"left":return i.push(Cn),p;case"right":case"bottom":return i.push(Ma),p}else(tn(w)||Ao(w))&&i.push(w);else if(ht(w))switch(w.value){case UU:return n=0,!1;case FU:return n=1,!1;case"at":return h=!0,!1;case TU:return r=0,!1;case QU:case kU:return r=1,!1;case PU:case SU:return r=2,!1;case NU:return r=3,!1}else if(Ao(w)||tn(w))return Array.isArray(r)||(r=[]),r.push(w),!1;return p},u)}if(u){var m=yp(t,o);s.push(m)}}),{size:r,shape:n,stops:s,position:i,type:2}},pf=function(t,e){var n=0,r=3,s=[],i=[];return ti(e).forEach(function(o,l){var u=!0;if(l===0?u=o.reduce(function(m,p){if(ht(p))switch(p.value){case"center":return i.push(I_),!1;case"top":case"left":return i.push(Cn),!1;case"right":case"bottom":return i.push(Ma),!1}else if(tn(p)||Ao(p))return i.push(p),!1;return m},u):l===1&&(u=o.reduce(function(m,p){if(ht(p))switch(p.value){case UU:return n=0,!1;case FU:return n=1,!1;case PU:case TU:return r=0,!1;case kU:return r=1,!1;case SU:return r=2,!1;case QU:case NU:return r=3,!1}else if(Ao(p)||tn(p))return Array.isArray(r)||(r=[]),r.push(p),!1;return m},u)),u){var h=yp(t,o);s.push(h)}}),{size:r,shape:n,stops:s,position:i,type:2}},D8=function(t){return t.type===1},M8=function(t){return t.type===2},T_={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=RU[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function O8(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!RU[t.name])}var RU={"linear-gradient":R8,"-moz-linear-gradient":gf,"-ms-linear-gradient":gf,"-o-linear-gradient":gf,"-webkit-linear-gradient":gf,"radial-gradient":j8,"-moz-radial-gradient":pf,"-ms-radial-gradient":pf,"-o-radial-gradient":pf,"-webkit-radial-gradient":pf,"-webkit-gradient":L8},H8={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return dc(r)&&O8(r)}).map(function(r){return T_.parse(t,r)})}},V8={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ht(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},K8={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ti(e).map(function(n){return n.filter(tn)}).map(xU)}},z8={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ti(e).map(function(n){return n.filter(ht).map(function(r){return r.value}).join(" ")}).map(G8)}},G8=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Hl;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Hl||(Hl={}));var q8={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ti(e).map(function(n){return n.filter(W8)})}},W8=function(t){return ht(t)||tn(t)},wp=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$8=wp("top"),Z8=wp("right"),J8=wp("bottom"),X8=wp("left"),vp=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return xU(n.filter(tn))}}},Y8=vp("top-left"),e9=vp("top-right"),t9=vp("bottom-right"),n9=vp("bottom-left"),xp=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},r9=xp("top"),s9=xp("right"),i9=xp("bottom"),a9=xp("left"),_p=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return nh(n)?n.number:0}}},o9=_p("top"),A9=_p("right"),l9=_p("bottom"),c9=_p("left"),u9={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},d9={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},h9={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).reduce(function(n,r){return n|f9(r.value)},0)}},f9=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},m9={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},g9={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},sg;(function(t){t.NORMAL="normal",t.STRICT="strict"})(sg||(sg={}));var p9={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return sg.STRICT;case"normal":default:return sg.NORMAL}}},y9={name:"line-height",initialValue:"normal",prefix:!1,type:4},GE=function(t,e){return ht(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:tn(t)?gt(t,e):e},w9={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:T_.parse(t,e)}},v9={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Ow={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Bp=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},x9=Bp("top"),_9=Bp("right"),B9=Bp("bottom"),b9=Bp("left"),C9={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},E9={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},bp=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},I9=bp("top"),T9=bp("right"),k9=bp("bottom"),S9=bp("left"),N9={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},U9={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},F9={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Mw(e[0],"none")?[]:ti(e).map(function(n){for(var r={color:Pi.TRANSPARENT,offsetX:Cn,offsetY:Cn,blur:Cn},s=0,i=0;i<n.length;i++){var o=n[i];Ao(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:r.blur=o,s++):r.color=Xa.parse(t,o)}return r})}},Q9={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},P9={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=j9[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},R9=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},L9=function(t){var e=t.filter(function(u){return u.type===17}).map(function(u){return u.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[n,r,s,i,o,l]:null},j9={matrix:R9,matrix3d:L9},qE={type:16,number:50,flags:th},D9=[qE,qE],M9={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(tn);return n.length!==2?D9:[n[0],n[1]]}},O9={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ku;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Ku||(Ku={}));var H9={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Ku.BREAK_ALL;case"keep-all":return Ku.KEEP_ALL;case"normal":default:return Ku.NORMAL}}},V9={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Bc(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},LU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},K9={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Bc(e)?e.number:1}},z9={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},G9={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},q9={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},W9={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$9={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Bc(e))return e.number;if(ht(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Z9={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ht).map(function(n){return n.value})}},J9={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},cn=function(t,e){return(t&e)!==0},X9={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},Y9={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(vU),i=0;i<s.length;i++){var o=s[i],l=s[i+1];if(o.type===20){var u=l&&Bc(l)?l.number:1;r.push({counter:o.value,increment:u})}}return r}},ez={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(vU),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(ht(i)&&i.value!=="none"){var l=o&&Bc(o)?o.number:0;n.push({counter:i.value,reset:l})}}return n}},tz={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(nh).map(function(n){return LU.parse(t,n)})}},nz={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(T8);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var o=s[i].value,l=s[i+1].value;r.push({open:o,close:l})}return r}},WE=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},rz={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Mw(e[0],"none")?[]:ti(e).map(function(n){for(var r={color:255,offsetX:Cn,offsetY:Cn,blur:Cn,spread:Cn,inset:!1},s=0,i=0;i<n.length;i++){var o=n[i];Mw(o,"inset")?r.inset=!0:Ao(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:s===2?r.blur=o:r.spread=o,s++):r.color=Xa.parse(t,o)}return r})}},sz={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(ht).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},iz={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},az={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return nh(e)?e.number:0}},oz=function(){function t(e,n){var r,s;this.animationDuration=_e(e,tz,n.animationDuration),this.backgroundClip=_e(e,N8,n.backgroundClip),this.backgroundColor=_e(e,U8,n.backgroundColor),this.backgroundImage=_e(e,H8,n.backgroundImage),this.backgroundOrigin=_e(e,V8,n.backgroundOrigin),this.backgroundPosition=_e(e,K8,n.backgroundPosition),this.backgroundRepeat=_e(e,z8,n.backgroundRepeat),this.backgroundSize=_e(e,q8,n.backgroundSize),this.borderTopColor=_e(e,$8,n.borderTopColor),this.borderRightColor=_e(e,Z8,n.borderRightColor),this.borderBottomColor=_e(e,J8,n.borderBottomColor),this.borderLeftColor=_e(e,X8,n.borderLeftColor),this.borderTopLeftRadius=_e(e,Y8,n.borderTopLeftRadius),this.borderTopRightRadius=_e(e,e9,n.borderTopRightRadius),this.borderBottomRightRadius=_e(e,t9,n.borderBottomRightRadius),this.borderBottomLeftRadius=_e(e,n9,n.borderBottomLeftRadius),this.borderTopStyle=_e(e,r9,n.borderTopStyle),this.borderRightStyle=_e(e,s9,n.borderRightStyle),this.borderBottomStyle=_e(e,i9,n.borderBottomStyle),this.borderLeftStyle=_e(e,a9,n.borderLeftStyle),this.borderTopWidth=_e(e,o9,n.borderTopWidth),this.borderRightWidth=_e(e,A9,n.borderRightWidth),this.borderBottomWidth=_e(e,l9,n.borderBottomWidth),this.borderLeftWidth=_e(e,c9,n.borderLeftWidth),this.boxShadow=_e(e,rz,n.boxShadow),this.color=_e(e,u9,n.color),this.direction=_e(e,d9,n.direction),this.display=_e(e,h9,n.display),this.float=_e(e,m9,n.cssFloat),this.fontFamily=_e(e,q9,n.fontFamily),this.fontSize=_e(e,W9,n.fontSize),this.fontStyle=_e(e,J9,n.fontStyle),this.fontVariant=_e(e,Z9,n.fontVariant),this.fontWeight=_e(e,$9,n.fontWeight),this.letterSpacing=_e(e,g9,n.letterSpacing),this.lineBreak=_e(e,p9,n.lineBreak),this.lineHeight=_e(e,y9,n.lineHeight),this.listStyleImage=_e(e,w9,n.listStyleImage),this.listStylePosition=_e(e,v9,n.listStylePosition),this.listStyleType=_e(e,Ow,n.listStyleType),this.marginTop=_e(e,x9,n.marginTop),this.marginRight=_e(e,_9,n.marginRight),this.marginBottom=_e(e,B9,n.marginBottom),this.marginLeft=_e(e,b9,n.marginLeft),this.opacity=_e(e,K9,n.opacity);var i=_e(e,C9,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=_e(e,E9,n.overflowWrap),this.paddingTop=_e(e,I9,n.paddingTop),this.paddingRight=_e(e,T9,n.paddingRight),this.paddingBottom=_e(e,k9,n.paddingBottom),this.paddingLeft=_e(e,S9,n.paddingLeft),this.paintOrder=_e(e,sz,n.paintOrder),this.position=_e(e,U9,n.position),this.textAlign=_e(e,N9,n.textAlign),this.textDecorationColor=_e(e,z9,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=_e(e,G9,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=_e(e,F9,n.textShadow),this.textTransform=_e(e,Q9,n.textTransform),this.transform=_e(e,P9,n.transform),this.transformOrigin=_e(e,M9,n.transformOrigin),this.visibility=_e(e,O9,n.visibility),this.webkitTextStrokeColor=_e(e,iz,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=_e(e,az,n.webkitTextStrokeWidth),this.wordBreak=_e(e,H9,n.wordBreak),this.zIndex=_e(e,V9,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ya(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return cn(this.display,4)||cn(this.display,33554432)||cn(this.display,268435456)||cn(this.display,536870912)||cn(this.display,67108864)||cn(this.display,134217728)},t}(),Az=function(){function t(e,n){this.content=_e(e,X9,n.content),this.quotes=_e(e,nz,n.quotes)}return t}(),$E=function(){function t(e,n){this.counterIncrement=_e(e,Y9,n.counterIncrement),this.counterReset=_e(e,ez,n.counterReset)}return t}(),_e=function(t,e,n){var r=new yU,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var i=new wU(r.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(t,ht(o)?o.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return pp.parse(t,i.parseComponentValue());case"color":return Xa.parse(t,i.parseComponentValue());case"image":return T_.parse(t,i.parseComponentValue());case"length":var l=i.parseComponentValue();return Ao(l)?l:Cn;case"length-percentage":var u=i.parseComponentValue();return tn(u)?u:Cn;case"time":return LU.parse(t,i.parseComponentValue())}break}},lz="data-html2canvas-debug",cz=function(t){var e=t.getAttribute(lz);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Hw=function(t,e){var n=cz(t);return n===1||e===n},ni=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Hw(n,3))debugger;this.styles=new oz(e,window.getComputedStyle(n,null)),zw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=mp(this.context,n),Hw(n,4)&&(this.flags|=16)}return t}(),uz="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ZE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yf=0;yf<ZE.length;yf++)xu[ZE.charCodeAt(yf)]=yf;var dz=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)i=xu[t.charCodeAt(r)],o=xu[t.charCodeAt(r+1)],l=xu[t.charCodeAt(r+2)],u=xu[t.charCodeAt(r+3)],m[s++]=i<<2|o>>4,m[s++]=(o&15)<<4|l>>2,m[s++]=(l&3)<<6|u&63;return h},hz=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},fz=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Yo=5,k_=11,P0=2,mz=k_-Yo,jU=65536>>Yo,gz=1<<Yo,R0=gz-1,pz=1024>>Yo,yz=jU+pz,wz=yz,vz=32,xz=wz+vz,_z=65536>>k_,Bz=1<<mz,bz=Bz-1,JE=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Cz=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},Ez=function(t,e){var n=dz(t),r=Array.isArray(n)?fz(n):new Uint32Array(n),s=Array.isArray(n)?hz(n):new Uint16Array(n),i=24,o=JE(s,i/2,r[4]/2),l=r[5]===2?JE(s,(i+r[4])/2):Cz(r,Math.ceil((i+r[4])/4));return new Iz(r[0],r[1],r[2],r[3],o,l)},Iz=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Yo],n=(n<<P0)+(e&R0),this.data[n];if(e<=65535)return n=this.index[jU+(e-55296>>Yo)],n=(n<<P0)+(e&R0),this.data[n];if(e<this.highStart)return n=xz-_z+(e>>k_),n=this.index[n],n+=e>>Yo&bz,n=this.index[n],n=(n<<P0)+(e&R0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),XE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tz=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wf=0;wf<XE.length;wf++)Tz[XE.charCodeAt(wf)]=wf;var kz=1,L0=2,j0=3,YE=4,eI=5,Sz=7,tI=8,D0=9,M0=10,nI=11,rI=12,sI=13,iI=14,O0=15,Nz=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Uz=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},Fz=Ez(uz),qr="",H0="",Qz=function(t){return Fz.get(t)},Pz=function(t,e,n){var r=n-2,s=e[r],i=e[n-1],o=e[n];if(i===L0&&o===j0)return qr;if(i===L0||i===j0||i===YE||o===L0||o===j0||o===YE)return H0;if(i===tI&&[tI,D0,nI,rI].indexOf(o)!==-1||(i===nI||i===D0)&&(o===D0||o===M0)||(i===rI||i===M0)&&o===M0||o===sI||o===eI||o===Sz||i===kz)return qr;if(i===sI&&o===iI){for(;s===eI;)s=e[--r];if(s===iI)return qr}if(i===O0&&o===O0){for(var l=0;s===O0;)l++,s=e[--r];if(l%2===0)return qr}return H0},Rz=function(t){var e=Nz(t),n=e.length,r=0,s=0,i=e.map(Qz);return{next:function(){if(r>=n)return{done:!0,value:null};for(var o=qr;r<n&&(o=Pz(e,i,++r))===qr;);if(o!==qr||r===n){var l=Uz.apply(null,e.slice(s,r));return s=r,{value:l,done:!1}}return{done:!0,value:null}}}},Lz=function(t){for(var e=Rz(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},jz=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(r),i===e)return!0}}return!1},Dz=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=gp(r.data).map(function(u){return Wt(u)}),i=0,o={},l=s.every(function(u,h){n.setStart(r,i),n.setEnd(r,i+u.length);var m=n.getBoundingClientRect();i+=u.length;var p=m.x>o.x||m.y>o.y;return o=m,h===0?!0:p});return t.body.removeChild(e),l},Mz=function(){return typeof new Image().crossOrigin<"u"},Oz=function(){return typeof new XMLHttpRequest().responseType=="string"},Hz=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},aI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Vz=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=e.toDataURL();s.src=i;var o=Vw(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),oI(o).then(function(l){r.drawImage(l,0,0);var u=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var h=t.createElement("div");return h.style.backgroundImage="url("+i+")",h.style.height=n+"px",aI(u)?oI(Vw(n,n,0,0,h)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),aI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Vw=function(t,e,n,r,s){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(s),o},oI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Bn={get SUPPORT_RANGE_BOUNDS(){var t=jz(document);return Object.defineProperty(Bn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Bn.SUPPORT_RANGE_BOUNDS&&Dz(document);return Object.defineProperty(Bn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Hz(document);return Object.defineProperty(Bn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Vz(document):Promise.resolve(!1);return Object.defineProperty(Bn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Mz();return Object.defineProperty(Bn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Oz();return Object.defineProperty(Bn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Bn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Bn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},zu=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),Kz=function(t,e,n,r){var s=qz(e,n),i=[],o=0;return s.forEach(function(l){if(n.textDecorationLine.length||l.trim().length>0)if(Bn.SUPPORT_RANGE_BOUNDS){var u=AI(r,o,l.length).getClientRects();if(u.length>1){var h=S_(l),m=0;h.forEach(function(w){i.push(new zu(w,Vi.fromDOMRectList(t,AI(r,m+o,w.length).getClientRects()))),m+=w.length})}else i.push(new zu(l,Vi.fromDOMRectList(t,u)))}else{var p=r.splitText(l.length);i.push(new zu(l,zz(t,r))),r=p}else Bn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));o+=l.length}),i},zz=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var i=mp(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return Vi.EMPTY},AI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},S_=function(t){if(Bn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Lz(t)},Gz=function(t,e){if(Bn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return $z(t,e)},qz=function(t,e){return e.letterSpacing!==0?S_(t):Gz(t,e)},Wz=[32,160,4961,65792,65793,4153,4241],$z=function(t,e){for(var n=_K(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,i=function(){if(s.value){var o=s.value.slice(),l=gp(o),u="";l.forEach(function(h){Wz.indexOf(h)===-1?u+=Wt(h):(u.length&&r.push(u),r.push(Wt(h)),u="")}),u.length&&r.push(u)}};!(s=n.next()).done;)i();return r},Zz=function(){function t(e,n,r){this.text=Jz(n.data,r.textTransform),this.textBounds=Kz(e,this.text,r,n)}return t}(),Jz=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Xz,Yz);case 2:return t.toUpperCase();default:return t}},Xz=/(^|\s|:|-|\(|\))([a-z])/g,Yz=function(t,e,n){return t.length>0?e+n.toUpperCase():t},DU=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(ni),MU=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(ni),OU=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=new XMLSerializer,o=mp(n,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(ni),HU=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(ni),Kw=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(ni),eG=[{type:15,flags:0,unit:"px",number:3}],tG=[{type:16,flags:0,number:50}],nG=function(t){return t.width>t.height?new Vi(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Vi(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},rG=function(t){var e=t.type===sG?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},ig="checkbox",ag="radio",sG="password",lI=707406591,N_=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=rG(r),(s.type===ig||s.type===ag)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=nG(s.bounds)),s.type){case ig:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=eG;break;case ag:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=tG;break}return s}return e}(ni),VU=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(ni),KU=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(ni),zU=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=qU(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?Vu(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Pi.TRANSPARENT,o=r.contentWindow.document.body?Vu(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Pi.TRANSPARENT;s.backgroundColor=Ya(i)?Ya(o)?s.styles.backgroundColor:o:i}}catch{}return s}return e}(ni),iG=["OL","UL","MENU"],tm=function(t,e,n,r){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,WU(s)&&s.data.trim().length>0)n.textNodes.push(new Zz(t,s,n.styles));else if(Tl(s))if(XU(s)&&s.assignedNodes)s.assignedNodes().forEach(function(l){return tm(t,l,n,r)});else{var o=GU(t,s);o.styles.isVisible()&&(aG(s,o,r)?o.flags|=4:oG(o.styles)&&(o.flags|=2),iG.indexOf(s.tagName)!==-1&&(o.flags|=8),n.elements.push(o),s.slot,s.shadowRoot?tm(t,s.shadowRoot,o,r):!og(s)&&!$U(s)&&!Ag(s)&&tm(t,s,o,r))}},GU=function(t,e){return Gw(e)?new DU(t,e):ZU(e)?new MU(t,e):$U(e)?new OU(t,e):AG(e)?new HU(t,e):lG(e)?new Kw(t,e):cG(e)?new N_(t,e):Ag(e)?new VU(t,e):og(e)?new KU(t,e):JU(e)?new zU(t,e):new ni(t,e)},qU=function(t,e){var n=GU(t,e);return n.flags|=4,tm(t,e,n,n),n},aG=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||U_(t)&&n.styles.isTransparent()},oG=function(t){return t.isPositioned()||t.isFloating()},WU=function(t){return t.nodeType===Node.TEXT_NODE},Tl=function(t){return t.nodeType===Node.ELEMENT_NODE},zw=function(t){return Tl(t)&&typeof t.style<"u"&&!nm(t)},nm=function(t){return typeof t.className=="object"},AG=function(t){return t.tagName==="LI"},lG=function(t){return t.tagName==="OL"},cG=function(t){return t.tagName==="INPUT"},uG=function(t){return t.tagName==="HTML"},$U=function(t){return t.tagName==="svg"},U_=function(t){return t.tagName==="BODY"},ZU=function(t){return t.tagName==="CANVAS"},cI=function(t){return t.tagName==="VIDEO"},Gw=function(t){return t.tagName==="IMG"},JU=function(t){return t.tagName==="IFRAME"},uI=function(t){return t.tagName==="STYLE"},dG=function(t){return t.tagName==="SCRIPT"},og=function(t){return t.tagName==="TEXTAREA"},Ag=function(t){return t.tagName==="SELECT"},XU=function(t){return t.tagName==="SLOT"},dI=function(t){return t.tagName.indexOf("-")>0},hG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,i=!0;r!==null&&r.forEach(function(l){var u=n.counters[l.counter];u&&l.increment!==0&&(i=!1,u.length||u.push(1),u[Math.max(0,u.length-1)]+=l.increment)});var o=[];return i&&s.forEach(function(l){var u=n.counters[l.counter];o.push(l.counter),u||(u=n.counters[l.counter]=[]),u.push(l.reset)}),o},t}(),hI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},fI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},fG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},il=function(t,e,n,r,s,i){return t<e||t>n?kd(t,s,i.length>0):r.integers.reduce(function(o,l,u){for(;t>=l;)t-=l,o+=r.values[u];return o},"")+i},YU=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},qt=function(t,e,n,r,s){var i=n-e+1;return(t<0?"-":"")+(YU(Math.abs(t),i,r,function(o){return Wt(Math.floor(o%i)+e)})+s)},So=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return YU(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},hl=1,xa=2,_a=4,_u=8,wi=function(t,e,n,r,s,i){if(t<-9999||t>9999)return kd(t,4,s.length>0);var o=Math.abs(t),l=s;if(o===0)return e[0]+l;for(var u=0;o>0&&u<=4;u++){var h=o%10;h===0&&cn(i,hl)&&l!==""?l=e[h]+l:h>1||h===1&&u===0||h===1&&u===1&&cn(i,xa)||h===1&&u===1&&cn(i,_a)&&t>100||h===1&&u>1&&cn(i,_u)?l=e[h]+(u>0?n[u-1]:"")+l:h===1&&u>0&&(l=n[u-1]+l),o=Math.floor(o/10)}return(t<0?r:"")+l},mI="",gI="",pI="",V0="",kd=function(t,e,n){var r=n?". ":"",s=n?"":"",i=n?", ":"",o=n?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=qt(t,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return So(t,"",s);case 6:return il(t,1,3999,hI,3,r).toLowerCase();case 7:return il(t,1,3999,hI,3,r);case 8:return qt(t,945,969,!1,r);case 9:return qt(t,97,122,!1,r);case 10:return qt(t,65,90,!1,r);case 11:return qt(t,1632,1641,!0,r);case 12:case 49:return il(t,1,9999,fI,3,r);case 35:return il(t,1,9999,fI,3,r).toLowerCase();case 13:return qt(t,2534,2543,!0,r);case 14:case 30:return qt(t,6112,6121,!0,r);case 15:return So(t,"",s);case 16:return So(t,"",s);case 17:case 48:return wi(t,"",mI,"",s,xa|_a|_u);case 47:return wi(t,"",gI,"",s,hl|xa|_a|_u);case 42:return wi(t,"",mI,"",s,xa|_a|_u);case 41:return wi(t,"",gI,"",s,hl|xa|_a|_u);case 26:return wi(t,"","",pI,s,0);case 25:return wi(t,"","",pI,s,hl|xa|_a);case 31:return wi(t,"","",V0,i,hl|xa|_a);case 33:return wi(t,"","",V0,i,0);case 32:return wi(t,"","",V0,i,hl|xa|_a);case 18:return qt(t,2406,2415,!0,r);case 20:return il(t,1,19999,mG,3,r);case 21:return qt(t,2790,2799,!0,r);case 22:return qt(t,2662,2671,!0,r);case 22:return il(t,1,10999,fG,3,r);case 23:return So(t,"");case 24:return So(t,"");case 27:return qt(t,3302,3311,!0,r);case 28:return So(t,"",s);case 29:return So(t,"",s);case 34:return qt(t,3792,3801,!0,r);case 37:return qt(t,6160,6169,!0,r);case 38:return qt(t,4160,4169,!0,r);case 39:return qt(t,2918,2927,!0,r);case 40:return qt(t,1776,1785,!0,r);case 43:return qt(t,3046,3055,!0,r);case 44:return qt(t,3174,3183,!0,r);case 45:return qt(t,3664,3673,!0,r);case 46:return qt(t,3872,3881,!0,r);case 3:default:return qt(t,48,57,!0,r)}},eF="data-html2canvas-ignore",yI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new hG,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=gG(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=s.contentWindow,u=l.document,h=wG(s).then(function(){return Yn(r,void 0,void 0,function(){var m,p;return Qn(this,function(w){switch(w.label){case 0:return this.scrolledElements.forEach(BG),l&&(l.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==n.top||l.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-n.left,l.scrollY-n.top,0,0))),m=this.options.onclone,p=this.clonedReferenceElement,typeof p>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:w.sent(),w.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,yG(u)]:[3,4];case 3:w.sent(),w.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(u,p)}).then(function(){return s})]:[2,s]}})})});return u.open(),u.write(xG(document.doctype)+"<html></html>"),_G(this.referenceElement.ownerDocument,i,o),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),h},t.prototype.createElementClone=function(e){if(Hw(e,2))debugger;if(ZU(e))return this.createCanvasClone(e);if(cI(e))return this.createVideoClone(e);if(uI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return Gw(n)&&(Gw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),dI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return K0(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var l=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(l){var u=l.getContextAttributes();(u==null?void 0:u.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!Tl(n)||!dG(n)&&!n.hasAttribute(eF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Tl(n)||!uI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Tl(i)&&XU(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return s.appendChildNode(n,l,r)})}else this.appendChildNode(n,i,r)},t.prototype.cloneNode=function(e,n){if(WU(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Tl(e)&&(zw(e)||nm(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),l=r.getComputedStyle(e,":after");this.referenceElement===e&&zw(s)&&(this.clonedReferenceElement=s),U_(s)&&EG(s);var u=this.counters.parse(new $E(this.context,i)),h=this.resolvePseudoContent(e,s,o,Gu.BEFORE);dI(e)&&(n=!0),cI(e)||this.cloneChildNodes(e,s,n),h&&s.insertBefore(h,s.firstChild);var m=this.resolvePseudoContent(e,s,l,Gu.AFTER);return m&&s.appendChild(m),this.counters.pop(u),(i&&(this.options.copyStyles||nm(e))&&!JU(e)||n)&&K0(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(og(e)||Ag(e))&&(og(s)||Ag(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var i=this;if(r){var o=r.content,l=n.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new $E(this.context,r));var u=new Az(this.context,r),h=l.createElement("html2canvaspseudoelement");K0(r,h),u.content.forEach(function(p){if(p.type===0)h.appendChild(l.createTextNode(p.value));else if(p.type===22){var w=l.createElement("img");w.src=p.value,w.style.opacity="1",h.appendChild(w)}else if(p.type===18){if(p.name==="attr"){var C=p.values.filter(ht);C.length&&h.appendChild(l.createTextNode(e.getAttribute(C[0].value)||""))}else if(p.name==="counter"){var b=p.values.filter(dc),x=b[0],U=b[1];if(x&&ht(x)){var T=i.counters.getCounterValue(x.value),E=U&&ht(U)?Ow.parse(i.context,U.value):3;h.appendChild(l.createTextNode(kd(T,E,!1)))}}else if(p.name==="counters"){var N=p.values.filter(dc),x=N[0],H=N[1],U=N[2];if(x&&ht(x)){var V=i.counters.getCounterValues(x.value),M=U&&ht(U)?Ow.parse(i.context,U.value):3,I=H&&H.type===0?H.value:"",B=V.map(function(D){return kd(D,M,!1)}).join(I);h.appendChild(l.createTextNode(B))}}}else if(p.type===20)switch(p.value){case"open-quote":h.appendChild(l.createTextNode(WE(u.quotes,i.quoteDepth++,!0)));break;case"close-quote":h.appendChild(l.createTextNode(WE(u.quotes,--i.quoteDepth,!1)));break;default:h.appendChild(l.createTextNode(p.value))}}),h.className=qw+" "+Ww;var m=s===Gu.BEFORE?" "+qw:" "+Ww;return nm(n)?n.className.baseValue+=m:n.className+=m,h}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Gu;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Gu||(Gu={}));var gG=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(eF,"true"),t.body.appendChild(n),n},pG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},yG=function(t){return Promise.all([].slice.call(t.images,0).map(pG))},wG=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},vG=["all","d","content"],K0=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);vG.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},xG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},_G=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},BG=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},bG=":before",CG=":after",qw="___html2canvas___pseudoelement_before",Ww="___html2canvas___pseudoelement_after",wI=`{
    content: "" !important;
    display: none !important;
}`,EG=function(t){IG(t,"."+qw+bG+wI+`
         .`+Ww+CG+wI)},IG=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},tF=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),TG=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(G0(e)||UG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Yn(this,void 0,void 0,function(){var n,r,s,i,o=this;return Qn(this,function(l){switch(l.label){case 0:return n=tF.isSameOrigin(e),r=!z0(e)&&this._options.useCORS===!0&&Bn.SUPPORT_CORS_IMAGES&&!n,s=!z0(e)&&!n&&!G0(e)&&typeof this._options.proxy=="string"&&Bn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!z0(e)&&!G0(e)&&!s&&!r?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(u,h){var m=new Image;m.onload=function(){return u(m)},m.onerror=h,(FG(i)||r)&&(m.crossOrigin="anonymous"),m.src=i,m.complete===!0&&setTimeout(function(){return u(m)},500),o._options.imageTimeout>0&&setTimeout(function(){return h("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,o){var l=Bn.SUPPORT_RESPONSE_TYPE?"blob":"text",u=new XMLHttpRequest;u.onload=function(){if(u.status===200)if(l==="text")i(u.response);else{var p=new FileReader;p.addEventListener("load",function(){return i(p.result)},!1),p.addEventListener("error",function(w){return o(w)},!1),p.readAsDataURL(u.response)}else o("Failed to proxy resource "+s+" with status code "+u.status)},u.onerror=o;var h=r.indexOf("?")>-1?"&":"?";if(u.open("GET",""+r+h+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&u instanceof XMLHttpRequest&&(u.responseType=l),n._options.imageTimeout){var m=n._options.imageTimeout;u.timeout=m,u.ontimeout=function(){return o("Timed out ("+m+"ms) proxying "+s)}}u.send()})},t}(),kG=/^data:image\/svg\+xml/i,SG=/^data:image\/.*;base64,/i,NG=/^data:image\/.*/i,UG=function(t){return Bn.SUPPORT_SVG_DRAWING||!QG(t)},z0=function(t){return NG.test(t)},FG=function(t){return SG.test(t)},G0=function(t){return t.substr(0,4)==="blob"},QG=function(t){return t.substr(-3).toLowerCase()==="svg"||kG.test(t)},ye=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),al=function(t,e,n){return new ye(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},vf=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=al(this.start,this.startControl,e),s=al(this.startControl,this.endControl,e),i=al(this.endControl,this.end,e),o=al(r,s,e),l=al(s,i,e),u=al(o,l,e);return n?new t(this.start,r,o,u):new t(u,l,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Zr=function(t){return t.type===1},PG=function(){function t(e){var n=e.styles,r=e.bounds,s=vu(n.borderTopLeftRadius,r.width,r.height),i=s[0],o=s[1],l=vu(n.borderTopRightRadius,r.width,r.height),u=l[0],h=l[1],m=vu(n.borderBottomRightRadius,r.width,r.height),p=m[0],w=m[1],C=vu(n.borderBottomLeftRadius,r.width,r.height),b=C[0],x=C[1],U=[];U.push((i+u)/r.width),U.push((b+p)/r.width),U.push((o+x)/r.height),U.push((h+w)/r.height);var T=Math.max.apply(Math,U);T>1&&(i/=T,o/=T,u/=T,h/=T,p/=T,w/=T,b/=T,x/=T);var E=r.width-u,N=r.height-w,H=r.width-p,V=r.height-x,M=n.borderTopWidth,I=n.borderRightWidth,B=n.borderBottomWidth,S=n.borderLeftWidth,P=gt(n.paddingTop,e.bounds.width),D=gt(n.paddingRight,e.bounds.width),O=gt(n.paddingBottom,e.bounds.width),R=gt(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Et(r.left+S/3,r.top+M/3,i-S/3,o-M/3,rt.TOP_LEFT):new ye(r.left+S/3,r.top+M/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Et(r.left+E,r.top+M/3,u-I/3,h-M/3,rt.TOP_RIGHT):new ye(r.left+r.width-I/3,r.top+M/3),this.bottomRightBorderDoubleOuterBox=p>0||w>0?Et(r.left+H,r.top+N,p-I/3,w-B/3,rt.BOTTOM_RIGHT):new ye(r.left+r.width-I/3,r.top+r.height-B/3),this.bottomLeftBorderDoubleOuterBox=b>0||x>0?Et(r.left+S/3,r.top+V,b-S/3,x-B/3,rt.BOTTOM_LEFT):new ye(r.left+S/3,r.top+r.height-B/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Et(r.left+S*2/3,r.top+M*2/3,i-S*2/3,o-M*2/3,rt.TOP_LEFT):new ye(r.left+S*2/3,r.top+M*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Et(r.left+E,r.top+M*2/3,u-I*2/3,h-M*2/3,rt.TOP_RIGHT):new ye(r.left+r.width-I*2/3,r.top+M*2/3),this.bottomRightBorderDoubleInnerBox=p>0||w>0?Et(r.left+H,r.top+N,p-I*2/3,w-B*2/3,rt.BOTTOM_RIGHT):new ye(r.left+r.width-I*2/3,r.top+r.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||x>0?Et(r.left+S*2/3,r.top+V,b-S*2/3,x-B*2/3,rt.BOTTOM_LEFT):new ye(r.left+S*2/3,r.top+r.height-B*2/3),this.topLeftBorderStroke=i>0||o>0?Et(r.left+S/2,r.top+M/2,i-S/2,o-M/2,rt.TOP_LEFT):new ye(r.left+S/2,r.top+M/2),this.topRightBorderStroke=i>0||o>0?Et(r.left+E,r.top+M/2,u-I/2,h-M/2,rt.TOP_RIGHT):new ye(r.left+r.width-I/2,r.top+M/2),this.bottomRightBorderStroke=p>0||w>0?Et(r.left+H,r.top+N,p-I/2,w-B/2,rt.BOTTOM_RIGHT):new ye(r.left+r.width-I/2,r.top+r.height-B/2),this.bottomLeftBorderStroke=b>0||x>0?Et(r.left+S/2,r.top+V,b-S/2,x-B/2,rt.BOTTOM_LEFT):new ye(r.left+S/2,r.top+r.height-B/2),this.topLeftBorderBox=i>0||o>0?Et(r.left,r.top,i,o,rt.TOP_LEFT):new ye(r.left,r.top),this.topRightBorderBox=u>0||h>0?Et(r.left+E,r.top,u,h,rt.TOP_RIGHT):new ye(r.left+r.width,r.top),this.bottomRightBorderBox=p>0||w>0?Et(r.left+H,r.top+N,p,w,rt.BOTTOM_RIGHT):new ye(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=b>0||x>0?Et(r.left,r.top+V,b,x,rt.BOTTOM_LEFT):new ye(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?Et(r.left+S,r.top+M,Math.max(0,i-S),Math.max(0,o-M),rt.TOP_LEFT):new ye(r.left+S,r.top+M),this.topRightPaddingBox=u>0||h>0?Et(r.left+Math.min(E,r.width-I),r.top+M,E>r.width+I?0:Math.max(0,u-I),Math.max(0,h-M),rt.TOP_RIGHT):new ye(r.left+r.width-I,r.top+M),this.bottomRightPaddingBox=p>0||w>0?Et(r.left+Math.min(H,r.width-S),r.top+Math.min(N,r.height-B),Math.max(0,p-I),Math.max(0,w-B),rt.BOTTOM_RIGHT):new ye(r.left+r.width-I,r.top+r.height-B),this.bottomLeftPaddingBox=b>0||x>0?Et(r.left+S,r.top+Math.min(V,r.height-B),Math.max(0,b-S),Math.max(0,x-B),rt.BOTTOM_LEFT):new ye(r.left+S,r.top+r.height-B),this.topLeftContentBox=i>0||o>0?Et(r.left+S+R,r.top+M+P,Math.max(0,i-(S+R)),Math.max(0,o-(M+P)),rt.TOP_LEFT):new ye(r.left+S+R,r.top+M+P),this.topRightContentBox=u>0||h>0?Et(r.left+Math.min(E,r.width+S+R),r.top+M+P,E>r.width+S+R?0:u-S+R,h-(M+P),rt.TOP_RIGHT):new ye(r.left+r.width-(I+D),r.top+M+P),this.bottomRightContentBox=p>0||w>0?Et(r.left+Math.min(H,r.width-(S+R)),r.top+Math.min(N,r.height+M+P),Math.max(0,p-(I+D)),w-(B+O),rt.BOTTOM_RIGHT):new ye(r.left+r.width-(I+D),r.top+r.height-(B+O)),this.bottomLeftContentBox=b>0||x>0?Et(r.left+S+R,r.top+V,Math.max(0,b-(S+R)),x-(B+O),rt.BOTTOM_LEFT):new ye(r.left+S+R,r.top+r.height-(B+O))}return t}(),rt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(rt||(rt={}));var Et=function(t,e,n,r,s){var i=4*((Math.sqrt(2)-1)/3),o=n*i,l=r*i,u=t+n,h=e+r;switch(s){case rt.TOP_LEFT:return new vf(new ye(t,h),new ye(t,h-l),new ye(u-o,e),new ye(u,e));case rt.TOP_RIGHT:return new vf(new ye(t,e),new ye(t+o,e),new ye(u,h-l),new ye(u,h));case rt.BOTTOM_RIGHT:return new vf(new ye(u,e),new ye(u,e+l),new ye(t+o,h),new ye(t,h));case rt.BOTTOM_LEFT:default:return new vf(new ye(u,h),new ye(u-o,h),new ye(t,e+l),new ye(t,e))}},lg=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},RG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},cg=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},LG=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),xf=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),jG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),DG=function(t){return t.type===0},nF=function(t){return t.type===1},MG=function(t){return t.type===2},vI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},OG=function(t,e,n,r,s){return t.map(function(i,o){switch(o){case 0:return i.add(e,n);case 1:return i.add(e+r,n);case 2:return i.add(e+r,n+s);case 3:return i.add(e,n+s)}return i})},rF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),sF=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new PG(this.container),this.container.styles.opacity<1&&this.effects.push(new jG(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new LG(r,s,i))}if(this.container.styles.overflowX!==0){var o=lg(this.curves),l=cg(this.curves);vI(o,l)?this.effects.push(new xf(o,6)):(this.effects.push(new xf(o,2)),this.effects.push(new xf(l,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(u){return!nF(u)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=lg(r.curves),l=cg(r.curves);vI(o,l)||s.unshift(new xf(l,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(u){return cn(u.target,e)})},t}(),$w=function(t,e,n,r){t.container.elements.forEach(function(s){var i=cn(s.flags,4),o=cn(s.flags,2),l=new sF(s,t);cn(s.styles.display,2048)&&r.push(l);var u=cn(s.flags,8)?[]:r;if(i||o){var h=i||s.styles.isPositioned()?n:e,m=new rF(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var p=s.styles.zIndex.order;if(p<0){var w=0;h.negativeZIndex.some(function(b,x){return p>b.element.container.styles.zIndex.order?(w=x,!1):w>0}),h.negativeZIndex.splice(w,0,m)}else if(p>0){var C=0;h.positiveZIndex.some(function(b,x){return p>=b.element.container.styles.zIndex.order?(C=x+1,!1):C>0}),h.positiveZIndex.splice(C,0,m)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else s.styles.isFloating()?h.nonPositionedFloats.push(m):h.nonPositionedInlineLevel.push(m);$w(l,m,i?m:n,u)}else s.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),$w(l,e,n,u);cn(s.flags,8)&&iF(s,u)})},iF=function(t,e){for(var n=t instanceof Kw?t.start:1,r=t instanceof Kw?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof HU&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=kd(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},HG=function(t){var e=new sF(t,null),n=new rF(e),r=[];return $w(e,n,n,r),iF(e.container,r),n},xI=function(t,e){switch(e){case 0:return Yr(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Yr(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Yr(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Yr(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},VG=function(t,e){switch(e){case 0:return Yr(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Yr(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Yr(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Yr(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},KG=function(t,e){switch(e){case 0:return Yr(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Yr(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Yr(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Yr(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},zG=function(t,e){switch(e){case 0:return _f(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return _f(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return _f(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return _f(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},_f=function(t,e){var n=[];return Zr(t)?n.push(t.subdivide(.5,!1)):n.push(t),Zr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Yr=function(t,e,n,r){var s=[];return Zr(t)?s.push(t.subdivide(.5,!1)):s.push(t),Zr(n)?s.push(n.subdivide(.5,!0)):s.push(n),Zr(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Zr(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},aF=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},ug=function(t){var e=t.styles,n=t.bounds,r=gt(e.paddingLeft,n.width),s=gt(e.paddingRight,n.width),i=gt(e.paddingTop,n.width),o=gt(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+i+o))},GG=function(t,e){return t===0?e.bounds:t===2?ug(e):aF(e)},qG=function(t,e){return t===0?e.bounds:t===2?ug(e):aF(e)},q0=function(t,e,n){var r=GG(fl(t.styles.backgroundOrigin,e),t),s=qG(fl(t.styles.backgroundClip,e),t),i=WG(fl(t.styles.backgroundSize,e),n,r),o=i[0],l=i[1],u=vu(fl(t.styles.backgroundPosition,e),r.width-o,r.height-l),h=$G(fl(t.styles.backgroundRepeat,e),u,i,r,s),m=Math.round(r.left+u[0]),p=Math.round(r.top+u[1]);return[h,m,p,o,l]},ol=function(t){return ht(t)&&t.value===Hl.AUTO},Bf=function(t){return typeof t=="number"},WG=function(t,e,n){var r=e[0],s=e[1],i=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(tn(o)&&l&&tn(l))return[gt(o,n.width),gt(l,n.height)];var u=Bf(i);if(ht(o)&&(o.value===Hl.CONTAIN||o.value===Hl.COVER)){if(Bf(i)){var h=n.width/n.height;return h<i!=(o.value===Hl.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var m=Bf(r),p=Bf(s),w=m||p;if(ol(o)&&(!l||ol(l))){if(m&&p)return[r,s];if(!u&&!w)return[n.width,n.height];if(w&&u){var C=m?r:s*i,b=p?s:r/i;return[C,b]}var x=m?r:n.width,U=p?s:n.height;return[x,U]}if(u){var T=0,E=0;return tn(o)?T=gt(o,n.width):tn(l)&&(E=gt(l,n.height)),ol(o)?T=E*i:(!l||ol(l))&&(E=T/i),[T,E]}var N=null,H=null;if(tn(o)?N=gt(o,n.width):l&&tn(l)&&(H=gt(l,n.height)),N!==null&&(!l||ol(l))&&(H=m&&p?N/r*s:n.height),H!==null&&ol(o)&&(N=m&&p?H/s*r:n.width),N!==null&&H!==null)return[N,H];throw new Error("Unable to calculate background-size for element")},fl=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},$G=function(t,e,n,r,s){var i=e[0],o=e[1],l=n[0],u=n[1];switch(t){case 2:return[new ye(Math.round(r.left),Math.round(r.top+o)),new ye(Math.round(r.left+r.width),Math.round(r.top+o)),new ye(Math.round(r.left+r.width),Math.round(u+r.top+o)),new ye(Math.round(r.left),Math.round(u+r.top+o))];case 3:return[new ye(Math.round(r.left+i),Math.round(r.top)),new ye(Math.round(r.left+i+l),Math.round(r.top)),new ye(Math.round(r.left+i+l),Math.round(r.height+r.top)),new ye(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new ye(Math.round(r.left+i),Math.round(r.top+o)),new ye(Math.round(r.left+i+l),Math.round(r.top+o)),new ye(Math.round(r.left+i+l),Math.round(r.top+o+u)),new ye(Math.round(r.left+i),Math.round(r.top+o+u))];default:return[new ye(Math.round(s.left),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.height+s.top)),new ye(Math.round(s.left),Math.round(s.height+s.top))]}},ZG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",_I="Hidden Text",JG=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),s.src=ZG,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(_I)),r.appendChild(i),r.appendChild(s);var l=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(_I)),r.style.lineHeight="normal",s.style.verticalAlign="super";var u=s.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:l,middle:u}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),oF=function(){function t(e,n){this.context=e,this.options=n}return t}(),XG=1e4,YG=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new JG(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),MG(n)&&(this.ctx.globalAlpha=n.opacity),DG(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),nF(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Yn(this,void 0,void 0,function(){var r;return Qn(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Yn(this,void 0,void 0,function(){return Qn(this,function(r){switch(r.label){case 0:if(cn(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var o=S_(n.text);o.reduce(function(l,u){return i.ctx.fillText(u,l,n.bounds.top+s),l+i.ctx.measureText(u).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=s7(n.fontFamily).join(", "),i=nh(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(n,r){return Yn(this,void 0,void 0,function(){var s,i,o,l,u,h,m,p,w=this;return Qn(this,function(C){return s=this.createFontStyle(r),i=s[0],o=s[1],l=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",u=this.fontMetrics.getMetrics(o,l),h=u.baseline,m=u.middle,p=r.paintOrder,n.textBounds.forEach(function(b){p.forEach(function(x){switch(x){case 0:w.ctx.fillStyle=yn(r.color),w.renderTextWithLetterSpacing(b,r.letterSpacing,h);var U=r.textShadow;U.length&&b.text.trim().length&&(U.slice(0).reverse().forEach(function(T){w.ctx.shadowColor=yn(T.color),w.ctx.shadowOffsetX=T.offsetX.number*w.options.scale,w.ctx.shadowOffsetY=T.offsetY.number*w.options.scale,w.ctx.shadowBlur=T.blur.number,w.renderTextWithLetterSpacing(b,r.letterSpacing,h)}),w.ctx.shadowColor="",w.ctx.shadowOffsetX=0,w.ctx.shadowOffsetY=0,w.ctx.shadowBlur=0),r.textDecorationLine.length&&(w.ctx.fillStyle=yn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(T){switch(T){case 1:w.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+h),b.bounds.width,1);break;case 2:w.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:w.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+m),b.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&b.text.trim().length&&(w.ctx.strokeStyle=yn(r.webkitTextStrokeColor),w.ctx.lineWidth=r.webkitTextStrokeWidth,w.ctx.lineJoin=window.chrome?"miter":"round",w.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+h)),w.ctx.strokeStyle="",w.ctx.lineWidth=0,w.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=ug(n),o=cg(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Yn(this,void 0,void 0,function(){var r,s,i,o,l,u,E,E,h,m,p,w,H,C,b,V,x,U,T,E,N,H,V;return Qn(this,function(M){switch(M.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,o=0,l=r.textNodes,M.label=1;case 1:return o<l.length?(u=l[o],[4,this.renderTextNode(u,i)]):[3,4];case 2:M.sent(),M.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof DU))return[3,8];M.label=5;case 5:return M.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return E=M.sent(),this.renderReplacedElement(r,s,E),[3,8];case 7:return M.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof MU&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof OU))return[3,12];M.label=9;case 9:return M.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return E=M.sent(),this.renderReplacedElement(r,s,E),[3,12];case 11:return M.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof zU&&r.tree?(h=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,h.render(r.tree)]):[3,14];case 13:m=M.sent(),r.width&&r.height&&this.ctx.drawImage(m,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),M.label=14;case 14:if(r instanceof N_&&(p=Math.min(r.bounds.width,r.bounds.height),r.type===ig?r.checked&&(this.ctx.save(),this.path([new ye(r.bounds.left+p*.39363,r.bounds.top+p*.79),new ye(r.bounds.left+p*.16,r.bounds.top+p*.5549),new ye(r.bounds.left+p*.27347,r.bounds.top+p*.44071),new ye(r.bounds.left+p*.39694,r.bounds.top+p*.5649),new ye(r.bounds.left+p*.72983,r.bounds.top+p*.23),new ye(r.bounds.left+p*.84,r.bounds.top+p*.34085),new ye(r.bounds.left+p*.39363,r.bounds.top+p*.79)]),this.ctx.fillStyle=yn(lI),this.ctx.fill(),this.ctx.restore()):r.type===ag&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+p/2,r.bounds.top+p/2,p/4,0,Math.PI*2,!0),this.ctx.fillStyle=yn(lI),this.ctx.fill(),this.ctx.restore())),e7(r)&&r.value.length){switch(w=this.createFontStyle(i),H=w[0],C=w[1],b=this.fontMetrics.getMetrics(H,C).baseline,this.ctx.font=H,this.ctx.fillStyle=yn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=n7(r.styles.textAlign),V=ug(r),x=0,r.styles.textAlign){case 1:x+=V.width/2;break;case 2:x+=V.width;break}U=V.add(x,0,0,-V.height/2+1),this.ctx.save(),this.path([new ye(V.left,V.top),new ye(V.left+V.width,V.top),new ye(V.left+V.width,V.top+V.height),new ye(V.left,V.top+V.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new zu(r.value,U),i.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!cn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(T=r.styles.listStyleImage,T.type!==0)return[3,18];E=void 0,N=T.url,M.label=15;case 15:return M.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return E=M.sent(),this.ctx.drawImage(E,r.bounds.left-(E.width+10),r.bounds.top),[3,18];case 17:return M.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(H=this.createFontStyle(i)[0],this.ctx.font=H,this.ctx.fillStyle=yn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",V=new Vi(r.bounds.left,r.bounds.top+gt(r.styles.paddingTop,r.bounds.width),r.bounds.width,GE(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new zu(n.listValue,V),i.letterSpacing,GE(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),M.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Yn(this,void 0,void 0,function(){var r,s,T,i,o,T,l,u,T,h,m,T,p,w,T,C,b,T,x,U,T;return Qn(this,function(E){switch(E.label){case 0:if(cn(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:E.sent(),r=0,s=n.negativeZIndex,E.label=2;case 2:return r<s.length?(T=s[r],[4,this.renderStack(T)]):[3,5];case 3:E.sent(),E.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:E.sent(),i=0,o=n.nonInlineLevel,E.label=7;case 7:return i<o.length?(T=o[i],[4,this.renderNode(T)]):[3,10];case 8:E.sent(),E.label=9;case 9:return i++,[3,7];case 10:l=0,u=n.nonPositionedFloats,E.label=11;case 11:return l<u.length?(T=u[l],[4,this.renderStack(T)]):[3,14];case 12:E.sent(),E.label=13;case 13:return l++,[3,11];case 14:h=0,m=n.nonPositionedInlineLevel,E.label=15;case 15:return h<m.length?(T=m[h],[4,this.renderStack(T)]):[3,18];case 16:E.sent(),E.label=17;case 17:return h++,[3,15];case 18:p=0,w=n.inlineLevel,E.label=19;case 19:return p<w.length?(T=w[p],[4,this.renderNode(T)]):[3,22];case 20:E.sent(),E.label=21;case 21:return p++,[3,19];case 22:C=0,b=n.zeroOrAutoZIndexOrTransformedOrOpacity,E.label=23;case 23:return C<b.length?(T=b[C],[4,this.renderStack(T)]):[3,26];case 24:E.sent(),E.label=25;case 25:return C++,[3,23];case 26:x=0,U=n.positiveZIndex,E.label=27;case 27:return x<U.length?(T=U[x],[4,this.renderStack(T)]):[3,30];case 28:E.sent(),E.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var o=Zr(s)?s.start:s;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Zr(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,s);var u=l.getContext("2d");return u.drawImage(n,0,0,n.width,n.height,0,0,r,s),l},e.prototype.renderBackgroundImage=function(n){return Yn(this,void 0,void 0,function(){var r,s,i,o,l,u;return Qn(this,function(h){switch(h.label){case 0:r=n.styles.backgroundImage.length-1,s=function(m){var p,w,C,P,Ae,me,R,Z,B,b,P,Ae,me,R,Z,x,U,T,E,N,H,V,M,I,B,S,P,D,O,R,Z,se,Ae,me,G,oe,Y,ve,ue,fe,pe,de;return Qn(this,function(ae){switch(ae.label){case 0:if(m.type!==0)return[3,5];p=void 0,w=m.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,i.context.cache.match(w)];case 2:return p=ae.sent(),[3,4];case 3:return ae.sent(),i.context.logger.error("Error loading background-image "+w),[3,4];case 4:return p&&(C=q0(n,r,[p.width,p.height,p.width/p.height]),P=C[0],Ae=C[1],me=C[2],R=C[3],Z=C[4],B=i.ctx.createPattern(i.resizeImage(p,R,Z),"repeat"),i.renderRepeat(P,B,Ae,me)),[3,6];case 5:D8(m)?(b=q0(n,r,[null,null,null]),P=b[0],Ae=b[1],me=b[2],R=b[3],Z=b[4],x=Q8(m.angle,R,Z),U=x[0],T=x[1],E=x[2],N=x[3],H=x[4],V=document.createElement("canvas"),V.width=R,V.height=Z,M=V.getContext("2d"),I=M.createLinearGradient(T,N,E,H),KE(m.stops,U).forEach(function(Fe){return I.addColorStop(Fe.stop,yn(Fe.color))}),M.fillStyle=I,M.fillRect(0,0,R,Z),R>0&&Z>0&&(B=i.ctx.createPattern(V,"repeat"),i.renderRepeat(P,B,Ae,me))):M8(m)&&(S=q0(n,r,[null,null,null]),P=S[0],D=S[1],O=S[2],R=S[3],Z=S[4],se=m.position.length===0?[I_]:m.position,Ae=gt(se[0],R),me=gt(se[se.length-1],Z),G=P8(m,Ae,me,R,Z),oe=G[0],Y=G[1],oe>0&&Y>0&&(ve=i.ctx.createRadialGradient(D+Ae,O+me,0,D+Ae,O+me,oe),KE(m.stops,oe*2).forEach(function(Fe){return ve.addColorStop(Fe.stop,yn(Fe.color))}),i.path(P),i.ctx.fillStyle=ve,oe!==Y?(ue=n.bounds.left+.5*n.bounds.width,fe=n.bounds.top+.5*n.bounds.height,pe=Y/oe,de=1/pe,i.ctx.save(),i.ctx.translate(ue,fe),i.ctx.transform(1,0,0,pe,0,0),i.ctx.translate(-ue,-fe),i.ctx.fillRect(D,de*(O-fe)+fe,R,Z*de),i.ctx.restore()):i.ctx.fill())),ae.label=6;case 6:return r--,[2]}})},i=this,o=0,l=n.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return o<l.length?(u=l[o],[5,s(u)]):[3,4];case 2:h.sent(),h.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Yn(this,void 0,void 0,function(){return Qn(this,function(i){return this.path(xI(s,r)),this.ctx.fillStyle=yn(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,i){return Yn(this,void 0,void 0,function(){var o,l;return Qn(this,function(u){switch(u.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return u.sent(),[2];case 2:return o=VG(i,s),this.path(o),this.ctx.fillStyle=yn(n),this.ctx.fill(),l=KG(i,s),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Yn(this,void 0,void 0,function(){var r,s,i,o,l,u,h,m,p=this;return Qn(this,function(w){switch(w.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!Ya(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=t7(fl(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Ya(r.backgroundColor)||(this.ctx.fillStyle=yn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:w.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(C){p.ctx.save();var b=lg(n.curves),x=C.inset?0:XG,U=OG(b,-x+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(p.path(b),p.ctx.clip(),p.mask(U)):(p.mask(b),p.ctx.clip(),p.path(U)),p.ctx.shadowOffsetX=C.offsetX.number+x,p.ctx.shadowOffsetY=C.offsetY.number,p.ctx.shadowColor=yn(C.color),p.ctx.shadowBlur=C.blur.number,p.ctx.fillStyle=C.inset?yn(C.color):"rgba(0,0,0,1)",p.ctx.fill(),p.ctx.restore()}),w.label=2;case 2:l=0,u=0,h=i,w.label=3;case 3:return u<h.length?(m=h[u],m.style!==0&&!Ya(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,l,n.curves,2)]:[3,11]):[3,13];case 4:return w.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,l,n.curves,3)];case 6:return w.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,l,n.curves)];case 8:return w.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,l,n.curves)];case 10:w.sent(),w.label=11;case 11:l++,w.label=12;case 12:return u++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,i,o){return Yn(this,void 0,void 0,function(){var l,u,h,m,p,w,C,b,x,U,T,E,N,H,V,M,V,M;return Qn(this,function(I){return this.ctx.save(),l=zG(i,s),u=xI(i,s),o===2&&(this.path(u),this.ctx.clip()),Zr(u[0])?(h=u[0].start.x,m=u[0].start.y):(h=u[0].x,m=u[0].y),Zr(u[1])?(p=u[1].end.x,w=u[1].end.y):(p=u[1].x,w=u[1].y),s===0||s===2?C=Math.abs(h-p):C=Math.abs(m-w),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(u.slice(0,2)),b=r<3?r*3:r*2,x=r<3?r*2:r,o===3&&(b=r,x=r),U=!0,C<=b*2?U=!1:C<=b*2+x?(T=C/(2*b+x),b*=T,x*=T):(E=Math.floor((C+x)/(b+x)),N=(C-E*b)/(E-1),H=(C-(E+1)*b)/E,x=H<=0||Math.abs(x-N)<Math.abs(x-H)?N:H),U&&(o===3?this.ctx.setLineDash([0,b+x]):this.ctx.setLineDash([b,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=yn(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Zr(u[0])&&(V=u[3],M=u[0],this.ctx.beginPath(),this.formatPath([new ye(V.end.x,V.end.y),new ye(M.start.x,M.start.y)]),this.ctx.stroke()),Zr(u[1])&&(V=u[1],M=u[2],this.ctx.beginPath(),this.formatPath([new ye(V.end.x,V.end.y),new ye(M.start.x,M.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Yn(this,void 0,void 0,function(){var r;return Qn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=yn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=HG(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(oF),e7=function(t){return t instanceof KU||t instanceof VU?!0:t instanceof N_&&t.type!==ag&&t.type!==ig},t7=function(t,e){switch(t){case 0:return lg(e);case 2:return RG(e);case 1:default:return cg(e)}},n7=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},r7=["-apple-system","system-ui"],s7=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return r7.indexOf(e)===-1}):t},i7=function(t){Cs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Yn(this,void 0,void 0,function(){var r,s;return Qn(this,function(i){switch(i.label){case 0:return r=Vw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,a7(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=yn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(oF),a7=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},o7=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ef([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ef([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ef([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ef([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),A7=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new o7({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new TG(this,e)}return t.instanceCount=1,t}(),l7=function(t,e){return e===void 0&&(e={}),c7(t,e)};typeof window<"u"&&tF.setContext(window);var c7=function(t,e){return Yn(void 0,void 0,void 0,function(){var n,r,s,i,o,l,u,h,m,p,w,C,b,x,U,T,E,N,H,V,I,M,I,B,S,P,D,O,R,Z,se,Ae,me,G,oe,Y,ve,ue,fe,pe;return Qn(this,function(de){switch(de.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(B=e.allowTaint)!==null&&B!==void 0?B:!1,imageTimeout:(S=e.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:e.proxy,useCORS:(P=e.useCORS)!==null&&P!==void 0?P:!1},i=Tw({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},s),o={windowWidth:(O=e.windowWidth)!==null&&O!==void 0?O:r.innerWidth,windowHeight:(R=e.windowHeight)!==null&&R!==void 0?R:r.innerHeight,scrollX:(Z=e.scrollX)!==null&&Z!==void 0?Z:r.pageXOffset,scrollY:(se=e.scrollY)!==null&&se!==void 0?se:r.pageYOffset},l=new Vi(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),u=new A7(i,l),h=(Ae=e.foreignObjectRendering)!==null&&Ae!==void 0?Ae:!1,m={allowTaint:(me=e.allowTaint)!==null&&me!==void 0?me:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:h,copyStyles:h},u.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),p=new yI(u,t,m),w=p.clonedReferenceElement,w?[4,p.toIFrame(n,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=de.sent(),b=U_(w)||uG(w)?O6(w.ownerDocument):mp(u,w),x=b.width,U=b.height,T=b.left,E=b.top,N=u7(u,w,e.backgroundColor),H={canvas:e.canvas,backgroundColor:N,scale:(oe=(G=e.scale)!==null&&G!==void 0?G:r.devicePixelRatio)!==null&&oe!==void 0?oe:1,x:((Y=e.x)!==null&&Y!==void 0?Y:0)+T,y:((ve=e.y)!==null&&ve!==void 0?ve:0)+E,width:(ue=e.width)!==null&&ue!==void 0?ue:Math.ceil(x),height:(fe=e.height)!==null&&fe!==void 0?fe:Math.ceil(U)},h?(u.logger.debug("Document cloned, using foreign object rendering"),I=new i7(u,H),[4,I.render(w)]):[3,3];case 2:return V=de.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+T+","+E+" with size "+x+"x"+U+" using computed rendering"),u.logger.debug("Starting DOM parsing"),M=qU(u,w),N===M.styles.backgroundColor&&(M.styles.backgroundColor=Pi.TRANSPARENT),u.logger.debug("Starting renderer for element at "+H.x+","+H.y+" with size "+H.width+"x"+H.height),I=new YG(u,H),[4,I.render(M)];case 4:V=de.sent(),de.label=5;case 5:return(!((pe=e.removeContainer)!==null&&pe!==void 0)||pe)&&(yI.destroy(C)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,V]}})})},u7=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?Vu(t,getComputedStyle(r.documentElement).backgroundColor):Pi.TRANSPARENT,i=r.body?Vu(t,getComputedStyle(r.body).backgroundColor):Pi.TRANSPARENT,o=typeof n=="string"?Vu(t,n):n===null?Pi.TRANSPARENT:4294967295;return e===r.documentElement?Ya(s)?Ya(i)?o:i:s:o};const d7={BRONZE:{gradient:"from-amber-600 via-amber-500 to-orange-600",accent:"bg-amber-400",icon:""},SILVER:{gradient:"from-gray-400 via-gray-300 to-slate-400",accent:"bg-gray-300",icon:""},GOLD:{gradient:"from-yellow-400 via-amber-400 to-yellow-500",accent:"bg-yellow-300",icon:""},PLATINUM:{gradient:"from-purple-500 via-indigo-500 to-purple-600",accent:"bg-purple-400",icon:""}};function h7({profile:t,isOpen:e,onClose:n}){const r=j.useRef(null),[s,i]=j.useState(!1),[o,l]=j.useState(!1);if(!e)return null;const u=(t==null?void 0:t.currentTier)||"BRONZE",h=d7[u],m=async()=>{var C;if(r.current){i(!0);try{const b=await l7(r.current,{scale:2,backgroundColor:null,useCORS:!0}),x=document.createElement("a");x.download=`soca-passport-${((C=t==null?void 0:t.displayName)==null?void 0:C.replace(/\s+/g,"-").toLowerCase())||"card"}.png`,x.href=b.toDataURL("image/png"),x.click()}catch(b){console.error("Error generating card:",b),alert("Could not download card. Please try again.")}finally{i(!1)}}},p=async()=>{const C={title:"My Soca Passport",text:`I'm a ${u} tier carnivalist with ${(t==null?void 0:t.totalCredits)||0} credits! Check out my Soca Passport on Carnival Planner.`,url:window.location.origin};if(navigator.share)try{await navigator.share(C)}catch(b){b.name!=="AbortError"&&console.error("Share error:",b)}else w()},w=async()=>{try{await navigator.clipboard.writeText(window.location.origin),l(!0),setTimeout(()=>l(!1),2e3)}catch(C){console.error("Copy error:",C)}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fadeIn",children:A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden",children:[A.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-20",children:A.jsx(as,{className:"w-5 h-5"})}),A.jsxs("div",{className:"p-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 text-center",children:"Your Passport Card"}),A.jsxs("div",{ref:r,className:`relative bg-gradient-to-br ${h.gradient} rounded-2xl p-6 text-white shadow-xl overflow-hidden aspect-[1.586/1]`,children:[A.jsxs("div",{className:"absolute inset-0 opacity-10",children:[A.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 border-2 border-white rounded-full -translate-x-1/2 -translate-y-1/2"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 border-2 border-white rounded-full translate-x-1/4 translate-y-1/4"}),A.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 border border-white/50 rounded-full -translate-x-1/2 -translate-y-1/2"})]}),A.jsxs("div",{className:"relative flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm text-xl",children:h.icon}),A.jsxs("div",{children:[A.jsx("p",{className:"text-[10px] font-medium text-white/70 uppercase tracking-wider",children:"Soca Passport"}),A.jsxs("p",{className:"text-sm font-bold",children:[u," TIER"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-2xl font-black",children:(t==null?void 0:t.totalCredits)||0}),A.jsx("p",{className:"text-[10px] text-white/70 uppercase",children:"Credits"})]})]}),A.jsx("div",{className:"relative mb-4",children:A.jsx("p",{className:"text-xl font-black truncate",children:(t==null?void 0:t.displayName)||"Carnival Lover"})}),A.jsxs("div",{className:"relative grid grid-cols-3 gap-2 mb-4",children:[A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(Bs,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:(t==null?void 0:t.totalEvents)||0}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Events"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(br,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.countriesVisited)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Countries"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(Ou,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.unlockedAchievements)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Badges"})]})]}),A.jsxs("div",{className:"relative flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(uc,{className:"w-3 h-3 opacity-70"}),A.jsx("span",{className:"text-[10px] font-medium opacity-70",children:"Carnival Planner"})]}),A.jsx("p",{className:"text-[10px] font-mono opacity-50",children:new Date().getFullYear()})]})]})]}),A.jsxs("div",{className:"p-6 pt-0 grid grid-cols-2 gap-3",children:[A.jsxs("button",{onClick:m,disabled:s,className:"flex items-center justify-center gap-2 py-3 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-bold transition-colors disabled:opacity-50",children:[s?A.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):A.jsx(Yd,{className:"w-5 h-5"}),"Download"]}),A.jsx("button",{onClick:p,className:"flex items-center justify-center gap-2 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-bold transition-colors",children:o?A.jsxs(A.Fragment,{children:[A.jsx(Xd,{className:"w-5 h-5 text-green-500"}),"Copied!"]}):A.jsxs(A.Fragment,{children:[A.jsx(Y2,{className:"w-5 h-5"}),"Share"]})})]}),A.jsx("p",{className:"px-6 pb-4 text-xs text-gray-400 text-center",children:"Note: For best results, download requires the html2canvas library."})]})})}const W0={BRONZE:{bg:"bg-gradient-to-r from-amber-600 to-amber-700",text:"text-amber-100",border:"border-amber-500"},SILVER:{bg:"bg-gradient-to-r from-gray-400 to-gray-500",text:"text-gray-100",border:"border-gray-400"},GOLD:{bg:"bg-gradient-to-r from-yellow-400 to-amber-500",text:"text-yellow-100",border:"border-yellow-400"},PLATINUM:{bg:"bg-gradient-to-r from-purple-500 to-indigo-600",text:"text-purple-100",border:"border-purple-400"}},f7={1:{icon:eg,color:"text-yellow-400",bg:"bg-yellow-400/20"},2:{icon:yE,color:"text-gray-300",bg:"bg-gray-400/20"},3:{icon:yE,color:"text-amber-600",bg:"bg-amber-600/20"}};function m7({user:t,onBack:e}){const[n,r]=j.useState([]),[s,i]=j.useState(!0),[o,l]=j.useState(null),[u,h]=j.useState(null);return j.useEffect(()=>{(async()=>{var p;i(!0),l(null);try{const w=ln(Pt),b=await Ot(w,"getPassportLeaderboard")({limit:50});if(r(b.data.leaderboard||[]),t){const x=(p=b.data.leaderboard)==null?void 0:p.findIndex(U=>U.userId===t.uid);x!==-1&&h(x+1)}}catch(w){console.error("Error loading leaderboard:",w),l(w.message)}finally{i(!1)}})()},[t]),s?A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] animate-pulse",children:[A.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-900/30 rounded-full mb-4",children:A.jsx(St,{className:"w-8 h-8 text-purple-500 animate-spin"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading leaderboard..."})]}):o?A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[A.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:A.jsx(Ou,{className:"w-8 h-8 text-red-500"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Unable to Load Leaderboard"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:o}),A.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Go Back"})]}):A.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:A.jsx(v_,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(Ou,{className:"w-6 h-6 text-yellow-500"}),"Leaderboard"]}),A.jsx("p",{className:"text-sm text-gray-500",children:"Top Carnival Passport Holders"})]}),u&&A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-sm text-gray-500",children:"Your Rank"}),A.jsxs("p",{className:"text-2xl font-black text-purple-500",children:["#",u]})]})]}),n.length>=3&&A.jsxs("div",{className:"flex items-end justify-center gap-2 mb-6 px-4",children:[A.jsxs("div",{className:"flex-1 max-w-[120px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-gray-200 to-gray-300 dark:from-gray-600 dark:to-gray-700 rounded-t-2xl p-3 text-center relative",children:[A.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",children:"2"}),A.jsx("div",{className:"w-12 h-12 mx-auto mb-2 mt-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden",children:n[1].profilePictureUrl?A.jsx("img",{src:n[1].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(zs,{className:"w-6 h-6 text-gray-400"})}),A.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 truncate",children:n[1].displayName}),A.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:n[1].totalCredits})]}),A.jsx("div",{className:"h-16 bg-gray-300 dark:bg-gray-600 rounded-b-lg"})]}),A.jsxs("div",{className:"flex-1 max-w-[140px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-yellow-300 to-amber-400 dark:from-yellow-500 dark:to-amber-600 rounded-t-2xl p-4 text-center relative shadow-lg",children:[A.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:A.jsx(eg,{className:"w-8 h-8 text-yellow-500 drop-shadow-lg"})}),A.jsx("div",{className:"w-14 h-14 mx-auto mb-2 mt-4 rounded-full bg-white/80 dark:bg-gray-800 flex items-center justify-center overflow-hidden ring-4 ring-yellow-400/50",children:n[0].profilePictureUrl?A.jsx("img",{src:n[0].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(zs,{className:"w-7 h-7 text-gray-400"})}),A.jsx("p",{className:"text-sm font-bold text-amber-900 dark:text-white truncate",children:n[0].displayName}),A.jsx("p",{className:"text-xl font-black text-amber-800 dark:text-yellow-100",children:n[0].totalCredits}),A.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${W0[n[0].currentTier||"BRONZE"].bg} ${W0[n[0].currentTier||"BRONZE"].text}`,children:n[0].currentTier})]}),A.jsx("div",{className:"h-24 bg-yellow-400 dark:bg-yellow-600 rounded-b-lg"})]}),A.jsxs("div",{className:"flex-1 max-w-[120px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-amber-200 to-amber-300 dark:from-amber-700 dark:to-amber-800 rounded-t-2xl p-3 text-center relative",children:[A.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",children:"3"}),A.jsx("div",{className:"w-12 h-12 mx-auto mb-2 mt-4 rounded-full bg-amber-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden",children:n[2].profilePictureUrl?A.jsx("img",{src:n[2].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(zs,{className:"w-6 h-6 text-gray-400"})}),A.jsx("p",{className:"text-xs font-medium text-amber-800 dark:text-amber-100 truncate",children:n[2].displayName}),A.jsx("p",{className:"text-lg font-bold text-amber-900 dark:text-white",children:n[2].totalCredits})]}),A.jsx("div",{className:"h-10 bg-amber-400 dark:bg-amber-700 rounded-b-lg"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[A.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-2",children:[A.jsx(rU,{className:"w-5 h-5 text-purple-500"}),A.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:"All Rankings"}),A.jsxs("span",{className:"text-sm text-gray-400",children:["(",n.length," users)"]})]}),A.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:n.map((m,p)=>{const w=p+1,C=t&&m.userId===t.uid,b=f7[w],x=W0[m.currentTier||"BRONZE"];return A.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${C?"bg-purple-50 dark:bg-purple-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[A.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold ${b?`${b.bg} ${b.color}`:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:b?A.jsx(b.icon,{className:"w-5 h-5"}):A.jsx("span",{className:"text-sm",children:w})}),A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:m.profilePictureUrl?A.jsx("img",{src:m.profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(zs,{className:"w-5 h-5 text-gray-400"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs("p",{className:`font-medium truncate ${C?"text-purple-600 dark:text-purple-400":"text-gray-800 dark:text-white"}`,children:[m.displayName,C&&A.jsx("span",{className:"ml-1 text-xs",children:"(You)"})]}),A.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${x.bg} ${x.text}`,children:m.currentTier})]}),A.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(tg,{className:"w-3 h-3"}),m.totalEvents," events"]}),A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(w_,{className:"w-3 h-3"}),m.achievementCount," badges"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m.totalCredits.toLocaleString()}),A.jsx("p",{className:"text-xs text-gray-400",children:"credits"})]})]},m.userId)})}),n.length===0&&A.jsxs("div",{className:"p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:A.jsx(Ou,{className:"w-8 h-8 text-gray-400"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No rankings yet"}),A.jsx("p",{className:"text-sm text-gray-400",children:"Be the first to check in and earn credits!"})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-5 text-white text-center",children:[A.jsx(K3,{className:"w-8 h-8 mx-auto mb-2"}),A.jsx("h3",{className:"font-bold text-lg",children:"Keep the vibes going!"}),A.jsx("p",{className:"text-white/80 text-sm",children:"Check in to more events to climb the leaderboard"})]})]})}function g7({user:t,profile:e,onBack:n}){const[r,s]=j.useState([]),[i,o]=j.useState(!0),[l,u]=j.useState(null),[h,m]=j.useState(null),[p,w]=j.useState(null);j.useEffect(()=>{C()},[]);const C=async()=>{o(!0);try{const x=ln(Pt),T=await Ot(x,"getAvailableRewards")();s(T.data.rewards)}catch(x){console.error("Failed to load rewards:",x),x.message.includes("internal")||x.message.includes("offline")?s([{id:"1",title:"Free Drink",cost:500,description:"Redeem for a rum punch",promoterId:"demo"},{id:"2",title:"VIP Upgrade",cost:1e3,description:"Skip the line access",promoterId:"demo"},{id:"3",title:"Band Discount",cost:2e3,description:"10% off costume",promoterId:"demo"}]):u("Failed to load rewards. Please try again.")}finally{o(!1)}},b=async x=>{if(!(e.totalCredits<x.cost)){m(x.id),u(null);try{const U=ln(Pt),E=await Ot(U,"redeemPromoterReward")({rewardId:x.id});w({title:x.title,code:E.data.redemptionCode}),C()}catch(U){console.error("Redemption failed:",U),U.message.includes("internal")||U.message.includes("offline")?w({title:x.title,code:"MOCK-"+Math.random().toString(36).substr(2,6).toUpperCase()}):u(U.message)}finally{m(null)}}};return p?A.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-in fade-in zoom-in duration-300",children:[A.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:A.jsx(R3,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),A.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Reward Redeemed!"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["You currently have access to ",A.jsx("strong",{children:p.title})]}),A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-xl mb-6 w-full max-w-sm",children:[A.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Redemption Code"}),A.jsx("p",{className:"text-3xl font-mono font-bold text-teal-600 dark:text-teal-400 tracking-widest",children:p.code})]}),A.jsxs("div",{className:"flex gap-3 w-full max-w-sm",children:[A.jsx("button",{onClick:()=>{w(null),n()},className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors",children:"Close"}),A.jsx("button",{onClick:()=>w(null),className:"flex-1 px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-medium transition-colors",children:"Redeem Another"})]})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[A.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:""}),A.jsx("h3",{className:"text-lg font-bold",children:"Rewards Market"}),A.jsx("div",{className:"ml-auto bg-teal-50 dark:bg-teal-900/20 px-3 py-1 rounded-full",children:A.jsxs("span",{className:"text-sm font-medium text-teal-700 dark:text-teal-300",children:[(e==null?void 0:e.totalCredits)||0," Credits"]})})]}),l&&A.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm flex items-center gap-2",children:[A.jsx(cp,{className:"w-4 h-4"}),l]}),i?A.jsx("div",{className:"flex justify-center p-12",children:A.jsx(St,{className:"w-8 h-8 text-teal-600 animate-spin"})}):r.length===0?A.jsxs("div",{className:"text-center py-12 text-gray-500",children:[A.jsx(Ml,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),A.jsx("p",{children:"No rewards available right now."})]}):A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.map(x=>{const U=((e==null?void 0:e.totalCredits)||0)>=x.cost;return A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsx("h4",{className:"font-bold text-lg",children:x.title}),A.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-medium",children:[x.cost," pts"]})]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex-1",children:x.description}),A.jsx("button",{onClick:()=>b(x),disabled:!U||h===x.id,className:`w-full py-2 rounded-lg font-medium transition-colors flex items-center justify-center gap-2
                                        ${U?"bg-teal-600 hover:bg-teal-700 text-white shadow-sm hover:shadow":"bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}
                                    `,children:h===x.id?A.jsx(St,{className:"w-4 h-4 animate-spin"}):A.jsxs(A.Fragment,{children:[A.jsx(Bs,{className:"w-4 h-4"}),U?"Redeem Reward":"Insufficient Credits"]})})]},x.id)})})]})}function p7({user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s}){const[i,o]=j.useState("home"),[l,u]=j.useState(!1),[h,m]=j.useState(!1),[p,w]=j.useState(null),[C,b]=j.useState(0);j.useEffect(()=>{if(!t)return;if(s){w({totalCredits:1250,currentTier:"GOLD",tierProgress:{nextTier:"PLATINUM",creditsToNextTier:750,progressPercent:62},totalEvents:8,countriesVisited:["TT","BB"],unlockedAchievements:["first-checkin","island-hopper"],achievementPoints:150,achievementDefinitions:{}});return}(async()=>{try{const E=ln(Pt),H=await Ot(E,"getPassportProfile")();w(H.data)}catch(E){console.error("Error loading passport profile:",E)}})()},[t,C,s]);const x=T=>{u(!1),b(E=>E+1)},U=()=>{switch(i){case"stamps":return A.jsx(j6,{user:t,onBack:()=>o("home")});case"achievements":return A.jsx(M6,{profile:p,onBack:()=>o("home")});case"leaderboard":return A.jsx(m7,{user:t,onBack:()=>o("home")});case"rewards":return A.jsx(g7,{user:t,profile:p,onBack:()=>o("home")});default:return A.jsx(R6,{user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s,onOpenCheckin:()=>u(!0),onViewStamps:()=>o("stamps"),onViewAchievements:()=>o("achievements"),onViewLeaderboard:()=>o("leaderboard"),onViewRewards:()=>o("rewards")},C)}};return A.jsxs("div",{className:"min-h-[500px]",children:[i==="home"&&A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2.5 bg-teal-100 dark:bg-teal-900/30 rounded-xl",children:A.jsx(up,{className:"w-6 h-6 text-teal-600 dark:text-teal-400"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Soca Passport"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Your carnival journey"})]})]}),A.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-medium transition-colors",children:[A.jsx(Y2,{className:"w-4 h-4"}),"Share"]})]}),U(),A.jsx(L6,{isOpen:l,onClose:()=>u(!1),onSuccess:x}),A.jsx(h7,{profile:p,isOpen:h,onClose:()=>m(!1)})]})}function BI({user:t,activeCarnivalId:e,carnivalData:n,scrapedEvents:r=[],squadMembers:s=[],budgetTotal:i=0,budgetSpent:o=0,isPremium:l,onAction:u}){var C;const h=j.useMemo(()=>{if(e){const T={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[e]||e.replace(/-/g," ");return n.find(N=>N.name.toLowerCase().includes(T.toLowerCase())||T.toLowerCase().includes(N.name.split("(")[0].trim().toLowerCase()))||n[0]}const b=new Date,x=[...n].sort((U,T)=>new Date(U.date)-new Date(T.date));return x.find(U=>new Date(U.date)>=b)||x[0]},[e,n]),[m,p]=j.useState({days:0,hours:0});j.useEffect(()=>{if(!h)return;const b=()=>{const E=new Date(h.date+"T00:00:00")-new Date;if(E>0){const N=Math.ceil(E/864e5),H=Math.floor(E/(1e3*60*60)%24);p({days:N,hours:H})}else p({days:0,hours:0})};b();const x=setInterval(b,6e4);return()=>clearInterval(x)},[h]);const w=j.useMemo(()=>r.length>0?r.slice(0,5):null,[r]);return A.jsxs("div",{className:"space-y-6 mb-8 animate-fadeIn",children:[A.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 shadow-2xl text-white",children:[A.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-pink-500/20 rounded-full blur-3xl -ml-10 -mb-10 animate-pulse"}),A.jsxs("div",{className:"relative z-10 p-6 sm:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"px-2 py-1 rounded-full bg-white/20 backdrop-blur-sm text-[10px] font-bold uppercase tracking-widest border border-white/10",children:e?"CURRENT MISSION":"UP NEXT"}),l&&A.jsxs("span",{className:"flex items-center px-2 py-1 rounded-full bg-yellow-400/20 text-yellow-300 text-[10px] font-bold uppercase tracking-widest",children:[A.jsx(Ed,{className:"w-3 h-3 mr-1"})," Premium"]})]}),A.jsx("h2",{className:"text-3xl sm:text-4xl font-black tracking-tight leading-none mb-1",children:((C=h==null?void 0:h.name)==null?void 0:C.split("(")[0].trim())||"Carnival"}),A.jsx("p",{className:"text-white/80 text-sm font-medium",children:"Get ready for the road."})]}),A.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:m.days}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Days"})]}),A.jsx("div",{className:"h-8 w-px bg-white/20"}),A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:m.hours}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Hrs"})]})]})]}),w&&A.jsxs("div",{className:"mt-8 flex items-center gap-3 bg-black/20 rounded-xl p-2.5 backdrop-blur-sm overflow-hidden",children:[A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 px-2 py-0.5 bg-red-500 rounded text-[10px] font-bold uppercase animate-pulse",children:[A.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Live"]}),A.jsx("div",{className:"flex-1 overflow-hidden whitespace-nowrap",children:A.jsx("div",{className:"inline-block animate-marquee text-xs font-medium",children:w.map((b,x)=>A.jsxs("span",{className:"mr-8",children:[" ",A.jsx("span",{className:"font-bold text-pink-200",children:b.title}),b.venue&&A.jsxs("span",{className:"opacity-75",children:[" @ ",b.venue]}),b.price&&A.jsxs("span",{className:"text-green-300 ml-1",children:["($",b.price,")"]})]},b.id||x))})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[A.jsxs("div",{onClick:()=>u("Budget"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:A.jsx(dp,{className:"w-5 h-5"})}),A.jsx(Zf,{className:"w-4 h-4 text-gray-300 group-hover:text-blue-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Budget Spent"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:["$",o.toLocaleString(),A.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["/ $",i.toLocaleString()]})]}),i>0&&A.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full mt-2",children:A.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.min(o/i*100,100)}%`}})})]}),A.jsxs("div",{onClick:()=>u("Squad"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg text-green-600 dark:text-green-400",children:A.jsx(tr,{className:"w-5 h-5"})}),A.jsx(Zf,{className:"w-4 h-4 text-gray-300 group-hover:text-green-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Squad Online"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:[s.length+1,A.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"members"})]}),A.jsx("div",{className:"flex -space-x-2 mt-2",children:[...Array(Math.min(s.length+1,4))].map((b,x)=>A.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 border-2 border-white dark:border-gray-800"},x))})]}),A.jsxs("div",{onClick:()=>u("Map"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600 dark:text-purple-400",children:A.jsx(br,{className:"w-5 h-5"})}),A.jsx(Zf,{className:"w-4 h-4 text-gray-300 group-hover:text-purple-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Live Events"}),A.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:r.length||"30+"}),A.jsx("p",{className:"text-[10px] text-purple-500 font-bold mt-1",children:" View Map"})]}),A.jsxs("div",{onClick:()=>u("Passport"),className:"bg-gradient-to-br from-teal-500 to-emerald-600 p-4 rounded-2xl shadow-sm shadow-teal-500/20 cursor-pointer hover:shadow-md hover:scale-[1.02] transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-lg text-white",children:A.jsx(Bs,{className:"w-5 h-5"})}),A.jsx(x_,{className:"w-4 h-4 text-white/70 group-hover:text-white transition-colors"})]}),A.jsx("p",{className:"text-xs text-teal-100 font-medium",children:"Identity"}),A.jsx("p",{className:"text-lg font-bold text-white mt-0.5",children:"Passport"}),A.jsx("p",{className:"text-[10px] text-white/80 font-bold mt-1",children:"Launch App"})]})]})]})}function y7({onClose:t}){const e=[{icon:xA,title:"Plan Your Schedule",desc:"Add fetes, mas, and events to your itinerary"},{icon:dp,title:"Track Your Budget",desc:"Keep tabs on costume costs, accommodations, and more"},{icon:tr,title:"Squad Up",desc:"Create or join a squad to share plans with friends"},{icon:br,title:"Map Your Adventure",desc:"Pin venues and see event locations (Premium)"},{icon:cc,title:"Share Memories",desc:"Upload photos to your private media vault (Premium)"},{icon:_A,title:"Vibes Player",desc:"Stream soca playlists while you plan"}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 p-6 rounded-t-2xl text-white text-center",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:A.jsx(as,{className:"w-6 h-6"})}),A.jsx("h2",{className:"text-2xl font-black mb-1",children:"Welcome to Carnival Planner! "}),A.jsx("p",{className:"text-white/90 text-sm",children:"Your all-in-one Caribbean carnival companion"})]}),A.jsxs("div",{className:"p-6 space-y-4",children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm text-center mb-4",children:"Here's what you can do:"}),A.jsx("div",{className:"grid gap-3",children:e.map((n,r)=>A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[A.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg text-white flex-shrink-0",children:A.jsx(n.icon,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-sm",children:n.title}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:n.desc})]})]},r))})]}),A.jsxs("div",{className:"p-6 pt-0",children:[A.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-bold rounded-xl hover:opacity-90 transition-opacity shadow-lg shadow-purple-500/30",children:"Let's Go! "}),A.jsx("p",{className:"text-center text-xs text-gray-400 mt-3",children:'Tap "Help" in the footer anytime for guidance'})]})]})})}function w7({onClose:t}){const e=[{title:"Getting Started",items:[{icon:"",text:"Select your carnival from the dropdown at the top"},{icon:"",text:"Use the tabs to add budget items, schedule events, and more"},{icon:"",text:"Everything saves automatically to your account"}]},{title:"Free Features",items:[{icon:xA,text:"Schedule  Add fetes, mas bands, and events"},{icon:dp,text:"Budget  Track all your carnival expenses"},{icon:tr,text:"Squad  Create/join a group and chat with friends"},{icon:q2,text:'Voice Add  Say "Add Tribe Friday 3pm" to quick-add events'},{icon:_A,text:"Vibes Player  Stream soca playlists while planning"}]},{title:"Premium Features",items:[{icon:br,text:"Map  Pin venues and view event locations"},{icon:cc,text:"Media Vault  Store and share carnival photos"},{icon:"",text:"Live Events  Daily-updated fete listings from ticket sites"},{icon:"",text:"Road Mode  Offline mesh chat via Bitchat"}]},{title:"Squad Mode",items:[{icon:"",text:"Create a squad to get a 6-digit share code"},{icon:"",text:"Friends join with your code to sync plans"},{icon:"",text:"Chat with your squad and the AI Carnival Concierge"},{icon:"",text:"Leaders can remove members if needed"}]}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800 p-4 flex items-center justify-between rounded-t-2xl",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(G3,{className:"w-6 h-6 text-purple-500"}),A.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"How to Use Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(as,{className:"w-5 h-5"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[e.map((n,r)=>A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-purple-600 dark:text-purple-400 text-sm uppercase tracking-wider mb-3",children:n.title}),A.jsx("div",{className:"space-y-2",children:n.items.map((s,i)=>A.jsxs("div",{className:"flex items-start gap-3 p-2",children:[A.jsx("span",{className:"text-lg flex-shrink-0",children:typeof s.icon=="string"?s.icon:A.jsx(s.icon,{className:"w-5 h-5 text-gray-500"})}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:s.text})]},i))})]},r)),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:[A.jsx("h3",{className:"font-bold text-purple-800 dark:text-purple-300 mb-2",children:" Pro Tips"}),A.jsxs("ul",{className:"text-sm text-purple-700 dark:text-purple-400 space-y-1",children:[A.jsx("li",{children:" Use Demo Mode to try all features without signing up"}),A.jsx("li",{children:" Export your itinerary from the Info tab as a backup"}),A.jsx("li",{children:" The AI Concierge in Squad Chat can answer carnival questions"})]})]})]}),A.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 p-4 rounded-b-2xl",children:A.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Got it!"})})]})})}const bI={trinidad:"",jamaica:"",barbados:"",grenada:"",stlucia:"",antigua:"",bahamas:"",bermuda:"",stmaarten:"","stkitts-sugar-mas":"",nevis:"",dominica:"",vincymas:"",stthomas:"",stcroix:"",guyana:"",miami:"",atlanta:"","ny-labor-day":"",hollywood:"",tampa:"",toronto:"",nottinghill:"",japan:"","cayman-batabano":"",tobago:"",caymas:""},v7={trinidad:"Trinidad",jamaica:"Jamaica",barbados:"Crop Over",grenada:"Spicemas",stlucia:"St. Lucia",antigua:"Antigua",miami:"Miami",toronto:"Caribana",nottinghill:"Notting Hill",vincymas:"Vincy Mas",stmaarten:"St. Maarten",atlanta:"Atlanta","ny-labor-day":"NY Labor Day",bahamas:"Bahamas",bermuda:"Bermuda"};function x7({profileData:t,isOwnProfile:e,onEdit:n,currentUser:r}){const[s,i]=j.useState(!1);if(!t)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500 dark:text-gray-400",children:[A.jsx(zs,{className:"w-16 h-16 mb-4 opacity-50"}),A.jsx("p",{className:"text-lg font-medium",children:"Profile not found"}),A.jsx("p",{className:"text-sm",children:"This masquerader hasn't created a public profile yet."})]});const{displayName:o="Carnival Lover",username:l,bio:u="",profilePhoto:h,coverPhoto:m,isPublic:p,carnivalHistory:w=[],stats:C={},socialLinks:b={}}=t,x=[...new Set(w.map(U=>U.carnivalId))];return A.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[A.jsxs("div",{className:"relative h-48 md:h-64 rounded-t-3xl overflow-hidden bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400",children:[m&&A.jsx("img",{src:m,alt:"Cover",className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e&&A.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[A.jsxs("button",{onClick:t.onAccessPromoter,className:"bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-full text-white text-xs font-bold hover:bg-white/30 transition-colors flex items-center gap-1.5",children:[A.jsx(Bs,{className:"w-3.5 h-3.5"}),t.isPromoter?"Promoter Dashboard":"Become a Promoter"]}),A.jsx("button",{onClick:n,className:"p-2 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/30 transition-colors",children:A.jsx(Z2,{className:"w-5 h-5 text-white"})})]}),A.jsx("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:p?A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-green-500/20 backdrop-blur-md rounded-full text-green-200 text-xs font-medium",children:[A.jsx(B_,{className:"w-3.5 h-3.5"})," Public"]}):A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-gray-500/20 backdrop-blur-md rounded-full text-gray-200 text-xs font-medium",children:[A.jsx(eh,{className:"w-3.5 h-3.5"})," Private"]})})]}),A.jsxs("div",{className:"relative px-6 pb-6 bg-white dark:bg-gray-800 rounded-b-3xl shadow-lg",children:[A.jsx("div",{className:"absolute -top-16 left-6",children:A.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:h?A.jsx("img",{src:h,alt:o,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(zs,{className:"w-12 h-12 text-white"})})})}),A.jsxs("div",{className:"pt-20 md:pt-6 md:ml-40",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:o}),l&&A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",l]})]}),A.jsxs("div",{className:"flex gap-3",children:[b.instagram&&A.jsx("a",{href:`https://instagram.com/${b.instagram}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-full text-pink-600 dark:text-pink-400 hover:scale-110 transition-transform",children:A.jsx(z2,{className:"w-5 h-5"})}),b.twitter&&A.jsx("a",{href:`https://twitter.com/${b.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full text-blue-500 dark:text-blue-400 hover:scale-110 transition-transform",children:A.jsx(sU,{className:"w-5 h-5"})}),b.tiktok&&A.jsx("a",{href:`https://tiktok.com/@${b.tiktok}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-full text-gray-700 dark:text-gray-300 hover:scale-110 transition-transform",children:A.jsx(_A,{className:"w-5 h-5"})})]})]}),u&&A.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300 max-w-2xl",children:u})]}),A.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl",children:[A.jsx($2,{className:"w-6 h-6 mx-auto mb-2 text-purple-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carnivals"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl",children:[A.jsx(Y3,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Countries"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-2xl",children:[A.jsx(tr,{className:"w-6 h-6 mx-auto mb-2 text-orange-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[...new Set(w.map(U=>U.band).filter(Boolean))].length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Bands"})]})]})]}),w.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(xA,{className:"w-5 h-5 text-purple-500"}),"Carnival History"]}),A.jsx("div",{className:"grid gap-3",children:w.sort((U,T)=>(T.year||0)-(U.year||0)).map((U,T)=>A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[A.jsx("div",{className:"text-3xl",children:bI[U.carnivalId]||""}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[v7[U.carnivalId]||U.carnivalId,U.year&&A.jsx("span",{className:"text-gray-400 font-normal ml-2",children:U.year})]}),U.band&&A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[U.band,U.section&&A.jsxs("span",{className:"ml-1",children:[" ",U.section]})]})]})]},T))})]}),x.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(br,{className:"w-5 h-5 text-pink-500"}),"Countries Visited"]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:[...new Set(x.map(U=>bI[U]||""))].map((U,T)=>A.jsx("span",{className:"text-4xl hover:scale-125 transition-transform cursor-default",children:U},T))})]})]})}function _7({user:t,currentProfile:e,onSave:n,onClose:r,carnivals:s}){const[i,o]=j.useState(!1),[l,u]=j.useState(!1),[h,m]=j.useState(""),[p,w]=j.useState(""),[C,b]=j.useState(!1),[x,U]=j.useState({displayName:"",username:"",bio:"",isPublic:!1,socialLinks:{instagram:"",twitter:"",tiktok:""}}),[T,E]=j.useState(null),[N,H]=j.useState(null),[V,M]=j.useState(""),[I,B]=j.useState("");j.useEffect(()=>{var Z,se,Ae;e?(U({displayName:e.displayName||(t==null?void 0:t.displayName)||"",username:e.username||"",bio:e.bio||"",isPublic:e.isPublic||!1,socialLinks:{instagram:((Z=e.socialLinks)==null?void 0:Z.instagram)||"",twitter:((se=e.socialLinks)==null?void 0:se.twitter)||"",tiktok:((Ae=e.socialLinks)==null?void 0:Ae.tiktok)||""}}),M(e.profilePhoto||""),B(e.coverPhoto||"")):U(me=>({...me,displayName:(t==null?void 0:t.displayName)||""}))},[e,t]);const S=async Z=>{if(!Z)return w(""),!0;if(!/^[a-z0-9_]{3,20}$/.test(Z))return w("3-20 chars, lowercase letters, numbers, underscores only"),!1;if((e==null?void 0:e.username)===Z)return w(""),!0;b(!0);try{return(await ws(ze(ke,"usernames",Z))).exists()?(w("This username is taken"),b(!1),!1):(w(""),b(!1),!0)}catch(Ae){return console.error("Error checking username:",Ae),b(!1),!0}},P=Z=>{const se=Z.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");U(me=>({...me,username:se}));const Ae=setTimeout(()=>S(se),500);return()=>clearTimeout(Ae)},D=(Z,se)=>{var G;const Ae=(G=Z.target.files)==null?void 0:G[0];if(!Ae)return;if(Ae.size>5*1024*1024){m("Image must be under 5MB");return}const me=new FileReader;me.onload=()=>{se==="profile"?(E(Ae),M(me.result)):(H(Ae),B(me.result))},me.readAsDataURL(Ae)},O=()=>{if(!s)return[];const Z=[];return Object.entries(s).forEach(([se,Ae])=>{var me;(me=Ae.costume)!=null&&me.band&&Z.push({carnivalId:se,year:new Date().getFullYear(),band:Ae.costume.band,section:Ae.costume.section||null})}),Z},R=async()=>{if(t&&!(x.username&&!await S(x.username))){u(!0),m("");try{let Z=(e==null?void 0:e.profilePhoto)||"",se=(e==null?void 0:e.coverPhoto)||"";if(T){const Y=ao(oo,`profiles/${t.uid}/avatar_${Date.now()}`);await Ac(Y,T),Z=await lc(Y)}if(N){const Y=ao(oo,`profiles/${t.uid}/cover_${Date.now()}`);await Ac(Y,N),se=await lc(Y)}const Ae=e==null?void 0:e.username,me=x.username;Ae&&Ae!==me&&await $d(ze(ke,"usernames",Ae)),me&&me!==Ae&&await nr(ze(ke,"usernames",me),{userId:t.uid,claimedAt:Ve.now()});const G=O(),oe={userId:t.uid,displayName:x.displayName||t.displayName||"Carnival Lover",username:x.username||null,bio:x.bio||"",profilePhoto:Z,coverPhoto:se,isPublic:x.isPublic,socialLinks:x.socialLinks,carnivalHistory:G,stats:{carnivalsAttended:G.length,countriesVisited:[...new Set(G.map(Y=>Y.carnivalId))].length,bandsPlayedWith:[...new Set(G.map(Y=>Y.band).filter(Boolean))]},updatedAt:Ve.now(),...e?{}:{createdAt:Ve.now()}};await nr(ze(ke,"userProfiles",t.uid),oe,{merge:!0}),n==null||n(oe),r==null||r()}catch(Z){console.error("Error saving profile:",Z),m(Z.message||"Failed to save profile")}finally{u(!1)}}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700",children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Profile"}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:A.jsx(as,{className:"w-5 h-5 text-gray-500"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"h-32 rounded-2xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:I&&A.jsx("img",{src:I,alt:"Cover",className:"w-full h-full object-cover"})}),A.jsxs("label",{className:"absolute bottom-2 right-2 p-2 bg-white/90 dark:bg-gray-800/90 rounded-full cursor-pointer hover:scale-110 transition-transform shadow-lg",children:[A.jsx(cc,{className:"w-4 h-4 text-gray-700 dark:text-gray-300"}),A.jsx("input",{type:"file",accept:"image/*",onChange:Z=>D(Z,"cover"),className:"hidden"})]})]}),A.jsx("div",{className:"flex justify-center -mt-16 relative z-10",children:A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:V?A.jsx("img",{src:V,alt:"Profile",className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(zs,{className:"w-10 h-10 text-white"})})}),A.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-purple-500 rounded-full cursor-pointer hover:bg-purple-600 transition-colors shadow-lg",children:[A.jsx(cc,{className:"w-4 h-4 text-white"}),A.jsx("input",{type:"file",accept:"image/*",onChange:Z=>D(Z,"profile"),className:"hidden"})]})]})}),h&&A.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-sm",children:[A.jsx(cp,{className:"w-4 h-4 flex-shrink-0"}),h]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:x.displayName,onChange:Z=>U(se=>({...se,displayName:Z.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Your carnival name",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),A.jsx("input",{type:"text",value:x.username,onChange:P,className:`w-full pl-8 pr-10 py-3 rounded-xl border ${p?"border-red-300 dark:border-red-500":"border-gray-200 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all`,placeholder:"your_username",maxLength:20}),C&&A.jsx(St,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 animate-spin"})]}),p&&A.jsx("p",{className:"mt-1 text-xs text-red-500",children:p}),A.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Your public profile URL: carnivalplanner.app/profile/",x.username||"username"]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),A.jsx("textarea",{value:x.bio,onChange:Z=>U(se=>({...se,bio:Z.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-none",placeholder:"Tell the fete world about your carnival journey... ",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 text-right",children:[x.bio.length,"/200"]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Social Links"}),A.jsxs("div",{className:"relative",children:[A.jsx(z2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-pink-500"}),A.jsx("input",{type:"text",value:x.socialLinks.instagram,onChange:Z=>U(se=>({...se,socialLinks:{...se.socialLinks,instagram:Z.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Instagram username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(sU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-400"}),A.jsx("input",{type:"text",value:x.socialLinks.twitter,onChange:Z=>U(se=>({...se,socialLinks:{...se.socialLinks,twitter:Z.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Twitter/X username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(_A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-600"}),A.jsx("input",{type:"text",value:x.socialLinks.tiktok,onChange:Z=>U(se=>({...se,socialLinks:{...se.socialLinks,tiktok:Z.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"TikTok username"})]})]}),A.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[x.isPublic?A.jsx(B_,{className:"w-5 h-5 text-green-500"}):A.jsx(eh,{className:"w-5 h-5 text-gray-400"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Public Profile"}),A.jsx("p",{className:"text-xs text-gray-500",children:"Anyone can view your carnival history"})]})]}),A.jsx("button",{onClick:()=>U(Z=>({...Z,isPublic:!Z.isPublic})),className:`relative w-12 h-7 rounded-full transition-colors ${x.isPublic?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:A.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${x.isPublic?"translate-x-5":""}`})})]}),A.jsx("button",{onClick:R,disabled:l||!!p,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?A.jsxs(A.Fragment,{children:[A.jsx(St,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Xd,{className:"w-5 h-5"}),"Save Profile"]})})]})]})})}function B7({user:t,isPremium:e,onExit:n}){const[r,s]=j.useState("overview"),[i,o]=j.useState(null),[l,u]=j.useState([]),[h,m]=j.useState([]),[p,w]=j.useState(!0),[C,b]=j.useState(!1),[x,U]=j.useState({title:"",date:"",time:"",location:"",capacity:"",type:"fete",description:""}),[T,E]=j.useState(!1),[N,H]=j.useState(""),[V,M]=j.useState({title:"",cost:"",description:"",quantity:""}),[I,B]=j.useState(!1);j.useEffect(()=>{S()},[t]);const S=async()=>{w(!0);try{const O=ln(Pt),Z=await Ot(O,"getPromoterStats")();o(Z.data.stats),u(Z.data.events),b(Z.data.isPro||!1);try{const Ae=await Ot(O,"getPromoterRewards")();m(Ae.data.rewards||[])}catch(se){console.warn("Failed to fetch rewards",se),m([])}}catch(O){console.error("Failed to load promoter data:",O),o({totalCheckins:142,activeEvents:2,totalRevenue:0,todayCheckins:12}),u([{id:"evt-1",title:"Soca Sunset",date:"2026-02-14",checkins:85,capacity:200,status:"active",accessCode:"SUNSET-14"},{id:"evt-2",title:"Cooler Fete",date:"2026-02-20",checkins:57,capacity:500,status:"active",accessCode:"COOLER-20"}])}finally{w(!1)}},P=async O=>{O.preventDefault(),E(!0),H("");const R=l.filter(Z=>Z.status==="active").length;if(!C&&R>=3){H("Free limit reached (3 events). Upgrade to Pro to create more."),E(!1);return}try{const Z=ln(Pt);await Ot(Z,"createPromoterEvent")(x),s("events"),S(),U({title:"",date:"",time:"",location:"",capacity:"",type:"fete",description:""})}catch(Z){console.error("Create event error:",Z),H(Z.message||"Failed to create event")}finally{E(!1)}},D=async O=>{O.preventDefault(),B(!0);try{const R=ln(Pt);await Ot(R,"createPromoterReward")(V);const Ae=await Ot(R,"getPromoterRewards")();m(Ae.data.rewards||[]),M({title:"",cost:"",description:"",quantity:""})}catch(R){console.warn("Failed to create reward (backend may be offline), using mock:",R),m([...h,{...V,id:`mock-${Date.now()}`}]),M({title:"",cost:"",description:"",quantity:""})}finally{B(!1)}};return p?A.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:A.jsx(St,{className:"w-8 h-8 text-teal-500 animate-spin"})}):A.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-50 dark:bg-gray-900",children:[A.jsxs("div",{className:"w-full md:w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-8 px-2",children:[A.jsx("div",{className:"p-2 bg-gradient-to-br from-teal-400 to-blue-500 rounded-lg",children:A.jsx(Bs,{className:"w-6 h-6 text-white"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:"Promoter"}),A.jsx("span",{className:"text-xs text-uppercase bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-gray-500 font-medium",children:C?"PRO":"FREE"})]})]}),A.jsxs("nav",{className:"space-y-1",children:[A.jsx(iu,{active:r==="overview",label:"Overview",icon:A.jsx(G2,{className:"w-5 h-5"}),onClick:()=>s("overview")}),A.jsx(iu,{active:r==="events",label:"My Events",icon:A.jsx(xA,{className:"w-5 h-5"}),onClick:()=>s("events")}),A.jsx(iu,{active:r==="create",label:"Create Event",icon:A.jsx(Ol,{className:"w-5 h-5"}),onClick:()=>s("create")}),A.jsx(iu,{active:r==="rewards",label:"Rewards",icon:A.jsx(Ml,{className:"w-5 h-5"}),onClick:()=>s("rewards")}),A.jsx(iu,{active:r==="analytics",label:"Analytics",icon:A.jsx(P3,{className:"w-5 h-5"}),onClick:()=>s("analytics"),pro:!C})]}),!C&&A.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl text-white",children:[A.jsxs("h3",{className:"font-bold mb-1 flex items-center gap-2",children:[A.jsx(uc,{className:"w-4 h-4 text-yellow-300"}),"Go Pro"]}),A.jsx("p",{className:"text-sm opacity-90 mb-3",children:"Unlimited events & custom codes."}),A.jsx("button",{className:"w-full py-2 bg-white text-purple-600 font-bold rounded-lg text-sm hover:bg-gray-50 transition-colors",children:"Upgrade $9.99/mo"})]})]}),A.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:r}),A.jsx("button",{onClick:n,className:"text-sm text-gray-500 hover:text-gray-700",children:" Back to Profile"})]}),r==="overview"&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[A.jsx(bf,{label:"Total Check-ins",value:i==null?void 0:i.totalCheckins,icon:A.jsx(tr,{className:"text-blue-500"})}),A.jsx(bf,{label:"Active Events",value:i==null?void 0:i.activeEvents,icon:A.jsx(xA,{className:"text-teal-500"})}),A.jsx(bf,{label:"Today's Activity",value:`+${(i==null?void 0:i.todayCheckins)||0}`,icon:A.jsx(Q3,{className:"text-green-500"})}),A.jsx(bf,{label:"Revenue Est.",value:"-",icon:A.jsx(O3,{className:"text-gray-400"})})]}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Recent Events"}),A.jsx(CI,{events:l.slice(0,3)})]})]}),r==="events"&&A.jsx("div",{children:A.jsx(CI,{events:l,full:!0})}),r==="create"&&A.jsxs("div",{className:"max-w-2xl bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsx("h2",{className:"text-lg font-bold mb-4",children:"Create New Event"}),!C&&A.jsxs("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-center gap-3",children:[A.jsx(cp,{className:"w-5 h-5 text-blue-500"}),A.jsxs("div",{className:"text-sm",children:[A.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-300",children:"Free Tier Status:"}),A.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:[l.filter(O=>O.status==="active").length," / 3 active events used."]})]})]}),A.jsxs("form",{onSubmit:P,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Event Title"}),A.jsx("input",{type:"text",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. Soca Brainwash",value:x.title,onChange:O=>U({...x,title:O.target.value})})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),A.jsx("input",{type:"date",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:x.date,onChange:O=>U({...x,date:O.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time"}),A.jsx("input",{type:"time",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:x.time,onChange:O=>U({...x,time:O.target.value})})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location / Venue"}),A.jsxs("div",{className:"relative",children:[A.jsx(br,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-400"}),A.jsx("input",{type:"text",required:!0,className:"w-full pl-10 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. O2 Park",value:x.location,onChange:O=>U({...x,location:O.target.value})})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Capacity"}),A.jsx("input",{type:"number",className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. 500",value:x.capacity,onChange:O=>U({...x,capacity:O.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),A.jsxs("select",{className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:x.type,onChange:O=>U({...x,type:O.target.value}),children:[A.jsx("option",{value:"fete",children:"Fete / Party"}),A.jsx("option",{value:"jouvert",children:"J'ouvert"}),A.jsx("option",{value:"boat_ride",children:"Boat Ride"}),A.jsx("option",{value:"concert",children:"Concert"})]})]})]}),N&&A.jsx("p",{className:"text-red-500 text-sm",children:N}),A.jsxs("button",{type:"submit",disabled:T,className:"w-full py-3 bg-teal-500 text-white font-bold rounded-xl hover:bg-teal-600 transition-colors flex items-center justify-center gap-2",children:[T?A.jsx(St,{className:"animate-spin"}):A.jsx(Ol,{className:"w-5 h-5"}),"Create Event"]})]})]}),r==="rewards"&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[A.jsx(Ml,{className:"w-5 h-5 text-pink-500"})," Create Reward"]}),A.jsxs("form",{onSubmit:D,className:"grid md:grid-cols-2 gap-4 items-end",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reward Title"}),A.jsx("input",{type:"text",required:!0,className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"e.g. Free Rum & Coke",value:V.title,onChange:O=>M({...V,title:O.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cost (Credits)"}),A.jsx("input",{type:"number",required:!0,className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"e.g. 500",value:V.cost,onChange:O=>M({...V,cost:O.target.value})})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),A.jsx("input",{type:"text",className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"Details for redemption...",value:V.description,onChange:O=>M({...V,description:O.target.value})})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsxs("button",{type:"submit",disabled:I,className:"w-full py-2.5 bg-pink-500 text-white font-bold rounded-lg hover:bg-pink-600 transition-colors flex items-center justify-center gap-2",children:[I?A.jsx(St,{className:"animate-spin w-4 h-4"}):A.jsx(Ol,{className:"w-4 h-4"}),"Add Reward"]})})]})]}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Active Rewards"}),h.length===0?A.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[A.jsx(Ml,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),A.jsx("p",{className:"text-gray-500",children:"No rewards created yet."})]}):A.jsx("div",{className:"grid gap-3",children:h.map(O=>A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:O.title}),A.jsx("p",{className:"text-sm text-gray-500",children:O.description}),A.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A.jsxs("span",{className:"text-xs font-bold text-pink-600 bg-pink-50 dark:bg-pink-900/20 px-2 py-0.5 rounded-full",children:[O.cost," Credits"]}),O.quantity&&A.jsxs("span",{className:"text-xs text-gray-500",children:["Limit: ",O.quantity]})]})]}),A.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500",children:A.jsx(W2,{className:"w-5 h-5"})})]},O.id))})]})]})]})]})}function iu({active:t,label:e,icon:n,onClick:r,pro:s}){return A.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${t?"bg-teal-50 dark:bg-teal-900/20 text-teal-600 dark:text-teal-400 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[A.jsxs("div",{className:"flex items-center gap-3",children:[n,A.jsx("span",{children:e})]}),s&&A.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded uppercase font-bold",children:"PRO"})]})}function bf({label:t,value:e,icon:n}){return A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"flex justify-between items-start mb-2",children:A.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:n})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),A.jsx("p",{className:"text-xs text-gray-500",children:t})]})}function CI({events:t,full:e}){return t!=null&&t.length?A.jsx("div",{className:"grid gap-3",children:t.map(n=>A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center justify-between group",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center text-center",children:A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-bold text-purple-600 dark:text-purple-400 uppercase",children:new Date(n.date).toLocaleString("default",{month:"short"})}),A.jsx("p",{className:"text-lg font-black text-purple-800 dark:text-purple-200 leading-none",children:new Date(n.date).getDate()})]})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.title}),A.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(tr,{className:"w-3.5 h-3.5"})," ",n.checkins," checked-in"]}),A.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Active"})]})]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"hidden md:block px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-md",children:A.jsx("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-300",children:n.accessCode})}),A.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:A.jsx(W2,{className:"w-5 h-5"})})]})]},n.id))}):A.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[A.jsx(xA,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),A.jsx("p",{className:"text-gray-500",children:"No events found."})]})}function b7({user:t}){const[e,n]=j.useState("Overview"),[r,s]=j.useState(!1),[i,o]=j.useState(!0);if(j.useEffect(()=>{t&&(t.email==="djkrss1@gmail.com"&&s(!0),o(!1))},[t]),i)return A.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading Admin Dashboard..."});const l=[{id:"Overview",label:"Overview",icon:G2},{id:"Ads",label:"Ad Manager",icon:$3},{id:"Support",label:"Support",icon:C_},{id:"Settings",label:"Admins",icon:n6}];return A.jsxs("div",{className:"bg-white dark:bg-gray-900 min-h-screen rounded-3xl overflow-hidden shadow-2xl border border-gray-200 dark:border-gray-800",children:[A.jsxs("div",{className:"bg-gray-900 text-white p-4 md:p-6 border-b border-gray-800 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[A.jsx(eh,{className:"text-pink-500"}),"Admin Console"]}),A.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your entire carnival platform"})]}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 hide-scrollbar",children:l.map(u=>A.jsxs("button",{onClick:()=>n(u.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap ${e===u.id?"bg-pink-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:[A.jsx(u.icon,{className:"w-4 h-4"}),u.label]},u.id))})]}),A.jsxs("div",{className:"p-6",children:[e==="Overview"&&A.jsx(_6,{}),e==="Ads"&&A.jsx(w6,{}),e==="Support"&&A.jsx(U6,{}),e==="Settings"&&A.jsx(C7,{user:t,isSuperAdmin:r})]})]})}function C7({user:t,isSuperAdmin:e}){const[n,r]=j.useState([]),[s,i]=j.useState(""),[o,l]=j.useState(!1),[u,h]=j.useState(null),[m,p]=j.useState(!0);j.useEffect(()=>{const b=Vs(un(ke,"admins"),x=>{r(x.docs.map(U=>({id:U.id,...U.data()}))),p(!1),h(null)},x=>{console.error("AdminManagement query failed:",x),h(x.message),p(!1)});return()=>b()},[]);const w=async b=>{if(b.preventDefault(),!!s.trim()){l(!0);try{const x=un(ke,"users"),U=_c(x,rp("email","==",s)),T=await Ua(U);if(T.empty){alert("User not found! They must log in to the app at least once."),l(!1);return}const N=T.docs[0].id;await nr(ze(ke,"admins",N),{email:s,role:"admin",addedBy:t.email,addedAt:Ve.now()}),i(""),alert(`Added ${s} as admin!`)}catch(x){console.error(x),alert("Failed to add admin: "+x.message)}finally{l(!1)}}},C=async b=>{if(confirm("Remove this admin? They will lose access immediately."))try{await $d(ze(ke,"admins",b))}catch(x){console.error(x),alert("Failed to remove admin")}};return m?A.jsx("div",{className:"text-center p-8",children:A.jsx(St,{className:"animate-spin mx-auto text-pink-500"})}):u?A.jsx("div",{className:"p-8 text-center bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:A.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load admins: ",u]})}):A.jsxs("div",{className:"space-y-8 max-w-4xl",children:[A.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl border border-amber-200 dark:border-amber-800 flex gap-3 text-amber-800 dark:text-amber-200",children:[A.jsx(p_,{className:"shrink-0"}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold",children:"Access Control"}),A.jsx("p",{className:"text-sm opacity-90",children:"Admins have full access to analytics, support messages, and ad management. Only grant this to trusted team members."})]})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:"Add New Admin"}),A.jsxs("form",{onSubmit:w,className:"flex gap-4",children:[A.jsx("input",{type:"email",placeholder:"Enter user email address",value:s,onChange:b=>i(b.target.value),className:"flex-1 p-3 rounded-xl border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-pink-500",required:!0}),A.jsxs("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-xl hover:bg-pink-700 disabled:opacity-50 flex items-center gap-2",children:[o?A.jsx(St,{className:"animate-spin w-5 h-5"}):A.jsx(Ol,{className:"w-5 h-5"}),"Add Admin"]})]})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:"Current Admins"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 opacity-75",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:"D"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold dark:text-white",children:"djkrss1@gmail.com"}),A.jsx("p",{className:"text-xs text-pink-500 font-bold uppercase",children:"Super Admin"})]})]}),A.jsx("span",{className:"text-xs text-gray-400",children:"Owner"})]}),n.map(b=>{var x;return A.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center text-gray-500 dark:text-gray-300 font-bold",children:b.email[0].toUpperCase()}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold dark:text-white",children:b.email}),A.jsxs("p",{className:"text-xs text-gray-500",children:["Added by ",(x=b.addedBy)==null?void 0:x.split("@")[0]]})]})]}),A.jsx("button",{onClick:()=>C(b.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:A.jsx(Xs,{className:"w-5 h-5"})})]},b.id)})]})]})]})}function E7({onBack:t,onSuccess:e}){const[n,r]=j.useState("login"),[s,i]=j.useState(""),[o,l]=j.useState(""),[u,h]=j.useState(""),[m,p]=j.useState(!1),[w,C]=j.useState(!1),[b,x]=j.useState(""),[U,T]=j.useState(""),E=I=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I),N=I=>{switch(I){case"auth/email-already-in-use":return"This email is already registered. Try logging in instead.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password. Please check and try again.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"Something went wrong. Please try again."}},H=async I=>{if(I.preventDefault(),x(""),T(""),!E(s)){x("Please enter a valid email address.");return}if(o.length<6){x("Password must be at least 6 characters.");return}if(o!==u){x("Passwords do not match.");return}C(!0);try{const B=await jL(ja,s,o);await bk(B.user),T("Account created! Please check your email to verify your account."),e&&e(B.user)}catch(B){console.error("Sign up error:",B),x(N(B.code))}finally{C(!1)}},V=async I=>{if(I.preventDefault(),x(""),T(""),!E(s)){x("Please enter a valid email address.");return}if(!o){x("Please enter your password.");return}C(!0);try{const B=await DL(ja,s,o);e&&e(B.user)}catch(B){console.error("Login error:",B),x(N(B.code))}finally{C(!1)}},M=async()=>{if(x(""),T(""),!E(s)){x("Please enter your email address first.");return}C(!0);try{await LL(ja,s),T("Password reset email sent! Check your inbox.")}catch(I){console.error("Password reset error:",I),x(N(I.code))}finally{C(!1)}};return A.jsxs("div",{className:"w-full max-w-md mx-auto",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[A.jsx(y_,{className:"w-4 h-4"}),"Back"]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:n==="login"?"Welcome Back":"Create Account"}),b&&A.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:b}),U&&A.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300 text-sm",children:U}),A.jsxs("form",{onSubmit:n==="login"?V:H,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),A.jsxs("div",{className:"relative",children:[A.jsx(b_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:s,onChange:I=>i(I.target.value),placeholder:"your@email.com",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(Cw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:m?"text":"password",value:o,onChange:I=>l(I.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w}),A.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:m?A.jsx(H3,{className:"w-5 h-5"}):A.jsx(__,{className:"w-5 h-5"})})]})]}),n==="signup"&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(Cw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:m?"text":"password",value:u,onChange:I=>h(I.target.value),placeholder:"Confirm your password",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w})]})]}),n==="login"&&A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"button",onClick:M,className:"text-sm text-pink-400 hover:text-pink-300 transition-colors",disabled:w,children:"Forgot password?"})}),A.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-xl font-bold text-white hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:w?A.jsxs(A.Fragment,{children:[A.jsx(St,{className:"w-5 h-5 animate-spin"}),n==="login"?"Signing in...":"Creating account..."]}):n==="login"?"Sign In":"Create Account"})]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsxs("p",{className:"text-gray-400 text-sm",children:[n==="login"?"Don't have an account?":"Already have an account?",A.jsx("button",{onClick:()=>{r(n==="login"?"signup":"login"),x(""),T("")},className:"ml-2 text-pink-400 hover:text-pink-300 font-semibold transition-colors",children:n==="login"?"Sign Up":"Sign In"})]})})]})]})}function I7({user:t,onResend:e}){const[n,r]=j.useState(!1),[s,i]=j.useState(!1);if(!t||t.emailVerified||!t.email)return null;const o=async()=>{r(!0);try{await bk(t),i(!0),setTimeout(()=>i(!1),5e3)}catch(l){console.error("Error sending verification:",l)}finally{r(!1)}};return A.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 text-yellow-200 px-4 py-3 flex items-center justify-between gap-4 flex-wrap",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(b_,{className:"w-5 h-5"}),A.jsx("span",{className:"text-sm",children:"Please verify your email address to access all features."})]}),A.jsx("button",{onClick:o,disabled:n||s,className:"text-sm font-semibold bg-yellow-500/30 hover:bg-yellow-500/40 px-3 py-1 rounded-lg transition-colors disabled:opacity-50",children:s?"Email Sent!":n?"Sending...":"Resend Email"})]})}const AF=()=>Math.random().toString(36).substring(2,8).toUpperCase(),T7=async(t,e,n)=>{if(!t)throw new Error("User not authenticated");const r=AF(),s={name:e,leaderId:t.uid,leaderName:t.displayName||t.email,members:[t.uid],memberDetails:{[t.uid]:{name:t.displayName||t.email,role:"leader",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}},carnivalId:n,inviteCode:r,createdAt:Jm(),sharedItinerary:[]};console.log("Attempting to create squad doc...",s);const i=await oc(un(ke,"squads"),s);console.log("Squad doc created with ID:",i.id);const o=ze(ke,"users",t.uid);return console.log("Updating user profile for squad:",t.uid),await nr(o,{currentSquadId:i.id},{merge:!0}),console.log("User profile updated."),{id:i.id,...s}},k7=async(t,e)=>{if(console.log("joinSquadByCode started",{uid:t==null?void 0:t.uid,inviteCode:e}),!t)throw new Error("Must be logged in");const n=un(ke,"squads"),r=_c(n,rp("inviteCode","==",e.toUpperCase())),s=await Ua(r);if(s.empty)throw new Error("Invalid Squad Code");const i=s.docs[0],o=i.id,l=i.data();console.log("Squad found:",{squadId:o,squadData:l});const u=ze(ke,"squads",o),h=t.displayName||t.email||"Unknown User";console.log("Adding user to squad:",h),!l.members||!l.members.includes(t.uid)?(await pA(u,{members:WN(t.uid),[`memberDetails.${t.uid}`]:{name:h,role:"member",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}}),console.log("Squad doc updated")):console.log("User already in squad (skipping array update)");const m=ze(ke,"users",t.uid);return await nr(m,{currentSquadId:o},{merge:!0}),console.log("User profile updated with squadId:",o),{id:o,...l}},S7=async(t,e)=>{if(!t||!e)return;const n=ze(ke,"squads",e),r=ze(ke,"users",t.uid);await pA(n,{members:$N(t.uid)}),await pA(r,{currentSquadId:null})},N7=async(t,e)=>{if(!t||!e)throw new Error("Missing required parameters");const n=ze(ke,"squads",e),r=await ws(n);if(!r.exists())throw new Error("Squad not found");if(r.data().leaderId!==t)throw new Error("Only the squad leader can regenerate the invite code");const i=AF();return await pA(n,{inviteCode:i}),console.log(`New invite code generated for squad ${e}: ${i}`),i},Cf="carnival-planner-v1",U7="price_1SanHUJR9xpdRiXijLesRPVt",F7="price_1SanMhJR9xpdRiXinv2F9knM",EI={trinidad:[{title:"Soca Brainwash",note:"The main event. Bring drinks."},{title:"AM Bush",note:"J'ouvert style. Wear old clothes."},{title:"Phuket",note:"All inclusive."},{title:"Soaka Street Festival",note:"Iron park."}],stlucia:[{title:"Remedy",note:"Beachside."},{title:"Mess",note:"Paint and Powder."},{title:"Indulgence",note:"Breakfast fete."}],default:[{title:"Catamaran Cruise",note:"Boat ride."},{title:"J'ouvert",note:"Paint and powder."},{title:"Monday Mas",note:"On the road."}]};function Q7(){var mt,ca,Wn,_t,ui,Or,Er;const[t,e]=j.useState(null),[n,r]=j.useState(!1),[s,i]=j.useState({}),[o,l]=j.useState(null),[u,h]=j.useState("Budget"),[m,p]=j.useState(!1),[w,C]=j.useState(!0),[b,x]=j.useState(!1),[U,T]=j.useState(!0),[E,N]=j.useState(!1),[H,V]=j.useState(""),[M,I]=j.useState(""),[B,S]=j.useState(""),[P,D]=j.useState(""),[O,R]=j.useState(""),[Z,se]=j.useState(""),[Ae,me]=j.useState(""),[G,oe]=j.useState({band:"",section:"",total:"",paid:""}),[Y,ve]=j.useState(""),[ue,fe]=j.useState(""),[pe,de]=j.useState([]),[ae,Fe]=j.useState(null),[et,Cr]=j.useState(null),[jt,Vn]=j.useState(!1),[kn,wt]=j.useState(!1),[vt,Ze]=j.useState(""),[rn,xt]=j.useState(""),Sn=async()=>{const{DEMO_USER:Q,DEMO_CARNIVALS:q,DEMO_SQUAD:te}=await Hy(async()=>{const{DEMO_USER:we,DEMO_CARNIVALS:Le,DEMO_SQUAD:Je}=await import("./demoData-59eL2sCn.js");return{DEMO_USER:we,DEMO_CARNIVALS:Le,DEMO_SQUAD:Je}},[]);r(!0),e(Q),i(q),l("trinidad"),de(te),p(!0),C(!1),an(q.trinidad)},Wi=()=>{r(!1),e(null),i({}),l(null),de([]),p(!1),C(!0),an(null)};j.useEffect(()=>{new URLSearchParams(window.location.search).get("demo")==="true"&&Sn()},[]);const $i=async()=>{if(n){alert("This feature is simulated in Demo Mode.");return}if(t){Vn(!0),Ze("");try{const Q=await T7(t,`${t.displayName||"User"}'s Squad`,o);Fe(Q),ve(Q.inviteCode),Ar("Only Premium users can lead a squad!")}catch(Q){console.error("Error creating squad:",Q),Ze(`Failed: ${Q.message}`)}finally{Vn(!1)}}},Zi=async()=>{if(n){alert("Joining squads is simulated in Demo Mode.");return}if(!t||!ue)return;const Q=ue.trim().toUpperCase();wt(!0),Ze(""),console.log("HandleJoinSquad: Attempting to join with code:",Q);try{const q=await k7(t,Q);console.log("HandleJoinSquad: Join success. Squad result:",q),q||console.warn("HandleJoinSquad: No squad object returned, but execution did not throw. Assuming success via listener."),xt("Joined Squad!"),fe("")}catch(q){console.error("Error joining squad:",q),Ze(q.message||"Invalid code")}finally{wt(!1)}},NA=async()=>{if(n){confirm("Exit Demo Mode?")&&Wi();return}!t||!ae||confirm("Are you sure you want to leave this squad?")&&(await S7(t,ae.id),Fe(null),de([]))},Ji=async(Q,q)=>{if(n){alert("Member removal is disabled in Demo Mode.");return}if(!(!t||!ae)){if(ae.leaderId!==t.uid){alert("Only the squad leader can remove members.");return}if(confirm(`Remove ${q} from your squad?`))try{if(await Aa(t.uid,ae.id,Q),Ar(`${q} has been removed from the squad.`),confirm(`${q} was removed.

Would you like to generate a new invite code?
(This prevents them from rejoining with the old code)`)){const te=await N7(t.uid,ae.id);ve(te),Ar(`New invite code: ${te}`)}}catch(te){console.error("Error removing member:",te),alert(`Failed to remove member: ${te.message}`)}}},[ri,Ar]=j.useState(null),[Nt,Jt]=j.useState(!0),[Es,yo]=j.useState(!1),[si,wo]=j.useState(navigator.onLine);j.useEffect(()=>{const Q=()=>wo(!0),q=()=>wo(!1);return window.addEventListener("online",Q),window.addEventListener("offline",q),()=>{window.removeEventListener("online",Q),window.removeEventListener("offline",q)}},[]);const[Is,lr]=j.useState(null),[Xi,Yi]=j.useState(()=>!localStorage.getItem("carnival-planner-welcomed")),[bc,Ts]=j.useState(!1),[os,ea]=j.useState(null),[vo,As]=j.useState(!1),[ta,ii]=j.useState(!1),[Kn,ai]=j.useState([]),[na,xo]=j.useState(!1),[ks,oi]=j.useState(null),sn=[{id:"stkitts-sugar-mas",name:"St. Kitts (Sugar Mas)",monthIndex:0},{id:"stcroix",name:"St. Croix Carnival",monthIndex:0},{id:"trinidad",name:"Trinidad Carnival",monthIndex:1},{id:"dominica",name:"Dominica (Mas Domnik)",monthIndex:1},{id:"jamaica",name:"Jamaica Carnival",monthIndex:3},{id:"tampa",name:"Tampa Bay Carnival",monthIndex:3},{id:"stmaarten",name:"St. Maarten Carnival",monthIndex:3},{id:"cayman-batabano",name:"Cayman Batabano",monthIndex:4},{id:"stthomas",name:"St. Thomas Carnival",monthIndex:4},{id:"atlanta",name:"Atlanta Caribbean Carnival",monthIndex:4},{id:"guyana",name:"Guyana Independence",monthIndex:4},{id:"bahamas",name:"Bahamas Carnival",monthIndex:5},{id:"bermuda",name:"Bermuda Carnival",monthIndex:5},{id:"hollywood",name:"Hollywood Carnival",monthIndex:5},{id:"caymas",name:"Caymas Carnival",monthIndex:5},{id:"vincymas",name:"St. Vincent (Vincy Mas)",monthIndex:6},{id:"stlucia",name:"St. Lucia Carnival",monthIndex:6},{id:"toronto",name:"Toronto (Caribana)",monthIndex:7},{id:"barbados",name:"Barbados Crop Over",monthIndex:7},{id:"nevis",name:"Nevis Culturama",monthIndex:7},{id:"antigua",name:"Antigua Carnival",monthIndex:7},{id:"grenada",name:"Grenada Spicemas",monthIndex:7},{id:"ny-labor-day",name:"New York Carnival",monthIndex:8},{id:"japan",name:"Japan Caribbean",monthIndex:8},{id:"miami",name:"Miami Carnival",monthIndex:9},{id:"tobago",name:"Tobago Carnival",monthIndex:10}],_o=["bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500","bg-gradient-to-r from-green-400 to-blue-500","bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500","bg-gradient-to-r from-teal-400 to-cyan-500","bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500","bg-gradient-to-r from-purple-600 to-indigo-600"],Ss=["January","February","March","April","May","June","July","August","September","October","November","December"];j.useEffect(()=>{U?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[U]),j.useEffect(()=>{if(!t||n)return;(async()=>{try{const q=ze(ke,"users",t.uid,"preferences","theme"),te=await ws(q);if(te.exists()){const we=te.data();typeof we.darkMode=="boolean"&&T(we.darkMode)}}catch(q){console.log("Could not load theme preference:",q)}})()},[t,n]);const Ai=async Q=>{if(!(!t||n))try{const q=ze(ke,"users",t.uid,"preferences","theme");await nr(q,{darkMode:Q,updatedAt:Ve.now()},{merge:!0})}catch(q){console.log("Could not save theme preference:",q)}},cr=()=>{const Q=!U;T(Q),Ai(Q)};j.useEffect(()=>{if(n)return;const Q=HL(ja,async q=>{if(e(q),q){console.log("[Analytics] Creating/updating user doc for:",q.uid,q.email);try{const te=ze(ke,"users",q.uid);await nr(te,{lastLoginAt:Ve.now(),email:q.email||null,displayName:q.displayName||null},{merge:!0}),console.log("[Analytics] User document updated successfully"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(we=>{const{latitude:Le,longitude:Je}=we.coords;nr(te,{lastLocation:{lat:Le,lng:Je},lastLocationAt:Ve.now()},{merge:!0}).then(()=>console.log("Location saved")).catch(Me=>console.error("Loc save error",Me))},we=>{console.log("Geolocation denied/error:",we.message)})}catch(te){console.error("[Analytics] Failed to update user doc:",te.code,te.message)}}});return()=>Q()},[n]),j.useEffect(()=>{if(!t||n){Cr(null);return}const Q=Vs(ze(ke,"users",t.uid),q=>{const te=q.data(),we=(te==null?void 0:te.currentSquadId)||null;we!==et&&(console.log("App: User changed squad to:",we),Cr(we))});return()=>Q()},[t,n,et]),j.useEffect(()=>{if(!t||n)return;if(!et){console.log("App: No target squad, clearing state."),Fe(null),de([]),an(null);return}console.log("App: Subscribing to squad:",et);const Q=Vs(ze(ke,"squads",et),q=>{if(q.exists()){const te=q.data();console.log("App: Squad loaded:",q.id),Fe({id:q.id,...te}),an(te);const we=Object.values(te.memberDetails||{});de(we),ve(te.inviteCode)}else console.warn("App: Target squad does not exist/deleted:",et),Fe(null),an(null),de([]),ve("")});return()=>{console.log("App: Unsubscribing from squad:",et),Q(),ve("")}},[et,t,n]),j.useEffect(()=>{!ae&&pe.length>0&&(console.warn("App: DETECTED GHOST MEMBERS! Self-healing state."),de([]),ve(""))},[ae,pe]),j.useEffect(()=>{if(!t){n||p(!1);return}if(n){p(!0);return}const Q=["djkrss1@gmail.com","maikacooke@gmail.com"];Q.includes(t.email)&&p(!0);const q=ze(ke,"users",t.uid,"apps",Cf),te=Vs(q,we=>{if(Q.includes(t.email)){p(!0);return}if(we.exists()){const Le=we.data();p(!!Le.premiumActive)}else p(!1)});return()=>te()},[t,n]);const[Ee,zn]=j.useState(!1);j.useEffect(()=>{if(!t){zn(!1);return}(async()=>{if(n){zn(!0);return}if(t.email==="djkrss1@gmail.com"){zn(!0);return}try{const q=ze(ke,"admins",t.uid),te=await ws(q);zn(te.exists())}catch(q){console.error("Admin check failed:",q),zn(!1)}})()},[t,n]),j.useEffect(()=>{if(!t){n||(i({}),l(null));return}if(n)return;const Q=un(ke,"users",t.uid,"apps",Cf,"carnivals"),q=Vs(Q,te=>{const we={};te.forEach(Le=>{we[Le.id]=Le.data()}),i(we),!o&&te.docs.length>0&&l(te.docs[0].id)});return()=>q()},[t,n]),j.useEffect(()=>{if(!t||n){ea(null);return}(async()=>{try{const q=await ws(ze(ke,"userProfiles",t.uid));q.exists()&&ea({id:q.id,...q.data()})}catch(q){console.log("Could not load profile:",q)}})()},[t,n]),j.useEffect(()=>{n||mj(ja).catch(Q=>console.error(Q))},[n]),j.useEffect(()=>{if(!t||n)return;(async()=>{try{const te=await f3("BLbW7EjHjQ9_YjKrRbJwgBgRqnkSmZsXMnEWTQZpqYwSRbVgYLmXW5RvXA2_aS3vH9XJpCxHu4VmXnZL2wQxMvI");if(te){const we=ln(Pt);await Ot(we,"saveFcmToken")({fcmToken:te}),console.log("FCM token saved")}}catch(q){console.log("Error setting up notifications:",q)}})(),m3(q=>{var te,we;console.log("Foreground message:",q),Ar({title:((te=q.notification)==null?void 0:te.title)||"Squad Alert",body:((we=q.notification)==null?void 0:we.body)||"Someone in your squad is Road Ready!"}),setTimeout(()=>Ar(null),5e3)})},[t,n]);const UA=async()=>{const Q=new Bi;try{await Aj(ja,Q)}catch(q){console.error("Sign in error:",q)}},FA=async()=>{if(n){Wi();return}await Ck(ja),C(!0),x(!1),h("Budget"),T(!0)},Ns=async Q=>{if(n){alert("Subscriptions are disabled in Demo Mode.");return}if(!t){alert("You must be signed in to subscribe.");return}const q=Q==="yearly"?"yearly":"monthly",te=q==="yearly"?F7:U7;N(!0);try{const we=ln(Pt),Le=Ot(we,"createCheckoutSession");console.log(`Starting checkout... Interval: ${q}, PriceID: ${te}`);const Je=await Le({priceId:te,success_url:window.location.origin,cancel_url:window.location.origin}),{data:Me}=Je||{};Me&&(Me.url||Me.checkoutUrl)?window.location.href=Me.url||Me.checkoutUrl:(console.error("No checkout URL returned:",Me),alert("Unable to start checkout. Please try again."))}catch(we){console.error("Error starting checkout:",we),alert("There was a problem starting your checkout: "+we.message)}finally{N(!1)}},ra=async(Q,q)=>{if(t){if(l(Q),n){s[Q]?Q==="trinidad"&&s.trinidad?an(s.trinidad):an(null):(i(te=>({...te,[Q]:{name:q,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:new Date().toISOString()}})),an(null));return}if(!s[Q])try{const te=ze(ke,"users",t.uid,"apps",Cf,"carnivals",Q);await nr(te,{name:q,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:Ve.now()},{merge:!0})}catch(te){console.error(te)}}},Gn=(mt=s[o])==null?void 0:mt.sharedPlanId,ct=!!Gn,[zt,an]=j.useState(null),[Bo,sa]=j.useState(!1),ia=async()=>{if(!n){if(!Gn||!t){an(null);return}sa(!0);try{const Q=ln(Pt),te=await Ot(Q,"getSharedCarnivalData")({planId:Gn,uid:t.uid});an(te.data)}catch(Q){console.log("Could not load shared carnival data:",Q.message),an(null)}finally{sa(!1)}}};j.useEffect(()=>{Gn&&!n?ia():n||an(null)},[Gn,t,n]);const it=async(Q,q,te="set")=>{var Le;if(!t||!o)return;if(n){const Je=Me=>{let mn=q;return te==="add"&&Array.isArray(Me[Q])?mn=[...Me[Q]||[],...q]:te==="remove"&&Array.isArray(Me[Q])?mn=(Me[Q]||[]).filter(on=>on.id!==q.id):te==="update"&&Array.isArray(Me[Q])&&q.id!==void 0&&(mn=(Me[Q]||[]).map(on=>on.id===q.id?{...on,...q}:on)),te==="set"&&(mn=q),{...Me,[Q]:mn}};ct?(an(Me=>Je(Me)),i(Me=>({...Me,[o]:Je(Me[o])}))):i(Me=>({...Me,[o]:Je(Me[o])}));return}if(Gn&&["budget","schedule","packing","costume","squad"].includes(Q))try{const Je=ln(Pt),mn=await Ot(Je,"updateSharedCarnivalData")({planId:Gn,field:Q,data:q,action:te,uid:t.uid,userEmail:t.email});(Le=mn.data)!=null&&Le.data&&an(mn.data.data);return}catch(Je){console.error("Error updating shared data:",Je)}const we=ze(ke,"users",t.uid,"apps",Cf,"carnivals",o);await pA(we,{[Q]:q})};j.useEffect(()=>{if(!t||!o||!m){ai([]);return}(async()=>{var q;xo(!0);try{const te=ln(Pt),Le=await Ot(te,"getScrapedEvents")({carnivalId:o});(q=Le.data)!=null&&q.success?(ai(Le.data.events||[]),oi(Le.data.lastScrapedAt)):(ai([]),oi(null))}catch(te){console.log("Error fetching scraped events:",te),ai([])}finally{xo(!1)}})()},[t,o,m]);const QA=async()=>{var Q,q;if(x(!0),m&&Nt&&Se){yo(!0);try{const te=ln(Pt),Le=await Ot(te,"sendRoadReadyAlert")({carnivalId:o,carnivalName:Se.name,userName:(t==null?void 0:t.displayName)||((Q=t==null?void 0:t.email)==null?void 0:Q.split("@")[0])||"Squad Member"});((q=Le.data)==null?void 0:q.notified)>0&&(Ar({title:"Squad Notified!",body:`${Le.data.notified} squad member(s) alerted that you're Road Ready!`}),setTimeout(()=>Ar(null),5e3))}catch(te){console.log("Error sending Road Ready alert:",te)}finally{yo(!1)}}},aa=()=>{var q;if(!H.trim()||!M)return;const Q={id:Date.now().toString(),name:H.trim(),cost:parseFloat(M)};if(ct)it("budget",[Q],"add");else{const te=((q=s[o])==null?void 0:q.budget)||[];it("budget",[...te,Q])}V(""),I("")},oa=Q=>{var q;if(ct)it("budget",{id:Q},"remove");else{const te=((q=s[o])==null?void 0:q.budget)||[];it("budget",te.filter(we=>we.id!==Q))}},PA=()=>{var q;if(!B.trim()||!P)return;const Q={id:Date.now().toString(),title:B.trim(),datetime:P,note:O.trim()};if(ct)it("schedule",[Q],"add");else{const te=((q=s[o])==null?void 0:q.schedule)||[];it("schedule",[...te,Q])}S(""),D(""),R("")},bo=Q=>{var q;if(ct)it("schedule",{id:Q},"remove");else{const te=((q=s[o])==null?void 0:q.schedule)||[];it("schedule",te.filter(we=>we.id!==Q))}},Us=Q=>{var Le;const q=new Date;q.setDate(q.getDate()+1),q.setHours(12,0,0,0);const te=q.toISOString().slice(0,16),we={id:Date.now().toString(),title:Q.title,datetime:te,note:Q.note||"Added from curated list"};if(ct)it("schedule",[we],"add");else{const Je=((Le=s[o])==null?void 0:Le.schedule)||[];it("schedule",[...Je,we])}},ls=()=>{var q;if(!Z.trim())return;const Q={id:Date.now().toString(),item:Z.trim(),checked:!1};if(ct)it("packing",[Q],"add");else{const te=((q=s[o])==null?void 0:q.packing)||[];it("packing",[...te,Q])}se("")},li=Q=>{var we;const q=ct?(zt==null?void 0:zt.packing)||[]:((we=s[o])==null?void 0:we.packing)||[],te=q.find(Le=>Le.id===Q);te&&(ct?it("packing",{id:Q,checked:!te.checked},"update"):it("packing",q.map(Le=>Le.id===Q?{...Le,checked:!Le.checked}:Le)))},ci=Q=>{var q;if(ct)it("packing",{id:Q},"remove");else{const te=((q=s[o])==null?void 0:q.packing)||[];it("packing",te.filter(we=>we.id!==Q))}},Co=()=>{var q;if(!Ae.trim())return;const Q={id:Date.now().toString(),name:Ae.trim()};if(ct)it("squad",[Q],"add");else{const te=((q=s[o])==null?void 0:q.squad)||[];it("squad",[...te,Q])}me("")},Aa=Q=>{var q;if(ct)it("squad",{id:Q},"remove");else{const te=((q=s[o])==null?void 0:q.squad)||[];it("squad",te.filter(we=>we.id!==Q))}};j.useEffect(()=>{const Q=o?s[o]:null;Q!=null&&Q.shareCode?ve(Q.shareCode):ve("")},[o,s]);const Fs=()=>{Y&&(navigator.clipboard.writeText(Y),xt("Code copied to clipboard!"),setTimeout(()=>xt(""),2e3))},De=()=>{it("costume",{...G,total:parseFloat(G.total)||0,paid:parseFloat(G.paid)||0,updatedAt:Date.now()}),alert("Costume details saved!")},at=()=>{if(!Se)return;const Q=[];Q.push(`CARNIVAL PLANNER: ${Se.name}`),Q.push(`==========================================
`),Q.push("-- SQUAD --"),(Se.squad||[]).forEach(Je=>Q.push(`- ${Je.name}`)),Q.push(`
`),Q.push("-- COSTUME --"),Se.costume?(Q.push(`Band: ${Se.costume.band}`),Q.push(`Section: ${Se.costume.section}`),Q.push(`Balance Due: $${((Se.costume.total||0)-(Se.costume.paid||0)).toFixed(2)}`)):Q.push("No costume details."),Q.push(`
`),Q.push("-- SCHEDULE --"),(Se.schedule||[]).slice().sort((Je,Me)=>new Date(Je.datetime)-new Date(Me.datetime)).forEach(Je=>Q.push(`${new Date(Je.datetime).toLocaleString()} | ${Je.title}`));const te=new Blob([Q.join(`
`)],{type:"text/plain"}),we=URL.createObjectURL(te),Le=document.createElement("a");Le.href=we,Le.download=`${Se.name.replace(/\s+/g,"_")}_Plan.txt`,Le.click()},qn=o?s[o]:null,Se=qn?{...qn,...ct&&zt?{budget:zt.budget||qn.budget||[],schedule:zt.schedule||qn.schedule||[],packing:zt.packing||qn.packing||[],costume:zt.costume||qn.costume,squad:zt.squad||qn.squad||[]}:{}}:null,cs=((ca=Se==null?void 0:Se.budget)==null?void 0:ca.reduce((Q,q)=>Q+(q.cost||0),0))||0,la=Se!=null&&Se.costume?Se.costume.total-Se.costume.paid:0,Pe=Se?EI[o]||EI.default:[];if(Is){const Q={onBack:()=>lr(null),logo:$h};switch(Is){case"privacy":return A.jsx(E6,{...Q});case"terms":return A.jsx(I6,{...Q});case"cookies":return A.jsx(T6,{...Q});case"refund":return A.jsx(k6,{...Q});case"contact":return A.jsx(N6,{...Q,user:t});default:lr(null)}}if(w&&!t)return A.jsx(C6,{onGetStarted:()=>C(!1),logo:$h,onLegalPage:lr,onTryDemo:Sn});if(t&&b&&Se){const Q=(Se.schedule||[]).slice().sort((q,te)=>new Date(q.datetime)-new Date(te.datetime)).find(q=>new Date(q.datetime)>new Date);return A.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6 flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx("h1",{className:"text-2xl font-bold italic",children:"ROAD MODE"}),A.jsx("button",{onClick:()=>x(!1),className:"text-sm bg-gray-800 px-3 py-1 rounded",children:"Exit"})]}),A.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 rounded-2xl shadow-lg",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-1",children:"Up Next"}),Q?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-3xl font-black mb-1",children:Q.title}),A.jsx("div",{className:"text-xl opacity-90",children:new Date(Q.datetime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),A.jsx("div",{className:"mt-2 text-sm bg-white/20 inline-block px-2 py-1 rounded",children:Q.note||"No notes"})]}):A.jsx("div",{className:"text-xl italic opacity-75",children:"No more fetes scheduled! Sleep time?"})]}),A.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-2",children:"Costume Pickup"}),Se.costume?A.jsxs("div",{children:[A.jsx("div",{className:"text-xl font-bold text-yellow-400",children:Se.costume.band}),A.jsxs("div",{className:"text-gray-400",children:["Section: ",Se.costume.section]}),la>0&&A.jsxs("div",{className:"text-red-400 font-bold mt-1",children:["Balance Due: $",la]})]}):A.jsx("div",{className:"text-gray-500 italic",children:"No costume details saved."})]})]})]})}return A.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[ri&&A.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slideIn",children:A.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-xl shadow-2xl max-w-sm",children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:ri.title}),A.jsx("p",{className:"text-sm opacity-90",children:ri.body})]}),A.jsx("button",{onClick:()=>Ar(null),className:"ml-2 text-white/70 hover:text-white",children:""})]})})}),A.jsx(S6,{}),A.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm py-4 px-4 flex justify-between items-center sticky top-0 z-20 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("img",{src:$h,alt:"Logo",className:"w-8 h-8"}),A.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white hidden sm:block",children:"Carnival Planner"})]}),t&&A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:cr,className:"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-yellow-300",children:U?"":""}),n&&A.jsx("button",{onClick:Wi,className:"px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-700 hover:bg-red-200 border border-red-200 transition-colors",children:"EXIT DEMO"}),Se&&A.jsx("button",{onClick:QA,disabled:Es,className:"px-3 py-1 text-xs font-bold rounded-full transition bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-200 disabled:opacity-50",children:Es?"...":"GO ROAD READY"}),m?A.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full font-bold",children:"Premium"}):A.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Free Plan"}),A.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${si?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300"}`,children:[A.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${si?"bg-green-500":"bg-orange-500 animate-pulse"}`}),si?"Online":"Offline Mode"]}),A.jsx("button",{onClick:FA,className:"text-sm font-medium text-gray-500 hover:text-red-500 dark:text-gray-400",children:"Sign Out"})]})]}),t&&A.jsx(I7,{user:t}),A.jsx("main",{className:"flex-1 p-4 max-w-4xl mx-auto w-full",children:t?A.jsxs("div",{children:[A.jsx("div",{className:"mb-8",children:A.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x",children:sn.map((Q,q)=>{const te=o===Q.id,we=_o[q%_o.length],Je={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[Q.id]||Q.name,Me=C0.find(on=>on.name.toLowerCase().includes(Je.toLowerCase())||Je.toLowerCase().includes(on.name.split("(")[0].trim().toLowerCase()));let mn=null;if(Me){const on=new Date,ua=new Date(on.getFullYear(),on.getMonth(),on.getDate()),[us,$n,Eo]=Me.date.split("-").map(Number),di=new Date(us,$n-1,Eo);di>=ua&&(mn=Math.round((di-ua)/(1e3*60*60*24)))}return A.jsx("div",{onClick:()=>ra(Q.id,`${Q.name} - ${Ss[Q.monthIndex]}`),className:`snap-center min-w-[200px] cursor-pointer rounded-2xl p-5 shadow-lg relative overflow-hidden transition-all duration-300 ${te?"ring-4 ring-offset-2 ring-blue-400 scale-105":"hover:scale-105 opacity-90"} ${we}`,children:A.jsxs("div",{className:"relative z-10 text-white",children:[A.jsx("h4",{className:"font-bold text-lg leading-tight mb-1",children:Q.name}),A.jsx("p",{className:"text-xs font-medium uppercase tracking-wider opacity-90",children:Ss[Q.monthIndex]}),Me&&A.jsx("p",{className:"text-xs font-medium opacity-80 mt-1",children:new Date(Me.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),mn!==null&&A.jsxs("div",{className:"mt-2 bg-white/20 backdrop-blur-sm rounded-lg px-2 py-1 inline-block",children:[A.jsx("span",{className:"text-lg font-black",children:mn}),A.jsx("span",{className:"text-xs ml-1 opacity-90",children:"days"})]})]})},Q.id)})})}),Se?A.jsxs(A.Fragment,{children:[A.jsx(BI,{user:t,activeCarnivalId:o,carnivalData:C0,scrapedEvents:Kn,squadMembers:pe,budgetTotal:2e4,budgetSpent:cs,isPremium:m,onAction:h}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors",children:[!m&&A.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-pink-500 p-4 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-bold text-sm",children:"Unlock Premium Features"}),A.jsx("p",{className:"text-white/80 text-xs",children:"Go ad-free and get a Premium badge!"})]})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-4 py-2 bg-white text-orange-600 font-bold text-sm rounded-full hover:bg-gray-100 transition",children:"Upgrade"})]}),!m&&A.jsx("div",{className:"border-b border-gray-100 dark:border-gray-700",children:A.jsx(Xh,{placement:"banner",onUpgradeClick:()=>h("Info")})}),A.jsx("div",{className:"flex border-b border-gray-100 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:["Budget","Costume","Bands","Schedule","Squad","Passport","Packing","Map","Media","Profile","Info"].filter(Q=>m||!["Map","Media","Passport"].includes(Q)).map(Q=>A.jsxs("button",{onClick:()=>{console.log("Switching to tab:",Q,"isPremium:",m),h(Q)},className:`flex-shrink-0 px-3 sm:px-4 py-3 sm:py-4 text-xs sm:text-sm font-medium transition-colors relative whitespace-nowrap ${u===Q?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[Q,["Map","Media","Passport"].includes(Q)&&A.jsx("span",{className:"ml-1 text-xs text-yellow-500",children:""}),u===Q&&A.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400"})]},Q))}),ct&&A.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 px-4 py-2 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-white text-lg",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-medium text-sm",children:"Squad Mode Active"}),A.jsxs("p",{className:"text-white/80 text-xs",children:["Changes sync with ",pe.length," squad member(s)"]})]})]}),A.jsx("button",{onClick:ia,disabled:Bo,className:"px-3 py-1 bg-white/20 text-white text-xs font-medium rounded-full hover:bg-white/30 transition disabled:opacity-50",children:Bo?"Syncing...":"Refresh"})]}),A.jsxs("div",{className:"p-6",children:[u==="Budget"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-end mb-6",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Budget"}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Estimate"}),A.jsxs("p",{className:"text-2xl font-black text-green-600 dark:text-green-400",children:["$",cs.toFixed(2)]})]})]}),A.jsx("div",{className:"space-y-3 mb-6",children:(Se.budget||[]).map(Q=>{var q;return A.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg group hover:bg-gray-100 dark:hover:bg-gray-600",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:Q.name}),Q.addedBy&&ct&&A.jsxs("span",{className:"ml-2 text-xs text-gray-400 dark:text-gray-500",children:["by ",((q=Q.addedBy.email)==null?void 0:q.split("@")[0])||"squad member"]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["$",Q.cost.toFixed(2)]}),A.jsx("button",{onClick:()=>oa(Q.id),className:"text-gray-400 hover:text-red-500",children:""})]})]},Q.id)})}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsxs("div",{className:"flex gap-2 flex-1",children:[A.jsx("input",{type:"text",placeholder:"Item",value:H,onChange:Q=>V(Q.target.value),className:"flex-[2] p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("input",{type:"number",placeholder:"0.00",value:M,onChange:Q=>I(Q.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"})]}),A.jsx("button",{onClick:aa,className:"w-full sm:w-auto px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!m&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(Xh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Bands"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(b6,{carnivalId:o})}),u==="Costume"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Mas Costume"}),A.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl border border-pink-100 dark:border-pink-900 mb-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Band Name"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.band||((Wn=Se.costume)==null?void 0:Wn.band)||"",onChange:Q=>oe({...G,band:Q.target.value}),placeholder:"e.g. Tribe, Bliss..."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Section"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.section||((_t=Se.costume)==null?void 0:_t.section)||"",onChange:Q=>oe({...G,section:Q.target.value}),placeholder:"e.g. The Monarch"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Total Cost"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.total||((ui=Se.costume)==null?void 0:ui.total)||"",onChange:Q=>oe({...G,total:Q.target.value}),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Amount Paid"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.paid||((Or=Se.costume)==null?void 0:Or.paid)||"",onChange:Q=>oe({...G,paid:Q.target.value}),placeholder:"0.00"})]})]}),A.jsx("button",{onClick:De,className:"mt-4 w-full py-2 bg-pink-600 text-white font-bold rounded hover:bg-pink-700",children:"Save Details"})]})]}),u==="Schedule"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Itinerary"}),Pe.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Popular Events (Click to Add)"}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Pe.map((Q,q)=>A.jsxs("button",{onClick:()=>Us(Q),className:"min-w-[140px] p-3 text-left rounded-lg border transition bg-blue-50 dark:bg-blue-900/30 border-blue-100 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-800",children:[A.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300 text-sm",children:Q.title}),A.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400 opacity-75 truncate",children:Q.note})]},q))})]}),m?A.jsxs("div",{className:"mb-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase flex items-center gap-1",children:[A.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Live Events from Fete Sites"]}),ks&&A.jsxs("span",{className:"text-xs text-gray-400",children:["Updated: ",new Date(ks).toLocaleDateString()]})]}),na?A.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[A.jsx("div",{className:"animate-spin inline-block w-5 h-5 border-2 border-emerald-500 border-t-transparent rounded-full mb-2"}),A.jsx("p",{className:"text-sm",children:"Loading live events..."})]}):Kn.length>0?A.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Kn.slice(0,10).map((Q,q)=>A.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg hover:shadow-md transition",children:[Q.image&&A.jsx("img",{src:Q.image,alt:"",className:"w-12 h-12 rounded object-cover flex-shrink-0"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h5",{className:"font-bold text-emerald-900 dark:text-emerald-300 text-sm truncate",children:Q.title}),Q.date&&A.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-400",children:[new Date(Q.date+"T00:00:00").toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),Q.time&&` at ${Q.time}`]}),Q.venue&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:Q.venue}),A.jsxs("p",{className:"text-xs text-gray-400",children:["via ",Q.source]})]}),A.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[Q.url&&A.jsx("a",{href:Q.url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 text-xs bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Tickets"}),A.jsx("button",{onClick:()=>Us({title:Q.title,note:Q.venue||`via ${Q.source}`}),className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"+ Add"})]})]},Q.id||q))}):A.jsxs("div",{className:"text-center py-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[A.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-400",children:"No live events found for this carnival yet."}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Events are updated daily from fetelist.com & frontlineticketing.com"})]})]}):A.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-bold text-amber-900 dark:text-amber-300",children:"Unlock Live Event Listings"}),A.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"Premium members get daily-updated fete listings from fetelist.com & frontlineticketing.com"})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-sm font-bold rounded-lg hover:opacity-90 flex-shrink-0",children:"Upgrade"})]})}),A.jsx("div",{className:"space-y-4 mb-6",children:(Se.schedule||[]).map(Q=>{var q;return A.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-blue-400 relative group",children:[A.jsxs("div",{className:"text-center min-w-[60px]",children:[A.jsx("span",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:new Date(Q.datetime).toLocaleDateString(void 0,{month:"short"})}),A.jsx("span",{className:"block text-xl font-black text-gray-800 dark:text-white",children:new Date(Q.datetime).getDate()}),A.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:new Date(Q.datetime).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white",children:Q.title}),Q.note&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:Q.note}),Q.addedBy&&ct&&A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Added by ",((q=Q.addedBy.email)==null?void 0:q.split("@")[0])||"squad member"]})]}),A.jsx("button",{onClick:()=>bo(Q.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100",children:""})]},Q.id)})}),A.jsx("div",{className:"mb-6",children:A.jsx(y6,{onScheduleDetected:async Q=>{if(console.log("Voice Command:",Q),!t)return;const q={name:Q.name,date:Q.day+" "+Q.time,note:Q.note,completed:!1};try{await createScheduleItem(t,o,q);const te={...s},we=te[o];we&&(we.schedule=[...we.schedule||[],{id:Date.now().toString(),...q}],i(te)),alert(`Added: ${Q.name}`)}catch(te){console.error("Voice Add Failed",te),alert("Could not add voice event.")}}})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Event Name (e.g. Scorch, Tribe)",value:B,onChange:Q=>S(Q.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Date/Time (e.g. Fri 2PM)",value:P,onChange:Q=>D(Q.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Type (Fete, Mas, transport...)",value:O,onChange:Q=>R(Q.target.value),className:"md:col-span-2 p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("button",{onClick:PA,className:"md:col-span-2 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700",children:"Add Event"})]})]}),u==="Squad"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Your Squad"}),A.jsxs("span",{className:"text-sm bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:[((Er=Se.squad)==null?void 0:Er.length)||0," members"]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl p-4 mb-6 shadow-lg border border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[A.jsx("span",{children:""})," Road Mode: Offline Chat"]}),A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Mesh chat for when cell service dies. Open Bitchat and join your squad channel."})]}),A.jsx("span",{className:"bg-blue-600 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:"No Data Needed"})]}),!o||!ae?A.jsx("div",{className:"text-center py-4 bg-white/5 rounded-lg border border-white/10",children:A.jsx("p",{className:"text-sm text-gray-300",children:"Create or join a squad to enable offline comms."})}):A.jsxs("div",{className:"space-y-4",children:[(()=>{const q=`#CP-${ae.id.slice(0,8).toUpperCase()}`;return A.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-white/10",children:[A.jsx("p",{className:"text-[10px] uppercase text-gray-400 font-bold mb-2",children:"Join this channel in Bitchat"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("p",{className:"font-mono text-2xl font-bold text-blue-400 tracking-wider select-all flex-1",children:q}),A.jsx("button",{onClick:()=>{navigator.clipboard.writeText(q),Ar("Channel name copied!")},className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold rounded-lg transition-colors",children:"Copy"})]})]})})(),A.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[A.jsxs("a",{href:"https://apps.apple.com/us/app/bitchat-mesh/id6748219622",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," iOS App"]}),A.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.bitchat.droid",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," Android App"]})]})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4 mb-4",children:[A.jsxs("h4",{className:"font-bold text-purple-800 dark:text-purple-300 mb-3 flex items-center gap-2",children:[A.jsx("span",{children:""})," Squad Sharing"]}),vt&&A.jsx("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm",children:vt}),rn&&A.jsx("div",{className:"mb-3 p-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-sm",children:rn}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Share your carnival plan with friends:"}),Y?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-2xl font-mono font-bold text-purple-600 dark:text-purple-400 tracking-wider",children:Y}),A.jsx("button",{onClick:Fs,className:"text-sm bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 px-3 py-1 rounded hover:bg-purple-200",children:"Copy"})]}):A.jsx("button",{onClick:$i,disabled:jt,className:"w-full py-2 bg-purple-600 text-white rounded font-medium hover:bg-purple-700 disabled:opacity-50",children:jt?"Creating...":"Start a Squad"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Join a friend's squad:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Enter 6-digit code",value:ue,onChange:Q=>fe(Q.target.value.toUpperCase().slice(0,6)),className:"flex-1 p-2 border rounded font-mono text-center tracking-wider uppercase dark:bg-gray-700 dark:border-gray-600 dark:text-white",maxLength:6}),A.jsx("button",{onClick:Zi,disabled:kn||ue.length!==6,className:"bg-pink-600 text-white px-4 rounded hover:bg-pink-700 disabled:opacity-50",children:kn?"...":"Join"})]})]})]}),ae&&A.jsx("div",{className:"mt-4 text-center",children:A.jsx("button",{onClick:NA,className:"text-sm text-red-500 hover:text-red-700 underline",children:"Leave Squad"})})]}),m&&A.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:A.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:Nt,onChange:Q=>Jt(Q.target.checked),className:"w-5 h-5 text-purple-600 rounded"}),A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-purple-800 dark:text-purple-300",children:"Notify squad when I go Road Ready"}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send push notification to squad members"})]}),A.jsx("span",{className:"ml-auto text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full",children:"Premium"})]})}),pe.length>0&&A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-green-200 dark:border-green-800 rounded-xl p-4 mb-4",children:[A.jsx("div",{className:"flex items-center justify-between mb-3",children:A.jsxs("h4",{className:"font-medium text-green-700 dark:text-green-400 flex items-center gap-2",children:[A.jsx("span",{children:""})," Connected Squad Members"]})}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:'These users joined using your share code and can see this carnival plan. Click "Refresh" to check for new members.'}),A.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((Q,q)=>{var te;return A.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full border ${Q.role==="leader"?"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800":"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800"}`,children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-bold",children:(Q.name||Q.email||Q.uid||"?").charAt(0).toUpperCase()}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:`font-medium text-sm ${Q.role==="leader"?"text-yellow-800 dark:text-yellow-300":"text-green-800 dark:text-green-300"}`,children:Q.name||Q.email||`User ${(te=Q.uid)==null?void 0:te.slice(0,6)}...`}),A.jsx("span",{className:`text-xs ${Q.role==="leader"?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:Q.role==="leader"?" Leader":" Member"})]}),(ae==null?void 0:ae.leaderId)===(t==null?void 0:t.uid)&&Q.role!=="leader"&&Q.uid&&A.jsx("button",{onClick:()=>Ji(Q.uid,Q.name||Q.email||"this member"),className:"ml-auto text-red-400 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full p-1 transition-colors",title:"Remove from squad",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Q.uid||q)})})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 mb-4",children:[A.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Quick Add (Offline List)"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Add friend's name",value:Ae,onChange:Q=>me(Q.target.value),className:"flex-1 p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:Co,className:"w-full sm:w-auto bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 font-medium",children:"Add"})]}),A.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[pe.map(Q=>A.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 dark:bg-purple-900/30 px-3 py-1 rounded-full border border-purple-100 dark:border-purple-800",children:[A.jsx("span",{className:"text-purple-900 dark:text-purple-200 font-medium",children:Q.name}),A.jsx("button",{onClick:()=>Aa(Q.id),className:"text-purple-400 hover:text-red-500 text-xs font-bold",children:""})]},Q.id)),(Se.squad||[]).length===0&&A.jsx("p",{className:"text-gray-400 italic text-sm",children:"No squad members added yet. Riding solo?"})]})]}),A.jsx("div",{className:"mt-8 mb-8",children:A.jsx(d6,{squadId:ae==null?void 0:ae.id,user:t,isDemoMode:n})}),!m&&A.jsx("div",{className:"mt-4",children:A.jsx(Xh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Packing"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Packing List"}),A.jsx("div",{className:"space-y-2 mb-6",children:(Se.packing||[]).map(Q=>A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 border border-gray-100 dark:border-gray-600 shadow-sm rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("input",{type:"checkbox",checked:Q.checked,onChange:()=>li(Q.id),className:"w-5 h-5 text-blue-600 rounded"}),A.jsx("span",{className:`text-gray-700 dark:text-gray-200 ${Q.checked?"line-through opacity-50":""}`,children:Q.item})]}),A.jsx("button",{onClick:()=>ci(Q.id),className:"text-gray-400 hover:text-red-500",children:""})]},Q.id))}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("input",{type:"text",placeholder:"Item",value:Z,onChange:Q=>se(Q.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:ls,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!m&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(Xh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Map"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(l6,{locations:Se.mapLocations||[],scrapedEvents:Kn,onLocationsChange:Q=>it("mapLocations",Q),carnivalName:Se.name,carnivalId:o})}),u==="Passport"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(p7,{user:t,activeCarnivalId:o,activePlanId:Gn,isDemoMode:n})}),u==="Media"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(h6,{files:Se.mediaFiles||[],onFilesChange:Q=>it("mediaFiles",Q),carnivalName:Se.name,carnivalId:o,userId:t.uid})}),u==="Profile"&&A.jsxs("div",{className:"animate-fadeIn",children:[console.log("Rendering MasqueraderProfile, isOwnProfile: true"),A.jsx(x7,{currentUser:t,profileData:{...os||{displayName:(t==null?void 0:t.displayName)||"Carnival Lover",bio:"",isPublic:!1,carnivalHistory:Object.entries(s||{}).filter(([Q,q])=>{var te;return(te=q==null?void 0:q.costume)==null?void 0:te.band}).map(([Q,q])=>{var te,we;return{carnivalId:Q,year:new Date().getFullYear(),band:(te=q.costume)==null?void 0:te.band,section:(we=q.costume)==null?void 0:we.section}})},activeCarnivalId:o,isPromoter:(os==null?void 0:os.isPromoter)||!1,onAccessPromoter:()=>h("Promoter")},isOwnProfile:!0,onEdit:()=>As(!0)})]}),u==="Promoter"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(B7,{user:t,isPremium:m,onExit:()=>h("Profile")})}),u==="Info"&&A.jsxs("div",{className:"animate-fadeIn text-center",children:[A.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-2xl p-8 mb-6 shadow-xl",children:[A.jsx("img",{src:$h,alt:"Logo",className:"w-20 h-20 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-2",children:m?"Premium Supporter":"Support the App"}),A.jsx("p",{className:"text-gray-400 mb-6",children:m?"Thank you for supporting Carnival Planner!":"All features are free! Premium removes ads and shows your support."}),A.jsxs("button",{onClick:at,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 rounded-full font-bold transition-colors bg-white text-gray-900 hover:bg-gray-100",children:[A.jsx("span",{children:""})," Export Itinerary"]})]}),!m&&A.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[A.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400 mb-2",children:"Become a Premium Supporter"}),A.jsx("p",{className:"text-yellow-700 dark:text-yellow-500 text-sm mb-4",children:"Get an ad-free experience and a Premium badge to show your support!"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[A.jsx("button",{onClick:()=>Ns("monthly"),disabled:E,className:"px-4 py-2 bg-blue-600 text-white font-bold rounded shadow hover:bg-blue-700 disabled:opacity-50",children:E?"Loading...":"Monthly - $4.99"}),A.jsx("button",{onClick:()=>Ns("yearly"),disabled:E,className:"px-4 py-2 bg-yellow-400 text-yellow-900 font-bold rounded shadow hover:bg-yellow-500 disabled:opacity-50",children:E?"Loading...":"Yearly - $39.99"})]})]}),A.jsx("div",{className:"mt-6",children:A.jsx(F6,{user:t})}),Ee&&A.jsx("div",{className:"mt-6 text-left space-y-8",children:A.jsx(b7,{user:t})})]})]})]})]}):A.jsx(BI,{user:t,activeCarnivalId:null,carnivalData:C0,scrapedEvents:Kn,squadMembers:[],budgetTotal:0,budgetSpent:0,isPremium:m,onAction:h})]}):A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:ta?A.jsx(E7,{onBack:()=>ii(!1),onSuccess:()=>ii(!1)}):A.jsxs(A.Fragment,{children:[A.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-white",children:"Welcome Back"}),A.jsxs("div",{className:"space-y-3 w-full max-w-sm",children:[A.jsxs("button",{onClick:UA,className:"w-full flex items-center justify-center px-6 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-white transition-colors",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5 mr-3",alt:"G"}),"Continue with Google"]}),A.jsxs("div",{className:"flex items-center gap-3 text-gray-400 dark:text-gray-500",children:[A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),A.jsx("span",{className:"text-sm",children:"or"}),A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]}),A.jsx("button",{onClick:()=>ii(!0),className:"w-full flex items-center justify-center px-6 py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-lg shadow-sm hover:opacity-90 text-white font-semibold transition-opacity",children:"Continue with Email"})]}),A.jsx("button",{onClick:()=>C(!0),className:"mt-6 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Back to home"})]})})}),A.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 px-4 mt-auto",children:A.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[A.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[A.jsx("button",{onClick:()=>lr("privacy"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Privacy"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>lr("terms"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Terms"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>lr("cookies"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cookies"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>lr("refund"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Refunds"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>lr("contact"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Contact"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Ts(!0),className:"hover:text-gray-900 dark:hover:text-white transition-colors font-medium",children:"Help"})]}),A.jsxs("p",{className:"text-gray-400 dark:text-gray-500 text-xs mt-3",children:[" ",new Date().getFullYear()," Carnival Planner"]})]})}),t&&A.jsx(g6,{activeCarnivalId:o,isPremium:m}),Xi&&A.jsx(y7,{onClose:()=>{Yi(!1),localStorage.setItem("carnival-planner-welcomed","true")}}),bc&&A.jsx(w7,{onClose:()=>Ts(!1)}),vo&&A.jsx(_7,{user:t,currentProfile:os,carnivals:s,onSave:Q=>ea(Q),onClose:()=>As(!1)})]})}$0.createRoot(document.getElementById("root")).render(A.jsx(rm.StrictMode,{children:A.jsx(Q7,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered:",t.scope)}).catch(t=>{console.log("SW registration failed:",t)})});
