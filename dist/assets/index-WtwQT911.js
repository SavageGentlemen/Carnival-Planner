(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var LF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kI={exports:{}},hg={},SI={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=Symbol.for("react.element"),jF=Symbol.for("react.portal"),DF=Symbol.for("react.fragment"),MF=Symbol.for("react.strict_mode"),OF=Symbol.for("react.profiler"),HF=Symbol.for("react.provider"),VF=Symbol.for("react.context"),KF=Symbol.for("react.forward_ref"),zF=Symbol.for("react.suspense"),GF=Symbol.for("react.memo"),qF=Symbol.for("react.lazy"),tB=Symbol.iterator;function WF(t){return t===null||typeof t!="object"?null:(t=tB&&t[tB]||t["@@iterator"],typeof t=="function"?t:null)}var NI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UI=Object.assign,FI={};function pc(t,e,n){this.props=t,this.context=e,this.refs=FI,this.updater=n||NI}pc.prototype.isReactComponent={};pc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QI(){}QI.prototype=pc.prototype;function Zw(t,e,n){this.props=t,this.context=e,this.refs=FI,this.updater=n||NI}var Jw=Zw.prototype=new QI;Jw.constructor=Zw;UI(Jw,pc.prototype);Jw.isPureReactComponent=!0;var nB=Array.isArray,PI=Object.prototype.hasOwnProperty,Xw={current:null},RI={key:!0,ref:!0,__self:!0,__source:!0};function LI(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)PI.call(e,r)&&!RI.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ud,type:t,key:i,ref:o,props:s,_owner:Xw.current}}function $F(t,e){return{$$typeof:Ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ud}function ZF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rB=/\/+/g;function Up(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZF(""+t.key):e.toString(36)}function If(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ud:case jF:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Up(o,0):r,nB(s)?(n="",t!=null&&(n=t.replace(rB,"$&/")+"/"),If(s,e,n,"",function(h){return h})):s!=null&&(Yw(s)&&(s=$F(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",nB(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Up(i,l);o+=If(i,e,n,u,s)}else if(u=WF(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Up(i,l++),o+=If(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bh(t,e,n){if(t==null)return t;var r=[],s=0;return If(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ar={current:null},Tf={transition:null},XF={ReactCurrentDispatcher:ar,ReactCurrentBatchConfig:Tf,ReactCurrentOwner:Xw};function jI(){throw Error("act(...) is not supported in production builds of React.")}We.Children={map:bh,forEach:function(t,e,n){bh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bh(t,function(){e++}),e},toArray:function(t){return bh(t,function(e){return e})||[]},only:function(t){if(!Yw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};We.Component=pc;We.Fragment=DF;We.Profiler=OF;We.PureComponent=Zw;We.StrictMode=MF;We.Suspense=zF;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XF;We.act=jI;We.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=UI({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)PI.call(e,u)&&!RI.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ud,type:t.type,key:s,ref:i,props:r,_owner:o}};We.createContext=function(t){return t={$$typeof:VF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HF,_context:t},t.Consumer=t};We.createElement=LI;We.createFactory=function(t){var e=LI.bind(null,t);return e.type=t,e};We.createRef=function(){return{current:null}};We.forwardRef=function(t){return{$$typeof:KF,render:t}};We.isValidElement=Yw;We.lazy=function(t){return{$$typeof:qF,_payload:{_status:-1,_result:t},_init:JF}};We.memo=function(t,e){return{$$typeof:GF,type:t,compare:e===void 0?null:e}};We.startTransition=function(t){var e=Tf.transition;Tf.transition={};try{t()}finally{Tf.transition=e}};We.unstable_act=jI;We.useCallback=function(t,e){return ar.current.useCallback(t,e)};We.useContext=function(t){return ar.current.useContext(t)};We.useDebugValue=function(){};We.useDeferredValue=function(t){return ar.current.useDeferredValue(t)};We.useEffect=function(t,e){return ar.current.useEffect(t,e)};We.useId=function(){return ar.current.useId()};We.useImperativeHandle=function(t,e,n){return ar.current.useImperativeHandle(t,e,n)};We.useInsertionEffect=function(t,e){return ar.current.useInsertionEffect(t,e)};We.useLayoutEffect=function(t,e){return ar.current.useLayoutEffect(t,e)};We.useMemo=function(t,e){return ar.current.useMemo(t,e)};We.useReducer=function(t,e,n){return ar.current.useReducer(t,e,n)};We.useRef=function(t){return ar.current.useRef(t)};We.useState=function(t){return ar.current.useState(t)};We.useSyncExternalStore=function(t,e,n){return ar.current.useSyncExternalStore(t,e,n)};We.useTransition=function(){return ar.current.useTransition()};We.version="18.3.1";SI.exports=We;var R=SI.exports;const sm=TI(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YF=R,eQ=Symbol.for("react.element"),tQ=Symbol.for("react.fragment"),nQ=Object.prototype.hasOwnProperty,rQ=YF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sQ={key:!0,ref:!0,__self:!0,__source:!0};function DI(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nQ.call(e,r)&&!sQ.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:eQ,type:t,key:i,ref:o,props:s,_owner:rQ.current}}hg.Fragment=tQ;hg.jsx=DI;hg.jsxs=DI;kI.exports=hg;var A=kI.exports,$0={},MI={exports:{}},Kr={},OI={exports:{}},HI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,ae){var ee=z.length;z.push(ae);e:for(;0<ee;){var we=ee-1>>>1,de=z[we];if(0<s(de,ae))z[we]=ae,z[ee]=de,ee=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var ae=z[0],ee=z.pop();if(ee!==ae){z[0]=ee;e:for(var we=0,de=z.length,me=de>>>1;we<me;){var pe=2*(we+1)-1,he=z[pe],ie=pe+1,Qe=z[ie];if(0>s(he,ee))ie<de&&0>s(Qe,he)?(z[we]=Qe,z[ie]=ee,we=ie):(z[we]=he,z[pe]=ee,we=pe);else if(ie<de&&0>s(Qe,ee))z[we]=Qe,z[ie]=ee,we=ie;else break e}}return ae}function s(z,ae){var ee=z.sortIndex-ae.sortIndex;return ee!==0?ee:z.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],m=1,p=null,w=3,C=!1,b=!1,x=!1,U=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(z){for(var ae=n(h);ae!==null;){if(ae.callback===null)r(h);else if(ae.startTime<=z)r(h),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=n(h)}}function O(z){if(x=!1,N(z),!b)if(n(u)!==null)b=!0,oe(H);else{var ae=n(h);ae!==null&&Ae(O,ae.startTime-z)}}function H(z,ae){b=!1,x&&(x=!1,T(B),B=-1),C=!0;var ee=w;try{for(N(ae),p=n(u);p!==null&&(!(p.expirationTime>ae)||z&&!D());){var we=p.callback;if(typeof we=="function"){p.callback=null,w=p.priorityLevel;var de=we(p.expirationTime<=ae);ae=t.unstable_now(),typeof de=="function"?p.callback=de:p===n(u)&&r(u),N(ae)}else r(u);p=n(u)}if(p!==null)var me=!0;else{var pe=n(h);pe!==null&&Ae(O,pe.startTime-ae),me=!1}return me}finally{p=null,w=ee,C=!1}}var M=!1,I=null,B=-1,S=5,Q=-1;function D(){return!(t.unstable_now()-Q<S)}function K(){if(I!==null){var z=t.unstable_now();Q=z;var ae=!0;try{ae=I(!0,z)}finally{ae?j():(M=!1,I=null)}}else M=!1}var j;if(typeof E=="function")j=function(){E(K)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Y=J.port2;J.port1.onmessage=K,j=function(){Y.postMessage(null)}}else j=function(){U(K,0)};function oe(z){I=z,M||(M=!0,j())}function Ae(z,ae){B=U(function(){z(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||C||(b=!0,oe(H))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var ee=w;w=ae;try{return z()}finally{w=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,ae){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ee=w;w=z;try{return ae()}finally{w=ee}},t.unstable_scheduleCallback=function(z,ae,ee){var we=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?we+ee:we):ee=we,z){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ee+de,z={id:m++,callback:ae,priorityLevel:z,startTime:ee,expirationTime:de,sortIndex:-1},ee>we?(z.sortIndex=ee,e(h,z),n(u)===null&&z===n(h)&&(x?(T(B),B=-1):x=!0,Ae(O,ee-we))):(z.sortIndex=de,e(u,z),b||C||(b=!0,oe(H))),z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(z){var ae=w;return function(){var ee=w;w=ae;try{return z.apply(this,arguments)}finally{w=ee}}}})(HI);OI.exports=HI;var iQ=OI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aQ=R,Or=iQ;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VI=new Set,$u={};function EA(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for($u[t]=e,t=0;t<e.length;t++)VI.add(e[t])}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Z0=Object.prototype.hasOwnProperty,oQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sB={},iB={};function AQ(t){return Z0.call(iB,t)?!0:Z0.call(sB,t)?!1:oQ.test(t)?iB[t]=!0:(sB[t]=!0,!1)}function lQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cQ(t,e,n,r){if(e===null||typeof e>"u"||lQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function or(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Sn[t]=new or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Sn[e]=new or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Sn[t]=new or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Sn[t]=new or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Sn[t]=new or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Sn[t]=new or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Sn[t]=new or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Sn[t]=new or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Sn[t]=new or(t,5,!1,t.toLowerCase(),null,!1,!1)});var ev=/[\-:]([a-z])/g;function tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ev,tv);Sn[e]=new or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ev,tv);Sn[e]=new or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ev,tv);Sn[e]=new or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Sn[t]=new or(t,1,!1,t.toLowerCase(),null,!1,!1)});Sn.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Sn[t]=new or(t,1,!1,t.toLowerCase(),null,!0,!0)});function nv(t,e,n,r){var s=Sn.hasOwnProperty(e)?Sn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cQ(e,n,s,r)&&(n=null),r||s===null?AQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ji=aQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ch=Symbol.for("react.element"),wl=Symbol.for("react.portal"),vl=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),J0=Symbol.for("react.profiler"),KI=Symbol.for("react.provider"),zI=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),Y0=Symbol.for("react.suspense_list"),iv=Symbol.for("react.memo"),xa=Symbol.for("react.lazy"),GI=Symbol.for("react.offscreen"),aB=Symbol.iterator;function Oc(t){return t===null||typeof t!="object"?null:(t=aB&&t[aB]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,Fp;function Au(t){if(Fp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fp=e&&e[1]||""}return`
`+Fp+t}var Qp=!1;function Pp(t,e){if(!t||Qp)return"";Qp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Qp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Au(t):""}function uQ(t){switch(t.tag){case 5:return Au(t.type);case 16:return Au("Lazy");case 13:return Au("Suspense");case 19:return Au("SuspenseList");case 0:case 2:case 15:return t=Pp(t.type,!1),t;case 11:return t=Pp(t.type.render,!1),t;case 1:return t=Pp(t.type,!0),t;default:return""}}function ey(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vl:return"Fragment";case wl:return"Portal";case J0:return"Profiler";case rv:return"StrictMode";case X0:return"Suspense";case Y0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zI:return(t.displayName||"Context")+".Consumer";case KI:return(t._context.displayName||"Context")+".Provider";case sv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iv:return e=t.displayName||null,e!==null?e:ey(t.type)||"Memo";case xa:e=t._payload,t=t._init;try{return ey(t(e))}catch{}}return null}function dQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ey(e);case 8:return e===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hQ(t){var e=qI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eh(t){t._valueTracker||(t._valueTracker=hQ(t))}function WI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function im(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ty(t,e){var n=e.checked;return jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ja(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $I(t,e){e=e.checked,e!=null&&nv(t,"checked",e,!1)}function ny(t,e){$I(t,e);var n=Ja(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ry(t,e.type,n):e.hasOwnProperty("defaultValue")&&ry(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function AB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ry(t,e,n){(e!=="number"||im(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lu=Array.isArray;function Fl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ja(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(lu(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ja(n)}}function ZI(t,e){var n=Ja(e.value),r=Ja(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ih,XI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ih=Ih||document.createElement("div"),Ih.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ih.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Cu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fQ=["Webkit","ms","Moz","O"];Object.keys(Cu).forEach(function(t){fQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Cu[e]=Cu[t]})});function YI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Cu.hasOwnProperty(t)&&Cu[t]?(""+e).trim():e+"px"}function e1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=YI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var mQ=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ay(t,e){if(e){if(mQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function oy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ay=null;function av(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ly=null,Ql=null,Pl=null;function uB(t){if(t=Pd(t)){if(typeof ly!="function")throw Error(le(280));var e=t.stateNode;e&&(e=yg(e),ly(t.stateNode,t.type,e))}}function t1(t){Ql?Pl?Pl.push(t):Pl=[t]:Ql=t}function n1(){if(Ql){var t=Ql,e=Pl;if(Pl=Ql=null,uB(t),e)for(t=0;t<e.length;t++)uB(e[t])}}function r1(t,e){return t(e)}function s1(){}var Rp=!1;function i1(t,e,n){if(Rp)return t(e,n);Rp=!0;try{return r1(t,e,n)}finally{Rp=!1,(Ql!==null||Pl!==null)&&(s1(),n1())}}function Ju(t,e){var n=t.stateNode;if(n===null)return null;var r=yg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var cy=!1;if(Vi)try{var Hc={};Object.defineProperty(Hc,"passive",{get:function(){cy=!0}}),window.addEventListener("test",Hc,Hc),window.removeEventListener("test",Hc,Hc)}catch{cy=!1}function gQ(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Eu=!1,am=null,om=!1,uy=null,pQ={onError:function(t){Eu=!0,am=t}};function yQ(t,e,n,r,s,i,o,l,u){Eu=!1,am=null,gQ.apply(pQ,arguments)}function wQ(t,e,n,r,s,i,o,l,u){if(yQ.apply(this,arguments),Eu){if(Eu){var h=am;Eu=!1,am=null}else throw Error(le(198));om||(om=!0,uy=h)}}function IA(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function a1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dB(t){if(IA(t)!==t)throw Error(le(188))}function vQ(t){var e=t.alternate;if(!e){if(e=IA(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dB(s),t;if(i===r)return dB(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function o1(t){return t=vQ(t),t!==null?A1(t):null}function A1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=A1(t);if(e!==null)return e;t=t.sibling}return null}var l1=Or.unstable_scheduleCallback,hB=Or.unstable_cancelCallback,xQ=Or.unstable_shouldYield,_Q=Or.unstable_requestPaint,Jt=Or.unstable_now,BQ=Or.unstable_getCurrentPriorityLevel,ov=Or.unstable_ImmediatePriority,c1=Or.unstable_UserBlockingPriority,Am=Or.unstable_NormalPriority,bQ=Or.unstable_LowPriority,u1=Or.unstable_IdlePriority,fg=null,$s=null;function CQ(t){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(fg,t,void 0,(t.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:TQ,EQ=Math.log,IQ=Math.LN2;function TQ(t){return t>>>=0,t===0?32:31-(EQ(t)/IQ|0)|0}var Th=64,kh=4194304;function cu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=cu(l):(i&=o,i!==0&&(r=cu(i)))}else o=n&~s,o!==0?r=cu(o):i!==0&&(r=cu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bs(e),s=1<<n,r|=t[n],e&=~s;return r}function kQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SQ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-bs(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=kQ(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function dy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d1(){var t=Th;return Th<<=1,!(Th&4194240)&&(Th=64),t}function Lp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bs(e),t[e]=n}function NQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-bs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Av(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ut=0;function h1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f1,lv,m1,g1,p1,hy=!1,Sh=[],Da=null,Ma=null,Oa=null,Xu=new Map,Yu=new Map,ba=[],UQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fB(t,e){switch(t){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":Xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(e.pointerId)}}function Vc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Pd(e),e!==null&&lv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FQ(t,e,n,r,s){switch(e){case"focusin":return Da=Vc(Da,t,e,n,r,s),!0;case"dragenter":return Ma=Vc(Ma,t,e,n,r,s),!0;case"mouseover":return Oa=Vc(Oa,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xu.set(i,Vc(Xu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yu.set(i,Vc(Yu.get(i)||null,t,e,n,r,s)),!0}return!1}function y1(t){var e=Ko(t.target);if(e!==null){var n=IA(e);if(n!==null){if(e=n.tag,e===13){if(e=a1(n),e!==null){t.blockedOn=e,p1(t.priority,function(){m1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ay=r,n.target.dispatchEvent(r),Ay=null}else return e=Pd(n),e!==null&&lv(e),t.blockedOn=n,!1;e.shift()}return!0}function mB(t,e,n){kf(t)&&n.delete(e)}function QQ(){hy=!1,Da!==null&&kf(Da)&&(Da=null),Ma!==null&&kf(Ma)&&(Ma=null),Oa!==null&&kf(Oa)&&(Oa=null),Xu.forEach(mB),Yu.forEach(mB)}function Kc(t,e){t.blockedOn===e&&(t.blockedOn=null,hy||(hy=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,QQ)))}function ed(t){function e(s){return Kc(s,t)}if(0<Sh.length){Kc(Sh[0],t);for(var n=1;n<Sh.length;n++){var r=Sh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Da!==null&&Kc(Da,t),Ma!==null&&Kc(Ma,t),Oa!==null&&Kc(Oa,t),Xu.forEach(e),Yu.forEach(e),n=0;n<ba.length;n++)r=ba[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ba.length&&(n=ba[0],n.blockedOn===null);)y1(n),n.blockedOn===null&&ba.shift()}var Rl=Ji.ReactCurrentBatchConfig,cm=!0;function PQ(t,e,n,r){var s=ut,i=Rl.transition;Rl.transition=null;try{ut=1,cv(t,e,n,r)}finally{ut=s,Rl.transition=i}}function RQ(t,e,n,r){var s=ut,i=Rl.transition;Rl.transition=null;try{ut=4,cv(t,e,n,r)}finally{ut=s,Rl.transition=i}}function cv(t,e,n,r){if(cm){var s=fy(t,e,n,r);if(s===null)qp(t,e,r,um,n),fB(t,r);else if(FQ(s,t,e,n,r))r.stopPropagation();else if(fB(t,r),e&4&&-1<UQ.indexOf(t)){for(;s!==null;){var i=Pd(s);if(i!==null&&f1(i),i=fy(t,e,n,r),i===null&&qp(t,e,r,um,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qp(t,e,r,null,n)}}var um=null;function fy(t,e,n,r){if(um=null,t=av(r),t=Ko(t),t!==null)if(e=IA(t),e===null)t=null;else if(n=e.tag,n===13){if(t=a1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return um=t,null}function w1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BQ()){case ov:return 1;case c1:return 4;case Am:case bQ:return 16;case u1:return 536870912;default:return 16}default:return 16}}var Ua=null,uv=null,Sf=null;function v1(){if(Sf)return Sf;var t,e=uv,n=e.length,r,s="value"in Ua?Ua.value:Ua.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Sf=s.slice(t,1<r?1-r:void 0)}function Nf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nh(){return!0}function gB(){return!1}function zr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nh:gB,this.isPropagationStopped=gB,this}return jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nh)},persist:function(){},isPersistent:Nh}),e}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dv=zr(yc),Qd=jt({},yc,{view:0,detail:0}),LQ=zr(Qd),jp,Dp,zc,mg=jt({},Qd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zc&&(zc&&t.type==="mousemove"?(jp=t.screenX-zc.screenX,Dp=t.screenY-zc.screenY):Dp=jp=0,zc=t),jp)},movementY:function(t){return"movementY"in t?t.movementY:Dp}}),pB=zr(mg),jQ=jt({},mg,{dataTransfer:0}),DQ=zr(jQ),MQ=jt({},Qd,{relatedTarget:0}),Mp=zr(MQ),OQ=jt({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),HQ=zr(OQ),VQ=jt({},yc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KQ=zr(VQ),zQ=jt({},yc,{data:0}),yB=zr(zQ),GQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $Q(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WQ[t])?!!e[t]:!1}function hv(){return $Q}var ZQ=jt({},Qd,{key:function(t){if(t.key){var e=GQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hv,charCode:function(t){return t.type==="keypress"?Nf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JQ=zr(ZQ),XQ=jt({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wB=zr(XQ),YQ=jt({},Qd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hv}),eP=zr(YQ),tP=jt({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),nP=zr(tP),rP=jt({},mg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sP=zr(rP),iP=[9,13,27,32],fv=Vi&&"CompositionEvent"in window,Iu=null;Vi&&"documentMode"in document&&(Iu=document.documentMode);var aP=Vi&&"TextEvent"in window&&!Iu,x1=Vi&&(!fv||Iu&&8<Iu&&11>=Iu),vB=" ",xB=!1;function _1(t,e){switch(t){case"keyup":return iP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xl=!1;function oP(t,e){switch(t){case"compositionend":return B1(e);case"keypress":return e.which!==32?null:(xB=!0,vB);case"textInput":return t=e.data,t===vB&&xB?null:t;default:return null}}function AP(t,e){if(xl)return t==="compositionend"||!fv&&_1(t,e)?(t=v1(),Sf=uv=Ua=null,xl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return x1&&e.locale!=="ko"?null:e.data;default:return null}}var lP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _B(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lP[t.type]:e==="textarea"}function b1(t,e,n,r){t1(r),e=dm(e,"onChange"),0<e.length&&(n=new dv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tu=null,td=null;function cP(t){P1(t,0)}function gg(t){var e=bl(t);if(WI(e))return t}function uP(t,e){if(t==="change")return e}var C1=!1;if(Vi){var Op;if(Vi){var Hp="oninput"in document;if(!Hp){var BB=document.createElement("div");BB.setAttribute("oninput","return;"),Hp=typeof BB.oninput=="function"}Op=Hp}else Op=!1;C1=Op&&(!document.documentMode||9<document.documentMode)}function bB(){Tu&&(Tu.detachEvent("onpropertychange",E1),td=Tu=null)}function E1(t){if(t.propertyName==="value"&&gg(td)){var e=[];b1(e,td,t,av(t)),i1(cP,e)}}function dP(t,e,n){t==="focusin"?(bB(),Tu=e,td=n,Tu.attachEvent("onpropertychange",E1)):t==="focusout"&&bB()}function hP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gg(td)}function fP(t,e){if(t==="click")return gg(e)}function mP(t,e){if(t==="input"||t==="change")return gg(e)}function gP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ts=typeof Object.is=="function"?Object.is:gP;function nd(t,e){if(Ts(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Z0.call(e,s)||!Ts(t[s],e[s]))return!1}return!0}function CB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function EB(t,e){var n=CB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CB(n)}}function I1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?I1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T1(){for(var t=window,e=im();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=im(t.document)}return e}function mv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pP(t){var e=T1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&I1(n.ownerDocument.documentElement,n)){if(r!==null&&mv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=EB(n,i);var o=EB(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yP=Vi&&"documentMode"in document&&11>=document.documentMode,_l=null,my=null,ku=null,gy=!1;function IB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gy||_l==null||_l!==im(r)||(r=_l,"selectionStart"in r&&mv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ku&&nd(ku,r)||(ku=r,r=dm(my,"onSelect"),0<r.length&&(e=new dv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_l)))}function Uh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bl={animationend:Uh("Animation","AnimationEnd"),animationiteration:Uh("Animation","AnimationIteration"),animationstart:Uh("Animation","AnimationStart"),transitionend:Uh("Transition","TransitionEnd")},Vp={},k1={};Vi&&(k1=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function pg(t){if(Vp[t])return Vp[t];if(!Bl[t])return t;var e=Bl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k1)return Vp[t]=e[n];return t}var S1=pg("animationend"),N1=pg("animationiteration"),U1=pg("animationstart"),F1=pg("transitionend"),Q1=new Map,TB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ao(t,e){Q1.set(t,e),EA(e,[t])}for(var Kp=0;Kp<TB.length;Kp++){var zp=TB[Kp],wP=zp.toLowerCase(),vP=zp[0].toUpperCase()+zp.slice(1);ao(wP,"on"+vP)}ao(S1,"onAnimationEnd");ao(N1,"onAnimationIteration");ao(U1,"onAnimationStart");ao("dblclick","onDoubleClick");ao("focusin","onFocus");ao("focusout","onBlur");ao(F1,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);EA("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));EA("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));EA("onBeforeInput",["compositionend","keypress","textInput","paste"]);EA("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));EA("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));EA("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xP=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function kB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wQ(r,e,void 0,t),t.currentTarget=null}function P1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;kB(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;kB(s,l,h),i=u}}}if(om)throw t=uy,om=!1,uy=null,t}function Bt(t,e){var n=e[xy];n===void 0&&(n=e[xy]=new Set);var r=t+"__bubble";n.has(r)||(R1(e,t,2,!1),n.add(r))}function Gp(t,e,n){var r=0;e&&(r|=4),R1(n,t,r,e)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function rd(t){if(!t[Fh]){t[Fh]=!0,VI.forEach(function(n){n!=="selectionchange"&&(xP.has(n)||Gp(n,!1,t),Gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fh]||(e[Fh]=!0,Gp("selectionchange",!1,e))}}function R1(t,e,n,r){switch(w1(e)){case 1:var s=PQ;break;case 4:s=RQ;break;default:s=cv}n=s.bind(null,e,n,t),s=void 0,!cy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ko(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}i1(function(){var h=i,m=av(n),p=[];e:{var w=Q1.get(t);if(w!==void 0){var C=dv,b=t;switch(t){case"keypress":if(Nf(n)===0)break e;case"keydown":case"keyup":C=JQ;break;case"focusin":b="focus",C=Mp;break;case"focusout":b="blur",C=Mp;break;case"beforeblur":case"afterblur":C=Mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=pB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=DQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=eP;break;case S1:case N1:case U1:C=HQ;break;case F1:C=nP;break;case"scroll":C=LQ;break;case"wheel":C=sP;break;case"copy":case"cut":case"paste":C=KQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=wB}var x=(e&4)!==0,U=!x&&t==="scroll",T=x?w!==null?w+"Capture":null:w;x=[];for(var E=h,N;E!==null;){N=E;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,T!==null&&(O=Ju(E,T),O!=null&&x.push(sd(E,O,N)))),U)break;E=E.return}0<x.length&&(w=new C(w,b,null,n,m),p.push({event:w,listeners:x}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",w&&n!==Ay&&(b=n.relatedTarget||n.fromElement)&&(Ko(b)||b[Ki]))break e;if((C||w)&&(w=m.window===m?m:(w=m.ownerDocument)?w.defaultView||w.parentWindow:window,C?(b=n.relatedTarget||n.toElement,C=h,b=b?Ko(b):null,b!==null&&(U=IA(b),b!==U||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=h),C!==b)){if(x=pB,O="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=wB,O="onPointerLeave",T="onPointerEnter",E="pointer"),U=C==null?w:bl(C),N=b==null?w:bl(b),w=new x(O,E+"leave",C,n,m),w.target=U,w.relatedTarget=N,O=null,Ko(m)===h&&(x=new x(T,E+"enter",b,n,m),x.target=N,x.relatedTarget=U,O=x),U=O,C&&b)t:{for(x=C,T=b,E=0,N=x;N;N=el(N))E++;for(N=0,O=T;O;O=el(O))N++;for(;0<E-N;)x=el(x),E--;for(;0<N-E;)T=el(T),N--;for(;E--;){if(x===T||T!==null&&x===T.alternate)break t;x=el(x),T=el(T)}x=null}else x=null;C!==null&&SB(p,w,C,x,!1),b!==null&&U!==null&&SB(p,U,b,x,!0)}}e:{if(w=h?bl(h):window,C=w.nodeName&&w.nodeName.toLowerCase(),C==="select"||C==="input"&&w.type==="file")var H=uP;else if(_B(w))if(C1)H=mP;else{H=hP;var M=dP}else(C=w.nodeName)&&C.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(H=fP);if(H&&(H=H(t,h))){b1(p,H,n,m);break e}M&&M(t,w,h),t==="focusout"&&(M=w._wrapperState)&&M.controlled&&w.type==="number"&&ry(w,"number",w.value)}switch(M=h?bl(h):window,t){case"focusin":(_B(M)||M.contentEditable==="true")&&(_l=M,my=h,ku=null);break;case"focusout":ku=my=_l=null;break;case"mousedown":gy=!0;break;case"contextmenu":case"mouseup":case"dragend":gy=!1,IB(p,n,m);break;case"selectionchange":if(yP)break;case"keydown":case"keyup":IB(p,n,m)}var I;if(fv)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else xl?_1(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(x1&&n.locale!=="ko"&&(xl||B!=="onCompositionStart"?B==="onCompositionEnd"&&xl&&(I=v1()):(Ua=m,uv="value"in Ua?Ua.value:Ua.textContent,xl=!0)),M=dm(h,B),0<M.length&&(B=new yB(B,t,null,n,m),p.push({event:B,listeners:M}),I?B.data=I:(I=B1(n),I!==null&&(B.data=I)))),(I=aP?oP(t,n):AP(t,n))&&(h=dm(h,"onBeforeInput"),0<h.length&&(m=new yB("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=I))}P1(p,e)})}function sd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ju(t,n),i!=null&&r.unshift(sd(t,i,s)),i=Ju(t,e),i!=null&&r.push(sd(t,i,s))),t=t.return}return r}function el(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SB(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Ju(n,i),u!=null&&o.unshift(sd(n,u,l))):s||(u=Ju(n,i),u!=null&&o.push(sd(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _P=/\r\n?/g,BP=/\u0000|\uFFFD/g;function NB(t){return(typeof t=="string"?t:""+t).replace(_P,`
`).replace(BP,"")}function Qh(t,e,n){if(e=NB(e),NB(t)!==e&&n)throw Error(le(425))}function hm(){}var py=null,yy=null;function wy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vy=typeof setTimeout=="function"?setTimeout:void 0,bP=typeof clearTimeout=="function"?clearTimeout:void 0,UB=typeof Promise=="function"?Promise:void 0,CP=typeof queueMicrotask=="function"?queueMicrotask:typeof UB<"u"?function(t){return UB.resolve(null).then(t).catch(EP)}:vy;function EP(t){setTimeout(function(){throw t})}function Wp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ed(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ed(e)}function Ha(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function FB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wc=Math.random().toString(36).slice(2),Vs="__reactFiber$"+wc,id="__reactProps$"+wc,Ki="__reactContainer$"+wc,xy="__reactEvents$"+wc,IP="__reactListeners$"+wc,TP="__reactHandles$"+wc;function Ko(t){var e=t[Vs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ki]||n[Vs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=FB(t);t!==null;){if(n=t[Vs])return n;t=FB(t)}return e}t=n,n=t.parentNode}return null}function Pd(t){return t=t[Vs]||t[Ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function yg(t){return t[id]||null}var _y=[],Cl=-1;function oo(t){return{current:t}}function bt(t){0>Cl||(t.current=_y[Cl],_y[Cl]=null,Cl--)}function pt(t,e){Cl++,_y[Cl]=t.current,t.current=e}var Xa={},zn=oo(Xa),_r=oo(!1),rA=Xa;function Wl(t,e){var n=t.type.contextTypes;if(!n)return Xa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Br(t){return t=t.childContextTypes,t!=null}function fm(){bt(_r),bt(zn)}function QB(t,e,n){if(zn.current!==Xa)throw Error(le(168));pt(zn,e),pt(_r,n)}function L1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,dQ(t)||"Unknown",s));return jt({},n,r)}function mm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xa,rA=zn.current,pt(zn,t),pt(_r,_r.current),!0}function PB(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=L1(t,e,rA),r.__reactInternalMemoizedMergedChildContext=t,bt(_r),bt(zn),pt(zn,t)):bt(_r),pt(_r,n)}var Ti=null,wg=!1,$p=!1;function j1(t){Ti===null?Ti=[t]:Ti.push(t)}function kP(t){wg=!0,j1(t)}function Ao(){if(!$p&&Ti!==null){$p=!0;var t=0,e=ut;try{var n=Ti;for(ut=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ti=null,wg=!1}catch(s){throw Ti!==null&&(Ti=Ti.slice(t+1)),l1(ov,Ao),s}finally{ut=e,$p=!1}}return null}var El=[],Il=0,gm=null,pm=0,Jr=[],Xr=0,sA=null,Ni=1,Ui="";function Qo(t,e){El[Il++]=pm,El[Il++]=gm,gm=t,pm=e}function D1(t,e,n){Jr[Xr++]=Ni,Jr[Xr++]=Ui,Jr[Xr++]=sA,sA=t;var r=Ni;t=Ui;var s=32-bs(r)-1;r&=~(1<<s),n+=1;var i=32-bs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ni=1<<32-bs(e)+s|n<<s|r,Ui=i+t}else Ni=1<<i|n<<s|r,Ui=t}function gv(t){t.return!==null&&(Qo(t,1),D1(t,1,0))}function pv(t){for(;t===gm;)gm=El[--Il],El[Il]=null,pm=El[--Il],El[Il]=null;for(;t===sA;)sA=Jr[--Xr],Jr[Xr]=null,Ui=Jr[--Xr],Jr[Xr]=null,Ni=Jr[--Xr],Jr[Xr]=null}var Dr=null,Rr=null,kt=!1,xs=null;function M1(t,e){var n=es(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function RB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=Ha(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=sA!==null?{id:Ni,overflow:Ui}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=es(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Rr=null,!0):!1;default:return!1}}function By(t){return(t.mode&1)!==0&&(t.flags&128)===0}function by(t){if(kt){var e=Rr;if(e){var n=e;if(!RB(t,e)){if(By(t))throw Error(le(418));e=Ha(n.nextSibling);var r=Dr;e&&RB(t,e)?M1(r,n):(t.flags=t.flags&-4097|2,kt=!1,Dr=t)}}else{if(By(t))throw Error(le(418));t.flags=t.flags&-4097|2,kt=!1,Dr=t}}}function LB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function Ph(t){if(t!==Dr)return!1;if(!kt)return LB(t),kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wy(t.type,t.memoizedProps)),e&&(e=Rr)){if(By(t))throw O1(),Error(le(418));for(;e;)M1(t,e),e=Ha(e.nextSibling)}if(LB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rr=Ha(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rr=null}}else Rr=Dr?Ha(t.stateNode.nextSibling):null;return!0}function O1(){for(var t=Rr;t;)t=Ha(t.nextSibling)}function $l(){Rr=Dr=null,kt=!1}function yv(t){xs===null?xs=[t]:xs.push(t)}var SP=Ji.ReactCurrentBatchConfig;function Gc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Rh(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jB(t){var e=t._init;return e(t._payload)}function H1(t){function e(T,E){if(t){var N=T.deletions;N===null?(T.deletions=[E],T.flags|=16):N.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function r(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function s(T,E){return T=Ga(T,E),T.index=0,T.sibling=null,T}function i(T,E,N){return T.index=N,t?(N=T.alternate,N!==null?(N=N.index,N<E?(T.flags|=2,E):N):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,E,N,O){return E===null||E.tag!==6?(E=n0(N,T.mode,O),E.return=T,E):(E=s(E,N),E.return=T,E)}function u(T,E,N,O){var H=N.type;return H===vl?m(T,E,N.props.children,O,N.key):E!==null&&(E.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===xa&&jB(H)===E.type)?(O=s(E,N.props),O.ref=Gc(T,E,N),O.return=T,O):(O=jf(N.type,N.key,N.props,null,T.mode,O),O.ref=Gc(T,E,N),O.return=T,O)}function h(T,E,N,O){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=r0(N,T.mode,O),E.return=T,E):(E=s(E,N.children||[]),E.return=T,E)}function m(T,E,N,O,H){return E===null||E.tag!==7?(E=Jo(N,T.mode,O,H),E.return=T,E):(E=s(E,N),E.return=T,E)}function p(T,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return E=n0(""+E,T.mode,N),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ch:return N=jf(E.type,E.key,E.props,null,T.mode,N),N.ref=Gc(T,null,E),N.return=T,N;case wl:return E=r0(E,T.mode,N),E.return=T,E;case xa:var O=E._init;return p(T,O(E._payload),N)}if(lu(E)||Oc(E))return E=Jo(E,T.mode,N,null),E.return=T,E;Rh(T,E)}return null}function w(T,E,N,O){var H=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return H!==null?null:l(T,E,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ch:return N.key===H?u(T,E,N,O):null;case wl:return N.key===H?h(T,E,N,O):null;case xa:return H=N._init,w(T,E,H(N._payload),O)}if(lu(N)||Oc(N))return H!==null?null:m(T,E,N,O,null);Rh(T,N)}return null}function C(T,E,N,O,H){if(typeof O=="string"&&O!==""||typeof O=="number")return T=T.get(N)||null,l(E,T,""+O,H);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ch:return T=T.get(O.key===null?N:O.key)||null,u(E,T,O,H);case wl:return T=T.get(O.key===null?N:O.key)||null,h(E,T,O,H);case xa:var M=O._init;return C(T,E,N,M(O._payload),H)}if(lu(O)||Oc(O))return T=T.get(N)||null,m(E,T,O,H,null);Rh(E,O)}return null}function b(T,E,N,O){for(var H=null,M=null,I=E,B=E=0,S=null;I!==null&&B<N.length;B++){I.index>B?(S=I,I=null):S=I.sibling;var Q=w(T,I,N[B],O);if(Q===null){I===null&&(I=S);break}t&&I&&Q.alternate===null&&e(T,I),E=i(Q,E,B),M===null?H=Q:M.sibling=Q,M=Q,I=S}if(B===N.length)return n(T,I),kt&&Qo(T,B),H;if(I===null){for(;B<N.length;B++)I=p(T,N[B],O),I!==null&&(E=i(I,E,B),M===null?H=I:M.sibling=I,M=I);return kt&&Qo(T,B),H}for(I=r(T,I);B<N.length;B++)S=C(I,T,B,N[B],O),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?B:S.key),E=i(S,E,B),M===null?H=S:M.sibling=S,M=S);return t&&I.forEach(function(D){return e(T,D)}),kt&&Qo(T,B),H}function x(T,E,N,O){var H=Oc(N);if(typeof H!="function")throw Error(le(150));if(N=H.call(N),N==null)throw Error(le(151));for(var M=H=null,I=E,B=E=0,S=null,Q=N.next();I!==null&&!Q.done;B++,Q=N.next()){I.index>B?(S=I,I=null):S=I.sibling;var D=w(T,I,Q.value,O);if(D===null){I===null&&(I=S);break}t&&I&&D.alternate===null&&e(T,I),E=i(D,E,B),M===null?H=D:M.sibling=D,M=D,I=S}if(Q.done)return n(T,I),kt&&Qo(T,B),H;if(I===null){for(;!Q.done;B++,Q=N.next())Q=p(T,Q.value,O),Q!==null&&(E=i(Q,E,B),M===null?H=Q:M.sibling=Q,M=Q);return kt&&Qo(T,B),H}for(I=r(T,I);!Q.done;B++,Q=N.next())Q=C(I,T,B,Q.value,O),Q!==null&&(t&&Q.alternate!==null&&I.delete(Q.key===null?B:Q.key),E=i(Q,E,B),M===null?H=Q:M.sibling=Q,M=Q);return t&&I.forEach(function(K){return e(T,K)}),kt&&Qo(T,B),H}function U(T,E,N,O){if(typeof N=="object"&&N!==null&&N.type===vl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ch:e:{for(var H=N.key,M=E;M!==null;){if(M.key===H){if(H=N.type,H===vl){if(M.tag===7){n(T,M.sibling),E=s(M,N.props.children),E.return=T,T=E;break e}}else if(M.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===xa&&jB(H)===M.type){n(T,M.sibling),E=s(M,N.props),E.ref=Gc(T,M,N),E.return=T,T=E;break e}n(T,M);break}else e(T,M);M=M.sibling}N.type===vl?(E=Jo(N.props.children,T.mode,O,N.key),E.return=T,T=E):(O=jf(N.type,N.key,N.props,null,T.mode,O),O.ref=Gc(T,E,N),O.return=T,T=O)}return o(T);case wl:e:{for(M=N.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){n(T,E.sibling),E=s(E,N.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=r0(N,T.mode,O),E.return=T,T=E}return o(T);case xa:return M=N._init,U(T,E,M(N._payload),O)}if(lu(N))return b(T,E,N,O);if(Oc(N))return x(T,E,N,O);Rh(T,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,E!==null&&E.tag===6?(n(T,E.sibling),E=s(E,N),E.return=T,T=E):(n(T,E),E=n0(N,T.mode,O),E.return=T,T=E),o(T)):n(T,E)}return U}var Zl=H1(!0),V1=H1(!1),ym=oo(null),wm=null,Tl=null,wv=null;function vv(){wv=Tl=wm=null}function xv(t){var e=ym.current;bt(ym),t._currentValue=e}function Cy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ll(t,e){wm=t,wv=Tl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wr=!0),t.firstContext=null)}function ss(t){var e=t._currentValue;if(wv!==t)if(t={context:t,memoizedValue:e,next:null},Tl===null){if(wm===null)throw Error(le(308));Tl=t,wm.dependencies={lanes:0,firstContext:t}}else Tl=Tl.next=t;return e}var zo=null;function _v(t){zo===null?zo=[t]:zo.push(t)}function K1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_v(e)):(n.next=s.next,s.next=n),e.interleaved=n,zi(t,r)}function zi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _a=!1;function Bv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Va(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zi(t,n)}return s=r.interleaved,s===null?(e.next=e,_v(r)):(e.next=s.next,s.next=e),r.interleaved=e,zi(t,n)}function Uf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}function DB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vm(t,e,n,r){var s=t.updateQueue;_a=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=h=u=null,l=i;do{var w=l.lane,C=l.eventTime;if((r&w)===w){m!==null&&(m=m.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,x=l;switch(w=e,C=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(C,p,w);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,w=typeof b=="function"?b.call(C,p,w):b,w==null)break e;p=jt({},p,w);break e;case 2:_a=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,w=s.effects,w===null?s.effects=[l]:w.push(l))}else C={eventTime:C,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=C,u=p):m=m.next=C,o|=w;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;w=l,l=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);aA|=o,t.lanes=o,t.memoizedState=p}}function MB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var Rd={},Zs=oo(Rd),ad=oo(Rd),od=oo(Rd);function Go(t){if(t===Rd)throw Error(le(174));return t}function bv(t,e){switch(pt(od,e),pt(ad,t),pt(Zs,Rd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=iy(e,t)}bt(Zs),pt(Zs,e)}function Jl(){bt(Zs),bt(ad),bt(od)}function G1(t){Go(od.current);var e=Go(Zs.current),n=iy(e,t.type);e!==n&&(pt(ad,t),pt(Zs,n))}function Cv(t){ad.current===t&&(bt(Zs),bt(ad))}var Pt=oo(0);function xm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zp=[];function Ev(){for(var t=0;t<Zp.length;t++)Zp[t]._workInProgressVersionPrimary=null;Zp.length=0}var Ff=Ji.ReactCurrentDispatcher,Jp=Ji.ReactCurrentBatchConfig,iA=0,Lt=null,cn=null,vn=null,_m=!1,Su=!1,Ad=0,NP=0;function Fn(){throw Error(le(321))}function Iv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ts(t[n],e[n]))return!1;return!0}function Tv(t,e,n,r,s,i){if(iA=i,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ff.current=t===null||t.memoizedState===null?PP:RP,t=n(r,s),Su){i=0;do{if(Su=!1,Ad=0,25<=i)throw Error(le(301));i+=1,vn=cn=null,e.updateQueue=null,Ff.current=LP,t=n(r,s)}while(Su)}if(Ff.current=Bm,e=cn!==null&&cn.next!==null,iA=0,vn=cn=Lt=null,_m=!1,e)throw Error(le(300));return t}function kv(){var t=Ad!==0;return Ad=0,t}function Hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Lt.memoizedState=vn=t:vn=vn.next=t,vn}function is(){if(cn===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var e=vn===null?Lt.memoizedState:vn.next;if(e!==null)vn=e,cn=t;else{if(t===null)throw Error(le(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},vn===null?Lt.memoizedState=vn=t:vn=vn.next=t}return vn}function ld(t,e){return typeof e=="function"?e(t):e}function Xp(t){var e=is(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=cn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var m=h.lane;if((iA&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Lt.lanes|=m,aA|=m}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Ts(r,e.memoizedState)||(wr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Lt.lanes|=i,aA|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=is(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ts(i,e.memoizedState)||(wr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function q1(){}function W1(t,e){var n=Lt,r=is(),s=e(),i=!Ts(r.memoizedState,s);if(i&&(r.memoizedState=s,wr=!0),r=r.queue,Sv(J1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vn!==null&&vn.memoizedState.tag&1){if(n.flags|=2048,cd(9,Z1.bind(null,n,r,s,e),void 0,null),xn===null)throw Error(le(349));iA&30||$1(n,e,s)}return s}function $1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z1(t,e,n,r){e.value=n,e.getSnapshot=r,X1(e)&&Y1(t)}function J1(t,e,n){return n(function(){X1(e)&&Y1(t)})}function X1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ts(t,n)}catch{return!0}}function Y1(t){var e=zi(t,1);e!==null&&Cs(e,t,1,-1)}function OB(t){var e=Hs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:t},e.queue=t,t=t.dispatch=QP.bind(null,Lt,t),[e.memoizedState,t]}function cd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eT(){return is().memoizedState}function Qf(t,e,n,r){var s=Hs();Lt.flags|=t,s.memoizedState=cd(1|e,n,void 0,r===void 0?null:r)}function vg(t,e,n,r){var s=is();r=r===void 0?null:r;var i=void 0;if(cn!==null){var o=cn.memoizedState;if(i=o.destroy,r!==null&&Iv(r,o.deps)){s.memoizedState=cd(e,n,i,r);return}}Lt.flags|=t,s.memoizedState=cd(1|e,n,i,r)}function HB(t,e){return Qf(8390656,8,t,e)}function Sv(t,e){return vg(2048,8,t,e)}function tT(t,e){return vg(4,2,t,e)}function nT(t,e){return vg(4,4,t,e)}function rT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sT(t,e,n){return n=n!=null?n.concat([t]):null,vg(4,4,rT.bind(null,e,t),n)}function Nv(){}function iT(t,e){var n=is();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aT(t,e){var n=is();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oT(t,e,n){return iA&21?(Ts(n,e)||(n=d1(),Lt.lanes|=n,aA|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=n)}function UP(t,e){var n=ut;ut=n!==0&&4>n?n:4,t(!0);var r=Jp.transition;Jp.transition={};try{t(!1),e()}finally{ut=n,Jp.transition=r}}function AT(){return is().memoizedState}function FP(t,e,n){var r=za(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lT(t))cT(e,n);else if(n=K1(t,e,n,r),n!==null){var s=rr();Cs(n,t,r,s),uT(n,e,r)}}function QP(t,e,n){var r=za(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lT(t))cT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ts(l,o)){var u=e.interleaved;u===null?(s.next=s,_v(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=K1(t,e,s,r),n!==null&&(s=rr(),Cs(n,t,r,s),uT(n,e,r))}}function lT(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function cT(t,e){Su=_m=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}var Bm={readContext:ss,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},PP={readContext:ss,useCallback:function(t,e){return Hs().memoizedState=[t,e===void 0?null:e],t},useContext:ss,useEffect:HB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qf(4194308,4,rT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qf(4,2,t,e)},useMemo:function(t,e){var n=Hs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FP.bind(null,Lt,t),[r.memoizedState,t]},useRef:function(t){var e=Hs();return t={current:t},e.memoizedState=t},useState:OB,useDebugValue:Nv,useDeferredValue:function(t){return Hs().memoizedState=t},useTransition:function(){var t=OB(!1),e=t[0];return t=UP.bind(null,t[1]),Hs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Lt,s=Hs();if(kt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),xn===null)throw Error(le(349));iA&30||$1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,HB(J1.bind(null,r,i,t),[t]),r.flags|=2048,cd(9,Z1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Hs(),e=xn.identifierPrefix;if(kt){var n=Ui,r=Ni;n=(r&~(1<<32-bs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ad++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RP={readContext:ss,useCallback:iT,useContext:ss,useEffect:Sv,useImperativeHandle:sT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:aT,useReducer:Xp,useRef:eT,useState:function(){return Xp(ld)},useDebugValue:Nv,useDeferredValue:function(t){var e=is();return oT(e,cn.memoizedState,t)},useTransition:function(){var t=Xp(ld)[0],e=is().memoizedState;return[t,e]},useMutableSource:q1,useSyncExternalStore:W1,useId:AT,unstable_isNewReconciler:!1},LP={readContext:ss,useCallback:iT,useContext:ss,useEffect:Sv,useImperativeHandle:sT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:aT,useReducer:Yp,useRef:eT,useState:function(){return Yp(ld)},useDebugValue:Nv,useDeferredValue:function(t){var e=is();return cn===null?e.memoizedState=t:oT(e,cn.memoizedState,t)},useTransition:function(){var t=Yp(ld)[0],e=is().memoizedState;return[t,e]},useMutableSource:q1,useSyncExternalStore:W1,useId:AT,unstable_isNewReconciler:!1};function ws(t,e){if(t&&t.defaultProps){e=jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ey(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xg={isMounted:function(t){return(t=t._reactInternals)?IA(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rr(),s=za(t),i=ji(r,s);i.payload=e,n!=null&&(i.callback=n),e=Va(t,i,s),e!==null&&(Cs(e,t,s,r),Uf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rr(),s=za(t),i=ji(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Va(t,i,s),e!==null&&(Cs(e,t,s,r),Uf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rr(),r=za(t),s=ji(n,r);s.tag=2,e!=null&&(s.callback=e),e=Va(t,s,r),e!==null&&(Cs(e,t,r,n),Uf(e,t,r))}};function VB(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!nd(n,r)||!nd(s,i):!0}function dT(t,e,n){var r=!1,s=Xa,i=e.contextType;return typeof i=="object"&&i!==null?i=ss(i):(s=Br(e)?rA:zn.current,r=e.contextTypes,i=(r=r!=null)?Wl(t,s):Xa),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function KB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xg.enqueueReplaceState(e,e.state,null)}function Iy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ss(i):(i=Br(e)?rA:zn.current,s.context=Wl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ey(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xg.enqueueReplaceState(s,s.state,null),vm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xl(t,e){try{var n="",r=e;do n+=uQ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function e0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ty(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jP=typeof WeakMap=="function"?WeakMap:Map;function hT(t,e,n){n=ji(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cm||(Cm=!0,jy=r),Ty(t,e)},n}function fT(t,e,n){n=ji(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ty(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ty(t,e),typeof r!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=XP.bind(null,t,e,n),e.then(t,t))}function GB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qB(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ji(-1,1),e.tag=2,Va(n,e,1))),n.lanes|=1),t)}var DP=Ji.ReactCurrentOwner,wr=!1;function tr(t,e,n,r){e.child=t===null?V1(e,null,n,r):Zl(e,t.child,n,r)}function WB(t,e,n,r,s){n=n.render;var i=e.ref;return Ll(e,s),r=Tv(t,e,n,r,i,s),n=kv(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gi(t,e,s)):(kt&&n&&gv(e),e.flags|=1,tr(t,e,r,s),e.child)}function $B(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Dv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mT(t,e,i,r,s)):(t=jf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:nd,n(o,r)&&t.ref===e.ref)return Gi(t,e,s)}return e.flags|=1,t=Ga(i,r),t.ref=e.ref,t.return=e,e.child=t}function mT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(nd(i,r)&&t.ref===e.ref)if(wr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wr=!0);else return e.lanes=t.lanes,Gi(t,e,s)}return ky(t,e,n,r,s)}function gT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Sl,Pr),Pr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(Sl,Pr),Pr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pt(Sl,Pr),Pr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pt(Sl,Pr),Pr|=r;return tr(t,e,s,n),e.child}function pT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ky(t,e,n,r,s){var i=Br(n)?rA:zn.current;return i=Wl(e,i),Ll(e,s),n=Tv(t,e,n,r,i,s),r=kv(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gi(t,e,s)):(kt&&r&&gv(e),e.flags|=1,tr(t,e,n,s),e.child)}function ZB(t,e,n,r,s){if(Br(n)){var i=!0;mm(e)}else i=!1;if(Ll(e,s),e.stateNode===null)Pf(t,e),dT(e,n,r),Iy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=ss(h):(h=Br(n)?rA:zn.current,h=Wl(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&KB(e,o,r,h),_a=!1;var w=e.memoizedState;o.state=w,vm(e,r,o,s),u=e.memoizedState,l!==r||w!==u||_r.current||_a?(typeof m=="function"&&(Ey(e,n,m,r),u=e.memoizedState),(l=_a||VB(e,n,l,r,w,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,z1(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:ws(e.type,l),o.props=h,p=e.pendingProps,w=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ss(u):(u=Br(n)?rA:zn.current,u=Wl(e,u));var C=n.getDerivedStateFromProps;(m=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||w!==u)&&KB(e,o,r,u),_a=!1,w=e.memoizedState,o.state=w,vm(e,r,o,s);var b=e.memoizedState;l!==p||w!==b||_r.current||_a?(typeof C=="function"&&(Ey(e,n,C,r),b=e.memoizedState),(h=_a||VB(e,n,h,r,w,b,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Sy(t,e,n,r,i,s)}function Sy(t,e,n,r,s,i){pT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&PB(e,n,!1),Gi(t,e,i);r=e.stateNode,DP.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zl(e,t.child,null,i),e.child=Zl(e,null,l,i)):tr(t,e,l,i),e.memoizedState=r.state,s&&PB(e,n,!0),e.child}function yT(t){var e=t.stateNode;e.pendingContext?QB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&QB(t,e.context,!1),bv(t,e.containerInfo)}function JB(t,e,n,r,s){return $l(),yv(s),e.flags|=256,tr(t,e,n,r),e.child}var Ny={dehydrated:null,treeContext:null,retryLane:0};function Uy(t){return{baseLanes:t,cachePool:null,transitions:null}}function wT(t,e,n){var r=e.pendingProps,s=Pt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(Pt,s&1),t===null)return by(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bg(o,r,0,null),t=Jo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Uy(n),e.memoizedState=Ny,t):Uv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return MP(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ga(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ga(l,i):(i=Jo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Uy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ny,r}return i=t.child,t=i.sibling,r=Ga(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uv(t,e){return e=bg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lh(t,e,n,r){return r!==null&&yv(r),Zl(e,t.child,null,n),t=Uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=e0(Error(le(422))),Lh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bg({mode:"visible",children:r.children},s,0,null),i=Jo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zl(e,t.child,null,o),e.child.memoizedState=Uy(o),e.memoizedState=Ny,i);if(!(e.mode&1))return Lh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(le(419)),r=e0(i,r,void 0),Lh(t,e,o,r)}if(l=(o&t.childLanes)!==0,wr||l){if(r=xn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zi(t,s),Cs(r,t,s,-1))}return jv(),r=e0(Error(le(421))),Lh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rr=Ha(s.nextSibling),Dr=e,kt=!0,xs=null,t!==null&&(Jr[Xr++]=Ni,Jr[Xr++]=Ui,Jr[Xr++]=sA,Ni=t.id,Ui=t.overflow,sA=e),e=Uv(e,r.children),e.flags|=4096,e)}function XB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cy(t.return,e,n)}function t0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tr(t,e,r.children,n),r=Pt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XB(t,n,e);else if(t.tag===19)XB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(Pt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),t0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}t0(e,!0,n,null,i);break;case"together":t0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),aA|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=Ga(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ga(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OP(t,e,n){switch(e.tag){case 3:yT(e),$l();break;case 5:G1(e);break;case 1:Br(e.type)&&mm(e);break;case 4:bv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pt(ym,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(Pt,Pt.current&1),e.flags|=128,null):n&e.child.childLanes?wT(t,e,n):(pt(Pt,Pt.current&1),t=Gi(t,e,n),t!==null?t.sibling:null);pt(Pt,Pt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(Pt,Pt.current),r)break;return null;case 22:case 23:return e.lanes=0,gT(t,e,n)}return Gi(t,e,n)}var xT,Fy,_T,BT;xT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fy=function(){};_T=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Go(Zs.current);var i=null;switch(n){case"input":s=ty(t,s),r=ty(t,r),i=[];break;case"select":s=jt({},s,{value:void 0}),r=jt({},r,{value:void 0}),i=[];break;case"textarea":s=sy(t,s),r=sy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hm)}ay(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&($u.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&($u.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Bt("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};BT=function(t,e,n,r){n!==r&&(e.flags|=4)};function qc(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HP(t,e,n){var r=e.pendingProps;switch(pv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(e),null;case 1:return Br(e.type)&&fm(),Qn(e),null;case 3:return r=e.stateNode,Jl(),bt(_r),bt(zn),Ev(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ph(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(Oy(xs),xs=null))),Fy(t,e),Qn(e),null;case 5:Cv(e);var s=Go(od.current);if(n=e.type,t!==null&&e.stateNode!=null)_T(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return Qn(e),null}if(t=Go(Zs.current),Ph(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vs]=e,r[id]=i,t=(e.mode&1)!==0,n){case"dialog":Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":case"embed":Bt("load",r);break;case"video":case"audio":for(s=0;s<uu.length;s++)Bt(uu[s],r);break;case"source":Bt("error",r);break;case"img":case"image":case"link":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"input":oB(r,i),Bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",r);break;case"textarea":lB(r,i),Bt("invalid",r)}ay(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Qh(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Qh(r.textContent,l,t),s=["children",""+l]):$u.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Bt("scroll",r)}switch(n){case"input":Eh(r),AB(r,i,!0);break;case"textarea":Eh(r),cB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vs]=e,t[id]=r,xT(t,e,!1,!1),e.stateNode=t;e:{switch(o=oy(n,r),n){case"dialog":Bt("cancel",t),Bt("close",t),s=r;break;case"iframe":case"object":case"embed":Bt("load",t),s=r;break;case"video":case"audio":for(s=0;s<uu.length;s++)Bt(uu[s],t);s=r;break;case"source":Bt("error",t),s=r;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),s=r;break;case"details":Bt("toggle",t),s=r;break;case"input":oB(t,r),s=ty(t,r),Bt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=jt({},r,{value:void 0}),Bt("invalid",t);break;case"textarea":lB(t,r),s=sy(t,r),Bt("invalid",t);break;default:s=r}ay(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?e1(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&XI(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Zu(t,u):typeof u=="number"&&Zu(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($u.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Bt("scroll",t):u!=null&&nv(t,i,u,o))}switch(n){case"input":Eh(t),AB(t,r,!1);break;case"textarea":Eh(t),cB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ja(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Fl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Fl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=hm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qn(e),null;case 6:if(t&&e.stateNode!=null)BT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Go(od.current),Go(Zs.current),Ph(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vs]=e,(i=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:Qh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vs]=e,e.stateNode=r}return Qn(e),null;case 13:if(bt(Pt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kt&&Rr!==null&&e.mode&1&&!(e.flags&128))O1(),$l(),e.flags|=98560,i=!1;else if(i=Ph(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[Vs]=e}else $l(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qn(e),i=!1}else xs!==null&&(Oy(xs),xs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?dn===0&&(dn=3):jv())),e.updateQueue!==null&&(e.flags|=4),Qn(e),null);case 4:return Jl(),Fy(t,e),t===null&&rd(e.stateNode.containerInfo),Qn(e),null;case 10:return xv(e.type._context),Qn(e),null;case 17:return Br(e.type)&&fm(),Qn(e),null;case 19:if(bt(Pt),i=e.memoizedState,i===null)return Qn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qc(i,!1);else{if(dn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xm(t),o!==null){for(e.flags|=128,qc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(Pt,Pt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Jt()>Yl&&(e.flags|=128,r=!0,qc(i,!1),e.lanes=4194304)}else{if(!r)if(t=xm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!kt)return Qn(e),null}else 2*Jt()-i.renderingStartTime>Yl&&n!==1073741824&&(e.flags|=128,r=!0,qc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Jt(),e.sibling=null,n=Pt.current,pt(Pt,r?n&1|2:n&1),e):(Qn(e),null);case 22:case 23:return Lv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pr&1073741824&&(Qn(e),e.subtreeFlags&6&&(e.flags|=8192)):Qn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function VP(t,e){switch(pv(e),e.tag){case 1:return Br(e.type)&&fm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jl(),bt(_r),bt(zn),Ev(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cv(e),null;case 13:if(bt(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));$l()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(Pt),null;case 4:return Jl(),null;case 10:return xv(e.type._context),null;case 22:case 23:return Lv(),null;case 24:return null;default:return null}}var jh=!1,Dn=!1,KP=typeof WeakSet=="function"?WeakSet:Set,_e=null;function kl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(t,e,r)}else n.current=null}function Qy(t,e,n){try{n()}catch(r){Ht(t,e,r)}}var YB=!1;function zP(t,e){if(py=cm,t=T1(),mv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,m=0,p=t,w=null;t:for(;;){for(var C;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(C=p.firstChild)!==null;)w=p,p=C;for(;;){if(p===t)break t;if(w===n&&++h===s&&(l=o),w===i&&++m===r&&(u=o),(C=p.nextSibling)!==null)break;p=w,w=p.parentNode}p=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yy={focusedElem:t,selectionRange:n},cm=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,U=b.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?x:ws(e.type,x),U);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(O){Ht(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return b=YB,YB=!1,b}function Nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Qy(e,n,i)}s=s.next}while(s!==r)}}function _g(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Py(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bT(t){var e=t.alternate;e!==null&&(t.alternate=null,bT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vs],delete e[id],delete e[xy],delete e[IP],delete e[TP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CT(t){return t.tag===5||t.tag===3||t.tag===4}function eb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ry(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hm));else if(r!==4&&(t=t.child,t!==null))for(Ry(t,e,n),t=t.sibling;t!==null;)Ry(t,e,n),t=t.sibling}function Ly(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ly(t,e,n),t=t.sibling;t!==null;)Ly(t,e,n),t=t.sibling}var bn=null,vs=!1;function ma(t,e,n){for(n=n.child;n!==null;)ET(t,e,n),n=n.sibling}function ET(t,e,n){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(fg,n)}catch{}switch(n.tag){case 5:Dn||kl(n,e);case 6:var r=bn,s=vs;bn=null,ma(t,e,n),bn=r,vs=s,bn!==null&&(vs?(t=bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bn.removeChild(n.stateNode));break;case 18:bn!==null&&(vs?(t=bn,n=n.stateNode,t.nodeType===8?Wp(t.parentNode,n):t.nodeType===1&&Wp(t,n),ed(t)):Wp(bn,n.stateNode));break;case 4:r=bn,s=vs,bn=n.stateNode.containerInfo,vs=!0,ma(t,e,n),bn=r,vs=s;break;case 0:case 11:case 14:case 15:if(!Dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Qy(n,e,o),s=s.next}while(s!==r)}ma(t,e,n);break;case 1:if(!Dn&&(kl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ht(n,e,l)}ma(t,e,n);break;case 21:ma(t,e,n);break;case 22:n.mode&1?(Dn=(r=Dn)||n.memoizedState!==null,ma(t,e,n),Dn=r):ma(t,e,n);break;default:ma(t,e,n)}}function tb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KP),e.forEach(function(r){var s=e4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ps(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:bn=l.stateNode,vs=!1;break e;case 3:bn=l.stateNode.containerInfo,vs=!0;break e;case 4:bn=l.stateNode.containerInfo,vs=!0;break e}l=l.return}if(bn===null)throw Error(le(160));ET(i,o,s),bn=null,vs=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ht(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IT(e,t),e=e.sibling}function IT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ps(e,t),Ms(t),r&4){try{Nu(3,t,t.return),_g(3,t)}catch(x){Ht(t,t.return,x)}try{Nu(5,t,t.return)}catch(x){Ht(t,t.return,x)}}break;case 1:ps(e,t),Ms(t),r&512&&n!==null&&kl(n,n.return);break;case 5:if(ps(e,t),Ms(t),r&512&&n!==null&&kl(n,n.return),t.flags&32){var s=t.stateNode;try{Zu(s,"")}catch(x){Ht(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$I(s,i),oy(l,o);var h=oy(l,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?e1(s,p):m==="dangerouslySetInnerHTML"?XI(s,p):m==="children"?Zu(s,p):nv(s,m,p,h)}switch(l){case"input":ny(s,i);break;case"textarea":ZI(s,i);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?Fl(s,!!i.multiple,C,!1):w!==!!i.multiple&&(i.defaultValue!=null?Fl(s,!!i.multiple,i.defaultValue,!0):Fl(s,!!i.multiple,i.multiple?[]:"",!1))}s[id]=i}catch(x){Ht(t,t.return,x)}}break;case 6:if(ps(e,t),Ms(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Ht(t,t.return,x)}}break;case 3:if(ps(e,t),Ms(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ed(e.containerInfo)}catch(x){Ht(t,t.return,x)}break;case 4:ps(e,t),Ms(t);break;case 13:ps(e,t),Ms(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pv=Jt())),r&4&&tb(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Dn=(h=Dn)||m,ps(e,t),Dn=h):ps(e,t),Ms(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(_e=t,m=t.child;m!==null;){for(p=_e=m;_e!==null;){switch(w=_e,C=w.child,w.tag){case 0:case 11:case 14:case 15:Nu(4,w,w.return);break;case 1:kl(w,w.return);var b=w.stateNode;if(typeof b.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){Ht(r,n,x)}}break;case 5:kl(w,w.return);break;case 22:if(w.memoizedState!==null){rb(p);continue}}C!==null?(C.return=w,_e=C):rb(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=YI("display",o))}catch(x){Ht(t,t.return,x)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(x){Ht(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ps(e,t),Ms(t),r&4&&tb(t);break;case 21:break;default:ps(e,t),Ms(t)}}function Ms(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CT(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Zu(s,""),r.flags&=-33);var i=eb(t);Ly(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=eb(t);Ry(t,l,o);break;default:throw Error(le(161))}}catch(u){Ht(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GP(t,e,n){_e=t,TT(t)}function TT(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||jh;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Dn;l=jh;var h=Dn;if(jh=o,(Dn=u)&&!h)for(_e=s;_e!==null;)o=_e,u=o.child,o.tag===22&&o.memoizedState!==null?sb(s):u!==null?(u.return=o,_e=u):sb(s);for(;i!==null;)_e=i,TT(i),i=i.sibling;_e=s,jh=l,Dn=h}nb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):nb(t)}}function nb(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||_g(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ws(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&MB(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}MB(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&ed(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Dn||e.flags&512&&Py(e)}catch(w){Ht(e,e.return,w)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function rb(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function sb(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_g(4,e)}catch(u){Ht(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ht(e,s,u)}}var i=e.return;try{Py(e)}catch(u){Ht(e,i,u)}break;case 5:var o=e.return;try{Py(e)}catch(u){Ht(e,o,u)}}}catch(u){Ht(e,e.return,u)}if(e===t){_e=null;break}var l=e.sibling;if(l!==null){l.return=e.return,_e=l;break}_e=e.return}}var qP=Math.ceil,bm=Ji.ReactCurrentDispatcher,Fv=Ji.ReactCurrentOwner,rs=Ji.ReactCurrentBatchConfig,nt=0,xn=null,an=null,Tn=0,Pr=0,Sl=oo(0),dn=0,ud=null,aA=0,Bg=0,Qv=0,Uu=null,pr=null,Pv=0,Yl=1/0,Ei=null,Cm=!1,jy=null,Ka=null,Dh=!1,Fa=null,Em=0,Fu=0,Dy=null,Rf=-1,Lf=0;function rr(){return nt&6?Jt():Rf!==-1?Rf:Rf=Jt()}function za(t){return t.mode&1?nt&2&&Tn!==0?Tn&-Tn:SP.transition!==null?(Lf===0&&(Lf=d1()),Lf):(t=ut,t!==0||(t=window.event,t=t===void 0?16:w1(t.type)),t):1}function Cs(t,e,n,r){if(50<Fu)throw Fu=0,Dy=null,Error(le(185));Fd(t,n,r),(!(nt&2)||t!==xn)&&(t===xn&&(!(nt&2)&&(Bg|=n),dn===4&&Ca(t,Tn)),br(t,r),n===1&&nt===0&&!(e.mode&1)&&(Yl=Jt()+500,wg&&Ao()))}function br(t,e){var n=t.callbackNode;SQ(t,e);var r=lm(t,t===xn?Tn:0);if(r===0)n!==null&&hB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hB(n),e===1)t.tag===0?kP(ib.bind(null,t)):j1(ib.bind(null,t)),CP(function(){!(nt&6)&&Ao()}),n=null;else{switch(h1(r)){case 1:n=ov;break;case 4:n=c1;break;case 16:n=Am;break;case 536870912:n=u1;break;default:n=Am}n=RT(n,kT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kT(t,e){if(Rf=-1,Lf=0,nt&6)throw Error(le(327));var n=t.callbackNode;if(jl()&&t.callbackNode!==n)return null;var r=lm(t,t===xn?Tn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Im(t,r);else{e=r;var s=nt;nt|=2;var i=NT();(xn!==t||Tn!==e)&&(Ei=null,Yl=Jt()+500,Zo(t,e));do try{ZP();break}catch(l){ST(t,l)}while(!0);vv(),bm.current=i,nt=s,an!==null?e=0:(xn=null,Tn=0,e=dn)}if(e!==0){if(e===2&&(s=dy(t),s!==0&&(r=s,e=My(t,s))),e===1)throw n=ud,Zo(t,0),Ca(t,r),br(t,Jt()),n;if(e===6)Ca(t,r);else{if(s=t.current.alternate,!(r&30)&&!WP(s)&&(e=Im(t,r),e===2&&(i=dy(t),i!==0&&(r=i,e=My(t,i))),e===1))throw n=ud,Zo(t,0),Ca(t,r),br(t,Jt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Po(t,pr,Ei);break;case 3:if(Ca(t,r),(r&130023424)===r&&(e=Pv+500-Jt(),10<e)){if(lm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){rr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vy(Po.bind(null,t,pr,Ei),e);break}Po(t,pr,Ei);break;case 4:if(Ca(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-bs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qP(r/1960))-r,10<r){t.timeoutHandle=vy(Po.bind(null,t,pr,Ei),r);break}Po(t,pr,Ei);break;case 5:Po(t,pr,Ei);break;default:throw Error(le(329))}}}return br(t,Jt()),t.callbackNode===n?kT.bind(null,t):null}function My(t,e){var n=Uu;return t.current.memoizedState.isDehydrated&&(Zo(t,e).flags|=256),t=Im(t,e),t!==2&&(e=pr,pr=n,e!==null&&Oy(e)),t}function Oy(t){pr===null?pr=t:pr.push.apply(pr,t)}function WP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ts(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ca(t,e){for(e&=~Qv,e&=~Bg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bs(e),r=1<<n;t[n]=-1,e&=~r}}function ib(t){if(nt&6)throw Error(le(327));jl();var e=lm(t,0);if(!(e&1))return br(t,Jt()),null;var n=Im(t,e);if(t.tag!==0&&n===2){var r=dy(t);r!==0&&(e=r,n=My(t,r))}if(n===1)throw n=ud,Zo(t,0),Ca(t,e),br(t,Jt()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Po(t,pr,Ei),br(t,Jt()),null}function Rv(t,e){var n=nt;nt|=1;try{return t(e)}finally{nt=n,nt===0&&(Yl=Jt()+500,wg&&Ao())}}function oA(t){Fa!==null&&Fa.tag===0&&!(nt&6)&&jl();var e=nt;nt|=1;var n=rs.transition,r=ut;try{if(rs.transition=null,ut=1,t)return t()}finally{ut=r,rs.transition=n,nt=e,!(nt&6)&&Ao()}}function Lv(){Pr=Sl.current,bt(Sl)}function Zo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bP(n)),an!==null)for(n=an.return;n!==null;){var r=n;switch(pv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fm();break;case 3:Jl(),bt(_r),bt(zn),Ev();break;case 5:Cv(r);break;case 4:Jl();break;case 13:bt(Pt);break;case 19:bt(Pt);break;case 10:xv(r.type._context);break;case 22:case 23:Lv()}n=n.return}if(xn=t,an=t=Ga(t.current,null),Tn=Pr=e,dn=0,ud=null,Qv=Bg=aA=0,pr=Uu=null,zo!==null){for(e=0;e<zo.length;e++)if(n=zo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zo=null}return t}function ST(t,e){do{var n=an;try{if(vv(),Ff.current=Bm,_m){for(var r=Lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_m=!1}if(iA=0,vn=cn=Lt=null,Su=!1,Ad=0,Fv.current=null,n===null||n.return===null){dn=1,ud=e,an=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Tn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=l,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var w=m.alternate;w?(m.updateQueue=w.updateQueue,m.memoizedState=w.memoizedState,m.lanes=w.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=GB(o);if(C!==null){C.flags&=-257,qB(C,o,l,i,e),C.mode&1&&zB(i,h,e),e=C,u=h;var b=e.updateQueue;if(b===null){var x=new Set;x.add(u),e.updateQueue=x}else b.add(u);break e}else{if(!(e&1)){zB(i,h,e),jv();break e}u=Error(le(426))}}else if(kt&&l.mode&1){var U=GB(o);if(U!==null){!(U.flags&65536)&&(U.flags|=256),qB(U,o,l,i,e),yv(Xl(u,l));break e}}i=u=Xl(u,l),dn!==4&&(dn=2),Uu===null?Uu=[i]:Uu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=hT(i,u,e);DB(i,T);break e;case 1:l=u;var E=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ka===null||!Ka.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=fT(i,l,e);DB(i,O);break e}}i=i.return}while(i!==null)}FT(n)}catch(H){e=H,an===n&&n!==null&&(an=n=n.return);continue}break}while(!0)}function NT(){var t=bm.current;return bm.current=Bm,t===null?Bm:t}function jv(){(dn===0||dn===3||dn===2)&&(dn=4),xn===null||!(aA&268435455)&&!(Bg&268435455)||Ca(xn,Tn)}function Im(t,e){var n=nt;nt|=2;var r=NT();(xn!==t||Tn!==e)&&(Ei=null,Zo(t,e));do try{$P();break}catch(s){ST(t,s)}while(!0);if(vv(),nt=n,bm.current=r,an!==null)throw Error(le(261));return xn=null,Tn=0,dn}function $P(){for(;an!==null;)UT(an)}function ZP(){for(;an!==null&&!xQ();)UT(an)}function UT(t){var e=PT(t.alternate,t,Pr);t.memoizedProps=t.pendingProps,e===null?FT(t):an=e,Fv.current=null}function FT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VP(n,e),n!==null){n.flags&=32767,an=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dn=6,an=null;return}}else if(n=HP(n,e,Pr),n!==null){an=n;return}if(e=e.sibling,e!==null){an=e;return}an=e=t}while(e!==null);dn===0&&(dn=5)}function Po(t,e,n){var r=ut,s=rs.transition;try{rs.transition=null,ut=1,JP(t,e,n,r)}finally{rs.transition=s,ut=r}return null}function JP(t,e,n,r){do jl();while(Fa!==null);if(nt&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(NQ(t,i),t===xn&&(an=xn=null,Tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dh||(Dh=!0,RT(Am,function(){return jl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rs.transition,rs.transition=null;var o=ut;ut=1;var l=nt;nt|=4,Fv.current=null,zP(t,n),IT(n,t),pP(yy),cm=!!py,yy=py=null,t.current=n,GP(n),_Q(),nt=l,ut=o,rs.transition=i}else t.current=n;if(Dh&&(Dh=!1,Fa=t,Em=s),i=t.pendingLanes,i===0&&(Ka=null),CQ(n.stateNode),br(t,Jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cm)throw Cm=!1,t=jy,jy=null,t;return Em&1&&t.tag!==0&&jl(),i=t.pendingLanes,i&1?t===Dy?Fu++:(Fu=0,Dy=t):Fu=0,Ao(),null}function jl(){if(Fa!==null){var t=h1(Em),e=rs.transition,n=ut;try{if(rs.transition=null,ut=16>t?16:t,Fa===null)var r=!1;else{if(t=Fa,Fa=null,Em=0,nt&6)throw Error(le(331));var s=nt;for(nt|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(_e=h;_e!==null;){var m=_e;switch(m.tag){case 0:case 11:case 15:Nu(8,m,i)}var p=m.child;if(p!==null)p.return=m,_e=p;else for(;_e!==null;){m=_e;var w=m.sibling,C=m.return;if(bT(m),m===h){_e=null;break}if(w!==null){w.return=C,_e=w;break}_e=C}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var U=x.sibling;x.sibling=null,x=U}while(x!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nu(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,_e=T;break e}_e=i.return}}var E=t.current;for(_e=E;_e!==null;){o=_e;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,_e=N;else e:for(o=E;_e!==null;){if(l=_e,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_g(9,l)}}catch(H){Ht(l,l.return,H)}if(l===o){_e=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,_e=O;break e}_e=l.return}}if(nt=s,Ao(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(fg,t)}catch{}r=!0}return r}finally{ut=n,rs.transition=e}}return!1}function ab(t,e,n){e=Xl(n,e),e=hT(t,e,1),t=Va(t,e,1),e=rr(),t!==null&&(Fd(t,1,e),br(t,e))}function Ht(t,e,n){if(t.tag===3)ab(t,t,n);else for(;e!==null;){if(e.tag===3){ab(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ka===null||!Ka.has(r))){t=Xl(n,t),t=fT(e,t,1),e=Va(e,t,1),t=rr(),e!==null&&(Fd(e,1,t),br(e,t));break}}e=e.return}}function XP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&n,xn===t&&(Tn&n)===n&&(dn===4||dn===3&&(Tn&130023424)===Tn&&500>Jt()-Pv?Zo(t,0):Qv|=n),br(t,e)}function QT(t,e){e===0&&(t.mode&1?(e=kh,kh<<=1,!(kh&130023424)&&(kh=4194304)):e=1);var n=rr();t=zi(t,e),t!==null&&(Fd(t,e,n),br(t,n))}function YP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),QT(t,n)}function e4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),QT(t,n)}var PT;PT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_r.current)wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wr=!1,OP(t,e,n);wr=!!(t.flags&131072)}else wr=!1,kt&&e.flags&1048576&&D1(e,pm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pf(t,e),t=e.pendingProps;var s=Wl(e,zn.current);Ll(e,n),s=Tv(null,e,r,t,s,n);var i=kv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Br(r)?(i=!0,mm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bv(e),s.updater=xg,e.stateNode=s,s._reactInternals=e,Iy(e,r,t,n),e=Sy(null,e,r,!0,i,n)):(e.tag=0,kt&&i&&gv(e),tr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=n4(r),t=ws(r,t),s){case 0:e=ky(null,e,r,t,n);break e;case 1:e=ZB(null,e,r,t,n);break e;case 11:e=WB(null,e,r,t,n);break e;case 14:e=$B(null,e,r,ws(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ws(r,s),ky(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ws(r,s),ZB(t,e,r,s,n);case 3:e:{if(yT(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,z1(t,e),vm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Xl(Error(le(423)),e),e=JB(t,e,r,n,s);break e}else if(r!==s){s=Xl(Error(le(424)),e),e=JB(t,e,r,n,s);break e}else for(Rr=Ha(e.stateNode.containerInfo.firstChild),Dr=e,kt=!0,xs=null,n=V1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($l(),r===s){e=Gi(t,e,n);break e}tr(t,e,r,n)}e=e.child}return e;case 5:return G1(e),t===null&&by(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,wy(r,s)?o=null:i!==null&&wy(r,i)&&(e.flags|=32),pT(t,e),tr(t,e,o,n),e.child;case 6:return t===null&&by(e),null;case 13:return wT(t,e,n);case 4:return bv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zl(e,null,r,n):tr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ws(r,s),WB(t,e,r,s,n);case 7:return tr(t,e,e.pendingProps,n),e.child;case 8:return tr(t,e,e.pendingProps.children,n),e.child;case 12:return tr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pt(ym,r._currentValue),r._currentValue=o,i!==null)if(Ts(i.value,o)){if(i.children===s.children&&!_r.current){e=Gi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=ji(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Cy(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cy(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ll(e,n),s=ss(s),r=r(s),e.flags|=1,tr(t,e,r,n),e.child;case 14:return r=e.type,s=ws(r,e.pendingProps),s=ws(r.type,s),$B(t,e,r,s,n);case 15:return mT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ws(r,s),Pf(t,e),e.tag=1,Br(r)?(t=!0,mm(e)):t=!1,Ll(e,n),dT(e,r,s),Iy(e,r,s,n),Sy(null,e,r,!0,t,n);case 19:return vT(t,e,n);case 22:return gT(t,e,n)}throw Error(le(156,e.tag))};function RT(t,e){return l1(t,e)}function t4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(t,e,n,r){return new t4(t,e,n,r)}function Dv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n4(t){if(typeof t=="function")return Dv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sv)return 11;if(t===iv)return 14}return 2}function Ga(t,e){var n=t.alternate;return n===null?(n=es(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Dv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vl:return Jo(n.children,s,i,e);case rv:o=8,s|=8;break;case J0:return t=es(12,n,e,s|2),t.elementType=J0,t.lanes=i,t;case X0:return t=es(13,n,e,s),t.elementType=X0,t.lanes=i,t;case Y0:return t=es(19,n,e,s),t.elementType=Y0,t.lanes=i,t;case GI:return bg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case KI:o=10;break e;case zI:o=9;break e;case sv:o=11;break e;case iv:o=14;break e;case xa:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=es(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jo(t,e,n,r){return t=es(7,t,r,e),t.lanes=n,t}function bg(t,e,n,r){return t=es(22,t,r,e),t.elementType=GI,t.lanes=n,t.stateNode={isHidden:!1},t}function n0(t,e,n){return t=es(6,t,null,e),t.lanes=n,t}function r0(t,e,n){return e=es(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lp(0),this.expirationTimes=Lp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mv(t,e,n,r,s,i,o,l,u){return t=new r4(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=es(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bv(i),t}function s4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LT(t){if(!t)return Xa;t=t._reactInternals;e:{if(IA(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Br(n))return L1(t,n,e)}return e}function jT(t,e,n,r,s,i,o,l,u){return t=Mv(n,r,!0,t,s,i,o,l,u),t.context=LT(null),n=t.current,r=rr(),s=za(n),i=ji(r,s),i.callback=e??null,Va(n,i,s),t.current.lanes=s,Fd(t,s,r),br(t,r),t}function Cg(t,e,n,r){var s=e.current,i=rr(),o=za(s);return n=LT(n),e.context===null?e.context=n:e.pendingContext=n,e=ji(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Va(s,e,o),t!==null&&(Cs(t,s,o,i),Uf(t,s,o)),o}function Tm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ob(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ov(t,e){ob(t,e),(t=t.alternate)&&ob(t,e)}function i4(){return null}var DT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hv(t){this._internalRoot=t}Eg.prototype.render=Hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Cg(t,e,null,null)};Eg.prototype.unmount=Hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oA(function(){Cg(null,t,null,null)}),e[Ki]=null}};function Eg(t){this._internalRoot=t}Eg.prototype.unstable_scheduleHydration=function(t){if(t){var e=g1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ba.length&&e!==0&&e<ba[n].priority;n++);ba.splice(n,0,t),n===0&&y1(t)}};function Vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ig(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ab(){}function a4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Tm(o);i.call(h)}}var o=jT(e,r,t,0,null,!1,!1,"",Ab);return t._reactRootContainer=o,t[Ki]=o.current,rd(t.nodeType===8?t.parentNode:t),oA(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Tm(u);l.call(h)}}var u=Mv(t,0,!1,null,null,!1,!1,"",Ab);return t._reactRootContainer=u,t[Ki]=u.current,rd(t.nodeType===8?t.parentNode:t),oA(function(){Cg(e,u,n,r)}),u}function Tg(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Tm(o);l.call(u)}}Cg(e,o,t,s)}else o=a4(n,e,t,s,r);return Tm(o)}f1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cu(e.pendingLanes);n!==0&&(Av(e,n|1),br(e,Jt()),!(nt&6)&&(Yl=Jt()+500,Ao()))}break;case 13:oA(function(){var r=zi(t,1);if(r!==null){var s=rr();Cs(r,t,1,s)}}),Ov(t,1)}};lv=function(t){if(t.tag===13){var e=zi(t,134217728);if(e!==null){var n=rr();Cs(e,t,134217728,n)}Ov(t,134217728)}};m1=function(t){if(t.tag===13){var e=za(t),n=zi(t,e);if(n!==null){var r=rr();Cs(n,t,e,r)}Ov(t,e)}};g1=function(){return ut};p1=function(t,e){var n=ut;try{return ut=t,e()}finally{ut=n}};ly=function(t,e,n){switch(e){case"input":if(ny(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yg(r);if(!s)throw Error(le(90));WI(r),ny(r,s)}}}break;case"textarea":ZI(t,n);break;case"select":e=n.value,e!=null&&Fl(t,!!n.multiple,e,!1)}};r1=Rv;s1=oA;var o4={usingClientEntryPoint:!1,Events:[Pd,bl,yg,t1,n1,Rv]},Wc={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A4={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o1(t),t===null?null:t.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||i4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{fg=Mh.inject(A4),$s=Mh}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o4;Kr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(e))throw Error(le(200));return s4(t,e,null,n)};Kr.createRoot=function(t,e){if(!Vv(t))throw Error(le(299));var n=!1,r="",s=DT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mv(t,1,!1,null,null,n,!1,r,s),t[Ki]=e.current,rd(t.nodeType===8?t.parentNode:t),new Hv(e)};Kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=o1(e),t=t===null?null:t.stateNode,t};Kr.flushSync=function(t){return oA(t)};Kr.hydrate=function(t,e,n){if(!Ig(e))throw Error(le(200));return Tg(null,t,e,!0,n)};Kr.hydrateRoot=function(t,e,n){if(!Vv(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=DT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jT(e,null,t,1,n??null,s,!1,i,o),t[Ki]=e.current,rd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eg(e)};Kr.render=function(t,e,n){if(!Ig(e))throw Error(le(200));return Tg(null,t,e,!1,n)};Kr.unmountComponentAtNode=function(t){if(!Ig(t))throw Error(le(40));return t._reactRootContainer?(oA(function(){Tg(null,null,t,!1,function(){t._reactRootContainer=null,t[Ki]=null})}),!0):!1};Kr.unstable_batchedUpdates=Rv;Kr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ig(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Tg(t,e,n,!1,r)};Kr.version="18.3.1-next-f1338f8080-20240426";function MT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MT)}catch(t){console.error(t)}}MT(),MI.exports=Kr;var OT=MI.exports,lb=OT;$0.createRoot=lb.createRoot,$0.hydrateRoot=lb.hydrateRoot;const l4="modulepreload",c4=function(t){return"/"+t},cb={},Hy=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=c4(u),u in cb)return;cb[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":l4,h||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((w,C)=>{p.addEventListener("load",w),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var ub={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},u4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},VT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let w=(l&15)<<2|h>>6,C=h&63;u||(C=64,o||(w=64)),r.push(n[m],n[p],n[w],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new d4;const w=i<<2|l>>4;if(r.push(w),h!==64){const C=l<<4&240|h>>2;if(r.push(C),p!==64){const b=h<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h4=function(t){const e=HT(t);return VT.encodeByteArray(e,!0)},km=function(t){return h4(t).replace(/\./g,"")},KT=function(t){try{return VT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=()=>f4().__FIREBASE_DEFAULTS__,g4=()=>{if(typeof process>"u"||typeof ub>"u")return;const t=ub.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KT(t[1]);return e&&JSON.parse(e)},kg=()=>{try{return m4()||g4()||p4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zT=t=>{var e,n;return(n=(e=kg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},GT=t=>{const e=zT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qT=()=>{var t;return(t=kg())===null||t===void 0?void 0:t.config},WT=t=>{var e;return(e=kg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[km(JSON.stringify(n)),km(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function x4(){var t;const e=(t=kg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function b4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C4(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $T(){return!x4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kv(){try{return typeof indexedDB=="object"}catch{return!1}}function ZT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function E4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="FirebaseError";class As extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=I4,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,TA.prototype.create)}}class TA{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?T4(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new As(s,l,r)}}function T4(t,e){return t.replace(k4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k4=/\{\$([^}]+)}/g;function S4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function AA(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(db(i)&&db(o)){if(!AA(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function db(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function du(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function N4(t,e){const n=new U4(t,e);return n.subscribe.bind(n)}class U4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");F4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=s0),s.error===void 0&&(s.error=s0),s.complete===void 0&&(s.complete=s0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function s0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class Hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new y4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R4(e))try{this.getOrInitializeService({instanceIdentifier:Ro})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ro){return this.instances.has(e)}getOptions(e=Ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ro){return this.component?this.component.multipleInstances?e:Ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P4(t){return t===Ro?void 0:t}function R4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const j4={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},D4=Ze.INFO,M4={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},O4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=M4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let zv=class{constructor(e){this.name=e,this._logLevel=D4,this._logHandler=O4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}};const H4=(t,e)=>e.some(n=>t instanceof n);let hb,fb;function V4(){return hb||(hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K4(){return fb||(fb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JT=new WeakMap,Vy=new WeakMap,XT=new WeakMap,i0=new WeakMap,Gv=new WeakMap;function z4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Di(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JT.set(n,t)}).catch(()=>{}),Gv.set(e,t),e}function G4(t){if(Vy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vy.set(t,e)}let Ky={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Di(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q4(t){Ky=t(Ky)}function W4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(a0(this),e,...n);return XT.set(r,e.sort?e.sort():[e]),Di(r)}:K4().includes(t)?function(...e){return t.apply(a0(this),e),Di(JT.get(this))}:function(...e){return Di(t.apply(a0(this),e))}}function $4(t){return typeof t=="function"?W4(t):(t instanceof IDBTransaction&&G4(t),H4(t,V4())?new Proxy(t,Ky):t)}function Di(t){if(t instanceof IDBRequest)return z4(t);if(i0.has(t))return i0.get(t);const e=$4(t);return e!==t&&(i0.set(t,e),Gv.set(e,t)),e}const a0=t=>Gv.get(t);function Sg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Di(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Di(o.result),u.oldVersion,u.newVersion,Di(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}function o0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Di(n).then(()=>{})}const Z4=["get","getKey","getAll","getAllKeys","count"],J4=["put","add","delete","clear"],A0=new Map;function mb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(A0.get(e))return A0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=J4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Z4.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return A0.set(e,i),i}q4(t=>({...t,get:(e,n,r)=>mb(e,n)||t.get(e,n,r),has:(e,n)=>!!mb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zy="@firebase/app",gb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new zv("@firebase/app"),eR="@firebase/app-compat",tR="@firebase/analytics-compat",nR="@firebase/analytics",rR="@firebase/app-check-compat",sR="@firebase/app-check",iR="@firebase/auth",aR="@firebase/auth-compat",oR="@firebase/database",AR="@firebase/data-connect",lR="@firebase/database-compat",cR="@firebase/functions",uR="@firebase/functions-compat",dR="@firebase/installations",hR="@firebase/installations-compat",fR="@firebase/messaging",mR="@firebase/messaging-compat",gR="@firebase/performance",pR="@firebase/performance-compat",yR="@firebase/remote-config",wR="@firebase/remote-config-compat",vR="@firebase/storage",xR="@firebase/storage-compat",_R="@firebase/firestore",BR="@firebase/vertexai-preview",bR="@firebase/firestore-compat",CR="firebase",ER="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="[DEFAULT]",IR={[zy]:"fire-core",[eR]:"fire-core-compat",[nR]:"fire-analytics",[tR]:"fire-analytics-compat",[sR]:"fire-app-check",[rR]:"fire-app-check-compat",[iR]:"fire-auth",[aR]:"fire-auth-compat",[oR]:"fire-rtdb",[AR]:"fire-data-connect",[lR]:"fire-rtdb-compat",[cR]:"fire-fn",[uR]:"fire-fn-compat",[dR]:"fire-iid",[hR]:"fire-iid-compat",[fR]:"fire-fcm",[mR]:"fire-fcm-compat",[gR]:"fire-perf",[pR]:"fire-perf-compat",[yR]:"fire-rc",[wR]:"fire-rc-compat",[vR]:"fire-gcs",[xR]:"fire-gcs-compat",[_R]:"fire-fst",[bR]:"fire-fst-compat",[BR]:"fire-vertex","fire-js":"fire-js",[CR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new Map,TR=new Map,qy=new Map;function pb(t,e){try{t.container.addComponent(e)}catch(n){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function as(t){const e=t.name;if(qy.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;qy.set(e,t);for(const n of Sm.values())pb(n,t);for(const n of TR.values())pb(n,t);return!0}function lo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _s(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qa=new TA("app","Firebase",kR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=ER;function YT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gy,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw qa.create("bad-app-name",{appName:String(s)});if(n||(n=qT()),!n)throw qa.create("no-options");const i=Sm.get(s);if(i){if(AA(n,i.options)&&AA(r,i.config))return i;throw qa.create("duplicate-app",{appName:s})}const o=new L4(s);for(const u of qy.values())o.addComponent(u);const l=new SR(n,r,o);return Sm.set(s,l),l}function Ng(t=Gy){const e=Sm.get(t);if(!e&&t===Gy&&qT())return YT();if(!e)throw qa.create("no-app",{appName:t});return e}function Vn(t,e,n){var r;let s=(r=IR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(l.join(" "));return}as(new Hr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="firebase-heartbeat-database",UR=1,dd="firebase-heartbeat-store";let l0=null;function ek(){return l0||(l0=Sg(NR,UR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dd)}catch(n){console.warn(n)}}}}).catch(t=>{throw qa.create("idb-open",{originalErrorMessage:t.message})})),l0}async function FR(t){try{const n=(await ek()).transaction(dd),r=await n.objectStore(dd).get(tk(t));return await n.done,r}catch(e){if(e instanceof As)qi.warn(e.message);else{const n=qa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(n.message)}}}async function yb(t,e){try{const r=(await ek()).transaction(dd,"readwrite");await r.objectStore(dd).put(e,tk(t)),await r.done}catch(n){if(n instanceof As)qi.warn(n.message);else{const r=qa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qi.warn(r.message)}}}function tk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1024,PR=30*24*60*60*1e3;class RR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=PR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wb(),{heartbeatsToSend:r,unsentEntries:s}=LR(this._heartbeatsCache.heartbeats),i=km(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qi.warn(n),""}}}function wb(){return new Date().toISOString().substring(0,10)}function LR(t,e=QR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),vb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kv()?ZT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vb(t){return km(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){as(new Hr("platform-logger",e=>new X4(e),"PRIVATE")),as(new Hr("heartbeat",e=>new RR(e),"PRIVATE")),Vn(zy,gb,t),Vn(zy,gb,"esm2017"),Vn("fire-js","")}DR("");function qv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function nk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MR=nk,rk=new TA("auth","Firebase",nk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=new zv("@firebase/auth");function OR(t,...e){Nm.logLevel<=Ze.WARN&&Nm.warn(`Auth (${kA}): ${t}`,...e)}function Df(t,...e){Nm.logLevel<=Ze.ERROR&&Nm.error(`Auth (${kA}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t,...e){throw $v(t,...e)}function Es(t,...e){return $v(t,...e)}function Wv(t,e,n){const r=Object.assign(Object.assign({},MR()),{[e]:n});return new TA("auth","Firebase",r).create(e,{appName:t.name})}function Mi(t){return Wv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&os(t,"argument-error"),Wv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $v(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rk.create(t,...e)}function Pe(t,e,...n){if(!t)throw $v(e,...n)}function Fi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Df(e),new Error(e)}function Wi(t,e){t||Fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VR(){return xb()==="http:"||xb()==="https:"}function xb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VR()||B4()||"connection"in navigator)?navigator.onLine:!0}function zR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=v4()||b4()}get(){return KR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e){Wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new jd(3e4,6e4);function Xi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yi(t,e,n,r,s={}){return ik(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ld(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return _4()||(h.referrerPolicy="no-referrer"),sk.fetch()(ak(t,t.config.apiHost,n,l),h)})}async function ik(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},GR),e);try{const s=new $R(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Oh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Oh(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Oh(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Wv(t,m,h);os(t,m)}}catch(s){if(s instanceof As)throw s;os(t,"network-request-failed",{message:String(s)})}}async function Dd(t,e,n,r,s={}){const i=await Yi(t,e,n,r,s);return"mfaPendingCredential"in i&&os(t,"multi-factor-auth-required",{_serverResponse:i}),i}function ak(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Zv(t.config,s):`${t.config.apiScheme}://${s}`}function WR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $R{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Es(this.auth,"network-request-failed")),qR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Oh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Es(t,e,r);return s.customData._tokenResponse=n,s}function _b(t){return t!==void 0&&t.enterprise!==void 0}class ZR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function JR(t,e){return Yi(t,"GET","/v2/recaptchaConfig",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e){return Yi(t,"POST","/v1/accounts:delete",e)}async function ok(t,e){return Yi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YR(t,e=!1){const n=st(t),r=await n.getIdToken(e),s=Jv(r);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Qu(c0(s.auth_time)),issuedAtTime:Qu(c0(s.iat)),expirationTime:Qu(c0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function c0(t){return Number(t)*1e3}function Jv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const s=KT(n);return s?JSON.parse(s):(Df("Failed to decode base64 JWT payload"),null)}catch(s){return Df("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bb(t){const e=Jv(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof As&&eL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Um(t){var e;const n=t.auth,r=await t.getIdToken(),s=await hd(t,ok(n,{idToken:r}));Pe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ak(i.providerUserInfo):[],l=rL(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),m=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new $y(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function nL(t){const e=st(t);await Um(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ak(t){return t.map(e=>{var{providerId:n}=e,r=qv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e){const n=await ik(t,{},async()=>{const r=Ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=ak(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",sk.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iL(t,e){return Yi(t,"POST","/v2/accounts:revokeToken",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=Bb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await sL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Dl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=qv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $y(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await hd(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YR(this,e)}reload(){return nL(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Um(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_s(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await hd(this,XR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,h,m;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(s=n.email)!==null&&s!==void 0?s:void 0,C=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(l=n.tenantId)!==null&&l!==void 0?l:void 0,U=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(h=n.createdAt)!==null&&h!==void 0?h:void 0,E=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:N,emailVerified:O,isAnonymous:H,providerData:M,stsTokenManager:I}=n;Pe(N&&I,e,"internal-error");const B=Dl.fromJSON(this.name,I);Pe(typeof N=="string",e,"internal-error"),ga(p,e.name),ga(w,e.name),Pe(typeof O=="boolean",e,"internal-error"),Pe(typeof H=="boolean",e,"internal-error"),ga(C,e.name),ga(b,e.name),ga(x,e.name),ga(U,e.name),ga(T,e.name),ga(E,e.name);const S=new Qi({uid:N,auth:e,email:w,emailVerified:O,displayName:p,isAnonymous:H,photoURL:b,phoneNumber:C,tenantId:x,stsTokenManager:B,createdAt:T,lastLoginAt:E});return M&&Array.isArray(M)&&(S.providerData=M.map(Q=>Object.assign({},Q))),U&&(S._redirectEventId=U),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Dl;s.updateFromServerResponse(n);const i=new Qi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Um(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ak(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Dl;l.updateFromIdToken(r);const u=new Qi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new $y(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;function Pi(t){Wi(t instanceof Function,"Expected a class definition");let e=bb.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lk.type="NONE";const Cb=lk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ml{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Mf(this.userKey,s.apiKey,i),this.fullPersistenceKey=Mf("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ml(Pi(Cb),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Pi(Cb);const o=Mf(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const m=await h._get(o);if(m){const p=Qi._fromJSON(e,m);h!==i&&(l=p),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ml(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ml(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ck(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mk(e))return"Blackberry";if(gk(e))return"Webos";if(uk(e))return"Safari";if((e.includes("chrome/")||dk(e))&&!e.includes("edge/"))return"Chrome";if(fk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ck(t=hn()){return/firefox\//i.test(t)}function uk(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dk(t=hn()){return/crios\//i.test(t)}function hk(t=hn()){return/iemobile/i.test(t)}function fk(t=hn()){return/android/i.test(t)}function mk(t=hn()){return/blackberry/i.test(t)}function gk(t=hn()){return/webos/i.test(t)}function Xv(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aL(t=hn()){var e;return Xv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oL(){return C4()&&document.documentMode===10}function pk(t=hn()){return Xv(t)||fk(t)||gk(t)||mk(t)||/windows phone/i.test(t)||hk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t,e=[]){let n;switch(t){case"Browser":n=Eb(hn());break;case"Worker":n=`${Eb(hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kA}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,e={}){return Yi(t,"GET","/v2/passwordPolicy",Xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=6;class uL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ib(this),this.idTokenSubscription=new Ib(this),this.beforeStateQueue=new AL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pi(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ml.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ok(this,{idToken:e}),r=await Qi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_s(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Um(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_s(this.app))return Promise.reject(Mi(this));const n=e?st(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _s(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _s(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lL(this),n=new uL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new TA("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pi(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Ml.create(this,[Pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ni(t){return st(t)}class Ib{constructor(e){this.auth=e,this.observer=null,this.addObserver=N4(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ug={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hL(t){Ug=t}function wk(t){return Ug.loadJS(t)}function fL(){return Ug.recaptchaEnterpriseScript}function mL(){return Ug.gapiScript}function gL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const pL="recaptcha-enterprise",yL="NO_RECAPTCHA";class wL{constructor(e){this.type=pL,this.auth=ni(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{JR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new ZR(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;_b(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(yL)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&_b(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fL();u.length!==0&&(u+=l),wk(u).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function Tb(t,e,n,r=!1){const s=new wL(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Fm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Tb(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Tb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e){const n=lo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(AA(i,e??{}))return s;os(s,"already-initialized")}return n.initialize({options:e})}function xL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _L(t,e,n){const r=ni(t);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=vk(e),{host:o,port:l}=BL(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),bL()}function vk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BL(t){const e=vk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:kb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:kb(o)}}}function kb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fi("not implemented")}_getIdTokenResponse(e){return Fi("not implemented")}_linkToIdToken(e,n){return Fi("not implemented")}_getReauthenticationResolver(e){return Fi("not implemented")}}async function CL(t,e){return Yi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(t,e){return Dd(t,"POST","/v1/accounts:signInWithPassword",Xi(t,e))}async function xk(t,e){return Yi(t,"POST","/v1/accounts:sendOobCode",Xi(t,e))}async function IL(t,e){return xk(t,e)}async function TL(t,e){return xk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e){return Dd(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}async function SL(t,e){return Dd(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends Yv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,n,"signInWithPassword",EL);case"emailLink":return kL(e,{email:this._email,oobCode:this._password});default:os(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,r,"signUpPassword",CL);case"emailLink":return SL(e,{idToken:n,email:this._email,oobCode:this._password});default:os(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t,e){return Dd(t,"POST","/v1/accounts:signInWithIdp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="http://localhost";class lA extends Yv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):os("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=qv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new lA(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ol(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ol(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ol(e,n)}buildRequest(){const e={requestUri:NL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ld(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FL(t){const e=du(hu(t)).link,n=e?du(hu(e)).deep_link_id:null,r=du(hu(t)).deep_link_id;return(r?du(hu(r)).link:null)||r||n||e||t}class ex{constructor(e){var n,r,s,i,o,l;const u=du(hu(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(r=u.oobCode)!==null&&r!==void 0?r:null,p=UL((s=u.mode)!==null&&s!==void 0?s:null);Pe(h&&m&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=m,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=FL(e);try{return new ex(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.providerId=vc.PROVIDER_ID}static credential(e,n){return fd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ex.parseLink(n);return Pe(r,"argument-error"),fd._fromEmailAndCode(e,r.code,r.tenantId)}}vc.PROVIDER_ID="password";vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Md{constructor(){super("facebook.com")}static credential(e){return lA._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ea.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Md{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lA._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Md{constructor(){super("github.com")}static credential(e){return lA._fromParams({providerId:Ia.PROVIDER_ID,signInMethod:Ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ia.credentialFromTaggedObject(e)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ia.credential(e.oauthAccessToken)}catch{return null}}}Ia.GITHUB_SIGN_IN_METHOD="github.com";Ia.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends Md{constructor(){super("twitter.com")}static credential(e,n){return lA._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ta.credential(n,r)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e){return Dd(t,"POST","/v1/accounts:signUp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qi._fromIdTokenResponse(e,r,s),o=Sb(r);return new cA({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Sb(r);return new cA({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Sb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends As{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qm(e,n,r,s)}}function _k(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qm._fromErrorAndOperation(t,i,e,r):i})}async function PL(t,e,n=!1){const r=await hd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cA._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e,n=!1){const{auth:r}=t;if(_s(r.app))return Promise.reject(Mi(r));const s="reauthenticate";try{const i=await hd(t,_k(r,s,e,t),n);Pe(i.idToken,r,"internal-error");const o=Jv(i.idToken);Pe(o,r,"internal-error");const{sub:l}=o;return Pe(t.uid===l,r,"user-mismatch"),cA._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&os(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e,n=!1){if(_s(t.app))return Promise.reject(Mi(t));const r="signIn",s=await _k(t,r,e),i=await cA._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function LL(t,e){return Bk(ni(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t){const e=ni(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jL(t,e,n){const r=ni(t);await Fm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",TL)}async function DL(t,e,n){if(_s(t.app))return Promise.reject(Mi(t));const r=ni(t),o=await Fm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&bk(t),u}),l=await cA._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function ML(t,e,n){return _s(t.app)?Promise.reject(Mi(t)):LL(st(t),vc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bk(t),r})}async function Ck(t,e){const n=st(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await IL(n.auth,s);i!==t.email&&await t.reload()}function OL(t,e,n,r){return st(t).onIdTokenChanged(e,n,r)}function HL(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function VL(t,e,n,r){return st(t).onAuthStateChanged(e,n,r)}function Ek(t){return st(t).signOut()}const Pm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pm,"1"),this.storage.removeItem(Pm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1e3,zL=10;class Tk extends Ik{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,zL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tk.type="LOCAL";const GL=Tk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk extends Ik{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kk.type="SESSION";const Sk=kk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Fg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await qL(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=nx("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const w=p;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(w.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(){return window}function $L(t){Js().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){return typeof Js().WorkerGlobalScope<"u"&&typeof Js().importScripts=="function"}async function ZL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function XL(){return Nk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="firebaseLocalStorageDb",YL=1,Rm="firebaseLocalStorage",Fk="fbase_key";class Od{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qg(t,e){return t.transaction([Rm],e?"readwrite":"readonly").objectStore(Rm)}function ej(){const t=indexedDB.deleteDatabase(Uk);return new Od(t).toPromise()}function Zy(){const t=indexedDB.open(Uk,YL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rm,{keyPath:Fk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rm)?e(r):(r.close(),await ej(),e(await Zy()))})})}async function Nb(t,e,n){const r=Qg(t,!0).put({[Fk]:e,value:n});return new Od(r).toPromise()}async function tj(t,e){const n=Qg(t,!1).get(e),r=await new Od(n).toPromise();return r===void 0?null:r.value}function Ub(t,e){const n=Qg(t,!0).delete(e);return new Od(n).toPromise()}const nj=800,rj=3;class Qk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fg._getInstance(XL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ZL(),!this.activeServiceWorker)return;this.sender=new WL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zy();return await Nb(e,Pm,"1"),await Ub(e,Pm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ub(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qg(s,!1).getAll();return new Od(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qk.type="LOCAL";const sj=Qk;new jd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e){return e?Pi(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends Yv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ol(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ol(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ij(t){return Bk(t.auth,new rx(t),t.bypassAuthState)}function aj(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),RL(n,new rx(t),t.bypassAuthState)}async function oj(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),PL(n,new rx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ij;case"linkViaPopup":case"linkViaRedirect":return oj;case"reauthViaPopup":case"reauthViaRedirect":return aj;default:os(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new jd(2e3,1e4);async function lj(t,e,n){if(_s(t.app))return Promise.reject(Es(t,"operation-not-supported-in-this-environment"));const r=ni(t);HR(t,e,tx);const s=Pk(r,n);return new qo(r,"signInViaPopup",e,s).executeNotNull()}class qo extends Rk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=nx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Aj.get())};e()}}qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="pendingRedirect",Of=new Map;class uj extends Rk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Of.get(this.auth._key());if(!e){try{const r=await dj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Of.set(this.auth._key(),e)}return this.bypassAuthState||Of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dj(t,e){const n=mj(e),r=fj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function hj(t,e){Of.set(t._key(),e)}function fj(t){return Pi(t._redirectPersistence)}function mj(t){return Mf(cj,t.config.apiKey,t.name)}async function gj(t,e){return await ni(t)._initializationPromise,Lk(t,e,!1)}async function Lk(t,e,n=!1){if(_s(t.app))return Promise.reject(Mi(t));const r=ni(t),s=Pk(r,e),o=await new uj(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=10*60*1e3;class yj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Es(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fb(e))}saveEventToCache(e){this.cachedEventUids.add(Fb(e)),this.lastProcessedEventTime=Date.now()}}function Fb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e={}){return Yi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_j=/^https?/;async function Bj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vj(t);for(const n of e)try{if(bj(n))return}catch{}os(t,"unauthorized-domain")}function bj(t){const e=Wy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!_j.test(n))return!1;if(xj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new jd(3e4,6e4);function Qb(){const t=Js().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ej(t){return new Promise((e,n)=>{var r,s,i;function o(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),n(Es(t,"network-request-failed"))},timeout:Cj.get()})}if(!((s=(r=Js().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Js().gapi)===null||i===void 0)&&i.load)o();else{const l=gL("iframefcb");return Js()[l]=()=>{gapi.load?o():n(Es(t,"network-request-failed"))},wk(`${mL()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Hf=null,e})}let Hf=null;function Ij(t){return Hf=Hf||Ej(t),Hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new jd(5e3,15e3),kj="__/auth/iframe",Sj="emulator/auth/iframe",Nj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fj(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zv(e,Sj):`https://${t.config.authDomain}/${kj}`,r={apiKey:e.apiKey,appName:t.name,v:kA},s=Uj.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ld(r).slice(1)}`}async function Qj(t){const e=await Ij(t),n=Js().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:Fj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Es(t,"network-request-failed"),l=Js().setTimeout(()=>{i(o)},Tj.get());function u(){Js().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rj=500,Lj=600,jj="_blank",Dj="http://localhost";class Pb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mj(t,e,n,r=Rj,s=Lj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Pj),{width:r.toString(),height:s.toString(),top:i,left:o}),h=hn().toLowerCase();n&&(l=dk(h)?jj:n),ck(h)&&(e=e||Dj,u.scrollbars="yes");const m=Object.entries(u).reduce((w,[C,b])=>`${w}${C}=${b},`,"");if(aL(h)&&l!=="_self")return Oj(e||"",l),new Pb(null);const p=window.open(e||"",l,m);Pe(p,t,"popup-blocked");try{p.focus()}catch{}return new Pb(p)}function Oj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="__/auth/handler",Vj="emulator/auth/handler",Kj=encodeURIComponent("fac");async function Rb(t,e,n,r,s,i){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kA,eventId:s};if(e instanceof tx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",S4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof Md){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await t._getAppCheckToken(),h=u?`#${Kj}=${encodeURIComponent(u)}`:"";return`${zj(t)}?${Ld(l).slice(1)}${h}`}function zj({config:t}){return t.emulator?Zv(t,Vj):`https://${t.authDomain}/${Hj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="webStorageSupport";class Gj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sk,this._completeRedirectFn=Lk,this._overrideRedirectResult=hj}async _openPopup(e,n,r,s){var i;Wi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Rb(e,n,r,Wy(),s);return Mj(e,o,nx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Rb(e,n,r,Wy(),s);return $L(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Qj(e),r=new yj(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(u0,{type:u0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[u0];o!==void 0&&n(!!o),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Bj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pk()||uk()||Xv()}}const qj=Gj;var Lb="@firebase/auth",jb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zj(t){as(new Hr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yk(t)},h=new dL(r,s,i,u);return xL(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),as(new Hr("auth-internal",e=>{const n=ni(e.getProvider("auth").getImmediate());return(r=>new Wj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(Lb,jb,$j(t)),Vn(Lb,jb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=5*60,Xj=WT("authIdTokenMaxAge")||Jj;let Db=null;const Yj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Xj)return;const s=n==null?void 0:n.token;Db!==s&&(Db=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eD(t=Ng()){const e=lo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vL(t,{popupRedirectResolver:qj,persistence:[sj,GL,Sk]}),r=WT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Yj(i.toString());HL(n,o,()=>o(n.currentUser)),OL(n,l=>o(l))}}const s=zT("auth");return s&&_L(n,`http://${s}`),n}function tD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Es("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",tD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zj("Browser");var Mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xo,Dk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,B){function S(){}S.prototype=B.prototype,I.D=B.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(Q,D,K){for(var j=Array(arguments.length-2),J=2;J<arguments.length;J++)j[J-2]=arguments[J];return B.prototype[D].apply(Q,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,B,S){S||(S=0);var Q=Array(16);if(typeof B=="string")for(var D=0;16>D;++D)Q[D]=B.charCodeAt(S++)|B.charCodeAt(S++)<<8|B.charCodeAt(S++)<<16|B.charCodeAt(S++)<<24;else for(D=0;16>D;++D)Q[D]=B[S++]|B[S++]<<8|B[S++]<<16|B[S++]<<24;B=I.g[0],S=I.g[1],D=I.g[2];var K=I.g[3],j=B+(K^S&(D^K))+Q[0]+3614090360&4294967295;B=S+(j<<7&4294967295|j>>>25),j=K+(D^B&(S^D))+Q[1]+3905402710&4294967295,K=B+(j<<12&4294967295|j>>>20),j=D+(S^K&(B^S))+Q[2]+606105819&4294967295,D=K+(j<<17&4294967295|j>>>15),j=S+(B^D&(K^B))+Q[3]+3250441966&4294967295,S=D+(j<<22&4294967295|j>>>10),j=B+(K^S&(D^K))+Q[4]+4118548399&4294967295,B=S+(j<<7&4294967295|j>>>25),j=K+(D^B&(S^D))+Q[5]+1200080426&4294967295,K=B+(j<<12&4294967295|j>>>20),j=D+(S^K&(B^S))+Q[6]+2821735955&4294967295,D=K+(j<<17&4294967295|j>>>15),j=S+(B^D&(K^B))+Q[7]+4249261313&4294967295,S=D+(j<<22&4294967295|j>>>10),j=B+(K^S&(D^K))+Q[8]+1770035416&4294967295,B=S+(j<<7&4294967295|j>>>25),j=K+(D^B&(S^D))+Q[9]+2336552879&4294967295,K=B+(j<<12&4294967295|j>>>20),j=D+(S^K&(B^S))+Q[10]+4294925233&4294967295,D=K+(j<<17&4294967295|j>>>15),j=S+(B^D&(K^B))+Q[11]+2304563134&4294967295,S=D+(j<<22&4294967295|j>>>10),j=B+(K^S&(D^K))+Q[12]+1804603682&4294967295,B=S+(j<<7&4294967295|j>>>25),j=K+(D^B&(S^D))+Q[13]+4254626195&4294967295,K=B+(j<<12&4294967295|j>>>20),j=D+(S^K&(B^S))+Q[14]+2792965006&4294967295,D=K+(j<<17&4294967295|j>>>15),j=S+(B^D&(K^B))+Q[15]+1236535329&4294967295,S=D+(j<<22&4294967295|j>>>10),j=B+(D^K&(S^D))+Q[1]+4129170786&4294967295,B=S+(j<<5&4294967295|j>>>27),j=K+(S^D&(B^S))+Q[6]+3225465664&4294967295,K=B+(j<<9&4294967295|j>>>23),j=D+(B^S&(K^B))+Q[11]+643717713&4294967295,D=K+(j<<14&4294967295|j>>>18),j=S+(K^B&(D^K))+Q[0]+3921069994&4294967295,S=D+(j<<20&4294967295|j>>>12),j=B+(D^K&(S^D))+Q[5]+3593408605&4294967295,B=S+(j<<5&4294967295|j>>>27),j=K+(S^D&(B^S))+Q[10]+38016083&4294967295,K=B+(j<<9&4294967295|j>>>23),j=D+(B^S&(K^B))+Q[15]+3634488961&4294967295,D=K+(j<<14&4294967295|j>>>18),j=S+(K^B&(D^K))+Q[4]+3889429448&4294967295,S=D+(j<<20&4294967295|j>>>12),j=B+(D^K&(S^D))+Q[9]+568446438&4294967295,B=S+(j<<5&4294967295|j>>>27),j=K+(S^D&(B^S))+Q[14]+3275163606&4294967295,K=B+(j<<9&4294967295|j>>>23),j=D+(B^S&(K^B))+Q[3]+4107603335&4294967295,D=K+(j<<14&4294967295|j>>>18),j=S+(K^B&(D^K))+Q[8]+1163531501&4294967295,S=D+(j<<20&4294967295|j>>>12),j=B+(D^K&(S^D))+Q[13]+2850285829&4294967295,B=S+(j<<5&4294967295|j>>>27),j=K+(S^D&(B^S))+Q[2]+4243563512&4294967295,K=B+(j<<9&4294967295|j>>>23),j=D+(B^S&(K^B))+Q[7]+1735328473&4294967295,D=K+(j<<14&4294967295|j>>>18),j=S+(K^B&(D^K))+Q[12]+2368359562&4294967295,S=D+(j<<20&4294967295|j>>>12),j=B+(S^D^K)+Q[5]+4294588738&4294967295,B=S+(j<<4&4294967295|j>>>28),j=K+(B^S^D)+Q[8]+2272392833&4294967295,K=B+(j<<11&4294967295|j>>>21),j=D+(K^B^S)+Q[11]+1839030562&4294967295,D=K+(j<<16&4294967295|j>>>16),j=S+(D^K^B)+Q[14]+4259657740&4294967295,S=D+(j<<23&4294967295|j>>>9),j=B+(S^D^K)+Q[1]+2763975236&4294967295,B=S+(j<<4&4294967295|j>>>28),j=K+(B^S^D)+Q[4]+1272893353&4294967295,K=B+(j<<11&4294967295|j>>>21),j=D+(K^B^S)+Q[7]+4139469664&4294967295,D=K+(j<<16&4294967295|j>>>16),j=S+(D^K^B)+Q[10]+3200236656&4294967295,S=D+(j<<23&4294967295|j>>>9),j=B+(S^D^K)+Q[13]+681279174&4294967295,B=S+(j<<4&4294967295|j>>>28),j=K+(B^S^D)+Q[0]+3936430074&4294967295,K=B+(j<<11&4294967295|j>>>21),j=D+(K^B^S)+Q[3]+3572445317&4294967295,D=K+(j<<16&4294967295|j>>>16),j=S+(D^K^B)+Q[6]+76029189&4294967295,S=D+(j<<23&4294967295|j>>>9),j=B+(S^D^K)+Q[9]+3654602809&4294967295,B=S+(j<<4&4294967295|j>>>28),j=K+(B^S^D)+Q[12]+3873151461&4294967295,K=B+(j<<11&4294967295|j>>>21),j=D+(K^B^S)+Q[15]+530742520&4294967295,D=K+(j<<16&4294967295|j>>>16),j=S+(D^K^B)+Q[2]+3299628645&4294967295,S=D+(j<<23&4294967295|j>>>9),j=B+(D^(S|~K))+Q[0]+4096336452&4294967295,B=S+(j<<6&4294967295|j>>>26),j=K+(S^(B|~D))+Q[7]+1126891415&4294967295,K=B+(j<<10&4294967295|j>>>22),j=D+(B^(K|~S))+Q[14]+2878612391&4294967295,D=K+(j<<15&4294967295|j>>>17),j=S+(K^(D|~B))+Q[5]+4237533241&4294967295,S=D+(j<<21&4294967295|j>>>11),j=B+(D^(S|~K))+Q[12]+1700485571&4294967295,B=S+(j<<6&4294967295|j>>>26),j=K+(S^(B|~D))+Q[3]+2399980690&4294967295,K=B+(j<<10&4294967295|j>>>22),j=D+(B^(K|~S))+Q[10]+4293915773&4294967295,D=K+(j<<15&4294967295|j>>>17),j=S+(K^(D|~B))+Q[1]+2240044497&4294967295,S=D+(j<<21&4294967295|j>>>11),j=B+(D^(S|~K))+Q[8]+1873313359&4294967295,B=S+(j<<6&4294967295|j>>>26),j=K+(S^(B|~D))+Q[15]+4264355552&4294967295,K=B+(j<<10&4294967295|j>>>22),j=D+(B^(K|~S))+Q[6]+2734768916&4294967295,D=K+(j<<15&4294967295|j>>>17),j=S+(K^(D|~B))+Q[13]+1309151649&4294967295,S=D+(j<<21&4294967295|j>>>11),j=B+(D^(S|~K))+Q[4]+4149444226&4294967295,B=S+(j<<6&4294967295|j>>>26),j=K+(S^(B|~D))+Q[11]+3174756917&4294967295,K=B+(j<<10&4294967295|j>>>22),j=D+(B^(K|~S))+Q[2]+718787259&4294967295,D=K+(j<<15&4294967295|j>>>17),j=S+(K^(D|~B))+Q[9]+3951481745&4294967295,I.g[0]=I.g[0]+B&4294967295,I.g[1]=I.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+K&4294967295}r.prototype.u=function(I,B){B===void 0&&(B=I.length);for(var S=B-this.blockSize,Q=this.B,D=this.h,K=0;K<B;){if(D==0)for(;K<=S;)s(this,I,K),K+=this.blockSize;if(typeof I=="string"){for(;K<B;)if(Q[D++]=I.charCodeAt(K++),D==this.blockSize){s(this,Q),D=0;break}}else for(;K<B;)if(Q[D++]=I[K++],D==this.blockSize){s(this,Q),D=0;break}}this.h=D,this.o+=B},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var B=1;B<I.length-8;++B)I[B]=0;var S=8*this.o;for(B=I.length-8;B<I.length;++B)I[B]=S&255,S/=256;for(this.u(I),I=Array(16),B=S=0;4>B;++B)for(var Q=0;32>Q;Q+=8)I[S++]=this.g[B]>>>Q&255;return I};function i(I,B){var S=l;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=B(I)}function o(I,B){this.h=B;for(var S=[],Q=!0,D=I.length-1;0<=D;D--){var K=I[D]|0;Q&&K==B||(S[D]=K,Q=!1)}this.g=S}var l={};function u(I){return-128<=I&&128>I?i(I,function(B){return new o([B|0],0>B?-1:0)}):new o([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return U(h(-I));for(var B=[],S=1,Q=0;I>=S;Q++)B[Q]=I/S|0,S*=4294967296;return new o(B,0)}function m(I,B){if(I.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(I.charAt(0)=="-")return U(m(I.substring(1),B));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(B,8)),Q=p,D=0;D<I.length;D+=8){var K=Math.min(8,I.length-D),j=parseInt(I.substring(D,D+K),B);8>K?(K=h(Math.pow(B,K)),Q=Q.j(K).add(h(j))):(Q=Q.j(S),Q=Q.add(h(j)))}return Q}var p=u(0),w=u(1),C=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-U(this).m();for(var I=0,B=1,S=0;S<this.g.length;S++){var Q=this.i(S);I+=(0<=Q?Q:4294967296+Q)*B,B*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(x(this))return"-"+U(this).toString(I);for(var B=h(Math.pow(I,6)),S=this,Q="";;){var D=O(S,B).g;S=T(S,D.j(B));var K=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=D,b(S))return K+Q;for(;6>K.length;)K="0"+K;Q=K+Q}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var B=0;B<I.g.length;B++)if(I.g[B]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=T(this,I),x(I)?-1:b(I)?0:1};function U(I){for(var B=I.g.length,S=[],Q=0;Q<B;Q++)S[Q]=~I.g[Q];return new o(S,~I.h).add(w)}t.abs=function(){return x(this)?U(this):this},t.add=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],Q=0,D=0;D<=B;D++){var K=Q+(this.i(D)&65535)+(I.i(D)&65535),j=(K>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);Q=j>>>16,K&=65535,j&=65535,S[D]=j<<16|K}return new o(S,S[S.length-1]&-2147483648?-1:0)};function T(I,B){return I.add(U(B))}t.j=function(I){if(b(this)||b(I))return p;if(x(this))return x(I)?U(this).j(U(I)):U(U(this).j(I));if(x(I))return U(this.j(U(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var B=this.g.length+I.g.length,S=[],Q=0;Q<2*B;Q++)S[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var D=0;D<I.g.length;D++){var K=this.i(Q)>>>16,j=this.i(Q)&65535,J=I.i(D)>>>16,Y=I.i(D)&65535;S[2*Q+2*D]+=j*Y,E(S,2*Q+2*D),S[2*Q+2*D+1]+=K*Y,E(S,2*Q+2*D+1),S[2*Q+2*D+1]+=j*J,E(S,2*Q+2*D+1),S[2*Q+2*D+2]+=K*J,E(S,2*Q+2*D+2)}for(Q=0;Q<B;Q++)S[Q]=S[2*Q+1]<<16|S[2*Q];for(Q=B;Q<2*B;Q++)S[Q]=0;return new o(S,0)};function E(I,B){for(;(I[B]&65535)!=I[B];)I[B+1]+=I[B]>>>16,I[B]&=65535,B++}function N(I,B){this.g=I,this.h=B}function O(I,B){if(b(B))throw Error("division by zero");if(b(I))return new N(p,p);if(x(I))return B=O(U(I),B),new N(U(B.g),U(B.h));if(x(B))return B=O(I,U(B)),new N(U(B.g),B.h);if(30<I.g.length){if(x(I)||x(B))throw Error("slowDivide_ only works with positive integers.");for(var S=w,Q=B;0>=Q.l(I);)S=H(S),Q=H(Q);var D=M(S,1),K=M(Q,1);for(Q=M(Q,2),S=M(S,2);!b(Q);){var j=K.add(Q);0>=j.l(I)&&(D=D.add(S),K=j),Q=M(Q,1),S=M(S,1)}return B=T(I,D.j(B)),new N(D,B)}for(D=p;0<=I.l(B);){for(S=Math.max(1,Math.floor(I.m()/B.m())),Q=Math.ceil(Math.log(S)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),K=h(S),j=K.j(B);x(j)||0<j.l(I);)S-=Q,K=h(S),j=K.j(B);b(K)&&(K=w),D=D.add(K),I=T(I,j)}return new N(D,I)}t.A=function(I){return O(this,I).h},t.and=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],Q=0;Q<B;Q++)S[Q]=this.i(Q)&I.i(Q);return new o(S,this.h&I.h)},t.or=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],Q=0;Q<B;Q++)S[Q]=this.i(Q)|I.i(Q);return new o(S,this.h|I.h)},t.xor=function(I){for(var B=Math.max(this.g.length,I.g.length),S=[],Q=0;Q<B;Q++)S[Q]=this.i(Q)^I.i(Q);return new o(S,this.h^I.h)};function H(I){for(var B=I.g.length+1,S=[],Q=0;Q<B;Q++)S[Q]=I.i(Q)<<1|I.i(Q-1)>>>31;return new o(S,I.h)}function M(I,B){var S=B>>5;B%=32;for(var Q=I.g.length-S,D=[],K=0;K<Q;K++)D[K]=0<B?I.i(K+S)>>>B|I.i(K+S+1)<<32-B:I.i(K+S);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,Xo=o}).apply(typeof Mb<"u"?Mb:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mk,fu,Ok,Vf,Jy,Hk,Vk,Kk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,_){return d==Array.prototype||d==Object.prototype||(d[y]=_.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var _=r;d=d.split(".");for(var F=0;F<d.length-1;F++){var G=d[F];if(!(G in _))break e;_=_[G]}d=d[d.length-1],F=_[d],y=y(F),y!=F&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}function i(d,y){d instanceof String&&(d+="");var _=0,F=!1,G={next:function(){if(!F&&_<d.length){var X=_++;return{value:y(X,d[X]),done:!1}}return F=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(d){return d||function(){return i(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function h(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function m(d,y,_){return d.call.apply(d.bind,arguments)}function p(d,y,_){if(!d)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,F),d.apply(y,G)}}return function(){return d.apply(y,arguments)}}function w(d,y,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,w.apply(null,arguments)}function C(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var F=_.slice();return F.push.apply(F,arguments),d.apply(this,F)}}function b(d,y){function _(){}_.prototype=y.prototype,d.aa=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Qb=function(F,G,X){for(var ce=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ce[lt-2]=arguments[lt];return y.prototype[G].apply(F,ce)}}function x(d){const y=d.length;if(0<y){const _=Array(y);for(let F=0;F<y;F++)_[F]=d[F];return _}return[]}function U(d,y){for(let _=1;_<arguments.length;_++){const F=arguments[_];if(u(F)){const G=d.length||0,X=F.length||0;d.length=G+X;for(let ce=0;ce<X;ce++)d[G+ce]=F[ce]}else d.push(F)}}class T{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function E(d){return/^[\s\xa0]*$/.test(d)}function N(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function O(d){return O[" "](d),d}O[" "]=function(){};var H=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function M(d,y,_){for(const F in d)y.call(_,d[F],F,d)}function I(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function B(d){const y={};for(const _ in d)y[_]=d[_];return y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(d,y){let _,F;for(let G=1;G<arguments.length;G++){F=arguments[G];for(_ in F)d[_]=F[_];for(let X=0;X<S.length;X++)_=S[X],Object.prototype.hasOwnProperty.call(F,_)&&(d[_]=F[_])}}function D(d){var y=1;d=d.split(":");const _=[];for(;0<y&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function K(d){l.setTimeout(()=>{throw d},0)}function j(){var d=ae;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,_){const F=Y.get();F.set(y,_),this.h?this.h.next=F:this.g=F,this.h=F}}var Y=new T(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,z=!1,ae=new J,ee=()=>{const d=l.Promise.resolve(void 0);Ae=()=>{d.then(we)}};var we=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(_){K(_)}var y=Y;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}z=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};l.addEventListener("test",_,y),l.removeEventListener("test",_,y)}catch{}return d}();function he(d,y){if(me.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var _=this.type=d.type,F=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(H){e:{try{O(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else _=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement);this.relatedTarget=y,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ie[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&he.aa.h.call(this)}}b(he,me);var ie={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function Ir(d,y,_,F,G){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!F,this.ha=G,this.key=++Xe,this.da=this.fa=!1}function Dt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Gn(d){this.src=d,this.g={},this.h=0}Gn.prototype.add=function(d,y,_,F,G){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var ce=wt(d,y,F,G);return-1<ce?(y=d[ce],_||(y.fa=!1)):(y=new Ir(y,this.src,X,!!F,G),y.fa=_,d.push(y)),y};function Nn(d,y){var _=y.type;if(_ in d.g){var F=d.g[_],G=Array.prototype.indexOf.call(F,y,void 0),X;(X=0<=G)&&Array.prototype.splice.call(F,G,1),X&&(Dt(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function wt(d,y,_,F){for(var G=0;G<d.length;++G){var X=d[G];if(!X.da&&X.listener==y&&X.capture==!!_&&X.ha==F)return G}return-1}var vt="closure_lm_"+(1e6*Math.random()|0),Ye={};function An(d,y,_,F,G){if(Array.isArray(y)){for(var X=0;X<y.length;X++)An(d,y[X],_,F,G);return null}return _=RA(_),d&&d[Qe]?d.K(y,_,h(F)?!!F.capture:!1,G):xt(d,y,_,!1,F,G)}function xt(d,y,_,F,G,X){if(!y)throw Error("Invalid event type");var ce=h(G)?!!G.capture:!!G,lt=Ss(d);if(lt||(d[vt]=lt=new Gn(d)),_=lt.add(y,_,F,ce,X),_.proxy)return _;if(F=mn(),_.proxy=F,F.src=d,F.listener=_,d.addEventListener)pe||(G=ce),G===void 0&&(G=!1),d.addEventListener(y.toString(),F,G);else if(d.attachEvent)d.attachEvent(ai(y.toString()),F);else if(d.addListener&&d.removeListener)d.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return _}function mn(){function d(_){return y.call(d.src,d.listener,_)}const y=go;return d}function PA(d,y,_,F,G){if(Array.isArray(y))for(var X=0;X<y.length;X++)PA(d,y[X],_,F,G);else F=h(F)?!!F.capture:!!F,_=RA(_),d&&d[Qe]?(d=d.i,y=String(y).toString(),y in d.g&&(X=d.g[y],_=wt(X,_,F,G),-1<_&&(Dt(X[_]),Array.prototype.splice.call(X,_,1),X.length==0&&(delete d.g[y],d.h--)))):d&&(d=Ss(d))&&(y=d.g[y.toString()],d=-1,y&&(d=wt(y,_,F,G)),(_=-1<d?y[d]:null)&&mo(_))}function mo(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Qe])Nn(y.i,d);else{var _=d.type,F=d.proxy;y.removeEventListener?y.removeEventListener(_,F,d.capture):y.detachEvent?y.detachEvent(ai(_),F):y.addListener&&y.removeListener&&y.removeListener(F),(_=Ss(y))?(Nn(_,d),_.h==0&&(_.src=null,y[vt]=null)):Dt(d)}}}function ai(d){return d in Ye?Ye[d]:Ye[d]="on"+d}function go(d,y){if(d.da)d=!0;else{y=new he(y,this);var _=d.listener,F=d.ha||d.src;d.fa&&mo(d),d=_.call(F,y)}return d}function Ss(d){return d=d[vt],d instanceof Gn?d:null}var po="__closure_events_fn_"+(1e9*Math.random()>>>0);function RA(d){return typeof d=="function"?d:(d[po]||(d[po]=function(y){return d.handleEvent(y)}),d[po])}function Mt(){de.call(this),this.i=new Gn(this),this.M=this,this.F=null}b(Mt,de),Mt.prototype[Qe]=!0,Mt.prototype.removeEventListener=function(d,y,_,F){PA(this,d,y,_,F)};function Yt(d,y){var _,F=d.F;if(F)for(_=[];F;F=F.F)_.push(F);if(d=d.M,F=y.type||y,typeof y=="string")y=new me(y,d);else if(y instanceof me)y.target=y.target||d;else{var G=y;y=new me(F,d),Q(y,G)}if(G=!0,_)for(var X=_.length-1;0<=X;X--){var ce=y.g=_[X];G=Ns(ce,F,!0,y)&&G}if(ce=y.g=d,G=Ns(ce,F,!0,y)&&G,G=Ns(ce,F,!1,y)&&G,_)for(X=0;X<_.length;X++)ce=y.g=_[X],G=Ns(ce,F,!1,y)&&G}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var _=d.g[y],F=0;F<_.length;F++)Dt(_[F]);delete d.g[y],d.h--}}this.F=null},Mt.prototype.K=function(d,y,_,F){return this.i.add(String(d),y,!1,_,F)},Mt.prototype.L=function(d,y,_,F){return this.i.add(String(d),y,!0,_,F)};function Ns(d,y,_,F){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,X=0;X<y.length;++X){var ce=y[X];if(ce&&!ce.da&&ce.capture==_){var lt=ce.listener,en=ce.ha||ce.src;ce.fa&&Nn(d.i,ce),G=lt.call(en,F)!==!1&&G}}return G&&!F.defaultPrevented}function LA(d,y,_){if(typeof d=="function")_&&(d=w(d,_));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:l.setTimeout(d,y||0)}function oi(d){d.g=LA(()=>{d.g=null,d.i&&(d.i=!1,oi(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Un extends de{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:oi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(d){de.call(this),this.h=d,this.g={}}b(Us,de);var yo=[];function Ai(d){M(d.g,function(y,_){this.g.hasOwnProperty(_)&&mo(y)},d),d.g={}}Us.prototype.N=function(){Us.aa.N.call(this),Ai(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var li=l.JSON.stringify,wo=l.JSON.parse,Fs=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function ta(){}ta.prototype.h=null;function Tr(d){return d.h||(d.h=d.i())}function vo(){}var Qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function na(){me.call(this,"d")}b(na,me);function ra(){me.call(this,"c")}b(ra,me);var qn={},sa=null;function ia(){return sa=sa||new Mt}qn.La="serverreachability";function xo(d){me.call(this,qn.La,d)}b(xo,me);function ci(d){const y=ia();Yt(y,new xo(y))}qn.STAT_EVENT="statevent";function Ps(d,y){me.call(this,qn.STAT_EVENT,d),this.stat=y}b(Ps,me);function Ut(d){const y=ia();Yt(y,new Ps(y,d))}qn.Ma="timingevent";function ui(d,y){me.call(this,qn.Ma,d),this.size=y}b(ui,me);function di(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},y)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function Wn(d,y,_,F,G,X){d.info(function(){if(d.g)if(X)for(var ce="",lt=X.split("&"),en=0;en<lt.length;en++){var et=lt[en].split("=");if(1<et.length){var dt=et[0];et=et[1];var Qt=dt.split("_");ce=2<=Qt.length&&Qt[1]=="type"?ce+(dt+"="+et+"&"):ce+(dt+"=redacted&")}}else ce=null;else ce=X;return"XMLHTTP REQ ("+F+") [attempt "+G+"]: "+y+`
`+_+`
`+ce})}function Ee(d,y,_,F,G,X,ce){d.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+G+"]: "+y+`
`+_+`
`+X+" "+ce})}function cs(d,y,_,F){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Bo(d,_)+(F?" "+F:"")})}function _o(d,y){d.info(function(){return"TIMEOUT: "+y})}Rs.prototype.info=function(){};function Bo(d,y){if(!d.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(d=0;d<_.length;d++)if(Array.isArray(_[d])){var F=_[d];if(!(2>F.length)){var G=F[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ce=1;ce<G.length;ce++)G[ce]=""}}}}return li(_)}catch{return y}}var hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oa;function _n(){}b(_n,ta),_n.prototype.g=function(){return new XMLHttpRequest},_n.prototype.i=function(){return{}},oa=new _n;function kr(d,y,_,F){this.j=d,this.i=y,this.l=_,this.R=F||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jA}function jA(){this.i=null,this.g="",this.h=!1}var bo={},Co={};function Ar(d,y,_){d.L=1,d.v=$n(_t(y)),d.m=_,d.P=!0,Ot(d,null)}function Ot(d,y){d.F=Date.now(),fi(d),d.A=_t(d.v);var _=d.A,F=d.R;Array.isArray(F)||(F=[String(F)]),Bn(_.i,"t",F),d.C=0,_=d.j.J,d.h=new jA,d.g=uh(d.j,_?y:null,!d.m),0<d.O&&(d.M=new Un(w(d.Y,d,d.g),d.O)),y=d.U,_=d.g,F=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(yo[0]=G.toString()),G=yo);for(var X=0;X<G.length;X++){var ce=An(_,G[X],F||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=d.H?B(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),ci(),Wn(d.i,d.u,d.A,d.l,d.R,d.m)}kr.prototype.ca=function(d){d=d.target;const y=this.M;y&&Jn(d)==3?y.j():this.Y(d)},kr.prototype.Y=function(d){try{if(d==this.g)e:{const Qt=Jn(this.g);var y=this.g.Ba();const ha=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Uc(this.g)))){this.J||Qt!=4||y==7||(y==8||0>=ha?ci(3):ci(2)),Aa(this);var _=this.g.Z();this.X=_;t:if(lr(this)){var F=Uc(this.g);d="";var G=F.length,X=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){us(this),rt(this);var ce="";break t}this.h.i=new l.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,d+=this.h.i.decode(F[y],{stream:!(X&&y==G-1)});F.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,Ee(this.i,this.u,this.A,this.l,this.R,Qt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,en=this.g;if((lt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(lt)){var et=lt;break t}}et=null}if(_=et)cs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mi(this,_);else{this.o=!1,this.s=3,Ut(12),us(this),rt(this);break e}}if(this.P){_=!0;let Wt;for(;!this.J&&this.C<ce.length;)if(Wt=qt(this,ce),Wt==Co){Qt==4&&(this.s=4,Ut(14),_=!1),cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==bo){this.s=4,Ut(15),cs(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else cs(this.i,this.l,Wt,null),mi(this,Wt);if(lr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||ce.length!=0||this.h.h||(this.s=1,Ut(16),_=!1),this.o=this.o&&_,!_)cs(this.i,this.l,ce,"[Invalid Chunked Response]"),us(this),rt(this);else if(0<ce.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),zA(dt),dt.M=!0,Ut(11))}}else cs(this.i,this.l,ce,null),mi(this,ce);Qt==4&&us(this),this.o&&!this.J&&(Qt==4?Qc(this.j,this):(this.o=!1,fi(this)))}else Cp(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),us(this),rt(this)}}}catch{}finally{}};function lr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function qt(d,y){var _=d.C,F=y.indexOf(`
`,_);return F==-1?Co:(_=Number(y.substring(_,F)),isNaN(_)?bo:(F+=1,F+_>y.length?Co:(y=y.slice(F,F+_),d.C=F+_,y)))}kr.prototype.cancel=function(){this.J=!0,us(this)};function fi(d){d.S=Date.now()+d.I,Eo(d,d.I)}function Eo(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=di(w(d.ba,d),y)}function Aa(d){d.B&&(l.clearTimeout(d.B),d.B=null)}kr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(_o(this.i,this.A),this.L!=2&&(ci(),Ut(17)),us(this),this.s=2,rt(this)):Eo(this,this.S-d)};function rt(d){d.j.G==0||d.J||Qc(d.j,d)}function us(d){Aa(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Ai(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function mi(d,y){try{var _=d.j;if(_.G!=0&&(_.g==d||Oe(_.h,d))){if(!d.K&&Oe(_.h,d)&&_.G==3){try{var F=_.Da.g.parse(y)}catch{F=null}if(Array.isArray(F)&&F.length==3){var G=F;if(G[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<d.F)qA(_),VA(_);else break e;KA(_),Ut(18)}}else _.za=G[1],0<_.za-_.T&&37500>G[2]&&_.F&&_.v==0&&!_.C&&(_.C=di(w(_.Za,_),6e3));if(1>=ds(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else vi(_,11)}else if((d.K||_.g==d)&&qA(_),!E(y))for(G=_.Da.g.parse(y),y=0;y<G.length;y++){let et=G[y];if(_.T=et[0],et=et[1],_.G==2)if(et[0]=="c"){_.K=et[1],_.ia=et[2];const dt=et[3];dt!=null&&(_.la=dt,_.j.info("VER="+_.la));const Qt=et[4];Qt!=null&&(_.Aa=Qt,_.j.info("SVER="+_.Aa));const ha=et[5];ha!=null&&typeof ha=="number"&&0<ha&&(F=1.5*ha,_.L=F,_.j.info("backChannelRequestTimeoutMs_="+F)),F=_;const Wt=d.g;if(Wt){const $A=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($A){var X=F.h;X.g||$A.indexOf("spdy")==-1&&$A.indexOf("quic")==-1&&$A.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(At(X,X.h),X.h=null))}if(F.D){const js=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(F.ya=js,Ue(F.I,F.D,js))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-d.F,_.j.info("Handshake RTT: "+_.R+"ms")),F=_;var ce=d;if(F.qa=WA(F,F.J?F.ia:null,F.W),ce.K){pi(F.h,ce);var lt=ce,en=F.L;en&&(lt.I=en),lt.B&&(Aa(lt),fi(lt)),F.g=ce}else gs(F);0<_.i.length&&da(_)}else et[0]!="stop"&&et[0]!="close"||vi(_,7);else _.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?vi(_,7):HA(_):et[0]!="noop"&&_.l&&_.l.ta(et),_.v=0)}}ci(4)}catch{}}var gi=class{constructor(d,y){this.g=d,this.map=y}};function Io(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function To(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ds(d){return d.h?1:d.g?d.g.size:0}function Oe(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function At(d,y){d.g?d.g.add(y):d.h=y}function pi(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Io.prototype.cancel=function(){if(this.i=hs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function hs(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.D);return y}return x(d.i)}function fs(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var y=[],_=d.length,F=0;F<_;F++)y.push(d[F]);return y}y=[],_=0;for(F in d)y[_++]=d[F];return y}function ko(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var y=[];d=d.length;for(var _=0;_<d;_++)y.push(_);return y}y=[],_=0;for(const F in d)y[_++]=F;return y}}}function Le(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var _=ko(d),F=fs(d),G=F.length,X=0;X<G;X++)y.call(void 0,F[X],_&&_[X],d)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sr(d,y){if(d){d=d.split("&");for(var _=0;_<d.length;_++){var F=d[_].indexOf("="),G=null;if(0<=F){var X=d[_].substring(0,F);G=d[_].substring(F+1)}else X=d[_];y(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ke(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ke){this.h=d.h,yi(this,d.j),this.o=d.o,this.g=d.g,Gr(this,d.s),this.l=d.l;var y=d.i,_=new Re;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Nr(this,_),this.m=d.m}else d&&(y=String(d).match(mt))?(this.h=!1,yi(this,y[1]||"",!0),this.o=cr(y[2]||""),this.g=cr(y[3]||"",!0),Gr(this,y[4]),this.l=cr(y[5]||"",!0),Nr(this,y[6]||"",!0),this.m=cr(y[7]||"")):(this.h=!1,this.i=new Re(null,this.h))}ke.prototype.toString=function(){var d=[],y=this.j;y&&d.push(ur(y,ms,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(ur(y,ms,!0),"@"),d.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&d.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(ur(_,_.charAt(0)=="/"?q:P,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",ur(_,Be)),d.join("")};function _t(d){return new ke(d)}function yi(d,y,_){d.j=_?cr(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Gr(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Nr(d,y,_){y instanceof Re?(d.i=y,dr(d.i,d.h)):(_||(y=ur(y,ne)),d.i=new Re(y,d.h))}function Ue(d,y,_){d.i.set(y,_)}function $n(d){return Ue(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function cr(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ur(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,la),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function la(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ms=/[#\/\?@]/g,P=/[#\?:]/g,q=/[#\?]/g,ne=/[#\?@]/g,Be=/#/g;function Re(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function De(d){d.g||(d.g=new Map,d.h=0,d.i&&Sr(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}t=Re.prototype,t.add=function(d,y){De(this),this.i=null,d=Ne(this,d);var _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function He(d,y){De(d),y=Ne(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function ln(d,y){return De(d),y=Ne(d,y),d.g.has(y)}t.forEach=function(d,y){De(this),this.g.forEach(function(_,F){_.forEach(function(G){d.call(y,G,F,this)},this)},this)},t.na=function(){De(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let F=0;F<y.length;F++){const G=d[F];for(let X=0;X<G.length;X++)_.push(y[F])}return _},t.V=function(d){De(this);let y=[];if(typeof d=="string")ln(this,d)&&(y=y.concat(this.g.get(Ne(this,d))));else{d=Array.from(this.g.values());for(let _=0;_<d.length;_++)y=y.concat(d[_])}return y},t.set=function(d,y){return De(this),this.i=null,d=Ne(this,d),ln(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Bn(d,y,_){He(d,y),0<_.length&&(d.i=null,d.g.set(Ne(d,y),x(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var F=y[_];const X=encodeURIComponent(String(F)),ce=this.V(F);for(F=0;F<ce.length;F++){var G=X;ce[F]!==""&&(G+="="+encodeURIComponent(String(ce[F]))),d.push(G)}}return this.i=d.join("&")};function Ne(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function dr(d,y){y&&!d.j&&(De(d),d.i=null,d.g.forEach(function(_,F){var G=F.toLowerCase();F!=G&&(He(this,F),Bn(this,G,_))},d)),d.j=y}function it(d,y){const _=new Rs;if(l.Image){const F=new Image;F.onload=C(Zn,_,"TestLoadImage: loaded",!0,y,F),F.onerror=C(Zn,_,"TestLoadImage: error",!1,y,F),F.onabort=C(Zn,_,"TestLoadImage: abort",!1,y,F),F.ontimeout=C(Zn,_,"TestLoadImage: timeout",!1,y,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=d}else y(!1)}function DA(d,y){const _=new Rs,F=new AbortController,G=setTimeout(()=>{F.abort(),Zn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:F.signal}).then(X=>{clearTimeout(G),X.ok?Zn(_,"TestPingServer: ok",!0,y):Zn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Zn(_,"TestPingServer: error",!1,y)})}function Zn(d,y,_,F,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),F(_)}catch{}}function Ic(){this.g=new Fs}function Tc(d,y,_){const F=_||"";try{Le(d,function(G,X){let ce=G;h(G)&&(ce=li(G)),y.push(F+X+"="+encodeURIComponent(ce))})}catch(G){throw y.push(F+"type="+encodeURIComponent("_badmap")),G}}function qr(d){this.l=d.Ub||null,this.j=d.eb||!1}b(qr,ta),qr.prototype.g=function(){return new ca(this.l,this.j)},qr.prototype.i=function(d){return function(){return d}}({});function ca(d,y){Mt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ca,Mt),t=ca.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Ur(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||l).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ft(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ua(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ua(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ft(this):Ur(this),this.readyState==3&&ua(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ft(this))},t.Qa=function(d){this.g&&(this.response=d,Ft(this))},t.ga=function(){this.g&&Ft(this)};function Ft(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ur(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function Ur(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function kc(d){let y="";return M(d,function(_,F){y+=F,y+=":",y+=_,y+=`\r
`}),y}function MA(d,y,_){e:{for(F in _){var F=!1;break e}F=!0}F||(_=kc(_),typeof d=="string"?_!=null&&encodeURIComponent(String(_)):Ue(d,y,_))}function Et(d){Mt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Et,Mt);var ah=/^https?$/i,Sc=["POST","PUT"];t=Et.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,_,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oa.g(),this.v=this.o?Tr(this.o):Tr(oa),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(X){oh(this,X);return}if(d=_||"",_=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var G in F)_.set(G,F[G]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const X of F.keys())_.set(X,F.get(X));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),G=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Sc,y,void 0))||F||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of _)this.g.setRequestHeader(X,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hr(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){oh(this,X)}};function oh(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Nc(d),OA(d)}function Nc(d){d.A||(d.A=!0,Yt(d,"complete"),Yt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Yt(this,"complete"),Yt(this,"abort"),OA(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),OA(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qe(this):this.bb())},t.bb=function(){qe(this)};function qe(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Jn(d)!=4||d.Z()!=2)){if(d.u&&Jn(d)==4)LA(d.Ea,0,d);else if(Yt(d,"readystatechange"),Jn(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var F;if(F=ce===0){var G=String(d.D).match(mt)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),F=!ah.test(G?G.toLowerCase():"")}_=F}if(_)Yt(d,"complete"),Yt(d,"success");else{d.m=6;try{var X=2<Jn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Nc(d)}}finally{OA(d)}}}}function OA(d,y){if(d.g){hr(d);const _=d.g,F=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Yt(d,"ready");try{_.onreadystatechange=F}catch{}}}function hr(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Jn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),wo(y)}};function Uc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Cp(d){const y={};d=(d.g&&2<=Jn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<d.length;F++){if(E(d[F]))continue;var _=D(d[F]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=y[G]||[];y[G]=X,X.push(_)}I(y,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function Ah(d){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wi("baseRetryDelayMs",5e3,d),this.cb=wi("retryDelaySeedMs",1e4,d),this.Wa=wi("forwardChannelMaxRetries",2,d),this.wa=wi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Io(d&&d.concurrentRequestLimit),this.Da=new Ic,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ah.prototype,t.la=8,t.G=1,t.connect=function(d,y,_,F){Ut(0),this.W=d,this.H=y||{},_&&F!==void 0&&(this.H.OSID=_,this.H.OAID=F),this.F=this.X,this.I=WA(this,null,this.W),da(this)};function HA(d){if(lh(d),d.G==3){var y=d.U++,_=_t(d.I);if(Ue(_,"SID",d.K),Ue(_,"RID",y),Ue(_,"TYPE","terminate"),So(d,_),y=new kr(d,d.j,y),y.L=2,y.v=$n(_t(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=y.v,_=!0),_||(y.g=uh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),fi(y)}ch(d)}function VA(d){d.g&&(zA(d),d.g.cancel(),d.g=null)}function lh(d){VA(d),d.u&&(l.clearTimeout(d.u),d.u=null),qA(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function da(d){if(!To(d.h)&&!d.s){d.s=!0;var y=d.Ga;Ae||ee(),z||(Ae(),z=!0),ae.add(y,d),d.B=0}}function Ep(d,y){return ds(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=di(w(d.Ga,d,y),Pc(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new kr(this,this.j,d);let X=this.o;if(this.S&&(X?(X=B(X),Q(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var F=this.i[_];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(y+=F,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Fc(this,G,y),_=_t(this.I),Ue(_,"RID",d),Ue(_,"CVER",22),this.D&&Ue(_,"X-HTTP-Session-Id",this.D),So(this,_),X&&(this.O?y="headers="+encodeURIComponent(String(kc(X)))+"&"+y:this.m&&MA(_,this.m,X)),At(this.h,G),this.Ua&&Ue(_,"TYPE","init"),this.P?(Ue(_,"$req",y),Ue(_,"SID","null"),G.T=!0,Ar(G,_,null)):Ar(G,_,y),this.G=2}}else this.G==3&&(d?Fr(this,d):this.i.length==0||To(this.h)||Fr(this))};function Fr(d,y){var _;y?_=y.l:_=d.U++;const F=_t(d.I);Ue(F,"SID",d.K),Ue(F,"RID",_),Ue(F,"AID",d.T),So(d,F),d.m&&d.o&&MA(F,d.m,d.o),_=new kr(d,d.j,_,d.B+1),d.m===null&&(_.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Fc(d,_,1e3),_.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),At(d.h,_),Ar(_,F,y)}function So(d,y){d.H&&M(d.H,function(_,F){Ue(y,F,_)}),d.l&&Le({},function(_,F){Ue(y,F,_)})}function Fc(d,y,_){_=Math.min(d.i.length,_);var F=d.l?w(d.l.Na,d.l,d):null;e:{var G=d.i;let X=-1;for(;;){const ce=["count="+_];X==-1?0<_?(X=G[0].g,ce.push("ofs="+X)):X=0:ce.push("ofs="+X);let lt=!0;for(let en=0;en<_;en++){let et=G[en].g;const dt=G[en].map;if(et-=X,0>et)X=Math.max(0,G[en].g-100),lt=!1;else try{Tc(dt,ce,"req"+et+"_")}catch{F&&F(dt)}}if(lt){F=ce.join("&");break e}}}return d=d.i.splice(0,_),y.D=d,F}function gs(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;Ae||ee(),z||(Ae(),z=!0),ae.add(y,d),d.v=0}}function KA(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=di(w(d.Fa,d),Pc(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,GA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=di(w(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),VA(this),GA(this))};function zA(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function GA(d){d.g=new kr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=_t(d.qa);Ue(y,"RID","rpc"),Ue(y,"SID",d.K),Ue(y,"AID",d.T),Ue(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ue(y,"TO",d.ja),Ue(y,"TYPE","xmlhttp"),So(d,y),d.m&&d.o&&MA(y,d.m,d.o),d.L&&(d.g.I=d.L);var _=d.g;d=d.ia,_.L=1,_.v=$n(_t(y)),_.m=null,_.P=!0,Ot(_,d)}t.Za=function(){this.C!=null&&(this.C=null,VA(this),KA(this),Ut(19))};function qA(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Qc(d,y){var _=null;if(d.g==y){qA(d),zA(d),d.g=null;var F=2}else if(Oe(d.h,y))_=y.D,pi(d.h,y),F=1;else return;if(d.G!=0){if(y.o)if(F==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var G=d.B;F=ia(),Yt(F,new ui(F,_)),da(d)}else gs(d);else if(G=y.s,G==3||G==0&&0<y.X||!(F==1&&Ep(d,y)||F==2&&KA(d)))switch(_&&0<_.length&&(y=d.h,y.i=y.i.concat(_)),G){case 1:vi(d,5);break;case 4:vi(d,10);break;case 3:vi(d,6);break;default:vi(d,2)}}}function Pc(d,y){let _=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(_*=2),_*y}function vi(d,y){if(d.j.info("Error code "+y),y==2){var _=w(d.fb,d),F=d.Xa;const G=!F;F=new ke(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||yi(F,"https"),$n(F),G?it(F.toString(),_):DA(F.toString(),_)}else Ut(2);d.G=0,d.l&&d.l.sa(y),ch(d),lh(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function ch(d){if(d.G=0,d.ka=[],d.l){const y=hs(d.h);(y.length!=0||d.i.length!=0)&&(U(d.ka,y),U(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function WA(d,y,_){var F=_ instanceof ke?_t(_):new ke(_);if(F.g!="")y&&(F.g=y+"."+F.g),Gr(F,F.s);else{var G=l.location;F=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var X=new ke(null);F&&yi(X,F),y&&(X.g=y),G&&Gr(X,G),_&&(X.l=_),F=X}return _=d.D,y=d.ya,_&&y&&Ue(F,_,y),Ue(F,"VER",d.la),So(d,F),F}function uh(d,y,_){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Et(new qr({eb:_})):new Et(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rc(){}t=Rc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function No(){}No.prototype.g=function(d,y){return new gn(d,y)};function gn(d,y){Mt.call(this),this.g=new Ah(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!E(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!E(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Wr(this)}b(gn,Mt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){HA(this.g)},gn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.u&&(_={},_.__data__=li(d),d=_);y.i.push(new gi(y.Ya++,d)),y.G==3&&da(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,HA(this.g),delete this.g,gn.aa.N.call(this)};function Ls(d){na.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}b(Ls,na);function dh(){ra.call(this),this.status=1}b(dh,ra);function Wr(d){this.g=d}b(Wr,Rc),Wr.prototype.ua=function(){Yt(this.g,"a")},Wr.prototype.ta=function(d){Yt(this.g,new Ls(d))},Wr.prototype.sa=function(d){Yt(this.g,new dh)},Wr.prototype.ra=function(){Yt(this.g,"b")},No.prototype.createWebChannel=No.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Kk=function(){return new No},Vk=function(){return ia()},Hk=qn,Jy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hi.NO_ERROR=0,hi.TIMEOUT=8,hi.HTTP_ERROR=6,Vf=hi,aa.COMPLETE="complete",Ok=aa,vo.EventType=Qs,Qs.OPEN="a",Qs.CLOSE="b",Qs.ERROR="c",Qs.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,fu=vo,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,Mk=Et}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new zv("@firebase/firestore");function dl(){return uA.logLevel}function se(t,...e){if(uA.logLevel<=Ze.DEBUG){const n=e.map(sx);uA.debug(`Firestore (${xc}): ${t}`,...n)}}function Xt(t,...e){if(uA.logLevel<=Ze.ERROR){const n=e.map(sx);uA.error(`Firestore (${xc}): ${t}`,...n)}}function ec(t,...e){if(uA.logLevel<=Ze.WARN){const n=e.map(sx);uA.warn(`Firestore (${xc}): ${t}`,...n)}}function sx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: `+t;throw Xt(e),new Error(e)}function Ie(t,e){t||be()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends As{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class rD{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new nD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Ln(e)}}class sD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new aD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=AD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function tc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function Gk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ge(0,0))}static max(){return new Se(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return md.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof md?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ot extends md{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const lD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends md{construct(e,n,r){return new Nt(e,n,r)}static isValidIdentifier(e){return lD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ue(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ue(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new ue(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ot.fromString(e))}static fromName(e){return new ge(ot.fromString(e).popFirst(5))}static empty(){return new ge(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ot(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Xy(t){return t.fields.find(e=>e.kind===2)}function Lo(t){return t.fields.filter(e=>e.kind!==2)}Lm.UNKNOWN_ID=-1;class Kf{constructor(e,n){this.fieldPath=e,this.kind=n}}class gd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new gd(0,Vr.min())}}function qk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Vr(s,ge.empty(),e)}function Wk(t){return new Vr(t.readTime,t.key,-1)}class Vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vr(Se.min(),ge.empty(),-1)}static max(){return new Vr(Se.max(),ge.empty(),-1)}}function ax(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==$k)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(m=>{o[h]=m,++l,l===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Pu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=ox(r.target.error);this.V.reject(new Pu(e,s))}}static open(e,n,r,s){try{return new Pg(n,e.transaction(s,r))}catch(i){throw new Pu(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new uD(n)}}class Wa{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Wa.S(hn())===12.2&&Xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),Do(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Kv())return!1;if(Wa.v())return!0;const e=hn(),n=Wa.S(e),r=0<n&&n<10,s=Jk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ue(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ue(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Pu(e,o))},s.onupgradeneeded=i=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=Pg.open(this.db,e,i?"readonly":"readwrite",r),u=s(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),$.reject(h))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,h=u.name!=="FirebaseError"&&o<3;if(se("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Jk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class cD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Do(this.B.delete())}}class Pu extends ue{constructor(e,n){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function uo(t){return t.name==="IndexedDbTransactionError"}class uD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Do(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),Do(this.store.add(e))}get(e){return Do(this.store.get(e)).next(n=>(n===void 0&&(n=null),se("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),Do(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),Do(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new $((o,l)=>{i.onerror=u=>{l(u.target.error)},i.onsuccess=u=>{o(u.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(l,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new $((r,s)=>{n.onerror=i=>{const o=ox(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new $((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const u=new cD(l),h=n(l.primaryKey,l.value,u);if(h instanceof $){const m=h.catch(p=>(u.done(),$.reject(p)));r.push(m)}u.isDone?s():u.K===null?l.continue():l.continue(u.K)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Do(t){return new $((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=ox(r.target.error);n(s)}})}let Hb=!1;function ox(t){const e=Wa.S(hn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hb||(Hb=!0,setTimeout(()=>{throw r},0)),r}}return t}class dD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){se("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{se("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){uo(n)?se("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await co(n)}await this.X(6e4)})}}class hD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return $.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return se("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(l=>{s-=l,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(l=>(se("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Wk(i);ax(o,r)>0&&(r=o)}),new Vr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vr.oe=-1;function Rg(t){return t==null}function pd(t){return t===0&&1/t==-1/0}function Xk(t){return typeof t=="number"&&Number.isInteger(t)&&!pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vb(e)),e=fD(t.get(n),e);return Vb(e)}function fD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Vb(t){return t+""}function Ks(t){const e=t.length;if(Ie(e>=2),e===2)return Ie(t.charAt(0)===""&&t.charAt(1)===""),ot.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&be(),t.charAt(o+1)){case"":const l=t.substring(i,o);let u;s.length===0?u=l:(s+=l,u=s,s=""),r.push(u);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:be()}i=o+2}return new ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e){return[t,sr(e)]}function Yk(t,e,n){return[t,sr(e),n]}const mD={},gD=["prefixPath","collectionGroup","readTime","documentId"],pD=["prefixPath","collectionGroup","documentId"],yD=["collectionGroup","readTime","prefixPath","documentId"],wD=["canonicalId","targetId"],vD=["targetId","path"],xD=["path","targetId"],_D=["collectionId","parent"],BD=["indexId","uid"],bD=["uid","sequenceNumber"],CD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ED=["indexId","uid","orderedDocumentKey"],ID=["userId","collectionPath","documentId"],TD=["userId","collectionPath","largestBatchId"],kD=["userId","collectionGroup","largestBatchId"],eS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SD=[...eS,"documentOverlays"],tS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nS=tS,Ax=[...nS,"indexConfiguration","indexState","indexEntries"],ND=Ax,UD=[...Ax,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends Zk{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function fn(t,e){const n=Ce(t);return Wa.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function SA(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vh(this.root,e,this.comparator,!0)}}class Vh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??En.RED,this.left=s??En.EMPTY,this.right=i??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new En(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,s,i){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gb(this.data.getIterator())}getIteratorFrom(e){return new Gb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Gb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new xr([])}unionWith(e){let n=new ft(Nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sS("Invalid base64 string: "+i):i}}(e);return new Kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const FD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=FD.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ya(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cx(t){const e=t.mapValue.fields.__previous_value__;return lx(e)?cx(e):e}function yd(t){const e=$i(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class eo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gf={nullValue:"NULL_VALUE"};function dA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lx(t)?4:iS(t)?9007199254740991:Lg(t)?10:11:be()}function Ys(t,e){if(t===e)return!0;const n=dA(t);if(n!==dA(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yd(t).isEqual(yd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=$i(s.timestampValue),l=$i(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ya(s.bytesValue).isEqual(Ya(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Tt(s.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Tt(s.integerValue)===Tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Tt(s.doubleValue),l=Tt(i.doubleValue);return o===l?pd(o)===pd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return tc(t.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(zb(o)!==zb(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Ys(o[u],l[u])))return!1;return!0}(t,e);default:return be()}}function wd(t,e){return(t.values||[]).find(n=>Ys(n,e))!==void 0}function to(t,e){if(t===e)return 0;const n=dA(t),r=dA(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Tt(i.integerValue||i.doubleValue),u=Tt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return qb(t.timestampValue,e.timestampValue);case 4:return qb(yd(t),yd(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ya(i),u=Ya(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const m=je(l[h],u[h]);if(m!==0)return m}return je(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=je(Tt(i.latitude),Tt(o.latitude));return l!==0?l:je(Tt(i.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,m;const p=i.fields||{},w=o.fields||{},C=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=(u=w.value)===null||u===void 0?void 0:u.arrayValue,x=je(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0);return x!==0?x:Wb(C,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Qa.mapValue&&o===Qa.mapValue)return 0;if(i===Qa.mapValue)return 1;if(o===Qa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const w=je(u[p],m[p]);if(w!==0)return w;const C=to(l[u[p]],h[m[p]]);if(C!==0)return C}return je(u.length,m.length)}(t.mapValue,e.mapValue);default:throw be()}}function qb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=$i(t),r=$i(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function Wb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=to(n[s],r[s]);if(i)return i}return je(n.length,r.length)}function nc(t){return ew(t)}function ew(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=$i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ya(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ew(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ew(n.fields[o])}`;return s+"}"}(t.mapValue):be()}function vd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tw(t){return!!t&&"integerValue"in t}function xd(t){return!!t&&"arrayValue"in t}function $b(t){return!!t&&"nullValue"in t}function Zb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qf(t){return!!t&&"mapValue"in t}function Lg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ru(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return SA(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ru(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ru(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const aS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function PD(t){return"nullValue"in t?Gf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?vd(eo.empty(),ge.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Lg(t)?aS:{mapValue:{}}:be()}function RD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?vd(eo.empty(),ge.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?aS:"mapValue"in t?Lg(t)?{mapValue:{}}:Qa:be()}function Jb(t,e){const n=to(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Xb(t,e){const n=to(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(n)}setAll(e){let n=Nt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ru(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());qf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];qf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){SA(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mn(Ru(this.value))}}function oS(t){const e=[];return SA(t.fields,(n,r)=>{const s=new Nt([n]);if(qf(r)){const i=oS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new xr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,Se.min(),Se.min(),Se.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,s){return new Vt(e,1,n,Se.min(),r,s,0)}static newNoDocument(e,n){return new Vt(e,2,n,Se.min(),Se.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,Se.min(),Se.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.position=e,this.inclusive=n}}function Yb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ge.comparator(ge.fromName(o.referenceValue),n.key):r=to(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function eC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ys(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n="asc"){this.field=e,this.dir=n}}function LD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{}class Je extends AS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jD(e,n,r):n==="array-contains"?new OD(e,r):n==="in"?new fS(e,r):n==="not-in"?new HD(e,r):n==="array-contains-any"?new VD(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DD(e,r):new MD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(to(n,this.value)):n!==null&&dA(this.value)===dA(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ct extends AS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ct(e,n)}matches(e){return sc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sc(t){return t.op==="and"}function nw(t){return t.op==="or"}function ux(t){return lS(t)&&sc(t)}function lS(t){for(const e of t.filters)if(e instanceof ct)return!1;return!0}function rw(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(ux(t))return t.filters.map(e=>rw(e)).join(",");{const e=t.filters.map(n=>rw(n)).join(",");return`${t.op}(${e})`}}function cS(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&Ys(r.value,s.value)}(t,e):t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&cS(o,s.filters[l]),!0):!1}(t,e):void be()}function uS(t,e){const n=t.filters.concat(e);return ct.create(n,t.op)}function dS(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${nc(n.value)}`}(t):t instanceof ct?function(n){return n.op.toString()+" {"+n.getFilters().map(dS).join(" ,")+"}"}(t):"Filter"}class jD extends Je{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class DD extends Je{constructor(e,n){super(e,"in",n),this.keys=hS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MD extends Je{constructor(e,n){super(e,"not-in",n),this.keys=hS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class OD extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xd(n)&&wd(n.arrayValue,this.value)}}class fS extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wd(this.value.arrayValue,n)}}class HD extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wd(this.value.arrayValue,n)}}class VD extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function sw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new KD(t,e,n,r,s,i,o)}function hA(t){const e=Ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),e.ue=n}return e.ue}function Hd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eC(t.startAt,e.startAt)&&eC(t.endAt,e.endAt)}function jm(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Dm(t,e){return t.filters.filter(n=>n instanceof Je&&n.field.isEqual(e))}function tC(t,e,n){let r=Gf,s=!0;for(const i of Dm(t,e)){let o=Gf,l=!0;switch(i.op){case"<":case"<=":o=PD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,l=!1;break;case"!=":case"not-in":o=Gf}Jb({value:r,inclusive:s},{value:o,inclusive:l})<0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Jb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function nC(t,e,n){let r=Qa,s=!0;for(const i of Dm(t,e)){let o=Qa,l=!0;switch(i.op){case">=":case">":o=RD(i.value),l=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,l=!1;break;case"!=":case"not-in":o=Qa}Xb({value:r,inclusive:s},{value:o,inclusive:l})>0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Xb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mS(t,e,n,r,s,i,o,l){return new _c(t,e,n,r,s,i,o,l)}function Vd(t){return new _c(t)}function rC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gS(t){return t.collectionGroup!==null}function Lu(t){const e=Ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ft(Nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new _d(i,r))}),n.has(Nt.keyField().canonicalString())||e.ce.push(new _d(Nt.keyField(),r))}return e.ce}function Mr(t){const e=Ce(t);return e.le||(e.le=zD(e,Lu(t))),e.le}function zD(t,e){if(t.limitType==="F")return sw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new _d(s.field,i)});const n=t.endAt?new rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rc(t.startAt.position,t.startAt.inclusive):null;return sw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iw(t,e){const n=t.filters.concat([e]);return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mm(t,e,n){return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jg(t,e){return Hd(Mr(t),Mr(e))&&t.limitType===e.limitType}function pS(t){return`${hA(Mr(t))}|lt:${t.limitType}`}function hl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dS(s)).join(", ")}]`),Rg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>nc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>nc(s)).join(",")),`Target(${r})`}(Mr(t))}; limitType=${t.limitType})`}function Kd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ge.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Lu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Yb(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Lu(r),s)||r.endAt&&!function(o,l,u){const h=Yb(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Lu(r),s))}(t,e)}function yS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wS(t){return(e,n)=>{let r=!1;for(const s of Lu(t)){const i=GD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function GD(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?to(u,h):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){SA(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return rS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new yt(ge.comparator);function Lr(){return qD}const vS=new yt(ge.comparator);function mu(...t){let e=vS;for(const n of t)e=e.insert(n.key,n);return e}function xS(t){let e=vS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zs(){return ju()}function _S(){return ju()}function ju(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const WD=new yt(ge.comparator),$D=new ft(ge.comparator);function Me(...t){let e=$D;for(const n of t)e=e.add(n);return e}const ZD=new ft(je);function dx(){return ZD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function BS(t){return{integerValue:""+t}}function JD(t,e){return Xk(e)?BS(e):hx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this._=void 0}}function XD(t,e,n){return t instanceof ic?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&lx(i)&&(i=cx(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof fA?CS(t,e):t instanceof mA?ES(t,e):function(s,i){const o=bS(s,i),l=sC(o)+sC(s.Pe);return tw(o)&&tw(s.Pe)?BS(l):hx(s.serializer,l)}(t,e)}function YD(t,e,n){return t instanceof fA?CS(t,e):t instanceof mA?ES(t,e):n}function bS(t,e){return t instanceof Bd?function(r){return tw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ic extends Dg{}class fA extends Dg{constructor(e){super(),this.elements=e}}function CS(t,e){const n=IS(e);for(const r of t.elements)n.some(s=>Ys(s,r))||n.push(r);return{arrayValue:{values:n}}}class mA extends Dg{constructor(e){super(),this.elements=e}}function ES(t,e){let n=IS(e);for(const r of t.elements)n=n.filter(s=>!Ys(s,r));return{arrayValue:{values:n}}}class Bd extends Dg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function sC(t){return Tt(t.integerValue||t.doubleValue)}function IS(t){return xd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.field=e,this.transform=n}}function eM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fA&&s instanceof fA||r instanceof mA&&s instanceof mA?tc(r.elements,s.elements,Ys):r instanceof Bd&&s instanceof Bd?Ys(r.Pe,s.Pe):r instanceof ic&&s instanceof ic}(t.transform,e.transform)}class tM{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Og{}function TS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hg(t.key,On.none()):new Bc(t.key,t.data,On.none());{const n=t.data,r=Mn.empty();let s=new ft(Nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ea(t.key,r,new xr(s.toArray()),On.none())}}function nM(t,e,n){t instanceof Bc?function(s,i,o){const l=s.value.clone(),u=aC(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ea?function(s,i,o){if(!Wf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=aC(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(kS(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Du(t,e,n,r){return t instanceof Bc?function(i,o,l,u){if(!Wf(i.precondition,o))return l;const h=i.value.clone(),m=oC(i.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ea?function(i,o,l,u){if(!Wf(i.precondition,o))return l;const h=oC(i.fieldTransforms,u,o),m=o.data;return m.setAll(kS(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Wf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function rM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=bS(r.transform,s||null);i!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,i))}return n||null}function iC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&tc(r,s,(i,o)=>eM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bc extends Og{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ea extends Og{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aC(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,YD(o,l,n[s]))}return r}function oC(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,XD(i,o,e))}return r}class Hg extends Og{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SS extends Og{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&nM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_S();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=TS(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,(n,r)=>iC(n,r))&&tc(this.baseMutations,e.baseMutations,(n,r)=>iC(n,r))}}class mx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=function(){return WD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,tt;function iM(t){switch(t){default:return be();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function NS(t){if(t===void 0)return Xt("GRPC error has no .code"),te.UNKNOWN;switch(t){case nn.OK:return te.OK;case nn.CANCELLED:return te.CANCELLED;case nn.UNKNOWN:return te.UNKNOWN;case nn.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case nn.INTERNAL:return te.INTERNAL;case nn.UNAVAILABLE:return te.UNAVAILABLE;case nn.UNAUTHENTICATED:return te.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case nn.NOT_FOUND:return te.NOT_FOUND;case nn.ALREADY_EXISTS:return te.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return te.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case nn.ABORTED:return te.ABORTED;case nn.OUT_OF_RANGE:return te.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return te.UNIMPLEMENTED;case nn.DATA_LOSS:return te.DATA_LOSS;default:return be()}}(tt=nn||(nn={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new Xo([4294967295,4294967295],0);function AC(t){const e=aM().encode(t),n=new Dk;return n.update(e),new Uint8Array(n.digest())}function lC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Xo([n,r],0),new Xo([s,i],0)]}class px{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gu(`Invalid padding: ${n}`);if(r<0)throw new gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xo.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Xo.fromNumber(r)));return s.compare(oM)===1&&(s=new Xo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=AC(e),[r,s]=lC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new px(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=AC(e),[r,s]=lC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Gd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zd(Se.min(),s,new yt(je),Lr(),Me())}}class Gd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gd(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class US{constructor(e,n){this.targetId=e,this.me=n}}class FS{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cC{constructor(){this.fe=0,this.ge=dC(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),n=Me(),r=Me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:be()}}),new Gd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class AM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lr(),this.qe=uC(),this.Qe=new yt(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jm(i))if(r===0){const o=new ge(i.path);this.Ue(n,o,Vt.newNoDocument(o,Se.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ya(r).toUint8Array()}catch(u){if(u instanceof sS)return ec("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new px(o,s,i)}catch(u){return ec(u instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&jm(l.target)){const u=new ge(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Vt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Me();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new zd(e,n,this.Qe,this.ke,r);return this.ke=Lr(),this.qe=uC(),this.Qe=new yt(je),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uC(){return new yt(ge.comparator)}function dC(){return new yt(ge.comparator)}const lM={asc:"ASCENDING",desc:"DESCENDING"},cM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uM={and:"AND",or:"OR"};class dM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function aw(t,e){return t.useProto3Json||Rg(e)?e:{value:e}}function ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hM(t,e){return ac(t,e.toTimestamp())}function ir(t){return Ie(!!t),Se.fromTimestamp(function(n){const r=$i(n);return new Ge(r.seconds,r.nanos)}(t))}function yx(t,e){return ow(t,e).canonicalString()}function ow(t,e){const n=function(s){return new ot(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PS(t){const e=ot.fromString(t);return Ie(KS(e)),e}function Om(t,e){return yx(t.databaseId,e.path)}function Yo(t,e){const n=PS(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(jS(n))}function RS(t,e){return yx(t.databaseId,e)}function LS(t){const e=PS(t);return e.length===4?ot.emptyPath():jS(e)}function Aw(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jS(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hC(t,e,n){return{name:Om(t,e),fields:n.value.mapValue.fields}}function fM(t,e,n){const r=Yo(t,e.name),s=ir(e.updateTime),i=e.createTime?ir(e.createTime):Se.min(),o=new Mn({mapValue:{fields:e.fields}}),l=Vt.newFoundDocument(r,s,i,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function mM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Ie(m===void 0||typeof m=="string"),Kt.fromBase64String(m||"")):(Ie(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Kt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const m=h.code===void 0?te.UNKNOWN:NS(h.code);return new ue(m,h.message||"")}(o);n=new FS(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yo(t,r.document.name),i=ir(r.document.updateTime),o=r.document.createTime?ir(r.document.createTime):Se.min(),l=new Mn({mapValue:{fields:r.document.fields}}),u=Vt.newFoundDocument(s,i,o,l),h=r.targetIds||[],m=r.removedTargetIds||[];n=new $f(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yo(t,r.document),i=r.readTime?ir(r.readTime):Se.min(),o=Vt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new $f([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yo(t,r.document),i=r.removedTargetIds||[];n=new $f([],i,s,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new sM(s,i),l=r.targetId;n=new US(l,o)}}return n}function Hm(t,e){let n;if(e instanceof Bc)n={update:hC(t,e.key,e.value)};else if(e instanceof Hg)n={delete:Om(t,e.key)};else if(e instanceof ea)n={update:hC(t,e.key,e.data),updateMask:xM(e.fieldMask)};else{if(!(e instanceof SS))return be();n={verify:Om(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof mA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bd)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:be()}(t,e.precondition)),n}function lw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?On.updateTime(ir(i.updateTime)):i.exists!==void 0?On.exists(i.exists):On.none()}(e.currentDocument):On.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,l){let u=null;if("setToServerValue"in l)Ie(l.setToServerValue==="REQUEST_TIME"),u=new ic;else if("appendMissingElements"in l){const m=l.appendMissingElements.values||[];u=new fA(m)}else if("removeAllFromArray"in l){const m=l.removeAllFromArray.values||[];u=new mA(m)}else"increment"in l?u=new Bd(o,l.increment):be();const h=Nt.fromServerFormat(l.fieldPath);return new Mg(h,u)}(t,s)):[];if(e.update){e.update.name;const s=Yo(t,e.update.name),i=new Mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const h=u.fieldPaths||[];return new xr(h.map(m=>Nt.fromServerFormat(m)))}(e.updateMask);return new ea(s,i,o,n,r)}return new Bc(s,i,n,r)}if(e.delete){const s=Yo(t,e.delete);return new Hg(s,n)}if(e.verify){const s=Yo(t,e.verify);return new SS(s,n)}return be()}function gM(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?ir(s.updateTime):ir(i);return o.isEqual(Se.min())&&(o=ir(i)),new tM(o,s.transformResults||[])}(n,e))):[]}function DS(t,e){return{documents:[RS(t,e.path)]}}function MS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=RS(t,s);const i=function(h){if(h.length!==0)return VS(ct.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(w){return{field:fl(w.field),direction:yM(w.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=aw(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function OS(t){let e=LS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const w=HS(p);return w instanceof ct&&ux(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(w=>function(b){return new _d(ml(b.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(w))}(n.orderBy));let l=null;n.limit&&(l=function(p){let w;return w=typeof p=="object"?p.value:p,Rg(w)?null:w}(n.limit));let u=null;n.startAt&&(u=function(p){const w=!!p.before,C=p.values||[];return new rc(C,w)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const w=!p.before,C=p.values||[];return new rc(C,w)}(n.endAt)),mS(e,s,o,i,l,"F",u,h)}function pM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ml(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ml(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ml(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ml(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(ml(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ct.create(n.compositeFilter.filters.map(r=>HS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function yM(t){return lM[t]}function wM(t){return cM[t]}function vM(t){return uM[t]}function fl(t){return{fieldPath:t.canonicalString()}}function ml(t){return Nt.fromServerFormat(t.fieldPath)}function VS(t){return t instanceof Je?function(n){if(n.op==="=="){if(Zb(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NAN"}};if($b(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zb(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NOT_NAN"}};if($b(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(n.field),op:wM(n.op),value:n.value}}}(t):t instanceof ct?function(n){const r=n.getFilters().map(s=>VS(s));return r.length===1?r[0]:{compositeFilter:{op:vM(n.op),filters:r}}}(t):be()}function xM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function KS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r,s,i=Se.min(),o=Se.min(),l=Kt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.ct=e}}function _M(t,e){let n;if(e.document)n=fM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ge.fromSegments(e.noDocument.path),s=pA(e.noDocument.readTime);n=Vt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return be();{const r=ge.fromSegments(e.unknownDocument.path),s=pA(e.unknownDocument.version);n=Vt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Ge(s[0],s[1]);return Se.fromTimestamp(i)}(e.readTime)),n}function fC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Om(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ac(i,o.version.toTimestamp()),createTime:ac(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:gA(e.version)};else{if(!e.isUnknownDocument())return be();r.unknownDocument={path:n.path.toArray(),version:gA(e.version)}}return r}function Vm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function gA(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pA(t){const e=new Ge(t.seconds,t.nanoseconds);return Se.fromTimestamp(e)}function Mo(t,e){const n=(e.baseMutations||[]).map(i=>lw(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const l=e.mutations[i+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>lw(t.ct,i)),s=Ge.fromMillis(e.localWriteTimeMs);return new fx(e.batchId,s,n,r)}function pu(t){const e=pA(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?pA(t.lastLimboFreeSnapshotVersion):Se.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return Ie(i.documents.length===1),Mr(Vd(LS(i.documents[0])))}(t.query):function(i){return Mr(OS(i))}(t.query),new Ri(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Kt.fromBase64String(t.resumeToken))}function GS(t,e){const n=gA(e.snapshotVersion),r=gA(e.lastLimboFreeSnapshotVersion);let s;s=jm(e.target)?DS(t.ct,e.target):MS(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hA(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function qS(t){const e=OS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mm(e,e.limit,"L"):e}function d0(t,e){return new gx(e.largestBatchId,lw(t.ct,e.overlayMutation))}function mC(t,e){const n=e.path.lastSegment();return[t,sr(e.path.popLast()),n]}function gC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:gA(r.readTime),documentKey:sr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{getBundleMetadata(e,n){return pC(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:pA(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return pC(e).put(function(s){return{bundleId:s.id,createTime:gA(ir(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return yC(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:qS(i.bundledQuery),readTime:pA(i.readTime)}}(r)})}saveNamedQuery(e,n){return yC(e).put(function(s){return{name:s.name,readTime:gA(ir(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function pC(t){return fn(t,"bundles")}function yC(t){return fn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Vg(e,r)}getOverlay(e,n){return $c(e).get(mC(this.userId,n)).next(r=>r?d0(this.serializer,r):null)}getOverlays(e,n){const r=zs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const l=new gx(n,o);s.push(this.ht(e,l))}),$.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(sr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push($c(e).j("collectionPathOverlayIndex",l))}),$.waitFor(i)}getOverlaysForCollection(e,n,r){const s=zs(),i=sr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return $c(e).U("collectionPathOverlayIndex",o).next(l=>{for(const u of l){const h=d0(this.serializer,u);s.set(h.getKey(),h)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=zs();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return $c(e).J({index:"collectionGroupOverlayIndex",range:l},(u,h,m)=>{const p=d0(this.serializer,h);i.size()<s||p.largestBatchId===o?(i.set(p.getKey(),p),o=p.largestBatchId):m.done()}).next(()=>i)}ht(e,n){return $c(e).put(function(s,i,o){const[l,u,h]=mC(i,o.mutation.key);return{userId:i,collectionPath:u,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Hm(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function $c(t){return fn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{Pt(e){return fn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Kt.fromUint8Array(r):Kt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Tt(e.integerValue));else if("doubleValue"in e){const r=Tt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),pd(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=$i(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ya(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?iS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Lg(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):be()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",l=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Tt(l)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),ge.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Oo.vt=new Oo;function CM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function wC(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=CM(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class EM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=wC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=wC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class IM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class TM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Zc{constructor(){this.jt=new EM,this.Ht=new IM(this.jt),this.Jt=new TM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ho(this.indexId,this.documentKey,this.arrayValue,r)}}function pa(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=vC(t.arrayValue,e.arrayValue),n!==0?n:(n=vC(t.directionalValue,e.directionalValue),n!==0?n:ge.comparator(t.documentKey,e.documentKey)))}function vC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.Xt=new ft((n,r)=>Nt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ie(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Xy(e);if(n!==void 0&&!this.sn(n))return!1;const r=Lo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!s.has(l.field.canonicalString())){const u=r[i];if(!this.on(l,u)||!this._n(this.en[o++],u))return!1}++i}for(;i<r.length;++i){const l=r[i];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new ft(Nt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Kf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Kf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Kf(r.field,r.dir==="asc"?0:1)));return new Lm(Lm.UNKNOWN_ID,this.collectionId,n,gd.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){var e,n;if(Ie(t instanceof Je||t instanceof ct),t instanceof Je){if(t instanceof fS){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Je.create(t.field,"==",i)))||[];return ct.create(s,"or")}return t}const r=t.filters.map(s=>WS(s));return ct.create(r,t.op)}function kM(t){if(t.getFilters().length===0)return[];const e=dw(WS(t));return Ie($S(e)),cw(e)||uw(e)?[e]:e.getFilters()}function cw(t){return t instanceof Je}function uw(t){return t instanceof ct&&ux(t)}function $S(t){return cw(t)||uw(t)||function(n){if(n instanceof ct&&nw(n)){for(const r of n.getFilters())if(!cw(r)&&!uw(r))return!1;return!0}return!1}(t)}function dw(t){if(Ie(t instanceof Je||t instanceof ct),t instanceof Je)return t;if(t.filters.length===1)return dw(t.filters[0]);const e=t.filters.map(r=>dw(r));let n=ct.create(e,t.op);return n=Km(n),$S(n)?n:(Ie(n instanceof ct),Ie(sc(n)),Ie(n.filters.length>1),n.filters.reduce((r,s)=>wx(r,s)))}function wx(t,e){let n;return Ie(t instanceof Je||t instanceof ct),Ie(e instanceof Je||e instanceof ct),n=t instanceof Je?e instanceof Je?function(s,i){return ct.create([s,i],"and")}(t,e):_C(t,e):e instanceof Je?_C(e,t):function(s,i){if(Ie(s.filters.length>0&&i.filters.length>0),sc(s)&&sc(i))return uS(s,i.getFilters());const o=nw(s)?s:i,l=nw(s)?i:s,u=o.filters.map(h=>wx(h,l));return ct.create(u,"or")}(t,e),Km(n)}function _C(t,e){if(sc(e))return uS(e,t.getFilters());{const n=e.filters.map(r=>wx(t,r));return ct.create(n,"or")}}function Km(t){if(Ie(t instanceof Je||t instanceof ct),t instanceof Je)return t;const e=t.getFilters();if(e.length===1)return Km(e[0]);if(lS(t))return t;const n=e.map(s=>Km(s)),r=[];return n.forEach(s=>{s instanceof Je?r.push(s):s instanceof ct&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ct.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.un=new vx}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Vr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class vx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ft(ot.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ft(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Uint8Array(0);class NM{constructor(e,n){this.databaseId=n,this.cn=new vx,this.ln=new ho(r=>hA(r),(r,s)=>Hd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:sr(s)};return BC(e).put(i)}return $.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Gk(n),""],!1,!0);return BC(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Ks(o.parent))}return r})}addFieldIndex(e,n){const r=Jc(e),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=rl(e);return i.next(l=>{o.put(gC(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Jc(e),s=rl(e),i=nl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Jc(e),r=nl(e),s=rl(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return $.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new xC(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=nl(e);let s=!0;const i=new Map;return $.forEach(this.hn(n),o=>this.Pn(e,o).next(l=>{s&&(s=!!l),i.set(o,l)})).next(()=>{if(s){let o=Me();const l=[];return $.forEach(i,(u,h)=>{se("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(u)} to execute ${hA(n)}`);const m=function(N,O){const H=Xy(O);if(H===void 0)return null;for(const M of Dm(N,H.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(h,u),p=function(N,O){const H=new Map;for(const M of Lo(O))for(const I of Dm(N,M.fieldPath))switch(I.op){case"==":case"in":H.set(M.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return H.set(M.fieldPath.canonicalString(),I.value),Array.from(H.values())}return null}(h,u),w=function(N,O){const H=[];let M=!0;for(const I of Lo(O)){const B=I.kind===0?tC(N,I.fieldPath,N.startAt):nC(N,I.fieldPath,N.startAt);H.push(B.value),M&&(M=B.inclusive)}return new rc(H,M)}(h,u),C=function(N,O){const H=[];let M=!0;for(const I of Lo(O)){const B=I.kind===0?nC(N,I.fieldPath,N.endAt):tC(N,I.fieldPath,N.endAt);H.push(B.value),M&&(M=B.inclusive)}return new rc(H,M)}(h,u),b=this.In(u,h,w),x=this.In(u,h,C),U=this.Tn(u,h,p),T=this.En(u.indexId,m,b,w.inclusive,x,C.inclusive,U);return $.forEach(T,E=>r.G(E,n.limit).next(N=>{N.forEach(O=>{const H=ge.fromSegments(O.documentKey);o.has(H)||(o=o.add(H),l.push(H))})}))}).next(()=>l)}return $.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=kM(ct.create(e.filters,"and")).map(r=>sw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,i.length),h=u/(n!=null?n.length:1),m=[];for(let p=0;p<u;++p){const w=n?this.dn(n[p/h]):Kh,C=this.An(e,w,r[p%h],s),b=this.Rn(e,w,i[p%h],o),x=l.map(U=>this.An(e,w,U,!0));m.push(...this.createRange(C,b,x))}return m}An(e,n,r,s){const i=new Ho(e,ge.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new Ho(e,ge.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new xC(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const l of i)r.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return $.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(u){let h=new ft(Nt.comparator),m=!1;for(const p of u.filters)for(const w of p.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?m=!0:h=h.add(w.field));for(const p of u.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Zc;for(const s of Lo(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);Oo.vt.It(i,o)}return r.zt()}dn(e){const n=new Zc;return Oo.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Zc;return Oo.vt.It(vd(this.databaseId,n),r.Yt(function(i){const o=Lo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Zc);let i=0;for(const o of Lo(e)){const l=r[i++];for(const u of s)if(this.fn(n,o.fieldPath)&&xd(l))s=this.gn(s,o,l);else{const h=u.Yt(o.kind);Oo.vt.It(l,h)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const l of s){const u=new Zc;u.seed(l.zt()),Oo.vt.It(o,u.Yt(n.kind)),i.push(u)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Je&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Jc(e),s=rl(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return $.forEach(i,l=>s.get([l.indexId,this.uid]).next(u=>{o.push(function(m,p){const w=p?new gd(p.sequenceNumber,new Vr(pA(p.readTime),new ge(Ks(p.documentKey)),p.largestBatchId)):gd.empty(),C=m.fields.map(([b,x])=>new Kf(Nt.fromServerFormat(b),x));return new Lm(m.indexId,m.collectionGroup,C,w)}(l,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:je(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Jc(e),i=rl(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>$.forEach(l,u=>i.put(gC(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(r.set(s.collectionGroup,l),$.forEach(l,u=>this.wn(e,s,u).next(h=>{const m=this.Sn(i,u);return h.isEqual(m)?$.resolve():this.bn(e,i,u,h,m)}))))})}Dn(e,n,r,s){return nl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return nl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=nl(e);let i=new ft(pa);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,l)=>{i=i.add(new Ho(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>i)}Sn(e,n){let r=new ft(pa);const s=this.Vn(n,e);if(s==null)return r;const i=Xy(n);if(i!=null){const o=e.data.field(i.fieldPath);if(xd(o))for(const l of o.arrayValue.values||[])r=r.add(new Ho(n.indexId,e.key,this.dn(l),s))}else r=r.add(new Ho(n.indexId,e.key,Kh,s));return r}bn(e,n,r,s,i){se("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,h,m,p,w){const C=u.getIterator(),b=h.getIterator();let x=tl(C),U=tl(b);for(;x||U;){let T=!1,E=!1;if(x&&U){const N=m(x,U);N<0?E=!0:N>0&&(T=!0)}else x!=null?E=!0:T=!0;T?(p(U),U=tl(b)):E?(w(x),x=tl(C)):(x=tl(C),U=tl(b))}}(s,i,pa,l=>{o.push(this.Dn(e,n,r,l))},l=>{o.push(this.vn(e,n,r,l))}),$.waitFor(o)}yn(e){let n=1;return rl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>pa(o,l)).filter((o,l,u)=>!l||pa(o,u[l-1])!==0);const s=[];s.push(e);for(const o of r){const l=pa(o,e),u=pa(o,n);if(l===0)s[0]=e.Zt();else if(l>0&&u<0)s.push(o),s.push(o.Zt());else if(u>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const l=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Kh,[]],u=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Kh,[]];i.push(IDBKeyRange.bound(l,u))}return i}Cn(e,n){return pa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bC)}getMinOffset(e,n){return $.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||be())).next(bC)}}function BC(t){return fn(t,"collectionParents")}function nl(t){return fn(t,"indexEntries")}function Jc(t){return fn(t,"indexConfiguration")}function rl(t){return fn(t,"indexState")}function bC(t){Ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;ax(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Vr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mr(e,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.J({range:o},(m,p,w)=>(l++,w.delete()));i.push(u.next(()=>{Ie(l===1)}));const h=[];for(const m of n.mutations){const p=Yk(e,m.key.path,n.batchId);i.push(s.delete(p)),h.push(m.key)}return $.waitFor(i).next(()=>h)}function zm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw be();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(41943040,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);class Kg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){Ie(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Kg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ya(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=gl(e),o=ya(e);return o.add({}).next(l=>{Ie(typeof l=="number");const u=new fx(l,n,r,s),h=function(C,b,x){const U=x.baseMutations.map(E=>Hm(C.ct,E)),T=x.mutations.map(E=>Hm(C.ct,E));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:U,mutations:T}}(this.serializer,this.userId,u),m=[];let p=new ft((w,C)=>je(w.canonicalString(),C.canonicalString()));for(const w of s){const C=Yk(this.userId,w.key.path,l);p=p.add(w.key.path.popLast()),m.push(o.put(h)),m.push(i.put(C,mD))}return p.forEach(w=>{m.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Fn[l]=u.keys()}),$.waitFor(m).next(()=>u)})}lookupMutationBatch(e,n){return ya(e).get(n).next(r=>r?(Ie(r.userId===this.userId),Mo(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?$.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ya(e).J({index:"userMutationsIndex",range:s},(o,l,u)=>{l.userId===this.userId&&(Ie(l.batchId>=r),i=Mo(this.serializer,l)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ya(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ya(e).U("userMutationsIndex",n).next(r=>r.map(s=>Mo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=zf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return gl(e).J({range:s},(o,l,u)=>{const[h,m,p]=o,w=Ks(m);if(h===this.userId&&n.path.isEqual(w))return ya(e).get(p).next(C=>{if(!C)throw be();Ie(C.userId===this.userId),i.push(Mo(this.serializer,C))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(je);const s=[];return n.forEach(i=>{const o=zf(this.userId,i.path),l=IDBKeyRange.lowerBound(o),u=gl(e).J({range:l},(h,m,p)=>{const[w,C,b]=h,x=Ks(C);w===this.userId&&i.path.isEqual(x)?r=r.add(b):p.done()});s.push(u)}),$.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=zf(this.userId,r),o=IDBKeyRange.lowerBound(i);let l=new ft(je);return gl(e).J({range:o},(u,h,m)=>{const[p,w,C]=u,b=Ks(w);p===this.userId&&r.isPrefixOf(b)?b.length===s&&(l=l.add(C)):m.done()}).next(()=>this.xn(e,l))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(ya(e).get(i).next(o=>{if(o===null)throw be();Ie(o.userId===this.userId),r.push(Mo(this.serializer,o))}))}),$.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return ZS(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),$.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return gl(e).J({range:r},(i,o,l)=>{if(i[0]===this.userId){const u=Ks(i[1]);s.push(u)}else l.done()}).next(()=>{Ie(s.length===0)})})}containsKey(e,n){return JS(e,this.userId,n)}Nn(e){return XS(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JS(t,e,n){const r=zf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return gl(t).J({range:i,H:!0},(l,u,h)=>{const[m,p,w]=l;m===e&&p===s&&(o=!0),h.done()}).next(()=>o)}function ya(t){return fn(t,"mutations")}function gl(t){return fn(t,"documentMutations")}function XS(t){return fn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yA(0)}static kn(){return new yA(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new yA(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Se.fromTimestamp(new Ge(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>sl(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Ie(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return sl(e).J((o,l)=>{const u=pu(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>$.waitFor(i)).next(()=>s)}forEachTarget(e,n){return sl(e).J((r,s)=>{const i=pu(s);n(i)})}qn(e){return EC(e).get("targetGlobalKey").next(n=>(Ie(n!==null),n))}Qn(e,n){return EC(e).put("targetGlobalKey",n)}Kn(e,n){return sl(e).put(GS(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=hA(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return sl(e).J({range:s,index:"queryTargetsIndex"},(o,l,u)=>{const h=pu(l);Hd(n,h.target)&&(i=h,u.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ka(e);return n.forEach(o=>{const l=sr(o.path);s.push(i.put({targetId:r,path:l})),s.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(s)}removeMatchingKeys(e,n,r){const s=ka(e);return $.forEach(n,i=>{const o=sr(i.path);return $.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ka(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ka(e);let i=Me();return s.J({range:r,H:!0},(o,l,u)=>{const h=Ks(o[1]),m=new ge(h);i=i.add(m)}).next(()=>i)}containsKey(e,n){const r=sr(n.path),s=IDBKeyRange.bound([r],[Gk(r)],!1,!0);let i=0;return ka(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,l],u,h)=>{o!==0&&(i++,h.done())}).next(()=>i>0)}ot(e,n){return sl(e).get(n).next(r=>r?pu(r):null)}}function sl(t){return fn(t,"targets")}function EC(t){return fn(t,"targetGlobal")}function ka(t){return fn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC([t,e],[n,r]){const s=je(t,n);return s===0?je(e,r):s}class FM{constructor(e){this.Un=e,this.buffer=new ft(IC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();IC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uo(n)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await co(n)}await this.Hn(3e5)})}}class PM{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(vr.oe);const r=new FM(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(CC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,l,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),dl()<=Ze.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function RM(t,e){return new PM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n){this.db=e,this.garbageCollector=RM(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return zh(e,r)}removeReference(e,n,r){return zh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return zh(e,n)}nr(e,n){return function(s,i){let o=!1;return XS(s).Y(l=>JS(s,l,i).next(u=>(u&&(o=!0),$.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,l)=>{if(l<=n){const u=this.nr(e,o).next(h=>{if(!h)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Se.min()),ka(e).delete(function(p){return[0,sr(p.path)]}(o))))});s.push(u)}}).next(()=>$.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return zh(e,n)}tr(e,n){const r=ka(e);let s,i=vr.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:u,sequenceNumber:h})=>{o===0?(i!==vr.oe&&n(new ge(Ks(s)),i),i=h,s=u):i=vr.oe}).next(()=>{i!==vr.oe&&n(new ge(Ks(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zh(t,e){return ka(t).put(function(r,s){return{targetId:0,path:sr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Uo(e).put(r)}removeEntry(e,n,r){return Uo(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Vm(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Vt.newInvalidDocument(n);return Uo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xc(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Vt.newInvalidDocument(n)};return Uo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xc(n))},(s,i)=>{r={document:this.ir(n,i),size:zm(i)}}).next(()=>r)}getEntries(e,n){let r=Lr();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Lr(),s=new yt(ge.comparator);return this._r(e,n,(i,o)=>{const l=this.ir(i,o);r=r.insert(i,l),s=s.insert(i,zm(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return $.resolve();let s=new ft(SC);n.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(Xc(s.first()),Xc(s.last())),o=s.getIterator();let l=o.getNext();return Uo(e).J({index:"documentKeyIndex",range:i},(u,h,m)=>{const p=ge.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&SC(l,p)<0;)r(l,null),l=o.getNext();l&&l.isEqual(p)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?m.$(Xc(l)):m.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),Vm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uo(e).U(IDBKeyRange.bound(l,u,!0)).next(h=>{i==null||i.incrementDocumentReadCount(h.length);let m=Lr();for(const p of h){const w=this.ir(ge.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);w.isFoundDocument()&&(Kd(n,w)||s.has(w.key))&&(m=m.insert(w.key,w))}return m})}getAllFromCollectionGroup(e,n,r,s){let i=Lr();const o=kC(n,r),l=kC(n,Vr.max());return Uo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(u,h,m)=>{const p=this.ir(ge.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(p.key,p),i.size===s&&m.done()}).next(()=>i)}newChangeBuffer(e){return new DM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return TC(e).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}rr(e,n){return TC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=_M(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return Vt.newInvalidDocument(e)}}function eN(t){return new jM(t)}class DM extends YS{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ho(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ft((i,o)=>je(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const l=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,l.readTime)),o.isValidDocument()){const u=fC(this.cr.serializer,o);s=s.add(i.path.popLast());const h=zm(u);r+=h-l.size,n.push(this.cr.addEntry(e,i,u))}else if(r-=l.size,this.trackRemovals){const u=fC(this.cr.serializer,o.convertToNoDocument(Se.min()));n.push(this.cr.addEntry(e,i,u))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function TC(t){return fn(t,"remoteDocumentGlobal")}function Uo(t){return fn(t,"remoteDocumentsV14")}function Xc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kC(t,e){const n=e.documentKey.path.toArray();return[t,Vm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SC(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=je(n[i],r[i]),s)return s;return s=je(n.length,r.length),s||(s=je(n[n.length-2],r[r.length-2]),s||je(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Du(r.mutation,s,xr.empty(),Ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const s=zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=mu();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Lr();const o=ju(),l=function(){return ju()}();return n.forEach((u,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof ea)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Du(m.mutation,h,m.mutation.getFieldMask(),Ge.now())):o.set(h.key,xr.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var p;return l.set(h,new MM(m,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ju();let s=new yt((o,l)=>o-l),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||xr.empty();m=l.applyToLocalView(h,m),r.set(u,m);const p=(s.get(l.batchId)||Me()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,m=u.value,p=_S();m.forEach(w=>{if(!i.has(w)){const C=TS(n.get(w),r.get(w));C!==null&&p.set(w,C),i=i.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(zs());let l=-1,u=i;return o.next(h=>$.forEach(h,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{u=u.insert(m,w)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Me())).next(m=>({batchId:l,changes:xS(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let s=mu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=mu();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,u=>{const h=function(p,w){return new _c(w,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,w)=>{o=o.insert(p,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,Vt.newInvalidDocument(m)))});let l=mu();return o.forEach((u,h)=>{const m=i.get(u);m!==void 0&&Du(m.mutation,h,xr.empty(),Ge.now()),Kd(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:qS(s.bundledQuery),readTime:ir(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.overlays=new yt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=zs(),i=n.length+1,o=new ge(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new yt((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=zs(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const l=zs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>l.set(h,m)),!(l.size()>=s)););return $.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gx(n,r));let i=this.Ir.get(n);i===void 0&&(i=Me(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Tr=new ft(wn.Er),this.dr=new ft(wn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new wn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new wn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ge(new ot([])),r=new wn(n,e),s=new wn(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new ot([])),r=new wn(n,e),s=new wn(n,e+1);let i=Me();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new wn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(wn.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fx(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new wn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wn(n,0),s=new wn(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(je);return n.forEach(s=>{const i=new wn(s,0),o=new wn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ge.isDocumentKey(i)||(i=i.child(""));const o=new wn(new ge(i),0);let l=new ft(je);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),$.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const i=new wn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new wn(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.Mr=e,this.docs=function(){return new yt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Vt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Lr();const o=n.path,l=new ge(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||ax(Wk(m),r)<=0||(s.has(m.key)||Kd(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){be()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GM(this)}getSize(e){return $.resolve(this.size)}}class GM extends YS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.persistence=e,this.Nr=new ho(n=>hA(n),Hd),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xx,this.targetCount=0,this.kr=yA.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yA(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vr(0),this.Kr=!1,this.Kr=!0,this.$r=new VM,this.referenceDelegate=e(this),this.Ur=new qM(this),this.indexManager=new SM,this.remoteDocumentCache=function(s){return new zM(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zS(n),this.Gr=new OM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new KM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new WM(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class WM extends Zk{constructor(e){super(),this.currentSequenceNumber=e}}class zg{constructor(e){this.persistence=e,this.Jr=new xx,this.Yr=null}static Zr(e){return new zg(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=ge.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Pg("createOrUpgrade",n);r<1&&s>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kb,{unique:!0}),u.createObjectStore("documentMutations")}(e),NC(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=$.resolve();return r<3&&s>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),NC(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(u,h){return h.store("mutations").U().next(m=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kb,{unique:!0});const p=h.store("mutations"),w=m.map(C=>p.put(C));return $.waitFor(w)})}(e,i))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(u){const h=u.createObjectStore("documentOverlays",{keyPath:ID});h.createIndex("collectionPathOverlayIndex",TD,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",kD,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:gD});h.createIndex("documentKeyIndex",pD),h.createIndex("collectionGroupIndex",yD)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:BD}).createIndex("sequenceNumberIndex",bD,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:CD}).createIndex("documentKeyIndex",ED,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=zm(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>$.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>$.forEach(l,u=>{Ie(u.userId===i.userId);const h=Mo(this.serializer,u);return ZS(e,i.userId,h).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,l)=>{const u=new ot(o),h=function(p){return[0,sr(p)]}(u);i.push(n.get(h).next(m=>m?$.resolve():(p=>n.put({targetId:0,path:sr(p),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>$.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:_D});const r=n.store("collectionParents"),s=new vx,i=o=>{if(s.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:sr(u)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const u=new ot(o);return i(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,u],h)=>{const m=Ks(l);return i(m.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=pu(s),o=GS(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const l=n.store("remoteDocumentsV14"),u=function(p){return p.document?new ge(ot.fromString(p.document.name).popFirst(5)):p.noDocument?ge.fromSegments(p.noDocument.path):p.unknownDocument?ge.fromSegments(p.unknownDocument.path):be()}(o).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(l.put(h))}).next(()=>$.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=eN(this.serializer),i=new nN(zg.Zr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(u=>{var h;let m=(h=l.get(u.userId))!==null&&h!==void 0?h:Me();Mo(this.serializer,u).keys().forEach(p=>m=m.add(p)),l.set(u.userId,m)}),$.forEach(l,(u,h)=>{const m=new Ln(h),p=Vg.lt(this.serializer,m),w=i.getIndexManager(m),C=Kg.lt(m,this.serializer,w,i.referenceDelegate);return new tN(s,C,p,w).recalculateAndSaveOverlaysForDocumentKeys(new Yy(n,vr.oe),u).next()})})}}function NC(t){t.createObjectStore("targetDocuments",{keyPath:vD}).createIndex("documentTargetsIndex",xD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wD,{unique:!0}),t.createObjectStore("targetGlobal")}const h0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _x{constructor(e,n,r,s,i,o,l,u,h,m,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=l,this.ci=h,this.li=m,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=w=>Promise.resolve(),!_x.D())throw new ue(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LM(this,s),this.Ai=n+"main",this.serializer=new zS(u),this.Ri=new Wa(this.Ai,this.hi,new $M(this.serializer)),this.$r=new bM,this.Ur=new UM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eN(this.serializer),this.Gr=new BM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&Xt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ue(te.FAILED_PRECONDITION,h0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new vr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(uo(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Yc(e).get("owner").next(n=>$.resolve(this.vi(n)))}Ci(e){return Gh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=fn(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(l=>i.indexOf(l)===-1);return $.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):Yc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ue(te.FAILED_PRECONDITION,h0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gh(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(i||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&se("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Yy(e,vr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Gh(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Kg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new NM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Vg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(u){return u===17?UD:u===16?ND:u===15?Ax:u===14?nS:u===13?tS:u===12?SD:u===11?eS:void be()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,l=>(o=new Yy(l,this.Qr?this.Qr.next():vr.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ue(te.FAILED_PRECONDITION,$k);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return Yc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ue(te.FAILED_PRECONDITION,h0)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yc(e).put("owner",n)}static D(){return Wa.D()}bi(e){const n=Yc(e);return n.get("owner").next(r=>this.vi(r)?(se("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Xt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;$T()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Xt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yc(t){return fn(t,"owner")}function Gh(t){return fn(t,"clientMetadata")}function rN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Me(),s=Me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Bx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $T()?8:Jk(hn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ZM;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(dl()<=Ze.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(dl()<=Ze.DEBUG&&se("QueryEngine","Query:",hl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(dl()<=Ze.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(n))):$.resolve())}Yi(e,n){if(rC(n))return $.resolve(null);let r=Mr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Mm(n,null,"F"),r=Mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Me(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Mm(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return rC(n)||s.isEqual(Se.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?$.resolve(null):(dl()<=Ze.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hl(n)),this.rs(e,o,n,qk(s,-1)).next(l=>l))})}ts(e,n){let r=new ft(wS(e));return n.forEach((s,i)=>{Kd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return dl()<=Ze.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",hl(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new yt(je),this._s=new ho(i=>hA(i),Hd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function iN(t,e,n,r){return new JM(t,e,n,r)}async function aN(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=Me();for(const h of s){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of i){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function XM(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,m){const p=h.batch,w=p.keys();let C=$.resolve();return w.forEach(b=>{C=C.next(()=>m.getEntry(u,b)).next(x=>{const U=h.docVersions.get(b);Ie(U!==null),x.version.compareTo(U)<0&&(p.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),m.addEntry(x)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Me();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oN(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function YM(t,e){const n=Ce(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((m,p)=>{const w=s.get(p);if(!w)return;l.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,p)));let C=w.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(Kt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):m.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(m.resumeToken,r)),s=s.insert(p,C),function(x,U,T){return x.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(w,C,m)&&l.push(n.Ur.updateTargetData(i,C))});let u=Lr(),h=Me();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(eO(i,o,e.documentUpdates).next(m=>{u=m.Ps,h=m.Is})),!r.isEqual(Se.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function eO(t,e,n){let r=Me(),s=Me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Lr();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):se("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function tO(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gm(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function oc(t,e,n){const r=Ce(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!uo(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function hw(t,e,n){const r=Ce(t);let s=Se.min(),i=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,m){const p=Ce(u),w=p._s.get(m);return w!==void 0?$.resolve(p.os.get(w)):p.Ur.getTargetData(h,m)}(r,o,Mr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Se.min(),n?i:Me())).next(l=>(cN(r,yS(e),l),{documents:l,Ts:i})))}function AN(t,e){const n=Ce(t),r=Ce(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function lN(t,e){const n=Ce(t),r=n.us.get(e)||Se.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,qk(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(cN(n,e,s),s))}function cN(t,e,n){let r=t.us.get(e)||Se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}function UC(t,e){return`firestore_clients_${t}_${e}`}function FC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function f0(t,e){return`firestore_targets_${t}_${e}`}class qm{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ue(s.error.code,s.error.message))),o?new qm(e,n,s.state,i):(Xt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ue(r.error.code,r.error.message))),i?new Mu(e,r.state,s):(Xt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=dx();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Xk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Wm(e,i):(Xt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class bx{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new bx(n.clientId,n.onlineState):(Xt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fw{constructor(){this.activeTargetIds=dx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class m0{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new yt(je),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=UC(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new fw),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(UC(this.persistenceKey,r));if(s){const i=Wm.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(f0(this.persistenceKey,e));if(s){const i=Mu.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(f0(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return se("SharedClientState","READ",e,n),n}setItem(e,n){se("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(se("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=vr.oe;if(i!=null)try{const l=JSON.parse(i);Ie(typeof l=="number"),o=l}catch(l){Xt("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);r!==vr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new qm(this.currentUser,e,n,r),i=FC(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=FC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=f0(this.persistenceKey,e),i=new Mu(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Wm.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return qm.Rs(new Ln(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return Mu.Rs(s,n)}Ls(e){return bx.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],l=[];return i.forEach(u=>{s.has(u)||o.push(u)}),s.forEach(u=>{i.has(u)||l.push(u)}),this.syncEngine.io(o,l).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=dx();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class uN{constructor(){this.so=new fw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function g0(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class iO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=g0(),u=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(m=>(se("RestConnection",`Received RPC '${n}' ${l}: `,m),m),m=>{throw ec("RestConnection",`RPC '${n}' ${l} failed with error: `,m,"url: ",u,"request:",s),m})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=rO[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=g0();return new Promise((o,l)=>{const u=new Mk;u.setWithCredentials(!0),u.listenOnce(Ok.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vf.NO_ERROR:const m=u.getResponseJson();se(Pn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case Vf.TIMEOUT:se(Pn,`RPC '${e}' ${i} timed out`),l(new ue(te.DEADLINE_EXCEEDED,"Request time out"));break;case Vf.HTTP_ERROR:const p=u.getStatus();if(se(Pn,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const b=function(U){const T=U.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(T)>=0?T:te.UNKNOWN}(C.status);l(new ue(b,C.message))}else l(new ue(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ue(te.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{se(Pn,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);se(Pn,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=g0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kk(),l=Vk(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");se(Pn,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);let w=!1,C=!1;const b=new sO({Io:U=>{C?se(Pn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(w||(se(Pn,`Opening RPC '${e}' stream ${s} transport.`),p.open(),w=!0),se(Pn,`RPC '${e}' stream ${s} sending:`,U),p.send(U))},To:()=>p.close()}),x=(U,T,E)=>{U.listen(T,N=>{try{E(N)}catch(O){setTimeout(()=>{throw O},0)}})};return x(p,fu.EventType.OPEN,()=>{C||(se(Pn,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),x(p,fu.EventType.CLOSE,()=>{C||(C=!0,se(Pn,`RPC '${e}' stream ${s} transport closed`),b.So())}),x(p,fu.EventType.ERROR,U=>{C||(C=!0,ec(Pn,`RPC '${e}' stream ${s} transport errored:`,U),b.So(new ue(te.UNAVAILABLE,"The operation could not be completed")))}),x(p,fu.EventType.MESSAGE,U=>{var T;if(!C){const E=U.data[0];Ie(!!E);const N=E,O=N.error||((T=N[0])===null||T===void 0?void 0:T.error);if(O){se(Pn,`RPC '${e}' stream ${s} received error:`,O);const H=O.status;let M=function(S){const Q=nn[S];if(Q!==void 0)return NS(Q)}(H),I=O.message;M===void 0&&(M=te.INTERNAL,I="Unknown error status: "+H+" with message "+O.message),C=!0,b.So(new ue(M,I)),p.close()}else se(Pn,`RPC '${e}' stream ${s} received:`,E),b.bo(E)}}),x(l,Hk.STAT_EVENT,U=>{U.stat===Jy.PROXY?se(Pn,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===Jy.NOPROXY&&se(Pn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof window<"u"?window:null}function Zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){return new dM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Xt(n.toString()),Xt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ue(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aO extends fN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=mM(this.serializer,e),r=function(i){if(!("targetChange"in i))return Se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?ir(o.readTime):Se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Aw(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=jm(u)?{documents:DS(i,u)}:{query:MS(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=QS(i,o.resumeToken);const h=aw(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Se.min())>0){l.readTime=ac(i,o.snapshotVersion.toTimestamp());const h=aw(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=pM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Aw(this.serializer),n.removeTarget=e,this.a_(n)}}class oO extends fN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gM(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Aw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Hm(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,ow(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ue(te.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,ow(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(te.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class lO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xt(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{NA(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Ce(u);h.L_.add(4),await qd(h),h.q_.set("Unknown"),h.L_.delete(4),await qg(h)}(this))})}),this.q_=new lO(r,s)}}async function qg(t){if(NA(t))for(const e of t.B_)await e(!0)}async function qd(t){for(const e of t.B_)await e(!1)}function Wg(t,e){const n=Ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ix(n)?Ex(n):Cc(n).r_()&&Cx(n,e))}function Ac(t,e){const n=Ce(t),r=Cc(n);n.N_.delete(e),r.r_()&&mN(n,e),n.N_.size===0&&(r.r_()?r.o_():NA(n)&&n.q_.set("Unknown"))}function Cx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cc(t).A_(e)}function mN(t,e){t.Q_.xe(e),Cc(t).R_(e)}function Ex(t){t.Q_=new AM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Cc(t).start(),t.q_.v_()}function Ix(t){return NA(t)&&!Cc(t).n_()&&t.N_.size>0}function NA(t){return Ce(t).L_.size===0}function gN(t){t.Q_=void 0}async function uO(t){t.q_.set("Online")}async function dO(t){t.N_.forEach((e,n)=>{Cx(t,e)})}async function hO(t,e){gN(t),Ix(t)?(t.q_.M_(e),Ex(t)):t.q_.set("Unknown")}async function fO(t,e,n){if(t.q_.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $m(t,r)}else if(e instanceof $f?t.Q_.Ke(e):e instanceof US?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Se.min()))try{const r=await oN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.N_.get(h);m&&i.N_.set(h,m.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const m=i.N_.get(u);if(!m)return;i.N_.set(u,m.withResumeToken(Kt.EMPTY_BYTE_STRING,m.snapshotVersion)),mN(i,u);const p=new Ri(m.target,u,h,m.sequenceNumber);Cx(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await $m(t,r)}}async function $m(t,e,n){if(!uo(e))throw e;t.L_.add(1),await qd(t),t.q_.set("Offline"),n||(n=()=>oN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qg(t)})}function pN(t,e){return e().catch(n=>$m(t,n,e))}async function bc(t){const e=Ce(t),n=no(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mO(e);)try{const s=await tO(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,gO(e,s)}catch(s){await $m(e,s)}yN(e)&&wN(e)}function mO(t){return NA(t)&&t.O_.length<10}function gO(t,e){t.O_.push(e);const n=no(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yN(t){return NA(t)&&!no(t).n_()&&t.O_.length>0}function wN(t){no(t).start()}async function pO(t){no(t).p_()}async function yO(t){const e=no(t);for(const n of t.O_)e.m_(n.mutations)}async function wO(t,e,n){const r=t.O_.shift(),s=mx.from(r,e,n);await pN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bc(t)}async function vO(t,e){e&&no(t).V_&&await async function(r,s){if(function(o){return iM(o)&&o!==te.ABORTED}(s.code)){const i=r.O_.shift();no(r).s_(),await pN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bc(r)}}(t,e),yN(t)&&wN(t)}async function PC(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=NA(n);n.L_.add(3),await qd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qg(n)}async function mw(t,e){const n=Ce(t);e?(n.L_.delete(2),await qg(n)):e||(n.L_.add(2),await qd(n),n.q_.set("Unknown"))}function Cc(t){return t.K_||(t.K_=function(n,r,s){const i=Ce(n);return i.w_(),new aO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:uO.bind(null,t),Ro:dO.bind(null,t),mo:hO.bind(null,t),d_:fO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ix(t)?Ex(t):t.q_.set("Unknown")):(await t.K_.stop(),gN(t))})),t.K_}function no(t){return t.U_||(t.U_=function(n,r,s){const i=Ce(n);return i.w_(),new oO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pO.bind(null,t),mo:vO.bind(null,t),f_:yO.bind(null,t),g_:wO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bc(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Tx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kx(t,e){if(Xt("AsyncQueue",`${e}: ${t}`),uo(t))return new ue(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=mu(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new Hl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.W_=new yt(ge.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class lc{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new lc(e,n,Hl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _O{constructor(){this.queries=LC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ce(n),i=s.queries;s.queries=LC(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new ue(te.ABORTED,"Firestore shutting down"))}}function LC(){return new ho(t=>pS(t),jg)}async function Sx(t,e){const n=Ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new xO,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=kx(o,`Initialization of query '${hl(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ux(n)}async function Nx(t,e){const n=Ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BO(t,e){const n=Ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Ux(n)}function bO(t,e,n){const r=Ce(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ux(t){t.Y_.forEach(e=>{e.next()})}var gw,jC;(jC=gw||(gw={})).ea="default",jC.Cache="cache";class Fx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.key=e}}class xN{constructor(e){this.key=e}}class CO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=wS(e),this.Ra=new Hl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new RC,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const w=s.get(m),C=Kd(this.query,p)?p:null,b=!!w&&this.mutatedKeys.has(w.key),x=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;w&&C?w.data.isEqual(C.data)?b!==x&&(r.track({type:3,doc:C}),U=!0):this.ga(w,C)||(r.track({type:2,doc:C}),U=!0,(u&&this.Aa(C,u)>0||h&&this.Aa(C,h)<0)&&(l=!0)):!w&&C?(r.track({type:0,doc:C}),U=!0):w&&!C&&(r.track({type:1,doc:w}),U=!0,(u||h)&&(l=!0)),U&&(C?(o=o.add(C),i=x?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,p)=>function(C,b){const x=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return x(C)-x(b)}(m.type,p.type)||this.Aa(m.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new lc(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new RC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new xN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new vN(r))}),n}ba(e){this.Ta=e.Ts,this.da=Me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return lc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class EO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IO{constructor(e){this.key=e,this.va=!1}}class TO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ho(l=>pS(l),jg),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(ge.comparator),this.Na=new Map,this.La=new xx,this.Ba={},this.ka=new Map,this.qa=yA.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kO(t,e,n=!0){const r=$g(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await _N(r,e,n,!0),s}async function SO(t,e){const n=$g(t);await _N(n,e,!0,!1)}async function _N(t,e,n,r){const s=await Gm(t.localStore,Mr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Qx(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Wg(t.remoteStore,s),l}async function Qx(t,e,n,r,s){t.Ka=(p,w,C)=>async function(x,U,T,E){let N=U.view.ma(T);N.ns&&(N=await hw(x.localStore,U.query,!1).then(({documents:I})=>U.view.ma(I,N)));const O=E&&E.targetChanges.get(U.targetId),H=E&&E.targetMismatches.get(U.targetId)!=null,M=U.view.applyChanges(N,x.isPrimaryClient,O,H);return pw(x,U.targetId,M.wa),M.snapshot}(t,p,w,C);const i=await hw(t.localStore,e,!0),o=new CO(e,i.Ts),l=o.ma(i.documents),u=Gd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);pw(t,n,h.wa);const m=new EO(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function NO(t,e,n){const r=Ce(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!jg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await oc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ac(r.remoteStore,s.targetId),cc(r,s.targetId)}).catch(co)):(cc(r,s.targetId),await oc(r.localStore,s.targetId,!0))}async function UO(t,e){const n=Ce(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ac(n.remoteStore,r.targetId))}async function FO(t,e,n){const r=jx(t);try{const s=await function(o,l){const u=Ce(o),h=Ge.now(),m=l.reduce((C,b)=>C.add(b.key),Me());let p,w;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=Lr(),x=Me();return u.cs.getEntries(C,m).next(U=>{b=U,b.forEach((T,E)=>{E.isValidDocument()||(x=x.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,b)).next(U=>{p=U;const T=[];for(const E of l){const N=rM(E,p.get(E.key).overlayedDocument);N!=null&&T.push(new ea(E.key,N,oS(N.value.mapValue),On.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,T,l)}).next(U=>{w=U;const T=U.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(C,U.batchId,T)})}).then(()=>({batchId:w.batchId,changes:xS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new yt(je)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await fo(r,s.changes),await bc(r.remoteStore)}catch(s){const i=kx(s,"Failed to persist write");n.reject(i)}}async function BN(t,e){const n=Ce(t);try{const r=await YM(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ie(o.va):s.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await fo(n,r,e)}catch(r){await co(r)}}function DC(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Ce(o);u.onlineState=l;let h=!1;u.queries.forEach((m,p)=>{for(const w of p.j_)w.Z_(l)&&(h=!0)}),h&&Ux(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QO(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new yt(ge.comparator);o=o.insert(i,Vt.newNoDocument(i,Se.min()));const l=Me().add(i),u=new zd(Se.min(),new Map,new yt(je),o,l);await BN(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Lx(r)}else await oc(r.localStore,e,!1).then(()=>cc(r,e,n)).catch(co)}async function PO(t,e){const n=Ce(t),r=e.batch.batchId;try{const s=await XM(n.localStore,e);Rx(n,r,null),Px(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fo(n,s)}catch(s){await co(s)}}async function RO(t,e,n){const r=Ce(t);try{const s=await function(o,l){const u=Ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(Ie(p!==null),m=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);Rx(r,e,n),Px(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fo(r,s)}catch(s){await co(s)}}function Px(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Rx(t,e,n){const r=Ce(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function cc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||bN(t,r)})}function bN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ac(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lx(t))}function pw(t,e,n){for(const r of n)r instanceof vN?(t.La.addReference(r.key,e),LO(t,r)):r instanceof xN?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||bN(t,r.key)):be()}function LO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),Lx(t))}function Lx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(ot.fromString(e)),r=t.qa.next();t.Na.set(r,new IO(n)),t.Oa=t.Oa.insert(n,r),Wg(t.remoteStore,new Ri(Mr(Vd(n.path)),r,"TargetPurposeLimboResolution",vr.oe))}}async function fo(t,e,n){const r=Ce(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Bx.Wi(u.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const m=Ce(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(h,w=>$.forEach(w.$i,C=>m.persistence.referenceDelegate.addReference(p,w.targetId,C)).next(()=>$.forEach(w.Ui,C=>m.persistence.referenceDelegate.removeReference(p,w.targetId,C)))))}catch(p){if(!uo(p))throw p;se("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const w=p.targetId;if(!p.fromCache){const C=m.os.get(w),b=C.snapshotVersion,x=C.withLastLimboFreeSnapshotVersion(b);m.os=m.os.insert(w,x)}}}(r.localStore,i))}async function jO(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await aN(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new ue(te.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fo(n,r.hs)}}function DO(t,e){const n=Ce(t),r=n.Na.get(e);if(r&&r.va)return Me().add(r.key);{let s=Me();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}async function MO(t,e){const n=Ce(t),r=await hw(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&pw(n,e.targetId,s.wa),s}async function OO(t,e){const n=Ce(t);return lN(n.localStore,e).then(r=>fo(n,r))}async function HO(t,e,n,r){const s=Ce(t),i=await function(l,u){const h=Ce(l),m=Ce(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",p=>m.Mn(p,u).next(w=>w?h.localDocuments.getDocuments(p,w):$.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await bc(s.remoteStore):n==="acknowledged"||n==="rejected"?(Rx(s,e,r||null),Px(s,e),function(l,u){Ce(Ce(l).mutationQueue).On(u)}(s.localStore,e)):be(),await fo(s,i)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function VO(t,e){const n=Ce(t);if($g(n),jx(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await MC(n,r.toArray());n.Qa=!0,await mw(n.remoteStore,!0);for(const i of s)Wg(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(cc(n,o),oc(n.localStore,o,!0))),Ac(n.remoteStore,o)}),await s,await MC(n,r),function(o){const l=Ce(o);l.Na.forEach((u,h)=>{Ac(l.remoteStore,h)}),l.La.pr(),l.Na=new Map,l.Oa=new yt(ge.comparator)}(n),n.Qa=!1,await mw(n.remoteStore,!1)}}async function MC(t,e,n){const r=Ce(t),s=[],i=[];for(const o of e){let l;const u=r.Ma.get(o);if(u&&u.length!==0){l=await Gm(r.localStore,Mr(u[0]));for(const h of u){const m=r.Fa.get(h),p=await MO(r,m);p.snapshot&&i.push(p.snapshot)}}else{const h=await AN(r.localStore,o);l=await Gm(r.localStore,h),await Qx(r,CN(h),o,!1,l.resumeToken)}s.push(l)}return r.Ca.d_(i),s}function CN(t){return mS(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function KO(t){return function(n){return Ce(Ce(n).persistence).Qi()}(Ce(t).localStore)}async function zO(t,e,n,r){const s=Ce(t);if(s.Qa)return void se("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await lN(s.localStore,yS(i[0])),l=zd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Kt.EMPTY_BYTE_STRING);await fo(s,o,l);break}case"rejected":await oc(s.localStore,e,!0),cc(s,e,r);break;default:be()}}async function GO(t,e,n){const r=$g(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){se("SyncEngine","Adding an already active target "+s);continue}const i=await AN(r.localStore,s),o=await Gm(r.localStore,i);await Qx(r,CN(i),o.targetId,!1,o.resumeToken),Wg(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await oc(r.localStore,s,!1).then(()=>{Ac(r.remoteStore,s),cc(r,s)}).catch(co)}}function $g(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QO.bind(null,e),e.Ca.d_=BO.bind(null,e.eventManager),e.Ca.$a=bO.bind(null,e.eventManager),e}function jx(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RO.bind(null,e),e}class bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return iN(this.persistence,new sN,e.initialUser,this.serializer)}Ga(e){return new nN(zg.Zr,this.serializer)}Wa(e){return new uN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bd.provider={build:()=>new bd};class EN extends bd{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await jx(this.Ja.syncEngine),await bc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return iN(this.persistence,new sN,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new QM(r,e.asyncQueue,n)}Ha(e,n){const r=new hD(n,this.persistence);return new dD(e.asyncQueue,r)}Ga(e){const n=rN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new _x(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,dN(),Zf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new uN}}class qO extends EN{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof m0&&(this.sharedClientState.syncEngine={no:HO.bind(null,n),ro:zO.bind(null,n),io:GO.bind(null,n),Qi:KO.bind(null,n),eo:OO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await VO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=dN();if(!m0.D(n))throw new ue(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new m0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Cd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jO.bind(null,this.syncEngine),await mw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _O}()}createDatastore(e){const n=Gg(e.databaseInfo.databaseId),r=function(i){return new iO(i)}(e.databaseInfo);return function(i,o,l,u){return new AO(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new cO(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>DC(this.syncEngine,n,0),function(){return QC.D()?new QC:new nO}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,m){const p=new TO(s,i,o,l,u,h);return m&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ce(s);se("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await qd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cd.provider={build:()=>new Cd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Xt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ln.UNAUTHENTICATED,this.clientId=ix.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function p0(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function OC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $O(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>PC(e.remoteStore,s)),t._onlineComponents=e}async function $O(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await p0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ec("Error using user provided cache. Falling back to memory cache: "+n),await p0(t,new bd)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await p0(t,new bd);return t._offlineComponents}async function IN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await OC(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await OC(t,new Cd))),t._onlineComponents}function ZO(t){return IN(t).then(e=>e.syncEngine)}async function Zm(t){const e=await IN(t),n=e.eventManager;return n.onListen=kO.bind(null,e.syncEngine),n.onUnlisten=NO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UO.bind(null,e.syncEngine),n}function JO(t,e,n={}){const r=new Xs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const m=new Dx({next:w=>{m.Za(),o.enqueueAndForget(()=>Nx(i,p));const C=w.docs.has(l);!C&&w.fromCache?h.reject(new ue(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&u&&u.source==="server"?h.reject(new ue(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),p=new Fx(Vd(l.path),m,{includeMetadataChanges:!0,_a:!0});return Sx(i,p)}(await Zm(t),t.asyncQueue,e,n,r)),r.promise}function XO(t,e,n={}){const r=new Xs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const m=new Dx({next:w=>{m.Za(),o.enqueueAndForget(()=>Nx(i,p)),w.fromCache&&u.source==="server"?h.reject(new ue(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),p=new Fx(l,m,{includeMetadataChanges:!0,_a:!0});return Sx(i,p)}(await Zm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t,e,n){if(!n)throw new ue(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SN(t,e,n,r){if(e===!0&&r===!0)throw new ue(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VC(t){if(!ge.isDocumentKey(t))throw new ue(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KC(t){if(ge.isDocumentKey(t))throw new ue(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zg(t);throw new ue(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mx{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zk;switch(r.type){case"firstParty":return new iD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=HC.get(n);r&&(se("ComponentProvider","Removing Datastore"),HC.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ri(this.firestore,e,this._query)}}class kn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class Oi extends ri{constructor(e,n,r){super(e,n,Vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new ge(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function on(t,e,...n){if(t=st(t),kN("collection","path",e),t instanceof Mx){const r=ot.fromString(e,...n);return KC(r),new Oi(t,null,r)}{if(!(t instanceof kn||t instanceof Oi))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return KC(r),new Oi(t.firestore,null,r)}}function ze(t,e,...n){if(t=st(t),arguments.length===1&&(e=ix.newId()),kN("doc","path",e),t instanceof Mx){const r=ot.fromString(e,...n);return VC(r),new kn(t,null,new ge(r))}{if(!(t instanceof kn||t instanceof Oi))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return VC(r),new kn(t.firestore,t instanceof Oi?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hN(this,"async_queue_retry"),this.Vu=()=>{const r=Zf();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Xs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!uo(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Xt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Tx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function qC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ei extends Mx{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new GC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GC(e),this._firestoreClient=void 0,await e}}}function NN(t,e,n){const r=lo(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(AA(i,e))return s;throw new ue(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ue(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Wd(t){if(t._terminated)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YO(t),t._firestoreClient}function YO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,m){return new QD(l,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,TN(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new WO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wA(Kt.fromBase64String(e))}catch(n){throw new ue(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wA(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=/^__.*__$/;class tH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ea(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bc(e,this.data,n,this.fieldTransforms)}}class UN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ea(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Yg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(FN(this.Cu)&&eH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gg(e)}Qu(e,n,r,s=!1){return new Yg({Cu:e,methodName:n,qu:r,path:Nt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ep(t){const e=t._freezeSettings(),n=Gg(t._databaseId);return new nH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QN(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Kx("Data must be an object, but it was:",o,r);const l=RN(r,o);let u,h;if(i.merge)u=new xr(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const w=yw(e,p,n);if(!o.contains(w))throw new ue(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);jN(m,w)||m.push(w)}u=new xr(m),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new tH(new Mn(l),u,h)}class tp extends UA{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tp}}function PN(t,e,n){return new Yg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ox extends UA{_toFieldTransform(e){return new Mg(e.path,new ic)}isEqual(e){return e instanceof Ox}}class Hx extends UA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=PN(this,e,!0),r=this.Ku.map(i=>FA(i,n)),s=new fA(r);return new Mg(e.path,s)}isEqual(e){return e instanceof Hx&&AA(this.Ku,e.Ku)}}class Vx extends UA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=PN(this,e,!0),r=this.Ku.map(i=>FA(i,n)),s=new mA(r);return new Mg(e.path,s)}isEqual(e){return e instanceof Vx&&AA(this.Ku,e.Ku)}}function rH(t,e,n,r){const s=t.Qu(1,e,n);Kx("Data must be an object, but it was:",s,r);const i=[],o=Mn.empty();SA(r,(u,h)=>{const m=zx(e,u,n);h=st(h);const p=s.Nu(m);if(h instanceof tp)i.push(m);else{const w=FA(h,p);w!=null&&(i.push(m),o.set(m,w))}});const l=new xr(i);return new UN(o,l,s.fieldTransforms)}function sH(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[yw(e,r,n)],u=[s];if(i.length%2!=0)throw new ue(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<i.length;w+=2)l.push(yw(e,i[w])),u.push(i[w+1]);const h=[],m=Mn.empty();for(let w=l.length-1;w>=0;--w)if(!jN(h,l[w])){const C=l[w];let b=u[w];b=st(b);const x=o.Nu(C);if(b instanceof tp)h.push(C);else{const U=FA(b,x);U!=null&&(h.push(C),m.set(C,U))}}const p=new xr(h);return new UN(m,p,o.fieldTransforms)}function iH(t,e,n,r=!1){return FA(n,t.Qu(r?4:3,e))}function FA(t,e){if(LN(t=st(t)))return Kx("Unsupported field value:",e,t),RN(t,e);if(t instanceof UA)return function(r,s){if(!FN(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=FA(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ge.fromDate(r);return{timestampValue:ac(s.serializer,i)}}if(r instanceof Ge){const i=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(s.serializer,i)}}if(r instanceof Jg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wA)return{bytesValue:QS(s.serializer,r._byteString)};if(r instanceof kn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xg)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return hx(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Zg(r)}`)}(t,e)}function RN(t,e){const n={};return rS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):SA(t,(r,s)=>{const i=FA(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function LN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Jg||t instanceof wA||t instanceof kn||t instanceof UA||t instanceof Xg)}function Kx(t,e,n){if(!LN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Zg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function yw(t,e,n){if((e=st(e))instanceof $d)return e._internalPath;if(typeof e=="string")return zx(t,e);throw Jm("Field path arguments must be of type string or ",t,!1,void 0,n)}const aH=new RegExp("[~\\*/\\[\\]]");function zx(t,e,n){if(e.search(aH)>=0)throw Jm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $d(...e.split("."))._internalPath}catch{throw Jm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ue(te.INVALID_ARGUMENT,l+t+u)}function jN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(np("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oH extends DN{data(){return super.data()}}function np(t,e){return typeof e=="string"?zx(t,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gx{}class rp extends Gx{}function QA(t,e,...n){let r=[];e instanceof Gx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof sp).length,l=i.filter(u=>u instanceof Zd).length;if(o>1||o>0&&l>0)throw new ue(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zd extends rp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zd(e,n,r)}_apply(e){const n=this._parse(e);return HN(e._query,n),new ri(e.firestore,e.converter,iw(e._query,n))}_parse(e){const n=ep(e.firestore);return function(i,o,l,u,h,m,p){let w;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ue(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){$C(p,m);const C=[];for(const b of p)C.push(WC(u,i,b));w={arrayValue:{values:C}}}else w=WC(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||$C(p,m),w=iH(l,o,p,m==="in"||m==="not-in");return Je.create(h,m,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jd(t,e,n){const r=e,s=np("where",t);return Zd._create(s,r,n)}class sp extends Gx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ct.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)HN(o,u),o=iw(o,u)}(e._query,n),new ri(e.firestore,e.converter,iw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ip extends rp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ip(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _d(i,o)}(e._query,this._field,this._direction);return new ri(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new _c(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qx(t,e="asc"){const n=e,r=np("orderBy",t);return ip._create(r,n)}class ap extends rp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ap(e,n,r)}_apply(e){return new ri(e.firestore,e.converter,Mm(e._query,this._limit,this._limitType))}}function ON(t){return ap._create("limit",t,"F")}function WC(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new ue(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gS(e)&&n.indexOf("/")!==-1)throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!ge.isDocumentKey(r))throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vd(t,new ge(r))}if(n instanceof kn)return vd(t,n._key);throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zg(n)}.`)}function $C(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HN(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class VN{convertValue(e,n="none"){switch(dA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return SA(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Tt(o.doubleValue));return new Xg(i)}convertGeoPoint(e){return new Jg(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const n=$i(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Ie(KS(r));const s=new eo(r.get(1),r.get(3)),i=new ge(r.popFirst(5));return s.isEqual(n)||Xt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wx extends DN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(np("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ou extends Wx{data(e={}){return super.data(e)}}class $x{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Nl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ou(this._firestore,this._userDataWriter,r.key,r,new Nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Ou(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Nl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ou(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Nl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:AH(l.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){t=Cr(t,kn);const e=Cr(t.firestore,ei);return JO(Wd(e),t._key).then(n=>zN(e,t,n))}class Zx extends VN{constructor(e){super(),this.firestore=e}convertBytes(e){return new wA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,n)}}function Si(t){t=Cr(t,ri);const e=Cr(t.firestore,ei),n=Wd(e),r=new Zx(e);return MN(t._query),XO(n,t._query).then(s=>new $x(e,r,t,s))}function Hn(t,e,n){t=Cr(t,kn);const r=Cr(t.firestore,ei),s=KN(t.converter,e,n);return Yd(r,[QN(ep(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,On.none())])}function vA(t,e,n,...r){t=Cr(t,kn);const s=Cr(t.firestore,ei),i=ep(s);let o;return o=typeof(e=st(e))=="string"||e instanceof $d?sH(i,"updateDoc",t._key,e,n,r):rH(i,"updateDoc",t._key,e),Yd(s,[o.toMutation(t._key,On.exists(!0))])}function Xd(t){return Yd(Cr(t.firestore,ei),[new Hg(t._key,On.none())])}function uc(t,e){const n=Cr(t.firestore,ei),r=ze(t),s=KN(t.converter,e);return Yd(n,[QN(ep(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}function Gs(t,...e){var n,r,s;t=st(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||qC(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(qC(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,h,m;if(t instanceof kn)h=Cr(t.firestore,ei),m=Vd(t._key.path),u={next:p=>{e[o]&&e[o](zN(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Cr(t,ri);h=Cr(p.firestore,ei),m=p._query;const w=new Zx(h);u={next:C=>{e[o]&&e[o](new $x(h,w,p,C))},error:e[o+1],complete:e[o+2]},MN(t._query)}return function(w,C,b,x){const U=new Dx(x),T=new Fx(C,U,b);return w.asyncQueue.enqueueAndForget(async()=>Sx(await Zm(w),T)),()=>{U.Za(),w.asyncQueue.enqueueAndForget(async()=>Nx(await Zm(w),T))}}(Wd(h),m,l,u)}function Yd(t,e){return function(r,s){const i=new Xs;return r.asyncQueue.enqueueAndForget(async()=>FO(await ZO(r),s,i)),i.promise}(Wd(t),e)}function zN(t,e,n){const r=n.docs.get(e._key),s=new Zx(t);return new Wx(t,s,e._key,r,new Nl(n.hasPendingWrites,n.fromCache),e.converter)}class lH{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=qN(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function GN(t){return new lH(t)}class cH{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Cd.provider,this._offlineComponentProvider={build:n=>new EN(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class uH{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Cd.provider,this._offlineComponentProvider={build:n=>new qO(n,e==null?void 0:e.cacheSizeBytes)}}}function qN(t){return new cH(void 0)}function WN(){return new uH}function Xm(){return new Ox("serverTimestamp")}function $N(...t){return new Hx("arrayUnion",t)}function ZN(...t){return new Vx("arrayRemove",t)}(function(e,n=!0){(function(s){xc=s})(kA),as(new Hr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ei(new rD(r.getProvider("auth-internal")),new oD(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ue(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(h.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Vn(Ob,"4.7.3",e),Vn(Ob,"4.7.3","esm2017")})();const ZC=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:VN,Bytes:wA,CollectionReference:Oi,DocumentReference:kn,DocumentSnapshot:Wx,FieldPath:$d,FieldValue:UA,Firestore:ei,FirestoreError:ue,GeoPoint:Jg,Query:ri,QueryCompositeFilterConstraint:sp,QueryConstraint:rp,QueryDocumentSnapshot:Ou,QueryFieldFilterConstraint:Zd,QueryLimitConstraint:ap,QueryOrderByConstraint:ip,QuerySnapshot:$x,SnapshotMetadata:Nl,Timestamp:Ge,VectorValue:Xg,_AutoId:ix,_ByteString:Kt,_DatabaseId:eo,_DocumentKey:ge,_EmptyAuthCredentialsProvider:zk,_FieldPath:Nt,_cast:Cr,_logWarn:ec,_validateIsNotUsedTogether:SN,addDoc:uc,arrayRemove:ZN,arrayUnion:$N,collection:on,deleteDoc:Xd,doc:ze,ensureFirestoreConfigured:Wd,executeWrite:Yd,getDoc:Bs,getDocs:Si,initializeFirestore:NN,limit:ON,onSnapshot:Gs,orderBy:qx,persistentLocalCache:GN,persistentMultipleTabManager:WN,persistentSingleTabManager:qN,query:QA,serverTimestamp:Xm,setDoc:Hn,updateDoc:vA,where:Jd},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH="type.googleapis.com/google.protobuf.Int64Value",hH="type.googleapis.com/google.protobuf.UInt64Value";function JN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ww(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ww(e));if(typeof t=="function"||typeof t=="object")return JN(t,e=>ww(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ym(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case dH:case hH:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ym(e)):typeof t=="function"||typeof t=="object"?JN(t,e=>Ym(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vl extends As{constructor(e,n,r){super(`${Jx}/${e}`,n||""),this.details=r}}function fH(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mH(t,e){let n=fH(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!JC[o])return new Vl("internal","internal");n=JC[o],r=o}const l=i.message;typeof l=="string"&&(r=l),s=i.details,s!==void 0&&(s=Ym(s))}}catch{}return n==="ok"?null:new Vl(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="us-central1";function pH(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Vl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class yH{constructor(e,n,r,s,i=vw,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new gH(n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=vw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function wH(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function vH(t,e,n){return r=>_H(t,e,r,{})}async function xH(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function _H(t,e,n,r){const s=t._url(e);return BH(t,s,n,r)}async function BH(t,e,n,r){n=ww(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const l=r.timeout||7e4,u=pH(l),h=await Promise.race([xH(e,s,i,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!h)throw new Vl("cancelled","Firebase Functions instance was deleted.");const m=mH(h.status,h.json);if(m)throw m;if(!h.json)throw new Vl("internal","Response is not valid JSON object.");let p=h.json.data;if(typeof p>"u"&&(p=h.json.result),typeof p>"u")throw new Vl("internal","Response is missing data field.");return{data:Ym(p)}}const XC="@firebase/functions",YC="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH="auth-internal",CH="app-check-internal",EH="messaging-internal";function IH(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(bH),l=r.getProvider(EH),u=r.getProvider(CH);return new yH(i,o,l,u,s,t)};as(new Hr(Jx,n,"PUBLIC").setMultipleInstances(!0)),Vn(XC,YC,e),Vn(XC,YC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t=Ng(),e=vw){const r=lo(st(t),Jx).getImmediate({identifier:e}),s=GT("functions");return s&&TH(r,...s),r}function TH(t,e,n){wH(st(t),e,n)}function Rt(t,e,n){return vH(st(t),e)}IH(fetch.bind(self));var kH="firebase",SH="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn(kH,SH,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firebasestorage.googleapis.com",YN="storageBucket",NH=2*60*1e3,UH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt extends As{constructor(e,n,r=0){super(y0(e),`Firebase Storage: ${n} (${y0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return y0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zt||(zt={}));function y0(t){return"storage/"+t}function Xx(){const t="An unknown error occurred, please check the error payload for server response.";return new Gt(zt.UNKNOWN,t)}function FH(t){return new Gt(zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function QH(t){return new Gt(zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gt(zt.UNAUTHENTICATED,t)}function RH(){return new Gt(zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LH(t){return new Gt(zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jH(){return new Gt(zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DH(){return new Gt(zt.CANCELED,"User canceled the upload/download.")}function MH(t){return new Gt(zt.INVALID_URL,"Invalid URL '"+t+"'.")}function OH(t){return new Gt(zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function HH(){return new Gt(zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YN+"' property when initializing the app?")}function VH(){return new Gt(zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KH(){return new Gt(zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zH(t){return new Gt(zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xw(t){return new Gt(zt.INVALID_ARGUMENT,t)}function e2(){return new Gt(zt.APP_DELETED,"The Firebase app was deleted.")}function GH(t){return new Gt(zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hu(t,e){return new Gt(zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function eu(t){throw new Gt(zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jr.makeFromUrl(e,n)}catch{return new jr(e,"")}if(r.path==="")return r;throw OH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function h(O){O.path_=decodeURIComponent(O.path)}const m="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${p}/${m}/b/${s}/o${w}`,"i"),b={bucket:1,path:3},x=n===XN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",T=new RegExp(`^https?://${x}/${s}/${U}`,"i"),N=[{regex:l,indices:u,postModify:i},{regex:C,indices:b,postModify:h},{regex:T,indices:{bucket:1,path:2},postModify:h}];for(let O=0;O<N.length;O++){const H=N[O],M=H.regex.exec(e);if(M){const I=M[H.indices.bucket];let B=M[H.indices.path];B||(B=""),r=new jr(I,B),H.postModify(r);break}}if(r==null)throw MH(e);return r}}class qH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WH(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let h=!1;function m(...U){h||(h=!0,e.apply(null,U))}function p(U){s=setTimeout(()=>{s=null,t(C,u())},U)}function w(){i&&clearTimeout(i)}function C(U,...T){if(h){w();return}if(U){w(),m.call(null,U,...T);return}if(u()||o){w(),m.call(null,U,...T);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,p(N)}let b=!1;function x(U){b||(b=!0,w(),!h&&(s!==null?(U||(l=2),clearTimeout(s),p(0)):U||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function $H(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(t){return t!==void 0}function JH(t){return typeof t=="object"&&!Array.isArray(t)}function Yx(t){return typeof t=="string"||t instanceof String}function eE(t){return e_()&&t instanceof Blob}function e_(){return typeof Blob<"u"}function tE(t,e,n,r){if(r<e)throw xw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw xw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function t2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var eA;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(eA||(eA={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e,n,r,s,i,o,l,u,h,m,p,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=p,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,b)=>{this.resolve_=C,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Wh(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===eA.NO_ERROR,u=i.getStatus();if(!l||XH(u,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===eA.ABORT;r(!1,new Wh(!1,null,m));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new Wh(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());ZH(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=Xx();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?e2():DH();o(u)}else{const u=jH();o(u)}};this.canceled_?n(!1,new Wh(!1,null,!0)):this.backoffId_=WH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$H(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function eV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function tV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function rV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sV(t,e,n,r,s,i,o=!0){const l=t2(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return nV(h,e),eV(h,n),tV(h,i),rV(h,r),new YH(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aV(...t){const e=iV();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(e_())return new Blob(t);throw new Gt(zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){if(typeof atob>"u")throw zH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w0{constructor(e,n){this.data=e,this.contentType=n||null}}function lV(t,e){switch(t){case qs.RAW:return new w0(n2(e));case qs.BASE64:case qs.BASE64URL:return new w0(r2(t,e));case qs.DATA_URL:return new w0(uV(e),dV(e))}throw Xx()}function n2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function cV(t){let e;try{e=decodeURIComponent(t)}catch{throw Hu(qs.DATA_URL,"Malformed data URL.")}return n2(e)}function r2(t,e){switch(t){case qs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Hu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case qs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Hu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=AV(e)}catch(s){throw s.message.includes("polyfill")?s:Hu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class s2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Hu(qs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=hV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function uV(t){const e=new s2(t);return e.base64?r2(qs.BASE64,e.rest):cV(e.rest)}function dV(t){return new s2(t).contentType}function hV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){let r=0,s="";eE(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(eE(this.data_)){const r=this.data_,s=oV(r,e,n);return s===null?null:new Sa(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Sa(r,!0)}}static getBlob(...e){if(e_()){const n=e.map(r=>r instanceof Sa?r.data_:r);return new Sa(aV.apply(null,n))}else{const n=e.map(o=>Yx(o)?lV(qs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Sa(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){let e;try{e=JSON.parse(t)}catch{return null}return JH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mV(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function a2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t,e){return e}class Yn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||gV}}let $h=null;function pV(t){return!Yx(t)||t.length<2?t:a2(t)}function o2(){if($h)return $h;const t=[];t.push(new Yn("bucket")),t.push(new Yn("generation")),t.push(new Yn("metageneration")),t.push(new Yn("name","fullPath",!0));function e(i,o){return pV(o)}const n=new Yn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Yn("size");return s.xform=r,t.push(s),t.push(new Yn("timeCreated")),t.push(new Yn("updated")),t.push(new Yn("md5Hash",null,!0)),t.push(new Yn("cacheControl",null,!0)),t.push(new Yn("contentDisposition",null,!0)),t.push(new Yn("contentEncoding",null,!0)),t.push(new Yn("contentLanguage",null,!0)),t.push(new Yn("contentType",null,!0)),t.push(new Yn("metadata","customMetadata",!0)),$h=t,$h}function yV(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new jr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function wV(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return yV(r,t),r}function A2(t,e,n){const r=i2(e);return r===null?null:wV(t,r,n)}function vV(t,e,n,r){const s=i2(e);if(s===null||!Yx(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const m=t.bucket,p=t.fullPath,w="/b/"+o(m)+"/o/"+o(p),C=op(w,n,r),b=t2({alt:"media",token:h});return C+b})[0]}function xV(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class t_{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){if(!t)throw Xx()}function _V(t,e){function n(r,s){const i=A2(t,s,e);return l2(i!==null),i}return n}function BV(t,e){function n(r,s){const i=A2(t,s,e);return l2(i!==null),vV(i,s,t.host,t._protocol)}return n}function c2(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=RH():s=PH():n.getStatus()===402?s=QH(t.bucket):n.getStatus()===403?s=LH(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function u2(t){const e=c2(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=FH(t.path)),i.serverResponse=s.serverResponse,i}return n}function bV(t,e,n){const r=e.fullServerUrl(),s=op(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new t_(s,i,BV(t,n),o);return l.errorHandler=u2(e),l}function CV(t,e){const n=e.fullServerUrl(),r=op(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,h){}const l=new t_(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=u2(e),l}function EV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function IV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=EV(null,e)),r}function TV(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let O=0;O<2;O++)N=N+Math.random().toString().slice(2);return N}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const h=IV(e,r,s),m=xV(h,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+u+"--",C=Sa.getBlob(p,r,w);if(C===null)throw VH();const b={name:h.fullPath},x=op(i,t.host,t._protocol),U="POST",T=t.maxUploadRetryTime,E=new t_(x,U,_V(t,n),T);return E.urlParams=b,E.headers=o,E.body=C.uploadData(),E.errorHandler=c2(e),E}class kV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=eA.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=eA.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=eA.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw eu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class SV extends kV{initXhr(){this.xhr_.responseType="text"}}function n_(){return new SV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n){this._service=e,n instanceof jr?this._location=n:this._location=jr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xA(e,n)}get root(){const e=new jr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return a2(this._location.path)}get storage(){return this._service}get parent(){const e=fV(this._location.path);if(e===null)return null;const n=new jr(this._location.bucket,e);return new xA(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw GH(e)}}function NV(t,e,n){t._throwIfRoot("uploadBytes");const r=TV(t.storage,t._location,o2(),new Sa(e,!0),n);return t.storage.makeRequestWithTokens(r,n_).then(s=>({metadata:s,ref:t}))}function UV(t){t._throwIfRoot("getDownloadURL");const e=bV(t.storage,t._location,o2());return t.storage.makeRequestWithTokens(e,n_).then(n=>{if(n===null)throw KH();return n})}function FV(t){t._throwIfRoot("deleteObject");const e=CV(t.storage,t._location);return t.storage.makeRequestWithTokens(e,n_)}function QV(t,e){const n=mV(t._location.path,e),r=new jr(t._location.bucket,n);return new xA(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){return/^[A-Za-z]+:\/\//.test(t)}function RV(t,e){return new xA(t,e)}function d2(t,e){if(t instanceof r_){const n=t;if(n._bucket==null)throw HH();const r=new xA(n,n._bucket);return e!=null?d2(r,e):r}else return e!==void 0?QV(t,e):t}function LV(t,e){if(e&&PV(e)){if(t instanceof r_)return RV(t,e);throw xw("To use ref(service, url), the first argument must be a Storage instance.")}else return d2(t,e)}function nE(t,e){const n=e==null?void 0:e[YN];return n==null?null:jr.makeFromBucketSpec(n,t)}function jV(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:w4(s,t.app.options.projectId))}class r_{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=XN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NH,this._maxUploadRetryTime=UH,this._requests=new Set,s!=null?this._bucket=jr.makeFromBucketSpec(s,this._host):this._bucket=nE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jr.makeFromBucketSpec(this._url,e):this._bucket=nE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xA(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new qH(e2());{const o=sV(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const rE="@firebase/storage",sE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="storage";function dc(t,e,n){return t=st(t),NV(t,e,n)}function hc(t){return t=st(t),UV(t)}function f2(t){return t=st(t),FV(t)}function ro(t,e){return t=st(t),LV(t,e)}function DV(t=Ng(),e){t=st(t);const r=lo(t,h2).getImmediate({identifier:e}),s=GT("storage");return s&&MV(r,...s),r}function MV(t,e,n,r={}){jV(t,e,n,r)}function OV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new r_(n,r,s,e,kA)}function HV(){as(new Hr(h2,OV,"PUBLIC").setMultipleInstances(!0)),Vn(rE,sE,""),Vn(rE,sE,"esm2017")}HV();const m2="@firebase/installations",s_="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1e4,p2=`w:${s_}`,y2="FIS_v2",VV="https://firebaseinstallations.googleapis.com/v1",KV=60*60*1e3,zV="installations",GV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_A=new TA(zV,GV,qV);function w2(t){return t instanceof As&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2({projectId:t}){return`${VV}/projects/${t}/installations`}function x2(t){return{token:t.token,requestStatus:2,expiresIn:$V(t.expiresIn),creationTime:Date.now()}}async function _2(t,e){const r=(await e.json()).error;return _A.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function B2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function WV(t,{refreshToken:e}){const n=B2(t);return n.append("Authorization",ZV(e)),n}async function b2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $V(t){return Number(t.replace("s","000"))}function ZV(t){return`${y2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=v2(t),s=B2(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={fid:n,authVersion:y2,appId:t.appId,sdkVersion:p2},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await b2(()=>fetch(r,l));if(u.ok){const h=await u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:x2(h.authToken)}}else throw await _2("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=/^[cdef][\w-]{21}$/,_w="";function e5(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=t5(t);return YV.test(n)?n:_w}catch{return _w}}function t5(t){return XV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new Map;function I2(t,e){const n=Ap(t);T2(n,e),n5(n,e)}function T2(t,e){const n=E2.get(t);if(n)for(const r of n)r(e)}function n5(t,e){const n=r5();n&&n.postMessage({key:t,fid:e}),s5()}let Wo=null;function r5(){return!Wo&&"BroadcastChannel"in self&&(Wo=new BroadcastChannel("[Firebase] FID Change"),Wo.onmessage=t=>{T2(t.data.key,t.data.fid)}),Wo}function s5(){E2.size===0&&Wo&&(Wo.close(),Wo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="firebase-installations-database",a5=1,BA="firebase-installations-store";let v0=null;function i_(){return v0||(v0=Sg(i5,a5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(BA)}}})),v0}async function eg(t,e){const n=Ap(t),s=(await i_()).transaction(BA,"readwrite"),i=s.objectStore(BA),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&I2(t,e.fid),e}async function k2(t){const e=Ap(t),r=(await i_()).transaction(BA,"readwrite");await r.objectStore(BA).delete(e),await r.done}async function lp(t,e){const n=Ap(t),s=(await i_()).transaction(BA,"readwrite"),i=s.objectStore(BA),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&I2(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(t){let e;const n=await lp(t.appConfig,r=>{const s=o5(r),i=A5(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===_w?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function o5(t){const e=t||{fid:e5(),registrationStatus:0};return S2(e)}function A5(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(_A.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=l5(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:c5(t)}:{installationEntry:e}}async function l5(t,e){try{const n=await JV(t,e);return eg(t.appConfig,n)}catch(n){throw w2(n)&&n.customData.serverCode===409?await k2(t.appConfig):await eg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function c5(t){let e=await iE(t.appConfig);for(;e.registrationStatus===1;)await C2(100),e=await iE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await a_(t);return r||n}return e}function iE(t){return lp(t,e=>{if(!e)throw _A.create("installation-not-found");return S2(e)})}function S2(t){return u5(t)?{fid:t.fid,registrationStatus:0}:t}function u5(t){return t.registrationStatus===1&&t.registrationTime+g2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5({appConfig:t,heartbeatServiceProvider:e},n){const r=h5(t,n),s=WV(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={installation:{sdkVersion:p2,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await b2(()=>fetch(r,l));if(u.ok){const h=await u.json();return x2(h)}else throw await _2("Generate Auth Token",u)}function h5(t,{fid:e}){return`${v2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(t,e=!1){let n;const r=await lp(t.appConfig,i=>{if(!N2(i))throw _A.create("not-registered");const o=i.authToken;if(!e&&g5(o))return i;if(o.requestStatus===1)return n=f5(t,e),i;{if(!navigator.onLine)throw _A.create("app-offline");const l=y5(i);return n=m5(t,l),l}});return n?await n:r.authToken}async function f5(t,e){let n=await aE(t.appConfig);for(;n.authToken.requestStatus===1;)await C2(100),n=await aE(t.appConfig);const r=n.authToken;return r.requestStatus===0?o_(t,e):r}function aE(t){return lp(t,e=>{if(!N2(e))throw _A.create("not-registered");const n=e.authToken;return w5(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function m5(t,e){try{const n=await d5(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await eg(t.appConfig,r),n}catch(n){if(w2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await k2(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await eg(t.appConfig,r)}throw n}}function N2(t){return t!==void 0&&t.registrationStatus===2}function g5(t){return t.requestStatus===2&&!p5(t)}function p5(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+KV}function y5(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function w5(t){return t.requestStatus===1&&t.requestTime+g2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t){const e=t,{installationEntry:n,registrationPromise:r}=await a_(e);return r?r.catch(console.error):o_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(t,e=!1){const n=t;return await _5(n),(await o_(n,e)).token}async function _5(t){const{registrationPromise:e}=await a_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(t){if(!t||!t.options)throw x0("App Configuration");if(!t.name)throw x0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw x0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function x0(t){return _A.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="installations",b5="installations-internal",C5=t=>{const e=t.getProvider("app").getImmediate(),n=B5(e),r=lo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},E5=t=>{const e=t.getProvider("app").getImmediate(),n=lo(e,U2).getImmediate();return{getId:()=>v5(n),getToken:s=>x5(n,s)}};function I5(){as(new Hr(U2,C5,"PUBLIC")),as(new Hr(b5,E5,"PRIVATE"))}I5();Vn(m2,s_);Vn(m2,s_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="/firebase-messaging-sw.js",k5="/firebase-cloud-messaging-push-scope",F2="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",S5="https://fcmregistrations.googleapis.com/v1",Q2="google.c.a.c_id",N5="google.c.a.c_l",U5="google.c.a.ts",F5="google.c.a.e";var oE;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(oE||(oE={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ed;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ed||(Ed={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Q5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="fcm_token_details_db",P5=5,AE="fcm_token_object_Store";async function R5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(_0))return null;let e=null;return(await Sg(_0,P5,{upgrade:async(r,s,i,o)=>{var l;if(s<2||!r.objectStoreNames.contains(AE))return;const u=o.objectStore(AE),h=await u.index("fcmSenderId").get(t);if(await u.clear(),!!h){if(s===2){const m=h;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:(l=m.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:Ii(m.vapidKey)}}}else if(s===3){const m=h;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Ii(m.auth),p256dh:Ii(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Ii(m.vapidKey)}}}else if(s===4){const m=h;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Ii(m.auth),p256dh:Ii(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Ii(m.vapidKey)}}}}}})).close(),await o0(_0),await o0("fcm_vapid_details_db"),await o0("undefined"),L5(e)?e:null}function L5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="firebase-messaging-database",D5=1,Id="firebase-messaging-store";let B0=null;function P2(){return B0||(B0=Sg(j5,D5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Id)}}})),B0}async function M5(t){const e=R2(t),r=await(await P2()).transaction(Id).objectStore(Id).get(e);if(r)return r;{const s=await R5(t.appConfig.senderId);if(s)return await A_(t,s),s}}async function A_(t,e){const n=R2(t),s=(await P2()).transaction(Id,"readwrite");return await s.objectStore(Id).put(e,n),await s.done,e}function R2({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Kn=new TA("messaging","Messaging",O5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H5(t,e){const n=await c_(t),r=L2(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(l_(t.appConfig),s)).json()}catch(o){throw Kn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Kn.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw Kn.create("token-subscribe-no-token");return i.token}async function V5(t,e){const n=await c_(t),r=L2(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${l_(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw Kn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Kn.create("token-update-failed",{errorInfo:o})}if(!i.token)throw Kn.create("token-update-no-token");return i.token}async function K5(t,e){const r={method:"DELETE",headers:await c_(t)};try{const i=await(await fetch(`${l_(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw Kn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw Kn.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function l_({projectId:t}){return`${S5}/projects/${t}/registrations`}async function c_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function L2({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==F2&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=7*24*60*60*1e3;async function G5(t){const e=await W5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ii(e.getKey("auth")),p256dh:Ii(e.getKey("p256dh"))},r=await M5(t.firebaseDependencies);if(r){if($5(r.subscriptionOptions,n))return Date.now()>=r.createTime+z5?q5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await K5(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return lE(t.firebaseDependencies,n)}else return lE(t.firebaseDependencies,n)}async function q5(t,e){try{const n=await V5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await A_(t.firebaseDependencies,r),n}catch(n){throw n}}async function lE(t,e){const r={token:await H5(t,e),createTime:Date.now(),subscriptionOptions:e};return await A_(t,r),r.token}async function W5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Q5(e)})}function $5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Z5(e,t),J5(e,t),X5(e,t),e}function Z5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function J5(t,e){e.data&&(t.data=e.data)}function X5(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;l&&(t.fcmOptions.link=l);const u=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t){return typeof t=="object"&&!!t&&Q2 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){if(!t||!t.options)throw b0("App Configuration Object");if(!t.name)throw b0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw b0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function b0(t){return Kn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=e3(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n3(t){try{t.swRegistration=await navigator.serviceWorker.register(T5,{scope:k5}),t.swRegistration.update().catch(()=>{})}catch(e){throw Kn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(t,e){if(!e&&!t.swRegistration&&await n3(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Kn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s3(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=F2)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e){if(!navigator)throw Kn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Kn.create("permission-blocked");return await s3(t,e==null?void 0:e.vapidKey),await r3(t,e==null?void 0:e.serviceWorkerRegistration),G5(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(t,e,n){const r=a3(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Q2],message_name:n[N5],message_time:n[U5],message_device_time:Math.floor(Date.now()/1e3)})}function a3(t){switch(t){case Ed.NOTIFICATION_CLICKED:return"notification_open";case Ed.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ed.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(cE(n)):t.onMessageHandler.next(cE(n)));const r=n.data;Y5(r)&&r[F5]==="1"&&await i3(t,n.messageType,r)}const uE="@firebase/messaging",dE="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=t=>{const e=new t3(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>o3(e,n)),e},l3=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>j2(e,r)}};function c3(){as(new Hr("messaging",A3,"PUBLIC")),as(new Hr("messaging-internal",l3,"PRIVATE")),Vn(uE,dE),Vn(uE,dE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(){try{await ZT()}catch{return!1}return typeof window<"u"&&Kv()&&E4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t,e){if(!navigator)throw Kn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t=Ng()){return D2().then(e=>{if(!e)throw Kn.create("unsupported-browser")},e=>{throw Kn.create("indexed-db-unsupported")}),lo(st(t),"messaging").getImmediate()}async function h3(t,e){return t=st(t),j2(t,e)}function hE(t,e){return t=st(t),u3(t,e)}c3();const f3={apiKey:"AIzaSyCWp0X6bLJBsyYKTjUaVsXBSuVD8KeeEqY",authDomain:"carnival-planner.firebaseapp.com",projectId:"carnival-planner",storageBucket:"carnival-planner.firebasestorage.app",messagingSenderId:"1036340118282",appId:"1:1036340118282:web:809dc12c298ff1b8f2f0f3",measurementId:"G-XC1K69PSVC"},St=YT(f3),Pa=eD(St),Te=NN(St,{localCache:GN({tabManager:WN()})},"squad-db"),so=DV(St);Promise.resolve(!0);console.log("Firestore initialized");let Li=null;const u_=async()=>{try{return await D2()?(Li=d3(St),console.log("Firebase Messaging initialized"),Li):(console.log("Firebase Messaging not supported in this browser"),null)}catch(t){return console.log("Error initializing Firebase Messaging:",t),null}},m3=async t=>{try{if(await Notification.requestPermission()!=="granted")return console.log("Notification permission denied"),null;if(Li||await u_(),!Li)return null;const n=await h3(Li,{vapidKey:t});return console.log("FCM Token:",n),n}catch(e){return console.log("Error getting FCM token:",e),null}},g3=t=>{Li?hE(Li,t):u_().then(()=>{Li&&hE(Li,t)})};u_();const Zh="/assets/carnival-logo-CBA9n7vt.png",C0=[{name:"Sugar Mas (St. Kitts)",date:"2026-01-01"},{name:"St. Croix Carnival",date:"2026-01-03"},{name:"Carnaval Ponceno (Puerto Rico)",date:"2026-02-12"},{name:"Aruba Carnival",date:"2026-02-14"},{name:"Barranquilla Carnival (Colombia)",date:"2026-02-14"},{name:"Martinique Carnival",date:"2026-02-15"},{name:"Rio Carnival (Brazil)",date:"2026-02-15"},{name:"Carnaval De Saint-Martin",date:"2026-02-15"},{name:"Mas Domnik (Dominica)",date:"2026-02-16"},{name:"Carriacou & Petite Martinique",date:"2026-02-16"},{name:"Venezuela Carnival",date:"2026-02-16"},{name:"Trinidad Carnival",date:"2026-02-16"},{name:"Guyana Mashramani",date:"2026-02-23"},{name:"Carnaval De San Pedro (Belize)",date:"2026-02-23"},{name:"Cape Town Carnival (South Africa)",date:"2026-03-21"},{name:"Virgin Gorda Easter Festival",date:"2026-04-05"},{name:"Jamaica Carnival",date:"2026-04-12"},{name:"Tampa Bay Carnival (USA)",date:"2026-04-18"},{name:"St. Maarten Carnival",date:"2026-04-30"},{name:"St. Thomas Carnival (USVI)",date:"2026-05-02"},{name:"Cayman Carnival Batabano",date:"2026-05-09"},{name:"Braccanal (Cayman Islands)",date:"2026-05-13"},{name:"Berlin Carnival (Germany)",date:"2026-05-22"},{name:"Atlanta Caribbean Carnival",date:"2026-05-23"},{name:"Aalborg Karneval (Denmark)",date:"2026-05-23"},{name:"Orlando Carnival",date:"2026-05-24"},{name:"Luton International Carnival (UK)",date:"2026-05-24"},{name:"Guyana Independence",date:"2026-05-26"},{name:"Munich Carnival (Germany)",date:"2026-06-04"},{name:"Bahamas Carnival",date:"2026-06-06"},{name:"South Carolina Carnival",date:"2026-06-11"},{name:"Bermuda Carnival",date:"2026-06-15"},{name:"Hollywood Carnival (USA)",date:"2026-06-20"},{name:"Caymas Carnival (Cayman Islands)",date:"2026-06-20"},{name:"Philadelphia Carnival",date:"2026-06-20"},{name:"Vienna Carnival (Austria)",date:"2026-06-26"},{name:"Vincy Mas (St. Vincent)",date:"2026-07-06"},{name:"Saint Lucia Carnival",date:"2026-07-20"},{name:"Anguilla Summer Festival",date:"2026-07-24"},{name:"Zomercarnaval (Rotterdam)",date:"2026-07-25"},{name:"Toronto Caribbean Carnival (Caribana)",date:"2026-08-01"},{name:"Crop Over (Barbados)",date:"2026-08-03"},{name:"Antigua Carnival",date:"2026-08-03"},{name:"Nevis Culturama Festival",date:"2026-08-04"},{name:"Cariwest (Canada)",date:"2026-08-07"},{name:"Spice Mas (Grenada)",date:"2026-08-10"},{name:"Notting Hill Carnival (London)",date:"2026-08-31"},{name:"New York Carnival (Labor Day)",date:"2026-09-07"},{name:"Japan Caribbean Carnival",date:"2026-09-23"},{name:"Miami Carnival",date:"2026-10-11"},{name:"Tobago Carnival",date:"2026-11-01"}];function M2(t,e){const n=R.useRef(e);R.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const p3=1;function y3(t){return Object.freeze({__version:p3,map:t})}function w3(t,e){return Object.freeze({...t,...e})}const O2=R.createContext(null),H2=O2.Provider;function d_(){const t=R.useContext(O2);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function v3(t){function e(n,r){const{instance:s,context:i}=t(n).current;return R.useImperativeHandle(r,()=>s),n.children==null?null:sm.createElement(H2,{value:i},n.children)}return R.forwardRef(e)}function x3(t){function e(n,r){const[s,i]=R.useState(!1),{instance:o}=t(n,i).current;R.useImperativeHandle(r,()=>o),R.useEffect(function(){s&&o.update()},[o,s,n.children]);const l=o._contentNode;return l?OT.createPortal(n.children,l):null}return R.forwardRef(e)}function _3(t){function e(n,r){const{instance:s}=t(n).current;return R.useImperativeHandle(r,()=>s),null}return R.forwardRef(e)}function V2(t,e){const n=R.useRef();R.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function h_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function B3(t,e){return function(r,s){const i=d_(),o=t(h_(r,i),i);return M2(i.map,r.attribution),V2(o.current,r.eventHandlers),e(o.current,i,r,s),o}}var Bw={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(LF,function(n){var r="1.9.4";function s(a){var c,f,g,v;for(f=1,g=arguments.length;f<g;f++){v=arguments[f];for(c in v)a[c]=v[c]}return a}var i=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function o(a,c){var f=Array.prototype.slice;if(a.bind)return a.bind.apply(a,f.call(arguments,1));var g=f.call(arguments,2);return function(){return a.apply(c,g.length?g.concat(f.call(arguments)):arguments)}}var l=0;function u(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,c,f){var g,v,k,V;return V=function(){g=!1,v&&(k.apply(f,v),v=!1)},k=function(){g?v=arguments:(a.apply(f,arguments),setTimeout(V,c),g=!0)},k}function m(a,c,f){var g=c[1],v=c[0],k=g-v;return a===g&&f?a:((a-v)%k+k)%k+v}function p(){return!1}function w(a,c){if(c===!1)return a;var f=Math.pow(10,c===void 0?6:c);return Math.round(a*f)/f}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function b(a){return C(a).split(/\s+/)}function x(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var f in c)a.options[f]=c[f];return a.options}function U(a,c,f){var g=[];for(var v in a)g.push(encodeURIComponent(f?v.toUpperCase():v)+"="+encodeURIComponent(a[v]));return(!c||c.indexOf("?")===-1?"?":"&")+g.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function E(a,c){return a.replace(T,function(f,g){var v=c[g];if(v===void 0)throw new Error("No value provided for variable "+f);return typeof v=="function"&&(v=v(c)),v})}var N=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function O(a,c){for(var f=0;f<a.length;f++)if(a[f]===c)return f;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var I=0;function B(a){var c=+new Date,f=Math.max(0,16-(c-I));return I=c+f,window.setTimeout(a,f)}var S=window.requestAnimationFrame||M("RequestAnimationFrame")||B,Q=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function D(a,c,f){if(f&&S===B)a.call(c);else return S.call(window,o(a,c))}function K(a){a&&Q.call(window,a)}var j={__proto__:null,extend:s,create:i,bind:o,get lastId(){return l},stamp:u,throttle:h,wrapNum:m,falseFn:p,formatNum:w,trim:C,splitWords:b,setOptions:x,getParamString:U,template:E,isArray:N,indexOf:O,emptyImageUrl:H,requestFn:S,cancelFn:Q,requestAnimFrame:D,cancelAnimFrame:K};function J(){}J.extend=function(a){var c=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=c.__super__=this.prototype,g=i(f);g.constructor=c,c.prototype=g;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(c[v]=this[v]);return a.statics&&s(c,a.statics),a.includes&&(Y(a.includes),s.apply(null,[g].concat(a.includes))),s(g,a),delete g.statics,delete g.includes,g.options&&(g.options=f.options?i(f.options):{},s(g.options,a.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,V=g._initHooks.length;k<V;k++)g._initHooks[k].call(this)}},c},J.include=function(a){var c=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},J.mergeOptions=function(a){return s(this.prototype.options,a),this},J.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),f=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function Y(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=N(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var oe={on:function(a,c,f){if(typeof a=="object")for(var g in a)this._on(g,a[g],c);else{a=b(a);for(var v=0,k=a.length;v<k;v++)this._on(a[v],c,f)}return this},off:function(a,c,f){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var g in a)this._off(g,a[g],c);else{a=b(a);for(var v=arguments.length===1,k=0,V=a.length;k<V;k++)v?this._off(a[k]):this._off(a[k],c,f)}return this},_on:function(a,c,f,g){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,f)===!1){f===this&&(f=void 0);var v={fn:c,ctx:f};g&&(v.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(v)}},_off:function(a,c,f){var g,v,k;if(this._events&&(g=this._events[a],!!g)){if(arguments.length===1){if(this._firingCount)for(v=0,k=g.length;v<k;v++)g[v].fn=p;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var V=this._listens(a,c,f);if(V!==!1){var W=g[V];this._firingCount&&(W.fn=p,this._events[a]=g=g.slice()),g.splice(V,1)}}},fire:function(a,c,f){if(!this.listens(a,f))return this;var g=s({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var v=this._events[a];if(v){this._firingCount=this._firingCount+1||1;for(var k=0,V=v.length;k<V;k++){var W=v[k],Z=W.fn;W.once&&this.off(a,Z,W.ctx),Z.call(W.ctx||this,g)}this._firingCount--}}return f&&this._propagateEvent(g),this},listens:function(a,c,f,g){typeof a!="string"&&console.warn('"string" type argument expected');var v=c;typeof c!="function"&&(g=!!c,v=void 0,f=void 0);var k=this._events&&this._events[a];if(k&&k.length&&this._listens(a,v,f)!==!1)return!0;if(g){for(var V in this._eventParents)if(this._eventParents[V].listens(a,c,f,g))return!0}return!1},_listens:function(a,c,f){if(!this._events)return!1;var g=this._events[a]||[];if(!c)return!!g.length;f===this&&(f=void 0);for(var v=0,k=g.length;v<k;v++)if(g[v].fn===c&&g[v].ctx===f)return v;return!1},once:function(a,c,f){if(typeof a=="object")for(var g in a)this._on(g,a[g],c,!0);else{a=b(a);for(var v=0,k=a.length;v<k;v++)this._on(a[v],c,f,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[u(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[u(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};oe.addEventListener=oe.on,oe.removeEventListener=oe.clearAllEventListeners=oe.off,oe.addOneTimeEventListener=oe.once,oe.fireEvent=oe.fire,oe.hasEventListeners=oe.listens;var Ae=J.extend(oe);function z(a,c,f){this.x=f?Math.round(a):a,this.y=f?Math.round(c):c}var ae=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(a){return this.clone()._add(ee(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ee(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new z(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new z(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(a){a=ee(a);var c=a.x-this.x,f=a.y-this.y;return Math.sqrt(c*c+f*f)},equals:function(a){return a=ee(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ee(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function ee(a,c,f){return a instanceof z?a:N(a)?new z(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new z(a.x,a.y):new z(a,c,f)}function we(a,c){if(a)for(var f=c?[a,c]:a,g=0,v=f.length;g<v;g++)this.extend(f[g])}we.prototype={extend:function(a){var c,f;if(!a)return this;if(a instanceof z||typeof a[0]=="number"||"x"in a)c=f=ee(a);else if(a=de(a),c=a.min,f=a.max,!c||!f)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=f.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(a){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,f;return typeof a[0]=="number"||a instanceof z?a=ee(a):a=de(a),a instanceof we?(c=a.min,f=a.max):c=f=a,c.x>=this.min.x&&f.x<=this.max.x&&c.y>=this.min.y&&f.y<=this.max.y},intersects:function(a){a=de(a);var c=this.min,f=this.max,g=a.min,v=a.max,k=v.x>=c.x&&g.x<=f.x,V=v.y>=c.y&&g.y<=f.y;return k&&V},overlaps:function(a){a=de(a);var c=this.min,f=this.max,g=a.min,v=a.max,k=v.x>c.x&&g.x<f.x,V=v.y>c.y&&g.y<f.y;return k&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,f=this.max,g=Math.abs(c.x-f.x)*a,v=Math.abs(c.y-f.y)*a;return de(ee(c.x-g,c.y-v),ee(f.x+g,f.y+v))},equals:function(a){return a?(a=de(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function de(a,c){return!a||a instanceof we?a:new we(a,c)}function me(a,c){if(a)for(var f=c?[a,c]:a,g=0,v=f.length;g<v;g++)this.extend(f[g])}me.prototype={extend:function(a){var c=this._southWest,f=this._northEast,g,v;if(a instanceof he)g=a,v=a;else if(a instanceof me){if(g=a._southWest,v=a._northEast,!g||!v)return this}else return a?this.extend(ie(a)||pe(a)):this;return!c&&!f?(this._southWest=new he(g.lat,g.lng),this._northEast=new he(v.lat,v.lng)):(c.lat=Math.min(g.lat,c.lat),c.lng=Math.min(g.lng,c.lng),f.lat=Math.max(v.lat,f.lat),f.lng=Math.max(v.lng,f.lng)),this},pad:function(a){var c=this._southWest,f=this._northEast,g=Math.abs(c.lat-f.lat)*a,v=Math.abs(c.lng-f.lng)*a;return new me(new he(c.lat-g,c.lng-v),new he(f.lat+g,f.lng+v))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof he||"lat"in a?a=ie(a):a=pe(a);var c=this._southWest,f=this._northEast,g,v;return a instanceof me?(g=a.getSouthWest(),v=a.getNorthEast()):g=v=a,g.lat>=c.lat&&v.lat<=f.lat&&g.lng>=c.lng&&v.lng<=f.lng},intersects:function(a){a=pe(a);var c=this._southWest,f=this._northEast,g=a.getSouthWest(),v=a.getNorthEast(),k=v.lat>=c.lat&&g.lat<=f.lat,V=v.lng>=c.lng&&g.lng<=f.lng;return k&&V},overlaps:function(a){a=pe(a);var c=this._southWest,f=this._northEast,g=a.getSouthWest(),v=a.getNorthEast(),k=v.lat>c.lat&&g.lat<f.lat,V=v.lng>c.lng&&g.lng<f.lng;return k&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=pe(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(a,c){return a instanceof me?a:new me(a,c)}function he(a,c,f){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,f!==void 0&&(this.alt=+f)}he.prototype={equals:function(a,c){if(!a)return!1;a=ie(a);var f=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return f<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return Xe.distance(this,ie(a))},wrap:function(){return Xe.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,f=c/Math.cos(Math.PI/180*this.lat);return pe([this.lat-c,this.lng-f],[this.lat+c,this.lng+f])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function ie(a,c,f){return a instanceof he?a:N(a)&&typeof a[0]!="object"?a.length===3?new he(a[0],a[1],a[2]):a.length===2?new he(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new he(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new he(a,c,f)}var Qe={latLngToPoint:function(a,c){var f=this.projection.project(a),g=this.scale(c);return this.transformation._transform(f,g)},pointToLatLng:function(a,c){var f=this.scale(c),g=this.transformation.untransform(a,f);return this.projection.unproject(g)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,f=this.scale(a),g=this.transformation.transform(c.min,f),v=this.transformation.transform(c.max,f);return new we(g,v)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?m(a.lng,this.wrapLng,!0):a.lng,f=this.wrapLat?m(a.lat,this.wrapLat,!0):a.lat,g=a.alt;return new he(f,c,g)},wrapLatLngBounds:function(a){var c=a.getCenter(),f=this.wrapLatLng(c),g=c.lat-f.lat,v=c.lng-f.lng;if(g===0&&v===0)return a;var k=a.getSouthWest(),V=a.getNorthEast(),W=new he(k.lat-g,k.lng-v),Z=new he(V.lat-g,V.lng-v);return new me(W,Z)}},Xe=s({},Qe,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var f=Math.PI/180,g=a.lat*f,v=c.lat*f,k=Math.sin((c.lat-a.lat)*f/2),V=Math.sin((c.lng-a.lng)*f/2),W=k*k+Math.cos(g)*Math.cos(v)*V*V,Z=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*Z}}),Ir=6378137,Dt={R:Ir,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,f=this.MAX_LATITUDE,g=Math.max(Math.min(f,a.lat),-f),v=Math.sin(g*c);return new z(this.R*a.lng*c,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(a){var c=180/Math.PI;return new he((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=Ir*Math.PI;return new we([-a,-a],[a,a])}()};function Gn(a,c,f,g){if(N(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=f,this._d=g}Gn.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new z((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function Nn(a,c,f,g){return new Gn(a,c,f,g)}var wt=s({},Xe,{code:"EPSG:3857",projection:Dt,transformation:function(){var a=.5/(Math.PI*Dt.R);return Nn(a,.5,-a,.5)}()}),vt=s({},wt,{code:"EPSG:900913"});function Ye(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function An(a,c){var f="",g,v,k,V,W,Z;for(g=0,k=a.length;g<k;g++){for(W=a[g],v=0,V=W.length;v<V;v++)Z=W[v],f+=(v?"L":"M")+Z.x+" "+Z.y;f+=c?Ee.svg?"z":"x":""}return f||"M0 0"}var xt=document.documentElement.style,mn="ActiveXObject"in window,PA=mn&&!document.addEventListener,mo="msLaunchUri"in navigator&&!("documentMode"in document),ai=Wn("webkit"),go=Wn("android"),Ss=Wn("android 2")||Wn("android 3"),po=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),RA=go&&Wn("Google")&&po<537&&!("AudioNode"in window),Mt=!!window.opera,Yt=!mo&&Wn("chrome"),Ns=Wn("gecko")&&!ai&&!Mt&&!mn,LA=!Yt&&Wn("safari"),oi=Wn("phantom"),Un="OTransition"in xt,Us=navigator.platform.indexOf("Win")===0,yo=mn&&"transition"in xt,Ai="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ss,li="MozPerspective"in xt,wo=!window.L_DISABLE_3D&&(yo||Ai||li)&&!Un&&!oi,Fs=typeof orientation<"u"||Wn("mobile"),ta=Fs&&ai,Tr=Fs&&Ai,vo=!window.PointerEvent&&window.MSPointerEvent,Qs=!!(window.PointerEvent||vo),na="ontouchstart"in window||!!window.TouchEvent,ra=!window.L_NO_TOUCH&&(na||Qs),qn=Fs&&Mt,sa=Fs&&Ns,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xo=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",p,c),window.removeEventListener("testPassiveEventSupport",p,c)}catch{}return a}(),ci=function(){return!!document.createElement("canvas").getContext}(),Ps=!!(document.createElementNS&&Ye("svg").createSVGRect),Ut=!!Ps&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ui=!Ps&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),di=navigator.platform.indexOf("Mac")===0,Rs=navigator.platform.indexOf("Linux")===0;function Wn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ee={ie:mn,ielt9:PA,edge:mo,webkit:ai,android:go,android23:Ss,androidStock:RA,opera:Mt,chrome:Yt,gecko:Ns,safari:LA,phantom:oi,opera12:Un,win:Us,ie3d:yo,webkit3d:Ai,gecko3d:li,any3d:wo,mobile:Fs,mobileWebkit:ta,mobileWebkit3d:Tr,msPointer:vo,pointer:Qs,touch:ra,touchNative:na,mobileOpera:qn,mobileGecko:sa,retina:ia,passiveEvents:xo,canvas:ci,svg:Ps,vml:ui,inlineSvg:Ut,mac:di,linux:Rs},cs=Ee.msPointer?"MSPointerDown":"pointerdown",_o=Ee.msPointer?"MSPointerMove":"pointermove",Bo=Ee.msPointer?"MSPointerUp":"pointerup",hi=Ee.msPointer?"MSPointerCancel":"pointercancel",aa={touchstart:cs,touchmove:_o,touchend:Bo,touchcancel:hi},oa={touchstart:fi,touchmove:qt,touchend:qt,touchcancel:qt},_n={},kr=!1;function jA(a,c,f){return c==="touchstart"&&lr(),oa[c]?(f=oa[c].bind(this,f),a.addEventListener(aa[c],f,!1),f):(console.warn("wrong event specified:",c),p)}function bo(a,c,f){if(!aa[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(aa[c],f,!1)}function Co(a){_n[a.pointerId]=a}function Ar(a){_n[a.pointerId]&&(_n[a.pointerId]=a)}function Ot(a){delete _n[a.pointerId]}function lr(){kr||(document.addEventListener(cs,Co,!0),document.addEventListener(_o,Ar,!0),document.addEventListener(Bo,Ot,!0),document.addEventListener(hi,Ot,!0),kr=!0)}function qt(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var f in _n)c.touches.push(_n[f]);c.changedTouches=[c],a(c)}}function fi(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Ft(c),qt(a,c)}function Eo(a){var c={},f,g;for(g in a)f=a[g],c[g]=f&&f.bind?f.bind(a):f;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Aa=200;function rt(a,c){a.addEventListener("dblclick",c);var f=0,g;function v(k){if(k.detail!==1){g=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var V=kc(k);if(!(V.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!V.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var W=Date.now();W-f<=Aa?(g++,g===2&&c(Eo(k))):g=1,f=W}}}return a.addEventListener("click",v),{dblclick:c,simDblclick:v}}function us(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var mi=Gr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gi=Gr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Io=gi==="webkitTransition"||gi==="OTransition"?gi+"End":"transitionend";function To(a){return typeof a=="string"?document.getElementById(a):a}function ds(a,c){var f=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!f||f==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(a,null);f=g?g[c]:null}return f==="auto"?null:f}function Oe(a,c,f){var g=document.createElement(a);return g.className=c||"",f&&f.appendChild(g),g}function At(a){var c=a.parentNode;c&&c.removeChild(a)}function pi(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function hs(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function fs(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function ko(a,c){if(a.classList!==void 0)return a.classList.contains(c);var f=ke(a);return f.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(f)}function Le(a,c){if(a.classList!==void 0)for(var f=b(c),g=0,v=f.length;g<v;g++)a.classList.add(f[g]);else if(!ko(a,c)){var k=ke(a);Sr(a,(k?k+" ":"")+c)}}function mt(a,c){a.classList!==void 0?a.classList.remove(c):Sr(a,C((" "+ke(a)+" ").replace(" "+c+" "," ")))}function Sr(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function ke(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function _t(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&yi(a,c)}function yi(a,c){var f=!1,g="DXImageTransform.Microsoft.Alpha";try{f=a.filters.item(g)}catch{if(c===1)return}c=Math.round(c*100),f?(f.Enabled=c!==100,f.Opacity=c):a.style.filter+=" progid:"+g+"(opacity="+c+")"}function Gr(a){for(var c=document.documentElement.style,f=0;f<a.length;f++)if(a[f]in c)return a[f];return!1}function Nr(a,c,f){var g=c||new z(0,0);a.style[mi]=(Ee.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(f?" scale("+f+")":"")}function Ue(a,c){a._leaflet_pos=c,Ee.any3d?Nr(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function $n(a){return a._leaflet_pos||new z(0,0)}var cr,ur,la;if("onselectstart"in document)cr=function(){Ne(window,"selectstart",Ft)},ur=function(){it(window,"selectstart",Ft)};else{var ms=Gr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cr=function(){if(ms){var a=document.documentElement.style;la=a[ms],a[ms]="none"}},ur=function(){ms&&(document.documentElement.style[ms]=la,la=void 0)}}function P(){Ne(window,"dragstart",Ft)}function q(){it(window,"dragstart",Ft)}var ne,Be;function Re(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(De(),ne=a,Be=a.style.outlineStyle,a.style.outlineStyle="none",Ne(window,"keydown",De))}function De(){ne&&(ne.style.outlineStyle=Be,ne=void 0,Be=void 0,it(window,"keydown",De))}function He(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function ln(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var Bn={__proto__:null,TRANSFORM:mi,TRANSITION:gi,TRANSITION_END:Io,get:To,getStyle:ds,create:Oe,remove:At,empty:pi,toFront:hs,toBack:fs,hasClass:ko,addClass:Le,removeClass:mt,setClass:Sr,getClass:ke,setOpacity:_t,testProp:Gr,setTransform:Nr,setPosition:Ue,getPosition:$n,get disableTextSelection(){return cr},get enableTextSelection(){return ur},disableImageDrag:P,enableImageDrag:q,preventOutline:Re,restoreOutline:De,getSizedParentNode:He,getScale:ln};function Ne(a,c,f,g){if(c&&typeof c=="object")for(var v in c)Ic(a,v,c[v],f);else{c=b(c);for(var k=0,V=c.length;k<V;k++)Ic(a,c[k],f,g)}return this}var dr="_leaflet_events";function it(a,c,f,g){if(arguments.length===1)DA(a),delete a[dr];else if(c&&typeof c=="object")for(var v in c)Tc(a,v,c[v],f);else if(c=b(c),arguments.length===2)DA(a,function(W){return O(c,W)!==-1});else for(var k=0,V=c.length;k<V;k++)Tc(a,c[k],f,g);return this}function DA(a,c){for(var f in a[dr]){var g=f.split(/\d/)[0];(!c||c(g))&&Tc(a,g,null,null,f)}}var Zn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ic(a,c,f,g){var v=c+u(f)+(g?"_"+u(g):"");if(a[dr]&&a[dr][v])return this;var k=function(W){return f.call(g||a,W||window.event)},V=k;!Ee.touchNative&&Ee.pointer&&c.indexOf("touch")===0?k=jA(a,c,k):Ee.touch&&c==="dblclick"?k=rt(a,k):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(Zn[c]||c,k,Ee.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(k=function(W){W=W||window.event,Sc(a,W)&&V(W)},a.addEventListener(Zn[c],k,!1)):a.addEventListener(c,V,!1):a.attachEvent("on"+c,k),a[dr]=a[dr]||{},a[dr][v]=k}function Tc(a,c,f,g,v){v=v||c+u(f)+(g?"_"+u(g):"");var k=a[dr]&&a[dr][v];if(!k)return this;!Ee.touchNative&&Ee.pointer&&c.indexOf("touch")===0?bo(a,c,k):Ee.touch&&c==="dblclick"?us(a,k):"removeEventListener"in a?a.removeEventListener(Zn[c]||c,k,!1):a.detachEvent("on"+c,k),a[dr][v]=null}function qr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function ca(a){return Ic(a,"wheel",qr),this}function ua(a){return Ne(a,"mousedown touchstart dblclick contextmenu",qr),a._leaflet_disable_click=!0,this}function Ft(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Ur(a){return Ft(a),qr(a),this}function kc(a){if(a.composedPath)return a.composedPath();for(var c=[],f=a.target;f;)c.push(f),f=f.parentNode;return c}function MA(a,c){if(!c)return new z(a.clientX,a.clientY);var f=ln(c),g=f.boundingClientRect;return new z((a.clientX-g.left)/f.x-c.clientLeft,(a.clientY-g.top)/f.y-c.clientTop)}var Et=Ee.linux&&Ee.chrome?window.devicePixelRatio:Ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ah(a){return Ee.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Et:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Sc(a,c){var f=c.relatedTarget;if(!f)return!0;try{for(;f&&f!==a;)f=f.parentNode}catch{return!1}return f!==a}var oh={__proto__:null,on:Ne,off:it,stopPropagation:qr,disableScrollPropagation:ca,disableClickPropagation:ua,preventDefault:Ft,stop:Ur,getPropagationPath:kc,getMousePosition:MA,getWheelDelta:ah,isExternalTarget:Sc,addListener:Ne,removeListener:it},Nc=Ae.extend({run:function(a,c,f,g){this.stop(),this._el=a,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=$n(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,f=this._duration*1e3;c<f?this._runFrame(this._easeOut(c/f),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var f=this._startPos.add(this._offset.multiplyBy(a));c&&f._round(),Ue(this._el,f),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),qe=Ae.extend({options:{crs:wt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=x(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ie(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gi&&Ee.any3d&&!Ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,Io,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,f){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(ie(a),c,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=s({animate:f.animate},f.zoom),f.pan=s({animate:f.animate,duration:f.duration},f.pan));var g=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,f.zoom):this._tryAnimatedPan(a,f.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,f.pan&&f.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,f){var g=this.getZoomScale(c),v=this.getSize().divideBy(2),k=a instanceof z?a:this.latLngToContainerPoint(a),V=k.subtract(v).multiplyBy(1-1/g),W=this.containerPointToLatLng(v.add(V));return this.setView(W,c,{zoom:f})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():pe(a);var f=ee(c.paddingTopLeft||c.padding||[0,0]),g=ee(c.paddingBottomRight||c.padding||[0,0]),v=this.getBoundsZoom(a,!1,f.add(g));if(v=typeof c.maxZoom=="number"?Math.min(c.maxZoom,v):v,v===1/0)return{center:a.getCenter(),zoom:v};var k=g.subtract(f).divideBy(2),V=this.project(a.getSouthWest(),v),W=this.project(a.getNorthEast(),v),Z=this.unproject(V.add(W).divideBy(2).add(k),v);return{center:Z,zoom:v}},fitBounds:function(a,c){if(a=pe(a),!a.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(a,c);return this.setView(f.center,f.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=ee(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Nc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Le(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,f,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,f){if(f=f||{},f.animate===!1||!Ee.any3d)return this.setView(a,c,f);this._stop();var g=this.project(this.getCenter()),v=this.project(a),k=this.getSize(),V=this._zoom;a=ie(a),c=c===void 0?V:c;var W=Math.max(k.x,k.y),Z=W*this.getZoomScale(V,c),re=v.distanceTo(g)||1,ve=1.42,Fe=ve*ve;function Ve(tn){var Bh=tn?-1:1,FF=tn?Z:W,QF=Z*Z-W*W+Bh*Fe*Fe*re*re,PF=2*FF*Fe*re,Np=QF/PF,eB=Math.sqrt(Np*Np+1)-Np,RF=eB<1e-9?-18:Math.log(eB);return RF}function Xn(tn){return(Math.exp(tn)-Math.exp(-tn))/2}function pn(tn){return(Math.exp(tn)+Math.exp(-tn))/2}function $r(tn){return Xn(tn)/pn(tn)}var fr=Ve(0);function YA(tn){return W*(pn(fr)/pn(fr+ve*tn))}function kF(tn){return W*(pn(fr)*$r(fr+ve*tn)-Xn(fr))/Fe}function SF(tn){return 1-Math.pow(1-tn,1.5)}var NF=Date.now(),X_=(Ve(1)-fr)/ve,UF=f.duration?1e3*f.duration:1e3*X_*.8;function Y_(){var tn=(Date.now()-NF)/UF,Bh=SF(tn)*X_;tn<=1?(this._flyToFrame=D(Y_,this),this._move(this.unproject(g.add(v.subtract(g).multiplyBy(kF(Bh)/re)),V),this.getScaleZoom(W/YA(Bh),V),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Y_.call(this),this},flyToBounds:function(a,c){var f=this._getBoundsCenterZoom(a,c);return this.flyTo(f.center,f.zoom,c)},setMaxBounds:function(a){return a=pe(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var f=this.getCenter(),g=this._limitCenter(f,this._zoom,pe(a));return f.equals(g)||this.panTo(g,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var f=ee(c.paddingTopLeft||c.padding||[0,0]),g=ee(c.paddingBottomRight||c.padding||[0,0]),v=this.project(this.getCenter()),k=this.project(a),V=this.getPixelBounds(),W=de([V.min.add(f),V.max.subtract(g)]),Z=W.getSize();if(!W.contains(k)){this._enforcingBounds=!0;var re=k.subtract(W.getCenter()),ve=W.extend(k).getSize().subtract(Z);v.x+=re.x<0?-ve.x:ve.x,v.y+=re.y<0?-ve.y:ve.y,this.panTo(this.unproject(v),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),g=c.divideBy(2).round(),v=f.divideBy(2).round(),k=g.subtract(v);return!k.x&&!k.y?this:(a.animate&&a.pan?this.panBy(k):(a.pan&&this._rawPanBy(k),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,f,a):navigator.geolocation.getCurrentPosition(c,f,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,f=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,f=a.coords.longitude,g=new he(c,f),v=g.toBounds(a.coords.accuracy*2),k=this._locateOptions;if(k.setView){var V=this.getBoundsZoom(v);this.setView(g,k.maxZoom?Math.min(V,k.maxZoom):V)}var W={latlng:g,bounds:v,timestamp:a.timestamp};for(var Z in a.coords)typeof a.coords[Z]=="number"&&(W[Z]=a.coords[Z]);this.fire("locationfound",W)}},addHandler:function(a,c){if(!c)return this;var f=this[a]=new c(this);return this._handlers.push(f),this.options[a]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),At(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)At(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var f="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),g=Oe("div",f,c||this._mapPane);return a&&(this._panes[a]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),f=this.unproject(a.getTopRight());return new me(c,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,f){a=pe(a),f=ee(f||[0,0]);var g=this.getZoom()||0,v=this.getMinZoom(),k=this.getMaxZoom(),V=a.getNorthWest(),W=a.getSouthEast(),Z=this.getSize().subtract(f),re=de(this.project(W,g),this.project(V,g)).getSize(),ve=Ee.any3d?this.options.zoomSnap:1,Fe=Z.x/re.x,Ve=Z.y/re.y,Xn=c?Math.max(Fe,Ve):Math.min(Fe,Ve);return g=this.getScaleZoom(Xn,g),ve&&(g=Math.round(g/(ve/100))*(ve/100),g=c?Math.ceil(g/ve)*ve:Math.floor(g/ve)*ve),Math.max(v,Math.min(k,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var f=this._getTopLeftPoint(a,c);return new we(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var f=this.options.crs;return c=c===void 0?this._zoom:c,f.scale(a)/f.scale(c)},getScaleZoom:function(a,c){var f=this.options.crs;c=c===void 0?this._zoom:c;var g=f.zoom(a*f.scale(c));return isNaN(g)?1/0:g},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ie(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ee(a),c)},layerPointToLatLng:function(a){var c=ee(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(ie(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ie(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(pe(a))},distance:function(a,c){return this.options.crs.distance(ie(a),ie(c))},containerPointToLayerPoint:function(a){return ee(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ee(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(ee(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(a)))},mouseEventToContainerPoint:function(a){return MA(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=To(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ne(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ee.any3d,Le(a,"leaflet-container"+(Ee.touch?" leaflet-touch":"")+(Ee.retina?" leaflet-retina":"")+(Ee.ielt9?" leaflet-oldie":"")+(Ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ds(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ue(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Le(a.markerPane,"leaflet-zoom-hide"),Le(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,f){Ue(this._mapPane,new z(0,0));var g=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var v=this._zoom!==c;this._moveStart(v,f)._move(a,c)._moveEnd(v),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,f,g){c===void 0&&(c=this._zoom);var v=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),g?f&&f.pinch&&this.fire("zoom",f):((v||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ue(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[u(this._container)]=this;var c=a?it:Ne;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ee.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var f=[],g,v=c==="mouseout"||c==="mouseover",k=a.target||a.srcElement,V=!1;k;){if(g=this._targets[u(k)],g&&(c==="click"||c==="preclick")&&this._draggableMoved(g)){V=!0;break}if(g&&g.listens(c,!0)&&(v&&!Sc(k,a)||(f.push(g),v))||k===this._container)break;k=k.parentNode}return!f.length&&!V&&!v&&this.listens(c,!0)&&(f=[this]),f},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var f=a.type;f==="mousedown"&&Re(c),this._fireDOMEvent(a,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,f){if(a.type==="click"){var g=s({},a);g.type="preclick",this._fireDOMEvent(g,g.type,f)}var v=this._findEventTargets(a,c);if(f){for(var k=[],V=0;V<f.length;V++)f[V].listens(c,!0)&&k.push(f[V]);v=k.concat(v)}if(v.length){c==="contextmenu"&&Ft(a);var W=v[0],Z={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var re=W.getLatLng&&(!W._radius||W._radius<=10);Z.containerPoint=re?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(a),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=re?W.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(V=0;V<v.length;V++)if(v[V].fire(c,Z,!0),Z.originalEvent._stopped||v[V].options.bubblingMouseEvents===!1&&O(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return $n(this._mapPane)||new z(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var f=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var f=this.getSize()._divideBy(2);return this.project(a,c)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,f){var g=this._getNewPixelOrigin(f,c);return this.project(a,c)._subtract(g)},_latLngBoundsToNewLayerBounds:function(a,c,f){var g=this._getNewPixelOrigin(f,c);return de([this.project(a.getSouthWest(),c)._subtract(g),this.project(a.getNorthWest(),c)._subtract(g),this.project(a.getSouthEast(),c)._subtract(g),this.project(a.getNorthEast(),c)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,f){if(!f)return a;var g=this.project(a,c),v=this.getSize().divideBy(2),k=new we(g.subtract(v),g.add(v)),V=this._getBoundsOffset(k,f,c);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?a:this.unproject(g.add(V),c)},_limitOffset:function(a,c){if(!c)return a;var f=this.getPixelBounds(),g=new we(f.min.add(a),f.max.add(a));return a.add(this._getBoundsOffset(g,c))},_getBoundsOffset:function(a,c,f){var g=de(this.project(c.getNorthEast(),f),this.project(c.getSouthWest(),f)),v=g.min.subtract(a.min),k=g.max.subtract(a.max),V=this._rebound(v.x,-k.x),W=this._rebound(v.y,-k.y);return new z(V,W)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),f=this.getMaxZoom(),g=Ee.any3d?this.options.zoomSnap:1;return g&&(a=Math.round(a/g)*g),Math.max(c,Math.min(f,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var f=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,c),!0)},_createAnimProxy:function(){var a=this._proxy=Oe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var f=mi,g=this._proxy.style[f];Nr(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),g===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){At(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();Nr(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(c),v=this._getCenterOffset(a)._divideBy(1-1/g);return f.animate!==!0&&!this.getSize().contains(v)?!1:(D(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,f,g){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,Le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function OA(a,c){return new qe(a,c)}var hr=J.extend({options:{position:"topright"},initialize:function(a){x(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),f=this.getPosition(),g=a._controlCorners[f];return Le(c,"leaflet-control"),f.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(At(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Jn=function(a){return new hr(a)};qe.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",f=this._controlContainer=Oe("div",c+"control-container",this._container);function g(v,k){var V=c+v+" "+c+k;a[v+k]=Oe("div",V,f)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)At(this._controlCorners[a]);At(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Uc=hr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,f,g){return f<g?-1:g<f?1:0}},initialize:function(a,c,f){x(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in a)this._addLayer(a[g],g);for(g in c)this._addLayer(c[g],g,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return hr.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=Oe("div",a),f=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ua(c),ca(c);var g=this._section=Oe("section",a+"-list");f&&(this._map.on("click",this.collapse,this),Ne(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Oe("a",a+"-toggle",c);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ne(v,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Ft(k),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Oe("div",a+"-base",g),this._separator=Oe("div",a+"-separator",g),this._overlaysList=Oe("div",a+"-overlays",g),c.appendChild(g)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,f){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(g,v){return this.options.sortFunction(g.layer,v.layer,g.name,v.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pi(this._baseLayersList),pi(this._overlaysList),this._layerControlInputs=[];var a,c,f,g,v=0;for(f=0;f<this._layers.length;f++)g=this._layers[f],this._addItem(g),c=c||g.overlay,a=a||!g.overlay,v+=g.overlay?0:1;return this.options.hideSingleBase&&(a=a&&v>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(u(a.target)),f=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;f&&this._map.fire(f,c)},_createRadioElement:function(a,c){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=f,g.firstChild},_addItem:function(a){var c=document.createElement("label"),f=this._map.hasLayer(a.layer),g;a.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=f):g=this._createRadioElement("leaflet-base-layers_"+u(this),f),this._layerControlInputs.push(g),g.layerId=u(a.layer),Ne(g,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+a.name;var k=document.createElement("span");c.appendChild(k),k.appendChild(g),k.appendChild(v);var V=a.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,f,g=[],v=[];this._handlingClick=!0;for(var k=a.length-1;k>=0;k--)c=a[k],f=this._getLayer(c.layerId).layer,c.checked?g.push(f):c.checked||v.push(f);for(k=0;k<v.length;k++)this._map.hasLayer(v[k])&&this._map.removeLayer(v[k]);for(k=0;k<g.length;k++)this._map.hasLayer(g[k])||this._map.addLayer(g[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,f,g=this._map.getZoom(),v=a.length-1;v>=0;v--)c=a[v],f=this._getLayer(c.layerId).layer,c.disabled=f.options.minZoom!==void 0&&g<f.options.minZoom||f.options.maxZoom!==void 0&&g>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ne(a,"click",Ft),this.expand();var c=this;setTimeout(function(){it(a,"click",Ft),c._preventClick=!1})}}),Cp=function(a,c,f){return new Uc(a,c,f)},wi=hr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",f=Oe("div",c+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,c+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,c+"-out",f,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,f,g,v){var k=Oe("a",f,g);return k.innerHTML=a,k.href="#",k.title=c,k.setAttribute("role","button"),k.setAttribute("aria-label",c),ua(k),Ne(k,"click",Ur),Ne(k,"click",v,this),Ne(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";mt(this._zoomInButton,c),mt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Le(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Le(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});qe.mergeOptions({zoomControl:!0}),qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wi,this.addControl(this.zoomControl))});var Ah=function(a){return new wi(a)},HA=hr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",f=Oe("div",c),g=this.options;return this._addScales(g,c+"-line",f),a.on(g.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),f},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,f){a.metric&&(this._mScale=Oe("div",c,f)),a.imperial&&(this._iScale=Oe("div",c,f))},_update:function(){var a=this._map,c=a.getSize().y/2,f=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(f)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),f=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,f,c/a)},_updateImperial:function(a){var c=a*3.2808399,f,g,v;c>5280?(f=c/5280,g=this._getRoundNum(f),this._updateScale(this._iScale,g+" mi",g/f)):(v=this._getRoundNum(c),this._updateScale(this._iScale,v+" ft",v/c))},_updateScale:function(a,c,f){a.style.width=Math.round(this.options.maxWidth*f)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),f=a/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,c*f}}),VA=function(a){return new HA(a)},lh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',da=hr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ee.inlineSvg?lh+" ":"")+"Leaflet</a>"},initialize:function(a){x(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Oe("div","leaflet-control-attribution"),ua(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var f=[];this.options.prefix&&f.push(this.options.prefix),a.length&&f.push(a.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});qe.mergeOptions({attributionControl:!0}),qe.addInitHook(function(){this.options.attributionControl&&new da().addTo(this)});var Ep=function(a){return new da(a)};hr.Layers=Uc,hr.Zoom=wi,hr.Scale=HA,hr.Attribution=da,Jn.layers=Cp,Jn.zoom=Ah,Jn.scale=VA,Jn.attribution=Ep;var Fr=J.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fr.addTo=function(a,c){return a.addHandler(c,this),this};var So={Events:oe},Fc=Ee.touch?"touchstart mousedown":"mousedown",gs=Ae.extend({options:{clickTolerance:3},initialize:function(a,c,f,g){x(this,g),this._element=a,this._dragStartTarget=c||a,this._preventOutline=f},enable:function(){this._enabled||(Ne(this._dragStartTarget,Fc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gs._dragging===this&&this.finishDrag(!0),it(this._dragStartTarget,Fc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!ko(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){gs._dragging===this&&this.finishDrag();return}if(!(gs._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(gs._dragging=this,this._preventOutline&&Re(this._element),P(),cr(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,f=He(this._element);this._startPoint=new z(c.clientX,c.clientY),this._startPos=$n(this._element),this._parentScale=ln(f);var g=a.type==="mousedown";Ne(document,g?"mousemove":"touchmove",this._onMove,this),Ne(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,f=new z(c.clientX,c.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Ft(a),this._moved||(this.fire("dragstart"),this._moved=!0,Le(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ue(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),it(document,"mousemove touchmove",this._onMove,this),it(document,"mouseup touchend touchcancel",this._onUp,this),q(),ur();var c=this._moved&&this._moving;this._moving=!1,gs._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function KA(a,c,f){var g,v=[1,4,2,8],k,V,W,Z,re,ve,Fe,Ve;for(k=0,ve=a.length;k<ve;k++)a[k]._code=Ls(a[k],c);for(W=0;W<4;W++){for(Fe=v[W],g=[],k=0,ve=a.length,V=ve-1;k<ve;V=k++)Z=a[k],re=a[V],Z._code&Fe?re._code&Fe||(Ve=gn(re,Z,Fe,c,f),Ve._code=Ls(Ve,c),g.push(Ve)):(re._code&Fe&&(Ve=gn(re,Z,Fe,c,f),Ve._code=Ls(Ve,c),g.push(Ve)),g.push(Z));a=g}return a}function zA(a,c){var f,g,v,k,V,W,Z,re,ve;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Fe=ie([0,0]),Ve=pe(a),Xn=Ve.getNorthWest().distanceTo(Ve.getSouthWest())*Ve.getNorthEast().distanceTo(Ve.getNorthWest());Xn<1700&&(Fe=GA(a));var pn=a.length,$r=[];for(f=0;f<pn;f++){var fr=ie(a[f]);$r.push(c.project(ie([fr.lat-Fe.lat,fr.lng-Fe.lng])))}for(W=Z=re=0,f=0,g=pn-1;f<pn;g=f++)v=$r[f],k=$r[g],V=v.y*k.x-k.y*v.x,Z+=(v.x+k.x)*V,re+=(v.y+k.y)*V,W+=V*3;W===0?ve=$r[0]:ve=[Z/W,re/W];var YA=c.unproject(ee(ve));return ie([YA.lat+Fe.lat,YA.lng+Fe.lng])}function GA(a){for(var c=0,f=0,g=0,v=0;v<a.length;v++){var k=ie(a[v]);c+=k.lat,f+=k.lng,g++}return ie([c/g,f/g])}var qA={__proto__:null,clipPolygon:KA,polygonCenter:zA,centroid:GA};function Qc(a,c){if(!c||!a.length)return a.slice();var f=c*c;return a=uh(a,f),a=ch(a,f),a}function Pc(a,c,f){return Math.sqrt(Wr(a,c,f,!0))}function vi(a,c,f){return Wr(a,c,f)}function ch(a,c){var f=a.length,g=typeof Uint8Array<"u"?Uint8Array:Array,v=new g(f);v[0]=v[f-1]=1,WA(a,v,c,0,f-1);var k,V=[];for(k=0;k<f;k++)v[k]&&V.push(a[k]);return V}function WA(a,c,f,g,v){var k=0,V,W,Z;for(W=g+1;W<=v-1;W++)Z=Wr(a[W],a[g],a[v],!0),Z>k&&(V=W,k=Z);k>f&&(c[V]=1,WA(a,c,f,g,V),WA(a,c,f,V,v))}function uh(a,c){for(var f=[a[0]],g=1,v=0,k=a.length;g<k;g++)dh(a[g],a[v])>c&&(f.push(a[g]),v=g);return v<k-1&&f.push(a[k-1]),f}var Rc;function No(a,c,f,g,v){var k=g?Rc:Ls(a,f),V=Ls(c,f),W,Z,re;for(Rc=V;;){if(!(k|V))return[a,c];if(k&V)return!1;W=k||V,Z=gn(a,c,W,f,v),re=Ls(Z,f),W===k?(a=Z,k=re):(c=Z,V=re)}}function gn(a,c,f,g,v){var k=c.x-a.x,V=c.y-a.y,W=g.min,Z=g.max,re,ve;return f&8?(re=a.x+k*(Z.y-a.y)/V,ve=Z.y):f&4?(re=a.x+k*(W.y-a.y)/V,ve=W.y):f&2?(re=Z.x,ve=a.y+V*(Z.x-a.x)/k):f&1&&(re=W.x,ve=a.y+V*(W.x-a.x)/k),new z(re,ve,v)}function Ls(a,c){var f=0;return a.x<c.min.x?f|=1:a.x>c.max.x&&(f|=2),a.y<c.min.y?f|=4:a.y>c.max.y&&(f|=8),f}function dh(a,c){var f=c.x-a.x,g=c.y-a.y;return f*f+g*g}function Wr(a,c,f,g){var v=c.x,k=c.y,V=f.x-v,W=f.y-k,Z=V*V+W*W,re;return Z>0&&(re=((a.x-v)*V+(a.y-k)*W)/Z,re>1?(v=f.x,k=f.y):re>0&&(v+=V*re,k+=W*re)),V=a.x-v,W=a.y-k,g?V*V+W*W:new z(v,k)}function d(a){return!N(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function y(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(a)}function _(a,c){var f,g,v,k,V,W,Z,re;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ve=ie([0,0]),Fe=pe(a),Ve=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());Ve<1700&&(ve=GA(a));var Xn=a.length,pn=[];for(f=0;f<Xn;f++){var $r=ie(a[f]);pn.push(c.project(ie([$r.lat-ve.lat,$r.lng-ve.lng])))}for(f=0,g=0;f<Xn-1;f++)g+=pn[f].distanceTo(pn[f+1])/2;if(g===0)re=pn[0];else for(f=0,k=0;f<Xn-1;f++)if(V=pn[f],W=pn[f+1],v=V.distanceTo(W),k+=v,k>g){Z=(k-g)/v,re=[W.x-Z*(W.x-V.x),W.y-Z*(W.y-V.y)];break}var fr=c.unproject(ee(re));return ie([fr.lat+ve.lat,fr.lng+ve.lng])}var F={__proto__:null,simplify:Qc,pointToSegmentDistance:Pc,closestPointOnSegment:vi,clipSegment:No,_getEdgeIntersection:gn,_getBitCode:Ls,_sqClosestPointOnSegment:Wr,isFlat:d,_flat:y,polylineCenter:_},G={project:function(a){return new z(a.lng,a.lat)},unproject:function(a){return new he(a.y,a.x)},bounds:new we([-180,-90],[180,90])},X={R:6378137,R_MINOR:6356752314245179e-9,bounds:new we([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,f=this.R,g=a.lat*c,v=this.R_MINOR/f,k=Math.sqrt(1-v*v),V=k*Math.sin(g),W=Math.tan(Math.PI/4-g/2)/Math.pow((1-V)/(1+V),k/2);return g=-f*Math.log(Math.max(W,1e-10)),new z(a.lng*c*f,g)},unproject:function(a){for(var c=180/Math.PI,f=this.R,g=this.R_MINOR/f,v=Math.sqrt(1-g*g),k=Math.exp(-a.y/f),V=Math.PI/2-2*Math.atan(k),W=0,Z=.1,re;W<15&&Math.abs(Z)>1e-7;W++)re=v*Math.sin(V),re=Math.pow((1-re)/(1+re),v/2),Z=Math.PI/2-2*Math.atan(k*re)-V,V+=Z;return new he(V*c,a.x*c/f)}},ce={__proto__:null,LonLat:G,Mercator:X,SphericalMercator:Dt},lt=s({},Xe,{code:"EPSG:3395",projection:X,transformation:function(){var a=.5/(Math.PI*X.R);return Nn(a,.5,-a,.5)}()}),en=s({},Xe,{code:"EPSG:4326",projection:G,transformation:Nn(1/180,1,-1/180,.5)}),et=s({},Qe,{projection:G,transformation:Nn(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var f=c.lng-a.lng,g=c.lat-a.lat;return Math.sqrt(f*f+g*g)},infinite:!0});Qe.Earth=Xe,Qe.EPSG3395=lt,Qe.EPSG3857=wt,Qe.EPSG900913=vt,Qe.EPSG4326=en,Qe.Simple=et;var dt=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[u(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[u(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var f=this.getEvents();c.on(f,this),this.once("remove",function(){c.off(f,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});qe.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=u(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return u(a)in this._layers},eachLayer:function(a,c){for(var f in this._layers)a.call(c,this._layers[f]);return this},_addLayers:function(a){a=a?N(a)?a:[a]:[];for(var c=0,f=a.length;c<f;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[u(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=u(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,f=this._getZoomSpan();for(var g in this._zoomBoundLayers){var v=this._zoomBoundLayers[g].options;a=v.minZoom===void 0?a:Math.min(a,v.minZoom),c=v.maxZoom===void 0?c:Math.max(c,v.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qt=dt.extend({initialize:function(a,c){x(this,c),this._layers={};var f,g;if(a)for(f=0,g=a.length;f<g;f++)this.addLayer(a[f])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),f,g;for(f in this._layers)g=this._layers[f],g[a]&&g[a].apply(g,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var f in this._layers)a.call(c,this._layers[f]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return u(a)}}),ha=function(a,c){return new Qt(a,c)},Wt=Qt.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Qt.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Qt.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new me;for(var c in this._layers){var f=this._layers[c];a.extend(f.getBounds?f.getBounds():f.getLatLng())}return a}}),$A=function(a,c){return new Wt(a,c)},js=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){x(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var f=this._getIconUrl(a);if(!f){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(f,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(g,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(a,c){var f=this.options,g=f[c+"Size"];typeof g=="number"&&(g=[g,g]);var v=ee(g),k=ee(c==="shadow"&&f.shadowAnchor||f.iconAnchor||v&&v.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(f.className||""),k&&(a.style.marginLeft=-k.x+"px",a.style.marginTop=-k.y+"px"),v&&(a.style.width=v.x+"px",a.style.height=v.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return Ee.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function cF(a){return new js(a)}var Lc=js.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Lc.imagePath!="string"&&(Lc.imagePath=this._detectIconPath()),(this.options.imagePath||Lc.imagePath)+js.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(f,g,v){var k=g.exec(f);return k&&k[v]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Oe("div","leaflet-default-icon-path",document.body),c=ds(a,"background-image")||ds(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),F_=Fr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new gs(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Le(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,f=c._map,g=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,k=$n(c._icon),V=f.getPixelBounds(),W=f.getPixelOrigin(),Z=de(V.min._subtract(W).add(v),V.max._subtract(W).subtract(v));if(!Z.contains(k)){var re=ee((Math.max(Z.max.x,k.x)-Z.max.x)/(V.max.x-Z.max.x)-(Math.min(Z.min.x,k.x)-Z.min.x)/(V.min.x-Z.min.x),(Math.max(Z.max.y,k.y)-Z.max.y)/(V.max.y-Z.max.y)-(Math.min(Z.min.y,k.y)-Z.min.y)/(V.min.y-Z.min.y)).multiplyBy(g);f.panBy(re,{animate:!1}),this._draggable._newPos._add(re),this._draggable._startPos._add(re),Ue(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=D(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,f=c._shadow,g=$n(c._icon),v=c._map.layerPointToLatLng(g);f&&Ue(f,g),c._latlng=v,a.latlng=v,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),hh=dt.extend({options:{icon:new Lc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){x(this,c),this._latlng=ie(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=ie(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=a.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(f.title=a.title),f.tagName==="IMG"&&(f.alt=a.alt||"")),Le(f,c),a.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(f,"focus",this._panOnFocus,this);var v=a.icon.createShadow(this._shadow),k=!1;v!==this._shadow&&(this._removeShadow(),k=!0),v&&(Le(v,c),v.alt=""),this._shadow=v,a.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&k&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(this._icon,"focus",this._panOnFocus,this),At(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&At(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ue(this._icon,a),this._shadow&&Ue(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),F_)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new F_(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&_t(this._icon,a),this._shadow&&_t(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,f=c.iconSize?ee(c.iconSize):ee(0,0),g=c.iconAnchor?ee(c.iconAnchor):ee(0,0);a.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:f.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function uF(a,c){return new hh(a,c)}var fa=dt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return x(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fh=fa.extend({options:{fill:!0,radius:10},initialize:function(a,c){x(this,c),this._latlng=ie(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=ie(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return fa.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,f=this._clickTolerance(),g=[a+f,c+f];this._pxBounds=new we(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dF(a,c){return new fh(a,c)}var Ip=fh.extend({initialize:function(a,c,f){if(typeof c=="number"&&(c=s({},f,{radius:c})),x(this,c),this._latlng=ie(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:fa.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,f=this._map,g=f.options.crs;if(g.distance===Xe.distance){var v=Math.PI/180,k=this._mRadius/Xe.R/v,V=f.project([c+k,a]),W=f.project([c-k,a]),Z=V.add(W).divideBy(2),re=f.unproject(Z).lat,ve=Math.acos((Math.cos(k*v)-Math.sin(c*v)*Math.sin(re*v))/(Math.cos(c*v)*Math.cos(re*v)))/v;(isNaN(ve)||ve===0)&&(ve=k/Math.cos(Math.PI/180*c)),this._point=Z.subtract(f.getPixelOrigin()),this._radius=isNaN(ve)?0:Z.x-f.project([re,a-ve]).x,this._radiusY=Z.y-V.y}else{var Fe=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Fe).x}this._updateBounds()}});function hF(a,c,f){return new Ip(a,c,f)}var xi=fa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){x(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,f=null,g=Wr,v,k,V=0,W=this._parts.length;V<W;V++)for(var Z=this._parts[V],re=1,ve=Z.length;re<ve;re++){v=Z[re-1],k=Z[re];var Fe=g(a,v,k,!0);Fe<c&&(c=Fe,f=g(a,v,k))}return f&&(f.distance=Math.sqrt(c)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=ie(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new me,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],f=d(a),g=0,v=a.length;g<v;g++)f?(c[g]=ie(a[g]),this._bounds.extend(c[g])):c[g]=this._convertLatLngs(a[g]);return c},_project:function(){var a=new we;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new z(a,a);this._rawPxBounds&&(this._pxBounds=new we([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,f){var g=a[0]instanceof he,v=a.length,k,V;if(g){for(V=[],k=0;k<v;k++)V[k]=this._map.latLngToLayerPoint(a[k]),f.extend(V[k]);c.push(V)}else for(k=0;k<v;k++)this._projectLatlngs(a[k],c,f)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,f,g,v,k,V,W,Z;for(f=0,v=0,k=this._rings.length;f<k;f++)for(Z=this._rings[f],g=0,V=Z.length;g<V-1;g++)W=No(Z[g],Z[g+1],a,g,!0),W&&(c[v]=c[v]||[],c[v].push(W[0]),(W[1]!==Z[g+1]||g===V-2)&&(c[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,f=0,g=a.length;f<g;f++)a[f]=Qc(a[f],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var f,g,v,k,V,W,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(f=0,k=this._parts.length;f<k;f++)for(W=this._parts[f],g=0,V=W.length,v=V-1;g<V;v=g++)if(!(!c&&g===0)&&Pc(a,W[v],W[g])<=Z)return!0;return!1}});function fF(a,c){return new xi(a,c)}xi._flat=y;var ZA=xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zA(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=xi.prototype._convertLatLngs.call(this,a),f=c.length;return f>=2&&c[0]instanceof he&&c[0].equals(c[f-1])&&c.pop(),c},_setLatLngs:function(a){xi.prototype._setLatLngs.call(this,a),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,f=new z(c,c);if(a=new we(a.min.subtract(f),a.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,v=this._rings.length,k;g<v;g++)k=KA(this._rings[g],a,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,f,g,v,k,V,W,Z,re;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(k=0,Z=this._parts.length;k<Z;k++)for(f=this._parts[k],V=0,re=f.length,W=re-1;V<re;W=V++)g=f[V],v=f[W],g.y>a.y!=v.y>a.y&&a.x<(v.x-g.x)*(a.y-g.y)/(v.y-g.y)+g.x&&(c=!c);return c||xi.prototype._containsPoint.call(this,a,!0)}});function mF(a,c){return new ZA(a,c)}var _i=Wt.extend({initialize:function(a,c){x(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=N(a)?a:a.features,f,g,v;if(c){for(f=0,g=c.length;f<g;f++)v=c[f],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var k=this.options;if(k.filter&&!k.filter(a))return this;var V=mh(a,k);return V?(V.feature=yh(a),V.defaultOptions=V.options,this.resetStyle(V),k.onEachFeature&&k.onEachFeature(a,V),this.addLayer(V)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function mh(a,c){var f=a.type==="Feature"?a.geometry:a,g=f?f.coordinates:null,v=[],k=c&&c.pointToLayer,V=c&&c.coordsToLatLng||Tp,W,Z,re,ve;if(!g&&!f)return null;switch(f.type){case"Point":return W=V(g),Q_(k,a,W,c);case"MultiPoint":for(re=0,ve=g.length;re<ve;re++)W=V(g[re]),v.push(Q_(k,a,W,c));return new Wt(v);case"LineString":case"MultiLineString":return Z=gh(g,f.type==="LineString"?0:1,V),new xi(Z,c);case"Polygon":case"MultiPolygon":return Z=gh(g,f.type==="Polygon"?1:2,V),new ZA(Z,c);case"GeometryCollection":for(re=0,ve=f.geometries.length;re<ve;re++){var Fe=mh({geometry:f.geometries[re],type:"Feature",properties:a.properties},c);Fe&&v.push(Fe)}return new Wt(v);case"FeatureCollection":for(re=0,ve=f.features.length;re<ve;re++){var Ve=mh(f.features[re],c);Ve&&v.push(Ve)}return new Wt(v);default:throw new Error("Invalid GeoJSON object.")}}function Q_(a,c,f,g){return a?a(c,f):new hh(f,g&&g.markersInheritOptions&&g)}function Tp(a){return new he(a[1],a[0],a[2])}function gh(a,c,f){for(var g=[],v=0,k=a.length,V;v<k;v++)V=c?gh(a[v],c-1,f):(f||Tp)(a[v]),g.push(V);return g}function kp(a,c){return a=ie(a),a.alt!==void 0?[w(a.lng,c),w(a.lat,c),w(a.alt,c)]:[w(a.lng,c),w(a.lat,c)]}function ph(a,c,f,g){for(var v=[],k=0,V=a.length;k<V;k++)v.push(c?ph(a[k],d(a[k])?0:c-1,f,g):kp(a[k],g));return!c&&f&&v.length>0&&v.push(v[0].slice()),v}function JA(a,c){return a.feature?s({},a.feature,{geometry:c}):yh(c)}function yh(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Sp={toGeoJSON:function(a){return JA(this,{type:"Point",coordinates:kp(this.getLatLng(),a)})}};hh.include(Sp),Ip.include(Sp),fh.include(Sp),xi.include({toGeoJSON:function(a){var c=!d(this._latlngs),f=ph(this._latlngs,c?1:0,!1,a);return JA(this,{type:(c?"Multi":"")+"LineString",coordinates:f})}}),ZA.include({toGeoJSON:function(a){var c=!d(this._latlngs),f=c&&!d(this._latlngs[0]),g=ph(this._latlngs,f?2:c?1:0,!0,a);return c||(g=[g]),JA(this,{type:(f?"Multi":"")+"Polygon",coordinates:g})}}),Qt.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(f){c.push(f.toGeoJSON(a).geometry.coordinates)}),JA(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var f=c==="GeometryCollection",g=[];return this.eachLayer(function(v){if(v.toGeoJSON){var k=v.toGeoJSON(a);if(f)g.push(k.geometry);else{var V=yh(k);V.type==="FeatureCollection"?g.push.apply(g,V.features):g.push(V)}}}),f?JA(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function P_(a,c){return new _i(a,c)}var gF=P_,wh=dt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,f){this._url=a,this._bounds=pe(c),x(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){At(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&hs(this._image),this},bringToBack:function(){return this._map&&fs(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=pe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:Oe("img");if(Le(c,"leaflet-image-layer"),this._zoomAnimated&&Le(c,"leaflet-zoom-animated"),this.options.className&&Le(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onload=o(this.fire,this,"load"),c.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Nr(this._image,f,c)},_reset:function(){var a=this._image,c=new we(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=c.getSize();Ue(a,c.min),a.style.width=f.x+"px",a.style.height=f.y+"px"},_updateOpacity:function(){_t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),pF=function(a,c,f){return new wh(a,c,f)},R_=wh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:Oe("video");if(Le(c,"leaflet-image-layer"),this._zoomAnimated&&Le(c,"leaflet-zoom-animated"),this.options.className&&Le(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onloadeddata=o(this.fire,this,"load"),a){for(var f=c.getElementsByTagName("source"),g=[],v=0;v<f.length;v++)g.push(f[v].src);this._url=f.length>0?g:[c.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var V=Oe("source");V.src=this._url[k],c.appendChild(V)}}});function yF(a,c,f){return new R_(a,c,f)}var L_=wh.extend({_initImage:function(){var a=this._image=this._url;Le(a,"leaflet-image-layer"),this._zoomAnimated&&Le(a,"leaflet-zoom-animated"),this.options.className&&Le(a,this.options.className),a.onselectstart=p,a.onmousemove=p}});function wF(a,c,f){return new L_(a,c,f)}var Ds=dt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof he||N(a))?(this._latlng=ie(a),x(this,c)):(x(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&_t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&_t(this._container,1),this.bringToFront(),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(_t(this._container,0),this._removeTimeout=setTimeout(o(At,void 0,this._container),200)):At(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ie(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&hs(this._container),this},bringToBack:function(){return this._map&&fs(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof Wt){c=null;var f=this._source._layers;for(var g in f)if(f[g]._map){c=f[g];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=ee(this.options.offset),f=this._getAnchor();this._zoomAnimated?Ue(this._container,a.add(f)):c=c.add(a).add(f);var g=this._containerBottom=-c.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=g+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});qe.include({_initOverlay:function(a,c,f,g){var v=c;return v instanceof a||(v=new a(g).setContent(c)),f&&v.setLatLng(f),v}}),dt.include({_initOverlay:function(a,c,f,g){var v=f;return v instanceof a?(x(v,g),v._source=this):(v=c&&!g?c:new a(g,this),v.setContent(f)),v}});var vh=Ds.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Ds.prototype.openOn.call(this,a)},onAdd:function(a){Ds.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fa||this._source.on("preclick",qr))},onRemove:function(a){Ds.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fa||this._source.off("preclick",qr))},getEvents:function(){var a=Ds.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=Oe("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Oe("div",a+"-content-wrapper",c);if(this._contentNode=Oe("div",a+"-content",f),ua(c),ca(this._contentNode),Ne(c,"contextmenu",qr),this._tipContainer=Oe("div",a+"-tip-container",c),this._tip=Oe("div",a+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=Oe("a",a+"-close-button",c);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(g,"click",function(v){Ft(v),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var f=a.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),c.width=f+1+"px",c.whiteSpace="",c.height="";var g=a.offsetHeight,v=this.options.maxHeight,k="leaflet-popup-scrolled";v&&g>v?(c.height=v+"px",Le(a,k)):mt(a,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),f=this._getAnchor();Ue(this._container,c.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(ds(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+c,g=this._containerWidth,v=new z(this._containerLeft,-f-this._containerBottom);v._add($n(this._container));var k=a.layerPointToContainerPoint(v),V=ee(this.options.autoPanPadding),W=ee(this.options.autoPanPaddingTopLeft||V),Z=ee(this.options.autoPanPaddingBottomRight||V),re=a.getSize(),ve=0,Fe=0;k.x+g+Z.x>re.x&&(ve=k.x+g-re.x+Z.x),k.x-ve-W.x<0&&(ve=k.x-W.x),k.y+f+Z.y>re.y&&(Fe=k.y+f-re.y+Z.y),k.y-Fe-W.y<0&&(Fe=k.y-W.y),(ve||Fe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([ve,Fe]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vF=function(a,c){return new vh(a,c)};qe.mergeOptions({closePopupOnClick:!0}),qe.include({openPopup:function(a,c,f){return this._initOverlay(vh,a,c,f).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),dt.include({bindPopup:function(a,c){return this._popup=this._initOverlay(vh,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Wt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Ur(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof fa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var xh=Ds.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Ds.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Ds.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Ds.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Oe("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,f,g=this._map,v=this._container,k=g.latLngToContainerPoint(g.getCenter()),V=g.layerPointToContainerPoint(a),W=this.options.direction,Z=v.offsetWidth,re=v.offsetHeight,ve=ee(this.options.offset),Fe=this._getAnchor();W==="top"?(c=Z/2,f=re):W==="bottom"?(c=Z/2,f=0):W==="center"?(c=Z/2,f=re/2):W==="right"?(c=0,f=re/2):W==="left"?(c=Z,f=re/2):V.x<k.x?(W="right",c=0,f=re/2):(W="left",c=Z+(ve.x+Fe.x)*2,f=re/2),a=a.subtract(ee(c,f,!0)).add(ve).add(Fe),mt(v,"leaflet-tooltip-right"),mt(v,"leaflet-tooltip-left"),mt(v,"leaflet-tooltip-top"),mt(v,"leaflet-tooltip-bottom"),Le(v,"leaflet-tooltip-"+W),Ue(v,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&_t(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),xF=function(a,c){return new xh(a,c)};qe.include({openTooltip:function(a,c,f){return this._initOverlay(xh,a,c,f).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),dt.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(xh,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[c](f),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Wt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(Ne(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ne(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,f,g;this._tooltip.options.sticky&&a.originalEvent&&(f=this._map.mouseEventToContainerPoint(a.originalEvent),g=this._map.containerPointToLayerPoint(f),c=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(c)}});var j_=js.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),f=this.options;if(f.html instanceof Element?(pi(c),c.appendChild(f.html)):c.innerHTML=f.html!==!1?f.html:"",f.bgPos){var g=ee(f.bgPos);c.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function _F(a){return new j_(a)}js.Default=Lc;var jc=dt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){x(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),At(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(hs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof z?a:new z(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,f=-a(-1/0,1/0),g=0,v=c.length,k;g<v;g++)k=c[g].style.zIndex,c[g]!==this._container&&k&&(f=a(f,+k));isFinite(f)&&(this.options.zIndex=f+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ee.ielt9){_t(this._container,this.options.opacity);var a=+new Date,c=!1,f=!1;for(var g in this._tiles){var v=this._tiles[g];if(!(!v.current||!v.loaded)){var k=Math.min(1,(a-v.loaded)/200);_t(v.el,k),k<1?c=!0:(v.active?f=!0:this._onOpaqueTile(v),v.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),c&&(K(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Oe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===a?(this._levels[f].el.style.zIndex=c-Math.abs(a-f),this._onUpdateLevel(f)):(At(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var g=this._levels[a],v=this._map;return g||(g=this._levels[a]={},g.el=Oe("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=c,g.origin=v.project(v.unproject(v.getPixelOrigin()),a).round(),g.zoom=a,this._setZoomTransform(g,v.getCenter(),v.getZoom()),p(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var a,c,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var g=c.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)At(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,f,g){var v=Math.floor(a/2),k=Math.floor(c/2),V=f-1,W=new z(+v,+k);W.z=+V;var Z=this._tileCoordsToKey(W),re=this._tiles[Z];return re&&re.active?(re.retain=!0,!0):(re&&re.loaded&&(re.retain=!0),V>g?this._retainParent(v,k,V,g):!1)},_retainChildren:function(a,c,f,g){for(var v=2*a;v<2*a+2;v++)for(var k=2*c;k<2*c+2;k++){var V=new z(v,k);V.z=f+1;var W=this._tileCoordsToKey(V),Z=this._tiles[W];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);f+1<g&&this._retainChildren(v,k,f+1,g)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,f,g){var v=Math.round(c);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var k=this.options.updateWhenZooming&&v!==this._tileZoom;(!g||k)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(a),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var f in this._levels)this._setZoomTransform(this._levels[f],a,c)},_setZoomTransform:function(a,c,f){var g=this._map.getZoomScale(f,a.zoom),v=a.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(c,f)).round();Ee.any3d?Nr(a.el,v,g):Ue(a.el,v)},_resetGrid:function(){var a=this._map,c=a.options.crs,f=this._tileSize=this.getTileSize(),g=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],g).x/f.x),Math.ceil(a.project([0,c.wrapLng[1]],g).x/f.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],g).y/f.x),Math.ceil(a.project([c.wrapLat[1],0],g).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,f=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),g=c.getZoomScale(f,this._tileZoom),v=c.project(a,this._tileZoom).floor(),k=c.getSize().divideBy(g*2);return new we(v.subtract(k),v.add(k))},_update:function(a){var c=this._map;if(c){var f=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(a),v=this._pxBoundsToTileRange(g),k=v.getCenter(),V=[],W=this.options.keepBuffer,Z=new we(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var re in this._tiles){var ve=this._tiles[re].coords;(ve.z!==this._tileZoom||!Z.contains(new z(ve.x,ve.y)))&&(this._tiles[re].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(a,f);return}for(var Fe=v.min.y;Fe<=v.max.y;Fe++)for(var Ve=v.min.x;Ve<=v.max.x;Ve++){var Xn=new z(Ve,Fe);if(Xn.z=this._tileZoom,!!this._isValidTile(Xn)){var pn=this._tiles[this._tileCoordsToKey(Xn)];pn?pn.current=!0:V.push(Xn)}}if(V.sort(function(fr,YA){return fr.distanceTo(k)-YA.distanceTo(k)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $r=document.createDocumentFragment();for(Ve=0;Ve<V.length;Ve++)this._addTile(V[Ve],$r);this._level.el.appendChild($r)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var f=this._globalTileRange;if(!c.wrapLng&&(a.x<f.min.x||a.x>f.max.x)||!c.wrapLat&&(a.y<f.min.y||a.y>f.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(a);return pe(this.options.bounds).overlaps(g)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,f=this.getTileSize(),g=a.scaleBy(f),v=g.add(f),k=c.unproject(g,a.z),V=c.unproject(v,a.z);return[k,V]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),f=new me(c[0],c[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),f=new z(+c[0],+c[1]);return f.z=+c[2],f},_removeTile:function(a){var c=this._tiles[a];c&&(At(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Le(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=p,a.onmousemove=p,Ee.ielt9&&this.options.opacity<1&&_t(a,this.options.opacity)},_addTile:function(a,c){var f=this._getTilePos(a),g=this._tileCoordsToKey(a),v=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(v),this.createTile.length<2&&D(o(this._tileReady,this,a,null,v)),Ue(v,f),this._tiles[g]={el:v,coords:a,current:!0},c.appendChild(v),this.fire("tileloadstart",{tile:v,coords:a})},_tileReady:function(a,c,f){c&&this.fire("tileerror",{error:c,tile:f,coords:a});var g=this._tileCoordsToKey(a);f=this._tiles[g],f&&(f.loaded=+new Date,this._map._fadeAnimated?(_t(f.el,0),K(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),c||(Le(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ee.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new z(this._wrapX?m(a.x,this._wrapX):a.x,this._wrapY?m(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new we(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function BF(a){return new jc(a)}var XA=jc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=x(this,c),c.detectRetina&&Ee.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var f=document.createElement("img");return Ne(f,"load",o(this._tileOnLoad,this,c,f)),Ne(f,"error",o(this._tileOnError,this,c,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(a),f},getTileUrl:function(a){var c={r:Ee.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=f),c["-y"]=f}return E(this._url,s(c,this.options))},_tileOnLoad:function(a,c){Ee.ielt9?setTimeout(o(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,f){var g=this.options.errorTileUrl;g&&c.getAttribute("src")!==g&&(c.src=g),a(f,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,f=this.options.zoomReverse,g=this.options.zoomOffset;return f&&(a=c-a),a+g},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=p,c.onerror=p,!c.complete)){c.src=H;var f=this._tiles[a].coords;At(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:f})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",H),jc.prototype._removeTile.call(this,a)},_tileReady:function(a,c,f){if(!(!this._map||f&&f.getAttribute("src")===H))return jc.prototype._tileReady.call(this,a,c,f)}});function D_(a,c){return new XA(a,c)}var M_=XA.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var f=s({},this.defaultWmsParams);for(var g in c)g in this.options||(f[g]=c[g]);c=x(this,c);var v=c.detectRetina&&Ee.retina?2:1,k=this.getTileSize();f.width=k.x*v,f.height=k.y*v,this.wmsParams=f},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,XA.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),f=this._crs,g=de(f.project(c[0]),f.project(c[1])),v=g.min,k=g.max,V=(this._wmsVersion>=1.3&&this._crs===en?[v.y,v.x,k.y,k.x]:[v.x,v.y,k.x,k.y]).join(","),W=XA.prototype.getTileUrl.call(this,a);return W+U(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(a,c){return s(this.wmsParams,a),c||this.redraw(),this}});function bF(a,c){return new M_(a,c)}XA.WMS=M_,D_.wms=bF;var Bi=dt.extend({options:{padding:.1},initialize:function(a){x(this,a),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var f=this._map.getZoomScale(c,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,c),k=g.multiplyBy(-f).add(v).subtract(this._map._getNewPixelOrigin(a,c));Ee.any3d?Nr(this._container,k,f):Ue(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),f=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new we(f,f.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),O_=Bi.extend({options:{tolerance:0},getEvents:function(){var a=Bi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ne(a,"mousemove",this._onMouseMove,this),Ne(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,At(this._container),it(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var a=this._bounds,c=this._container,f=a.getSize(),g=Ee.retina?2:1;Ue(c,a.min),c.width=g*f.x,c.height=g*f.y,c.style.width=f.x+"px",c.style.height=f.y+"px",Ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[u(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,f=c.next,g=c.prev;f?f.prev=g:this._drawLast=g,g?g.next=f:this._drawFirst=f,delete a._order,delete this._layers[u(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),f=[],g,v;for(v=0;v<c.length;v++){if(g=Number(c[v]),isNaN(g))return;f.push(g)}a.options._dashArray=f}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new we,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var f=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)a=g.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var f,g,v,k,V=a._parts,W=V.length,Z=this._ctx;if(W){for(Z.beginPath(),f=0;f<W;f++){for(g=0,v=V[f].length;g<v;g++)k=V[f][g],Z[g?"lineTo":"moveTo"](k.x,k.y);c&&Z.closePath()}this._fillStroke(Z,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,f=this._ctx,g=Math.max(Math.round(a._radius),1),v=(Math.max(Math.round(a._radiusY),1)||g)/g;v!==1&&(f.save(),f.scale(1,v)),f.beginPath(),f.arc(c.x,c.y/v,g,0,Math.PI*2,!1),v!==1&&f.restore(),this._fillStroke(f,a)}},_fillStroke:function(a,c){var f=c.options;f.fill&&(a.globalAlpha=f.fillOpacity,a.fillStyle=f.fillColor||f.color,a.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=f.opacity,a.lineWidth=f.weight,a.strokeStyle=f.color,a.lineCap=f.lineCap,a.lineJoin=f.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),f,g,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(f))&&(g=f);this._fireEvent(g?[g]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(mt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var f,g,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(c)&&(g=f);g!==this._hoveredLayer&&(this._handleMouseOut(a),g&&(Le(this._container,"leaflet-interactive"),this._fireEvent([g],a,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,f){this._map._fireDOMEvent(c,f||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var f=c.next,g=c.prev;if(f)f.prev=g;else return;g?g.next=f:f&&(this._drawFirst=f),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var f=c.next,g=c.prev;if(g)g.next=f;else return;f?f.prev=g:g&&(this._drawLast=g),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function H_(a){return Ee.canvas?new O_(a):null}var Dc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),CF={_initContainer:function(){this._container=Oe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=Dc("shape");Le(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=Dc("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;At(c),a.removeInteractiveTarget(c),delete this._layers[u(a)]},_updateStyle:function(a){var c=a._stroke,f=a._fill,g=a.options,v=a._container;v.stroked=!!g.stroke,v.filled=!!g.fill,g.stroke?(c||(c=a._stroke=Dc("stroke")),v.appendChild(c),c.weight=g.weight+"px",c.color=g.color,c.opacity=g.opacity,g.dashArray?c.dashStyle=N(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=g.lineCap.replace("butt","flat"),c.joinstyle=g.lineJoin):c&&(v.removeChild(c),a._stroke=null),g.fill?(f||(f=a._fill=Dc("fill")),v.appendChild(f),f.color=g.fillColor||g.color,f.opacity=g.fillOpacity):f&&(v.removeChild(f),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),f=Math.round(a._radius),g=Math.round(a._radiusY||f);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+f+","+g+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){hs(a._container)},_bringToBack:function(a){fs(a._container)}},_h=Ee.vml?Dc:Ye,Mc=Bi.extend({_initContainer:function(){this._container=_h("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_h("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){At(this._container),it(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var a=this._bounds,c=a.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,f.setAttribute("width",c.x),f.setAttribute("height",c.y)),Ue(f,a.min),f.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=_h("path");a.options.className&&Le(c,a.options.className),a.options.interactive&&Le(c,"leaflet-interactive"),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){At(a._path),a.removeInteractiveTarget(a._path),delete this._layers[u(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,f=a.options;c&&(f.stroke?(c.setAttribute("stroke",f.color),c.setAttribute("stroke-opacity",f.opacity),c.setAttribute("stroke-width",f.weight),c.setAttribute("stroke-linecap",f.lineCap),c.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?c.setAttribute("stroke-dasharray",f.dashArray):c.removeAttribute("stroke-dasharray"),f.dashOffset?c.setAttribute("stroke-dashoffset",f.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),f.fill?(c.setAttribute("fill",f.fillColor||f.color),c.setAttribute("fill-opacity",f.fillOpacity),c.setAttribute("fill-rule",f.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,An(a._parts,c))},_updateCircle:function(a){var c=a._point,f=Math.max(Math.round(a._radius),1),g=Math.max(Math.round(a._radiusY),1)||f,v="a"+f+","+g+" 0 1,0 ",k=a._empty()?"M0 0":"M"+(c.x-f)+","+c.y+v+f*2+",0 "+v+-f*2+",0 ";this._setPath(a,k)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){hs(a._path)},_bringToBack:function(a){fs(a._path)}});Ee.vml&&Mc.include(CF);function V_(a){return Ee.svg||Ee.vml?new Mc(a):null}qe.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&H_(a)||V_(a)}});var K_=ZA.extend({initialize:function(a,c){ZA.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=pe(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function EF(a,c){return new K_(a,c)}Mc.create=_h,Mc.pointsToPath=An,_i.geometryToLayer=mh,_i.coordsToLatLng=Tp,_i.coordsToLatLngs=gh,_i.latLngToCoords=kp,_i.latLngsToCoords=ph,_i.getFeature=JA,_i.asFeature=yh,qe.mergeOptions({boxZoom:!0});var z_=Fr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){At(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cr(),P(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ne(document,{contextmenu:Ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Oe("div","leaflet-zoom-box",this._container),Le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new we(this._point,this._startPoint),f=c.getSize();Ue(this._box,c.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(At(this._box),mt(this._container,"leaflet-crosshair")),ur(),q(),it(document,{contextmenu:Ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var c=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});qe.addInitHook("addHandler","boxZoom",z_),qe.mergeOptions({doubleClickZoom:!0});var G_=Fr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,f=c.getZoom(),g=c.options.zoomDelta,v=a.originalEvent.shiftKey?f-g:f+g;c.options.doubleClickZoom==="center"?c.setZoom(v):c.setZoomAround(a.containerPoint,v)}});qe.addInitHook("addHandler","doubleClickZoom",G_),qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var q_=Fr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new gs(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=pe(this._map.options.maxBounds);this._offsetLimit=de(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),f=this._initialWorldOffset,g=this._draggable._newPos.x,v=(g-c+f)%a+c-f,k=(g+c+f)%a-c-f,V=Math.abs(v+f)<Math.abs(k+f)?v:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(a){var c=this._map,f=c.options,g=!f.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),g)c.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,V=f.easeLinearity,W=v.multiplyBy(V/k),Z=W.distanceTo([0,0]),re=Math.min(f.inertiaMaxSpeed,Z),ve=W.multiplyBy(re/Z),Fe=re/(f.inertiaDeceleration*V),Ve=ve.multiplyBy(-Fe/2).round();!Ve.x&&!Ve.y?c.fire("moveend"):(Ve=c._limitOffset(Ve,c.options.maxBounds),D(function(){c.panBy(Ve,{duration:Fe,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});qe.addInitHook("addHandler","dragging",q_),qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var W_=Fr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ne(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),it(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,f=a.scrollTop||c.scrollTop,g=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(g,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},f=this.keyCodes,g,v;for(g=0,v=f.left.length;g<v;g++)c[f.left[g]]=[-1*a,0];for(g=0,v=f.right.length;g<v;g++)c[f.right[g]]=[a,0];for(g=0,v=f.down.length;g<v;g++)c[f.down[g]]=[0,a];for(g=0,v=f.up.length;g<v;g++)c[f.up[g]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},f=this.keyCodes,g,v;for(g=0,v=f.zoomIn.length;g<v;g++)c[f.zoomIn[g]]=a;for(g=0,v=f.zoomOut.length;g<v;g++)c[f.zoomOut[g]]=-a},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){it(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,f=this._map,g;if(c in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(g=this._panKeys[c],a.shiftKey&&(g=ee(g).multiplyBy(3)),f.options.maxBounds&&(g=f._limitOffset(ee(g),f.options.maxBounds)),f.options.worldCopyJump){var v=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(g)));f.panTo(v)}else f.panBy(g)}else if(c in this._zoomKeys)f.setZoom(f.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Ur(a)}}});qe.addInitHook("addHandler","keyboard",W_),qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $_=Fr.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=ah(a),f=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var g=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),g),Ur(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),f=this._map.options.zoomSnap||0;a._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,k=f?Math.ceil(v/f)*f:v,V=a._limitZoom(c+(this._delta>0?k:-k))-c;this._delta=0,this._startTime=null,V&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+V):a.setZoomAround(this._lastMousePos,c+V))}});qe.addInitHook("addHandler","scrollWheelZoom",$_);var IF=600;qe.mergeOptions({tapHold:Ee.touchNative&&Ee.safari&&Ee.mobile,tapTolerance:15});var Z_=Fr.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new z(c.clientX,c.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",Ft),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),IF),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){it(document,"touchend",Ft),it(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new z(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var f=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});f._simulated=!0,c.target.dispatchEvent(f)}});qe.addInitHook("addHandler","tapHold",Z_),qe.mergeOptions({touchZoom:Ee.touch,bounceAtZoomLimits:!0});var J_=Fr.extend({addHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var f=c.mouseEventToContainerPoint(a.touches[0]),g=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(f.add(g)._divideBy(2))),this._startDist=f.distanceTo(g),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),Ft(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,f=c.mouseEventToContainerPoint(a.touches[0]),g=c.mouseEventToContainerPoint(a.touches[1]),v=f.distanceTo(g)/this._startDist;if(this._zoom=c.getScaleZoom(v,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&v<1||this._zoom>c.getMaxZoom()&&v>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var k=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(v===1&&k.x===0&&k.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var V=o(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(V,this,!0),Ft(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});qe.addInitHook("addHandler","touchZoom",J_),qe.BoxZoom=z_,qe.DoubleClickZoom=G_,qe.Drag=q_,qe.Keyboard=W_,qe.ScrollWheelZoom=$_,qe.TapHold=Z_,qe.TouchZoom=J_,n.Bounds=we,n.Browser=Ee,n.CRS=Qe,n.Canvas=O_,n.Circle=Ip,n.CircleMarker=fh,n.Class=J,n.Control=hr,n.DivIcon=j_,n.DivOverlay=Ds,n.DomEvent=oh,n.DomUtil=Bn,n.Draggable=gs,n.Evented=Ae,n.FeatureGroup=Wt,n.GeoJSON=_i,n.GridLayer=jc,n.Handler=Fr,n.Icon=js,n.ImageOverlay=wh,n.LatLng=he,n.LatLngBounds=me,n.Layer=dt,n.LayerGroup=Qt,n.LineUtil=F,n.Map=qe,n.Marker=hh,n.Mixin=So,n.Path=fa,n.Point=z,n.PolyUtil=qA,n.Polygon=ZA,n.Polyline=xi,n.Popup=vh,n.PosAnimation=Nc,n.Projection=ce,n.Rectangle=K_,n.Renderer=Bi,n.SVG=Mc,n.SVGOverlay=L_,n.TileLayer=XA,n.Tooltip=xh,n.Transformation=Gn,n.Util=j,n.VideoOverlay=R_,n.bind=o,n.bounds=de,n.canvas=H_,n.circle=hF,n.circleMarker=dF,n.control=Jn,n.divIcon=_F,n.extend=s,n.featureGroup=$A,n.geoJSON=P_,n.geoJson=gF,n.gridLayer=BF,n.icon=cF,n.imageOverlay=pF,n.latLng=ie,n.latLngBounds=pe,n.layerGroup=ha,n.map=OA,n.marker=uF,n.point=ee,n.polygon=mF,n.polyline=fF,n.popup=vF,n.rectangle=EF,n.setOptions=x,n.stamp=u,n.svg=V_,n.svgOverlay=wF,n.tileLayer=D_,n.tooltip=xF,n.transformation=Nn,n.version=r,n.videoOverlay=yF;var TF=window.L;n.noConflict=function(){return window.L=TF,this},window.L=n})})(Bw,Bw.exports);var eh=Bw.exports;const f_=TI(eh);function m_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function g_(t,e){return e==null?function(r,s){const i=R.useRef();return i.current||(i.current=t(r,s)),i}:function(r,s){const i=R.useRef();i.current||(i.current=t(r,s));const o=R.useRef(r),{instance:l}=i.current;return R.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),i}}function b3(t,e){R.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var i;(i=e.layerContainer)==null||i.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function K2(t){return function(n){const r=d_(),s=t(h_(n,r),r);return M2(r.map,n.attribution),V2(s.current,n.eventHandlers),b3(s.current,r),s}}function C3(t,e){const n=g_(t,e),r=K2(n);return v3(r)}function E3(t,e){const n=g_(t),r=B3(n,e);return x3(r)}function I3(t,e){const n=g_(t,e),r=K2(n);return _3(r)}function T3(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function k3(){return d_().map}function bw(){return bw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bw.apply(this,arguments)}function S3({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:i,placeholder:o,style:l,whenReady:u,zoom:h,...m},p){const[w]=R.useState({className:s,id:i,style:l}),[C,b]=R.useState(null);R.useImperativeHandle(p,()=>(C==null?void 0:C.map)??null,[C]);const x=R.useCallback(T=>{if(T!==null&&C===null){const E=new eh.Map(T,m);n!=null&&h!=null?E.setView(n,h):t!=null&&E.fitBounds(t,e),u!=null&&E.whenReady(u),b(y3(E))}},[]);R.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const U=C?sm.createElement(H2,{value:C},r):o??null;return sm.createElement("div",bw({},w,{ref:x}),U)}const N3=R.forwardRef(S3),fE=C3(function({position:e,...n},r){const s=new eh.Marker(e,n);return m_(s,w3(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),mE=E3(function(e,n){const r=new eh.Popup(e,n.overlayContainer);return m_(r,n)},function(e,n,{position:r},s){R.useEffect(function(){const{instance:o}=e;function l(h){h.popup===o&&(o.update(),s(!0))}function u(h){h.popup===o&&s(!1)}return n.map.on({popupopen:l,popupclose:u}),n.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var m;n.map.off({popupopen:l,popupclose:u}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(o)}},[e,n,s,r])}),U3=I3(function({url:e,...n},r){const s=new eh.TileLayer(e,h_(n,r));return m_(s,r)},function(e,n,r){T3(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...h},m)=>R.createElement("svg",{ref:m,...F3,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Q3(t)}`,l].join(" "),...h},[...e.map(([p,w])=>R.createElement(p,w)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=fe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=fe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=fe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=fe("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=fe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=fe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=fe("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=fe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=fe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=fe("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=fe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=fe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=fe("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=fe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=fe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=fe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=fe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=fe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=fe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=fe("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=fe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=fe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=fe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=fe("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=fe("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=fe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=fe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=fe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=fe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=fe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=fe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=fe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);delete f_.Icon.Default.prototype._getIconUrl;f_.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const wE=t=>f_.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 24px; height: 24px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>`,iconSize:[24,24],iconAnchor:[12,24],popupAnchor:[0,-24]}),tu={accommodation:{label:"Accommodation",color:"#3B82F6",icon:z2},costume:{label:"Costume Pickup",color:"#F59E0B",icon:s6},fete:{label:"Fete Location",color:"#EC4899",icon:Z2},meetup:{label:"Meetup Spot",color:"#10B981",icon:nr},scraped:{label:"Live Events",color:"#8B5CF6",icon:Er}};function A6({center:t,zoom:e}){const n=k3();return R.useEffect(()=>{t&&n.setView(t,e||13)},[t,e,n]),null}function l6(t,e,n,r){const i=(n-t)*Math.PI/180,o=(r-e)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}const vE={trinidad:{center:[10.6918,-61.2225],zoom:11,country:"Trinidad & Tobago"},"stkitts-sugar-mas":{center:[17.3026,-62.7177],zoom:12,country:"St. Kitts"},stcroix:{center:[17.7246,-64.8348],zoom:11,country:"St. Croix, USVI"},dominica:{center:[15.415,-61.371],zoom:11,country:"Dominica"},aruba:{center:[12.5211,-69.9683],zoom:12,country:"Aruba"},"guyana-mashramani":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},guyana:{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},"guyana-independence":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},jamaica:{center:[18.0179,-76.8099],zoom:11,country:"Jamaica"},stmaarten:{center:[18.0425,-63.0548],zoom:12,country:"St. Maarten"},bahamas:{center:[25.0343,-77.3963],zoom:12,country:"Bahamas"},bermuda:{center:[32.3078,-64.7505],zoom:13,country:"Bermuda"},vincymas:{center:[13.1587,-61.2248],zoom:12,country:"St. Vincent"},antigua:{center:[17.1274,-61.8468],zoom:12,country:"Antigua"},stlucia:{center:[14.0101,-60.987],zoom:11,country:"St. Lucia"},tobago:{center:[11.1889,-60.732],zoom:11,country:"Tobago"},nottinghill:{center:[51.5156,-.205],zoom:14,country:"London, UK"},miami:{center:[25.7617,-80.1918],zoom:11,country:"Miami, FL"},tampa:{center:[27.9506,-82.4572],zoom:12,country:"Tampa, FL"},"cayman-batabano":{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},stthomas:{center:[18.3358,-64.8963],zoom:13,country:"St. Thomas, USVI"},atlanta:{center:[33.749,-84.388],zoom:12,country:"Atlanta, GA"},hollywood:{center:[34.0928,-118.3287],zoom:13,country:"Hollywood, CA"},caymas:{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},toronto:{center:[43.65107,-79.347015],zoom:12,country:"Toronto, Canada"},barbados:{center:[13.1939,-59.5432],zoom:12,country:"Barbados"},nevis:{center:[17.15,-62.58],zoom:12,country:"Nevis"},grenada:{center:[12.0529,-61.7523],zoom:12,country:"Grenada"},"ny-labor-day":{center:[40.6782,-73.9442],zoom:13,country:"Brooklyn, NY"},japan:{center:[35.6762,139.6503],zoom:10,country:"Tokyo, Japan"}};function c6({locations:t=[],scrapedEvents:e=[],onLocationsChange:n,carnivalName:r,carnivalId:s}){const[i,o]=R.useState(!1),[l,u]=R.useState({name:"",type:"fete",lat:"",lng:""}),[h,m]=R.useState(""),[p,w]=R.useState([]),[C,b]=R.useState(!1),x=t.find(I=>I.type==="accommodation"),U=vE[s]||vE.trinidad,T=R.useMemo(()=>{if(x)return[x.lat,x.lng];if(t.length>0)return[t[0].lat,t[0].lng];const I=e.find(B=>B.lat&&B.lng);return I?[I.lat,I.lng]:U.center},[t,x,U,e]),E=async()=>{if(h.trim()){b(!0);try{const B=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h)}`)).json();w(B.slice(0,5))}catch(I){console.error("Search error:",I)}b(!1)}},N=I=>{u({...l,lat:parseFloat(I.lat),lng:parseFloat(I.lon),name:l.name||I.display_name.split(",")[0]}),w([]),m("")},O=()=>{if(!l.name||!l.lat||!l.lng)return;const I={id:Date.now().toString(),name:l.name,type:l.type,lat:parseFloat(l.lat),lng:parseFloat(l.lng)};n([...t,I]),u({name:"",type:"fete",lat:"",lng:""}),o(!1)},H=I=>{n(t.filter(B=>B.id!==I))},M=I=>{if(!x||I.type==="accommodation")return null;const B=l6(x.lat,x.lng,I.lat,I.lng);return B<1?`${Math.round(B*1e3)}m`:`${B.toFixed(1)}km`};return A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(Er,{className:"w-5 h-5 text-purple-500"}),"Fete Map - ",r]}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-7",children:[" ",U.country]})]}),A.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition",children:[A.jsx(zl,{className:"w-4 h-4"}),"Add Pin"]})]}),i&&A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"text",placeholder:"Location name",value:l.name,onChange:I=>u({...l,name:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("select",{value:l.type,onChange:I=>u({...l,type:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white",children:Object.entries(tu).map(([I,{label:B}])=>A.jsx("option",{value:I,children:B},I))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Search for a place...",value:h,onChange:I=>m(I.target.value),onKeyPress:I=>I.key==="Enter"&&E(),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("button",{onClick:E,disabled:C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:C?"...":"Search"})]}),p.length>0&&A.jsx("ul",{className:"bg-white dark:bg-gray-600 border dark:border-gray-500 rounded-lg max-h-40 overflow-y-auto",children:p.map((I,B)=>A.jsx("li",{onClick:()=>N(I),className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-500 cursor-pointer text-sm truncate dark:text-white",children:I.display_name},B))}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"number",step:"any",placeholder:"Latitude",value:l.lat,onChange:I=>u({...l,lat:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("input",{type:"number",step:"any",placeholder:"Longitude",value:l.lng,onChange:I=>u({...l,lng:I.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:O,disabled:!l.name||!l.lat||!l.lng,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Location"}),A.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}),A.jsx("div",{className:"h-[400px] rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-600",children:A.jsxs(N3,{center:T,zoom:U.zoom,style:{height:"100%",width:"100%"},children:[A.jsx(U3,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),A.jsx(A6,{center:T,zoom:U.zoom}),t.map(I=>{var B,S;return A.jsx(fE,{position:[I.lat,I.lng],icon:wE(((B=tu[I.type])==null?void 0:B.color)||"#6B7280"),children:A.jsxs(mE,{children:[A.jsx("div",{className:"font-medium",children:I.name}),A.jsx("div",{className:"text-xs text-gray-500",children:(S=tu[I.type])==null?void 0:S.label}),M(I)&&A.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-1 mt-1",children:[A.jsx(Y3,{className:"w-3 h-3"}),M(I)," from accommodation"]})]})},I.id)}),e.filter(I=>I.lat&&I.lng).map(I=>A.jsx(fE,{position:[I.lat,I.lng],icon:wE(tu.scraped.color),children:A.jsxs(mE,{children:[A.jsx("div",{className:"font-medium",children:I.title}),A.jsx("div",{className:"text-xs text-purple-600 font-bold mb-1",children:"Live Event"}),I.venue&&A.jsx("div",{className:"text-xs text-gray-500 mb-2",children:I.venue}),A.jsx("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",className:"block text-center px-2 py-1 bg-purple-100 text-purple-700 text-[10px] font-bold rounded uppercase hover:bg-purple-200 transition",children:"Find Tickets"})]})},I.id))]})}),t.length>0&&A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Saved Locations"}),A.jsx("div",{className:"grid gap-2",children:t.map(I=>{const B=tu[I.type],S=(B==null?void 0:B.icon)||Er,Q=M(I);return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:(B==null?void 0:B.color)||"#6B7280"},children:A.jsx(S,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:I.name}),A.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B==null?void 0:B.label,Q&&`  ${Q} from stay`]})]})]}),A.jsx("button",{onClick:()=>H(I.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(ti,{className:"w-4 h-4"})})]},I.id)})})]}),!x&&t.length===0&&A.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[A.jsx(z2,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),A.jsx("p",{children:"Start by adding your accommodation location"}),A.jsx("p",{className:"text-sm",children:"Then add fetes, costume pickup, and meetup spots"})]})]})}let jo=[{id:"1",text:"Who's ready for the road?! ",senderId:"2",senderName:"Soca Junkie",createdAt:new Date(Date.now()-864e5).toISOString(),isBot:!1},{id:"2",text:"My costume is ready! The Monarch section looks fire ",senderId:"3",senderName:"Fete King",createdAt:new Date(Date.now()-8e7).toISOString(),isBot:!1},{id:"3",text:"Just waiting on my flight confirmation.",senderId:"4",senderName:"Carnival Baby",createdAt:new Date(Date.now()-7e7).toISOString(),isBot:!1},{id:"4",text:"Welcome to Trinidad! I'm your Carnival Concierge. Ask me anything about fete locations, transport, or safety tips!",senderId:"bot",senderName:"Carnival Concierge",createdAt:new Date(Date.now()-6e4).toISOString(),isBot:!0}];const u6=(t,e,n)=>{if(e)return n(jo),()=>{};if(!t)return console.warn("subscribeToMessages aborted: No squadId provided."),()=>{};console.log("Subscribing to messages for squad:",t);const r=on(Te,"squads",t,"messages"),s=QA(r,qx("createdAt","asc"),ON(50));return Gs(s,o=>{const l=o.docs.map(u=>{var h;return{id:u.id,...u.data(),createdAt:(h=u.data().createdAt)!=null&&h.toDate?u.data().createdAt.toDate().toISOString():new Date().toISOString()}});n(l)},o=>{console.error(" Chat subscription error:",o)})},d6=async(t,e,n,r,s,i)=>{let o=null;if(r)if(s)o=URL.createObjectURL(r);else try{const u=ro(so,`squads/${t}/${Date.now()}_${r.name}`),h=await dc(u,r);o=await hc(h.ref)}catch(u){console.error("Image upload failed:",u)}const l={text:n,imageUrl:o,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString(),senderId:e.uid||"demo-user",senderName:e.displayName||"Me",senderPhoto:e.photoURL||null,createdAt:s?new Date().toISOString():Xm(),isBot:!1};if(s){const u={id:Date.now().toString(),...l};jo=[...jo,u],i([...jo]),setTimeout(()=>{const h=xE(n||(r?"Nice photo! ":"...")),m={id:(Date.now()+1).toString(),text:h,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:new Date().toISOString(),isBot:!0};jo=[...jo,m],i([...jo])},1500);return}if(!t){console.warn("sendMessage aborted: No squadId provided.");return}console.log("Sending message to Firestore...",{squadId:t,messageData:l}),await uc(on(Te,"squads",t,"messages"),l),l.isBot||setTimeout(async()=>{const u=xE(n||(r?"Nice photo! ":"...")),h={text:u,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:Xm(),isBot:!0,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString()};try{await uc(on(Te,"squads",t,"messages"),h),console.log(" AI Concierge replied:",u)}catch(m){console.error("Failed to send AI reply:",m)}},2e3)},xE=t=>{const e=t.toLowerCase();return e.includes("fete")||e.includes("party")?"Based on your schedule, I recommend 'Phuket' on Friday night. It's close to your Airbnb in Woodbrook and tickets are running low! ":e.includes("food")||e.includes("hungry")||e.includes("eat")?"You have to try 'Sauce Doubles' in Curepe! Or if you're near the Savannah, check out the corn soup vendor near the exit. ":e.includes("transport")||e.includes("taxi")||e.includes("uber")?"Rideshare apps like TT RideShare are reliable. For late nights, I recommend pre-booking a driver for your squad. Safety first! ":e.includes("costume")||e.includes("mas")?"Costume pickup for Tribe is at the Queen's Park Savannah. Don't forget your distribution slip and ID! ":"That sounds like a vibe! Remember to stay hydrated . Need help with transport or fete tickets?"};function h6({squadId:t,user:e,isDemoMode:n}){const[r,s]=R.useState([]),[i,o]=R.useState(""),[l,u]=R.useState(null),[h,m]=R.useState(null),p=R.useRef(null),w=R.useRef(null);console.log("SquadChat Rendered. squadId:",t,"User:",e==null?void 0:e.uid),R.useEffect(()=>{const U=u6(n?"demo-squad":t,n,T=>{s(T)});return()=>U()},[t,n]),R.useEffect(()=>{var x;(x=p.current)==null||x.scrollIntoView({behavior:"smooth"})},[r]),R.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);const C=x=>{if(x.target.files&&x.target.files[0]){const U=x.target.files[0];u(U),m(URL.createObjectURL(U))}},b=async x=>{if(x.preventDefault(),!i.trim()&&!l)return;const U=i,T=l;o(""),u(null),m(null);try{await d6(n?"demo-squad":t,e,U,T,n,s)}catch(E){console.error("Failed to send:",E),o(U)}};return t?A.jsxs("div",{className:"flex flex-col h-[65vh] sm:h-[600px] bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[A.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center shadow-md z-10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-full backdrop-blur-sm",children:A.jsx(gE,{className:"w-5 h-5 text-white"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Squad Chat"}),A.jsxs("p",{className:"text-xs text-purple-100 opacity-90 flex items-center gap-1",children:[A.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),"Carnival Concierge Active"]})]})]}),n&&A.jsx("span",{className:"px-2 py-1 text-[10px] font-black tracking-widest bg-yellow-400 text-yellow-900 rounded uppercase",children:"Demo"})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900/50",children:[r.length===0?A.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 opacity-50",children:A.jsx("p",{children:"No messages yet. Say hi!"})}):r.map(x=>{const U=x.senderId===((e==null?void 0:e.uid)||"demo-user"),T=x.isBot;let E=!1,N=null;return x.expiresAt&&(N=new Date(x.expiresAt),new Date>N&&(E=!0)),A.jsx("div",{className:`flex w-full ${U?"justify-end":"justify-start"}`,children:A.jsxs("div",{className:`flex max-w-[85%] sm:max-w-[80%] gap-2 ${U?"flex-row-reverse":"flex-row"}`,children:[A.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center shadow-sm 
                    ${T?"bg-gradient-to-br from-pink-500 to-orange-400":"bg-gray-300 dark:bg-gray-700"}`,children:T?A.jsx(gE,{className:"w-4 h-4 text-white"}):A.jsx(Ws,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{className:`flex flex-col ${U?"items-end":"items-start"}`,children:[A.jsx("span",{className:"text-[10px] text-gray-400 mb-1 ml-1",children:x.senderName}),A.jsxs("div",{className:`px-4 py-2 sm:py-3 rounded-2xl shadow-sm text-sm leading-relaxed relative break-words
                        ${U?"bg-blue-600 text-white rounded-tr-none":T?"bg-white dark:bg-gray-800 border-l-4 border-pink-500 text-gray-800 dark:text-gray-100 rounded-tl-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-tl-none"}
                    `,children:[x.imageUrl&&A.jsx("div",{className:"mb-2",children:E?A.jsxs("div",{className:"w-48 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg flex flex-col items-center justify-center text-gray-500",children:[A.jsx(Yf,{className:"w-8 h-8 mb-1 opacity-50"}),A.jsx("span",{className:"text-xs italic",children:"Image expired"})]}):A.jsxs("div",{className:"relative group",children:[A.jsx("img",{src:x.imageUrl,alt:"Shared",className:"w-48 h-48 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(x.imageUrl,"_blank")}),A.jsx("span",{className:"absolute top-2 right-2 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded backdrop-blur-sm",children:" 24h"})]})}),x.text]}),A.jsx("span",{className:"text-[10px] text-gray-400 mt-1 opacity-50",children:new Date(x.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},x.id)}),A.jsx("div",{ref:p})]}),A.jsxs("form",{onSubmit:b,className:"p-2 sm:p-4 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700",children:[h&&A.jsxs("div",{className:"mb-3 relative inline-block",children:[A.jsx("img",{src:h,alt:"Preview",className:"h-20 w-20 object-cover rounded-lg border border-purple-200"}),A.jsx("button",{type:"button",onClick:()=>{u(null),m(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600",children:A.jsx(ls,{className:"w-3 h-3"})})]}),A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("input",{type:"file",ref:w,onChange:C,accept:"image/*",className:"hidden"}),A.jsx("button",{type:"button",onClick:()=>{var x;return(x=w.current)==null?void 0:x.click()},className:"p-2 sm:p-3 flex-shrink-0 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-xl transition-colors",title:"Upload Image (Expires in 24h)",children:A.jsx(fc,{className:"w-5 h-5"})}),A.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:l?"Add caption...":"Message squad...",className:"flex-1 px-3 py-2 sm:px-4 sm:py-3 bg-gray-100 dark:bg-gray-900 border-0 rounded-xl focus:ring-2 focus:ring-purple-500 dark:text-white placeholder-gray-400 transition-all text-sm sm:text-base min-w-0"}),A.jsx("button",{type:"submit",disabled:!i.trim()&&!l,className:"p-2 sm:p-3 flex-shrink-0 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-purple-500/30",children:A.jsx(Y2,{className:"w-5 h-5"})})]})]})]}):A.jsxs("div",{className:"flex flex-col h-[300px] items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700 p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:A.jsx(Ws,{className:"w-8 h-8 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"No Active Squad"}),A.jsx("p",{className:"text-gray-500 text-sm max-w-xs mx-auto",children:"Join or create a squad above to verify your Road Mode connection and start chatting!"})]})}const Ew={ticket:{label:"Ticket",icon:Is,color:"#F59E0B"},photo:{label:"Photo",icon:Xf,color:"#3B82F6"}};function f6({files:t=[],onFilesChange:e,carnivalName:n,carnivalId:r,userId:s}){const[i,o]=R.useState(!1),[l,u]=R.useState(""),[h,m]=R.useState(null),[p,w]=R.useState("ticket"),[C,b]=R.useState(""),x=R.useRef(null),U=async H=>{const M=H.target.files[0];if(!M)return;const I=10*1024*1024;if(M.size>I){alert("File too large. Maximum size is 10MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp","application/pdf"].includes(M.type)){alert("Invalid file type. Please upload an image (JPG, PNG, GIF, WebP) or PDF.");return}o(!0),u("Uploading...");try{const S=Date.now(),Q=M.name.split(".").pop(),D=`users/${s}/carnivals/${r}/${S}.${Q}`,K=ro(so,D);await dc(K,M);const j=await hc(K),J={id:S.toString(),name:C||M.name.split(".")[0],type:p,url:j,storagePath:D,originalName:M.name,uploadedAt:new Date().toISOString(),fileType:M.type};e([...t,J]),b(""),u(""),x.current&&(x.current.value="")}catch(S){console.error("Upload error:",S),alert("Failed to upload file. Please try again.")}o(!1)},T=async H=>{if(confirm("Are you sure you want to delete this file?"))try{const M=ro(so,H.storagePath);await f2(M),e(t.filter(I=>I.id!==H.id))}catch(M){console.error("Delete error:",M),e(t.filter(I=>I.id!==H.id))}},E=H=>{const M=document.createElement("a");M.href=H.url,M.download=H.originalName||H.name,M.target="_blank",document.body.appendChild(M),M.click(),document.body.removeChild(M)},N=t.filter(H=>H.type==="ticket"),O=t.filter(H=>H.type==="photo");return A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(Xf,{className:"w-5 h-5 text-purple-500"}),"Media Vault"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Store your tickets, photos, and important documents for ",n]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-4 border border-purple-100 dark:border-purple-800",children:[A.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Upload New File"}),A.jsxs("div",{className:"grid gap-3",children:[A.jsxs("div",{className:"flex gap-3",children:[A.jsx("input",{type:"text",placeholder:"File label (e.g., 'Tribe Costume Receipt')",value:C,onChange:H=>b(H.target.value),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:p,onChange:H=>w(H.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:Object.entries(Ew).map(([H,{label:M}])=>A.jsx("option",{value:H,children:M},H))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{ref:x,type:"file",accept:"image/*,.pdf",onChange:U,className:"hidden",id:"file-upload"}),A.jsx("label",{htmlFor:"file-upload",className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed rounded-lg cursor-pointer transition ${i?"border-gray-300 bg-gray-50 dark:bg-gray-800 cursor-not-allowed":"border-purple-300 hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20"}`,children:i?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-5 h-5 animate-spin text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:l})]}):A.jsxs(A.Fragment,{children:[A.jsx(a6,{className:"w-5 h-5 text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Click to upload image or PDF (max 10MB)"})]})})]})]})]}),N.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(Is,{className:"w-4 h-4 text-yellow-500"}),"Tickets (",N.length,")"]}),A.jsx("div",{className:"grid gap-3",children:N.map(H=>A.jsx(m6,{file:H,onView:m,onDownload:E,onDelete:T},H.id))})]}),O.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(Xf,{className:"w-4 h-4 text-blue-500"}),"Photos (",O.length,")"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:O.map(H=>A.jsx(g6,{file:H,onView:m,onDownload:E,onDelete:T},H.id))})]}),t.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(Xf,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No files uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload your tickets, costume receipts, and travel photos"})]}),h&&A.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>m(null),children:A.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",onClick:H=>H.stopPropagation(),children:[A.jsx("button",{onClick:()=>m(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300",children:A.jsx(ls,{className:"w-8 h-8"})}),h.fileType==="application/pdf"?A.jsx("iframe",{src:h.url,className:"w-full h-[80vh] rounded-lg"}):A.jsx("img",{src:h.url,alt:h.name,className:"max-w-full max-h-[80vh] mx-auto rounded-lg"}),A.jsx("p",{className:"text-white text-center mt-4 font-medium",children:h.name})]})})]})}function m6({file:t,onView:e,onDownload:n,onDelete:r}){const s=Ew[t.type]||Ew.ticket,i=s.icon;return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${s.color}20`},children:A.jsx(i,{className:"w-5 h-5",style:{color:s.color}})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:t.name}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.uploadedAt).toLocaleDateString()})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(__,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 text-gray-500 hover:text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition",children:A.jsx(nh,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(ti,{className:"w-4 h-4"})})]})]})}function g6({file:t,onView:e,onDownload:n,onDelete:r}){return A.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600",children:[A.jsx("img",{src:t.url,alt:t.name,className:"w-full h-32 object-cover cursor-pointer",onClick:()=>e(t)}),A.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(__,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(nh,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 bg-red-500/50 hover:bg-red-500/70 rounded-full text-white transition",children:A.jsx(ti,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-2 truncate",children:t.name})]})}const Jh={trinidad:"https://open.spotify.com/embed/playlist/2H61cIhlAeFVmreSMqvui3",jamaica:"https://open.spotify.com/embed/playlist/37i9dQZF1DX82pCGH5USnM",miami:"https://open.spotify.com/embed/playlist/37i9dQZF1DXS1X4r7p38D5",stlucia:"https://open.spotify.com/embed/playlist/37i9dQZF1DX62XscWx9t6h",barbados:"https://open.spotify.com/embed/playlist/37i9dQZF1DX23V8kYg8jC2",stkitts:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stcroix:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stthomas:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",default:"https://open.spotify.com/embed/playlist/28bCuQ5IhyPbmvJx30ZMea"};function p6({activeCarnivalId:t,isPremium:e}){const[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,l]=R.useState(!1),u=()=>{if(!t)return{key:"default",url:Jh.default};const p=Object.keys(Jh).find(C=>t.toLowerCase().includes(C)),w=Jh[p]||Jh.default;return{key:p||"default (fallback)",url:w}},{key:h,url:m}=u();return n?A.jsxs("div",{className:`fixed z-40 transition-all duration-300 shadow-2xl overflow-hidden bg-black/90 backdrop-blur-md border border-white/20 rounded-t-2xl sm:rounded-2xl
      ${s?"bottom-24 right-4 w-64 h-16 rounded-full":"bottom-0 sm:bottom-24 right-0 sm:right-4 w-full sm:w-80 h-[400px]"}`,children:[A.jsxs("div",{className:`flex items-center justify-between p-3 bg-gradient-to-r from-pink-600 to-purple-700 text-white
        ${s?"h-full":""}`,children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(CA,{className:"w-5 h-5 animate-pulse"}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-bold text-sm",children:s?"Carnival Vibes":o?"Team Soca Live":"Soca Vibes Player"}),!s&&A.jsx("button",{onClick:()=>l(!o),className:"text-[10px] bg-white/20 px-2 py-0.5 rounded-full hover:bg-white/30 transition text-left w-fit",children:o?"Switch to Playlist":"Switch to Live Radio"})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[s?A.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx($3,{className:"w-4 h-4"})}):A.jsx("button",{onClick:()=>i(!0),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(X3,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(ls,{className:"w-4 h-4"})})]})]}),!s&&A.jsxs("div",{className:"h-[calc(100%-48px)] bg-black relative",children:[!e&&!o&&A.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-yellow-500/90 text-black text-xs font-bold px-2 py-1 text-center",children:"Upgrade directly in Spotify for ad-free listening"}),o?A.jsx("iframe",{src:"https://ice23.securenetsystems.net/TSDC",width:"100%",height:"100%",frameBorder:"0",allow:"autoplay; encrypted-media;",title:"Team Soca Live"}):A.jsx("iframe",{style:{borderRadius:"12px"},src:m,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Soca Playlist"})]})]}):A.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-24 right-4 z-40 bg-gradient-to-r from-pink-500 to-purple-600 text-white p-3 rounded-full shadow-lg hover:scale-110 transition-transform animate-bounce-slow","aria-label":"Open Vibes Player",children:A.jsx(CA,{className:"w-6 h-6"})})}function y6({users:t,onDeleteUser:e,onDeleteAll:n,onClose:r}){const[s,i]=R.useState(new Set),[o,l]=R.useState(!1),u=R.useMemo(()=>t.filter(w=>{var x,U;const C=((x=w.profile)==null?void 0:x.email)&&w.profile.email.trim()!=="",b=((U=w.profile)==null?void 0:U.displayName)&&w.profile.displayName.trim()!==""&&w.profile.displayName!=="User";return!C&&!b}),[t]),h=w=>{const C=new Set(s);C.has(w)?C.delete(w):C.add(w),i(C)},m=()=>{s.size===u.length?i(new Set):i(new Set(u.map(w=>w.id)))},p=()=>{o?(n(Array.from(s)),l(!1),i(new Set)):l(!0)};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-xl overflow-hidden animate-fadeIn",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-red-50 dark:bg-red-900/10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400",children:A.jsx(tU,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Database Cleanup"}),A.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:["Found ",u.length," incomplete records"]})]})]}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition",children:A.jsx(ls,{className:"w-5 h-5 text-gray-500"})})]}),A.jsx("div",{className:"p-4",children:u.length===0?A.jsxs("div",{className:"text-center py-12 text-gray-500",children:[A.jsx(th,{className:"w-12 h-12 mx-auto mb-3 text-green-500 opacity-50"}),A.jsx("p",{children:"Database is clean! No incomplete users found."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:s.size>0&&s.size===u.length,onChange:m,className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),A.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select All (",u.length,")"]})]}),s.size>0&&A.jsxs("button",{onClick:p,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition ${o?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-300"}`,children:[A.jsx(ti,{className:"w-4 h-4"}),o?"CONFIRM DELETION":`Delete (${s.size})`]})]}),A.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:A.jsxs("table",{className:"w-full text-sm text-left",children:[A.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-xs uppercase text-gray-500 font-medium sticky top-0 backdrop-blur-sm",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-3 w-10"}),A.jsx("th",{className:"p-3",children:"User ID"}),A.jsx("th",{className:"p-3",children:"Created"}),A.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),A.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:u.map(w=>{var C;return A.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition",children:[A.jsx("td",{className:"p-3",children:A.jsx("input",{type:"checkbox",checked:s.has(w.id),onChange:()=>h(w.id),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"})}),A.jsx("td",{className:"p-3 font-mono text-xs text-gray-500",children:w.id}),A.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-300",children:(C=w.createdAt)!=null&&C.toDate?w.createdAt.toDate().toLocaleDateString():"Unknown"}),A.jsx("td",{className:"p-3 text-right",children:A.jsx("button",{onClick:()=>e(w.id),className:"text-gray-400 hover:text-red-500 transition",title:"Delete single user",children:A.jsx(ti,{className:"w-4 h-4"})})})]},w.id)})})]})})]})}),u.length>0&&A.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 border-t border-yellow-100 dark:border-yellow-900/20 flex items-start gap-3 text-xs text-yellow-800 dark:text-yellow-200",children:[A.jsx(p_,{className:"w-4 h-4 shrink-0 mt-0.5"}),A.jsxs("p",{children:[A.jsx("strong",{children:"Warning:"})," Deleting users is permanent. This will remove their record from the 'users' collection. If they sign in again, a new record will be created."]})]})]})}const w6=({onScheduleDetected:t})=>{const[e,n]=R.useState(!1),[r,s]=R.useState(""),[i,o]=R.useState(""),l=window.SpeechRecognition||window.webkitSpeechRecognition;if(!l)return null;const u=new l;u.continuous=!1,u.lang="en-US",u.interimResults=!1;const h=()=>{n(!0),o('Listening... Say "Add [Event] for [Day] at [Time]"'),u.start()},m=()=>{n(!1),u.stop()};u.onresult=w=>{const C=w.results[0][0].transcript;s(C),o("Processing..."),p(C),n(!1)},u.onerror=w=>{console.error("Voice Error:",w.error),n(!1),o("Error listening. Try again.")};const p=w=>{let C=w,b="",x="";const U=w.toLowerCase();(U.startsWith("add")||U.startsWith("schedule")||U.startsWith("remind me to"))&&(C=w.replace(/^(Add|Schedule|Remind me to)\s+/i,""));const T=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(const N of T)U.includes(N.toLowerCase())&&(b=N,C=C.replace(new RegExp(`(on|for)?\\s*${N}`,"i"),""));const E=C.match(/(\d{1,2}(?::\d{2})?\s?(?:am|pm)?)/i);E&&(E[0].toLowerCase().includes("am")||E[0].toLowerCase().includes("pm")||E[0].includes(":"))&&(x=E[0],C=C.replace(E[0],"")),C=C.replace(/\s+(at|for|on)\s*$/i,"").trim(),C=C.replace(/^\s+(at|for|on)\s+/i,"").trim(),C?(o(`Found: ${C} (${b||"No Day"} @ ${x||"No Time"})`),t({name:C,day:b||"Friday",time:x||"12:00 PM",note:`Voice: "${w}"`})):o("Could not understand event name.")};return A.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700 mt-4",children:[A.jsxs("button",{onClick:e?m:h,className:`
            flex items-center gap-2 px-6 py-3 rounded-full font-bold transition-all transform hover:scale-105
            ${e?"bg-red-500 text-white animate-pulse shadow-red-500/50 shadow-lg":"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg"}
        `,children:[e?A.jsx(J3,{className:"w-5 h-5"}):A.jsx(W2,{className:"w-5 h-5"}),e?"Stop Listening":"Voice Add Event (Free)"]}),(r||i)&&A.jsxs("div",{className:"mt-3 text-center",children:[A.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r&&`"${r}"`}),A.jsx("p",{className:"text-xs text-blue-500 mt-1 font-mono",children:i})]})]})},Xh=[{id:"default-fete-map-banner",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-banner",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-banner",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-banner",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-fete-map-inline",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-inline",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-inline",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-inline",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"madd-colors-banner-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"banner",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1},{id:"madd-colors-inline-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"inline",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1}];function Yh({placement:t="banner",className:e="",onUpgradeClick:n}){const[r,s]=R.useState([]),[i,o]=R.useState(0),[l,u]=R.useState(!1),[h,m]=R.useState(!0),[p,w]=R.useState(null);if(R.useEffect(()=>{m(!0),w(null);const E=on(Te,"promoAds"),N=QA(E,Jd("active","==",!0)),O=Gs(N,H=>{const M=[];H.forEach(Q=>{M.push({id:Q.id,...Q.data()})});const I=M.filter(Q=>Q.placement===t),B=Xh.find(Q=>Q.id.includes("madd-colors")&&Q.placement===t);let S=I;if(I.length===0?S=Xh.filter(Q=>Q.placement===t):B&&(I.some(D=>D.id.includes("madd-colors"))||(S=[...I,{...B,isDefault:!1}])),S.length>0)s(S);else{const Q=Xh.filter(D=>D.placement===t);s(Q)}m(!1)},H=>{console.error(`PromoAd [${t}] error:`,H);const M=Xh.filter(I=>I.placement===t);s(M),w(null),m(!1)});return()=>O()},[t]),R.useEffect(()=>{if(r.length<=1)return;const E=setInterval(()=>{o(N=>(N+1)%r.length)},8e3);return()=>clearInterval(E)},[r.length]),h||l||r.length===0)return null;const C=Math.min(i,r.length-1),b=r[C];if(!b||!b.imageUrl)return null;const x=b.mediaType==="video",U=b.id.includes("madd-colors")?!1:b.isDefault;b.id.includes("madd-colors")||b.linkUrl;const T=()=>{U&&n?n():b.linkUrl&&window.open(b.linkUrl,"_blank","noopener,noreferrer")};return A.jsx("div",{className:`p-4 relative ${e}`,children:A.jsxs("div",{onClick:T,className:`relative overflow-hidden rounded-lg shadow-md ${b.linkUrl||U?"cursor-pointer hover:shadow-lg transition-shadow":""}`,children:[x?A.jsx("video",{src:b.imageUrl,className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onError:E=>console.error("Video load error:",E)}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Promotion",className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},onError:E=>{console.error("Image load error:",b.imageUrl),E.target.style.display="none"}}),b.title&&A.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:[A.jsx("p",{className:"text-white text-sm font-bold truncate",children:b.title}),U&&A.jsx("p",{className:"text-yellow-300 text-xs font-medium",children:"Tap to upgrade to Premium"})]}),A.jsx("div",{className:"absolute top-1 left-1 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded",children:U?"PREMIUM":"AD"}),A.jsx("button",{onClick:E=>{E.stopPropagation(),u(!0)},className:"absolute top-1 right-1 p-1 bg-black/50 hover:bg-black/70 text-white rounded-full transition",children:A.jsx(ls,{className:"w-3 h-3"})}),r.length>1&&A.jsx("div",{className:"absolute bottom-2 right-2 flex gap-1",children:r.map((E,N)=>A.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition ${N===i?"bg-white":"bg-white/50"}`},N))})]})})}const _E=[{id:"banner",label:"Top Banner"},{id:"sidebar",label:"Sidebar"},{id:"inline",label:"Inline (Between Sections)"}];function v6(){const[t,e]=R.useState([]),[n,r]=R.useState(!1),[s,i]=R.useState(""),[o,l]=R.useState(!1),[u,h]=R.useState({title:"",linkUrl:"",placement:"banner"}),m=R.useRef(null);R.useEffect(()=>{const b=on(Te,"promoAds"),x=Gs(b,U=>{const T=[];U.forEach(E=>{T.push({id:E.id,...E.data()})}),T.sort((E,N)=>(N.createdAt||0)-(E.createdAt||0)),e(T)});return()=>x()},[]);const p=async b=>{const x=b.target.files[0];if(!x)return;const U=x.type.startsWith("video/"),T=U?10*1024*1024:5*1024*1024;if(x.size>T){alert(`File too large. Maximum size is ${U?"10MB for videos":"5MB for images"}.`);return}const E=["image/jpeg","image/png","image/gif","image/webp"],N=["video/mp4","video/webm"];if(![...E,...N].includes(x.type)){alert("Invalid file type. Please upload JPG, PNG, GIF, WebP, MP4, or WebM.");return}r(!0),i("Preparing upload...");const H=setTimeout(()=>{r(!1),i(""),alert("Upload timed out after 60 seconds. Please check your connection and try again."),m.current&&(m.current.value="")},6e4);try{const M=Date.now(),I=x.name.split(".").pop(),B=`promoAds/${M}.${I}`,S=ro(so,B);i("Uploading to storage..."),console.log("Uploading file to Storage...",B),await dc(S,x),i("Getting download URL...");const Q=await hc(S);console.log("File uploaded, URL:",Q);const D=x.type.startsWith("video/"),K={title:u.title||"",linkUrl:u.linkUrl||"",placement:u.placement,imageUrl:Q,mediaType:D?"video":"image",storagePath:B,active:!0,createdAt:M};i("Saving ad data..."),console.log("Saving ad metadata to Firestore...",K);const j=await uc(on(Te,"promoAds"),K);console.log("Ad saved to Firestore successfully, ID:",j.id),clearTimeout(H),alert("Ad uploaded successfully!"),h({title:"",linkUrl:"",placement:"banner"}),l(!1),m.current&&(m.current.value="")}catch(M){clearTimeout(H),console.error("Upload error:",M),console.error("Error code:",M.code),console.error("Error message:",M.message),console.error("Full error:",JSON.stringify(M,null,2)),M.code==="storage/unauthorized"?alert("Upload failed: You do not have permission to upload ads. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):M.code==="storage/canceled"?alert("Upload was cancelled."):M.code==="permission-denied"?alert("Firestore permission denied: You do not have permission to save ad metadata. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):alert(`Failed to upload ad: ${M.code||"Unknown error"} - ${M.message||"Please try again."}`)}r(!1),i("")},w=async b=>{try{await vA(ze(Te,"promoAds",b.id),{active:!b.active})}catch(x){console.error("Toggle error:",x)}},C=async b=>{if(confirm("Delete this ad?"))try{if(b.storagePath){const x=ro(so,b.storagePath);await f2(x).catch(()=>{})}await Xd(ze(Te,"promoAds",b.id))}catch(x){console.error("Delete error:",x)}};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(Yf,{className:"w-5 h-5 text-orange-500"}),"Ad Manager"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload promotional ads and flyers for free users"})]}),A.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition",children:[A.jsx(zl,{className:"w-4 h-4"}),"New Ad"]})]}),o&&A.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4 border border-orange-200 dark:border-orange-800 space-y-3",children:[A.jsxs("div",{className:"grid gap-3",children:[A.jsx("input",{type:"text",placeholder:"Ad title (optional)",value:u.title,onChange:b=>h({...u,title:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"url",placeholder:"Link URL (optional) - where to go when clicked",value:u.linkUrl,onChange:b=>h({...u,linkUrl:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:u.placement,onChange:b=>h({...u,placement:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:_E.map(b=>A.jsx("option",{value:b.id,children:b.label},b.id))})]}),A.jsx("input",{ref:m,type:"file",accept:"image/*,video/mp4,video/webm",onChange:p,className:"hidden",id:"ad-upload"}),A.jsx("label",{htmlFor:"ad-upload",className:`flex flex-col items-center justify-center gap-2 px-4 py-4 border-2 border-dashed rounded-lg cursor-pointer transition ${n?"border-gray-300 bg-gray-50 cursor-not-allowed":"border-orange-300 hover:border-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/30"}`,children:n?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-5 h-5 animate-spin text-orange-500"}),A.jsx("span",{className:"text-orange-600",children:s||"Uploading..."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Yf,{className:"w-5 h-5 text-orange-500"}),A.jsx(o6,{className:"w-5 h-5 text-orange-500"})]}),A.jsx("span",{className:"text-orange-600 font-medium",children:"Click to upload image or video"}),A.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Images: max 5MB (1200x300 recommended) | Videos: max 10MB (MP4, WebM)"})]})})]}),t.length>0?A.jsx("div",{className:"space-y-3",children:t.map(b=>{var x;return A.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-lg border transition ${b.active?"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 opacity-60"}`,children:[b.mediaType==="video"?A.jsx("video",{src:b.imageUrl,className:"w-20 h-14 object-cover rounded",muted:!0}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Ad",className:"w-20 h-14 object-cover rounded"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:b.title||"Untitled Ad"}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((x=_E.find(U=>U.id===b.placement))==null?void 0:x.label)||b.placement,b.linkUrl&&"  Has link"]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>w(b),className:`p-2 rounded-lg transition ${b.active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:b.active?"Active - Click to disable":"Inactive - Click to enable",children:b.active?A.jsx(rU,{className:"w-5 h-5"}):A.jsx(nU,{className:"w-5 h-5"})}),b.linkUrl&&A.jsx("a",{href:b.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(x_,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>C(b),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(ti,{className:"w-4 h-4"})})]})]},b.id)})}):A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(Yf,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No ads uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload flyers and promotions to show to free users"})]})]})}const nu="carnival-planner-v1",x6=["djkrss1@gmail.com"],_6=rn(St);function B6(){const[t,e]=R.useState([]),[n,r]=R.useState(!0),[s,i]=R.useState(null),[o,l]=R.useState(""),[u,h]=R.useState(null),[m,p]=R.useState({total:0,premium:0,free:0}),[w,C]=R.useState(!1),[b,x]=R.useState(!1),[U,T]=R.useState(null),[E,N]=R.useState(!1),[O,H]=R.useState(!1),M=async J=>{if(confirm("Are you sure you want to delete this user? This cannot be undone."))try{await Hy(async()=>{const{deleteDoc:Y}=await Promise.resolve().then(()=>ZC);return{deleteDoc:Y}},void 0).then(({deleteDoc:Y})=>{Y(ze(Te,"users",J))}),e(Y=>Y.filter(oe=>oe.id!==J)),p(Y=>({...Y,total:Y.total-1,free:Y.free-1}))}catch(Y){console.error("Delete error:",Y),alert("Failed to delete user: "+Y.message)}},I=async J=>{try{const{deleteDoc:Y}=await Hy(async()=>{const{deleteDoc:Ae}=await Promise.resolve().then(()=>ZC);return{deleteDoc:Ae}},void 0);let oe=0;for(const Ae of J)await Y(ze(Te,"users",Ae)),oe++;e(Ae=>Ae.filter(z=>!J.includes(z.id))),p(Ae=>({...Ae,total:Ae.total-oe,free:Ae.free-oe})),alert(`Successfully deleted ${oe} users.`)}catch(Y){console.error("Batch delete error:",Y),alert("Batch delete failed partially: "+Y.message)}},B=async()=>{N(!0),T("Migrating users from Firebase Auth...");try{const Y=await Rt(_6,"migrateAuthUsers")({});T(Y.data.message),await Q()}catch(J){console.error("Auth migration error:",J),T(`Auth migration failed: ${J.message}`)}N(!1)},S=async()=>{var J,Y,oe,Ae,z,ae,ee,we,de,me,pe,he,ie,Qe,Xe,Ir;x(!0),T("Starting migration...");try{const Dt=new Map;let Gn=[];try{const wt=await Si(on(Te,"user-activity"));console.log("[Migration] Found",wt.size,"user-activity records"),Gn.push(`${wt.size} activity records`);for(const vt of wt.docs){const Ye=vt.data(),An=Ye.uid;if(An)if(!Dt.has(An))Dt.set(An,{createdAt:Ye.loginAt,lastLoginAt:Ye.loginAt,email:Ye.email||null,displayName:Ye.displayName||null});else{const xt=Dt.get(An);((Y=(J=Ye.loginAt)==null?void 0:J.toMillis)==null?void 0:Y.call(J))<((Ae=(oe=xt.createdAt)==null?void 0:oe.toMillis)==null?void 0:Ae.call(oe))&&(xt.createdAt=Ye.loginAt),((ae=(z=Ye.loginAt)==null?void 0:z.toMillis)==null?void 0:ae.call(z))>((we=(ee=xt.lastLoginAt)==null?void 0:ee.toMillis)==null?void 0:we.call(ee))&&(xt.lastLoginAt=Ye.loginAt),!xt.email&&Ye.email&&(xt.email=Ye.email),!xt.displayName&&Ye.displayName&&(xt.displayName=Ye.displayName)}}}catch(wt){console.log("[Migration] Could not fetch user-activity:",wt.message)}try{const wt=await Si(on(Te,"artifacts",nu,"users"));console.log("[Migration] Found",wt.size,"artifact users"),Gn.push(`${wt.size} artifact users`);for(const vt of wt.docs){const Ye=vt.id,An=vt.data();Dt.has(Ye)||Dt.set(Ye,{createdAt:An.createdAt||Ge.now(),lastLoginAt:An.lastLoginAt||Ge.now(),email:null,displayName:null})}}catch(wt){console.log("[Migration] Could not fetch artifacts:",wt.message)}T(`Found ${Dt.size} unique users (${Gn.join(", ")})...`);let Nn=0;for(const[wt,vt]of Dt)try{const Ye=ze(Te,"users",wt),An=await Bs(Ye);if(!An.exists())await Hn(Ye,vt),Nn++;else{const xt=An.data(),mn={};vt.createdAt&&(!xt.createdAt||((me=(de=vt.createdAt).toMillis)==null?void 0:me.call(de))<((he=(pe=xt.createdAt)==null?void 0:pe.toMillis)==null?void 0:he.call(pe)))&&(mn.createdAt=vt.createdAt),vt.lastLoginAt&&(!xt.lastLoginAt||((Qe=(ie=vt.lastLoginAt).toMillis)==null?void 0:Qe.call(ie))>((Ir=(Xe=xt.lastLoginAt)==null?void 0:Xe.toMillis)==null?void 0:Ir.call(Xe)))&&(mn.lastLoginAt=vt.lastLoginAt),!xt.email&&vt.email&&(mn.email=vt.email),!xt.displayName&&vt.displayName&&(mn.displayName=vt.displayName),Object.keys(mn).length>0&&(await Hn(Ye,mn,{merge:!0}),Nn++)}}catch(Ye){console.error(`Failed to migrate user ${wt}:`,Ye)}T(`Migration complete! Migrated ${Nn} users.`),await Q()}catch(Dt){console.error("Migration error:",Dt),T(`Migration failed: ${Dt.message}`)}x(!1)},Q=async()=>{var J,Y,oe,Ae,z;r(!0),i(null);try{console.log("[AdminAnalytics] Fetching users...");const ae=new Map;try{console.log("[AdminAnalytics] Attempting to fetch users collection...");const de=await Si(on(Te,"users"));console.log("[AdminAnalytics] SUCCESS: Found",de.size,"user documents in users collection"),de.docs.forEach(me=>console.log("[AdminAnalytics] User doc:",me.id,me.data()));for(const me of de.docs){const pe=me.id,he=me.data();ae.set(pe,{id:pe,createdAt:he.createdAt,lastLoginAt:he.lastLoginAt,profile:{email:he.email||null,displayName:he.displayName||null},source:"users"})}}catch(de){console.log("[AdminAnalytics] Could not fetch users collection:",de.message)}try{console.log("[AdminAnalytics] Attempting to fetch user-activity collection...");const de=await Si(on(Te,"user-activity"));console.log("[AdminAnalytics] SUCCESS: Found",de.size,"activity records");for(const me of de.docs){const pe=me.data(),he=pe.uid;if(he&&!ae.has(he))ae.set(he,{id:he,createdAt:pe.loginAt||null,lastLoginAt:pe.loginAt||null,profile:{email:pe.email||null,displayName:pe.displayName||null},source:"user-activity"});else if(he&&ae.has(he)){const ie=ae.get(he);pe.loginAt&&(!ie.lastLoginAt||((Y=(J=pe.loginAt).toMillis)==null?void 0:Y.call(J))>((Ae=(oe=ie.lastLoginAt).toMillis)==null?void 0:Ae.call(oe)))&&(ie.lastLoginAt=pe.loginAt),!ie.profile.email&&pe.email&&(ie.profile.email=pe.email)}}}catch(de){console.log("[AdminAnalytics] Could not fetch user-activity collection:",de.message)}try{console.log("[AdminAnalytics] Attempting to fetch artifacts collection...");const de=await Si(on(Te,"artifacts",nu,"users"));console.log("[AdminAnalytics] SUCCESS: Found",de.size,"users in artifacts collection");for(const me of de.docs){const pe=me.id;if(!ae.has(pe)){const he=me.data();ae.set(pe,{id:pe,createdAt:he.createdAt||null,lastLoginAt:he.lastLoginAt||null,profile:{email:null,displayName:null},source:"artifacts"})}}}catch(de){console.log("[AdminAnalytics] Could not fetch artifacts collection:",de.message)}const ee=[];for(const[de,me]of ae){try{const he=ze(Te,"users",de,"profile","info"),ie=await Bs(he);if(ie.exists()){const Qe=ie.data();me.profile={...me.profile,...Qe,email:Qe.email||me.profile.email,displayName:Qe.displayName||me.profile.displayName}}}catch{}me.isPremium=!1,me.carnivalCount=0;try{const he=ze(Te,"users",de,"apps",nu),ie=await Bs(he);if(ie.exists()){const Qe=ie.data();me.isPremium=!!Qe.premiumActive,Qe.selectedCarnivals&&(me.carnivalCount=Object.keys(Qe.selectedCarnivals).length)}}catch{try{const ie=ze(Te,"artifacts",nu,"users",de),Qe=await Bs(ie);if(Qe.exists()){const Xe=Qe.data();me.isPremium=!!Xe.premiumActive,Xe.selectedCarnivals&&(me.carnivalCount=Object.keys(Xe.selectedCarnivals).length)}}catch{}}const pe=((z=me.profile)==null?void 0:z.email)||"";pe&&x6.includes(pe.toLowerCase())&&(me.isPremium=!0,me.premiumOverride=!0),ee.push(me)}console.log("[AdminAnalytics] Total unique users found:",ee.length),ee.sort((de,me)=>{var ie,Qe,Xe,Ir;const pe=((Qe=(ie=de.createdAt)==null?void 0:ie.toDate)==null?void 0:Qe.call(ie))||new Date(0);return(((Ir=(Xe=me.createdAt)==null?void 0:Xe.toDate)==null?void 0:Ir.call(Xe))||new Date(0))-pe}),e(ee);const we=ee.filter(de=>de.isPremium).length;p({total:ee.length,premium:we,free:ee.length-we})}catch(ae){console.error("Error fetching users:",ae),i(ae.message||"Failed to fetch users")}r(!1)};R.useEffect(()=>{Q()},[]);const D=async()=>{C(!0),await Q(),C(!1)},K=async(J,Y,oe)=>{if(oe){alert("This user has premium via email override. Cannot toggle manually.");return}try{const Ae=ze(Te,"users",J,"apps",nu);await Hn(Ae,{premiumActive:!Y,premiumUpdatedAt:Ge.now(),premiumUpdatedBy:"admin-manual"},{merge:!0}),e(z=>z.map(ae=>ae.id===J?{...ae,isPremium:!Y}:ae)),p(z=>({...z,premium:Y?z.premium-1:z.premium+1,free:Y?z.free+1:z.free-1})),alert(`Premium ${Y?"disabled":"enabled"} for user.`)}catch(Ae){console.error("Error toggling premium:",Ae),alert("Failed to update premium status: "+Ae.message)}},j=t.filter(J=>{var z,ae;const Y=((z=J.profile)==null?void 0:z.email)||J.id,oe=((ae=J.profile)==null?void 0:ae.displayName)||"",Ae=o.toLowerCase();return Y.toLowerCase().includes(Ae)||oe.toLowerCase().includes(Ae)});return n?A.jsxs("div",{className:"flex items-center justify-center py-12",children:[A.jsx(Ct,{className:"w-8 h-8 animate-spin text-blue-500"}),A.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading user data..."})]}):s?A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:s}),A.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(nr,{className:"w-5 h-5 text-blue-500"}),"User Analytics"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View and manage registered users"})]}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[A.jsxs("button",{onClick:B,disabled:E,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition disabled:opacity-50",children:[E?A.jsx(Ct,{className:"w-4 h-4 animate-spin"}):A.jsx(nh,{className:"w-4 h-4"}),"Migrate Auth Users"]}),A.jsxs("button",{onClick:S,disabled:b,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:[b?A.jsx(Ct,{className:"w-4 h-4 animate-spin"}):A.jsx(nr,{className:"w-4 h-4"}),"Migrate Data"]}),A.jsxs("button",{onClick:()=>H(!O),className:`flex items-center gap-1 px-3 py-1.5 text-sm rounded-lg transition ${O?"bg-red-600 text-white hover:bg-red-700":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}`,children:[A.jsx(tU,{className:"w-4 h-4"}),O?"Close Cleanup":"Cleanup Tool"]}),A.jsxs("button",{onClick:D,disabled:w,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:[A.jsx(t6,{className:`w-4 h-4 ${w?"animate-spin":""}`}),"Refresh"]})]})]}),O&&A.jsx(y6,{users:t,onDeleteUser:M,onDeleteAll:I,onClose:()=>H(!1)}),U&&A.jsx("div",{className:`p-3 rounded-lg text-sm ${U.includes("failed")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:U}),A.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(nr,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Total Users"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.total})]}),A.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(tg,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Premium"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.premium})]}),A.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(nr,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Free"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.free})]})]}),A.jsxs("div",{className:"relative",children:[A.jsx(X2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search by email or name...",value:o,onChange:J=>l(J.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),A.jsx("div",{className:"space-y-2",children:j.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:o?"No users match your search":"No users found"}):j.map(J=>{var Y,oe,Ae,z;return A.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[A.jsxs("div",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600",onClick:()=>h(u===J.id?null:J.id),children:[(Y=J.profile)!=null&&Y.avatarUrl?A.jsx("img",{src:J.profile.avatarUrl,alt:"",className:"w-10 h-10 rounded-full object-cover"}):A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-500 flex items-center justify-center",children:A.jsx(nr,{className:"w-5 h-5 text-gray-400 dark:text-gray-300"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:((oe=J.profile)==null?void 0:oe.displayName)||"No name"}),J.isPremium&&A.jsxs("span",{className:`px-1.5 py-0.5 text-xs rounded-full flex items-center gap-1 ${J.premiumOverride?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:[A.jsx(tg,{className:"w-3 h-3"}),J.premiumOverride?"Admin":"Premium"]})]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:((Ae=J.profile)==null?void 0:Ae.email)||J.id})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[J.carnivalCount>0&&A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[A.jsx(Er,{className:"w-4 h-4"}),J.carnivalCount," carnival",J.carnivalCount!==1?"s":""]}),u===J.id?A.jsx(M3,{className:"w-5 h-5 text-gray-400"}):A.jsx(D3,{className:"w-5 h-5 text-gray-400"})]})]}),u===J.id&&A.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"User ID"}),A.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 truncate",children:J.id})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:((z=J.profile)==null?void 0:z.bio)||"No bio"})]})]}),A.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-600",children:[A.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Premium Status"}),A.jsx("button",{onClick:ae=>{ae.stopPropagation(),K(J.id,J.isPremium,J.premiumOverride)},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition ${J.isPremium?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:J.isPremium?A.jsxs(A.Fragment,{children:[A.jsx(rU,{className:"w-5 h-5"}),A.jsx("span",{children:"Premium Active"})]}):A.jsxs(A.Fragment,{children:[A.jsx(nU,{className:"w-5 h-5"}),A.jsx("span",{children:"Free User"})]})})]})]})]},J.id)})}),A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:["Showing ",j.length," of ",t.length," users"]})]})}const b6=[{name:"TRIBE Carnival",carnivalId:"trinidad",type:"mas",website:"https://tribecarnival.com",tags:["Premium","High Energy","Popular"]},{name:"The Lost Tribe",carnivalId:"trinidad",type:"mas",website:"https://losttribecarnival.com",tags:["Creative","Thematic","Premium"]},{name:"Bliss Carnival",carnivalId:"trinidad",type:"mas",website:"https://blisscarnival.com",tags:["Premium","Exclusive"]},{name:"YUMA Vibe",carnivalId:"trinidad",type:"mas",website:"https://yumavibe.com",tags:["Young","Energetic","Party"]},{name:"Harts Carnival",carnivalId:"trinidad",type:"mas",website:"https://hartscarnival.com",tags:["Traditional","Family","Fun"]},{name:"Pure Carnival",carnivalId:"trinidad",type:"mas",website:"https://pure.carnival-tribe.com",tags:["Fun","All Inclusive"]},{name:"Paparazzi Carnival",carnivalId:"trinidad",type:"mas",website:"https://paparazzicarnival.com",tags:["Thematic","Design"]},{name:"Ronnie and Caro",carnivalId:"trinidad",type:"mas",website:"https://ronnieandcaro.com",tags:["Big Band","Winner"]},{name:"K2K Alliance",carnivalId:"trinidad",type:"mas",website:"https://k2k-alliance.com",tags:["Artistic","Couture"]},{name:"Resonate Carnival",carnivalId:"trinidad",type:"mas",tags:["New","Vibes"]},{name:"Showtime Carnival",carnivalId:"trinidad",type:"mas",tags:["Affordable","Fun"]},{name:"Spirit Mas",carnivalId:"trinidad",type:"mas",tags:["Inaugural","Exciting"]},{name:"Exousia Mas",carnivalId:"trinidad",type:"mas",tags:["Small Band","Detailed"]},{name:"Just Wee and Friends",carnivalId:"trinidad",type:"mas",tags:["J'ouvert","Fun"]},{name:"Xodus Carnival",carnivalId:"jamaica",type:"mas",website:"https://xoduscarnival.com",tags:["Premium","Big Band"]},{name:"Bacchanal Jamaica",carnivalId:"jamaica",type:"mas",website:"https://bacchanaljamaica.com",tags:["Legacy","Big Band"]},{name:"Xaymaca International",carnivalId:"jamaica",type:"mas",website:"https://xaymacainternational.com",tags:["Premium","Vibes"]},{name:"Yardmas Carnival",carnivalId:"jamaica",type:"mas",website:"https://yardmas.com",tags:["New","Local"]},{name:"GenX Jamaica",carnivalId:"jamaica",type:"mas",website:"https://genxcarnival.com",tags:["Miami Link","Fun"]},{name:"Ocho Rios Carnival",carnivalId:"jamaica",type:"mas",tags:["North Coast","Holiday"]},{name:"GenX Carnival",carnivalId:"miami",type:"mas",website:"https://genx.carnival-tribe.com",tags:["Big Band","Winner"]},{name:"Ramajay Mas",carnivalId:"miami",type:"mas",website:"https://ramajaymas.com",tags:["Vibes","Party"]},{name:"Revel Nation",carnivalId:"miami",type:"mas",tags:["Premium","Service"]},{name:"One Island Band",carnivalId:"miami",type:"mas",website:"https://oneislandband.com",tags:["Big Band","Fun"]},{name:"Freaks Mas",carnivalId:"miami",type:"mas",website:"https://freaksmas.com",tags:["Energy","New York Link"]},{name:"Dingolay Mas",carnivalId:"miami",type:"mas",tags:["Vibrant","Fun"]},{name:"K-Paya",carnivalId:"miami",type:"mas",tags:["Party","Vibes"]},{name:"Savage Mas",carnivalId:"miami",type:"mas",tags:["Sexy","Fun"]},{name:"Euphoria Mas",carnivalId:"miami",type:"mas",tags:["Service","Quality"]},{name:"UCOM (United Colours of Mas)",carnivalId:"nottinghill",type:"mas",website:"https://unitedcoloursofmas.com",tags:["Modern","Premium"]},{name:"Chocolate Nation",carnivalId:"nottinghill",type:"mas",website:"https://chocolatenationmas.com",tags:["Vibes","Service"]},{name:"Mangrove Carnival",carnivalId:"nottinghill",type:"mas",tags:["Traditional","Community"]},{name:"Gemz Mas",carnivalId:"nottinghill",type:"mas",tags:["Sexy","Fun"]},{name:"Caribbean Sessions",carnivalId:"nottinghill",type:"mas",tags:["Party","Inclusive"]},{name:"Colours Carnival",carnivalId:"nottinghill",type:"mas",tags:["Colourful","Fun"]},{name:"Saldenah Carnival",carnivalId:"toronto",type:"mas",website:"https://saldenahcarnival.com",tags:["Legendary","Big Band","Winner"]},{name:"Carnival Nationz",carnivalId:"toronto",type:"mas",website:"https://carnivalnationz.com",tags:["Big Band","Vibes"]},{name:"Toronto Revellers",carnivalId:"toronto",type:"mas",website:"https://torontorevellers.com",tags:["Community","Fun"]},{name:"Tribal Carnival",carnivalId:"toronto",type:"mas",tags:["Culture","Mas"]},{name:"Venom Mas",carnivalId:"toronto",type:"mas",tags:["Sexy","Party"]},{name:"Fantazia",carnivalId:"toronto",type:"mas",tags:["Fun","Service"]},{name:"Krave The Band",carnivalId:"barbados",type:"mas",website:"https://kravetheband.com",tags:["Premium","Luxury"]},{name:"Aura Experience",carnivalId:"barbados",type:"mas",website:"https://auraexperience.com",tags:["Rihanna","Vibes"]},{name:"Zulu International",carnivalId:"barbados",type:"mas",tags:["Fun","Party"]},{name:"Baje International",carnivalId:"barbados",type:"mas",tags:["Legacy","Service"]},{name:"Erup The Band",carnivalId:"barbados",type:"mas",tags:["Energy","Soca"]},{name:"Oro Luxury Carnival",carnivalId:"grenada",type:"mas",tags:["Premium","Luxury"]},{name:"Xtravo",carnivalId:"grenada",type:"mas",tags:["Party","Vibes"]},{name:"Lavish The Band",carnivalId:"grenada",type:"mas",tags:["Service","Costumes"]},{name:"Legends Carnival",carnivalId:"stlucia",type:"mas",tags:["Big Band","Fun"]},{name:"Xuovo",carnivalId:"stlucia",type:"mas",tags:["Vibes","Party"]},{name:"Fuzion Mas",carnivalId:"stlucia",type:"mas",tags:["Premium","Service"]},{name:"Insane Carnival",carnivalId:"antigua",type:"mas",tags:["Fun","Party"]},{name:"Myst Carnival",carnivalId:"antigua",type:"mas",tags:["Sexy","Vibes"]},{name:"Seaduced",carnivalId:"antigua",type:"mas",tags:["Luxury","Premium"]},{name:"Madd Colors Carnival",carnivalId:"atlanta",type:"mas",website:"https://maddcolorscarnival.com/",tags:["Premium","#1 Band"]},{name:"We Kinda Ting",carnivalId:"atlanta",type:"mas",tags:["Fun","Local"]},{name:"Savage Mas",carnivalId:"atlanta",type:"mas",tags:["Sexy","Vibes"]},{name:"Panache",carnivalId:"atlanta",type:"mas",tags:["Service","Costumes"]}];function C6({carnivalId:t}){const[e,n]=R.useState(""),[r,s]=R.useState("all"),i=R.useMemo(()=>b6.filter(l=>{if(t&&l.carnivalId!==t)return!1;const u=e.toLowerCase(),h=l.name.toLowerCase().includes(u)||l.tags.some(p=>p.toLowerCase().includes(u)),m=r==="all"||l.type===r;return h&&m}),[t,e,r]),o=l=>{switch(l){case"trinidad":return"Trinidad";case"jamaica":return"Jamaica";case"miami":return"Miami";case"nottinghill":return"London";case"toronto":return"Toronto";case"barbados":return"Barbados";case"grenada":return"Grenada";case"antigua":return"Antigua";case"stlucia":return"St. Lucia";case"atlanta":return"Atlanta";default:return l}};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:A.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[A.jsx(pE,{className:"w-5 h-5 text-purple-500"}),"Costume Bands"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Find your perfect fit for ",t?o(t):"Carnival"]})]}),A.jsxs("div",{className:"relative w-full md:w-64",children:[A.jsx(X2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search bands...",value:e,onChange:l=>n(l.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 transition"})]})]})}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((l,u)=>A.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-300 hover:border-purple-300 dark:hover:border-purple-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:l.name}),!t&&A.jsxs("span",{className:"text-xs font-medium text-gray-500 flex items-center gap-1 mt-1",children:[A.jsx(Er,{className:"w-3 h-3"}),o(l.carnivalId)]})]}),l.website&&A.jsx("a",{href:l.website,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-full hover:bg-purple-100 hover:text-purple-600 dark:hover:bg-purple-900/40 dark:hover:text-purple-400 transition",children:A.jsx(x_,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:l.tags.map((h,m)=>A.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-300 rounded-md",children:h},m))})]},u))}),i.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(pE,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),A.jsx("p",{children:"No bands found matching your search."})]})]})}function E6({onGetStarted:t,logo:e,onTryDemo:n}){const[r,s]=R.useState(0),[i,o]=R.useState({x:0,y:0});return R.useEffect(()=>{const l=()=>s(window.scrollY),u=h=>o({x:h.clientX,y:h.clientY});return window.addEventListener("scroll",l),window.addEventListener("mousemove",u),()=>{window.removeEventListener("scroll",l),window.removeEventListener("mousemove",u)}},[]),A.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden selection:bg-pink-500 selection:text-white font-sans",children:[A.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[A.jsx("div",{className:"absolute w-[800px] h-[800px] bg-indigo-600/20 rounded-full blur-[120px] mix-blend-screen transition-transform duration-100 ease-out",style:{top:-200,left:-200,transform:`translate(${i.x*.02}px, ${i.y*.02}px)`}}),A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-pink-600/20 rounded-full blur-[100px] mix-blend-screen transition-transform duration-100 ease-out",style:{bottom:-100,right:-100,transform:`translate(${i.x*-.03}px, ${i.y*-.03}px)`}})]}),A.jsx("nav",{className:"fixed top-0 w-full z-50 px-6 py-4 backdrop-blur-md border-b border-white/5 bg-black/50",children:A.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-pink-500 to-indigo-600 flex items-center justify-center font-bold text-sm",children:"CP"}),A.jsx("span",{className:"font-bold tracking-tight text-white/90",children:"Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-sm font-semibold transition-all",children:"Log In"})]})}),A.jsxs("section",{className:"relative z-10 pt-40 pb-20 px-6 max-w-7xl mx-auto flex flex-col items-center text-center",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm mb-8 animate-fadeIn",children:[A.jsxs("span",{className:"relative flex h-2 w-2",children:[A.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),A.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),A.jsx("span",{className:"text-xs font-medium text-gray-400 tracking-wide uppercase",children:"V2.0 Now Live"})]}),A.jsxs("h1",{className:"text-6xl md:text-8xl font-black tracking-tighter mb-8 bg-clip-text text-transparent bg-gradient-to-b from-white via-white to-gray-500 leading-tight",children:["The Operating System",A.jsx("br",{}),A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500",children:"For Carnival."})]}),A.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mb-12 leading-relaxed",children:"The all-in-one workspace for your next carnival. Budget, schedule, squad sync, and ticketing  seamlessly integrated."}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[A.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-white text-black rounded-full font-bold text-lg shadow-[0_0_40px_-10px_rgba(255,255,255,0.3)] hover:shadow-[0_0_60px_-10px_rgba(255,255,255,0.5)] transition-all transform hover:scale-105",children:["Start Planning For Free",A.jsx(Jf,{className:"inline-block ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),A.jsx("button",{onClick:n,className:"px-8 py-4 bg-white/10 hover:bg-white/20 border border-white/10 text-white rounded-full font-bold text-lg backdrop-blur-sm transition-all transform hover:scale-105",children:"Try Live Demo"})]}),A.jsxs("div",{className:"mt-20 relative w-full max-w-5xl aspect-[16/9] bg-gray-900/50 rounded-xl border border-white/10 backdrop-blur-sm overflow-hidden shadow-2xl group",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"}),A.jsxs("div",{className:"absolute top-4 left-4 right-4 h-4 flex gap-2",children:[A.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]}),A.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:A.jsxs("div",{className:"text-center space-y-4",children:[A.jsx("div",{className:"inline-block p-4 rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 shadow-xl mb-4 group-hover:scale-110 transition-transform duration-500",children:A.jsx(Td,{className:"w-12 h-12 text-white"})}),A.jsx("div",{className:"text-2xl font-bold text-white/50",children:"Mission Control"})]})})]})]}),A.jsx("div",{className:"w-full bg-white/5 border-y border-white/5 py-4 overflow-hidden relative z-10 backdrop-blur-sm",children:A.jsxs("div",{className:"flex animate-marquee whitespace-nowrap gap-12 text-sm font-medium text-gray-400 uppercase tracking-widest",children:[A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"}),A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"})]})}),A.jsxs("section",{className:"relative z-10 py-32 px-6 max-w-7xl mx-auto",children:[A.jsx("div",{className:"mb-16",children:A.jsxs("h2",{className:"text-4xl md:text-5xl font-black mb-6",children:["Everything you need.",A.jsx("br",{}),"Nothing you don't."]})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]",children:[A.jsxs("div",{className:"md:col-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col justify-between",children:[A.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-20 group-hover:opacity-40 transition-opacity",children:A.jsx(nr,{className:"w-48 h-48 text-indigo-500 transform rotate-12 translate-x-12 -translate-y-12"})}),A.jsxs("div",{children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center mb-4 text-indigo-400",children:A.jsx(nr,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Squad Sync"}),A.jsx("p",{className:"text-gray-400 max-w-sm",children:"Real-time collaboration. See when your friends add events, update budgets, or get road ready."})]}),A.jsxs("div",{className:"flex -space-x-4 mt-8",children:[[1,2,3,4].map(l=>A.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-gray-500 transform transition-transform group-hover:translate-x-2",style:{transitionDelay:`${l*50}ms`},children:"User"},l)),A.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-600 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-white z-10",children:"+3"})]})]}),A.jsxs("div",{className:"md:row-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center mb-4 text-green-400",children:A.jsx(dp,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Smart Budget"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Track every costume payment, fete ticket, and flight."}),A.jsxs("div",{className:"mt-auto space-y-4",children:[A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Costume Deposit"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$300"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-3/4 h-full rounded-full"})})]}),A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Flight (MIA  POS)"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$850"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-full h-full rounded-full"})})]})]})]}),A.jsxs("div",{className:"relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"}),A.jsx("div",{className:"absolute inset-0 opacity-30 grayscale group-hover:grayscale-0 transition-all duration-700",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0)",backgroundSize:"24px 24px"}}),A.jsxs("div",{className:"relative z-20 h-full flex flex-col justify-end",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center mb-4 text-purple-400",children:A.jsx(W3,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Live Map"}),A.jsx("p",{className:"text-gray-400",children:"Discover events near your AirBnb."})]})]}),A.jsxs("div",{className:"col-span-1 md:col-span-2 relative group overflow-hidden rounded-3xl bg-gradient-to-br from-teal-900 to-gray-900 border border-white/10 hover:border-teal-500/30 transition-all p-8 flex items-center justify-between",children:[A.jsxs("div",{className:"max-w-xs",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-500/20 flex items-center justify-center mb-4 text-teal-400",children:A.jsx(up,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Soca Passport"}),A.jsx("p",{className:"text-gray-400",children:"Your digital carnival identity. Syncs seamlessly with the Soca Passport app."})]}),A.jsxs("div",{className:"hidden sm:block relative w-64 h-40 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 shadow-2xl transform rotate-3 group-hover:rotate-0 transition-transform duration-500",children:[A.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 rounded-full bg-teal-500"}),A.jsx("div",{className:"absolute top-4 right-4 text-[10px] font-mono opacity-50",children:"9438-2910"}),A.jsx("div",{className:"absolute bottom-4 left-4 text-xs font-bold",children:"FEBUARY 2026"})]})]})]})]}),A.jsxs("section",{className:"relative z-10 py-32 text-center px-6",children:[A.jsx("h2",{className:"text-5xl md:text-7xl font-black mb-8",children:"Ready to jump?"}),A.jsx("button",{onClick:t,className:"px-10 py-5 bg-white text-black rounded-full font-bold text-xl hover:scale-105 transition-transform shadow-2xl",children:"Get Started Now"}),A.jsxs("div",{className:"mt-16 text-sm text-gray-500 flex flex-col md:flex-row items-center justify-center gap-8",children:[A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(B_,{className:"w-4 h-4"})," Global Support"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(rh,{className:"w-4 h-4"})," Secure Data"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(CA,{className:"w-4 h-4"})," Vibes Included"]})]})]}),A.jsx("div",{className:"w-full border-t border-white/10 p-8 text-center text-gray-600 text-sm",children:" 2026 Carnival Planner. Built for the culture."})]})}const Na="Carnival Planner",yr="support@carnival-planner.com",hp="December 12, 2025";function I6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Privacy Policy",icon:rh,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(Ke,{title:"1. Introduction",children:A.jsxs("p",{children:[Na,' ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application and website (collectively, the "Service").']})}),A.jsxs(Ke,{title:"2. Information We Collect",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Personal Information"}),A.jsx("p",{className:"mb-4",children:"When you sign in with Google, we collect:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Email address"}),A.jsx("li",{children:"Display name"}),A.jsx("li",{children:"Profile picture URL"}),A.jsx("li",{children:"Google account unique identifier"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 User-Generated Content"}),A.jsx("p",{className:"mb-4",children:"Information you voluntarily provide includes:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Carnival planning data (budgets, schedules, packing lists)"}),A.jsx("li",{children:"Costume and band information"}),A.jsx("li",{children:"Squad member names and coordination data"}),A.jsx("li",{children:"Uploaded media files (tickets, photos, documents)"}),A.jsx("li",{children:"Map pins and location notes"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Payment Information"}),A.jsx("p",{children:"For premium subscriptions, payment processing is handled securely by Stripe. We do not store your credit card numbers. We receive only transaction confirmation, subscription status, and billing email from Stripe."})]}),A.jsx(Ke,{title:"3. How We Use Your Information",children:A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsx("li",{children:"To provide and maintain the Service"}),A.jsx("li",{children:"To authenticate your identity via Google Sign-In"}),A.jsx("li",{children:"To process premium subscription payments via Stripe"}),A.jsx("li",{children:"To sync your carnival planning data across devices"}),A.jsx("li",{children:"To send push notifications for squad alerts (if enabled)"}),A.jsx("li",{children:"To improve and optimize our Service"}),A.jsx("li",{children:"To respond to your inquiries and support requests"})]})}),A.jsxs(Ke,{title:"4. Data Storage and Security",children:[A.jsx("p",{className:"mb-4",children:"Your data is stored using Firebase services provided by Google:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Manages secure sign-in"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Cloud Firestore:"})," Stores your planning data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Storage:"})," Stores uploaded media files"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Cloud Messaging:"})," Delivers push notifications"]})]}),A.jsx("p",{children:"We implement industry-standard security measures including encryption in transit (TLS) and at rest. Firebase services are SOC 2 and ISO 27001 certified."})]}),A.jsxs(Ke,{title:"5. Third-Party Services",children:[A.jsx("p",{className:"mb-4",children:"We use the following third-party services:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Google (Firebase):"})," Authentication, database, storage, and hosting. ",A.jsx("a",{href:"https://firebase.google.com/support/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Firebase Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing. ",A.jsx("a",{href:"https://stripe.com/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Stripe Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"OpenStreetMap:"})," Map tiles for the Fete Map feature. ",A.jsx("a",{href:"https://wiki.osmfoundation.org/wiki/Privacy_Policy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"OSM Privacy Policy"})]})]})]}),A.jsxs(Ke,{title:"6. Your Rights (GDPR/CCPA)",children:[A.jsx("p",{className:"mb-4",children:"Depending on your location, you may have the following rights:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Rectification:"})," Correct inaccurate personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Erasure:"})," Request deletion of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Portability:"})," Receive your data in a portable format"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Opt-out:"})," Opt out of certain data processing"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Non-discrimination:"})," We will not discriminate against you for exercising your rights"]})]}),A.jsxs("p",{className:"mt-4",children:["To exercise these rights, contact us at ",A.jsx("a",{href:`mailto:${yr}`,className:"text-pink-400 hover:underline",children:yr}),"."]})]}),A.jsx(Ke,{title:"7. Data Retention",children:A.jsx("p",{children:"We retain your personal data for as long as your account is active. If you delete your account, we will delete your data within 30 days, except where we are legally required to retain it."})}),A.jsx(Ke,{title:"8. Children's Privacy",children:A.jsx("p",{children:"Our Service is not intended for children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected such information, please contact us immediately."})}),A.jsx(Ke,{title:"9. Changes to This Policy",children:A.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'})}),A.jsxs(Ke,{title:"10. Contact Us",children:[A.jsx("p",{children:"If you have questions about this Privacy Policy, please contact us at:"}),A.jsx("p",{className:"mt-2",children:A.jsx("a",{href:`mailto:${yr}`,className:"text-pink-400 hover:underline",children:yr})})]})]})}function T6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Terms of Service",icon:K3,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(Ke,{title:"1. Acceptance of Terms",children:A.jsxs("p",{children:["By accessing or using ",Na,' ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.']})}),A.jsx(Ke,{title:"2. Description of Service",children:A.jsxs("p",{children:[Na," is a Progressive Web App that helps users plan and organize Caribbean carnival events. The Service includes free features (budget planning, scheduling, squad coordination) and premium subscription features (interactive maps, media vault, offline mode)."]})}),A.jsxs(Ke,{title:"3. User Accounts",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Registration"}),A.jsx("p",{className:"mb-4",children:"You must sign in with a valid Google account to use the Service. You are responsible for maintaining the security of your account."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Account Responsibilities"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"You must provide accurate information"}),A.jsx("li",{children:"You are responsible for all activities under your account"}),A.jsx("li",{children:"You must notify us immediately of any unauthorized use"})]})]}),A.jsxs(Ke,{title:"4. Premium Subscriptions",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.1 Subscription Plans"}),A.jsx("p",{className:"mb-4",children:"We offer monthly ($4.99/month) and yearly ($39.99/year) subscription plans. Prices are subject to change with reasonable notice."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.2 Billing"}),A.jsx("p",{className:"mb-4",children:"Subscriptions are billed in advance on a recurring basis. Payment is processed through Stripe. Your subscription will automatically renew unless you cancel before the renewal date."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.3 Cancellation"}),A.jsx("p",{children:"You may cancel your subscription at any time. You will continue to have access to premium features until the end of your current billing period. See our Refund Policy for details."})]}),A.jsxs(Ke,{title:"5. User Content",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.1 Your Content"}),A.jsx("p",{className:"mb-4",children:"You retain ownership of all content you upload to the Service (schedules, media, notes). By uploading content, you grant us a limited license to store, display, and process it to provide the Service."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.2 Content Restrictions"}),A.jsx("p",{className:"mb-2",children:"You agree not to upload content that:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Is illegal, harmful, or offensive"}),A.jsx("li",{children:"Infringes on intellectual property rights"}),A.jsx("li",{children:"Contains malware or malicious code"}),A.jsx("li",{children:"Violates others' privacy"})]})]}),A.jsxs(Ke,{title:"6. Acceptable Use",children:[A.jsx("p",{className:"mb-2",children:"You agree not to:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Use the Service for any unlawful purpose"}),A.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),A.jsx("li",{children:"Interfere with or disrupt the Service"}),A.jsx("li",{children:"Reverse engineer or decompile the Service"}),A.jsx("li",{children:"Use automated systems to access the Service without permission"})]})]}),A.jsx(Ke,{title:"7. Intellectual Property",children:A.jsxs("p",{children:["The Service, including its design, features, and content (excluding user content), is owned by ",Na," and protected by intellectual property laws. You may not copy, modify, or distribute our intellectual property without permission."]})}),A.jsx(Ke,{title:"8. Disclaimer of Warranties",children:A.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE. YOUR USE OF THE SERVICE IS AT YOUR OWN RISK.'})}),A.jsx(Ke,{title:"9. Limitation of Liability",children:A.jsxs("p",{children:["TO THE MAXIMUM EXTENT PERMITTED BY LAW, ",Na.toUpperCase()," SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE, EVEN IF WE HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."]})}),A.jsx(Ke,{title:"10. Termination",children:A.jsx("p",{children:"We may terminate or suspend your account at any time for violation of these Terms. You may delete your account at any time. Upon termination, your right to use the Service will immediately cease."})}),A.jsx(Ke,{title:"11. Governing Law",children:A.jsxs("p",{children:["These Terms shall be governed by the laws of the jurisdiction in which ",Na," operates, without regard to conflict of law principles."]})}),A.jsx(Ke,{title:"12. Changes to Terms",children:A.jsx("p",{children:"We may modify these Terms at any time. We will notify you of significant changes via email or in-app notification. Continued use of the Service after changes constitutes acceptance of the new Terms."})}),A.jsx(Ke,{title:"13. Contact",children:A.jsxs("p",{children:["For questions about these Terms, contact us at ",A.jsx("a",{href:`mailto:${yr}`,className:"text-pink-400 hover:underline",children:yr}),"."]})})]})}function k6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Cookie Policy",icon:O3,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(Ke,{title:"1. What Are Cookies",children:A.jsx("p",{children:"Cookies are small text files stored on your device when you visit a website. They help websites remember your preferences and improve your experience."})}),A.jsxs(Ke,{title:"2. How We Use Cookies",children:[A.jsxs("p",{className:"mb-4",children:[Na," uses cookies and similar technologies for the following purposes:"]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Essential Cookies (Required)"}),A.jsx("p",{className:"mb-4",children:"These cookies are necessary for the Service to function and cannot be disabled:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Maintains your signed-in session securely"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Session Management:"})," Remembers your authentication state"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Functional Cookies"}),A.jsx("p",{className:"mb-4",children:"These cookies enhance your experience:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Preferences:"})," Remembers your dark mode setting"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Local Storage:"})," Caches carnival data for offline access (Premium feature)"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Third-Party Cookies"}),A.jsx("p",{className:"mb-2",children:"Our third-party services may set their own cookies:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase/Google:"})," Authentication and analytics"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing security"]})]})]}),A.jsx(Ke,{title:"3. Cookie Details",children:A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left text-sm mb-4",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b border-gray-700",children:[A.jsx("th",{className:"py-2 pr-4",children:"Cookie Name"}),A.jsx("th",{className:"py-2 pr-4",children:"Purpose"}),A.jsx("th",{className:"py-2 pr-4",children:"Duration"}),A.jsx("th",{className:"py-2",children:"Type"})]})}),A.jsxs("tbody",{className:"text-gray-400",children:[A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"firebase-auth"}),A.jsx("td",{className:"py-2 pr-4",children:"User authentication"}),A.jsx("td",{className:"py-2 pr-4",children:"Session"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"__stripe_mid"}),A.jsx("td",{className:"py-2 pr-4",children:"Fraud prevention"}),A.jsx("td",{className:"py-2 pr-4",children:"1 year"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"darkMode"}),A.jsx("td",{className:"py-2 pr-4",children:"Theme preference"}),A.jsx("td",{className:"py-2 pr-4",children:"Persistent"}),A.jsx("td",{className:"py-2",children:"Functional"})]})]})]})})}),A.jsxs(Ke,{title:"4. Local Storage",children:[A.jsx("p",{className:"mb-4",children:"In addition to cookies, we use browser local storage for:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Caching carnival data for offline access (Premium)"}),A.jsx("li",{children:"Storing FCM tokens for push notifications"}),A.jsx("li",{children:"Temporary UI state"})]})]}),A.jsxs(Ke,{title:"5. Managing Cookies",children:[A.jsx("p",{className:"mb-4",children:"You can manage cookies through your browser settings:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Chrome:"})," Settings  Privacy and security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firefox:"})," Settings  Privacy & Security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Safari:"})," Preferences  Privacy  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Edge:"})," Settings  Cookies and site permissions"]})]}),A.jsx("p",{className:"mt-4 text-yellow-400",children:"Note: Disabling essential cookies may prevent you from using the Service."})]}),A.jsx(Ke,{title:"6. Updates to This Policy",children:A.jsx("p",{children:"We may update this Cookie Policy to reflect changes in our practices or for legal reasons. Check this page periodically for updates."})}),A.jsx(Ke,{title:"7. Contact",children:A.jsxs("p",{children:["For questions about our use of cookies, contact us at ",A.jsx("a",{href:`mailto:${yr}`,className:"text-pink-400 hover:underline",children:yr}),"."]})})]})}function S6({onBack:t,logo:e}){return A.jsxs(fp,{title:"Refund Policy",icon:up,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",hp]}),A.jsx(Ke,{title:"1. Premium Subscription",children:A.jsxs("p",{children:[Na," offers premium subscriptions at $4.99/month or $39.99/year. This policy explains our refund terms for these subscriptions."]})}),A.jsxs(Ke,{title:"2. Subscription Cancellation",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 How to Cancel"}),A.jsx("p",{className:"mb-4",children:"You can cancel your subscription at any time by:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:["Contacting us at ",A.jsx("a",{href:`mailto:${yr}`,className:"text-pink-400 hover:underline",children:yr})]}),A.jsx("li",{children:"Managing your subscription through Stripe's customer portal (link provided in your confirmation email)"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Effect of Cancellation"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Your premium access continues until the end of your current billing period"}),A.jsx("li",{children:"You will not be charged again after cancellation"}),A.jsx("li",{children:"No partial refunds are provided for unused time in the current billing period"})]})]}),A.jsxs(Ke,{title:"3. Refund Eligibility",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Eligible for Refund"}),A.jsx("p",{className:"mb-2",children:"We offer refunds in the following situations:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Technical Issues:"})," If the Service was unavailable or significantly impaired for an extended period"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Accidental Purchase:"})," If you accidentally subscribed and request a refund within 48 hours, without using premium features"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Duplicate Charges:"})," If you were charged multiple times for the same subscription period"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Not Eligible for Refund"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Change of mind after using premium features"}),A.jsx("li",{children:"Requests made after 30 days from the charge date"}),A.jsx("li",{children:"Failure to cancel before renewal (you must cancel before renewal to avoid charges)"}),A.jsx("li",{children:"Issues caused by your device, browser, or internet connection"})]})]}),A.jsxs(Ke,{title:"4. How to Request a Refund",children:[A.jsx("p",{className:"mb-4",children:"To request a refund:"}),A.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[A.jsxs("li",{children:["Email us at ",A.jsx("a",{href:`mailto:${yr}`,className:"text-pink-400 hover:underline",children:yr})]}),A.jsx("li",{children:"Include your account email and the date of the charge"}),A.jsx("li",{children:"Explain the reason for your refund request"})]}),A.jsx("p",{className:"mt-4",children:"We will review your request and respond within 5 business days."})]}),A.jsxs(Ke,{title:"5. Refund Processing",children:[A.jsx("p",{className:"mb-4",children:"If your refund is approved:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Refunds are processed through Stripe to your original payment method"}),A.jsx("li",{children:"Allow 5-10 business days for the refund to appear on your statement"}),A.jsx("li",{children:"Your premium access will be revoked upon refund"})]})]}),A.jsx(Ke,{title:"6. Free Trial",children:A.jsx("p",{children:"We do not currently offer free trials. All core features are free to use. Premium features require a paid subscription."})}),A.jsx(Ke,{title:"7. Price Changes",children:A.jsx("p",{children:"If we increase subscription prices, existing subscribers will be notified at least 30 days in advance. You may cancel before the new price takes effect to avoid being charged at the higher rate."})}),A.jsx(Ke,{title:"8. Contact",children:A.jsxs("p",{children:["For refund requests or questions about this policy, contact us at ",A.jsx("a",{href:`mailto:${yr}`,className:"text-pink-400 hover:underline",children:yr}),"."]})})]})}function fp({title:t,icon:e,onBack:n,logo:r,children:s}){return A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(y_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r&&A.jsx("img",{src:r,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(e,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:t})]})]}),A.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:s}),A.jsx("footer",{className:"mt-12 text-center text-gray-500 text-sm",children:A.jsx("p",{children:"Carnival Planner - Plan your Mas. Track your Fetes. Coordinate your Squad."})})]})]})}function Ke({title:t,children:e}){return A.jsxs("div",{className:"mb-8",children:[A.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:t}),A.jsx("div",{className:"text-gray-300 leading-relaxed",children:e})]})}function N6(){const[t,e]=R.useState(null),[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,l]=R.useState(!1);R.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const m=localStorage.getItem("pwa-install-dismissed");m&&(Date.now()-parseInt(m))/864e5<7&&l(!0);const p=C=>{C.preventDefault(),e(C),o||r(!0)},w=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",w),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",w)}},[o]);const u=async()=>{if(!t)return;t.prompt();const{outcome:m}=await t.userChoice;m==="accepted"&&i(!0),e(null),r(!1)},h=()=>{r(!1),l(!0),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return!n||s?null:A.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 animate-slideUp md:left-auto md:right-4 md:max-w-sm safe-bottom",children:A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-2xl p-4 text-white",children:[A.jsx("button",{onClick:h,className:"absolute top-2 right-2 p-1 hover:bg-white/20 rounded-full transition-colors",children:A.jsx(ls,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx(i6,{className:"w-6 h-6"})}),A.jsxs("div",{className:"flex-1 pr-6",children:[A.jsx("h3",{className:"font-bold text-lg mb-1",children:"Add to Home Screen"}),A.jsx("p",{className:"text-white/80 text-sm mb-3",children:"Install Carnival Planner for quick access and offline use!"}),A.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-colors",children:[A.jsx(nh,{className:"w-4 h-4"}),"Install App"]})]})]})]})})}function U6({onBack:t,logo:e,user:n}){const[r,s]=R.useState(""),[i,o]=R.useState(""),[l,u]=R.useState((n==null?void 0:n.email)||""),[h,m]=R.useState(!1),[p,w]=R.useState(!1),[C,b]=R.useState(""),x=async U=>{if(U.preventDefault(),!i.trim()||!l.trim()){b("Please fill in all required fields");return}m(!0),b("");try{await uc(on(Te,"support-requests"),{email:l.trim(),subject:r.trim()||"General Inquiry",message:i.trim(),userId:(n==null?void 0:n.uid)||null,userName:(n==null?void 0:n.displayName)||null,status:"new",createdAt:Ge.now()}),w(!0),s(""),o("")}catch(T){console.error("Error submitting support request:",T),b("Failed to send message. Please try again.")}finally{m(!1)}};return p?A.jsx("div",{className:"min-h-screen bg-slate-950 text-white flex items-center justify-center p-6",children:A.jsxs("div",{className:"text-center max-w-md",children:[A.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx(j3,{className:"w-10 h-10 text-green-400"})}),A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Message Sent!"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Thank you for reaching out. We'll get back to you as soon as possible."}),A.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold hover:opacity-90 transition-opacity",children:"Back to App"})]})}):A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-2xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(y_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e&&A.jsx("img",{src:e,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(C_,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Contact Support"})]})]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:[A.jsx("p",{className:"text-gray-400 mb-6",children:"Have a question, feedback, or need help? Send us a message and we'll get back to you as soon as possible."}),A.jsxs("form",{onSubmit:x,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address *"}),A.jsxs("div",{className:"relative",children:[A.jsx(b_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:l,onChange:U=>u(U.target.value),placeholder:"your@email.com",required:!0,className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Subject"}),A.jsxs("select",{value:r,onChange:U=>s(U.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-pink-500 transition-colors",children:[A.jsx("option",{value:"",className:"bg-gray-900",children:"Select a topic..."}),A.jsx("option",{value:"General Question",className:"bg-gray-900",children:"General Question"}),A.jsx("option",{value:"Premium Subscription",className:"bg-gray-900",children:"Premium Subscription"}),A.jsx("option",{value:"Technical Issue",className:"bg-gray-900",children:"Technical Issue"}),A.jsx("option",{value:"Feature Request",className:"bg-gray-900",children:"Feature Request"}),A.jsx("option",{value:"Refund Request",className:"bg-gray-900",children:"Refund Request"}),A.jsx("option",{value:"Account Issue",className:"bg-gray-900",children:"Account Issue"}),A.jsx("option",{value:"Other",className:"bg-gray-900",children:"Other"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message *"}),A.jsx("textarea",{value:i,onChange:U=>o(U.target.value),placeholder:"How can we help you?",required:!0,rows:6,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors resize-none"})]}),C&&A.jsx("p",{className:"text-red-400 text-sm",children:C}),A.jsx("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold text-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:h?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Y2,{className:"w-5 h-5"}),"Send Message"]})})]})]}),A.jsxs("p",{className:"text-gray-500 text-sm text-center mt-8",children:["You can also email us directly at"," ",A.jsx("a",{href:"mailto:support@carnival-planner.com",className:"text-pink-400 hover:underline",children:"support@carnival-planner.com"})]})]})]})}function F6(){const[t,e]=R.useState([]),[n,r]=R.useState(!0),[s,i]=R.useState(null);R.useEffect(()=>{const l=QA(on(Te,"support-requests"),qx("createdAt","desc")),u=Gs(l,h=>{const m=h.docs.map(p=>({id:p.id,...p.data()}));e(m),r(!1),i(null)},h=>{console.error("SupportAdmin query failed:",h),i(h.message),r(!1)});return()=>u()},[]);const o=async l=>{confirm("Delete this support request?")&&await Xd(ze(Te,"support-requests",l))};return n?A.jsx("div",{className:"text-center py-8 text-gray-500",children:A.jsx(Ct,{className:"w-6 h-6 animate-spin mx-auto"})}):s?A.jsxs("div",{className:"p-8 text-center bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:[A.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load support requests: ",s]}),A.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This may require a Firestore index. Check the console."})]}):A.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h3",{className:"font-bold text-lg mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(C_,{className:"w-5 h-5"}),"Support Requests (",t.length,")"]}),t.length===0?A.jsx("p",{className:"text-gray-500 text-center py-4",children:"No support requests yet"}):A.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.map(l=>{var u,h;return A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:l.email}),A.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),A.jsx("span",{className:"text-sm text-gray-500",children:l.subject||"General"})]}),A.jsx("button",{onClick:()=>o(l.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:A.jsx(ti,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm whitespace-pre-wrap",children:l.message}),A.jsx("p",{className:"text-xs text-gray-400 mt-2",children:((h=(u=l.createdAt)==null?void 0:u.toDate)==null?void 0:h.call(u).toLocaleString())||"Unknown date"})]},l.id)})})]})}function Q6({user:t,onClose:e}){const[n,r]=R.useState(!1),[s,i]=R.useState(""),[o,l]=R.useState(!1),[u,h]=R.useState(""),[m,p]=R.useState({displayName:"",bio:"",avatarUrl:""}),[w,C]=R.useState(!1),[b,x]=R.useState(!1),[U,T]=R.useState(!1),[E,N]=R.useState(""),O=R.useRef(null);R.useEffect(()=>{if(!t)return;(async()=>{try{const S=ze(Te,"users",t.uid,"profile","info"),Q=await Bs(S);if(Q.exists()){const D=Q.data();p({displayName:D.displayName||t.displayName||"",bio:D.bio||"",avatarUrl:D.avatarUrl||t.photoURL||""})}else p({displayName:t.displayName||"",bio:"",avatarUrl:t.photoURL||""})}catch(S){console.log("Could not load profile:",S)}})()},[t]);const H=async()=>{if(t){x(!0),h("");try{const B=ze(Te,"users",t.uid,"profile","info");await Hn(B,{displayName:m.displayName,bio:m.bio,avatarUrl:m.avatarUrl,updatedAt:Ge.now()},{merge:!0}),C(!1),N("Profile saved!"),setTimeout(()=>N(""),3e3)}catch(B){console.error("Error saving profile:",B),h("Could not save profile. Please try again.")}finally{x(!1)}}},M=async B=>{const S=B.target.files[0];if(!S||!t)return;if(S.size>2*1024*1024){h("Image too large. Max 2MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(S.type)){h("Please upload a JPG, PNG, GIF, or WebP image.");return}T(!0),h("");try{const D=Date.now(),K=S.name.split(".").pop(),j=`avatars/${t.uid}/${D}.${K}`,J=ro(so,j);await dc(J,S);const Y=await hc(J);p(Ae=>({...Ae,avatarUrl:Y}));const oe=ze(Te,"users",t.uid,"profile","info");await Hn(oe,{avatarUrl:Y,updatedAt:Ge.now()},{merge:!0}),N("Avatar updated!"),setTimeout(()=>N(""),3e3)}catch(D){console.error("Avatar upload error:",D),h("Could not upload avatar. Please try again.")}finally{T(!1),O.current&&(O.current.value="")}},I=async()=>{if(s!=="DELETE"){h("Please type DELETE to confirm");return}l(!0),h("");try{const B=rn(St);await Rt(B,"deleteUserAccount")(),await Ek(Pa),window.location.reload()}catch(B){console.error("Error deleting account:",B),h(B.message||"Failed to delete account. Please try again."),l(!1)}};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Account Settings"}),e&&A.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:A.jsx(ls,{className:"w-5 h-5"})})]}),E&&A.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 text-sm",children:E}),u&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:u}),A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-5",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:m.avatarUrl?A.jsx("img",{src:m.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):A.jsx(Ws,{className:"w-10 h-10 text-gray-400"})}),A.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:M,className:"hidden",id:"avatar-upload"}),A.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 rounded-full text-white cursor-pointer hover:bg-blue-700 transition",children:U?A.jsx(Ct,{className:"w-4 h-4 animate-spin"}):A.jsx(fc,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex-1",children:w?A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:m.displayName,onChange:B=>p(S=>({...S,displayName:B.target.value})),placeholder:"Your name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("textarea",{value:m.bio,onChange:B=>p(S=>({...S,bio:B.target.value})),placeholder:"Tell us about yourself...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm resize-none",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[m.bio.length,"/200"]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{onClick:H,disabled:b,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[b?A.jsx(Ct,{className:"w-4 h-4 animate-spin"}):A.jsx(n6,{className:"w-4 h-4"}),"Save"]}),A.jsx("button",{onClick:()=>C(!1),className:"px-3 py-1.5 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"})]})]}):A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white mb-1",children:m.displayName||"No name set"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:t==null?void 0:t.email}),m.bio&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:m.bio}),A.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:[A.jsx(J2,{className:"w-4 h-4"}),"Edit Profile"]})]})})]})}),A.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h4",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[A.jsx(p_,{className:"w-5 h-5"}),"Danger Zone"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),n?A.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[A.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3",children:"This will permanently delete:"}),A.jsxs("ul",{className:"text-sm text-red-500 dark:text-red-400 list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"All your carnival plans and data"}),A.jsx("li",{children:"Uploaded photos and documents"}),A.jsx("li",{children:"Squad memberships"}),A.jsx("li",{children:"Your account and login"})]}),A.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Type ",A.jsx("span",{className:"font-mono bg-gray-200 dark:bg-gray-700 px-1 rounded",children:"DELETE"})," to confirm:"]}),A.jsx("input",{type:"text",value:s,onChange:B=>i(B.target.value),placeholder:"Type DELETE",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-3"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>{r(!1),i(""),h("")},disabled:o,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:"Cancel"}),A.jsx("button",{onClick:I,disabled:o||s!=="DELETE",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:o?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):A.jsxs(A.Fragment,{children:[A.jsx(ti,{className:"w-4 h-4"}),"Delete Forever"]})})]})]}):A.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[A.jsx(ti,{className:"w-4 h-4"}),"Delete My Account"]})]})]})]})}const P6={BRONZE:{name:"Bronze",color:"from-amber-600 to-amber-800",textColor:"text-amber-600",bgColor:"bg-amber-100 dark:bg-amber-900/30",icon:"",medalImage:"/images/passport/medal_bronze.png",bgImage:"/images/passport/bg_bronze.png"},SILVER:{name:"Silver",color:"from-gray-400 to-gray-600",textColor:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-700/30",icon:"",medalImage:"/images/passport/medal_silver.png",bgImage:"/images/passport/bg_silver.png"},GOLD:{name:"Gold",color:"from-yellow-400 to-amber-500",textColor:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",icon:"",medalImage:"/images/passport/medal_gold.png",bgImage:"/images/passport/bg_gold.png"},PLATINUM:{name:"Platinum",color:"from-purple-400 to-indigo-600",textColor:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30",icon:"",medalImage:"/images/passport/medal_platinum.png",bgImage:"/images/passport/bg_platinum.png"}},R6={COMMON:"border-gray-300 dark:border-gray-600",RARE:"border-blue-400 dark:border-blue-500",EPIC:"border-purple-500 dark:border-purple-400",LEGENDARY:"border-yellow-400 dark:border-yellow-500"};function L6({user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s,onOpenCheckin:i,onViewStamps:o,onViewAchievements:l,onViewLeaderboard:u,onViewRewards:h}){const[m,p]=R.useState(null),[w,C]=R.useState([]),[b,x]=R.useState(!0),[U,T]=R.useState(null),[E,N]=R.useState(null);if(R.useEffect(()=>{if(!r||!t||!r||!t)return;if(s){N({inSquad:!0,squadName:"Insane Carnival Squad",stats:{totalCredits:1250,totalEvents:8,countriesVisited:2,memberCount:3},members:[{userId:t.uid,displayName:t.displayName||"You",profilePictureUrl:t.photoURL,totalCredits:350,currentTier:"BRONZE"},{userId:"demo-2",displayName:"Sarah J",profilePictureUrl:null,totalCredits:500,currentTier:"SILVER"},{userId:"demo-3",displayName:"Mike T",profilePictureUrl:null,totalCredits:400,currentTier:"BRONZE"}].sort((S,Q)=>Q.totalCredits-S.totalCredits)});return}(async()=>{const S=rn(St),Q=Rt(S,"getSquadPassportStats");try{const D=await Q({planId:r});D.data.inSquad&&N(D.data)}catch(D){console.error("Failed to load squad stats",D)}})()},[r,t]),R.useEffect(()=>{if(!t)return;if(s){p({totalCredits:1250,currentTier:"GOLD",tierProgress:{nextTier:"PLATINUM",creditsToNextTier:750,progressPercent:62},totalEvents:8,countriesVisited:["TT","BB"],unlockedAchievements:["first-checkin","island-hopper"],achievementPoints:150,achievementDefinitions:{}}),C([{id:"1",eventTitle:"Soca Brainwash",countryCode:"TT",rarity:"LEGENDARY"},{id:"2",eventTitle:"Roast Cruise",countryCode:"BB",rarity:"RARE"},{id:"3",eventTitle:"AM Bush",countryCode:"TT",rarity:"EPIC"}]),x(!1);return}(async()=>{x(!0),T(null);try{const S=rn(St),D=await Rt(S,"getPassportProfile")();p(D.data);try{const j=await Rt(S,"getPassportStamps")({limit:5});C(j.data.stamps||[])}catch(K){console.warn("Error loading stamps (non-critical):",K),C([])}}catch(S){console.error("Error loading passport data:",S),T(S.message)}finally{x(!1)}})()},[t,s]),b)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] animate-pulse",children:[A.jsx("div",{className:"p-4 bg-teal-100 dark:bg-teal-900/30 rounded-full mb-4",children:A.jsx(Ct,{className:"w-8 h-8 text-teal-500 animate-spin"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your passport..."})]});if(U)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[A.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:A.jsx(up,{className:"w-8 h-8 text-red-500"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Unable to Load Passport"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:U}),A.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-teal-500 text-white rounded-xl font-medium hover:bg-teal-600 transition-colors",children:"Try Again"})]});const O=P6[(m==null?void 0:m.currentTier)||"BRONZE"],H=(m==null?void 0:m.tierProgress)||{},M=(m==null?void 0:m.unlockedAchievements)||[],I=(m==null?void 0:m.achievementDefinitions)||{};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsxs("div",{className:"relative overflow-hidden rounded-3xl p-6 text-white shadow-xl min-h-[180px]",style:{backgroundImage:`url(${O.bgImage})`,backgroundSize:"cover",backgroundPosition:"center"},children:[A.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${O.color} opacity-60`}),A.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full -ml-10 -mb-10 blur-xl"}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-20 h-20 flex items-center justify-center",children:A.jsx("img",{src:O.medalImage,alt:`${O.name} Medal`,className:"w-full h-full object-contain drop-shadow-lg"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black tracking-tight drop-shadow-md",children:"SOCA PASSPORT"}),A.jsxs("p",{className:"text-white/90 text-sm font-medium drop-shadow",children:[O.name," Tier"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-3xl font-black drop-shadow-md",children:(m==null?void 0:m.totalCredits)||0}),A.jsx("p",{className:"text-xs text-white/80 uppercase tracking-wider font-medium",children:"Credits"})]})]}),H.nextTier&&A.jsxs("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-4",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{className:"font-medium",children:O.name}),A.jsxs("span",{className:"text-white/90",children:[H.creditsToNextTier," to ",H.nextTier]})]}),A.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:A.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:`${H.progressPercent}%`}})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-teal-100 dark:bg-teal-900/30 flex items-center justify-center",children:A.jsx(Is,{className:"w-5 h-5 text-teal-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(m==null?void 0:m.totalEvents)||0}),A.jsx("p",{className:"text-xs text-gray-500",children:"Events"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:A.jsx(Er,{className:"w-5 h-5 text-blue-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((m==null?void 0:m.countriesVisited)||[]).length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Countries"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:A.jsx(Vu,{className:"w-5 h-5 text-yellow-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:M.length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Achievements"})]})]}),A.jsxs("button",{onClick:i,className:"w-full group relative overflow-hidden bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl p-5 shadow-lg shadow-teal-500/20 transition-all hover:-translate-y-1 active:scale-[0.99]",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),A.jsxs("div",{className:"relative flex items-center justify-center gap-3",children:[A.jsx(Td,{className:"w-6 h-6"}),A.jsx("span",{className:"text-lg font-bold",children:"CHECK IN TO EVENT"}),A.jsx(E0,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),A.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl p-5 text-white shadow-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(Kl,{className:"w-6 h-6"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Rewards Market"}),A.jsx("p",{className:"text-white/80 text-sm",children:"Redeem your credits"})]})]}),A.jsx("button",{onClick:h,className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"Browse Rewards"})]})}),E&&A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-5 shadow-lg text-white",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:A.jsx(nr,{className:"w-6 h-6 text-white"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:E.squadName}),A.jsx("p",{className:"text-white/70 text-sm",children:"Squad Passport Stats"})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-2xl font-bold",children:E.stats.totalCredits.toLocaleString()}),A.jsx("p",{className:"text-xs text-white/70",children:"Total Credits"})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-black/20 rounded-xl p-3 flex items-center gap-3",children:[A.jsx(Is,{className:"w-5 h-5 text-purple-200"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:E.stats.totalEvents}),A.jsx("p",{className:"text-xs text-white/60",children:"Squad Events"})]})]}),A.jsxs("div",{className:"bg-black/20 rounded-xl p-3 flex items-center gap-3",children:[A.jsx(Er,{className:"w-5 h-5 text-blue-200"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:E.stats.countriesVisited}),A.jsx("p",{className:"text-xs text-white/60",children:"Countries"})]})]})]}),A.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center gap-2 overflow-x-auto pb-1 scrollbar-hide",children:E.members.map((B,S)=>A.jsxs("div",{className:"flex-shrink-0 relative",children:[A.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${B.userId===t.uid?"border-yellow-400":"border-white/20"} overflow-hidden bg-gray-800`,children:B.profilePictureUrl?A.jsx("img",{src:B.profilePictureUrl,alt:"",className:"w-10 h-10 object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold text-white/50",children:B.displayName?B.displayName.charAt(0):"?"})}),A.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 text-[8px] font-bold px-1 rounded-full border border-gray-700",children:["#",S+1]})]},B.userId))})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(ng,{className:"w-5 h-5 text-yellow-500"}),"Recent Stamps"]}),w.length>0&&A.jsxs("button",{onClick:o,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(E0,{className:"w-4 h-4"})]})]}),w.length===0?A.jsxs("div",{className:"text-center py-8",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:A.jsx(Is,{className:"w-8 h-8 text-gray-400"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"No stamps yet"}),A.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Check in to your first event!"})]}):A.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-1 px-1",children:w.map(B=>A.jsxs("div",{className:`flex-shrink-0 w-24 h-24 rounded-2xl border-2 ${R6[B.rarity]} bg-gray-50 dark:bg-gray-700 flex flex-col items-center justify-center p-2 text-center`,children:[A.jsx("span",{className:"text-2xl mb-1",children:B.countryCode==="TT"?"":B.countryCode==="US"?"":B.countryCode==="JM"?"":B.countryCode==="BB"?"":B.countryCode==="LC"?"":B.countryCode==="VC"?"":""}),A.jsx("p",{className:"text-[10px] font-medium text-gray-700 dark:text-gray-300 truncate w-full",children:B.eventTitle}),A.jsx("p",{className:"text-[8px] text-gray-400 uppercase",children:B.rarity})]},B.id))})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(w_,{className:"w-5 h-5 text-purple-500"}),"Achievements",A.jsxs("span",{className:"text-xs font-normal text-gray-400",children:[M.length,"/",Object.keys(I).length]})]}),A.jsxs("button",{onClick:l,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(E0,{className:"w-4 h-4"})]})]}),A.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.values(I).map(B=>{const S=M.includes(B.id);return A.jsx("div",{className:`aspect-square rounded-xl flex items-center justify-center text-2xl transition-all ${S?"bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40 shadow-sm":"bg-gray-100 dark:bg-gray-700 opacity-40 grayscale"}`,title:`${B.name}${S?" ":""}`,children:B.icon},B.id)})}),(m==null?void 0:m.achievementPoints)>0&&A.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-purple-500",children:[A.jsx(mc,{className:"w-4 h-4"}),A.jsxs("span",{className:"font-medium",children:[m.achievementPoints," Achievement Points"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-5 text-white shadow-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(sU,{className:"w-6 h-6"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Leaderboard"}),A.jsx("p",{className:"text-white/70 text-sm",children:"See how you rank"})]})]}),A.jsx("button",{onClick:u,className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"View Rankings"})]})})]})}function j6({isOpen:t,onClose:e,onSuccess:n}){var C,b,x,U,T,E,N,O;const[r,s]=R.useState(""),[i,o]=R.useState(!1),[l,u]=R.useState(null),[h,m]=R.useState(null);R.useEffect(()=>{t&&(s(""),u(null),m(null))},[t]);const p=async H=>{if(H.preventDefault(),!r.trim()){u("Please enter an access code");return}o(!0),u(null);try{const M=rn(St),B=await Rt(M,"passportCheckin")({accessCode:r.trim()});m(B.data),setTimeout(()=>{n==null||n(B.data)},3e3)}catch(M){console.error("Check-in error:",M);const I=M.message||"Check-in failed. Please try again.";M.code==="functions/not-found"?u("Invalid or expired access code."):M.code==="functions/already-exists"?u("You have already checked in to this event."):u(I)}finally{o(!1)}},w=H=>H.toUpperCase().replace(/[^A-Z0-9-]/g,"");return t?A.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:[A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden animate-slideUp",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-10",children:A.jsx(ls,{className:"w-5 h-5"})}),h?A.jsxs("div",{className:"p-8 text-center",children:[A.jsxs("div",{className:"relative mb-6",children:[A.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-teal-400 to-emerald-500 rounded-3xl flex items-center justify-center shadow-lg shadow-teal-500/30 animate-bounce",children:A.jsx(th,{className:"w-16 h-16 text-white"})}),A.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:A.jsx(mc,{className:"w-4 h-4 text-yellow-900"})})]}),A.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2",children:"Check-in Complete!"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"You earned a new stamp"}),A.jsx("div",{className:"inline-block mb-6",children:A.jsxs("div",{className:`px-6 py-4 rounded-2xl border-2 ${((C=h.stamp)==null?void 0:C.rarity)==="LEGENDARY"?"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":((b=h.stamp)==null?void 0:b.rarity)==="EPIC"?"border-purple-400 bg-purple-50 dark:bg-purple-900/20":((x=h.stamp)==null?void 0:x.rarity)==="RARE"?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 bg-gray-50 dark:bg-gray-700/50"}`,children:[A.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(U=h.stamp)==null?void 0:U.eventTitle}),A.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[(E=(T=h.stamp)==null?void 0:T.rarity)==null?void 0:E.toLowerCase()," Stamp  #",(N=h.stamp)==null?void 0:N.editionNumber]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 rounded-2xl p-4 text-white mb-4",children:[A.jsxs("div",{className:"flex items-center justify-center gap-3",children:[A.jsx(Td,{className:"w-6 h-6"}),A.jsxs("span",{className:"text-3xl font-black",children:["+",h.creditsEarned]}),A.jsx("span",{className:"text-white/80",children:"Credits"})]}),h.bonusCredits>0&&A.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 text-sm text-white/90",children:[A.jsx(Kl,{className:"w-4 h-4"}),A.jsxs("span",{children:["+",h.bonusCredits," Achievement Bonus!"]})]})]}),((O=h.newAchievements)==null?void 0:O.length)>0&&A.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-2xl p-4 mb-4",children:[A.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:" Achievement Unlocked!"}),h.newAchievements.map(H=>A.jsxs("div",{className:"flex items-center justify-center gap-2",children:[A.jsx("span",{className:"text-2xl",children:H.icon}),A.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:H.name})]},H.id))]}),h.tierChanged&&A.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 text-white mb-4",children:A.jsxs("p",{className:"font-bold text-lg",children:[" You ranked up to ",h.newTier,"!"]})}),A.jsx("button",{onClick:e,className:"w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-2xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Done"})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-emerald-500 p-6 text-white text-center",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(Is,{className:"w-8 h-8"})}),A.jsx("h2",{className:"text-2xl font-black",children:"Event Check-in"}),A.jsx("p",{className:"text-teal-100 text-sm mt-1",children:"Enter your access code to earn stamps"})]}),A.jsxs("form",{onSubmit:p,className:"p-6",children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Code"}),A.jsx("input",{type:"text",value:r,onChange:H=>s(w(H.target.value)),placeholder:"e.g. PRO-123-4567",className:"w-full px-5 py-4 text-2xl font-mono font-bold text-center tracking-widest bg-gray-50 dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 dark:text-white transition-all uppercase",disabled:i,autoFocus:!0}),A.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Get this code from the event host or promoter"})]}),l&&A.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[A.jsx(cp,{className:"w-5 h-5 flex-shrink-0"}),A.jsx("span",{children:l})]}),A.jsx("button",{type:"submit",disabled:i||!r.trim(),className:"w-full py-4 bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl font-bold text-lg shadow-lg shadow-teal-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:i?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-5 h-5 animate-spin"}),"Checking in..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Td,{className:"w-5 h-5"}),"Claim Stamp"]})})]})]})]}),A.jsx("style",{children:`
                @keyframes slideUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-slideUp {
                    animation: slideUp 0.3s ease-out;
                }
            `})]}):null}const BE={TT:"",US:"",JM:"",BB:"",LC:"",VC:"",GD:"",AG:"",KN:"",BS:"",BM:"",GY:"",CA:"",GB:"",VG:"",VI:"",KY:"",SX:"",MQ:"",GP:"",PR:"",CU:"",HT:"",DO:"",AW:"",CW:"",JP:"",XX:""},il={LEGENDARY:{name:"Legendary",borderColor:"border-yellow-400",bgColor:"bg-gradient-to-br from-yellow-50 to-amber-100 dark:from-yellow-900/20 dark:to-amber-900/30",textColor:"text-yellow-600 dark:text-yellow-400",glow:"shadow-lg shadow-yellow-400/30"},EPIC:{name:"Epic",borderColor:"border-purple-400",bgColor:"bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/30",textColor:"text-purple-600 dark:text-purple-400",glow:"shadow-lg shadow-purple-400/20"},RARE:{name:"Rare",borderColor:"border-blue-400",bgColor:"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-900/20 dark:to-cyan-900/30",textColor:"text-blue-600 dark:text-blue-400",glow:""},COMMON:{name:"Common",borderColor:"border-gray-300 dark:border-gray-600",bgColor:"bg-gray-50 dark:bg-gray-700/50",textColor:"text-gray-600 dark:text-gray-400",glow:""}};function D6({user:t,onBack:e}){const[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,l]=R.useState(null),[u,h]=R.useState("ALL"),[m,p]=R.useState(new Set);R.useEffect(()=>{if(!t)return;(async()=>{var U;i(!0),l(null);try{const T=rn(St),N=await Rt(T,"getPassportStamps")({limit:100,rarity:u==="ALL"?null:u});r(N.data.stamps||[]);const O=new Set(((U=N.data.stamps)==null?void 0:U.filter(H=>H.isFavorite).map(H=>H.id))||[]);p(O)}catch(T){console.error("Error loading stamps:",T),l(T.message)}finally{i(!1)}})()},[t,u]);const w=x=>{p(U=>{const T=new Set(U);return T.has(x)?T.delete(x):T.add(x),T})},C=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",b=n.reduce((x,U)=>(x[U.rarity]=(x[U.rarity]||0)+1,x),{});return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(v_,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(ng,{className:"w-6 h-6 text-yellow-500"}),"Stamp Collection"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," stamps collected"]})]})]}),A.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 -mx-1 px-1",children:[A.jsxs("button",{onClick:()=>h("ALL"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${u==="ALL"?"bg-teal-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["All (",n.length,")"]}),["LEGENDARY","EPIC","RARE","COMMON"].map(x=>A.jsxs("button",{onClick:()=>h(x),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${u===x?`${il[x].bgColor} ${il[x].textColor} border ${il[x].borderColor}`:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[il[x].name," (",b[x]||0,")"]},x))]}),s&&A.jsx("div",{className:"flex items-center justify-center py-20",children:A.jsx(Ct,{className:"w-8 h-8 text-teal-500 animate-spin"})}),o&&!s&&A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:o}),A.jsx("button",{onClick:()=>h("ALL"),className:"px-4 py-2 bg-teal-500 text-white rounded-xl",children:"Retry"})]}),!s&&!o&&n.length===0&&A.jsxs("div",{className:"text-center py-16",children:[A.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center",children:A.jsx(ng,{className:"w-10 h-10 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 mb-2",children:"No Stamps Yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Check in to events to start collecting stamps!"})]}),!s&&n.length>0&&A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n.map(x=>{const U=il[x.rarity]||il.COMMON,T=m.has(x.id);return A.jsxs("div",{className:`relative rounded-2xl border-2 ${U.borderColor} ${U.bgColor} ${U.glow} p-4 transition-all hover:scale-[1.02] cursor-pointer`,children:[A.jsx("button",{onClick:()=>w(x.id),className:"absolute top-2 right-2 p-1.5 rounded-full bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 transition-colors",children:A.jsx(G3,{className:`w-4 h-4 ${T?"fill-red-500 text-red-500":"text-gray-400"}`})}),A.jsx("div",{className:"text-4xl mb-3 text-center",children:BE[x.countryCode]||BE.XX}),A.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm text-center truncate mb-1",children:x.eventTitle}),A.jsxs("p",{className:`text-xs ${U.textColor} text-center font-medium uppercase tracking-wide`,children:[U.name," #",x.editionNumber]}),A.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 space-y-1",children:[A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(bA,{className:"w-3 h-3"}),A.jsx("span",{children:C(x.stampedAt)})]}),x.location&&A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(Er,{className:"w-3 h-3"}),A.jsx("span",{className:"truncate",children:x.location})]})]}),A.jsx("div",{className:"mt-2 text-center",children:A.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 rounded-full text-xs font-medium",children:["+",x.creditsEarned," credits"]})})]},x.id)})})]})}const M6={first_stamp:{id:"first_stamp",name:"First Steps",description:"Claim your first stamp",icon:"",category:"MILESTONE",points:50,criteria:{type:"EVENT_COUNT",target:1}},island_hopper:{id:"island_hopper",name:"Island Hopper",description:"Check in at 3 different countries",icon:"",category:"TRAVEL",points:500,criteria:{type:"COUNTRY_COUNT",target:3}},sunrise_warrior:{id:"sunrise_warrior",name:"Sunrise Warrior",description:"Check in at 5 J'ouvert or early morning events",icon:"",category:"EVENTS",points:300,criteria:{type:"EVENT_TYPE",target:5}},loyal_fan:{id:"loyal_fan",name:"Loyal Fan",description:"Check in to 10 events total",icon:"",category:"MILESTONE",points:250,criteria:{type:"EVENT_COUNT",target:10}},tier_up:{id:"tier_up",name:"Moving Up",description:"Reach Silver tier",icon:"",category:"MILESTONE",points:200,criteria:{type:"TIER_REACHED",target:"SILVER"}}},ef={MILESTONE:"from-blue-500 to-indigo-500",TRAVEL:"from-teal-500 to-cyan-500",EVENTS:"from-orange-500 to-amber-500",SOCIAL:"from-pink-500 to-rose-500"};function O6({profile:t,onBack:e}){const n=(t==null?void 0:t.unlockedAchievements)||[],r=(t==null?void 0:t.achievementPoints)||0,s=(t==null?void 0:t.totalEvents)||0,i=((t==null?void 0:t.countriesVisited)||[]).length,o=(t==null?void 0:t.currentTier)||"BRONZE",l=(t==null?void 0:t.eventTypeStats)||{},u=p=>{const{criteria:w}=p;let C=0,b=w.target;switch(w.type){case"EVENT_COUNT":C=s;break;case"COUNTRY_COUNT":C=i;break;case"TIER_REACHED":const x=["BRONZE","SILVER","GOLD","PLATINUM"],U=x.indexOf(o),T=x.indexOf(w.target);C=U>=T?1:0,b=1;break;case"EVENT_TYPE":C=(l.jouvert||0)+(l.breakfast||0)+(l.early_morning||0);break;default:C=0}return{current:Math.min(C,b),target:b,percent:Math.min(100,Math.floor(C/b*100))}},h=Object.values(M6).map(p=>({...p,isUnlocked:n.includes(p.id),progress:u(p)})),m=h.filter(p=>p.isUnlocked).length;return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(v_,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(w_,{className:"w-6 h-6 text-purple-500"}),"Achievements"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[m,"/",h.length," unlocked"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-5 text-white mb-6 shadow-lg shadow-purple-500/20",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-purple-200 text-sm",children:"Total Points Earned"}),A.jsx("p",{className:"text-4xl font-black",children:r})]}),A.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(mc,{className:"w-8 h-8"})})]})}),A.jsx("div",{className:"space-y-4",children:h.map(p=>A.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-2xl border overflow-hidden transition-all ${p.isUnlocked?"border-purple-200 dark:border-purple-800 shadow-sm":"border-gray-200 dark:border-gray-700 opacity-75"}`,children:[A.jsx("div",{className:`h-1 bg-gradient-to-r ${ef[p.category]||ef.MILESTONE}`}),A.jsx("div",{className:"p-4",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center text-2xl ${p.isUnlocked?"bg-purple-100 dark:bg-purple-900/30":"bg-gray-100 dark:bg-gray-700 grayscale"}`,children:p.icon}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-start justify-between gap-2",children:[A.jsxs("div",{children:[A.jsx("h3",{className:`font-bold ${p.isUnlocked?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:p.name}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.description})]}),p.isUnlocked?A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg text-xs font-medium",children:[A.jsx(th,{className:"w-3 h-3"}),"Unlocked"]}):A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-500 rounded-lg text-xs font-medium",children:[A.jsx(Cw,{className:"w-3 h-3"}),"Locked"]})]}),!p.isUnlocked&&A.jsxs("div",{className:"mt-3",children:[A.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[A.jsx("span",{children:"Progress"}),A.jsxs("span",{children:[p.progress.current,"/",p.progress.target]})]}),A.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:A.jsx("div",{className:`h-full rounded-full bg-gradient-to-r ${ef[p.category]||ef.MILESTONE} transition-all duration-500`,style:{width:`${p.progress.percent}%`}})})]}),A.jsx("div",{className:"mt-2",children:A.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium ${p.isUnlocked?"text-purple-600 dark:text-purple-400":"text-gray-400"}`,children:[A.jsx(mc,{className:"w-3 h-3"}),p.isUnlocked?`+${p.points} points earned`:`${p.points} points`]})})]})]})})]},p.id))}),A.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-2xl text-center",children:[A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"More achievements coming soon!"}),A.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Squad Leader  Ocean Voyager  Carnival Royalty  and more..."})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Iw=function(t,e){return Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Iw(t,e)};function ks(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Iw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Tw=function(){return Tw=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tw.apply(this,arguments)};function er(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(m){try{h(r.next(m))}catch(p){o(p)}}function u(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):s(m.value).then(l,u)}h((r=r.apply(t,[])).next())})}function Rn(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(m){return u([h,m])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function tf(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var Zi=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),mp=function(t,e){return Zi.fromClientRect(t,e.getBoundingClientRect())},H6=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Zi(0,0,r,s)},gp=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Zt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},bE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nf=0;nf<bE.length;nf++)V6[bE.charCodeAt(nf)]=nf;var CE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rf=0;rf<CE.length;rf++)yu[CE.charCodeAt(rf)]=rf;var K6=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)i=yu[t.charCodeAt(r)],o=yu[t.charCodeAt(r+1)],l=yu[t.charCodeAt(r+2)],u=yu[t.charCodeAt(r+3)],m[s++]=i<<2|o>>4,m[s++]=(o&15)<<4|l>>2,m[s++]=(l&3)<<6|u&63;return h},z6=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},G6=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},tA=5,E_=11,I0=2,q6=E_-tA,aU=65536>>tA,W6=1<<tA,T0=W6-1,$6=1024>>tA,Z6=aU+$6,J6=Z6,X6=32,Y6=J6+X6,eK=65536>>E_,tK=1<<q6,nK=tK-1,EE=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},rK=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},sK=function(t,e){var n=K6(t),r=Array.isArray(n)?G6(n):new Uint32Array(n),s=Array.isArray(n)?z6(n):new Uint16Array(n),i=24,o=EE(s,i/2,r[4]/2),l=r[5]===2?EE(s,(i+r[4])/2):rK(r,Math.ceil((i+r[4])/4));return new iK(r[0],r[1],r[2],r[3],o,l)},iK=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>tA],n=(n<<I0)+(e&T0),this.data[n];if(e<=65535)return n=this.index[aU+(e-55296>>tA)],n=(n<<I0)+(e&T0),this.data[n];if(e<this.highStart)return n=Y6-eK+(e>>E_),n=this.index[n],n+=e>>tA&nK,n=this.index[n],n=(n<<I0)+(e&T0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),IE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sf=0;sf<IE.length;sf++)aK[IE.charCodeAt(sf)]=sf;var oK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",TE=50,AK=1,oU=2,AU=3,lK=4,cK=5,kE=7,lU=8,SE=9,Ra=10,kw=11,NE=12,Sw=13,uK=14,wu=15,Nw=16,af=17,ru=18,dK=19,UE=20,Uw=21,su=22,k0=23,al=24,Qr=25,vu=26,xu=27,ol=28,hK=29,Vo=30,fK=31,of=32,Af=33,Fw=34,Qw=35,Pw=36,kd=37,Rw=38,em=39,tm=40,S0=41,cU=42,mK=43,gK=[9001,65288],uU="!",$e="",lf="",Lw=sK(oK),bi=[Vo,Pw],jw=[AK,oU,AU,cK],dU=[Ra,lU],FE=[xu,vu],pK=jw.concat(dU),QE=[Rw,em,tm,Fw,Qw],yK=[wu,Sw],wK=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(i,o){var l=Lw.get(i);if(l>TE?(s.push(!0),l-=TE):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),n.push(Nw);if(l===lK||l===kw){if(o===0)return r.push(o),n.push(Vo);var u=n[o-1];return pK.indexOf(u)===-1?(r.push(r[o-1]),n.push(u)):(r.push(o),n.push(Vo))}if(r.push(o),l===fK)return n.push(e==="strict"?Uw:kd);if(l===cU||l===hK)return n.push(Vo);if(l===mK)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(kd):n.push(Vo);n.push(l)}),[r,n,s]},N0=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=n;i<=r.length;){i++;var o=r[i];if(o===e)return!0;if(o!==Ra)break}if(s===Ra)for(var i=n;i>0;){i--;var l=r[i];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var u=n;u<=r.length;){u++;var o=r[u];if(o===e)return!0;if(o!==Ra)break}if(l!==Ra)break}return!1},PE=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Ra)n--;else return r}return 0},vK=function(t,e,n,r,s){if(n[r]===0)return $e;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return $e;var o=i-1,l=i+1,u=e[i],h=o>=0?e[o]:0,m=e[l];if(u===oU&&m===AU)return $e;if(jw.indexOf(u)!==-1)return uU;if(jw.indexOf(m)!==-1||dU.indexOf(m)!==-1)return $e;if(PE(i,e)===lU)return lf;if(Lw.get(t[i])===kw||(u===of||u===Af)&&Lw.get(t[l])===kw||u===kE||m===kE||u===SE||[Ra,Sw,wu].indexOf(u)===-1&&m===SE||[af,ru,dK,al,ol].indexOf(m)!==-1||PE(i,e)===su||N0(k0,su,i,e)||N0([af,ru],Uw,i,e)||N0(NE,NE,i,e))return $e;if(u===Ra)return lf;if(u===k0||m===k0)return $e;if(m===Nw||u===Nw)return lf;if([Sw,wu,Uw].indexOf(m)!==-1||u===uK||h===Pw&&yK.indexOf(u)!==-1||u===ol&&m===Pw||m===UE||bi.indexOf(m)!==-1&&u===Qr||bi.indexOf(u)!==-1&&m===Qr||u===xu&&[kd,of,Af].indexOf(m)!==-1||[kd,of,Af].indexOf(u)!==-1&&m===vu||bi.indexOf(u)!==-1&&FE.indexOf(m)!==-1||FE.indexOf(u)!==-1&&bi.indexOf(m)!==-1||[xu,vu].indexOf(u)!==-1&&(m===Qr||[su,wu].indexOf(m)!==-1&&e[l+1]===Qr)||[su,wu].indexOf(u)!==-1&&m===Qr||u===Qr&&[Qr,ol,al].indexOf(m)!==-1)return $e;if([Qr,ol,al,af,ru].indexOf(m)!==-1)for(var p=i;p>=0;){var w=e[p];if(w===Qr)return $e;if([ol,al].indexOf(w)!==-1)p--;else break}if([xu,vu].indexOf(m)!==-1)for(var p=[af,ru].indexOf(u)!==-1?o:i;p>=0;){var w=e[p];if(w===Qr)return $e;if([ol,al].indexOf(w)!==-1)p--;else break}if(Rw===u&&[Rw,em,Fw,Qw].indexOf(m)!==-1||[em,Fw].indexOf(u)!==-1&&[em,tm].indexOf(m)!==-1||[tm,Qw].indexOf(u)!==-1&&m===tm||QE.indexOf(u)!==-1&&[UE,vu].indexOf(m)!==-1||QE.indexOf(m)!==-1&&u===xu||bi.indexOf(u)!==-1&&bi.indexOf(m)!==-1||u===al&&bi.indexOf(m)!==-1||bi.concat(Qr).indexOf(u)!==-1&&m===su&&gK.indexOf(t[l])===-1||bi.concat(Qr).indexOf(m)!==-1&&u===ru)return $e;if(u===S0&&m===S0){for(var C=n[i],b=1;C>0&&(C--,e[C]===S0);)b++;if(b%2!==0)return $e}return u===of&&m===Af?$e:lf},xK=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=wK(t,e.lineBreak),r=n[0],s=n[1],i=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(l){return[Qr,Vo,cU].indexOf(l)!==-1?kd:l}));var o=e.wordBreak==="keep-all"?i.map(function(l,u){return l&&t[u]>=19968&&t[u]<=40959}):void 0;return[r,s,o]},_K=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===uU,this.start=r,this.end=s}return t.prototype.slice=function(){return Zt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),BK=function(t,e){var n=gp(t),r=xK(n,e),s=r[0],i=r[1],o=r[2],l=n.length,u=0,h=0;return{next:function(){if(h>=l)return{done:!0,value:null};for(var m=$e;h<l&&(m=vK(n,i,s,++h,o))===$e;);if(m!==$e||h===l){var p=new _K(n,m,u,h);return u=h,{value:p,done:!1}}return{done:!0,value:null}}}},bK=1,CK=2,sh=4,RE=8,rg=10,LE=47,Ku=92,EK=9,IK=32,cf=34,iu=61,TK=35,kK=36,SK=37,uf=39,df=40,au=41,NK=95,gr=45,UK=33,FK=60,QK=62,PK=64,RK=91,LK=93,jK=61,DK=123,hf=63,MK=125,jE=124,OK=126,HK=128,DE=65533,U0=42,$o=43,VK=44,KK=58,zK=59,Sd=46,GK=0,qK=8,WK=11,$K=14,ZK=31,JK=127,Os=-1,hU=48,fU=97,mU=101,XK=102,YK=117,e8=122,gU=65,pU=69,yU=70,t8=85,n8=90,jn=function(t){return t>=hU&&t<=57},r8=function(t){return t>=55296&&t<=57343},Al=function(t){return jn(t)||t>=gU&&t<=yU||t>=fU&&t<=XK},s8=function(t){return t>=fU&&t<=e8},i8=function(t){return t>=gU&&t<=n8},a8=function(t){return s8(t)||i8(t)},o8=function(t){return t>=HK},ff=function(t){return t===rg||t===EK||t===IK},sg=function(t){return a8(t)||o8(t)||t===NK},ME=function(t){return sg(t)||jn(t)||t===gr},A8=function(t){return t>=GK&&t<=qK||t===WK||t>=$K&&t<=ZK||t===JK},Ba=function(t,e){return t!==Ku?!1:e!==rg},mf=function(t,e,n){return t===gr?sg(e)||Ba(e,n):sg(t)?!0:!!(t===Ku&&Ba(t,e))},F0=function(t,e,n){return t===$o||t===gr?jn(e)?!0:e===Sd&&jn(n):jn(t===Sd?e:t)},l8=function(t){var e=0,n=1;(t[e]===$o||t[e]===gr)&&(t[e]===gr&&(n=-1),e++);for(var r=[];jn(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Zt.apply(void 0,r),10):0;t[e]===Sd&&e++;for(var i=[];jn(t[e]);)i.push(t[e++]);var o=i.length,l=o?parseInt(Zt.apply(void 0,i),10):0;(t[e]===pU||t[e]===mU)&&e++;var u=1;(t[e]===$o||t[e]===gr)&&(t[e]===gr&&(u=-1),e++);for(var h=[];jn(t[e]);)h.push(t[e++]);var m=h.length?parseInt(Zt.apply(void 0,h),10):0;return n*(s+l*Math.pow(10,-o))*Math.pow(10,u*m)},c8={type:2},u8={type:3},d8={type:4},h8={type:13},f8={type:8},m8={type:21},g8={type:9},p8={type:10},y8={type:11},w8={type:12},v8={type:14},gf={type:23},x8={type:1},_8={type:25},B8={type:24},b8={type:26},C8={type:27},E8={type:28},I8={type:29},T8={type:31},Dw={type:32},wU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(gp(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==Dw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case cf:return this.consumeStringToken(cf);case TK:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(ME(n)||Ba(r,s)){var i=mf(n,r,s)?CK:bK,o=this.consumeName();return{type:5,value:o,flags:i}}break;case kK:if(this.peekCodePoint(0)===iu)return this.consumeCodePoint(),h8;break;case uf:return this.consumeStringToken(uf);case df:return c8;case au:return u8;case U0:if(this.peekCodePoint(0)===iu)return this.consumeCodePoint(),v8;break;case $o:if(F0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case VK:return d8;case gr:var l=e,u=this.peekCodePoint(0),h=this.peekCodePoint(1);if(F0(l,u,h))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(mf(l,u,h))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(u===gr&&h===QK)return this.consumeCodePoint(),this.consumeCodePoint(),B8;break;case Sd:if(F0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case LE:if(this.peekCodePoint(0)===U0)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===U0&&(m=this.consumeCodePoint(),m===LE))return this.consumeToken();if(m===Os)return this.consumeToken()}break;case KK:return b8;case zK:return C8;case FK:if(this.peekCodePoint(0)===UK&&this.peekCodePoint(1)===gr&&this.peekCodePoint(2)===gr)return this.consumeCodePoint(),this.consumeCodePoint(),_8;break;case PK:var p=this.peekCodePoint(0),w=this.peekCodePoint(1),C=this.peekCodePoint(2);if(mf(p,w,C)){var o=this.consumeName();return{type:7,value:o}}break;case RK:return E8;case Ku:if(Ba(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case LK:return I8;case jK:if(this.peekCodePoint(0)===iu)return this.consumeCodePoint(),f8;break;case DK:return y8;case MK:return w8;case YK:case t8:var b=this.peekCodePoint(0),x=this.peekCodePoint(1);return b===$o&&(Al(x)||x===hf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case jE:if(this.peekCodePoint(0)===iu)return this.consumeCodePoint(),g8;if(this.peekCodePoint(0)===jE)return this.consumeCodePoint(),m8;break;case OK:if(this.peekCodePoint(0)===iu)return this.consumeCodePoint(),p8;break;case Os:return Dw}return ff(e)?(this.consumeWhiteSpace(),T8):jn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):sg(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Zt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();Al(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===hf&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Zt.apply(void 0,e.map(function(u){return u===hf?hU:u})),16),i=parseInt(Zt.apply(void 0,e.map(function(u){return u===hf?yU:u})),16);return{type:30,start:s,end:i}}var o=parseInt(Zt.apply(void 0,e),16);if(this.peekCodePoint(0)===gr&&Al(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var l=[];Al(n)&&l.length<6;)l.push(n),n=this.consumeCodePoint();var i=parseInt(Zt.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===df?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===df?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Os)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===uf||n===cf){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Os||this.peekCodePoint(0)===au)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),gf)}for(;;){var s=this.consumeCodePoint();if(s===Os||s===au)return{type:22,value:Zt.apply(void 0,e)};if(ff(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Os||this.peekCodePoint(0)===au?(this.consumeCodePoint(),{type:22,value:Zt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),gf);if(s===cf||s===uf||s===df||A8(s))return this.consumeBadUrlRemnants(),gf;if(s===Ku)if(Ba(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),gf;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;ff(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===au||e===Os)return;Ba(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Zt.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Os||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===rg)return this._value.splice(0,r),x8;if(s===Ku){var i=this._value[r+1];i!==Os&&i!==void 0&&(i===rg?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Ba(s,i)&&(n+=this.consumeStringSlice(r),n+=Zt(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=sh,r=this.peekCodePoint(0);for((r===$o||r===gr)&&e.push(this.consumeCodePoint());jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===Sd&&jn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=RE;jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===pU||r===mU)&&((s===$o||s===gr)&&jn(i)||jn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=RE;jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[l8(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(mf(s,i,o)){var l=this.consumeName();return{type:15,number:n,flags:r,unit:l}}return s===SK?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Al(e)){for(var n=Zt(e);Al(this.peekCodePoint(0))&&n.length<6;)n+=Zt(this.consumeCodePoint());ff(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||r8(r)||r>1114111?DE:r}return e===Os?DE:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(ME(n))e+=Zt(n);else if(Ba(n,this.peekCodePoint(0)))e+=Zt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),vU=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new wU;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||S8(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Dw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),ih=function(t){return t.type===15},Ec=function(t){return t.type===17},ht=function(t){return t.type===20},k8=function(t){return t.type===0},Mw=function(t,e){return ht(t)&&t.value===e},xU=function(t){return t.type!==31},gc=function(t){return t.type!==31&&t.type!==4},si=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},S8=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},io=function(t){return t.type===17||t.type===15},sn=function(t){return t.type===16||io(t)},_U=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},In={type:17,number:0,flags:sh},I_={type:16,number:50,flags:sh},La={type:16,number:100,flags:sh},_u=function(t,e,n){var r=t[0],s=t[1];return[gt(r,e),gt(typeof s<"u"?s:r,n)]},gt=function(t,e){if(t.type===16)return t.number/100*e;if(ih(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},BU="deg",bU="grad",CU="rad",EU="turn",pp={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case BU:return Math.PI*e.number/180;case bU:return Math.PI/200*e.number;case CU:return e.number;case EU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},IU=function(t){return t.type===15&&(t.unit===BU||t.unit===bU||t.unit===CU||t.unit===EU)},TU=function(t){var e=t.filter(ht).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[In,In];case"to top":case"bottom":return ts(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[In,La];case"to right":case"left":return ts(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[La,La];case"to bottom":case"top":return ts(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[La,In];case"to left":case"right":return ts(270)}return 0},ts=function(t){return Math.PI*t/180},$a={name:"color",parse:function(t,e){if(e.type===18){var n=N8[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return ja(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return ja(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return ja(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return ja(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var l=Hi[e.value.toUpperCase()];if(typeof l<"u")return l}return Hi.TRANSPARENT}},Za=function(t){return(255&t)===0},yn=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},ja=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},OE=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},HE=function(t,e){var n=e.filter(gc);if(n.length===3){var r=n.map(OE),s=r[0],i=r[1],o=r[2];return ja(s,i,o,1)}if(n.length===4){var l=n.map(OE),s=l[0],i=l[1],o=l[2],u=l[3];return ja(s,i,o,u)}return 0};function Q0(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var VE=function(t,e){var n=e.filter(gc),r=n[0],s=n[1],i=n[2],o=n[3],l=(r.type===17?ts(r.number):pp.parse(t,r))/(Math.PI*2),u=sn(s)?s.number/100:0,h=sn(i)?i.number/100:0,m=typeof o<"u"&&sn(o)?gt(o,1):1;if(u===0)return ja(h*255,h*255,h*255,1);var p=h<=.5?h*(u+1):h+u-h*u,w=h*2-p,C=Q0(w,p,l+1/3),b=Q0(w,p,l),x=Q0(w,p,l-1/3);return ja(C*255,b*255,x*255,m)},N8={hsl:VE,hsla:VE,rgb:HE,rgba:HE},zu=function(t,e){return $a.parse(t,vU.create(e).parseComponentValue())},Hi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},U8={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ht(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},F8={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yp=function(t,e){var n=$a.parse(t,e[0]),r=e[1];return r&&sn(r)?{color:n,stop:r}:{color:n,stop:null}},KE=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=In),r.stop===null&&(r.stop=La);for(var s=[],i=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var u=gt(l,e);u>i?s.push(u):s.push(i),i=u}else s.push(null)}for(var h=null,o=0;o<s.length;o++){var m=s[o];if(m===null)h===null&&(h=o);else if(h!==null){for(var p=o-h,w=s[h-1],C=(m-w)/(p+1),b=1;b<=p;b++)s[h+b-1]=C*b;h=null}}return t.map(function(x,U){var T=x.color;return{color:T,stop:Math.max(Math.min(1,s[U]/e),0)}})},Q8=function(t,e,n){var r=e/2,s=n/2,i=gt(t[0],e)-r,o=s-gt(t[1],n);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},P8=function(t,e,n){var r=typeof t=="number"?t:Q8(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),i=e/2,o=n/2,l=s/2,u=Math.sin(r-Math.PI/2)*l,h=Math.cos(r-Math.PI/2)*l;return[s,i-h,i+h,o-u,o+u]},ys=function(t,e){return Math.sqrt(t*t+e*e)},zE=function(t,e,n,r,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(o,l){var u=l[0],h=l[1],m=ys(n-u,r-h);return(s?m<o.optimumDistance:m>o.optimumDistance)?{optimumCorner:l,optimumDistance:m}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},R8=function(t,e,n,r,s){var i=0,o=0;switch(t.size){case 0:t.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)i=o=Math.min(ys(e,n),ys(e,n-s),ys(e-r,n),ys(e-r,n-s));else if(t.shape===1){var l=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),u=zE(r,s,e,n,!0),h=u[0],m=u[1];i=ys(h-e,(m-n)/l),o=l*i}break;case 1:t.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)i=o=Math.max(ys(e,n),ys(e,n-s),ys(e-r,n),ys(e-r,n-s));else if(t.shape===1){var l=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),p=zE(r,s,e,n,!1),h=p[0],m=p[1];i=ys(h-e,(m-n)/l),o=l*i}break}return Array.isArray(t.size)&&(i=gt(t.size[0],r),o=t.size.length===2?gt(t.size[1],s):i),[i,o]},L8=function(t,e){var n=ts(180),r=[];return si(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&o.value==="to"){n=TU(s);return}else if(IU(o)){n=pp.parse(t,o);return}}var l=yp(t,s);r.push(l)}),{angle:n,stops:r,type:1}},pf=function(t,e){var n=ts(180),r=[];return si(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=TU(s);return}else if(IU(o)){n=(pp.parse(t,o)+ts(270))%ts(360);return}}var l=yp(t,s);r.push(l)}),{angle:n,stops:r,type:1}},j8=function(t,e){var n=ts(180),r=[],s=1,i=0,o=3,l=[];return si(e).forEach(function(u,h){var m=u[0];if(h===0){if(ht(m)&&m.value==="linear"){s=1;return}else if(ht(m)&&m.value==="radial"){s=2;return}}if(m.type===18){if(m.name==="from"){var p=$a.parse(t,m.values[0]);r.push({stop:In,color:p})}else if(m.name==="to"){var p=$a.parse(t,m.values[0]);r.push({stop:La,color:p})}else if(m.name==="color-stop"){var w=m.values.filter(gc);if(w.length===2){var p=$a.parse(t,w[1]),C=w[0];Ec(C)&&r.push({stop:{type:16,number:C.number*100,flags:C.flags},color:p})}}}}),s===1?{angle:(n+ts(180))%ts(360),stops:r,type:s}:{size:o,shape:i,stops:r,position:l,type:s}},kU="closest-side",SU="farthest-side",NU="closest-corner",UU="farthest-corner",FU="circle",QU="ellipse",PU="cover",RU="contain",D8=function(t,e){var n=0,r=3,s=[],i=[];return si(e).forEach(function(o,l){var u=!0;if(l===0){var h=!1;u=o.reduce(function(p,w){if(h)if(ht(w))switch(w.value){case"center":return i.push(I_),p;case"top":case"left":return i.push(In),p;case"right":case"bottom":return i.push(La),p}else(sn(w)||io(w))&&i.push(w);else if(ht(w))switch(w.value){case FU:return n=0,!1;case QU:return n=1,!1;case"at":return h=!0,!1;case kU:return r=0,!1;case PU:case SU:return r=1,!1;case RU:case NU:return r=2,!1;case UU:return r=3,!1}else if(io(w)||sn(w))return Array.isArray(r)||(r=[]),r.push(w),!1;return p},u)}if(u){var m=yp(t,o);s.push(m)}}),{size:r,shape:n,stops:s,position:i,type:2}},yf=function(t,e){var n=0,r=3,s=[],i=[];return si(e).forEach(function(o,l){var u=!0;if(l===0?u=o.reduce(function(m,p){if(ht(p))switch(p.value){case"center":return i.push(I_),!1;case"top":case"left":return i.push(In),!1;case"right":case"bottom":return i.push(La),!1}else if(sn(p)||io(p))return i.push(p),!1;return m},u):l===1&&(u=o.reduce(function(m,p){if(ht(p))switch(p.value){case FU:return n=0,!1;case QU:return n=1,!1;case RU:case kU:return r=0,!1;case SU:return r=1,!1;case NU:return r=2,!1;case PU:case UU:return r=3,!1}else if(io(p)||sn(p))return Array.isArray(r)||(r=[]),r.push(p),!1;return m},u)),u){var h=yp(t,o);s.push(h)}}),{size:r,shape:n,stops:s,position:i,type:2}},M8=function(t){return t.type===1},O8=function(t){return t.type===2},T_={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=LU[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function H8(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!LU[t.name])}var LU={"linear-gradient":L8,"-moz-linear-gradient":pf,"-ms-linear-gradient":pf,"-o-linear-gradient":pf,"-webkit-linear-gradient":pf,"radial-gradient":D8,"-moz-radial-gradient":yf,"-ms-radial-gradient":yf,"-o-radial-gradient":yf,"-webkit-radial-gradient":yf,"-webkit-gradient":j8},V8={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return gc(r)&&H8(r)}).map(function(r){return T_.parse(t,r)})}},K8={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ht(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},z8={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return si(e).map(function(n){return n.filter(sn)}).map(_U)}},G8={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return si(e).map(function(n){return n.filter(ht).map(function(r){return r.value}).join(" ")}).map(q8)}},q8=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Gl;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Gl||(Gl={}));var W8={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return si(e).map(function(n){return n.filter($8)})}},$8=function(t){return ht(t)||sn(t)},wp=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Z8=wp("top"),J8=wp("right"),X8=wp("bottom"),Y8=wp("left"),vp=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return _U(n.filter(sn))}}},e9=vp("top-left"),t9=vp("top-right"),n9=vp("bottom-right"),r9=vp("bottom-left"),xp=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},s9=xp("top"),i9=xp("right"),a9=xp("bottom"),o9=xp("left"),_p=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return ih(n)?n.number:0}}},A9=_p("top"),l9=_p("right"),c9=_p("bottom"),u9=_p("left"),d9={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},h9={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},f9={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).reduce(function(n,r){return n|m9(r.value)},0)}},m9=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},g9={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},p9={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},ig;(function(t){t.NORMAL="normal",t.STRICT="strict"})(ig||(ig={}));var y9={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return ig.STRICT;case"normal":default:return ig.NORMAL}}},w9={name:"line-height",initialValue:"normal",prefix:!1,type:4},GE=function(t,e){return ht(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:sn(t)?gt(t,e):e},v9={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:T_.parse(t,e)}},x9={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Ow={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Bp=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},_9=Bp("top"),B9=Bp("right"),b9=Bp("bottom"),C9=Bp("left"),E9={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},I9={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},bp=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},T9=bp("top"),k9=bp("right"),S9=bp("bottom"),N9=bp("left"),U9={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},F9={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Q9={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Mw(e[0],"none")?[]:si(e).map(function(n){for(var r={color:Hi.TRANSPARENT,offsetX:In,offsetY:In,blur:In},s=0,i=0;i<n.length;i++){var o=n[i];io(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:r.blur=o,s++):r.color=$a.parse(t,o)}return r})}},P9={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},R9={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=D9[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},L9=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},j9=function(t){var e=t.filter(function(u){return u.type===17}).map(function(u){return u.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[n,r,s,i,o,l]:null},D9={matrix:L9,matrix3d:j9},qE={type:16,number:50,flags:sh},M9=[qE,qE],O9={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(sn);return n.length!==2?M9:[n[0],n[1]]}},H9={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Gu;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Gu||(Gu={}));var V9={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Gu.BREAK_ALL;case"keep-all":return Gu.KEEP_ALL;case"normal":default:return Gu.NORMAL}}},K9={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Ec(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},jU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},z9={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Ec(e)?e.number:1}},G9={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},q9={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ht).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},W9={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},$9={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Z9={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Ec(e))return e.number;if(ht(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},J9={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ht).map(function(n){return n.value})}},X9={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},un=function(t,e){return(t&e)!==0},Y9={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},ez={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(xU),i=0;i<s.length;i++){var o=s[i],l=s[i+1];if(o.type===20){var u=l&&Ec(l)?l.number:1;r.push({counter:o.value,increment:u})}}return r}},tz={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(xU),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(ht(i)&&i.value!=="none"){var l=o&&Ec(o)?o.number:0;n.push({counter:i.value,reset:l})}}return n}},nz={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(ih).map(function(n){return jU.parse(t,n)})}},rz={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(k8);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var o=s[i].value,l=s[i+1].value;r.push({open:o,close:l})}return r}},WE=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},sz={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Mw(e[0],"none")?[]:si(e).map(function(n){for(var r={color:255,offsetX:In,offsetY:In,blur:In,spread:In,inset:!1},s=0,i=0;i<n.length;i++){var o=n[i];Mw(o,"inset")?r.inset=!0:io(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:s===2?r.blur=o:r.spread=o,s++):r.color=$a.parse(t,o)}return r})}},iz={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(ht).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},az={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},oz={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return ih(e)?e.number:0}},Az=function(){function t(e,n){var r,s;this.animationDuration=xe(e,nz,n.animationDuration),this.backgroundClip=xe(e,U8,n.backgroundClip),this.backgroundColor=xe(e,F8,n.backgroundColor),this.backgroundImage=xe(e,V8,n.backgroundImage),this.backgroundOrigin=xe(e,K8,n.backgroundOrigin),this.backgroundPosition=xe(e,z8,n.backgroundPosition),this.backgroundRepeat=xe(e,G8,n.backgroundRepeat),this.backgroundSize=xe(e,W8,n.backgroundSize),this.borderTopColor=xe(e,Z8,n.borderTopColor),this.borderRightColor=xe(e,J8,n.borderRightColor),this.borderBottomColor=xe(e,X8,n.borderBottomColor),this.borderLeftColor=xe(e,Y8,n.borderLeftColor),this.borderTopLeftRadius=xe(e,e9,n.borderTopLeftRadius),this.borderTopRightRadius=xe(e,t9,n.borderTopRightRadius),this.borderBottomRightRadius=xe(e,n9,n.borderBottomRightRadius),this.borderBottomLeftRadius=xe(e,r9,n.borderBottomLeftRadius),this.borderTopStyle=xe(e,s9,n.borderTopStyle),this.borderRightStyle=xe(e,i9,n.borderRightStyle),this.borderBottomStyle=xe(e,a9,n.borderBottomStyle),this.borderLeftStyle=xe(e,o9,n.borderLeftStyle),this.borderTopWidth=xe(e,A9,n.borderTopWidth),this.borderRightWidth=xe(e,l9,n.borderRightWidth),this.borderBottomWidth=xe(e,c9,n.borderBottomWidth),this.borderLeftWidth=xe(e,u9,n.borderLeftWidth),this.boxShadow=xe(e,sz,n.boxShadow),this.color=xe(e,d9,n.color),this.direction=xe(e,h9,n.direction),this.display=xe(e,f9,n.display),this.float=xe(e,g9,n.cssFloat),this.fontFamily=xe(e,W9,n.fontFamily),this.fontSize=xe(e,$9,n.fontSize),this.fontStyle=xe(e,X9,n.fontStyle),this.fontVariant=xe(e,J9,n.fontVariant),this.fontWeight=xe(e,Z9,n.fontWeight),this.letterSpacing=xe(e,p9,n.letterSpacing),this.lineBreak=xe(e,y9,n.lineBreak),this.lineHeight=xe(e,w9,n.lineHeight),this.listStyleImage=xe(e,v9,n.listStyleImage),this.listStylePosition=xe(e,x9,n.listStylePosition),this.listStyleType=xe(e,Ow,n.listStyleType),this.marginTop=xe(e,_9,n.marginTop),this.marginRight=xe(e,B9,n.marginRight),this.marginBottom=xe(e,b9,n.marginBottom),this.marginLeft=xe(e,C9,n.marginLeft),this.opacity=xe(e,z9,n.opacity);var i=xe(e,E9,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=xe(e,I9,n.overflowWrap),this.paddingTop=xe(e,T9,n.paddingTop),this.paddingRight=xe(e,k9,n.paddingRight),this.paddingBottom=xe(e,S9,n.paddingBottom),this.paddingLeft=xe(e,N9,n.paddingLeft),this.paintOrder=xe(e,iz,n.paintOrder),this.position=xe(e,F9,n.position),this.textAlign=xe(e,U9,n.textAlign),this.textDecorationColor=xe(e,G9,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=xe(e,q9,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=xe(e,Q9,n.textShadow),this.textTransform=xe(e,P9,n.textTransform),this.transform=xe(e,R9,n.transform),this.transformOrigin=xe(e,O9,n.transformOrigin),this.visibility=xe(e,H9,n.visibility),this.webkitTextStrokeColor=xe(e,az,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=xe(e,oz,n.webkitTextStrokeWidth),this.wordBreak=xe(e,V9,n.wordBreak),this.zIndex=xe(e,K9,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Za(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return un(this.display,4)||un(this.display,33554432)||un(this.display,268435456)||un(this.display,536870912)||un(this.display,67108864)||un(this.display,134217728)},t}(),lz=function(){function t(e,n){this.content=xe(e,Y9,n.content),this.quotes=xe(e,rz,n.quotes)}return t}(),$E=function(){function t(e,n){this.counterIncrement=xe(e,ez,n.counterIncrement),this.counterReset=xe(e,tz,n.counterReset)}return t}(),xe=function(t,e,n){var r=new wU,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var i=new vU(r.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(t,ht(o)?o.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return pp.parse(t,i.parseComponentValue());case"color":return $a.parse(t,i.parseComponentValue());case"image":return T_.parse(t,i.parseComponentValue());case"length":var l=i.parseComponentValue();return io(l)?l:In;case"length-percentage":var u=i.parseComponentValue();return sn(u)?u:In;case"time":return jU.parse(t,i.parseComponentValue())}break}},cz="data-html2canvas-debug",uz=function(t){var e=t.getAttribute(cz);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Hw=function(t,e){var n=uz(t);return n===1||e===n},ii=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Hw(n,3))debugger;this.styles=new Az(e,window.getComputedStyle(n,null)),zw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=mp(this.context,n),Hw(n,4)&&(this.flags|=16)}return t}(),dz="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ZE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wf=0;wf<ZE.length;wf++)Bu[ZE.charCodeAt(wf)]=wf;var hz=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)i=Bu[t.charCodeAt(r)],o=Bu[t.charCodeAt(r+1)],l=Bu[t.charCodeAt(r+2)],u=Bu[t.charCodeAt(r+3)],m[s++]=i<<2|o>>4,m[s++]=(o&15)<<4|l>>2,m[s++]=(l&3)<<6|u&63;return h},fz=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},mz=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},nA=5,k_=11,P0=2,gz=k_-nA,DU=65536>>nA,pz=1<<nA,R0=pz-1,yz=1024>>nA,wz=DU+yz,vz=wz,xz=32,_z=vz+xz,Bz=65536>>k_,bz=1<<gz,Cz=bz-1,JE=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Ez=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},Iz=function(t,e){var n=hz(t),r=Array.isArray(n)?mz(n):new Uint32Array(n),s=Array.isArray(n)?fz(n):new Uint16Array(n),i=24,o=JE(s,i/2,r[4]/2),l=r[5]===2?JE(s,(i+r[4])/2):Ez(r,Math.ceil((i+r[4])/4));return new Tz(r[0],r[1],r[2],r[3],o,l)},Tz=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>nA],n=(n<<P0)+(e&R0),this.data[n];if(e<=65535)return n=this.index[DU+(e-55296>>nA)],n=(n<<P0)+(e&R0),this.data[n];if(e<this.highStart)return n=_z-Bz+(e>>k_),n=this.index[n],n+=e>>nA&Cz,n=this.index[n],n=(n<<P0)+(e&R0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),XE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kz=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vf=0;vf<XE.length;vf++)kz[XE.charCodeAt(vf)]=vf;var Sz=1,L0=2,j0=3,YE=4,eI=5,Nz=7,tI=8,D0=9,M0=10,nI=11,rI=12,sI=13,iI=14,O0=15,Uz=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Fz=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},Qz=Iz(dz),Zr="",H0="",Pz=function(t){return Qz.get(t)},Rz=function(t,e,n){var r=n-2,s=e[r],i=e[n-1],o=e[n];if(i===L0&&o===j0)return Zr;if(i===L0||i===j0||i===YE||o===L0||o===j0||o===YE)return H0;if(i===tI&&[tI,D0,nI,rI].indexOf(o)!==-1||(i===nI||i===D0)&&(o===D0||o===M0)||(i===rI||i===M0)&&o===M0||o===sI||o===eI||o===Nz||i===Sz)return Zr;if(i===sI&&o===iI){for(;s===eI;)s=e[--r];if(s===iI)return Zr}if(i===O0&&o===O0){for(var l=0;s===O0;)l++,s=e[--r];if(l%2===0)return Zr}return H0},Lz=function(t){var e=Uz(t),n=e.length,r=0,s=0,i=e.map(Pz);return{next:function(){if(r>=n)return{done:!0,value:null};for(var o=Zr;r<n&&(o=Rz(e,i,++r))===Zr;);if(o!==Zr||r===n){var l=Fz.apply(null,e.slice(s,r));return s=r,{value:l,done:!1}}return{done:!0,value:null}}}},jz=function(t){for(var e=Lz(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},Dz=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(r),i===e)return!0}}return!1},Mz=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=gp(r.data).map(function(u){return Zt(u)}),i=0,o={},l=s.every(function(u,h){n.setStart(r,i),n.setEnd(r,i+u.length);var m=n.getBoundingClientRect();i+=u.length;var p=m.x>o.x||m.y>o.y;return o=m,h===0?!0:p});return t.body.removeChild(e),l},Oz=function(){return typeof new Image().crossOrigin<"u"},Hz=function(){return typeof new XMLHttpRequest().responseType=="string"},Vz=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},aI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Kz=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=e.toDataURL();s.src=i;var o=Vw(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),oI(o).then(function(l){r.drawImage(l,0,0);var u=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var h=t.createElement("div");return h.style.backgroundImage="url("+i+")",h.style.height=n+"px",aI(u)?oI(Vw(n,n,0,0,h)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),aI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Vw=function(t,e,n,r,s){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(s),o},oI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Cn={get SUPPORT_RANGE_BOUNDS(){var t=Dz(document);return Object.defineProperty(Cn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Cn.SUPPORT_RANGE_BOUNDS&&Mz(document);return Object.defineProperty(Cn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Vz(document);return Object.defineProperty(Cn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Kz(document):Promise.resolve(!1);return Object.defineProperty(Cn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Oz();return Object.defineProperty(Cn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Hz();return Object.defineProperty(Cn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Cn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Cn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},qu=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),zz=function(t,e,n,r){var s=Wz(e,n),i=[],o=0;return s.forEach(function(l){if(n.textDecorationLine.length||l.trim().length>0)if(Cn.SUPPORT_RANGE_BOUNDS){var u=AI(r,o,l.length).getClientRects();if(u.length>1){var h=S_(l),m=0;h.forEach(function(w){i.push(new qu(w,Zi.fromDOMRectList(t,AI(r,m+o,w.length).getClientRects()))),m+=w.length})}else i.push(new qu(l,Zi.fromDOMRectList(t,u)))}else{var p=r.splitText(l.length);i.push(new qu(l,Gz(t,r))),r=p}else Cn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));o+=l.length}),i},Gz=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var i=mp(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return Zi.EMPTY},AI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},S_=function(t){if(Cn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return jz(t)},qz=function(t,e){if(Cn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return Zz(t,e)},Wz=function(t,e){return e.letterSpacing!==0?S_(t):qz(t,e)},$z=[32,160,4961,65792,65793,4153,4241],Zz=function(t,e){for(var n=BK(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,i=function(){if(s.value){var o=s.value.slice(),l=gp(o),u="";l.forEach(function(h){$z.indexOf(h)===-1?u+=Zt(h):(u.length&&r.push(u),r.push(Zt(h)),u="")}),u.length&&r.push(u)}};!(s=n.next()).done;)i();return r},Jz=function(){function t(e,n,r){this.text=Xz(n.data,r.textTransform),this.textBounds=zz(e,this.text,r,n)}return t}(),Xz=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Yz,eG);case 2:return t.toUpperCase();default:return t}},Yz=/(^|\s|:|-|\(|\))([a-z])/g,eG=function(t,e,n){return t.length>0?e+n.toUpperCase():t},MU=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(ii),OU=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(ii),HU=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=new XMLSerializer,o=mp(n,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(ii),VU=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(ii),Kw=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(ii),tG=[{type:15,flags:0,unit:"px",number:3}],nG=[{type:16,flags:0,number:50}],rG=function(t){return t.width>t.height?new Zi(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Zi(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},sG=function(t){var e=t.type===iG?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},ag="checkbox",og="radio",iG="password",lI=707406591,N_=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=sG(r),(s.type===ag||s.type===og)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=rG(s.bounds)),s.type){case ag:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=tG;break;case og:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=nG;break}return s}return e}(ii),KU=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(ii),zU=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(ii),GU=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=WU(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?zu(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Hi.TRANSPARENT,o=r.contentWindow.document.body?zu(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Hi.TRANSPARENT;s.backgroundColor=Za(i)?Za(o)?s.styles.backgroundColor:o:i}}catch{}return s}return e}(ii),aG=["OL","UL","MENU"],nm=function(t,e,n,r){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,$U(s)&&s.data.trim().length>0)n.textNodes.push(new Jz(t,s,n.styles));else if(Ul(s))if(YU(s)&&s.assignedNodes)s.assignedNodes().forEach(function(l){return nm(t,l,n,r)});else{var o=qU(t,s);o.styles.isVisible()&&(oG(s,o,r)?o.flags|=4:AG(o.styles)&&(o.flags|=2),aG.indexOf(s.tagName)!==-1&&(o.flags|=8),n.elements.push(o),s.slot,s.shadowRoot?nm(t,s.shadowRoot,o,r):!Ag(s)&&!ZU(s)&&!lg(s)&&nm(t,s,o,r))}},qU=function(t,e){return Gw(e)?new MU(t,e):JU(e)?new OU(t,e):ZU(e)?new HU(t,e):lG(e)?new VU(t,e):cG(e)?new Kw(t,e):uG(e)?new N_(t,e):lg(e)?new KU(t,e):Ag(e)?new zU(t,e):XU(e)?new GU(t,e):new ii(t,e)},WU=function(t,e){var n=qU(t,e);return n.flags|=4,nm(t,e,n,n),n},oG=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||U_(t)&&n.styles.isTransparent()},AG=function(t){return t.isPositioned()||t.isFloating()},$U=function(t){return t.nodeType===Node.TEXT_NODE},Ul=function(t){return t.nodeType===Node.ELEMENT_NODE},zw=function(t){return Ul(t)&&typeof t.style<"u"&&!rm(t)},rm=function(t){return typeof t.className=="object"},lG=function(t){return t.tagName==="LI"},cG=function(t){return t.tagName==="OL"},uG=function(t){return t.tagName==="INPUT"},dG=function(t){return t.tagName==="HTML"},ZU=function(t){return t.tagName==="svg"},U_=function(t){return t.tagName==="BODY"},JU=function(t){return t.tagName==="CANVAS"},cI=function(t){return t.tagName==="VIDEO"},Gw=function(t){return t.tagName==="IMG"},XU=function(t){return t.tagName==="IFRAME"},uI=function(t){return t.tagName==="STYLE"},hG=function(t){return t.tagName==="SCRIPT"},Ag=function(t){return t.tagName==="TEXTAREA"},lg=function(t){return t.tagName==="SELECT"},YU=function(t){return t.tagName==="SLOT"},dI=function(t){return t.tagName.indexOf("-")>0},fG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,i=!0;r!==null&&r.forEach(function(l){var u=n.counters[l.counter];u&&l.increment!==0&&(i=!1,u.length||u.push(1),u[Math.max(0,u.length-1)]+=l.increment)});var o=[];return i&&s.forEach(function(l){var u=n.counters[l.counter];o.push(l.counter),u||(u=n.counters[l.counter]=[]),u.push(l.reset)}),o},t}(),hI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},fI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ll=function(t,e,n,r,s,i){return t<e||t>n?Nd(t,s,i.length>0):r.integers.reduce(function(o,l,u){for(;t>=l;)t-=l,o+=r.values[u];return o},"")+i},eF=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},$t=function(t,e,n,r,s){var i=n-e+1;return(t<0?"-":"")+(eF(Math.abs(t),i,r,function(o){return Zt(Math.floor(o%i)+e)})+s)},Fo=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return eF(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},pl=1,wa=2,va=4,bu=8,Ci=function(t,e,n,r,s,i){if(t<-9999||t>9999)return Nd(t,4,s.length>0);var o=Math.abs(t),l=s;if(o===0)return e[0]+l;for(var u=0;o>0&&u<=4;u++){var h=o%10;h===0&&un(i,pl)&&l!==""?l=e[h]+l:h>1||h===1&&u===0||h===1&&u===1&&un(i,wa)||h===1&&u===1&&un(i,va)&&t>100||h===1&&u>1&&un(i,bu)?l=e[h]+(u>0?n[u-1]:"")+l:h===1&&u>0&&(l=n[u-1]+l),o=Math.floor(o/10)}return(t<0?r:"")+l},mI="",gI="",pI="",V0="",Nd=function(t,e,n){var r=n?". ":"",s=n?"":"",i=n?", ":"",o=n?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=$t(t,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return Fo(t,"",s);case 6:return ll(t,1,3999,hI,3,r).toLowerCase();case 7:return ll(t,1,3999,hI,3,r);case 8:return $t(t,945,969,!1,r);case 9:return $t(t,97,122,!1,r);case 10:return $t(t,65,90,!1,r);case 11:return $t(t,1632,1641,!0,r);case 12:case 49:return ll(t,1,9999,fI,3,r);case 35:return ll(t,1,9999,fI,3,r).toLowerCase();case 13:return $t(t,2534,2543,!0,r);case 14:case 30:return $t(t,6112,6121,!0,r);case 15:return Fo(t,"",s);case 16:return Fo(t,"",s);case 17:case 48:return Ci(t,"",mI,"",s,wa|va|bu);case 47:return Ci(t,"",gI,"",s,pl|wa|va|bu);case 42:return Ci(t,"",mI,"",s,wa|va|bu);case 41:return Ci(t,"",gI,"",s,pl|wa|va|bu);case 26:return Ci(t,"","",pI,s,0);case 25:return Ci(t,"","",pI,s,pl|wa|va);case 31:return Ci(t,"","",V0,i,pl|wa|va);case 33:return Ci(t,"","",V0,i,0);case 32:return Ci(t,"","",V0,i,pl|wa|va);case 18:return $t(t,2406,2415,!0,r);case 20:return ll(t,1,19999,gG,3,r);case 21:return $t(t,2790,2799,!0,r);case 22:return $t(t,2662,2671,!0,r);case 22:return ll(t,1,10999,mG,3,r);case 23:return Fo(t,"");case 24:return Fo(t,"");case 27:return $t(t,3302,3311,!0,r);case 28:return Fo(t,"",s);case 29:return Fo(t,"",s);case 34:return $t(t,3792,3801,!0,r);case 37:return $t(t,6160,6169,!0,r);case 38:return $t(t,4160,4169,!0,r);case 39:return $t(t,2918,2927,!0,r);case 40:return $t(t,1776,1785,!0,r);case 43:return $t(t,3046,3055,!0,r);case 44:return $t(t,3174,3183,!0,r);case 45:return $t(t,3664,3673,!0,r);case 46:return $t(t,3872,3881,!0,r);case 3:default:return $t(t,48,57,!0,r)}},tF="data-html2canvas-ignore",yI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new fG,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=pG(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=s.contentWindow,u=l.document,h=vG(s).then(function(){return er(r,void 0,void 0,function(){var m,p;return Rn(this,function(w){switch(w.label){case 0:return this.scrolledElements.forEach(bG),l&&(l.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==n.top||l.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-n.left,l.scrollY-n.top,0,0))),m=this.options.onclone,p=this.clonedReferenceElement,typeof p>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:w.sent(),w.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,wG(u)]:[3,4];case 3:w.sent(),w.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(u,p)}).then(function(){return s})]:[2,s]}})})});return u.open(),u.write(_G(document.doctype)+"<html></html>"),BG(this.referenceElement.ownerDocument,i,o),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),h},t.prototype.createElementClone=function(e){if(Hw(e,2))debugger;if(JU(e))return this.createCanvasClone(e);if(cI(e))return this.createVideoClone(e);if(uI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return Gw(n)&&(Gw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),dI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return K0(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var l=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(l){var u=l.getContextAttributes();(u==null?void 0:u.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!Ul(n)||!hG(n)&&!n.hasAttribute(tF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Ul(n)||!uI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Ul(i)&&YU(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return s.appendChildNode(n,l,r)})}else this.appendChildNode(n,i,r)},t.prototype.cloneNode=function(e,n){if($U(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Ul(e)&&(zw(e)||rm(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),l=r.getComputedStyle(e,":after");this.referenceElement===e&&zw(s)&&(this.clonedReferenceElement=s),U_(s)&&IG(s);var u=this.counters.parse(new $E(this.context,i)),h=this.resolvePseudoContent(e,s,o,Wu.BEFORE);dI(e)&&(n=!0),cI(e)||this.cloneChildNodes(e,s,n),h&&s.insertBefore(h,s.firstChild);var m=this.resolvePseudoContent(e,s,l,Wu.AFTER);return m&&s.appendChild(m),this.counters.pop(u),(i&&(this.options.copyStyles||rm(e))&&!XU(e)||n)&&K0(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Ag(e)||lg(e))&&(Ag(s)||lg(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var i=this;if(r){var o=r.content,l=n.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new $E(this.context,r));var u=new lz(this.context,r),h=l.createElement("html2canvaspseudoelement");K0(r,h),u.content.forEach(function(p){if(p.type===0)h.appendChild(l.createTextNode(p.value));else if(p.type===22){var w=l.createElement("img");w.src=p.value,w.style.opacity="1",h.appendChild(w)}else if(p.type===18){if(p.name==="attr"){var C=p.values.filter(ht);C.length&&h.appendChild(l.createTextNode(e.getAttribute(C[0].value)||""))}else if(p.name==="counter"){var b=p.values.filter(gc),x=b[0],U=b[1];if(x&&ht(x)){var T=i.counters.getCounterValue(x.value),E=U&&ht(U)?Ow.parse(i.context,U.value):3;h.appendChild(l.createTextNode(Nd(T,E,!1)))}}else if(p.name==="counters"){var N=p.values.filter(gc),x=N[0],O=N[1],U=N[2];if(x&&ht(x)){var H=i.counters.getCounterValues(x.value),M=U&&ht(U)?Ow.parse(i.context,U.value):3,I=O&&O.type===0?O.value:"",B=H.map(function(D){return Nd(D,M,!1)}).join(I);h.appendChild(l.createTextNode(B))}}}else if(p.type===20)switch(p.value){case"open-quote":h.appendChild(l.createTextNode(WE(u.quotes,i.quoteDepth++,!0)));break;case"close-quote":h.appendChild(l.createTextNode(WE(u.quotes,--i.quoteDepth,!1)));break;default:h.appendChild(l.createTextNode(p.value))}}),h.className=qw+" "+Ww;var m=s===Wu.BEFORE?" "+qw:" "+Ww;return rm(n)?n.className.baseValue+=m:n.className+=m,h}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Wu;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Wu||(Wu={}));var pG=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(tF,"true"),t.body.appendChild(n),n},yG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},wG=function(t){return Promise.all([].slice.call(t.images,0).map(yG))},vG=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},xG=["all","d","content"],K0=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);xG.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},_G=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},BG=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},bG=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},CG=":before",EG=":after",qw="___html2canvas___pseudoelement_before",Ww="___html2canvas___pseudoelement_after",wI=`{
    content: "" !important;
    display: none !important;
}`,IG=function(t){TG(t,"."+qw+CG+wI+`
         .`+Ww+EG+wI)},TG=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},nF=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),kG=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(G0(e)||FG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return er(this,void 0,void 0,function(){var n,r,s,i,o=this;return Rn(this,function(l){switch(l.label){case 0:return n=nF.isSameOrigin(e),r=!z0(e)&&this._options.useCORS===!0&&Cn.SUPPORT_CORS_IMAGES&&!n,s=!z0(e)&&!n&&!G0(e)&&typeof this._options.proxy=="string"&&Cn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!z0(e)&&!G0(e)&&!s&&!r?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(u,h){var m=new Image;m.onload=function(){return u(m)},m.onerror=h,(QG(i)||r)&&(m.crossOrigin="anonymous"),m.src=i,m.complete===!0&&setTimeout(function(){return u(m)},500),o._options.imageTimeout>0&&setTimeout(function(){return h("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,o){var l=Cn.SUPPORT_RESPONSE_TYPE?"blob":"text",u=new XMLHttpRequest;u.onload=function(){if(u.status===200)if(l==="text")i(u.response);else{var p=new FileReader;p.addEventListener("load",function(){return i(p.result)},!1),p.addEventListener("error",function(w){return o(w)},!1),p.readAsDataURL(u.response)}else o("Failed to proxy resource "+s+" with status code "+u.status)},u.onerror=o;var h=r.indexOf("?")>-1?"&":"?";if(u.open("GET",""+r+h+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&u instanceof XMLHttpRequest&&(u.responseType=l),n._options.imageTimeout){var m=n._options.imageTimeout;u.timeout=m,u.ontimeout=function(){return o("Timed out ("+m+"ms) proxying "+s)}}u.send()})},t}(),SG=/^data:image\/svg\+xml/i,NG=/^data:image\/.*;base64,/i,UG=/^data:image\/.*/i,FG=function(t){return Cn.SUPPORT_SVG_DRAWING||!PG(t)},z0=function(t){return UG.test(t)},QG=function(t){return NG.test(t)},G0=function(t){return t.substr(0,4)==="blob"},PG=function(t){return t.substr(-3).toLowerCase()==="svg"||SG.test(t)},ye=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),cl=function(t,e,n){return new ye(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},xf=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=cl(this.start,this.startControl,e),s=cl(this.startControl,this.endControl,e),i=cl(this.endControl,this.end,e),o=cl(r,s,e),l=cl(s,i,e),u=cl(o,l,e);return n?new t(this.start,r,o,u):new t(u,l,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Yr=function(t){return t.type===1},RG=function(){function t(e){var n=e.styles,r=e.bounds,s=_u(n.borderTopLeftRadius,r.width,r.height),i=s[0],o=s[1],l=_u(n.borderTopRightRadius,r.width,r.height),u=l[0],h=l[1],m=_u(n.borderBottomRightRadius,r.width,r.height),p=m[0],w=m[1],C=_u(n.borderBottomLeftRadius,r.width,r.height),b=C[0],x=C[1],U=[];U.push((i+u)/r.width),U.push((b+p)/r.width),U.push((o+x)/r.height),U.push((h+w)/r.height);var T=Math.max.apply(Math,U);T>1&&(i/=T,o/=T,u/=T,h/=T,p/=T,w/=T,b/=T,x/=T);var E=r.width-u,N=r.height-w,O=r.width-p,H=r.height-x,M=n.borderTopWidth,I=n.borderRightWidth,B=n.borderBottomWidth,S=n.borderLeftWidth,Q=gt(n.paddingTop,e.bounds.width),D=gt(n.paddingRight,e.bounds.width),K=gt(n.paddingBottom,e.bounds.width),j=gt(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?It(r.left+S/3,r.top+M/3,i-S/3,o-M/3,at.TOP_LEFT):new ye(r.left+S/3,r.top+M/3),this.topRightBorderDoubleOuterBox=i>0||o>0?It(r.left+E,r.top+M/3,u-I/3,h-M/3,at.TOP_RIGHT):new ye(r.left+r.width-I/3,r.top+M/3),this.bottomRightBorderDoubleOuterBox=p>0||w>0?It(r.left+O,r.top+N,p-I/3,w-B/3,at.BOTTOM_RIGHT):new ye(r.left+r.width-I/3,r.top+r.height-B/3),this.bottomLeftBorderDoubleOuterBox=b>0||x>0?It(r.left+S/3,r.top+H,b-S/3,x-B/3,at.BOTTOM_LEFT):new ye(r.left+S/3,r.top+r.height-B/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?It(r.left+S*2/3,r.top+M*2/3,i-S*2/3,o-M*2/3,at.TOP_LEFT):new ye(r.left+S*2/3,r.top+M*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?It(r.left+E,r.top+M*2/3,u-I*2/3,h-M*2/3,at.TOP_RIGHT):new ye(r.left+r.width-I*2/3,r.top+M*2/3),this.bottomRightBorderDoubleInnerBox=p>0||w>0?It(r.left+O,r.top+N,p-I*2/3,w-B*2/3,at.BOTTOM_RIGHT):new ye(r.left+r.width-I*2/3,r.top+r.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||x>0?It(r.left+S*2/3,r.top+H,b-S*2/3,x-B*2/3,at.BOTTOM_LEFT):new ye(r.left+S*2/3,r.top+r.height-B*2/3),this.topLeftBorderStroke=i>0||o>0?It(r.left+S/2,r.top+M/2,i-S/2,o-M/2,at.TOP_LEFT):new ye(r.left+S/2,r.top+M/2),this.topRightBorderStroke=i>0||o>0?It(r.left+E,r.top+M/2,u-I/2,h-M/2,at.TOP_RIGHT):new ye(r.left+r.width-I/2,r.top+M/2),this.bottomRightBorderStroke=p>0||w>0?It(r.left+O,r.top+N,p-I/2,w-B/2,at.BOTTOM_RIGHT):new ye(r.left+r.width-I/2,r.top+r.height-B/2),this.bottomLeftBorderStroke=b>0||x>0?It(r.left+S/2,r.top+H,b-S/2,x-B/2,at.BOTTOM_LEFT):new ye(r.left+S/2,r.top+r.height-B/2),this.topLeftBorderBox=i>0||o>0?It(r.left,r.top,i,o,at.TOP_LEFT):new ye(r.left,r.top),this.topRightBorderBox=u>0||h>0?It(r.left+E,r.top,u,h,at.TOP_RIGHT):new ye(r.left+r.width,r.top),this.bottomRightBorderBox=p>0||w>0?It(r.left+O,r.top+N,p,w,at.BOTTOM_RIGHT):new ye(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=b>0||x>0?It(r.left,r.top+H,b,x,at.BOTTOM_LEFT):new ye(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?It(r.left+S,r.top+M,Math.max(0,i-S),Math.max(0,o-M),at.TOP_LEFT):new ye(r.left+S,r.top+M),this.topRightPaddingBox=u>0||h>0?It(r.left+Math.min(E,r.width-I),r.top+M,E>r.width+I?0:Math.max(0,u-I),Math.max(0,h-M),at.TOP_RIGHT):new ye(r.left+r.width-I,r.top+M),this.bottomRightPaddingBox=p>0||w>0?It(r.left+Math.min(O,r.width-S),r.top+Math.min(N,r.height-B),Math.max(0,p-I),Math.max(0,w-B),at.BOTTOM_RIGHT):new ye(r.left+r.width-I,r.top+r.height-B),this.bottomLeftPaddingBox=b>0||x>0?It(r.left+S,r.top+Math.min(H,r.height-B),Math.max(0,b-S),Math.max(0,x-B),at.BOTTOM_LEFT):new ye(r.left+S,r.top+r.height-B),this.topLeftContentBox=i>0||o>0?It(r.left+S+j,r.top+M+Q,Math.max(0,i-(S+j)),Math.max(0,o-(M+Q)),at.TOP_LEFT):new ye(r.left+S+j,r.top+M+Q),this.topRightContentBox=u>0||h>0?It(r.left+Math.min(E,r.width+S+j),r.top+M+Q,E>r.width+S+j?0:u-S+j,h-(M+Q),at.TOP_RIGHT):new ye(r.left+r.width-(I+D),r.top+M+Q),this.bottomRightContentBox=p>0||w>0?It(r.left+Math.min(O,r.width-(S+j)),r.top+Math.min(N,r.height+M+Q),Math.max(0,p-(I+D)),w-(B+K),at.BOTTOM_RIGHT):new ye(r.left+r.width-(I+D),r.top+r.height-(B+K)),this.bottomLeftContentBox=b>0||x>0?It(r.left+S+j,r.top+H,Math.max(0,b-(S+j)),x-(B+K),at.BOTTOM_LEFT):new ye(r.left+S+j,r.top+r.height-(B+K))}return t}(),at;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(at||(at={}));var It=function(t,e,n,r,s){var i=4*((Math.sqrt(2)-1)/3),o=n*i,l=r*i,u=t+n,h=e+r;switch(s){case at.TOP_LEFT:return new xf(new ye(t,h),new ye(t,h-l),new ye(u-o,e),new ye(u,e));case at.TOP_RIGHT:return new xf(new ye(t,e),new ye(t+o,e),new ye(u,h-l),new ye(u,h));case at.BOTTOM_RIGHT:return new xf(new ye(u,e),new ye(u,e+l),new ye(t+o,h),new ye(t,h));case at.BOTTOM_LEFT:default:return new xf(new ye(u,h),new ye(u-o,h),new ye(t,e+l),new ye(t,e))}},cg=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},LG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},ug=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},jG=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),_f=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),DG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),MG=function(t){return t.type===0},rF=function(t){return t.type===1},OG=function(t){return t.type===2},vI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},HG=function(t,e,n,r,s){return t.map(function(i,o){switch(o){case 0:return i.add(e,n);case 1:return i.add(e+r,n);case 2:return i.add(e+r,n+s);case 3:return i.add(e,n+s)}return i})},sF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),iF=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new RG(this.container),this.container.styles.opacity<1&&this.effects.push(new DG(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new jG(r,s,i))}if(this.container.styles.overflowX!==0){var o=cg(this.curves),l=ug(this.curves);vI(o,l)?this.effects.push(new _f(o,6)):(this.effects.push(new _f(o,2)),this.effects.push(new _f(l,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(u){return!rF(u)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=cg(r.curves),l=ug(r.curves);vI(o,l)||s.unshift(new _f(l,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(u){return un(u.target,e)})},t}(),$w=function(t,e,n,r){t.container.elements.forEach(function(s){var i=un(s.flags,4),o=un(s.flags,2),l=new iF(s,t);un(s.styles.display,2048)&&r.push(l);var u=un(s.flags,8)?[]:r;if(i||o){var h=i||s.styles.isPositioned()?n:e,m=new sF(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var p=s.styles.zIndex.order;if(p<0){var w=0;h.negativeZIndex.some(function(b,x){return p>b.element.container.styles.zIndex.order?(w=x,!1):w>0}),h.negativeZIndex.splice(w,0,m)}else if(p>0){var C=0;h.positiveZIndex.some(function(b,x){return p>=b.element.container.styles.zIndex.order?(C=x+1,!1):C>0}),h.positiveZIndex.splice(C,0,m)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else s.styles.isFloating()?h.nonPositionedFloats.push(m):h.nonPositionedInlineLevel.push(m);$w(l,m,i?m:n,u)}else s.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),$w(l,e,n,u);un(s.flags,8)&&aF(s,u)})},aF=function(t,e){for(var n=t instanceof Kw?t.start:1,r=t instanceof Kw?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof VU&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=Nd(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},VG=function(t){var e=new iF(t,null),n=new sF(e),r=[];return $w(e,n,n,r),aF(e.container,r),n},xI=function(t,e){switch(e){case 0:return ns(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ns(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ns(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ns(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},KG=function(t,e){switch(e){case 0:return ns(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ns(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ns(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ns(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},zG=function(t,e){switch(e){case 0:return ns(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ns(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ns(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ns(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},GG=function(t,e){switch(e){case 0:return Bf(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Bf(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Bf(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Bf(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Bf=function(t,e){var n=[];return Yr(t)?n.push(t.subdivide(.5,!1)):n.push(t),Yr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},ns=function(t,e,n,r){var s=[];return Yr(t)?s.push(t.subdivide(.5,!1)):s.push(t),Yr(n)?s.push(n.subdivide(.5,!0)):s.push(n),Yr(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Yr(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},oF=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},dg=function(t){var e=t.styles,n=t.bounds,r=gt(e.paddingLeft,n.width),s=gt(e.paddingRight,n.width),i=gt(e.paddingTop,n.width),o=gt(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+i+o))},qG=function(t,e){return t===0?e.bounds:t===2?dg(e):oF(e)},WG=function(t,e){return t===0?e.bounds:t===2?dg(e):oF(e)},q0=function(t,e,n){var r=qG(yl(t.styles.backgroundOrigin,e),t),s=WG(yl(t.styles.backgroundClip,e),t),i=$G(yl(t.styles.backgroundSize,e),n,r),o=i[0],l=i[1],u=_u(yl(t.styles.backgroundPosition,e),r.width-o,r.height-l),h=ZG(yl(t.styles.backgroundRepeat,e),u,i,r,s),m=Math.round(r.left+u[0]),p=Math.round(r.top+u[1]);return[h,m,p,o,l]},ul=function(t){return ht(t)&&t.value===Gl.AUTO},bf=function(t){return typeof t=="number"},$G=function(t,e,n){var r=e[0],s=e[1],i=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(sn(o)&&l&&sn(l))return[gt(o,n.width),gt(l,n.height)];var u=bf(i);if(ht(o)&&(o.value===Gl.CONTAIN||o.value===Gl.COVER)){if(bf(i)){var h=n.width/n.height;return h<i!=(o.value===Gl.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var m=bf(r),p=bf(s),w=m||p;if(ul(o)&&(!l||ul(l))){if(m&&p)return[r,s];if(!u&&!w)return[n.width,n.height];if(w&&u){var C=m?r:s*i,b=p?s:r/i;return[C,b]}var x=m?r:n.width,U=p?s:n.height;return[x,U]}if(u){var T=0,E=0;return sn(o)?T=gt(o,n.width):sn(l)&&(E=gt(l,n.height)),ul(o)?T=E*i:(!l||ul(l))&&(E=T/i),[T,E]}var N=null,O=null;if(sn(o)?N=gt(o,n.width):l&&sn(l)&&(O=gt(l,n.height)),N!==null&&(!l||ul(l))&&(O=m&&p?N/r*s:n.height),O!==null&&ul(o)&&(N=m&&p?O/s*r:n.width),N!==null&&O!==null)return[N,O];throw new Error("Unable to calculate background-size for element")},yl=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},ZG=function(t,e,n,r,s){var i=e[0],o=e[1],l=n[0],u=n[1];switch(t){case 2:return[new ye(Math.round(r.left),Math.round(r.top+o)),new ye(Math.round(r.left+r.width),Math.round(r.top+o)),new ye(Math.round(r.left+r.width),Math.round(u+r.top+o)),new ye(Math.round(r.left),Math.round(u+r.top+o))];case 3:return[new ye(Math.round(r.left+i),Math.round(r.top)),new ye(Math.round(r.left+i+l),Math.round(r.top)),new ye(Math.round(r.left+i+l),Math.round(r.height+r.top)),new ye(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new ye(Math.round(r.left+i),Math.round(r.top+o)),new ye(Math.round(r.left+i+l),Math.round(r.top+o)),new ye(Math.round(r.left+i+l),Math.round(r.top+o+u)),new ye(Math.round(r.left+i),Math.round(r.top+o+u))];default:return[new ye(Math.round(s.left),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.height+s.top)),new ye(Math.round(s.left),Math.round(s.height+s.top))]}},JG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",_I="Hidden Text",XG=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),s.src=JG,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(_I)),r.appendChild(i),r.appendChild(s);var l=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(_I)),r.style.lineHeight="normal",s.style.verticalAlign="super";var u=s.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:l,middle:u}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),AF=function(){function t(e,n){this.context=e,this.options=n}return t}(),YG=1e4,e7=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new XG(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),OG(n)&&(this.ctx.globalAlpha=n.opacity),MG(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),rF(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return er(this,void 0,void 0,function(){var r;return Rn(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return er(this,void 0,void 0,function(){return Rn(this,function(r){switch(r.label){case 0:if(un(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var o=S_(n.text);o.reduce(function(l,u){return i.ctx.fillText(u,l,n.bounds.top+s),l+i.ctx.measureText(u).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=i7(n.fontFamily).join(", "),i=ih(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(n,r){return er(this,void 0,void 0,function(){var s,i,o,l,u,h,m,p,w=this;return Rn(this,function(C){return s=this.createFontStyle(r),i=s[0],o=s[1],l=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",u=this.fontMetrics.getMetrics(o,l),h=u.baseline,m=u.middle,p=r.paintOrder,n.textBounds.forEach(function(b){p.forEach(function(x){switch(x){case 0:w.ctx.fillStyle=yn(r.color),w.renderTextWithLetterSpacing(b,r.letterSpacing,h);var U=r.textShadow;U.length&&b.text.trim().length&&(U.slice(0).reverse().forEach(function(T){w.ctx.shadowColor=yn(T.color),w.ctx.shadowOffsetX=T.offsetX.number*w.options.scale,w.ctx.shadowOffsetY=T.offsetY.number*w.options.scale,w.ctx.shadowBlur=T.blur.number,w.renderTextWithLetterSpacing(b,r.letterSpacing,h)}),w.ctx.shadowColor="",w.ctx.shadowOffsetX=0,w.ctx.shadowOffsetY=0,w.ctx.shadowBlur=0),r.textDecorationLine.length&&(w.ctx.fillStyle=yn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(T){switch(T){case 1:w.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+h),b.bounds.width,1);break;case 2:w.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:w.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+m),b.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&b.text.trim().length&&(w.ctx.strokeStyle=yn(r.webkitTextStrokeColor),w.ctx.lineWidth=r.webkitTextStrokeWidth,w.ctx.lineJoin=window.chrome?"miter":"round",w.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+h)),w.ctx.strokeStyle="",w.ctx.lineWidth=0,w.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=dg(n),o=ug(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return er(this,void 0,void 0,function(){var r,s,i,o,l,u,E,E,h,m,p,w,O,C,b,H,x,U,T,E,N,O,H;return Rn(this,function(M){switch(M.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,o=0,l=r.textNodes,M.label=1;case 1:return o<l.length?(u=l[o],[4,this.renderTextNode(u,i)]):[3,4];case 2:M.sent(),M.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof MU))return[3,8];M.label=5;case 5:return M.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return E=M.sent(),this.renderReplacedElement(r,s,E),[3,8];case 7:return M.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof OU&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof HU))return[3,12];M.label=9;case 9:return M.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return E=M.sent(),this.renderReplacedElement(r,s,E),[3,12];case 11:return M.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof GU&&r.tree?(h=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,h.render(r.tree)]):[3,14];case 13:m=M.sent(),r.width&&r.height&&this.ctx.drawImage(m,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),M.label=14;case 14:if(r instanceof N_&&(p=Math.min(r.bounds.width,r.bounds.height),r.type===ag?r.checked&&(this.ctx.save(),this.path([new ye(r.bounds.left+p*.39363,r.bounds.top+p*.79),new ye(r.bounds.left+p*.16,r.bounds.top+p*.5549),new ye(r.bounds.left+p*.27347,r.bounds.top+p*.44071),new ye(r.bounds.left+p*.39694,r.bounds.top+p*.5649),new ye(r.bounds.left+p*.72983,r.bounds.top+p*.23),new ye(r.bounds.left+p*.84,r.bounds.top+p*.34085),new ye(r.bounds.left+p*.39363,r.bounds.top+p*.79)]),this.ctx.fillStyle=yn(lI),this.ctx.fill(),this.ctx.restore()):r.type===og&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+p/2,r.bounds.top+p/2,p/4,0,Math.PI*2,!0),this.ctx.fillStyle=yn(lI),this.ctx.fill(),this.ctx.restore())),t7(r)&&r.value.length){switch(w=this.createFontStyle(i),O=w[0],C=w[1],b=this.fontMetrics.getMetrics(O,C).baseline,this.ctx.font=O,this.ctx.fillStyle=yn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=r7(r.styles.textAlign),H=dg(r),x=0,r.styles.textAlign){case 1:x+=H.width/2;break;case 2:x+=H.width;break}U=H.add(x,0,0,-H.height/2+1),this.ctx.save(),this.path([new ye(H.left,H.top),new ye(H.left+H.width,H.top),new ye(H.left+H.width,H.top+H.height),new ye(H.left,H.top+H.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new qu(r.value,U),i.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!un(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(T=r.styles.listStyleImage,T.type!==0)return[3,18];E=void 0,N=T.url,M.label=15;case 15:return M.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return E=M.sent(),this.ctx.drawImage(E,r.bounds.left-(E.width+10),r.bounds.top),[3,18];case 17:return M.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(O=this.createFontStyle(i)[0],this.ctx.font=O,this.ctx.fillStyle=yn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",H=new Zi(r.bounds.left,r.bounds.top+gt(r.styles.paddingTop,r.bounds.width),r.bounds.width,GE(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new qu(n.listValue,H),i.letterSpacing,GE(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),M.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return er(this,void 0,void 0,function(){var r,s,T,i,o,T,l,u,T,h,m,T,p,w,T,C,b,T,x,U,T;return Rn(this,function(E){switch(E.label){case 0:if(un(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:E.sent(),r=0,s=n.negativeZIndex,E.label=2;case 2:return r<s.length?(T=s[r],[4,this.renderStack(T)]):[3,5];case 3:E.sent(),E.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:E.sent(),i=0,o=n.nonInlineLevel,E.label=7;case 7:return i<o.length?(T=o[i],[4,this.renderNode(T)]):[3,10];case 8:E.sent(),E.label=9;case 9:return i++,[3,7];case 10:l=0,u=n.nonPositionedFloats,E.label=11;case 11:return l<u.length?(T=u[l],[4,this.renderStack(T)]):[3,14];case 12:E.sent(),E.label=13;case 13:return l++,[3,11];case 14:h=0,m=n.nonPositionedInlineLevel,E.label=15;case 15:return h<m.length?(T=m[h],[4,this.renderStack(T)]):[3,18];case 16:E.sent(),E.label=17;case 17:return h++,[3,15];case 18:p=0,w=n.inlineLevel,E.label=19;case 19:return p<w.length?(T=w[p],[4,this.renderNode(T)]):[3,22];case 20:E.sent(),E.label=21;case 21:return p++,[3,19];case 22:C=0,b=n.zeroOrAutoZIndexOrTransformedOrOpacity,E.label=23;case 23:return C<b.length?(T=b[C],[4,this.renderStack(T)]):[3,26];case 24:E.sent(),E.label=25;case 25:return C++,[3,23];case 26:x=0,U=n.positiveZIndex,E.label=27;case 27:return x<U.length?(T=U[x],[4,this.renderStack(T)]):[3,30];case 28:E.sent(),E.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var o=Yr(s)?s.start:s;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Yr(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,s);var u=l.getContext("2d");return u.drawImage(n,0,0,n.width,n.height,0,0,r,s),l},e.prototype.renderBackgroundImage=function(n){return er(this,void 0,void 0,function(){var r,s,i,o,l,u;return Rn(this,function(h){switch(h.label){case 0:r=n.styles.backgroundImage.length-1,s=function(m){var p,w,C,Q,oe,Ae,j,J,B,b,Q,oe,Ae,j,J,x,U,T,E,N,O,H,M,I,B,S,Q,D,K,j,J,Y,oe,Ae,z,ae,ee,we,de,me,pe,he;return Rn(this,function(ie){switch(ie.label){case 0:if(m.type!==0)return[3,5];p=void 0,w=m.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,i.context.cache.match(w)];case 2:return p=ie.sent(),[3,4];case 3:return ie.sent(),i.context.logger.error("Error loading background-image "+w),[3,4];case 4:return p&&(C=q0(n,r,[p.width,p.height,p.width/p.height]),Q=C[0],oe=C[1],Ae=C[2],j=C[3],J=C[4],B=i.ctx.createPattern(i.resizeImage(p,j,J),"repeat"),i.renderRepeat(Q,B,oe,Ae)),[3,6];case 5:M8(m)?(b=q0(n,r,[null,null,null]),Q=b[0],oe=b[1],Ae=b[2],j=b[3],J=b[4],x=P8(m.angle,j,J),U=x[0],T=x[1],E=x[2],N=x[3],O=x[4],H=document.createElement("canvas"),H.width=j,H.height=J,M=H.getContext("2d"),I=M.createLinearGradient(T,N,E,O),KE(m.stops,U).forEach(function(Qe){return I.addColorStop(Qe.stop,yn(Qe.color))}),M.fillStyle=I,M.fillRect(0,0,j,J),j>0&&J>0&&(B=i.ctx.createPattern(H,"repeat"),i.renderRepeat(Q,B,oe,Ae))):O8(m)&&(S=q0(n,r,[null,null,null]),Q=S[0],D=S[1],K=S[2],j=S[3],J=S[4],Y=m.position.length===0?[I_]:m.position,oe=gt(Y[0],j),Ae=gt(Y[Y.length-1],J),z=R8(m,oe,Ae,j,J),ae=z[0],ee=z[1],ae>0&&ee>0&&(we=i.ctx.createRadialGradient(D+oe,K+Ae,0,D+oe,K+Ae,ae),KE(m.stops,ae*2).forEach(function(Qe){return we.addColorStop(Qe.stop,yn(Qe.color))}),i.path(Q),i.ctx.fillStyle=we,ae!==ee?(de=n.bounds.left+.5*n.bounds.width,me=n.bounds.top+.5*n.bounds.height,pe=ee/ae,he=1/pe,i.ctx.save(),i.ctx.translate(de,me),i.ctx.transform(1,0,0,pe,0,0),i.ctx.translate(-de,-me),i.ctx.fillRect(D,he*(K-me)+me,j,J*he),i.ctx.restore()):i.ctx.fill())),ie.label=6;case 6:return r--,[2]}})},i=this,o=0,l=n.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return o<l.length?(u=l[o],[5,s(u)]):[3,4];case 2:h.sent(),h.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return er(this,void 0,void 0,function(){return Rn(this,function(i){return this.path(xI(s,r)),this.ctx.fillStyle=yn(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,i){return er(this,void 0,void 0,function(){var o,l;return Rn(this,function(u){switch(u.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return u.sent(),[2];case 2:return o=KG(i,s),this.path(o),this.ctx.fillStyle=yn(n),this.ctx.fill(),l=zG(i,s),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return er(this,void 0,void 0,function(){var r,s,i,o,l,u,h,m,p=this;return Rn(this,function(w){switch(w.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!Za(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=n7(yl(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Za(r.backgroundColor)||(this.ctx.fillStyle=yn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:w.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(C){p.ctx.save();var b=cg(n.curves),x=C.inset?0:YG,U=HG(b,-x+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(p.path(b),p.ctx.clip(),p.mask(U)):(p.mask(b),p.ctx.clip(),p.path(U)),p.ctx.shadowOffsetX=C.offsetX.number+x,p.ctx.shadowOffsetY=C.offsetY.number,p.ctx.shadowColor=yn(C.color),p.ctx.shadowBlur=C.blur.number,p.ctx.fillStyle=C.inset?yn(C.color):"rgba(0,0,0,1)",p.ctx.fill(),p.ctx.restore()}),w.label=2;case 2:l=0,u=0,h=i,w.label=3;case 3:return u<h.length?(m=h[u],m.style!==0&&!Za(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,l,n.curves,2)]:[3,11]):[3,13];case 4:return w.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,l,n.curves,3)];case 6:return w.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,l,n.curves)];case 8:return w.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,l,n.curves)];case 10:w.sent(),w.label=11;case 11:l++,w.label=12;case 12:return u++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,i,o){return er(this,void 0,void 0,function(){var l,u,h,m,p,w,C,b,x,U,T,E,N,O,H,M,H,M;return Rn(this,function(I){return this.ctx.save(),l=GG(i,s),u=xI(i,s),o===2&&(this.path(u),this.ctx.clip()),Yr(u[0])?(h=u[0].start.x,m=u[0].start.y):(h=u[0].x,m=u[0].y),Yr(u[1])?(p=u[1].end.x,w=u[1].end.y):(p=u[1].x,w=u[1].y),s===0||s===2?C=Math.abs(h-p):C=Math.abs(m-w),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(u.slice(0,2)),b=r<3?r*3:r*2,x=r<3?r*2:r,o===3&&(b=r,x=r),U=!0,C<=b*2?U=!1:C<=b*2+x?(T=C/(2*b+x),b*=T,x*=T):(E=Math.floor((C+x)/(b+x)),N=(C-E*b)/(E-1),O=(C-(E+1)*b)/E,x=O<=0||Math.abs(x-N)<Math.abs(x-O)?N:O),U&&(o===3?this.ctx.setLineDash([0,b+x]):this.ctx.setLineDash([b,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=yn(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Yr(u[0])&&(H=u[3],M=u[0],this.ctx.beginPath(),this.formatPath([new ye(H.end.x,H.end.y),new ye(M.start.x,M.start.y)]),this.ctx.stroke()),Yr(u[1])&&(H=u[1],M=u[2],this.ctx.beginPath(),this.formatPath([new ye(H.end.x,H.end.y),new ye(M.start.x,M.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return er(this,void 0,void 0,function(){var r;return Rn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=yn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=VG(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(AF),t7=function(t){return t instanceof zU||t instanceof KU?!0:t instanceof N_&&t.type!==og&&t.type!==ag},n7=function(t,e){switch(t){case 0:return cg(e);case 2:return LG(e);case 1:default:return ug(e)}},r7=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},s7=["-apple-system","system-ui"],i7=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return s7.indexOf(e)===-1}):t},a7=function(t){ks(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return er(this,void 0,void 0,function(){var r,s;return Rn(this,function(i){switch(i.label){case 0:return r=Vw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,o7(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=yn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(AF),o7=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},A7=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,tf([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,tf([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,tf([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,tf([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),l7=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new A7({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new kG(this,e)}return t.instanceCount=1,t}(),c7=function(t,e){return e===void 0&&(e={}),u7(t,e)};typeof window<"u"&&nF.setContext(window);var u7=function(t,e){return er(void 0,void 0,void 0,function(){var n,r,s,i,o,l,u,h,m,p,w,C,b,x,U,T,E,N,O,H,I,M,I,B,S,Q,D,K,j,J,Y,oe,Ae,z,ae,ee,we,de,me,pe;return Rn(this,function(he){switch(he.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(B=e.allowTaint)!==null&&B!==void 0?B:!1,imageTimeout:(S=e.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},i=Tw({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},s),o={windowWidth:(K=e.windowWidth)!==null&&K!==void 0?K:r.innerWidth,windowHeight:(j=e.windowHeight)!==null&&j!==void 0?j:r.innerHeight,scrollX:(J=e.scrollX)!==null&&J!==void 0?J:r.pageXOffset,scrollY:(Y=e.scrollY)!==null&&Y!==void 0?Y:r.pageYOffset},l=new Zi(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),u=new l7(i,l),h=(oe=e.foreignObjectRendering)!==null&&oe!==void 0?oe:!1,m={allowTaint:(Ae=e.allowTaint)!==null&&Ae!==void 0?Ae:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:h,copyStyles:h},u.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),p=new yI(u,t,m),w=p.clonedReferenceElement,w?[4,p.toIFrame(n,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=he.sent(),b=U_(w)||dG(w)?H6(w.ownerDocument):mp(u,w),x=b.width,U=b.height,T=b.left,E=b.top,N=d7(u,w,e.backgroundColor),O={canvas:e.canvas,backgroundColor:N,scale:(ae=(z=e.scale)!==null&&z!==void 0?z:r.devicePixelRatio)!==null&&ae!==void 0?ae:1,x:((ee=e.x)!==null&&ee!==void 0?ee:0)+T,y:((we=e.y)!==null&&we!==void 0?we:0)+E,width:(de=e.width)!==null&&de!==void 0?de:Math.ceil(x),height:(me=e.height)!==null&&me!==void 0?me:Math.ceil(U)},h?(u.logger.debug("Document cloned, using foreign object rendering"),I=new a7(u,O),[4,I.render(w)]):[3,3];case 2:return H=he.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+T+","+E+" with size "+x+"x"+U+" using computed rendering"),u.logger.debug("Starting DOM parsing"),M=WU(u,w),N===M.styles.backgroundColor&&(M.styles.backgroundColor=Hi.TRANSPARENT),u.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),I=new e7(u,O),[4,I.render(M)];case 4:H=he.sent(),he.label=5;case 5:return(!((pe=e.removeContainer)!==null&&pe!==void 0)||pe)&&(yI.destroy(C)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,H]}})})},d7=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?zu(t,getComputedStyle(r.documentElement).backgroundColor):Hi.TRANSPARENT,i=r.body?zu(t,getComputedStyle(r.body).backgroundColor):Hi.TRANSPARENT,o=typeof n=="string"?zu(t,n):n===null?Hi.TRANSPARENT:4294967295;return e===r.documentElement?Za(s)?Za(i)?o:i:s:o};const h7={BRONZE:{gradient:"from-amber-600 via-amber-500 to-orange-600",accent:"bg-amber-400",icon:""},SILVER:{gradient:"from-gray-400 via-gray-300 to-slate-400",accent:"bg-gray-300",icon:""},GOLD:{gradient:"from-yellow-400 via-amber-400 to-yellow-500",accent:"bg-yellow-300",icon:""},PLATINUM:{gradient:"from-purple-500 via-indigo-500 to-purple-600",accent:"bg-purple-400",icon:""}};function f7({profile:t,isOpen:e,onClose:n}){const r=R.useRef(null),[s,i]=R.useState(!1),[o,l]=R.useState(!1);if(!e)return null;const u=(t==null?void 0:t.currentTier)||"BRONZE",h=h7[u],m=async()=>{var C;if(r.current){i(!0);try{const b=await c7(r.current,{scale:2,backgroundColor:null,useCORS:!0}),x=document.createElement("a");x.download=`soca-passport-${((C=t==null?void 0:t.displayName)==null?void 0:C.replace(/\s+/g,"-").toLowerCase())||"card"}.png`,x.href=b.toDataURL("image/png"),x.click()}catch(b){console.error("Error generating card:",b),alert("Could not download card. Please try again.")}finally{i(!1)}}},p=async()=>{const C={title:"My Soca Passport",text:`I'm a ${u} tier carnivalist with ${(t==null?void 0:t.totalCredits)||0} credits! Check out my Soca Passport on Carnival Planner.`,url:window.location.origin};if(navigator.share)try{await navigator.share(C)}catch(b){b.name!=="AbortError"&&console.error("Share error:",b)}else w()},w=async()=>{try{await navigator.clipboard.writeText(window.location.origin),l(!0),setTimeout(()=>l(!1),2e3)}catch(C){console.error("Copy error:",C)}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fadeIn",children:A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden",children:[A.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-20",children:A.jsx(ls,{className:"w-5 h-5"})}),A.jsxs("div",{className:"p-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 text-center",children:"Your Passport Card"}),A.jsxs("div",{ref:r,className:`relative bg-gradient-to-br ${h.gradient} rounded-2xl p-6 text-white shadow-xl overflow-hidden aspect-[1.586/1]`,children:[A.jsxs("div",{className:"absolute inset-0 opacity-10",children:[A.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 border-2 border-white rounded-full -translate-x-1/2 -translate-y-1/2"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 border-2 border-white rounded-full translate-x-1/4 translate-y-1/4"}),A.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 border border-white/50 rounded-full -translate-x-1/2 -translate-y-1/2"})]}),A.jsxs("div",{className:"relative flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm text-xl",children:h.icon}),A.jsxs("div",{children:[A.jsx("p",{className:"text-[10px] font-medium text-white/70 uppercase tracking-wider",children:"Soca Passport"}),A.jsxs("p",{className:"text-sm font-bold",children:[u," TIER"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-2xl font-black",children:(t==null?void 0:t.totalCredits)||0}),A.jsx("p",{className:"text-[10px] text-white/70 uppercase",children:"Credits"})]})]}),A.jsx("div",{className:"relative mb-4",children:A.jsx("p",{className:"text-xl font-black truncate",children:(t==null?void 0:t.displayName)||"Carnival Lover"})}),A.jsxs("div",{className:"relative grid grid-cols-3 gap-2 mb-4",children:[A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(Is,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:(t==null?void 0:t.totalEvents)||0}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Events"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(Er,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.countriesVisited)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Countries"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(Vu,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.unlockedAchievements)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Badges"})]})]}),A.jsxs("div",{className:"relative flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(mc,{className:"w-3 h-3 opacity-70"}),A.jsx("span",{className:"text-[10px] font-medium opacity-70",children:"Carnival Planner"})]}),A.jsx("p",{className:"text-[10px] font-mono opacity-50",children:new Date().getFullYear()})]})]})]}),A.jsxs("div",{className:"p-6 pt-0 grid grid-cols-2 gap-3",children:[A.jsxs("button",{onClick:m,disabled:s,className:"flex items-center justify-center gap-2 py-3 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-bold transition-colors disabled:opacity-50",children:[s?A.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):A.jsx(nh,{className:"w-5 h-5"}),"Download"]}),A.jsx("button",{onClick:p,className:"flex items-center justify-center gap-2 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-bold transition-colors",children:o?A.jsxs(A.Fragment,{children:[A.jsx(th,{className:"w-5 h-5 text-green-500"}),"Copied!"]}):A.jsxs(A.Fragment,{children:[A.jsx(eU,{className:"w-5 h-5"}),"Share"]})})]}),A.jsx("p",{className:"px-6 pb-4 text-xs text-gray-400 text-center",children:"Note: For best results, download requires the html2canvas library."})]})})}const W0={BRONZE:{bg:"bg-gradient-to-r from-amber-600 to-amber-700",text:"text-amber-100",border:"border-amber-500"},SILVER:{bg:"bg-gradient-to-r from-gray-400 to-gray-500",text:"text-gray-100",border:"border-gray-400"},GOLD:{bg:"bg-gradient-to-r from-yellow-400 to-amber-500",text:"text-yellow-100",border:"border-yellow-400"},PLATINUM:{bg:"bg-gradient-to-r from-purple-500 to-indigo-600",text:"text-purple-100",border:"border-purple-400"}},m7={1:{icon:tg,color:"text-yellow-400",bg:"bg-yellow-400/20"},2:{icon:yE,color:"text-gray-300",bg:"bg-gray-400/20"},3:{icon:yE,color:"text-amber-600",bg:"bg-amber-600/20"}};function g7({user:t,onBack:e}){const[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,l]=R.useState(null),[u,h]=R.useState(null);return R.useEffect(()=>{(async()=>{var p;i(!0),l(null);try{const w=rn(St),b=await Rt(w,"getPassportLeaderboard")({limit:50});if(r(b.data.leaderboard||[]),t){const x=(p=b.data.leaderboard)==null?void 0:p.findIndex(U=>U.userId===t.uid);x!==-1&&h(x+1)}}catch(w){console.error("Error loading leaderboard:",w),l(w.message)}finally{i(!1)}})()},[t]),s?A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] animate-pulse",children:[A.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-900/30 rounded-full mb-4",children:A.jsx(Ct,{className:"w-8 h-8 text-purple-500 animate-spin"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading leaderboard..."})]}):o?A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[A.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:A.jsx(Vu,{className:"w-8 h-8 text-red-500"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Unable to Load Leaderboard"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:o}),A.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Go Back"})]}):A.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:A.jsx(v_,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(Vu,{className:"w-6 h-6 text-yellow-500"}),"Leaderboard"]}),A.jsx("p",{className:"text-sm text-gray-500",children:"Top Carnival Passport Holders"})]}),u&&A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-sm text-gray-500",children:"Your Rank"}),A.jsxs("p",{className:"text-2xl font-black text-purple-500",children:["#",u]})]})]}),n.length>=3&&A.jsxs("div",{className:"flex items-end justify-center gap-2 mb-6 px-4",children:[A.jsxs("div",{className:"flex-1 max-w-[120px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-gray-200 to-gray-300 dark:from-gray-600 dark:to-gray-700 rounded-t-2xl p-3 text-center relative",children:[A.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",children:"2"}),A.jsx("div",{className:"w-12 h-12 mx-auto mb-2 mt-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden",children:n[1].profilePictureUrl?A.jsx("img",{src:n[1].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(Ws,{className:"w-6 h-6 text-gray-400"})}),A.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 truncate",children:n[1].displayName}),A.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:n[1].totalCredits})]}),A.jsx("div",{className:"h-16 bg-gray-300 dark:bg-gray-600 rounded-b-lg"})]}),A.jsxs("div",{className:"flex-1 max-w-[140px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-yellow-300 to-amber-400 dark:from-yellow-500 dark:to-amber-600 rounded-t-2xl p-4 text-center relative shadow-lg",children:[A.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:A.jsx(tg,{className:"w-8 h-8 text-yellow-500 drop-shadow-lg"})}),A.jsx("div",{className:"w-14 h-14 mx-auto mb-2 mt-4 rounded-full bg-white/80 dark:bg-gray-800 flex items-center justify-center overflow-hidden ring-4 ring-yellow-400/50",children:n[0].profilePictureUrl?A.jsx("img",{src:n[0].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(Ws,{className:"w-7 h-7 text-gray-400"})}),A.jsx("p",{className:"text-sm font-bold text-amber-900 dark:text-white truncate",children:n[0].displayName}),A.jsx("p",{className:"text-xl font-black text-amber-800 dark:text-yellow-100",children:n[0].totalCredits}),A.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${W0[n[0].currentTier||"BRONZE"].bg} ${W0[n[0].currentTier||"BRONZE"].text}`,children:n[0].currentTier})]}),A.jsx("div",{className:"h-24 bg-yellow-400 dark:bg-yellow-600 rounded-b-lg"})]}),A.jsxs("div",{className:"flex-1 max-w-[120px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-amber-200 to-amber-300 dark:from-amber-700 dark:to-amber-800 rounded-t-2xl p-3 text-center relative",children:[A.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",children:"3"}),A.jsx("div",{className:"w-12 h-12 mx-auto mb-2 mt-4 rounded-full bg-amber-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden",children:n[2].profilePictureUrl?A.jsx("img",{src:n[2].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(Ws,{className:"w-6 h-6 text-gray-400"})}),A.jsx("p",{className:"text-xs font-medium text-amber-800 dark:text-amber-100 truncate",children:n[2].displayName}),A.jsx("p",{className:"text-lg font-bold text-amber-900 dark:text-white",children:n[2].totalCredits})]}),A.jsx("div",{className:"h-10 bg-amber-400 dark:bg-amber-700 rounded-b-lg"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[A.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-2",children:[A.jsx(sU,{className:"w-5 h-5 text-purple-500"}),A.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:"All Rankings"}),A.jsxs("span",{className:"text-sm text-gray-400",children:["(",n.length," users)"]})]}),A.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:n.map((m,p)=>{const w=p+1,C=t&&m.userId===t.uid,b=m7[w],x=W0[m.currentTier||"BRONZE"];return A.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${C?"bg-purple-50 dark:bg-purple-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[A.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold ${b?`${b.bg} ${b.color}`:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:b?A.jsx(b.icon,{className:"w-5 h-5"}):A.jsx("span",{className:"text-sm",children:w})}),A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:m.profilePictureUrl?A.jsx("img",{src:m.profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(Ws,{className:"w-5 h-5 text-gray-400"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs("p",{className:`font-medium truncate ${C?"text-purple-600 dark:text-purple-400":"text-gray-800 dark:text-white"}`,children:[m.displayName,C&&A.jsx("span",{className:"ml-1 text-xs",children:"(You)"})]}),A.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${x.bg} ${x.text}`,children:m.currentTier})]}),A.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(ng,{className:"w-3 h-3"}),m.totalEvents," events"]}),A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(w_,{className:"w-3 h-3"}),m.achievementCount," badges"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m.totalCredits.toLocaleString()}),A.jsx("p",{className:"text-xs text-gray-400",children:"credits"})]})]},m.userId)})}),n.length===0&&A.jsxs("div",{className:"p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:A.jsx(Vu,{className:"w-8 h-8 text-gray-400"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No rankings yet"}),A.jsx("p",{className:"text-sm text-gray-400",children:"Be the first to check in and earn credits!"})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-5 text-white text-center",children:[A.jsx(z3,{className:"w-8 h-8 mx-auto mb-2"}),A.jsx("h3",{className:"font-bold text-lg",children:"Keep the vibes going!"}),A.jsx("p",{className:"text-white/80 text-sm",children:"Check in to more events to climb the leaderboard"})]})]})}function p7({user:t,profile:e,onBack:n}){const[r,s]=R.useState([]),[i,o]=R.useState(!0),[l,u]=R.useState(null),[h,m]=R.useState(null),[p,w]=R.useState(null);R.useEffect(()=>{C()},[]);const C=async()=>{o(!0);try{const x=rn(St),T=await Rt(x,"getAvailableRewards")();s(T.data.rewards)}catch(x){console.error("Failed to load rewards:",x),x.message.includes("internal")||x.message.includes("offline")?s([{id:"1",title:"Free Drink",cost:500,description:"Redeem for a rum punch",promoterId:"demo"},{id:"2",title:"VIP Upgrade",cost:1e3,description:"Skip the line access",promoterId:"demo"},{id:"3",title:"Band Discount",cost:2e3,description:"10% off costume",promoterId:"demo"}]):u("Failed to load rewards. Please try again.")}finally{o(!1)}},b=async x=>{if(!(e.totalCredits<x.cost)){m(x.id),u(null);try{const U=rn(St),E=await Rt(U,"redeemPromoterReward")({rewardId:x.id});w({title:x.title,code:E.data.redemptionCode}),C()}catch(U){console.error("Redemption failed:",U),U.message.includes("internal")||U.message.includes("offline")?w({title:x.title,code:"MOCK-"+Math.random().toString(36).substr(2,6).toUpperCase()}):u(U.message)}finally{m(null)}}};return p?A.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-in fade-in zoom-in duration-300",children:[A.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:A.jsx(L3,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),A.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Reward Redeemed!"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["You currently have access to ",A.jsx("strong",{children:p.title})]}),A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-xl mb-6 w-full max-w-sm",children:[A.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Redemption Code"}),A.jsx("p",{className:"text-3xl font-mono font-bold text-teal-600 dark:text-teal-400 tracking-widest",children:p.code})]}),A.jsxs("div",{className:"flex gap-3 w-full max-w-sm",children:[A.jsx("button",{onClick:()=>{w(null),n()},className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors",children:"Close"}),A.jsx("button",{onClick:()=>w(null),className:"flex-1 px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-medium transition-colors",children:"Redeem Another"})]})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[A.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:""}),A.jsx("h3",{className:"text-lg font-bold",children:"Rewards Market"}),A.jsx("div",{className:"ml-auto bg-teal-50 dark:bg-teal-900/20 px-3 py-1 rounded-full",children:A.jsxs("span",{className:"text-sm font-medium text-teal-700 dark:text-teal-300",children:[(e==null?void 0:e.totalCredits)||0," Credits"]})})]}),l&&A.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm flex items-center gap-2",children:[A.jsx(cp,{className:"w-4 h-4"}),l]}),i?A.jsx("div",{className:"flex justify-center p-12",children:A.jsx(Ct,{className:"w-8 h-8 text-teal-600 animate-spin"})}):r.length===0?A.jsxs("div",{className:"text-center py-12 text-gray-500",children:[A.jsx(Kl,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),A.jsx("p",{children:"No rewards available right now."})]}):A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.map(x=>{const U=((e==null?void 0:e.totalCredits)||0)>=x.cost;return A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsx("h4",{className:"font-bold text-lg",children:x.title}),A.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-medium",children:[x.cost," pts"]})]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex-1",children:x.description}),A.jsx("button",{onClick:()=>b(x),disabled:!U||h===x.id,className:`w-full py-2 rounded-lg font-medium transition-colors flex items-center justify-center gap-2
                                        ${U?"bg-teal-600 hover:bg-teal-700 text-white shadow-sm hover:shadow":"bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}
                                    `,children:h===x.id?A.jsx(Ct,{className:"w-4 h-4 animate-spin"}):A.jsxs(A.Fragment,{children:[A.jsx(Is,{className:"w-4 h-4"}),U?"Redeem Reward":"Insufficient Credits"]})})]},x.id)})})]})}function y7({user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s}){const[i,o]=R.useState("home"),[l,u]=R.useState(!1),[h,m]=R.useState(!1),[p,w]=R.useState(null),[C,b]=R.useState(0);R.useEffect(()=>{if(!t)return;if(s){w({totalCredits:1250,currentTier:"GOLD",tierProgress:{nextTier:"PLATINUM",creditsToNextTier:750,progressPercent:62},totalEvents:8,countriesVisited:["TT","BB"],unlockedAchievements:["first-checkin","island-hopper"],achievementPoints:150,achievementDefinitions:{}});return}(async()=>{try{const E=rn(St),O=await Rt(E,"getPassportProfile")();w(O.data)}catch(E){console.error("Error loading passport profile:",E)}})()},[t,C,s]);const x=T=>{u(!1),b(E=>E+1)},U=()=>{switch(i){case"stamps":return A.jsx(D6,{user:t,onBack:()=>o("home")});case"achievements":return A.jsx(O6,{profile:p,onBack:()=>o("home")});case"leaderboard":return A.jsx(g7,{user:t,onBack:()=>o("home")});case"rewards":return A.jsx(p7,{user:t,profile:p,onBack:()=>o("home")});default:return A.jsx(L6,{user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s,onOpenCheckin:()=>u(!0),onViewStamps:()=>o("stamps"),onViewAchievements:()=>o("achievements"),onViewLeaderboard:()=>o("leaderboard"),onViewRewards:()=>o("rewards")},C)}};return A.jsxs("div",{className:"min-h-[500px]",children:[i==="home"&&A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2.5 bg-teal-100 dark:bg-teal-900/30 rounded-xl",children:A.jsx(up,{className:"w-6 h-6 text-teal-600 dark:text-teal-400"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Soca Passport"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Your carnival journey"})]})]}),A.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-medium transition-colors",children:[A.jsx(eU,{className:"w-4 h-4"}),"Share"]})]}),U(),A.jsx(j6,{isOpen:l,onClose:()=>u(!1),onSuccess:x}),A.jsx(f7,{profile:p,isOpen:h,onClose:()=>m(!1)})]})}function BI({user:t,activeCarnivalId:e,carnivalData:n,scrapedEvents:r=[],squadMembers:s=[],budgetTotal:i=0,budgetSpent:o=0,isPremium:l,onAction:u}){var C;const h=R.useMemo(()=>{if(e){const T={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[e]||e.replace(/-/g," ");return n.find(N=>N.name.toLowerCase().includes(T.toLowerCase())||T.toLowerCase().includes(N.name.split("(")[0].trim().toLowerCase()))||n[0]}const b=new Date,x=[...n].sort((U,T)=>new Date(U.date)-new Date(T.date));return x.find(U=>new Date(U.date)>=b)||x[0]},[e,n]),[m,p]=R.useState({days:0,hours:0});R.useEffect(()=>{if(!h)return;const b=()=>{const E=new Date(h.date+"T00:00:00")-new Date;if(E>0){const N=Math.ceil(E/864e5),O=Math.floor(E/(1e3*60*60)%24);p({days:N,hours:O})}else p({days:0,hours:0})};b();const x=setInterval(b,6e4);return()=>clearInterval(x)},[h]);const w=R.useMemo(()=>r.length>0?r.slice(0,5):null,[r]);return A.jsxs("div",{className:"space-y-6 mb-8 animate-fadeIn",children:[A.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 shadow-2xl text-white",children:[A.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-pink-500/20 rounded-full blur-3xl -ml-10 -mb-10 animate-pulse"}),A.jsxs("div",{className:"relative z-10 p-6 sm:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"px-2 py-1 rounded-full bg-white/20 backdrop-blur-sm text-[10px] font-bold uppercase tracking-widest border border-white/10",children:e?"CURRENT MISSION":"UP NEXT"}),l&&A.jsxs("span",{className:"flex items-center px-2 py-1 rounded-full bg-yellow-400/20 text-yellow-300 text-[10px] font-bold uppercase tracking-widest",children:[A.jsx(Td,{className:"w-3 h-3 mr-1"})," Premium"]})]}),A.jsx("h2",{className:"text-3xl sm:text-4xl font-black tracking-tight leading-none mb-1",children:((C=h==null?void 0:h.name)==null?void 0:C.split("(")[0].trim())||"Carnival"}),A.jsx("p",{className:"text-white/80 text-sm font-medium",children:"Get ready for the road."})]}),A.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:m.days}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Days"})]}),A.jsx("div",{className:"h-8 w-px bg-white/20"}),A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:m.hours}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Hrs"})]})]})]}),w&&A.jsxs("div",{className:"mt-8 flex items-center gap-3 bg-black/20 rounded-xl p-2.5 backdrop-blur-sm overflow-hidden",children:[A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 px-2 py-0.5 bg-red-500 rounded text-[10px] font-bold uppercase animate-pulse",children:[A.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Live"]}),A.jsx("div",{className:"flex-1 overflow-hidden whitespace-nowrap",children:A.jsx("div",{className:"inline-block animate-marquee text-xs font-medium",children:w.map((b,x)=>A.jsxs("span",{className:"mr-8",children:[" ",A.jsx("span",{className:"font-bold text-pink-200",children:b.title}),b.venue&&A.jsxs("span",{className:"opacity-75",children:[" @ ",b.venue]}),b.price&&A.jsxs("span",{className:"text-green-300 ml-1",children:["($",b.price,")"]})]},b.id||x))})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[A.jsxs("div",{onClick:()=>u("Budget"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:A.jsx(dp,{className:"w-5 h-5"})}),A.jsx(Jf,{className:"w-4 h-4 text-gray-300 group-hover:text-blue-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Budget Spent"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:["$",o.toLocaleString(),A.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["/ $",i.toLocaleString()]})]}),i>0&&A.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full mt-2",children:A.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.min(o/i*100,100)}%`}})})]}),A.jsxs("div",{onClick:()=>u("Squad"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg text-green-600 dark:text-green-400",children:A.jsx(nr,{className:"w-5 h-5"})}),A.jsx(Jf,{className:"w-4 h-4 text-gray-300 group-hover:text-green-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Squad Online"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:[s.length+1,A.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"members"})]}),A.jsx("div",{className:"flex -space-x-2 mt-2",children:[...Array(Math.min(s.length+1,4))].map((b,x)=>A.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 border-2 border-white dark:border-gray-800"},x))})]}),A.jsxs("div",{onClick:()=>u("Map"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600 dark:text-purple-400",children:A.jsx(Er,{className:"w-5 h-5"})}),A.jsx(Jf,{className:"w-4 h-4 text-gray-300 group-hover:text-purple-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Live Events"}),A.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:r.length||"30+"}),A.jsx("p",{className:"text-[10px] text-purple-500 font-bold mt-1",children:" View Map"})]}),A.jsxs("div",{onClick:()=>u("Passport"),className:"bg-gradient-to-br from-teal-500 to-emerald-600 p-4 rounded-2xl shadow-sm shadow-teal-500/20 cursor-pointer hover:shadow-md hover:scale-[1.02] transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-lg text-white",children:A.jsx(Is,{className:"w-5 h-5"})}),A.jsx(x_,{className:"w-4 h-4 text-white/70 group-hover:text-white transition-colors"})]}),A.jsx("p",{className:"text-xs text-teal-100 font-medium",children:"Identity"}),A.jsx("p",{className:"text-lg font-bold text-white mt-0.5",children:"Passport"}),A.jsx("p",{className:"text-[10px] text-white/80 font-bold mt-1",children:"Launch App"})]})]})]})}function w7({onClose:t}){const e=[{icon:bA,title:"Plan Your Schedule",desc:"Add fetes, mas, and events to your itinerary"},{icon:dp,title:"Track Your Budget",desc:"Keep tabs on costume costs, accommodations, and more"},{icon:nr,title:"Squad Up",desc:"Create or join a squad to share plans with friends"},{icon:Er,title:"Map Your Adventure",desc:"Pin venues and see event locations (Premium)"},{icon:fc,title:"Share Memories",desc:"Upload photos to your private media vault (Premium)"},{icon:CA,title:"Vibes Player",desc:"Stream soca playlists while you plan"}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 p-6 rounded-t-2xl text-white text-center",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:A.jsx(ls,{className:"w-6 h-6"})}),A.jsx("h2",{className:"text-2xl font-black mb-1",children:"Welcome to Carnival Planner! "}),A.jsx("p",{className:"text-white/90 text-sm",children:"Your all-in-one Caribbean carnival companion"})]}),A.jsxs("div",{className:"p-6 space-y-4",children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm text-center mb-4",children:"Here's what you can do:"}),A.jsx("div",{className:"grid gap-3",children:e.map((n,r)=>A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[A.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg text-white flex-shrink-0",children:A.jsx(n.icon,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-sm",children:n.title}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:n.desc})]})]},r))})]}),A.jsxs("div",{className:"p-6 pt-0",children:[A.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-bold rounded-xl hover:opacity-90 transition-opacity shadow-lg shadow-purple-500/30",children:"Let's Go! "}),A.jsx("p",{className:"text-center text-xs text-gray-400 mt-3",children:'Tap "Help" in the footer anytime for guidance'})]})]})})}function v7({onClose:t}){const e=[{title:"Getting Started",items:[{icon:"",text:"Select your carnival from the dropdown at the top"},{icon:"",text:"Use the tabs to add budget items, schedule events, and more"},{icon:"",text:"Everything saves automatically to your account"}]},{title:"Free Features",items:[{icon:bA,text:"Schedule  Add fetes, mas bands, and events"},{icon:dp,text:"Budget  Track all your carnival expenses"},{icon:nr,text:"Squad  Create/join a group and chat with friends"},{icon:W2,text:'Voice Add  Say "Add Tribe Friday 3pm" to quick-add events'},{icon:CA,text:"Vibes Player  Stream soca playlists while planning"}]},{title:"Premium Features",items:[{icon:Er,text:"Map  Pin venues and view event locations"},{icon:fc,text:"Media Vault  Store and share carnival photos"},{icon:"",text:"Live Events  Daily-updated fete listings from ticket sites"},{icon:"",text:"Road Mode  Offline mesh chat via Bitchat"}]},{title:"Squad Mode",items:[{icon:"",text:"Create a squad to get a 6-digit share code"},{icon:"",text:"Friends join with your code to sync plans"},{icon:"",text:"Chat with your squad and the AI Carnival Concierge"},{icon:"",text:"Leaders can remove members if needed"}]}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800 p-4 flex items-center justify-between rounded-t-2xl",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(q3,{className:"w-6 h-6 text-purple-500"}),A.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"How to Use Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(ls,{className:"w-5 h-5"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[e.map((n,r)=>A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-purple-600 dark:text-purple-400 text-sm uppercase tracking-wider mb-3",children:n.title}),A.jsx("div",{className:"space-y-2",children:n.items.map((s,i)=>A.jsxs("div",{className:"flex items-start gap-3 p-2",children:[A.jsx("span",{className:"text-lg flex-shrink-0",children:typeof s.icon=="string"?s.icon:A.jsx(s.icon,{className:"w-5 h-5 text-gray-500"})}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:s.text})]},i))})]},r)),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:[A.jsx("h3",{className:"font-bold text-purple-800 dark:text-purple-300 mb-2",children:" Pro Tips"}),A.jsxs("ul",{className:"text-sm text-purple-700 dark:text-purple-400 space-y-1",children:[A.jsx("li",{children:" Use Demo Mode to try all features without signing up"}),A.jsx("li",{children:" Export your itinerary from the Info tab as a backup"}),A.jsx("li",{children:" The AI Concierge in Squad Chat can answer carnival questions"})]})]})]}),A.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 p-4 rounded-b-2xl",children:A.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Got it!"})})]})})}const bI={trinidad:"",jamaica:"",barbados:"",grenada:"",stlucia:"",antigua:"",bahamas:"",bermuda:"",stmaarten:"","stkitts-sugar-mas":"",nevis:"",dominica:"",vincymas:"",stthomas:"",stcroix:"",guyana:"",miami:"",atlanta:"","ny-labor-day":"",hollywood:"",tampa:"",toronto:"",nottinghill:"",japan:"","cayman-batabano":"",tobago:"",caymas:""},x7={trinidad:"Trinidad",jamaica:"Jamaica",barbados:"Crop Over",grenada:"Spicemas",stlucia:"St. Lucia",antigua:"Antigua",miami:"Miami",toronto:"Caribana",nottinghill:"Notting Hill",vincymas:"Vincy Mas",stmaarten:"St. Maarten",atlanta:"Atlanta","ny-labor-day":"NY Labor Day",bahamas:"Bahamas",bermuda:"Bermuda"};function _7({profileData:t,isOwnProfile:e,onEdit:n,currentUser:r}){const[s,i]=R.useState(!1);if(!t)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500 dark:text-gray-400",children:[A.jsx(Ws,{className:"w-16 h-16 mb-4 opacity-50"}),A.jsx("p",{className:"text-lg font-medium",children:"Profile not found"}),A.jsx("p",{className:"text-sm",children:"This masquerader hasn't created a public profile yet."})]});const{displayName:o="Carnival Lover",username:l,bio:u="",profilePhoto:h,coverPhoto:m,isPublic:p,carnivalHistory:w=[],stats:C={},socialLinks:b={}}=t,x=[...new Set(w.map(U=>U.carnivalId))];return A.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[A.jsxs("div",{className:"relative h-48 md:h-64 rounded-t-3xl overflow-hidden bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400",children:[m&&A.jsx("img",{src:m,alt:"Cover",className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e&&A.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[A.jsxs("button",{onClick:t.onAccessPromoter,className:"bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-full text-white text-xs font-bold hover:bg-white/30 transition-colors flex items-center gap-1.5",children:[A.jsx(Is,{className:"w-3.5 h-3.5"}),t.isPromoter?"Promoter Dashboard":"Become a Promoter"]}),A.jsx("button",{onClick:n,className:"p-2 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/30 transition-colors",children:A.jsx(J2,{className:"w-5 h-5 text-white"})})]}),A.jsx("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:p?A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-green-500/20 backdrop-blur-md rounded-full text-green-200 text-xs font-medium",children:[A.jsx(B_,{className:"w-3.5 h-3.5"})," Public"]}):A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-gray-500/20 backdrop-blur-md rounded-full text-gray-200 text-xs font-medium",children:[A.jsx(rh,{className:"w-3.5 h-3.5"})," Private"]})})]}),A.jsxs("div",{className:"relative px-6 pb-6 bg-white dark:bg-gray-800 rounded-b-3xl shadow-lg",children:[A.jsx("div",{className:"absolute -top-16 left-6",children:A.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:h?A.jsx("img",{src:h,alt:o,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(Ws,{className:"w-12 h-12 text-white"})})})}),A.jsxs("div",{className:"pt-20 md:pt-6 md:ml-40",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:o}),l&&A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",l]})]}),A.jsxs("div",{className:"flex gap-3",children:[b.instagram&&A.jsx("a",{href:`https://instagram.com/${b.instagram}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-full text-pink-600 dark:text-pink-400 hover:scale-110 transition-transform",children:A.jsx(G2,{className:"w-5 h-5"})}),b.twitter&&A.jsx("a",{href:`https://twitter.com/${b.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full text-blue-500 dark:text-blue-400 hover:scale-110 transition-transform",children:A.jsx(iU,{className:"w-5 h-5"})}),b.tiktok&&A.jsx("a",{href:`https://tiktok.com/@${b.tiktok}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-full text-gray-700 dark:text-gray-300 hover:scale-110 transition-transform",children:A.jsx(CA,{className:"w-5 h-5"})})]})]}),u&&A.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300 max-w-2xl",children:u})]}),A.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl",children:[A.jsx(Z2,{className:"w-6 h-6 mx-auto mb-2 text-purple-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carnivals"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl",children:[A.jsx(e6,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Countries"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-2xl",children:[A.jsx(nr,{className:"w-6 h-6 mx-auto mb-2 text-orange-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[...new Set(w.map(U=>U.band).filter(Boolean))].length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Bands"})]})]})]}),w.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(bA,{className:"w-5 h-5 text-purple-500"}),"Carnival History"]}),A.jsx("div",{className:"grid gap-3",children:w.sort((U,T)=>(T.year||0)-(U.year||0)).map((U,T)=>A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[A.jsx("div",{className:"text-3xl",children:bI[U.carnivalId]||""}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[x7[U.carnivalId]||U.carnivalId,U.year&&A.jsx("span",{className:"text-gray-400 font-normal ml-2",children:U.year})]}),U.band&&A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[U.band,U.section&&A.jsxs("span",{className:"ml-1",children:[" ",U.section]})]})]})]},T))})]}),x.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(Er,{className:"w-5 h-5 text-pink-500"}),"Countries Visited"]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:[...new Set(x.map(U=>bI[U]||""))].map((U,T)=>A.jsx("span",{className:"text-4xl hover:scale-125 transition-transform cursor-default",children:U},T))})]})]})}function B7({user:t,currentProfile:e,onSave:n,onClose:r,carnivals:s}){const[i,o]=R.useState(!1),[l,u]=R.useState(!1),[h,m]=R.useState(""),[p,w]=R.useState(""),[C,b]=R.useState(!1),[x,U]=R.useState({displayName:"",username:"",bio:"",isPublic:!1,socialLinks:{instagram:"",twitter:"",tiktok:""}}),[T,E]=R.useState(null),[N,O]=R.useState(null),[H,M]=R.useState(""),[I,B]=R.useState("");R.useEffect(()=>{var J,Y,oe;e?(U({displayName:e.displayName||(t==null?void 0:t.displayName)||"",username:e.username||"",bio:e.bio||"",isPublic:e.isPublic||!1,socialLinks:{instagram:((J=e.socialLinks)==null?void 0:J.instagram)||"",twitter:((Y=e.socialLinks)==null?void 0:Y.twitter)||"",tiktok:((oe=e.socialLinks)==null?void 0:oe.tiktok)||""}}),M(e.profilePhoto||""),B(e.coverPhoto||"")):U(Ae=>({...Ae,displayName:(t==null?void 0:t.displayName)||""}))},[e,t]);const S=async J=>{if(!J)return w(""),!0;if(!/^[a-z0-9_]{3,20}$/.test(J))return w("3-20 chars, lowercase letters, numbers, underscores only"),!1;if((e==null?void 0:e.username)===J)return w(""),!0;b(!0);try{return(await Bs(ze(Te,"usernames",J))).exists()?(w("This username is taken"),b(!1),!1):(w(""),b(!1),!0)}catch(oe){return console.error("Error checking username:",oe),b(!1),!0}},Q=J=>{const Y=J.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");U(Ae=>({...Ae,username:Y}));const oe=setTimeout(()=>S(Y),500);return()=>clearTimeout(oe)},D=(J,Y)=>{var z;const oe=(z=J.target.files)==null?void 0:z[0];if(!oe)return;if(oe.size>5*1024*1024){m("Image must be under 5MB");return}const Ae=new FileReader;Ae.onload=()=>{Y==="profile"?(E(oe),M(Ae.result)):(O(oe),B(Ae.result))},Ae.readAsDataURL(oe)},K=()=>{if(!s)return[];const J=[];return Object.entries(s).forEach(([Y,oe])=>{var Ae;(Ae=oe.costume)!=null&&Ae.band&&J.push({carnivalId:Y,year:new Date().getFullYear(),band:oe.costume.band,section:oe.costume.section||null})}),J},j=async()=>{if(t&&!(x.username&&!await S(x.username))){u(!0),m("");try{let J=(e==null?void 0:e.profilePhoto)||"",Y=(e==null?void 0:e.coverPhoto)||"";if(T){const ee=ro(so,`profiles/${t.uid}/avatar_${Date.now()}`);await dc(ee,T),J=await hc(ee)}if(N){const ee=ro(so,`profiles/${t.uid}/cover_${Date.now()}`);await dc(ee,N),Y=await hc(ee)}const oe=e==null?void 0:e.username,Ae=x.username;oe&&oe!==Ae&&await Xd(ze(Te,"usernames",oe)),Ae&&Ae!==oe&&await Hn(ze(Te,"usernames",Ae),{userId:t.uid,claimedAt:Ge.now()});const z=K(),ae={userId:t.uid,displayName:x.displayName||t.displayName||"Carnival Lover",username:x.username||null,bio:x.bio||"",profilePhoto:J,coverPhoto:Y,isPublic:x.isPublic,socialLinks:x.socialLinks,carnivalHistory:z,stats:{carnivalsAttended:z.length,countriesVisited:[...new Set(z.map(ee=>ee.carnivalId))].length,bandsPlayedWith:[...new Set(z.map(ee=>ee.band).filter(Boolean))]},updatedAt:Ge.now(),...e?{}:{createdAt:Ge.now()}};await Hn(ze(Te,"userProfiles",t.uid),ae,{merge:!0}),n==null||n(ae),r==null||r()}catch(J){console.error("Error saving profile:",J),m(J.message||"Failed to save profile")}finally{u(!1)}}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700",children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Profile"}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:A.jsx(ls,{className:"w-5 h-5 text-gray-500"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"h-32 rounded-2xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:I&&A.jsx("img",{src:I,alt:"Cover",className:"w-full h-full object-cover"})}),A.jsxs("label",{className:"absolute bottom-2 right-2 p-2 bg-white/90 dark:bg-gray-800/90 rounded-full cursor-pointer hover:scale-110 transition-transform shadow-lg",children:[A.jsx(fc,{className:"w-4 h-4 text-gray-700 dark:text-gray-300"}),A.jsx("input",{type:"file",accept:"image/*",onChange:J=>D(J,"cover"),className:"hidden"})]})]}),A.jsx("div",{className:"flex justify-center -mt-16 relative z-10",children:A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:H?A.jsx("img",{src:H,alt:"Profile",className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(Ws,{className:"w-10 h-10 text-white"})})}),A.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-purple-500 rounded-full cursor-pointer hover:bg-purple-600 transition-colors shadow-lg",children:[A.jsx(fc,{className:"w-4 h-4 text-white"}),A.jsx("input",{type:"file",accept:"image/*",onChange:J=>D(J,"profile"),className:"hidden"})]})]})}),h&&A.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-sm",children:[A.jsx(cp,{className:"w-4 h-4 flex-shrink-0"}),h]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:x.displayName,onChange:J=>U(Y=>({...Y,displayName:J.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Your carnival name",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),A.jsx("input",{type:"text",value:x.username,onChange:Q,className:`w-full pl-8 pr-10 py-3 rounded-xl border ${p?"border-red-300 dark:border-red-500":"border-gray-200 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all`,placeholder:"your_username",maxLength:20}),C&&A.jsx(Ct,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 animate-spin"})]}),p&&A.jsx("p",{className:"mt-1 text-xs text-red-500",children:p}),A.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Your public profile URL: carnivalplanner.app/profile/",x.username||"username"]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),A.jsx("textarea",{value:x.bio,onChange:J=>U(Y=>({...Y,bio:J.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-none",placeholder:"Tell the fete world about your carnival journey... ",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 text-right",children:[x.bio.length,"/200"]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Social Links"}),A.jsxs("div",{className:"relative",children:[A.jsx(G2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-pink-500"}),A.jsx("input",{type:"text",value:x.socialLinks.instagram,onChange:J=>U(Y=>({...Y,socialLinks:{...Y.socialLinks,instagram:J.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Instagram username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(iU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-400"}),A.jsx("input",{type:"text",value:x.socialLinks.twitter,onChange:J=>U(Y=>({...Y,socialLinks:{...Y.socialLinks,twitter:J.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Twitter/X username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(CA,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-600"}),A.jsx("input",{type:"text",value:x.socialLinks.tiktok,onChange:J=>U(Y=>({...Y,socialLinks:{...Y.socialLinks,tiktok:J.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"TikTok username"})]})]}),A.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[x.isPublic?A.jsx(B_,{className:"w-5 h-5 text-green-500"}):A.jsx(rh,{className:"w-5 h-5 text-gray-400"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Public Profile"}),A.jsx("p",{className:"text-xs text-gray-500",children:"Anyone can view your carnival history"})]})]}),A.jsx("button",{onClick:()=>U(J=>({...J,isPublic:!J.isPublic})),className:`relative w-12 h-7 rounded-full transition-colors ${x.isPublic?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:A.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${x.isPublic?"translate-x-5":""}`})})]}),A.jsx("button",{onClick:j,disabled:l||!!p,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):A.jsxs(A.Fragment,{children:[A.jsx(th,{className:"w-5 h-5"}),"Save Profile"]})})]})]})})}const b7="price_1SsDVdJR9xpdRiXiMw7dGtpC";function C7({user:t,isPremium:e,onExit:n}){const[r,s]=R.useState("overview"),[i,o]=R.useState(null),[l,u]=R.useState([]),[h,m]=R.useState([]),[p,w]=R.useState(!0),[C,b]=R.useState(!1),[x,U]=R.useState(!1),[T,E]=R.useState({title:"",date:"",time:"",location:"",capacity:"",type:"fete",description:""}),[N,O]=R.useState(!1),[H,M]=R.useState(""),[I,B]=R.useState({title:"",cost:"",description:"",quantity:""}),[S,Q]=R.useState(!1);R.useEffect(()=>{D()},[t]);const D=async()=>{w(!0);try{const Y=rn(St),Ae=await Rt(Y,"getPromoterStats")();o(Ae.data.stats),u(Ae.data.events),b(Ae.data.isPro||!1);try{const ae=await Rt(Y,"getPromoterRewards")();m(ae.data.rewards||[])}catch(z){console.warn("Failed to fetch rewards",z),m([])}}catch(Y){console.error("Failed to load promoter data:",Y),o({totalCheckins:142,activeEvents:2,totalRevenue:0,todayCheckins:12}),u([{id:"evt-1",title:"Soca Sunset",date:"2026-02-14",checkins:85,capacity:200,status:"active",accessCode:"SUNSET-14"},{id:"evt-2",title:"Cooler Fete",date:"2026-02-20",checkins:57,capacity:500,status:"active",accessCode:"COOLER-20"}])}finally{w(!1)}},K=async Y=>{Y.preventDefault(),O(!0),M("");const oe=l.filter(Ae=>Ae.status==="active").length;if(!C&&oe>=3){M("Free limit reached (3 events). Upgrade to Pro to create more."),O(!1);return}try{const Ae=rn(St);await Rt(Ae,"createPromoterEvent")(T),s("events"),D(),E({title:"",date:"",time:"",location:"",capacity:"",type:"fete",description:""})}catch(Ae){console.error("Create event error:",Ae),M(Ae.message||"Failed to create event")}finally{O(!1)}},j=async Y=>{Y.preventDefault(),Q(!0);try{const oe=rn(St);await Rt(oe,"createPromoterReward")(I);const ae=await Rt(oe,"getPromoterRewards")();m(ae.data.rewards||[]),B({title:"",cost:"",description:"",quantity:""})}catch(oe){console.warn("Failed to create reward (backend may be offline), using mock:",oe),m([...h,{...I,id:`mock-${Date.now()}`}]),B({title:"",cost:"",description:"",quantity:""})}finally{Q(!1)}},J=async()=>{if(!t){alert("You must be signed in to upgrade.");return}U(!0);try{const Y=rn(St),Ae=await Rt(Y,"createCheckoutSession")({priceId:b7,success_url:window.location.origin,cancel_url:window.location.origin}),{data:z}=Ae||{};z&&(z.url||z.checkoutUrl)?window.location.href=z.url||z.checkoutUrl:alert("Unable to start checkout. Please try again.")}catch(Y){console.error("Error starting checkout:",Y),alert("There was a problem starting your checkout: "+Y.message)}finally{U(!1)}};return p?A.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:A.jsx(Ct,{className:"w-8 h-8 text-teal-500 animate-spin"})}):A.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-50 dark:bg-gray-900",children:[A.jsxs("div",{className:"w-full md:w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-8 px-2",children:[A.jsx("div",{className:"p-2 bg-gradient-to-br from-teal-400 to-blue-500 rounded-lg",children:A.jsx(Is,{className:"w-6 h-6 text-white"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:"Promoter"}),A.jsx("span",{className:"text-xs text-uppercase bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-gray-500 font-medium",children:C?"PRO":"FREE"})]})]}),A.jsxs("nav",{className:"space-y-1",children:[A.jsx(ou,{active:r==="overview",label:"Overview",icon:A.jsx(q2,{className:"w-5 h-5"}),onClick:()=>s("overview")}),A.jsx(ou,{active:r==="events",label:"My Events",icon:A.jsx(bA,{className:"w-5 h-5"}),onClick:()=>s("events")}),A.jsx(ou,{active:r==="create",label:"Create Event",icon:A.jsx(zl,{className:"w-5 h-5"}),onClick:()=>s("create")}),A.jsx(ou,{active:r==="rewards",label:"Rewards",icon:A.jsx(Kl,{className:"w-5 h-5"}),onClick:()=>s("rewards")}),A.jsx(ou,{active:r==="analytics",label:"Analytics",icon:A.jsx(R3,{className:"w-5 h-5"}),onClick:()=>s("analytics"),pro:!C})]}),!C&&A.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl text-white",children:[A.jsxs("h3",{className:"font-bold mb-1 flex items-center gap-2",children:[A.jsx(mc,{className:"w-4 h-4 text-yellow-300"}),"Go Pro"]}),A.jsx("p",{className:"text-sm opacity-90 mb-3",children:"Unlimited events & custom codes."}),A.jsx("button",{onClick:J,disabled:x,className:"w-full py-2 bg-white text-purple-600 font-bold rounded-lg text-sm hover:bg-gray-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:x?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):"Upgrade $9.99/mo"})]})]}),A.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:r}),A.jsx("button",{onClick:n,className:"text-sm text-gray-500 hover:text-gray-700",children:" Back to Profile"})]}),r==="overview"&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[A.jsx(Cf,{label:"Total Check-ins",value:i==null?void 0:i.totalCheckins,icon:A.jsx(nr,{className:"text-blue-500"})}),A.jsx(Cf,{label:"Active Events",value:i==null?void 0:i.activeEvents,icon:A.jsx(bA,{className:"text-teal-500"})}),A.jsx(Cf,{label:"Today's Activity",value:`+${(i==null?void 0:i.todayCheckins)||0}`,icon:A.jsx(P3,{className:"text-green-500"})}),A.jsx(Cf,{label:"Revenue Est.",value:"-",icon:A.jsx(H3,{className:"text-gray-400"})})]}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Recent Events"}),A.jsx(CI,{events:l.slice(0,3)})]})]}),r==="events"&&A.jsx("div",{children:A.jsx(CI,{events:l,full:!0})}),r==="create"&&A.jsxs("div",{className:"max-w-2xl bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsx("h2",{className:"text-lg font-bold mb-4",children:"Create New Event"}),!C&&A.jsxs("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-center gap-3",children:[A.jsx(cp,{className:"w-5 h-5 text-blue-500"}),A.jsxs("div",{className:"text-sm",children:[A.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-300",children:"Free Tier Status:"}),A.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:[l.filter(Y=>Y.status==="active").length," / 3 active events used."]})]})]}),A.jsxs("form",{onSubmit:K,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Event Title"}),A.jsx("input",{type:"text",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. Soca Brainwash",value:T.title,onChange:Y=>E({...T,title:Y.target.value})})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),A.jsx("input",{type:"date",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:T.date,onChange:Y=>E({...T,date:Y.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time"}),A.jsx("input",{type:"time",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:T.time,onChange:Y=>E({...T,time:Y.target.value})})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location / Venue"}),A.jsxs("div",{className:"relative",children:[A.jsx(Er,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-400"}),A.jsx("input",{type:"text",required:!0,className:"w-full pl-10 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. O2 Park",value:T.location,onChange:Y=>E({...T,location:Y.target.value})})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Capacity"}),A.jsx("input",{type:"number",className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. 500",value:T.capacity,onChange:Y=>E({...T,capacity:Y.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),A.jsxs("select",{className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:T.type,onChange:Y=>E({...T,type:Y.target.value}),children:[A.jsx("option",{value:"fete",children:"Fete / Party"}),A.jsx("option",{value:"jouvert",children:"J'ouvert"}),A.jsx("option",{value:"boat_ride",children:"Boat Ride"}),A.jsx("option",{value:"concert",children:"Concert"})]})]})]}),H&&A.jsx("p",{className:"text-red-500 text-sm",children:H}),A.jsxs("button",{type:"submit",disabled:N,className:"w-full py-3 bg-teal-500 text-white font-bold rounded-xl hover:bg-teal-600 transition-colors flex items-center justify-center gap-2",children:[N?A.jsx(Ct,{className:"animate-spin"}):A.jsx(zl,{className:"w-5 h-5"}),"Create Event"]})]})]}),r==="rewards"&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[A.jsx(Kl,{className:"w-5 h-5 text-pink-500"})," Create Reward"]}),A.jsxs("form",{onSubmit:j,className:"grid md:grid-cols-2 gap-4 items-end",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reward Title"}),A.jsx("input",{type:"text",required:!0,className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"e.g. Free Rum & Coke",value:I.title,onChange:Y=>B({...I,title:Y.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cost (Credits)"}),A.jsx("input",{type:"number",required:!0,className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"e.g. 500",value:I.cost,onChange:Y=>B({...I,cost:Y.target.value})})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),A.jsx("input",{type:"text",className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"Details for redemption...",value:I.description,onChange:Y=>B({...I,description:Y.target.value})})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsxs("button",{type:"submit",disabled:S,className:"w-full py-2.5 bg-pink-500 text-white font-bold rounded-lg hover:bg-pink-600 transition-colors flex items-center justify-center gap-2",children:[S?A.jsx(Ct,{className:"animate-spin w-4 h-4"}):A.jsx(zl,{className:"w-4 h-4"}),"Add Reward"]})})]})]}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Active Rewards"}),h.length===0?A.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[A.jsx(Kl,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),A.jsx("p",{className:"text-gray-500",children:"No rewards created yet."})]}):A.jsx("div",{className:"grid gap-3",children:h.map(Y=>A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:Y.title}),A.jsx("p",{className:"text-sm text-gray-500",children:Y.description}),A.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A.jsxs("span",{className:"text-xs font-bold text-pink-600 bg-pink-50 dark:bg-pink-900/20 px-2 py-0.5 rounded-full",children:[Y.cost," Credits"]}),Y.quantity&&A.jsxs("span",{className:"text-xs text-gray-500",children:["Limit: ",Y.quantity]})]})]}),A.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500",children:A.jsx($2,{className:"w-5 h-5"})})]},Y.id))})]})]})]})]})}function ou({active:t,label:e,icon:n,onClick:r,pro:s}){return A.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${t?"bg-teal-50 dark:bg-teal-900/20 text-teal-600 dark:text-teal-400 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[A.jsxs("div",{className:"flex items-center gap-3",children:[n,A.jsx("span",{children:e})]}),s&&A.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded uppercase font-bold",children:"PRO"})]})}function Cf({label:t,value:e,icon:n}){return A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"flex justify-between items-start mb-2",children:A.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:n})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),A.jsx("p",{className:"text-xs text-gray-500",children:t})]})}function CI({events:t,full:e}){return t!=null&&t.length?A.jsx("div",{className:"grid gap-3",children:t.map(n=>A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center justify-between group",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center text-center",children:A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-bold text-purple-600 dark:text-purple-400 uppercase",children:new Date(n.date).toLocaleString("default",{month:"short"})}),A.jsx("p",{className:"text-lg font-black text-purple-800 dark:text-purple-200 leading-none",children:new Date(n.date).getDate()})]})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.title}),A.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(nr,{className:"w-3.5 h-3.5"})," ",n.checkins," checked-in"]}),A.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Active"})]})]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"hidden md:block px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-md",children:A.jsx("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-300",children:n.accessCode})}),A.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:A.jsx($2,{className:"w-5 h-5"})})]})]},n.id))}):A.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[A.jsx(bA,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),A.jsx("p",{className:"text-gray-500",children:"No events found."})]})}function E7({user:t}){const[e,n]=R.useState("Overview"),[r,s]=R.useState(!1),[i,o]=R.useState(!0);if(R.useEffect(()=>{t&&(t.email==="djkrss1@gmail.com"&&s(!0),o(!1))},[t]),i)return A.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading Admin Dashboard..."});const l=[{id:"Overview",label:"Overview",icon:q2},{id:"Ads",label:"Ad Manager",icon:Z3},{id:"Support",label:"Support",icon:C_},{id:"Settings",label:"Admins",icon:r6}];return A.jsxs("div",{className:"bg-white dark:bg-gray-900 min-h-screen rounded-3xl overflow-hidden shadow-2xl border border-gray-200 dark:border-gray-800",children:[A.jsxs("div",{className:"bg-gray-900 text-white p-4 md:p-6 border-b border-gray-800 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[A.jsx(rh,{className:"text-pink-500"}),"Admin Console"]}),A.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your entire carnival platform"})]}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 hide-scrollbar",children:l.map(u=>A.jsxs("button",{onClick:()=>n(u.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap ${e===u.id?"bg-pink-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:[A.jsx(u.icon,{className:"w-4 h-4"}),u.label]},u.id))})]}),A.jsxs("div",{className:"p-6",children:[e==="Overview"&&A.jsx(B6,{}),e==="Ads"&&A.jsx(v6,{}),e==="Support"&&A.jsx(F6,{}),e==="Settings"&&A.jsx(I7,{user:t,isSuperAdmin:r})]})]})}function I7({user:t,isSuperAdmin:e}){const[n,r]=R.useState([]),[s,i]=R.useState(""),[o,l]=R.useState(!1),[u,h]=R.useState(null),[m,p]=R.useState(!0);R.useEffect(()=>{const b=Gs(on(Te,"admins"),x=>{r(x.docs.map(U=>({id:U.id,...U.data()}))),p(!1),h(null)},x=>{console.error("AdminManagement query failed:",x),h(x.message),p(!1)});return()=>b()},[]);const w=async b=>{if(b.preventDefault(),!!s.trim()){l(!0);try{const x=on(Te,"users"),U=QA(x,Jd("email","==",s)),T=await Si(U);if(T.empty){alert("User not found! They must log in to the app at least once."),l(!1);return}const N=T.docs[0].id;await Hn(ze(Te,"admins",N),{email:s,role:"admin",addedBy:t.email,addedAt:Ge.now()}),i(""),alert(`Added ${s} as admin!`)}catch(x){console.error(x),alert("Failed to add admin: "+x.message)}finally{l(!1)}}},C=async b=>{if(confirm("Remove this admin? They will lose access immediately."))try{await Xd(ze(Te,"admins",b))}catch(x){console.error(x),alert("Failed to remove admin")}};return m?A.jsx("div",{className:"text-center p-8",children:A.jsx(Ct,{className:"animate-spin mx-auto text-pink-500"})}):u?A.jsx("div",{className:"p-8 text-center bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:A.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load admins: ",u]})}):A.jsxs("div",{className:"space-y-8 max-w-4xl",children:[A.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl border border-amber-200 dark:border-amber-800 flex gap-3 text-amber-800 dark:text-amber-200",children:[A.jsx(p_,{className:"shrink-0"}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold",children:"Access Control"}),A.jsx("p",{className:"text-sm opacity-90",children:"Admins have full access to analytics, support messages, and ad management. Only grant this to trusted team members."})]})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:"Add New Admin"}),A.jsxs("form",{onSubmit:w,className:"flex gap-4",children:[A.jsx("input",{type:"email",placeholder:"Enter user email address",value:s,onChange:b=>i(b.target.value),className:"flex-1 p-3 rounded-xl border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-pink-500",required:!0}),A.jsxs("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-xl hover:bg-pink-700 disabled:opacity-50 flex items-center gap-2",children:[o?A.jsx(Ct,{className:"animate-spin w-5 h-5"}):A.jsx(zl,{className:"w-5 h-5"}),"Add Admin"]})]})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:"Current Admins"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 opacity-75",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:"D"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold dark:text-white",children:"djkrss1@gmail.com"}),A.jsx("p",{className:"text-xs text-pink-500 font-bold uppercase",children:"Super Admin"})]})]}),A.jsx("span",{className:"text-xs text-gray-400",children:"Owner"})]}),n.map(b=>{var x;return A.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center text-gray-500 dark:text-gray-300 font-bold",children:b.email[0].toUpperCase()}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold dark:text-white",children:b.email}),A.jsxs("p",{className:"text-xs text-gray-500",children:["Added by ",(x=b.addedBy)==null?void 0:x.split("@")[0]]})]})]}),A.jsx("button",{onClick:()=>C(b.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:A.jsx(ti,{className:"w-5 h-5"})})]},b.id)})]})]})]})}function T7({onBack:t,onSuccess:e}){const[n,r]=R.useState("login"),[s,i]=R.useState(""),[o,l]=R.useState(""),[u,h]=R.useState(""),[m,p]=R.useState(!1),[w,C]=R.useState(!1),[b,x]=R.useState(""),[U,T]=R.useState(""),E=I=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I),N=I=>{switch(I){case"auth/email-already-in-use":return"This email is already registered. Try logging in instead.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password. Please check and try again.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"Something went wrong. Please try again."}},O=async I=>{if(I.preventDefault(),x(""),T(""),!E(s)){x("Please enter a valid email address.");return}if(o.length<6){x("Password must be at least 6 characters.");return}if(o!==u){x("Passwords do not match.");return}C(!0);try{const B=await DL(Pa,s,o);await Ck(B.user),T("Account created! Please check your email to verify your account."),e&&e(B.user)}catch(B){console.error("Sign up error:",B),x(N(B.code))}finally{C(!1)}},H=async I=>{if(I.preventDefault(),x(""),T(""),!E(s)){x("Please enter a valid email address.");return}if(!o){x("Please enter your password.");return}C(!0);try{const B=await ML(Pa,s,o);e&&e(B.user)}catch(B){console.error("Login error:",B),x(N(B.code))}finally{C(!1)}},M=async()=>{if(x(""),T(""),!E(s)){x("Please enter your email address first.");return}C(!0);try{await jL(Pa,s),T("Password reset email sent! Check your inbox.")}catch(I){console.error("Password reset error:",I),x(N(I.code))}finally{C(!1)}};return A.jsxs("div",{className:"w-full max-w-md mx-auto",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[A.jsx(y_,{className:"w-4 h-4"}),"Back"]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:n==="login"?"Welcome Back":"Create Account"}),b&&A.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:b}),U&&A.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300 text-sm",children:U}),A.jsxs("form",{onSubmit:n==="login"?H:O,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),A.jsxs("div",{className:"relative",children:[A.jsx(b_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:s,onChange:I=>i(I.target.value),placeholder:"your@email.com",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(Cw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:m?"text":"password",value:o,onChange:I=>l(I.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w}),A.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:m?A.jsx(V3,{className:"w-5 h-5"}):A.jsx(__,{className:"w-5 h-5"})})]})]}),n==="signup"&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(Cw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:m?"text":"password",value:u,onChange:I=>h(I.target.value),placeholder:"Confirm your password",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w})]})]}),n==="login"&&A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"button",onClick:M,className:"text-sm text-pink-400 hover:text-pink-300 transition-colors",disabled:w,children:"Forgot password?"})}),A.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-xl font-bold text-white hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:w?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{className:"w-5 h-5 animate-spin"}),n==="login"?"Signing in...":"Creating account..."]}):n==="login"?"Sign In":"Create Account"})]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsxs("p",{className:"text-gray-400 text-sm",children:[n==="login"?"Don't have an account?":"Already have an account?",A.jsx("button",{onClick:()=>{r(n==="login"?"signup":"login"),x(""),T("")},className:"ml-2 text-pink-400 hover:text-pink-300 font-semibold transition-colors",children:n==="login"?"Sign Up":"Sign In"})]})})]})]})}function k7({user:t,onResend:e}){const[n,r]=R.useState(!1),[s,i]=R.useState(!1);if(!t||t.emailVerified||!t.email)return null;const o=async()=>{r(!0);try{await Ck(t),i(!0),setTimeout(()=>i(!1),5e3)}catch(l){console.error("Error sending verification:",l)}finally{r(!1)}};return A.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 text-yellow-200 px-4 py-3 flex items-center justify-between gap-4 flex-wrap",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(b_,{className:"w-5 h-5"}),A.jsx("span",{className:"text-sm",children:"Please verify your email address to access all features."})]}),A.jsx("button",{onClick:o,disabled:n||s,className:"text-sm font-semibold bg-yellow-500/30 hover:bg-yellow-500/40 px-3 py-1 rounded-lg transition-colors disabled:opacity-50",children:s?"Email Sent!":n?"Sending...":"Resend Email"})]})}const lF=()=>Math.random().toString(36).substring(2,8).toUpperCase(),S7=async(t,e,n)=>{if(!t)throw new Error("User not authenticated");const r=lF(),s={name:e,leaderId:t.uid,leaderName:t.displayName||t.email,members:[t.uid],memberDetails:{[t.uid]:{name:t.displayName||t.email,role:"leader",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}},carnivalId:n,inviteCode:r,createdAt:Xm(),sharedItinerary:[]};console.log("Attempting to create squad doc...",s);const i=await uc(on(Te,"squads"),s);console.log("Squad doc created with ID:",i.id);const o=ze(Te,"users",t.uid);return console.log("Updating user profile for squad:",t.uid),await Hn(o,{currentSquadId:i.id},{merge:!0}),console.log("User profile updated."),{id:i.id,...s}},N7=async(t,e)=>{if(console.log("joinSquadByCode started",{uid:t==null?void 0:t.uid,inviteCode:e}),!t)throw new Error("Must be logged in");const n=on(Te,"squads"),r=QA(n,Jd("inviteCode","==",e.toUpperCase())),s=await Si(r);if(s.empty)throw new Error("Invalid Squad Code");const i=s.docs[0],o=i.id,l=i.data();console.log("Squad found:",{squadId:o,squadData:l});const u=ze(Te,"squads",o),h=t.displayName||t.email||"Unknown User";console.log("Adding user to squad:",h),!l.members||!l.members.includes(t.uid)?(await vA(u,{members:$N(t.uid),[`memberDetails.${t.uid}`]:{name:h,role:"member",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}}),console.log("Squad doc updated")):console.log("User already in squad (skipping array update)");const m=ze(Te,"users",t.uid);return await Hn(m,{currentSquadId:o},{merge:!0}),console.log("User profile updated with squadId:",o),{id:o,...l}},U7=async(t,e)=>{if(!t||!e)return;const n=ze(Te,"squads",e),r=ze(Te,"users",t.uid);await vA(n,{members:ZN(t.uid)}),await vA(r,{currentSquadId:null})},F7=async(t,e)=>{if(!t||!e)throw new Error("Missing required parameters");const n=ze(Te,"squads",e),r=await Bs(n);if(!r.exists())throw new Error("Squad not found");if(r.data().leaderId!==t)throw new Error("Only the squad leader can regenerate the invite code");const i=lF();return await vA(n,{inviteCode:i}),console.log(`New invite code generated for squad ${e}: ${i}`),i},Q7=async t=>{if(!t)throw new Error("User ID required");const e=on(Te,"squads"),n=QA(e,Jd("members","array-contains",t)),r=await Si(n),s=[];return r.forEach(i=>{var l;const o=i.data();s.push({id:i.id,name:o.name||"Unnamed Squad",carnivalId:o.carnivalId,memberCount:((l=o.members)==null?void 0:l.length)||0,isLeader:o.leaderId===t,inviteCode:o.inviteCode})}),s},EI=async(t,e)=>{if(!t)throw new Error("User ID required");const n=ze(Te,"users",t);await Hn(n,{currentSquadId:e},{merge:!0})},Ef="carnival-planner-v1",P7="price_1SanHUJR9xpdRiXijLesRPVt",R7="price_1SanMhJR9xpdRiXinv2F9knM",II={trinidad:[{title:"Soca Brainwash",note:"The main event. Bring drinks."},{title:"AM Bush",note:"J'ouvert style. Wear old clothes."},{title:"Phuket",note:"All inclusive."},{title:"Soaka Street Festival",note:"Iron park."}],stlucia:[{title:"Remedy",note:"Beachside."},{title:"Mess",note:"Paint and Powder."},{title:"Indulgence",note:"Breakfast fete."}],default:[{title:"Catamaran Cruise",note:"Boat ride."},{title:"J'ouvert",note:"Paint and powder."},{title:"Monday Mas",note:"On the road."}]};function L7(){var Nr,Ue,$n,cr,ur,la,ms;const[t,e]=R.useState(null),[n,r]=R.useState(!1),[s,i]=R.useState({}),[o,l]=R.useState(null),[u,h]=R.useState("Budget"),[m,p]=R.useState(!1),[w,C]=R.useState(!0),[b,x]=R.useState(!1),[U,T]=R.useState(!0),[E,N]=R.useState(!1),[O,H]=R.useState(""),[M,I]=R.useState(""),[B,S]=R.useState(""),[Q,D]=R.useState(""),[K,j]=R.useState(""),[J,Y]=R.useState(""),[oe,Ae]=R.useState(""),[z,ae]=R.useState({band:"",section:"",total:"",paid:""}),[ee,we]=R.useState(""),[de,me]=R.useState(""),[pe,he]=R.useState([]),[ie,Qe]=R.useState(null),[Xe,Ir]=R.useState(null),[Dt,Gn]=R.useState(!1),[Nn,wt]=R.useState(!1),[vt,Ye]=R.useState(""),[An,xt]=R.useState(""),[mn,PA]=R.useState([]),[mo,ai]=R.useState(!1),go=async()=>{const{DEMO_USER:P,DEMO_CARNIVALS:q,DEMO_SQUAD:ne}=await Hy(async()=>{const{DEMO_USER:Be,DEMO_CARNIVALS:Re,DEMO_SQUAD:De}=await import("./demoData-59eL2sCn.js");return{DEMO_USER:Be,DEMO_CARNIVALS:Re,DEMO_SQUAD:De}},[]);r(!0),e(P),i(q),l("trinidad"),he(ne),p(!0),C(!1),qt(q.trinidad)},Ss=()=>{r(!1),e(null),i({}),l(null),he([]),p(!1),C(!0),qt(null)};R.useEffect(()=>{new URLSearchParams(window.location.search).get("demo")==="true"&&go()},[]);const po=async()=>{if(n){alert("This feature is simulated in Demo Mode.");return}if(t){Gn(!0),Ye("");try{const P=await S7(t,`${t.displayName||"User"}'s Squad`,o);Qe(P),we(P.inviteCode),Un("Only Premium users can lead a squad!")}catch(P){console.error("Error creating squad:",P),Ye(`Failed: ${P.message}`)}finally{Gn(!1)}}},RA=async()=>{if(n){alert("Joining squads is simulated in Demo Mode.");return}if(!t||!de)return;const P=de.trim().toUpperCase();wt(!0),Ye(""),console.log("HandleJoinSquad: Attempting to join with code:",P);try{const q=await N7(t,P);console.log("HandleJoinSquad: Join success. Squad result:",q),q||console.warn("HandleJoinSquad: No squad object returned, but execution did not throw. Assuming success via listener."),xt("Joined Squad!"),me("")}catch(q){console.error("Error joining squad:",q),Ye(q.message||"Invalid code")}finally{wt(!1)}},Mt=async()=>{if(n){confirm("Exit Demo Mode?")&&Ss();return}if(!(!t||!ie)&&confirm("Are you sure you want to leave this squad?")){const P=ie.id;await U7(t,P);const q=mn.filter(ne=>ne.id!==P);q.length>0?(await EI(t.uid,q[0].id),Un(`Switched to ${q[0].name}`)):(Qe(null),he([])),Ns()}},Yt=async(P,q)=>{if(n){alert("Member removal is disabled in Demo Mode.");return}if(!(!t||!ie)){if(ie.leaderId!==t.uid){alert("Only the squad leader can remove members.");return}if(confirm(`Remove ${q} from your squad?`))try{if(await fs(t.uid,ie.id,P),Un(`${q} has been removed from the squad.`),confirm(`${q} was removed.

Would you like to generate a new invite code?
(This prevents them from rejoining with the old code)`)){const ne=await F7(t.uid,ie.id);we(ne),Un(`New invite code: ${ne}`)}}catch(ne){console.error("Error removing member:",ne),alert(`Failed to remove member: ${ne.message}`)}}},Ns=async()=>{if(!(!t||n)){ai(!0);try{const P=await Q7(t.uid);PA(P)}catch(P){console.error("Failed to load user squads:",P)}finally{ai(!1)}}},LA=async P=>{if(!(!t||n)&&P!==(ie==null?void 0:ie.id))try{await EI(t.uid,P),Un("Switched squad!")}catch(q){console.error("Failed to switch squad:",q),alert("Failed to switch squad: "+q.message)}},[oi,Un]=R.useState(null),[Us,yo]=R.useState(!0),[Ai,li]=R.useState(!1),[wo,Fs]=R.useState(navigator.onLine);R.useEffect(()=>{const P=()=>Fs(!0),q=()=>Fs(!1);return window.addEventListener("online",P),window.addEventListener("offline",q),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",q)}},[]);const[ta,Tr]=R.useState(null),[vo,Qs]=R.useState(()=>!localStorage.getItem("carnival-planner-welcomed")),[na,ra]=R.useState(!1),[qn,sa]=R.useState(null),[ia,xo]=R.useState(!1),[ci,Ps]=R.useState(!1),[Ut,ui]=R.useState([]),[di,Rs]=R.useState(!1),[Wn,Ee]=R.useState(null),cs=[{id:"stkitts-sugar-mas",name:"St. Kitts (Sugar Mas)",monthIndex:0},{id:"stcroix",name:"St. Croix Carnival",monthIndex:0},{id:"trinidad",name:"Trinidad Carnival",monthIndex:1},{id:"dominica",name:"Dominica (Mas Domnik)",monthIndex:1},{id:"jamaica",name:"Jamaica Carnival",monthIndex:3},{id:"tampa",name:"Tampa Bay Carnival",monthIndex:3},{id:"stmaarten",name:"St. Maarten Carnival",monthIndex:3},{id:"cayman-batabano",name:"Cayman Batabano",monthIndex:4},{id:"stthomas",name:"St. Thomas Carnival",monthIndex:4},{id:"atlanta",name:"Atlanta Caribbean Carnival",monthIndex:4},{id:"guyana",name:"Guyana Independence",monthIndex:4},{id:"bahamas",name:"Bahamas Carnival",monthIndex:5},{id:"bermuda",name:"Bermuda Carnival",monthIndex:5},{id:"hollywood",name:"Hollywood Carnival",monthIndex:5},{id:"caymas",name:"Caymas Carnival",monthIndex:5},{id:"vincymas",name:"St. Vincent (Vincy Mas)",monthIndex:6},{id:"stlucia",name:"St. Lucia Carnival",monthIndex:6},{id:"toronto",name:"Toronto (Caribana)",monthIndex:7},{id:"barbados",name:"Barbados Crop Over",monthIndex:7},{id:"nevis",name:"Nevis Culturama",monthIndex:7},{id:"antigua",name:"Antigua Carnival",monthIndex:7},{id:"grenada",name:"Grenada Spicemas",monthIndex:7},{id:"ny-labor-day",name:"New York Carnival",monthIndex:8},{id:"japan",name:"Japan Caribbean",monthIndex:8},{id:"miami",name:"Miami Carnival",monthIndex:9},{id:"tobago",name:"Tobago Carnival",monthIndex:10}],_o=["bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500","bg-gradient-to-r from-green-400 to-blue-500","bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500","bg-gradient-to-r from-teal-400 to-cyan-500","bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500","bg-gradient-to-r from-purple-600 to-indigo-600"],Bo=["January","February","March","April","May","June","July","August","September","October","November","December"];R.useEffect(()=>{U?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[U]),R.useEffect(()=>{if(!t||n)return;(async()=>{try{const q=ze(Te,"users",t.uid,"preferences","theme"),ne=await Bs(q);if(ne.exists()){const Be=ne.data();typeof Be.darkMode=="boolean"&&T(Be.darkMode)}}catch(q){console.log("Could not load theme preference:",q)}})()},[t,n]);const hi=async P=>{if(!(!t||n))try{const q=ze(Te,"users",t.uid,"preferences","theme");await Hn(q,{darkMode:P,updatedAt:Ge.now()},{merge:!0})}catch(q){console.log("Could not save theme preference:",q)}},aa=()=>{const P=!U;T(P),hi(P)};R.useEffect(()=>{if(n)return;const P=VL(Pa,async q=>{if(e(q),q){console.log("[Analytics] Creating/updating user doc for:",q.uid,q.email);try{const ne=ze(Te,"users",q.uid);await Hn(ne,{lastLoginAt:Ge.now(),email:q.email||null,displayName:q.displayName||null},{merge:!0}),console.log("[Analytics] User document updated successfully"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(Be=>{const{latitude:Re,longitude:De}=Be.coords;Hn(ne,{lastLocation:{lat:Re,lng:De},lastLocationAt:Ge.now()},{merge:!0}).then(()=>console.log("Location saved")).catch(He=>console.error("Loc save error",He))},Be=>{console.log("Geolocation denied/error:",Be.message)})}catch(ne){console.error("[Analytics] Failed to update user doc:",ne.code,ne.message)}}});return()=>P()},[n]),R.useEffect(()=>{if(!t||n){Ir(null);return}const P=Gs(ze(Te,"users",t.uid),q=>{const ne=q.data(),Be=(ne==null?void 0:ne.currentSquadId)||null;Be!==Xe&&(console.log("App: User changed squad to:",Be),Ir(Be))});return()=>P()},[t,n,Xe]),R.useEffect(()=>{t&&!n&&Ns()},[t,n,Xe]),R.useEffect(()=>{if(!t||n)return;if(!Xe){console.log("App: No target squad, clearing state."),Qe(null),he([]),qt(null);return}console.log("App: Subscribing to squad:",Xe);const P=Gs(ze(Te,"squads",Xe),q=>{if(q.exists()){const ne=q.data();console.log("App: Squad loaded:",q.id),Qe({id:q.id,...ne}),qt(ne);const Be=Object.values(ne.memberDetails||{});he(Be),we(ne.inviteCode)}else console.warn("App: Target squad does not exist/deleted:",Xe),Qe(null),qt(null),he([]),we("")});return()=>{console.log("App: Unsubscribing from squad:",Xe),P(),we("")}},[Xe,t,n]),R.useEffect(()=>{!ie&&pe.length>0&&(console.warn("App: DETECTED GHOST MEMBERS! Self-healing state."),he([]),we(""))},[ie,pe]),R.useEffect(()=>{if(!t){n||p(!1);return}if(n){p(!0);return}const P=["djkrss1@gmail.com","maikacooke@gmail.com"];P.includes(t.email)&&p(!0);const q=ze(Te,"users",t.uid,"apps",Ef),ne=Gs(q,Be=>{if(P.includes(t.email)){p(!0);return}if(Be.exists()){const Re=Be.data();p(!!Re.premiumActive)}else p(!1)});return()=>ne()},[t,n]);const[oa,_n]=R.useState(!1);R.useEffect(()=>{if(!t){_n(!1);return}(async()=>{if(n){_n(!0);return}if(t.email==="djkrss1@gmail.com"){_n(!0);return}try{const q=ze(Te,"admins",t.uid),ne=await Bs(q);_n(ne.exists())}catch(q){console.error("Admin check failed:",q),_n(!1)}})()},[t,n]),R.useEffect(()=>{if(!t){n||(i({}),l(null));return}if(n)return;const P=on(Te,"users",t.uid,"apps",Ef,"carnivals"),q=Gs(P,ne=>{const Be={};ne.forEach(Re=>{Be[Re.id]=Re.data()}),i(Be),!o&&ne.docs.length>0&&l(ne.docs[0].id)});return()=>q()},[t,n]),R.useEffect(()=>{if(!t||n){sa(null);return}(async()=>{try{const q=await Bs(ze(Te,"userProfiles",t.uid));q.exists()&&sa({id:q.id,...q.data()})}catch(q){console.log("Could not load profile:",q)}})()},[t,n]),R.useEffect(()=>{n||gj(Pa).catch(P=>console.error(P))},[n]),R.useEffect(()=>{if(!t||n)return;(async()=>{try{const ne=await m3("BLbW7EjHjQ9_YjKrRbJwgBgRqnkSmZsXMnEWTQZpqYwSRbVgYLmXW5RvXA2_aS3vH9XJpCxHu4VmXnZL2wQxMvI");if(ne){const Be=rn(St);await Rt(Be,"saveFcmToken")({fcmToken:ne}),console.log("FCM token saved")}}catch(q){console.log("Error setting up notifications:",q)}})(),g3(q=>{var ne,Be;console.log("Foreground message:",q),Un({title:((ne=q.notification)==null?void 0:ne.title)||"Squad Alert",body:((Be=q.notification)==null?void 0:Be.body)||"Someone in your squad is Road Ready!"}),setTimeout(()=>Un(null),5e3)})},[t,n]);const kr=async()=>{const P=new ki;try{await lj(Pa,P)}catch(q){console.error("Sign in error:",q)}},jA=async()=>{if(n){Ss();return}await Ek(Pa),C(!0),x(!1),h("Budget"),T(!0)},bo=async P=>{if(n){alert("Subscriptions are disabled in Demo Mode.");return}if(!t){alert("You must be signed in to subscribe.");return}const q=P==="yearly"?"yearly":"monthly",ne=q==="yearly"?R7:P7;N(!0);try{const Be=rn(St),Re=Rt(Be,"createCheckoutSession");console.log(`Starting checkout... Interval: ${q}, PriceID: ${ne}`);const De=await Re({priceId:ne,success_url:window.location.origin,cancel_url:window.location.origin}),{data:He}=De||{};He&&(He.url||He.checkoutUrl)?window.location.href=He.url||He.checkoutUrl:(console.error("No checkout URL returned:",He),alert("Unable to start checkout. Please try again."))}catch(Be){console.error("Error starting checkout:",Be),alert("There was a problem starting your checkout: "+Be.message)}finally{N(!1)}},Co=async(P,q)=>{if(t){if(l(P),n){s[P]?P==="trinidad"&&s.trinidad?qt(s.trinidad):qt(null):(i(ne=>({...ne,[P]:{name:q,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:new Date().toISOString()}})),qt(null));return}if(!s[P])try{const ne=ze(Te,"users",t.uid,"apps",Ef,"carnivals",P);await Hn(ne,{name:q,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:Ge.now()},{merge:!0})}catch(ne){console.error(ne)}}},Ar=(Nr=s[o])==null?void 0:Nr.sharedPlanId,Ot=!!Ar,[lr,qt]=R.useState(null),[fi,Eo]=R.useState(!1),Aa=async()=>{if(!n){if(!Ar||!t){qt(null);return}Eo(!0);try{const P=rn(St),ne=await Rt(P,"getSharedCarnivalData")({planId:Ar,uid:t.uid});qt(ne.data)}catch(P){console.log("Could not load shared carnival data:",P.message),qt(null)}finally{Eo(!1)}}};R.useEffect(()=>{Ar&&!n?Aa():n||qt(null)},[Ar,t,n]);const rt=async(P,q,ne="set")=>{var Re;if(!t||!o)return;if(n){const De=He=>{let ln=q;return ne==="add"&&Array.isArray(He[P])?ln=[...He[P]||[],...q]:ne==="remove"&&Array.isArray(He[P])?ln=(He[P]||[]).filter(Bn=>Bn.id!==q.id):ne==="update"&&Array.isArray(He[P])&&q.id!==void 0&&(ln=(He[P]||[]).map(Bn=>Bn.id===q.id?{...Bn,...q}:Bn)),ne==="set"&&(ln=q),{...He,[P]:ln}};Ot?(qt(He=>De(He)),i(He=>({...He,[o]:De(He[o])}))):i(He=>({...He,[o]:De(He[o])}));return}if(Ar&&["budget","schedule","packing","costume","squad"].includes(P))try{const De=rn(St),ln=await Rt(De,"updateSharedCarnivalData")({planId:Ar,field:P,data:q,action:ne,uid:t.uid,userEmail:t.email});(Re=ln.data)!=null&&Re.data&&qt(ln.data.data);return}catch(De){console.error("Error updating shared data:",De)}const Be=ze(Te,"users",t.uid,"apps",Ef,"carnivals",o);await vA(Be,{[P]:q})};R.useEffect(()=>{if(!t||!o||!m){ui([]);return}(async()=>{var q;Rs(!0);try{const ne=rn(St),Re=await Rt(ne,"getScrapedEvents")({carnivalId:o});(q=Re.data)!=null&&q.success?(ui(Re.data.events||[]),Ee(Re.data.lastScrapedAt)):(ui([]),Ee(null))}catch(ne){console.log("Error fetching scraped events:",ne),ui([])}finally{Rs(!1)}})()},[t,o,m]);const us=async()=>{var P,q;if(x(!0),m&&Us&&ke){li(!0);try{const ne=rn(St),Re=await Rt(ne,"sendRoadReadyAlert")({carnivalId:o,carnivalName:ke.name,userName:(t==null?void 0:t.displayName)||((P=t==null?void 0:t.email)==null?void 0:P.split("@")[0])||"Squad Member"});((q=Re.data)==null?void 0:q.notified)>0&&(Un({title:"Squad Notified!",body:`${Re.data.notified} squad member(s) alerted that you're Road Ready!`}),setTimeout(()=>Un(null),5e3))}catch(ne){console.log("Error sending Road Ready alert:",ne)}finally{li(!1)}}},mi=()=>{var q;if(!O.trim()||!M)return;const P={id:Date.now().toString(),name:O.trim(),cost:parseFloat(M)};if(Ot)rt("budget",[P],"add");else{const ne=((q=s[o])==null?void 0:q.budget)||[];rt("budget",[...ne,P])}H(""),I("")},gi=P=>{var q;if(Ot)rt("budget",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.budget)||[];rt("budget",ne.filter(Be=>Be.id!==P))}},Io=()=>{var q;if(!B.trim()||!Q)return;const P={id:Date.now().toString(),title:B.trim(),datetime:Q,note:K.trim()};if(Ot)rt("schedule",[P],"add");else{const ne=((q=s[o])==null?void 0:q.schedule)||[];rt("schedule",[...ne,P])}S(""),D(""),j("")},To=P=>{var q;if(Ot)rt("schedule",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.schedule)||[];rt("schedule",ne.filter(Be=>Be.id!==P))}},ds=P=>{var Re;const q=new Date;q.setDate(q.getDate()+1),q.setHours(12,0,0,0);const ne=q.toISOString().slice(0,16),Be={id:Date.now().toString(),title:P.title,datetime:ne,note:P.note||"Added from curated list"};if(Ot)rt("schedule",[Be],"add");else{const De=((Re=s[o])==null?void 0:Re.schedule)||[];rt("schedule",[...De,Be])}},Oe=()=>{var q;if(!J.trim())return;const P={id:Date.now().toString(),item:J.trim(),checked:!1};if(Ot)rt("packing",[P],"add");else{const ne=((q=s[o])==null?void 0:q.packing)||[];rt("packing",[...ne,P])}Y("")},At=P=>{var Be;const q=Ot?(lr==null?void 0:lr.packing)||[]:((Be=s[o])==null?void 0:Be.packing)||[],ne=q.find(Re=>Re.id===P);ne&&(Ot?rt("packing",{id:P,checked:!ne.checked},"update"):rt("packing",q.map(Re=>Re.id===P?{...Re,checked:!Re.checked}:Re)))},pi=P=>{var q;if(Ot)rt("packing",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.packing)||[];rt("packing",ne.filter(Be=>Be.id!==P))}},hs=()=>{var q;if(!oe.trim())return;const P={id:Date.now().toString(),name:oe.trim()};if(Ot)rt("squad",[P],"add");else{const ne=((q=s[o])==null?void 0:q.squad)||[];rt("squad",[...ne,P])}Ae("")},fs=P=>{var q;if(Ot)rt("squad",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.squad)||[];rt("squad",ne.filter(Be=>Be.id!==P))}};R.useEffect(()=>{const P=o?s[o]:null;P!=null&&P.shareCode?we(P.shareCode):we("")},[o,s]);const ko=()=>{ee&&(navigator.clipboard.writeText(ee),xt("Code copied to clipboard!"),setTimeout(()=>xt(""),2e3))},Le=()=>{rt("costume",{...z,total:parseFloat(z.total)||0,paid:parseFloat(z.paid)||0,updatedAt:Date.now()}),alert("Costume details saved!")},mt=()=>{if(!ke)return;const P=[];P.push(`CARNIVAL PLANNER: ${ke.name}`),P.push(`==========================================
`),P.push("-- SQUAD --"),(ke.squad||[]).forEach(De=>P.push(`- ${De.name}`)),P.push(`
`),P.push("-- COSTUME --"),ke.costume?(P.push(`Band: ${ke.costume.band}`),P.push(`Section: ${ke.costume.section}`),P.push(`Balance Due: $${((ke.costume.total||0)-(ke.costume.paid||0)).toFixed(2)}`)):P.push("No costume details."),P.push(`
`),P.push("-- SCHEDULE --"),(ke.schedule||[]).slice().sort((De,He)=>new Date(De.datetime)-new Date(He.datetime)).forEach(De=>P.push(`${new Date(De.datetime).toLocaleString()} | ${De.title}`));const ne=new Blob([P.join(`
`)],{type:"text/plain"}),Be=URL.createObjectURL(ne),Re=document.createElement("a");Re.href=Be,Re.download=`${ke.name.replace(/\s+/g,"_")}_Plan.txt`,Re.click()},Sr=o?s[o]:null,ke=Sr?{...Sr,...Ot&&lr?{budget:lr.budget||Sr.budget||[],schedule:lr.schedule||Sr.schedule||[],packing:lr.packing||Sr.packing||[],costume:lr.costume||Sr.costume,squad:lr.squad||Sr.squad||[]}:{}}:null,_t=((Ue=ke==null?void 0:ke.budget)==null?void 0:Ue.reduce((P,q)=>P+(q.cost||0),0))||0,yi=ke!=null&&ke.costume?ke.costume.total-ke.costume.paid:0,Gr=ke?II[o]||II.default:[];if(ta){const P={onBack:()=>Tr(null),logo:Zh};switch(ta){case"privacy":return A.jsx(I6,{...P});case"terms":return A.jsx(T6,{...P});case"cookies":return A.jsx(k6,{...P});case"refund":return A.jsx(S6,{...P});case"contact":return A.jsx(U6,{...P,user:t});default:Tr(null)}}if(w&&!t)return A.jsx(E6,{onGetStarted:()=>C(!1),logo:Zh,onLegalPage:Tr,onTryDemo:go});if(t&&b&&ke){const P=(ke.schedule||[]).slice().sort((q,ne)=>new Date(q.datetime)-new Date(ne.datetime)).find(q=>new Date(q.datetime)>new Date);return A.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6 flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx("h1",{className:"text-2xl font-bold italic",children:"ROAD MODE"}),A.jsx("button",{onClick:()=>x(!1),className:"text-sm bg-gray-800 px-3 py-1 rounded",children:"Exit"})]}),A.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 rounded-2xl shadow-lg",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-1",children:"Up Next"}),P?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-3xl font-black mb-1",children:P.title}),A.jsx("div",{className:"text-xl opacity-90",children:new Date(P.datetime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),A.jsx("div",{className:"mt-2 text-sm bg-white/20 inline-block px-2 py-1 rounded",children:P.note||"No notes"})]}):A.jsx("div",{className:"text-xl italic opacity-75",children:"No more fetes scheduled! Sleep time?"})]}),A.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-2",children:"Costume Pickup"}),ke.costume?A.jsxs("div",{children:[A.jsx("div",{className:"text-xl font-bold text-yellow-400",children:ke.costume.band}),A.jsxs("div",{className:"text-gray-400",children:["Section: ",ke.costume.section]}),yi>0&&A.jsxs("div",{className:"text-red-400 font-bold mt-1",children:["Balance Due: $",yi]})]}):A.jsx("div",{className:"text-gray-500 italic",children:"No costume details saved."})]})]})]})}return A.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[oi&&A.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slideIn",children:A.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-xl shadow-2xl max-w-sm",children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:oi.title}),A.jsx("p",{className:"text-sm opacity-90",children:oi.body})]}),A.jsx("button",{onClick:()=>Un(null),className:"ml-2 text-white/70 hover:text-white",children:""})]})})}),A.jsx(N6,{}),A.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm py-4 px-4 flex justify-between items-center sticky top-0 z-20 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("img",{src:Zh,alt:"Logo",className:"w-8 h-8"}),A.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white hidden sm:block",children:"Carnival Planner"})]}),t&&A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:aa,className:"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-yellow-300",children:U?"":""}),n&&A.jsx("button",{onClick:Ss,className:"px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-700 hover:bg-red-200 border border-red-200 transition-colors",children:"EXIT DEMO"}),ke&&A.jsx("button",{onClick:us,disabled:Ai,className:"px-3 py-1 text-xs font-bold rounded-full transition bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-200 disabled:opacity-50",children:Ai?"...":"GO ROAD READY"}),m?A.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full font-bold",children:"Premium"}):A.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Free Plan"}),A.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${wo?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300"}`,children:[A.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${wo?"bg-green-500":"bg-orange-500 animate-pulse"}`}),wo?"Online":"Offline Mode"]}),A.jsx("button",{onClick:jA,className:"text-sm font-medium text-gray-500 hover:text-red-500 dark:text-gray-400",children:"Sign Out"})]})]}),t&&A.jsx(k7,{user:t}),A.jsx("main",{className:"flex-1 p-4 max-w-4xl mx-auto w-full",children:t?A.jsxs("div",{children:[A.jsx("div",{className:"mb-8",children:A.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x",children:cs.map((P,q)=>{const ne=o===P.id,Be=_o[q%_o.length],De={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[P.id]||P.name,He=C0.find(Bn=>Bn.name.toLowerCase().includes(De.toLowerCase())||De.toLowerCase().includes(Bn.name.split("(")[0].trim().toLowerCase()));let ln=null;if(He){const Bn=new Date,Ne=new Date(Bn.getFullYear(),Bn.getMonth(),Bn.getDate()),[dr,it,DA]=He.date.split("-").map(Number),Zn=new Date(dr,it-1,DA);Zn>=Ne&&(ln=Math.round((Zn-Ne)/(1e3*60*60*24)))}return A.jsx("div",{onClick:()=>Co(P.id,`${P.name} - ${Bo[P.monthIndex]}`),className:`snap-center min-w-[200px] cursor-pointer rounded-2xl p-5 shadow-lg relative overflow-hidden transition-all duration-300 ${ne?"ring-4 ring-offset-2 ring-blue-400 scale-105":"hover:scale-105 opacity-90"} ${Be}`,children:A.jsxs("div",{className:"relative z-10 text-white",children:[A.jsx("h4",{className:"font-bold text-lg leading-tight mb-1",children:P.name}),A.jsx("p",{className:"text-xs font-medium uppercase tracking-wider opacity-90",children:Bo[P.monthIndex]}),He&&A.jsx("p",{className:"text-xs font-medium opacity-80 mt-1",children:new Date(He.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),ln!==null&&A.jsxs("div",{className:"mt-2 bg-white/20 backdrop-blur-sm rounded-lg px-2 py-1 inline-block",children:[A.jsx("span",{className:"text-lg font-black",children:ln}),A.jsx("span",{className:"text-xs ml-1 opacity-90",children:"days"})]})]})},P.id)})})}),ke?A.jsxs(A.Fragment,{children:[A.jsx(BI,{user:t,activeCarnivalId:o,carnivalData:C0,scrapedEvents:Ut,squadMembers:pe,budgetTotal:2e4,budgetSpent:_t,isPremium:m,onAction:h}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors",children:[!m&&A.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-pink-500 p-4 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-bold text-sm",children:"Unlock Premium Features"}),A.jsx("p",{className:"text-white/80 text-xs",children:"Go ad-free and get a Premium badge!"})]})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-4 py-2 bg-white text-orange-600 font-bold text-sm rounded-full hover:bg-gray-100 transition",children:"Upgrade"})]}),!m&&A.jsx("div",{className:"border-b border-gray-100 dark:border-gray-700",children:A.jsx(Yh,{placement:"banner",onUpgradeClick:()=>h("Info")})}),A.jsx("div",{className:"flex border-b border-gray-100 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:["Budget","Costume","Bands","Schedule","Squad","Passport","Packing","Map","Media","Profile","Info"].filter(P=>m||!["Map","Media","Passport"].includes(P)).map(P=>A.jsxs("button",{onClick:()=>{console.log("Switching to tab:",P,"isPremium:",m),h(P)},className:`flex-shrink-0 px-3 sm:px-4 py-3 sm:py-4 text-xs sm:text-sm font-medium transition-colors relative whitespace-nowrap ${u===P?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[P,["Map","Media","Passport"].includes(P)&&A.jsx("span",{className:"ml-1 text-xs text-yellow-500",children:""}),u===P&&A.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400"})]},P))}),Ot&&A.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 px-4 py-2 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-white text-lg",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-medium text-sm",children:"Squad Mode Active"}),A.jsxs("p",{className:"text-white/80 text-xs",children:["Changes sync with ",pe.length," squad member(s)"]})]})]}),A.jsx("button",{onClick:Aa,disabled:fi,className:"px-3 py-1 bg-white/20 text-white text-xs font-medium rounded-full hover:bg-white/30 transition disabled:opacity-50",children:fi?"Syncing...":"Refresh"})]}),A.jsxs("div",{className:"p-6",children:[u==="Budget"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-end mb-6",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Budget"}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Estimate"}),A.jsxs("p",{className:"text-2xl font-black text-green-600 dark:text-green-400",children:["$",_t.toFixed(2)]})]})]}),A.jsx("div",{className:"space-y-3 mb-6",children:(ke.budget||[]).map(P=>{var q;return A.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg group hover:bg-gray-100 dark:hover:bg-gray-600",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:P.name}),P.addedBy&&Ot&&A.jsxs("span",{className:"ml-2 text-xs text-gray-400 dark:text-gray-500",children:["by ",((q=P.addedBy.email)==null?void 0:q.split("@")[0])||"squad member"]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["$",P.cost.toFixed(2)]}),A.jsx("button",{onClick:()=>gi(P.id),className:"text-gray-400 hover:text-red-500",children:""})]})]},P.id)})}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsxs("div",{className:"flex gap-2 flex-1",children:[A.jsx("input",{type:"text",placeholder:"Item",value:O,onChange:P=>H(P.target.value),className:"flex-[2] p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("input",{type:"number",placeholder:"0.00",value:M,onChange:P=>I(P.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"})]}),A.jsx("button",{onClick:mi,className:"w-full sm:w-auto px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!m&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(Yh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Bands"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(C6,{carnivalId:o})}),u==="Costume"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Mas Costume"}),A.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl border border-pink-100 dark:border-pink-900 mb-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Band Name"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:z.band||(($n=ke.costume)==null?void 0:$n.band)||"",onChange:P=>ae({...z,band:P.target.value}),placeholder:"e.g. Tribe, Bliss..."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Section"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:z.section||((cr=ke.costume)==null?void 0:cr.section)||"",onChange:P=>ae({...z,section:P.target.value}),placeholder:"e.g. The Monarch"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Total Cost"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:z.total||((ur=ke.costume)==null?void 0:ur.total)||"",onChange:P=>ae({...z,total:P.target.value}),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Amount Paid"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:z.paid||((la=ke.costume)==null?void 0:la.paid)||"",onChange:P=>ae({...z,paid:P.target.value}),placeholder:"0.00"})]})]}),A.jsx("button",{onClick:Le,className:"mt-4 w-full py-2 bg-pink-600 text-white font-bold rounded hover:bg-pink-700",children:"Save Details"})]})]}),u==="Schedule"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Itinerary"}),Gr.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Popular Events (Click to Add)"}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Gr.map((P,q)=>A.jsxs("button",{onClick:()=>ds(P),className:"min-w-[140px] p-3 text-left rounded-lg border transition bg-blue-50 dark:bg-blue-900/30 border-blue-100 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-800",children:[A.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300 text-sm",children:P.title}),A.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400 opacity-75 truncate",children:P.note})]},q))})]}),m?A.jsxs("div",{className:"mb-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase flex items-center gap-1",children:[A.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Live Events from Fete Sites"]}),Wn&&A.jsxs("span",{className:"text-xs text-gray-400",children:["Updated: ",new Date(Wn).toLocaleDateString()]})]}),di?A.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[A.jsx("div",{className:"animate-spin inline-block w-5 h-5 border-2 border-emerald-500 border-t-transparent rounded-full mb-2"}),A.jsx("p",{className:"text-sm",children:"Loading live events..."})]}):Ut.length>0?A.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Ut.slice(0,10).map((P,q)=>A.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg hover:shadow-md transition",children:[P.image&&A.jsx("img",{src:P.image,alt:"",className:"w-12 h-12 rounded object-cover flex-shrink-0"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h5",{className:"font-bold text-emerald-900 dark:text-emerald-300 text-sm truncate",children:P.title}),P.date&&A.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-400",children:[new Date(P.date+"T00:00:00").toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),P.time&&` at ${P.time}`]}),P.venue&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:P.venue}),A.jsxs("p",{className:"text-xs text-gray-400",children:["via ",P.source]})]}),A.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[P.url&&A.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 text-xs bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Tickets"}),A.jsx("button",{onClick:()=>ds({title:P.title,note:P.venue||`via ${P.source}`}),className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"+ Add"})]})]},P.id||q))}):A.jsxs("div",{className:"text-center py-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[A.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-400",children:"No live events found for this carnival yet."}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Events are updated daily from fetelist.com & frontlineticketing.com"})]})]}):A.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-bold text-amber-900 dark:text-amber-300",children:"Unlock Live Event Listings"}),A.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"Premium members get daily-updated fete listings from fetelist.com & frontlineticketing.com"})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-sm font-bold rounded-lg hover:opacity-90 flex-shrink-0",children:"Upgrade"})]})}),A.jsx("div",{className:"space-y-4 mb-6",children:(ke.schedule||[]).map(P=>{var q;return A.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-blue-400 relative group",children:[A.jsxs("div",{className:"text-center min-w-[60px]",children:[A.jsx("span",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:new Date(P.datetime).toLocaleDateString(void 0,{month:"short"})}),A.jsx("span",{className:"block text-xl font-black text-gray-800 dark:text-white",children:new Date(P.datetime).getDate()}),A.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:new Date(P.datetime).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white",children:P.title}),P.note&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:P.note}),P.addedBy&&Ot&&A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Added by ",((q=P.addedBy.email)==null?void 0:q.split("@")[0])||"squad member"]})]}),A.jsx("button",{onClick:()=>To(P.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100",children:""})]},P.id)})}),A.jsx("div",{className:"mb-6",children:A.jsx(w6,{onScheduleDetected:async P=>{if(console.log("Voice Command:",P),!t)return;const q={name:P.name,date:P.day+" "+P.time,note:P.note,completed:!1};try{await createScheduleItem(t,o,q);const ne={...s},Be=ne[o];Be&&(Be.schedule=[...Be.schedule||[],{id:Date.now().toString(),...q}],i(ne)),alert(`Added: ${P.name}`)}catch(ne){console.error("Voice Add Failed",ne),alert("Could not add voice event.")}}})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Event Name (e.g. Scorch, Tribe)",value:B,onChange:P=>S(P.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Date/Time (e.g. Fri 2PM)",value:Q,onChange:P=>D(P.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Type (Fete, Mas, transport...)",value:K,onChange:P=>j(P.target.value),className:"md:col-span-2 p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("button",{onClick:Io,className:"md:col-span-2 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700",children:"Add Event"})]})]}),u==="Squad"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Your Squad"}),A.jsxs("span",{className:"text-sm bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:[((ms=ke.squad)==null?void 0:ms.length)||0," members"]})]}),mn.length>1&&A.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4 mb-4",children:[A.jsxs("h4",{className:"text-sm font-bold text-indigo-800 dark:text-indigo-300 mb-3 flex items-center gap-2",children:[A.jsx("span",{children:""})," My Squads (",mn.length,")"]}),A.jsx("div",{className:"grid gap-2",children:mn.map(P=>A.jsxs("button",{onClick:()=>LA(P.id),className:`w-full text-left p-3 rounded-lg border transition-all flex items-center justify-between ${(ie==null?void 0:ie.id)===P.id?"bg-indigo-100 dark:bg-indigo-900/40 border-indigo-400 dark:border-indigo-600":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/20"}`,children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:P.name}),P.isLeader&&A.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 px-1.5 py-0.5 rounded font-bold uppercase",children:"Leader"})]}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[P.memberCount," member",P.memberCount!==1?"s":""]})]}),(ie==null?void 0:ie.id)===P.id&&A.jsx("span",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded-full font-medium",children:"Active"})]},P.id))})]}),A.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl p-4 mb-6 shadow-lg border border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[A.jsx("span",{children:""})," Road Mode: Offline Chat"]}),A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Mesh chat for when cell service dies. Open Bitchat and join your squad channel."})]}),A.jsx("span",{className:"bg-blue-600 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:"No Data Needed"})]}),!o||!ie?A.jsx("div",{className:"text-center py-4 bg-white/5 rounded-lg border border-white/10",children:A.jsx("p",{className:"text-sm text-gray-300",children:"Create or join a squad to enable offline comms."})}):A.jsxs("div",{className:"space-y-4",children:[(()=>{const q=`#CP-${ie.id.slice(0,8).toUpperCase()}`;return A.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-white/10",children:[A.jsx("p",{className:"text-[10px] uppercase text-gray-400 font-bold mb-2",children:"Join this channel in Bitchat"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("p",{className:"font-mono text-2xl font-bold text-blue-400 tracking-wider select-all flex-1",children:q}),A.jsx("button",{onClick:()=>{navigator.clipboard.writeText(q),Un("Channel name copied!")},className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold rounded-lg transition-colors",children:"Copy"})]})]})})(),A.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[A.jsxs("a",{href:"https://apps.apple.com/us/app/bitchat-mesh/id6748219622",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," iOS App"]}),A.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.bitchat.droid",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," Android App"]})]})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4 mb-4",children:[A.jsxs("h4",{className:"font-bold text-purple-800 dark:text-purple-300 mb-3 flex items-center gap-2",children:[A.jsx("span",{children:""})," Squad Sharing"]}),vt&&A.jsx("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm",children:vt}),An&&A.jsx("div",{className:"mb-3 p-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-sm",children:An}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Share your carnival plan with friends:"}),ee?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-2xl font-mono font-bold text-purple-600 dark:text-purple-400 tracking-wider",children:ee}),A.jsx("button",{onClick:ko,className:"text-sm bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 px-3 py-1 rounded hover:bg-purple-200",children:"Copy"})]}):A.jsx("button",{onClick:po,disabled:Dt,className:"w-full py-2 bg-purple-600 text-white rounded font-medium hover:bg-purple-700 disabled:opacity-50",children:Dt?"Creating...":"Start a Squad"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Join a friend's squad:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Enter 6-digit code",value:de,onChange:P=>me(P.target.value.toUpperCase().slice(0,6)),className:"flex-1 p-2 border rounded font-mono text-center tracking-wider uppercase dark:bg-gray-700 dark:border-gray-600 dark:text-white",maxLength:6}),A.jsx("button",{onClick:RA,disabled:Nn||de.length!==6,className:"bg-pink-600 text-white px-4 rounded hover:bg-pink-700 disabled:opacity-50",children:Nn?"...":"Join"})]})]})]}),ie&&A.jsx("div",{className:"mt-4 text-center",children:A.jsx("button",{onClick:Mt,className:"text-sm text-red-500 hover:text-red-700 underline",children:"Leave Squad"})})]}),m&&A.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:A.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:Us,onChange:P=>yo(P.target.checked),className:"w-5 h-5 text-purple-600 rounded"}),A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-purple-800 dark:text-purple-300",children:"Notify squad when I go Road Ready"}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send push notification to squad members"})]}),A.jsx("span",{className:"ml-auto text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full",children:"Premium"})]})}),pe.length>0&&A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-green-200 dark:border-green-800 rounded-xl p-4 mb-4",children:[A.jsx("div",{className:"flex items-center justify-between mb-3",children:A.jsxs("h4",{className:"font-medium text-green-700 dark:text-green-400 flex items-center gap-2",children:[A.jsx("span",{children:""})," Connected Squad Members"]})}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:'These users joined using your share code and can see this carnival plan. Click "Refresh" to check for new members.'}),A.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((P,q)=>{var ne;return A.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full border ${P.role==="leader"?"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800":"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800"}`,children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-bold",children:(P.name||P.email||P.uid||"?").charAt(0).toUpperCase()}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:`font-medium text-sm ${P.role==="leader"?"text-yellow-800 dark:text-yellow-300":"text-green-800 dark:text-green-300"}`,children:P.name||P.email||`User ${(ne=P.uid)==null?void 0:ne.slice(0,6)}...`}),A.jsx("span",{className:`text-xs ${P.role==="leader"?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:P.role==="leader"?" Leader":" Member"})]}),(ie==null?void 0:ie.leaderId)===(t==null?void 0:t.uid)&&P.role!=="leader"&&P.uid&&A.jsx("button",{onClick:()=>Yt(P.uid,P.name||P.email||"this member"),className:"ml-auto text-red-400 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full p-1 transition-colors",title:"Remove from squad",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},P.uid||q)})})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 mb-4",children:[A.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Quick Add (Offline List)"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Add friend's name",value:oe,onChange:P=>Ae(P.target.value),className:"flex-1 p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:hs,className:"w-full sm:w-auto bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 font-medium",children:"Add"})]}),A.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[pe.map(P=>A.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 dark:bg-purple-900/30 px-3 py-1 rounded-full border border-purple-100 dark:border-purple-800",children:[A.jsx("span",{className:"text-purple-900 dark:text-purple-200 font-medium",children:P.name}),A.jsx("button",{onClick:()=>fs(P.id),className:"text-purple-400 hover:text-red-500 text-xs font-bold",children:""})]},P.id)),(ke.squad||[]).length===0&&A.jsx("p",{className:"text-gray-400 italic text-sm",children:"No squad members added yet. Riding solo?"})]})]}),A.jsx("div",{className:"mt-8 mb-8",children:A.jsx(h6,{squadId:ie==null?void 0:ie.id,user:t,isDemoMode:n})}),!m&&A.jsx("div",{className:"mt-4",children:A.jsx(Yh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Packing"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Packing List"}),A.jsx("div",{className:"space-y-2 mb-6",children:(ke.packing||[]).map(P=>A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 border border-gray-100 dark:border-gray-600 shadow-sm rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("input",{type:"checkbox",checked:P.checked,onChange:()=>At(P.id),className:"w-5 h-5 text-blue-600 rounded"}),A.jsx("span",{className:`text-gray-700 dark:text-gray-200 ${P.checked?"line-through opacity-50":""}`,children:P.item})]}),A.jsx("button",{onClick:()=>pi(P.id),className:"text-gray-400 hover:text-red-500",children:""})]},P.id))}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("input",{type:"text",placeholder:"Item",value:J,onChange:P=>Y(P.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:Oe,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!m&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(Yh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Map"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(c6,{locations:ke.mapLocations||[],scrapedEvents:Ut,onLocationsChange:P=>rt("mapLocations",P),carnivalName:ke.name,carnivalId:o})}),u==="Passport"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(y7,{user:t,activeCarnivalId:o,activePlanId:Ar,isDemoMode:n})}),u==="Media"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(f6,{files:ke.mediaFiles||[],onFilesChange:P=>rt("mediaFiles",P),carnivalName:ke.name,carnivalId:o,userId:t.uid})}),u==="Profile"&&A.jsxs("div",{className:"animate-fadeIn",children:[console.log("Rendering MasqueraderProfile, isOwnProfile: true"),A.jsx(_7,{currentUser:t,profileData:{...qn||{displayName:(t==null?void 0:t.displayName)||"Carnival Lover",bio:"",isPublic:!1,carnivalHistory:Object.entries(s||{}).filter(([P,q])=>{var ne;return(ne=q==null?void 0:q.costume)==null?void 0:ne.band}).map(([P,q])=>{var ne,Be;return{carnivalId:P,year:new Date().getFullYear(),band:(ne=q.costume)==null?void 0:ne.band,section:(Be=q.costume)==null?void 0:Be.section}})},activeCarnivalId:o,isPromoter:(qn==null?void 0:qn.isPromoter)||!1,onAccessPromoter:()=>h("Promoter")},isOwnProfile:!0,onEdit:()=>xo(!0)})]}),u==="Promoter"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(C7,{user:t,isPremium:m,onExit:()=>h("Profile")})}),u==="Info"&&A.jsxs("div",{className:"animate-fadeIn text-center",children:[A.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-2xl p-8 mb-6 shadow-xl",children:[A.jsx("img",{src:Zh,alt:"Logo",className:"w-20 h-20 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-2",children:m?"Premium Supporter":"Support the App"}),A.jsx("p",{className:"text-gray-400 mb-6",children:m?"Thank you for supporting Carnival Planner!":"All features are free! Premium removes ads and shows your support."}),A.jsxs("button",{onClick:mt,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 rounded-full font-bold transition-colors bg-white text-gray-900 hover:bg-gray-100",children:[A.jsx("span",{children:""})," Export Itinerary"]})]}),!m&&A.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[A.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400 mb-2",children:"Become a Premium Supporter"}),A.jsx("p",{className:"text-yellow-700 dark:text-yellow-500 text-sm mb-4",children:"Get an ad-free experience and a Premium badge to show your support!"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[A.jsx("button",{onClick:()=>bo("monthly"),disabled:E,className:"px-4 py-2 bg-blue-600 text-white font-bold rounded shadow hover:bg-blue-700 disabled:opacity-50",children:E?"Loading...":"Monthly - $4.99"}),A.jsx("button",{onClick:()=>bo("yearly"),disabled:E,className:"px-4 py-2 bg-yellow-400 text-yellow-900 font-bold rounded shadow hover:bg-yellow-500 disabled:opacity-50",children:E?"Loading...":"Yearly - $39.99"})]})]}),A.jsx("div",{className:"mt-6",children:A.jsx(Q6,{user:t})}),oa&&A.jsx("div",{className:"mt-6 text-left space-y-8",children:A.jsx(E7,{user:t})})]})]})]})]}):A.jsx(BI,{user:t,activeCarnivalId:null,carnivalData:C0,scrapedEvents:Ut,squadMembers:[],budgetTotal:0,budgetSpent:0,isPremium:m,onAction:h})]}):A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:ci?A.jsx(T7,{onBack:()=>Ps(!1),onSuccess:()=>Ps(!1)}):A.jsxs(A.Fragment,{children:[A.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-white",children:"Welcome Back"}),A.jsxs("div",{className:"space-y-3 w-full max-w-sm",children:[A.jsxs("button",{onClick:kr,className:"w-full flex items-center justify-center px-6 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-white transition-colors",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5 mr-3",alt:"G"}),"Continue with Google"]}),A.jsxs("div",{className:"flex items-center gap-3 text-gray-400 dark:text-gray-500",children:[A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),A.jsx("span",{className:"text-sm",children:"or"}),A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]}),A.jsx("button",{onClick:()=>Ps(!0),className:"w-full flex items-center justify-center px-6 py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-lg shadow-sm hover:opacity-90 text-white font-semibold transition-opacity",children:"Continue with Email"})]}),A.jsx("button",{onClick:()=>C(!0),className:"mt-6 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Back to home"})]})})}),A.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 px-4 mt-auto",children:A.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[A.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[A.jsx("button",{onClick:()=>Tr("privacy"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Privacy"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Tr("terms"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Terms"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Tr("cookies"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cookies"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Tr("refund"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Refunds"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Tr("contact"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Contact"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>ra(!0),className:"hover:text-gray-900 dark:hover:text-white transition-colors font-medium",children:"Help"})]}),A.jsxs("p",{className:"text-gray-400 dark:text-gray-500 text-xs mt-3",children:[" ",new Date().getFullYear()," Carnival Planner"]})]})}),t&&A.jsx(p6,{activeCarnivalId:o,isPremium:m}),vo&&A.jsx(w7,{onClose:()=>{Qs(!1),localStorage.setItem("carnival-planner-welcomed","true")}}),na&&A.jsx(v7,{onClose:()=>ra(!1)}),ia&&A.jsx(B7,{user:t,currentProfile:qn,carnivals:s,onSave:P=>sa(P),onClose:()=>xo(!1)})]})}$0.createRoot(document.getElementById("root")).render(A.jsx(sm.StrictMode,{children:A.jsx(L7,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered:",t.scope)}).catch(t=>{console.log("SW registration failed:",t)})});
