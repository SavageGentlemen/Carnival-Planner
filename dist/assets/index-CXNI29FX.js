(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wI={exports:{}},rm={},vI={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd=Symbol.for("react.element"),N2=Symbol.for("react.portal"),F2=Symbol.for("react.fragment"),Q2=Symbol.for("react.strict_mode"),P2=Symbol.for("react.profiler"),L2=Symbol.for("react.provider"),R2=Symbol.for("react.context"),D2=Symbol.for("react.forward_ref"),j2=Symbol.for("react.suspense"),M2=Symbol.for("react.memo"),O2=Symbol.for("react.lazy"),z_=Symbol.iterator;function H2(t){return t===null||typeof t!="object"?null:(t=z_&&t[z_]||t["@@iterator"],typeof t=="function"?t:null)}var xI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_I=Object.assign,BI={};function cc(t,e,n){this.props=t,this.context=e,this.refs=BI,this.updater=n||xI}cc.prototype.isReactComponent={};cc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function CI(){}CI.prototype=cc.prototype;function zw(t,e,n){this.props=t,this.context=e,this.refs=BI,this.updater=n||xI}var Gw=zw.prototype=new CI;Gw.constructor=zw;_I(Gw,cc.prototype);Gw.isPureReactComponent=!0;var G_=Array.isArray,bI=Object.prototype.hasOwnProperty,qw={current:null},EI={key:!0,ref:!0,__self:!0,__source:!0};function II(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bI.call(e,r)&&!EI.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:bd,type:t,key:s,ref:o,props:i,_owner:qw.current}}function V2(t,e){return{$$typeof:bd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ww(t){return typeof t=="object"&&t!==null&&t.$$typeof===bd}function K2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var q_=/\/+/g;function Eg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K2(""+t.key):e.toString(36)}function yf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bd:case N2:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Eg(o,0):r,G_(i)?(n="",t!=null&&(n=t.replace(q_,"$&/")+"/"),yf(i,e,n,"",function(h){return h})):i!=null&&(Ww(i)&&(i=V2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(q_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",G_(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Eg(s,l);o+=yf(s,e,n,u,i)}else if(u=H2(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Eg(s,l++),o+=yf(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mh(t,e,n){if(t==null)return t;var r=[],i=0;return yf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function z2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var er={current:null},wf={transition:null},G2={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:wf,ReactCurrentOwner:qw};function TI(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:mh,forEach:function(t,e,n){mh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mh(t,function(){e++}),e},toArray:function(t){return mh(t,function(e){return e})||[]},only:function(t){if(!Ww(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=cc;Ge.Fragment=F2;Ge.Profiler=P2;Ge.PureComponent=zw;Ge.StrictMode=Q2;Ge.Suspense=j2;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G2;Ge.act=TI;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_I({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)bI.call(e,u)&&!EI.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:bd,type:t.type,key:i,ref:s,props:r,_owner:o}};Ge.createContext=function(t){return t={$$typeof:R2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:L2,_context:t},t.Consumer=t};Ge.createElement=II;Ge.createFactory=function(t){var e=II.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:D2,render:t}};Ge.isValidElement=Ww;Ge.lazy=function(t){return{$$typeof:O2,_payload:{_status:-1,_result:t},_init:z2}};Ge.memo=function(t,e){return{$$typeof:M2,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=wf.transition;wf.transition={};try{t()}finally{wf.transition=e}};Ge.unstable_act=TI;Ge.useCallback=function(t,e){return er.current.useCallback(t,e)};Ge.useContext=function(t){return er.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return er.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return er.current.useEffect(t,e)};Ge.useId=function(){return er.current.useId()};Ge.useImperativeHandle=function(t,e,n){return er.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return er.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return er.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return er.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return er.current.useReducer(t,e,n)};Ge.useRef=function(t){return er.current.useRef(t)};Ge.useState=function(t){return er.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return er.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return er.current.useTransition()};Ge.version="18.3.1";vI.exports=Ge;var M=vI.exports;const $f=yI(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2=M,W2=Symbol.for("react.element"),$2=Symbol.for("react.fragment"),Z2=Object.prototype.hasOwnProperty,J2=q2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X2={key:!0,ref:!0,__self:!0,__source:!0};function SI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Z2.call(e,r)&&!X2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:W2,type:t,key:s,ref:o,props:i,_owner:J2.current}}rm.Fragment=$2;rm.jsx=SI;rm.jsxs=SI;wI.exports=rm;var A=wI.exports,H0={},kI={exports:{}},Qr={},UI={exports:{}},NI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ae){var ee=G.length;G.push(ae);e:for(;0<ee;){var ve=ee-1>>>1,ue=G[ve];if(0<i(ue,ae))G[ve]=ae,G[ee]=ue,ee=ve;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ae=G[0],ee=G.pop();if(ee!==ae){G[0]=ee;e:for(var ve=0,ue=G.length,he=ue>>>1;ve<he;){var ge=2*(ve+1)-1,de=G[ge],se=ge+1,Fe=G[se];if(0>i(de,ee))se<ue&&0>i(Fe,de)?(G[ve]=Fe,G[se]=ee,ve=se):(G[ve]=de,G[ge]=ee,ve=ge);else if(se<ue&&0>i(Fe,ee))G[ve]=Fe,G[se]=ee,ve=se;else break e}}return ae}function i(G,ae){var ee=G.sortIndex-ae.sortIndex;return ee!==0?ee:G.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,g=null,w=3,C=!1,b=!1,_=!1,F=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var ae=n(h);ae!==null;){if(ae.callback===null)r(h);else if(ae.startTime<=G)r(h),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=n(h)}}function O(G){if(_=!1,k(G),!b)if(n(u)!==null)b=!0,Ae(V);else{var ae=n(h);ae!==null&&fe(O,ae.startTime-G)}}function V(G,ae){b=!1,_&&(_=!1,I(E),E=-1),C=!0;var ee=w;try{for(k(ae),g=n(u);g!==null&&(!(g.expirationTime>ae)||G&&!D());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,w=g.priorityLevel;var ue=ve(g.expirationTime<=ae);ae=t.unstable_now(),typeof ue=="function"?g.callback=ue:g===n(u)&&r(u),k(ae)}else r(u);g=n(u)}if(g!==null)var he=!0;else{var ge=n(h);ge!==null&&fe(O,ge.startTime-ae),he=!1}return he}finally{g=null,w=ee,C=!1}}var j=!1,T=null,E=-1,U=5,Q=-1;function D(){return!(t.unstable_now()-Q<U)}function K(){if(T!==null){var G=t.unstable_now();Q=G;var ae=!0;try{ae=T(!0,G)}finally{ae?R():(j=!1,T=null)}}else j=!1}var R;if(typeof B=="function")R=function(){B(K)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,oe=Y.port2;Y.port1.onmessage=K,R=function(){oe.postMessage(null)}}else R=function(){F(K,0)};function Ae(G){T=G,j||(j=!0,R())}function fe(G,ae){E=F(function(){G(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){b||C||(b=!0,Ae(V))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var ee=w;w=ae;try{return G()}finally{w=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=w;w=G;try{return ae()}finally{w=ee}},t.unstable_scheduleCallback=function(G,ae,ee){var ve=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ve+ee:ve):ee=ve,G){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ee+ue,G={id:p++,callback:ae,priorityLevel:G,startTime:ee,expirationTime:ue,sortIndex:-1},ee>ve?(G.sortIndex=ee,e(h,G),n(u)===null&&G===n(h)&&(_?(I(E),E=-1):_=!0,fe(O,ee-ve))):(G.sortIndex=ue,e(u,G),b||C||(b=!0,Ae(V))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var ae=w;return function(){var ee=w;w=ae;try{return G.apply(this,arguments)}finally{w=ee}}}})(NI);UI.exports=NI;var Y2=UI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eQ=M,Ur=Y2;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FI=new Set,Hu={};function BA(t,e){Ml(t,e),Ml(t+"Capture",e)}function Ml(t,e){for(Hu[t]=e,t=0;t<e.length;t++)FI.add(e[t])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V0=Object.prototype.hasOwnProperty,tQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W_={},$_={};function nQ(t){return V0.call($_,t)?!0:V0.call(W_,t)?!1:tQ.test(t)?$_[t]=!0:(W_[t]=!0,!1)}function rQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iQ(t,e,n,r){if(e===null||typeof e>"u"||rQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bn[t]=new tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bn[e]=new tr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bn[t]=new tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bn[t]=new tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bn[t]=new tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bn[t]=new tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bn[t]=new tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bn[t]=new tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bn[t]=new tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var $w=/[\-:]([a-z])/g;function Zw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($w,Zw);Bn[e]=new tr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($w,Zw);Bn[e]=new tr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($w,Zw);Bn[e]=new tr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bn[t]=new tr(t,1,!1,t.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bn[t]=new tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jw(t,e,n,r){var i=Bn.hasOwnProperty(e)?Bn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iQ(e,n,i,r)&&(n=null),r||i===null?nQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var js=eQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gh=Symbol.for("react.element"),fl=Symbol.for("react.portal"),pl=Symbol.for("react.fragment"),Xw=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),QI=Symbol.for("react.provider"),PI=Symbol.for("react.context"),Yw=Symbol.for("react.forward_ref"),z0=Symbol.for("react.suspense"),G0=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),LI=Symbol.for("react.offscreen"),Z_=Symbol.iterator;function Lc(t){return t===null||typeof t!="object"?null:(t=Z_&&t[Z_]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,Ig;function nu(t){if(Ig===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ig=e&&e[1]||""}return`
`+Ig+t}var Tg=!1;function Sg(t,e){if(!t||Tg)return"";Tg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Tg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nu(t):""}function sQ(t){switch(t.tag){case 5:return nu(t.type);case 16:return nu("Lazy");case 13:return nu("Suspense");case 19:return nu("SuspenseList");case 0:case 2:case 15:return t=Sg(t.type,!1),t;case 11:return t=Sg(t.type.render,!1),t;case 1:return t=Sg(t.type,!0),t;default:return""}}function q0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pl:return"Fragment";case fl:return"Portal";case K0:return"Profiler";case Xw:return"StrictMode";case z0:return"Suspense";case G0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PI:return(t.displayName||"Context")+".Consumer";case QI:return(t._context.displayName||"Context")+".Provider";case Yw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ev:return e=t.displayName||null,e!==null?e:q0(t.type)||"Memo";case ma:e=t._payload,t=t._init;try{return q0(t(e))}catch{}}return null}function aQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q0(e);case 8:return e===Xw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ga(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oQ(t){var e=RI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yh(t){t._valueTracker||(t._valueTracker=oQ(t))}function DI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function W0(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function J_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ga(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jI(t,e){e=e.checked,e!=null&&Jw(t,"checked",e,!1)}function $0(t,e){jI(t,e);var n=Ga(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Z0(t,e.type,n):e.hasOwnProperty("defaultValue")&&Z0(t,e.type,Ga(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Z0(t,e,n){(e!=="number"||Zf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ru=Array.isArray;function Tl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ga(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function J0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(ru(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ga(n)}}function MI(t,e){var n=Ga(e.value),r=Ga(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function OI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?OI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wh,HI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wh=wh||document.createElement("div"),wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AQ=["Webkit","ms","Moz","O"];Object.keys(wu).forEach(function(t){AQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wu[e]=wu[t]})});function VI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wu.hasOwnProperty(t)&&wu[t]?(""+e).trim():e+"px"}function KI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=VI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lQ=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Y0(t,e){if(e){if(lQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function ey(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ty=null;function tv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ny=null,Sl=null,kl=null;function tB(t){if(t=Td(t)){if(typeof ny!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=Am(e),ny(t.stateNode,t.type,e))}}function zI(t){Sl?kl?kl.push(t):kl=[t]:Sl=t}function GI(){if(Sl){var t=Sl,e=kl;if(kl=Sl=null,tB(t),e)for(t=0;t<e.length;t++)tB(e[t])}}function qI(t,e){return t(e)}function WI(){}var kg=!1;function $I(t,e,n){if(kg)return t(e,n);kg=!0;try{return qI(t,e,n)}finally{kg=!1,(Sl!==null||kl!==null)&&(WI(),GI())}}function Ku(t,e){var n=t.stateNode;if(n===null)return null;var r=Am(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var ry=!1;if(ks)try{var Rc={};Object.defineProperty(Rc,"passive",{get:function(){ry=!0}}),window.addEventListener("test",Rc,Rc),window.removeEventListener("test",Rc,Rc)}catch{ry=!1}function cQ(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var vu=!1,Jf=null,Xf=!1,iy=null,uQ={onError:function(t){vu=!0,Jf=t}};function dQ(t,e,n,r,i,s,o,l,u){vu=!1,Jf=null,cQ.apply(uQ,arguments)}function hQ(t,e,n,r,i,s,o,l,u){if(dQ.apply(this,arguments),vu){if(vu){var h=Jf;vu=!1,Jf=null}else throw Error(ie(198));Xf||(Xf=!0,iy=h)}}function CA(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ZI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nB(t){if(CA(t)!==t)throw Error(ie(188))}function fQ(t){var e=t.alternate;if(!e){if(e=CA(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nB(i),t;if(s===r)return nB(i),e;s=s.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function JI(t){return t=fQ(t),t!==null?XI(t):null}function XI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=XI(t);if(e!==null)return e;t=t.sibling}return null}var YI=Ur.unstable_scheduleCallback,rB=Ur.unstable_cancelCallback,pQ=Ur.unstable_shouldYield,mQ=Ur.unstable_requestPaint,Gt=Ur.unstable_now,gQ=Ur.unstable_getCurrentPriorityLevel,nv=Ur.unstable_ImmediatePriority,eT=Ur.unstable_UserBlockingPriority,Yf=Ur.unstable_NormalPriority,yQ=Ur.unstable_LowPriority,tT=Ur.unstable_IdlePriority,im=null,Oi=null;function wQ(t){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(im,t,void 0,(t.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:_Q,vQ=Math.log,xQ=Math.LN2;function _Q(t){return t>>>=0,t===0?32:31-(vQ(t)/xQ|0)|0}var vh=64,xh=4194304;function iu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ep(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=iu(l):(s&=o,s!==0&&(r=iu(s)))}else o=n&~i,o!==0?r=iu(o):s!==0&&(r=iu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gi(e),i=1<<n,r|=t[n],e&=~i;return r}function BQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CQ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gi(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=BQ(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function sy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nT(){var t=vh;return vh<<=1,!(vh&4194240)&&(vh=64),t}function Ug(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ed(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gi(e),t[e]=n}function bQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function rv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var At=0;function rT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iT,iv,sT,aT,oT,ay=!1,_h=[],Qa=null,Pa=null,La=null,zu=new Map,Gu=new Map,wa=[],EQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iB(t,e){switch(t){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":zu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(e.pointerId)}}function Dc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Td(e),e!==null&&iv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function IQ(t,e,n,r,i){switch(e){case"focusin":return Qa=Dc(Qa,t,e,n,r,i),!0;case"dragenter":return Pa=Dc(Pa,t,e,n,r,i),!0;case"mouseover":return La=Dc(La,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return zu.set(s,Dc(zu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gu.set(s,Dc(Gu.get(s)||null,t,e,n,r,i)),!0}return!1}function AT(t){var e=Mo(t.target);if(e!==null){var n=CA(e);if(n!==null){if(e=n.tag,e===13){if(e=ZI(n),e!==null){t.blockedOn=e,oT(t.priority,function(){sT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ty=r,n.target.dispatchEvent(r),ty=null}else return e=Td(n),e!==null&&iv(e),t.blockedOn=n,!1;e.shift()}return!0}function sB(t,e,n){vf(t)&&n.delete(e)}function TQ(){ay=!1,Qa!==null&&vf(Qa)&&(Qa=null),Pa!==null&&vf(Pa)&&(Pa=null),La!==null&&vf(La)&&(La=null),zu.forEach(sB),Gu.forEach(sB)}function jc(t,e){t.blockedOn===e&&(t.blockedOn=null,ay||(ay=!0,Ur.unstable_scheduleCallback(Ur.unstable_NormalPriority,TQ)))}function qu(t){function e(i){return jc(i,t)}if(0<_h.length){jc(_h[0],t);for(var n=1;n<_h.length;n++){var r=_h[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qa!==null&&jc(Qa,t),Pa!==null&&jc(Pa,t),La!==null&&jc(La,t),zu.forEach(e),Gu.forEach(e),n=0;n<wa.length;n++)r=wa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wa.length&&(n=wa[0],n.blockedOn===null);)AT(n),n.blockedOn===null&&wa.shift()}var Ul=js.ReactCurrentBatchConfig,tp=!0;function SQ(t,e,n,r){var i=At,s=Ul.transition;Ul.transition=null;try{At=1,sv(t,e,n,r)}finally{At=i,Ul.transition=s}}function kQ(t,e,n,r){var i=At,s=Ul.transition;Ul.transition=null;try{At=4,sv(t,e,n,r)}finally{At=i,Ul.transition=s}}function sv(t,e,n,r){if(tp){var i=oy(t,e,n,r);if(i===null)Og(t,e,r,np,n),iB(t,r);else if(IQ(i,t,e,n,r))r.stopPropagation();else if(iB(t,r),e&4&&-1<EQ.indexOf(t)){for(;i!==null;){var s=Td(i);if(s!==null&&iT(s),s=oy(t,e,n,r),s===null&&Og(t,e,r,np,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Og(t,e,r,null,n)}}var np=null;function oy(t,e,n,r){if(np=null,t=tv(r),t=Mo(t),t!==null)if(e=CA(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ZI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return np=t,null}function lT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gQ()){case nv:return 1;case eT:return 4;case Yf:case yQ:return 16;case tT:return 536870912;default:return 16}default:return 16}}var Ia=null,av=null,xf=null;function cT(){if(xf)return xf;var t,e=av,n=e.length,r,i="value"in Ia?Ia.value:Ia.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return xf=i.slice(t,1<r?1-r:void 0)}function _f(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bh(){return!0}function aB(){return!1}function Pr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bh:aB,this.isPropagationStopped=aB,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bh)},persist:function(){},isPersistent:Bh}),e}var uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ov=Pr(uc),Id=Pt({},uc,{view:0,detail:0}),UQ=Pr(Id),Ng,Fg,Mc,sm=Pt({},Id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Av,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mc&&(Mc&&t.type==="mousemove"?(Ng=t.screenX-Mc.screenX,Fg=t.screenY-Mc.screenY):Fg=Ng=0,Mc=t),Ng)},movementY:function(t){return"movementY"in t?t.movementY:Fg}}),oB=Pr(sm),NQ=Pt({},sm,{dataTransfer:0}),FQ=Pr(NQ),QQ=Pt({},Id,{relatedTarget:0}),Qg=Pr(QQ),PQ=Pt({},uc,{animationName:0,elapsedTime:0,pseudoElement:0}),LQ=Pr(PQ),RQ=Pt({},uc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DQ=Pr(RQ),jQ=Pt({},uc,{data:0}),AB=Pr(jQ),MQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HQ[t])?!!e[t]:!1}function Av(){return VQ}var KQ=Pt({},Id,{key:function(t){if(t.key){var e=MQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_f(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Av,charCode:function(t){return t.type==="keypress"?_f(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_f(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zQ=Pr(KQ),GQ=Pt({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lB=Pr(GQ),qQ=Pt({},Id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Av}),WQ=Pr(qQ),$Q=Pt({},uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZQ=Pr($Q),JQ=Pt({},sm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XQ=Pr(JQ),YQ=[9,13,27,32],lv=ks&&"CompositionEvent"in window,xu=null;ks&&"documentMode"in document&&(xu=document.documentMode);var eP=ks&&"TextEvent"in window&&!xu,uT=ks&&(!lv||xu&&8<xu&&11>=xu),cB=" ",uB=!1;function dT(t,e){switch(t){case"keyup":return YQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ml=!1;function tP(t,e){switch(t){case"compositionend":return hT(e);case"keypress":return e.which!==32?null:(uB=!0,cB);case"textInput":return t=e.data,t===cB&&uB?null:t;default:return null}}function nP(t,e){if(ml)return t==="compositionend"||!lv&&dT(t,e)?(t=cT(),xf=av=Ia=null,ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uT&&e.locale!=="ko"?null:e.data;default:return null}}var rP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rP[t.type]:e==="textarea"}function fT(t,e,n,r){zI(r),e=rp(e,"onChange"),0<e.length&&(n=new ov("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _u=null,Wu=null;function iP(t){bT(t,0)}function am(t){var e=wl(t);if(DI(e))return t}function sP(t,e){if(t==="change")return e}var pT=!1;if(ks){var Pg;if(ks){var Lg="oninput"in document;if(!Lg){var hB=document.createElement("div");hB.setAttribute("oninput","return;"),Lg=typeof hB.oninput=="function"}Pg=Lg}else Pg=!1;pT=Pg&&(!document.documentMode||9<document.documentMode)}function fB(){_u&&(_u.detachEvent("onpropertychange",mT),Wu=_u=null)}function mT(t){if(t.propertyName==="value"&&am(Wu)){var e=[];fT(e,Wu,t,tv(t)),$I(iP,e)}}function aP(t,e,n){t==="focusin"?(fB(),_u=e,Wu=n,_u.attachEvent("onpropertychange",mT)):t==="focusout"&&fB()}function oP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return am(Wu)}function AP(t,e){if(t==="click")return am(e)}function lP(t,e){if(t==="input"||t==="change")return am(e)}function cP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vi=typeof Object.is=="function"?Object.is:cP;function $u(t,e){if(vi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!V0.call(e,i)||!vi(t[i],e[i]))return!1}return!0}function pB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mB(t,e){var n=pB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pB(n)}}function gT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yT(){for(var t=window,e=Zf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zf(t.document)}return e}function cv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uP(t){var e=yT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gT(n.ownerDocument.documentElement,n)){if(r!==null&&cv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mB(n,s);var o=mB(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dP=ks&&"documentMode"in document&&11>=document.documentMode,gl=null,Ay=null,Bu=null,ly=!1;function gB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ly||gl==null||gl!==Zf(r)||(r=gl,"selectionStart"in r&&cv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bu&&$u(Bu,r)||(Bu=r,r=rp(Ay,"onSelect"),0<r.length&&(e=new ov("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gl)))}function Ch(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yl={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionend:Ch("Transition","TransitionEnd")},Rg={},wT={};ks&&(wT=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function om(t){if(Rg[t])return Rg[t];if(!yl[t])return t;var e=yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wT)return Rg[t]=e[n];return t}var vT=om("animationend"),xT=om("animationiteration"),_T=om("animationstart"),BT=om("transitionend"),CT=new Map,yB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){CT.set(t,e),BA(e,[t])}for(var Dg=0;Dg<yB.length;Dg++){var jg=yB[Dg],hP=jg.toLowerCase(),fP=jg[0].toUpperCase()+jg.slice(1);to(hP,"on"+fP)}to(vT,"onAnimationEnd");to(xT,"onAnimationIteration");to(_T,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(BT,"onTransitionEnd");Ml("onMouseEnter",["mouseout","mouseover"]);Ml("onMouseLeave",["mouseout","mouseover"]);Ml("onPointerEnter",["pointerout","pointerover"]);Ml("onPointerLeave",["pointerout","pointerover"]);BA("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));BA("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));BA("onBeforeInput",["compositionend","keypress","textInput","paste"]);BA("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));BA("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));BA("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pP=new Set("cancel close invalid load scroll toggle".split(" ").concat(su));function wB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hQ(r,e,void 0,t),t.currentTarget=null}function bT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;wB(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;wB(i,l,h),s=u}}}if(Xf)throw t=iy,Xf=!1,iy=null,t}function _t(t,e){var n=e[fy];n===void 0&&(n=e[fy]=new Set);var r=t+"__bubble";n.has(r)||(ET(e,t,2,!1),n.add(r))}function Mg(t,e,n){var r=0;e&&(r|=4),ET(n,t,r,e)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Zu(t){if(!t[bh]){t[bh]=!0,FI.forEach(function(n){n!=="selectionchange"&&(pP.has(n)||Mg(n,!1,t),Mg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bh]||(e[bh]=!0,Mg("selectionchange",!1,e))}}function ET(t,e,n,r){switch(lT(e)){case 1:var i=SQ;break;case 4:i=kQ;break;default:i=sv}n=i.bind(null,e,n,t),i=void 0,!ry||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Og(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Mo(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}$I(function(){var h=s,p=tv(n),g=[];e:{var w=CT.get(t);if(w!==void 0){var C=ov,b=t;switch(t){case"keypress":if(_f(n)===0)break e;case"keydown":case"keyup":C=zQ;break;case"focusin":b="focus",C=Qg;break;case"focusout":b="blur",C=Qg;break;case"beforeblur":case"afterblur":C=Qg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=oB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=FQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=WQ;break;case vT:case xT:case _T:C=LQ;break;case BT:C=ZQ;break;case"scroll":C=UQ;break;case"wheel":C=XQ;break;case"copy":case"cut":case"paste":C=DQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=lB}var _=(e&4)!==0,F=!_&&t==="scroll",I=_?w!==null?w+"Capture":null:w;_=[];for(var B=h,k;B!==null;){k=B;var O=k.stateNode;if(k.tag===5&&O!==null&&(k=O,I!==null&&(O=Ku(B,I),O!=null&&_.push(Ju(B,O,k)))),F)break;B=B.return}0<_.length&&(w=new C(w,b,null,n,p),g.push({event:w,listeners:_}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",w&&n!==ty&&(b=n.relatedTarget||n.fromElement)&&(Mo(b)||b[Us]))break e;if((C||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,C?(b=n.relatedTarget||n.toElement,C=h,b=b?Mo(b):null,b!==null&&(F=CA(b),b!==F||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=h),C!==b)){if(_=oB,O="onMouseLeave",I="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(_=lB,O="onPointerLeave",I="onPointerEnter",B="pointer"),F=C==null?w:wl(C),k=b==null?w:wl(b),w=new _(O,B+"leave",C,n,p),w.target=F,w.relatedTarget=k,O=null,Mo(p)===h&&(_=new _(I,B+"enter",b,n,p),_.target=k,_.relatedTarget=F,O=_),F=O,C&&b)t:{for(_=C,I=b,B=0,k=_;k;k=$A(k))B++;for(k=0,O=I;O;O=$A(O))k++;for(;0<B-k;)_=$A(_),B--;for(;0<k-B;)I=$A(I),k--;for(;B--;){if(_===I||I!==null&&_===I.alternate)break t;_=$A(_),I=$A(I)}_=null}else _=null;C!==null&&vB(g,w,C,_,!1),b!==null&&F!==null&&vB(g,F,b,_,!0)}}e:{if(w=h?wl(h):window,C=w.nodeName&&w.nodeName.toLowerCase(),C==="select"||C==="input"&&w.type==="file")var V=sP;else if(dB(w))if(pT)V=lP;else{V=oP;var j=aP}else(C=w.nodeName)&&C.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(V=AP);if(V&&(V=V(t,h))){fT(g,V,n,p);break e}j&&j(t,w,h),t==="focusout"&&(j=w._wrapperState)&&j.controlled&&w.type==="number"&&Z0(w,"number",w.value)}switch(j=h?wl(h):window,t){case"focusin":(dB(j)||j.contentEditable==="true")&&(gl=j,Ay=h,Bu=null);break;case"focusout":Bu=Ay=gl=null;break;case"mousedown":ly=!0;break;case"contextmenu":case"mouseup":case"dragend":ly=!1,gB(g,n,p);break;case"selectionchange":if(dP)break;case"keydown":case"keyup":gB(g,n,p)}var T;if(lv)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ml?dT(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(uT&&n.locale!=="ko"&&(ml||E!=="onCompositionStart"?E==="onCompositionEnd"&&ml&&(T=cT()):(Ia=p,av="value"in Ia?Ia.value:Ia.textContent,ml=!0)),j=rp(h,E),0<j.length&&(E=new AB(E,t,null,n,p),g.push({event:E,listeners:j}),T?E.data=T:(T=hT(n),T!==null&&(E.data=T)))),(T=eP?tP(t,n):nP(t,n))&&(h=rp(h,"onBeforeInput"),0<h.length&&(p=new AB("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=T))}bT(g,e)})}function Ju(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ku(t,n),s!=null&&r.unshift(Ju(t,s,i)),s=Ku(t,e),s!=null&&r.push(Ju(t,s,i))),t=t.return}return r}function $A(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vB(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ku(n,s),u!=null&&o.unshift(Ju(n,u,l))):i||(u=Ku(n,s),u!=null&&o.push(Ju(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mP=/\r\n?/g,gP=/\u0000|\uFFFD/g;function xB(t){return(typeof t=="string"?t:""+t).replace(mP,`
`).replace(gP,"")}function Eh(t,e,n){if(e=xB(e),xB(t)!==e&&n)throw Error(ie(425))}function ip(){}var cy=null,uy=null;function dy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hy=typeof setTimeout=="function"?setTimeout:void 0,yP=typeof clearTimeout=="function"?clearTimeout:void 0,_B=typeof Promise=="function"?Promise:void 0,wP=typeof queueMicrotask=="function"?queueMicrotask:typeof _B<"u"?function(t){return _B.resolve(null).then(t).catch(vP)}:hy;function vP(t){setTimeout(function(){throw t})}function Hg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),qu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qu(e)}function Ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dc=Math.random().toString(36).slice(2),Li="__reactFiber$"+dc,Xu="__reactProps$"+dc,Us="__reactContainer$"+dc,fy="__reactEvents$"+dc,xP="__reactListeners$"+dc,_P="__reactHandles$"+dc;function Mo(t){var e=t[Li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Us]||n[Li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=BB(t);t!==null;){if(n=t[Li])return n;t=BB(t)}return e}t=n,n=t.parentNode}return null}function Td(t){return t=t[Li]||t[Us],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function Am(t){return t[Xu]||null}var py=[],vl=-1;function no(t){return{current:t}}function Bt(t){0>vl||(t.current=py[vl],py[vl]=null,vl--)}function mt(t,e){vl++,py[vl]=t.current,t.current=e}var qa={},Mn=no(qa),mr=no(!1),Yo=qa;function Ol(t,e){var n=t.type.contextTypes;if(!n)return qa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gr(t){return t=t.childContextTypes,t!=null}function sp(){Bt(mr),Bt(Mn)}function CB(t,e,n){if(Mn.current!==qa)throw Error(ie(168));mt(Mn,e),mt(mr,n)}function IT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ie(108,aQ(t)||"Unknown",i));return Pt({},n,r)}function ap(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qa,Yo=Mn.current,mt(Mn,t),mt(mr,mr.current),!0}function bB(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=IT(t,e,Yo),r.__reactInternalMemoizedMergedChildContext=t,Bt(mr),Bt(Mn),mt(Mn,t)):Bt(mr),mt(mr,n)}var ps=null,lm=!1,Vg=!1;function TT(t){ps===null?ps=[t]:ps.push(t)}function BP(t){lm=!0,TT(t)}function ro(){if(!Vg&&ps!==null){Vg=!0;var t=0,e=At;try{var n=ps;for(At=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ps=null,lm=!1}catch(i){throw ps!==null&&(ps=ps.slice(t+1)),YI(nv,ro),i}finally{At=e,Vg=!1}}return null}var xl=[],_l=0,op=null,Ap=0,Vr=[],Kr=0,eA=null,gs=1,ys="";function So(t,e){xl[_l++]=Ap,xl[_l++]=op,op=t,Ap=e}function ST(t,e,n){Vr[Kr++]=gs,Vr[Kr++]=ys,Vr[Kr++]=eA,eA=t;var r=gs;t=ys;var i=32-gi(r)-1;r&=~(1<<i),n+=1;var s=32-gi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gs=1<<32-gi(e)+i|n<<i|r,ys=s+t}else gs=1<<s|n<<i|r,ys=t}function uv(t){t.return!==null&&(So(t,1),ST(t,1,0))}function dv(t){for(;t===op;)op=xl[--_l],xl[_l]=null,Ap=xl[--_l],xl[_l]=null;for(;t===eA;)eA=Vr[--Kr],Vr[Kr]=null,ys=Vr[--Kr],Vr[Kr]=null,gs=Vr[--Kr],Vr[Kr]=null}var Sr=null,Er=null,It=!1,fi=null;function kT(t,e){var n=qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function EB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sr=t,Er=Ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sr=t,Er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eA!==null?{id:gs,overflow:ys}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sr=t,Er=null,!0):!1;default:return!1}}function my(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gy(t){if(It){var e=Er;if(e){var n=e;if(!EB(t,e)){if(my(t))throw Error(ie(418));e=Ra(n.nextSibling);var r=Sr;e&&EB(t,e)?kT(r,n):(t.flags=t.flags&-4097|2,It=!1,Sr=t)}}else{if(my(t))throw Error(ie(418));t.flags=t.flags&-4097|2,It=!1,Sr=t}}}function IB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sr=t}function Ih(t){if(t!==Sr)return!1;if(!It)return IB(t),It=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dy(t.type,t.memoizedProps)),e&&(e=Er)){if(my(t))throw UT(),Error(ie(418));for(;e;)kT(t,e),e=Ra(e.nextSibling)}if(IB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Er=Ra(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Er=null}}else Er=Sr?Ra(t.stateNode.nextSibling):null;return!0}function UT(){for(var t=Er;t;)t=Ra(t.nextSibling)}function Hl(){Er=Sr=null,It=!1}function hv(t){fi===null?fi=[t]:fi.push(t)}var CP=js.ReactCurrentBatchConfig;function Oc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Th(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function TB(t){var e=t._init;return e(t._payload)}function NT(t){function e(I,B){if(t){var k=I.deletions;k===null?(I.deletions=[B],I.flags|=16):k.push(B)}}function n(I,B){if(!t)return null;for(;B!==null;)e(I,B),B=B.sibling;return null}function r(I,B){for(I=new Map;B!==null;)B.key!==null?I.set(B.key,B):I.set(B.index,B),B=B.sibling;return I}function i(I,B){return I=Oa(I,B),I.index=0,I.sibling=null,I}function s(I,B,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<B?(I.flags|=2,B):k):(I.flags|=2,B)):(I.flags|=1048576,B)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,B,k,O){return B===null||B.tag!==6?(B=Zg(k,I.mode,O),B.return=I,B):(B=i(B,k),B.return=I,B)}function u(I,B,k,O){var V=k.type;return V===pl?p(I,B,k.props.children,O,k.key):B!==null&&(B.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ma&&TB(V)===B.type)?(O=i(B,k.props),O.ref=Oc(I,B,k),O.return=I,O):(O=Sf(k.type,k.key,k.props,null,I.mode,O),O.ref=Oc(I,B,k),O.return=I,O)}function h(I,B,k,O){return B===null||B.tag!==4||B.stateNode.containerInfo!==k.containerInfo||B.stateNode.implementation!==k.implementation?(B=Jg(k,I.mode,O),B.return=I,B):(B=i(B,k.children||[]),B.return=I,B)}function p(I,B,k,O,V){return B===null||B.tag!==7?(B=qo(k,I.mode,O,V),B.return=I,B):(B=i(B,k),B.return=I,B)}function g(I,B,k){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Zg(""+B,I.mode,k),B.return=I,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case gh:return k=Sf(B.type,B.key,B.props,null,I.mode,k),k.ref=Oc(I,null,B),k.return=I,k;case fl:return B=Jg(B,I.mode,k),B.return=I,B;case ma:var O=B._init;return g(I,O(B._payload),k)}if(ru(B)||Lc(B))return B=qo(B,I.mode,k,null),B.return=I,B;Th(I,B)}return null}function w(I,B,k,O){var V=B!==null?B.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return V!==null?null:l(I,B,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case gh:return k.key===V?u(I,B,k,O):null;case fl:return k.key===V?h(I,B,k,O):null;case ma:return V=k._init,w(I,B,V(k._payload),O)}if(ru(k)||Lc(k))return V!==null?null:p(I,B,k,O,null);Th(I,k)}return null}function C(I,B,k,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return I=I.get(k)||null,l(B,I,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case gh:return I=I.get(O.key===null?k:O.key)||null,u(B,I,O,V);case fl:return I=I.get(O.key===null?k:O.key)||null,h(B,I,O,V);case ma:var j=O._init;return C(I,B,k,j(O._payload),V)}if(ru(O)||Lc(O))return I=I.get(k)||null,p(B,I,O,V,null);Th(B,O)}return null}function b(I,B,k,O){for(var V=null,j=null,T=B,E=B=0,U=null;T!==null&&E<k.length;E++){T.index>E?(U=T,T=null):U=T.sibling;var Q=w(I,T,k[E],O);if(Q===null){T===null&&(T=U);break}t&&T&&Q.alternate===null&&e(I,T),B=s(Q,B,E),j===null?V=Q:j.sibling=Q,j=Q,T=U}if(E===k.length)return n(I,T),It&&So(I,E),V;if(T===null){for(;E<k.length;E++)T=g(I,k[E],O),T!==null&&(B=s(T,B,E),j===null?V=T:j.sibling=T,j=T);return It&&So(I,E),V}for(T=r(I,T);E<k.length;E++)U=C(T,I,E,k[E],O),U!==null&&(t&&U.alternate!==null&&T.delete(U.key===null?E:U.key),B=s(U,B,E),j===null?V=U:j.sibling=U,j=U);return t&&T.forEach(function(D){return e(I,D)}),It&&So(I,E),V}function _(I,B,k,O){var V=Lc(k);if(typeof V!="function")throw Error(ie(150));if(k=V.call(k),k==null)throw Error(ie(151));for(var j=V=null,T=B,E=B=0,U=null,Q=k.next();T!==null&&!Q.done;E++,Q=k.next()){T.index>E?(U=T,T=null):U=T.sibling;var D=w(I,T,Q.value,O);if(D===null){T===null&&(T=U);break}t&&T&&D.alternate===null&&e(I,T),B=s(D,B,E),j===null?V=D:j.sibling=D,j=D,T=U}if(Q.done)return n(I,T),It&&So(I,E),V;if(T===null){for(;!Q.done;E++,Q=k.next())Q=g(I,Q.value,O),Q!==null&&(B=s(Q,B,E),j===null?V=Q:j.sibling=Q,j=Q);return It&&So(I,E),V}for(T=r(I,T);!Q.done;E++,Q=k.next())Q=C(T,I,E,Q.value,O),Q!==null&&(t&&Q.alternate!==null&&T.delete(Q.key===null?E:Q.key),B=s(Q,B,E),j===null?V=Q:j.sibling=Q,j=Q);return t&&T.forEach(function(K){return e(I,K)}),It&&So(I,E),V}function F(I,B,k,O){if(typeof k=="object"&&k!==null&&k.type===pl&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case gh:e:{for(var V=k.key,j=B;j!==null;){if(j.key===V){if(V=k.type,V===pl){if(j.tag===7){n(I,j.sibling),B=i(j,k.props.children),B.return=I,I=B;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ma&&TB(V)===j.type){n(I,j.sibling),B=i(j,k.props),B.ref=Oc(I,j,k),B.return=I,I=B;break e}n(I,j);break}else e(I,j);j=j.sibling}k.type===pl?(B=qo(k.props.children,I.mode,O,k.key),B.return=I,I=B):(O=Sf(k.type,k.key,k.props,null,I.mode,O),O.ref=Oc(I,B,k),O.return=I,I=O)}return o(I);case fl:e:{for(j=k.key;B!==null;){if(B.key===j)if(B.tag===4&&B.stateNode.containerInfo===k.containerInfo&&B.stateNode.implementation===k.implementation){n(I,B.sibling),B=i(B,k.children||[]),B.return=I,I=B;break e}else{n(I,B);break}else e(I,B);B=B.sibling}B=Jg(k,I.mode,O),B.return=I,I=B}return o(I);case ma:return j=k._init,F(I,B,j(k._payload),O)}if(ru(k))return b(I,B,k,O);if(Lc(k))return _(I,B,k,O);Th(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,B!==null&&B.tag===6?(n(I,B.sibling),B=i(B,k),B.return=I,I=B):(n(I,B),B=Zg(k,I.mode,O),B.return=I,I=B),o(I)):n(I,B)}return F}var Vl=NT(!0),FT=NT(!1),lp=no(null),cp=null,Bl=null,fv=null;function pv(){fv=Bl=cp=null}function mv(t){var e=lp.current;Bt(lp),t._currentValue=e}function yy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Nl(t,e){cp=t,fv=Bl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hr=!0),t.firstContext=null)}function Jr(t){var e=t._currentValue;if(fv!==t)if(t={context:t,memoizedValue:e,next:null},Bl===null){if(cp===null)throw Error(ie(308));Bl=t,cp.dependencies={lanes:0,firstContext:t}}else Bl=Bl.next=t;return e}var Oo=null;function gv(t){Oo===null?Oo=[t]:Oo.push(t)}function QT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ns(t,r)}function Ns(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ga=!1;function yv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Da(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ns(t,n)}return i=r.interleaved,i===null?(e.next=e,gv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ns(t,n)}function Bf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}function SB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function up(t,e,n,r){var i=t.updateQueue;ga=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;o=0,p=h=u=null,l=s;do{var w=l.lane,C=l.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,_=l;switch(w=e,C=n,_.tag){case 1:if(b=_.payload,typeof b=="function"){g=b.call(C,g,w);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,w=typeof b=="function"?b.call(C,g,w):b,w==null)break e;g=Pt({},g,w);break e;case 2:ga=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[l]:w.push(l))}else C={eventTime:C,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=C,u=g):p=p.next=C,o|=w;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;w=l,l=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(p===null&&(u=g),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);nA|=o,t.lanes=o,t.memoizedState=g}}function kB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var Sd={},Hi=no(Sd),Yu=no(Sd),ed=no(Sd);function Ho(t){if(t===Sd)throw Error(ie(174));return t}function wv(t,e){switch(mt(ed,e),mt(Yu,t),mt(Hi,Sd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:X0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=X0(e,t)}Bt(Hi),mt(Hi,e)}function Kl(){Bt(Hi),Bt(Yu),Bt(ed)}function LT(t){Ho(ed.current);var e=Ho(Hi.current),n=X0(e,t.type);e!==n&&(mt(Yu,t),mt(Hi,n))}function vv(t){Yu.current===t&&(Bt(Hi),Bt(Yu))}var Ft=no(0);function dp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kg=[];function xv(){for(var t=0;t<Kg.length;t++)Kg[t]._workInProgressVersionPrimary=null;Kg.length=0}var Cf=js.ReactCurrentDispatcher,zg=js.ReactCurrentBatchConfig,tA=0,Qt=null,nn=null,fn=null,hp=!1,Cu=!1,td=0,bP=0;function Tn(){throw Error(ie(321))}function _v(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vi(t[n],e[n]))return!1;return!0}function Bv(t,e,n,r,i,s){if(tA=s,Qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cf.current=t===null||t.memoizedState===null?SP:kP,t=n(r,i),Cu){s=0;do{if(Cu=!1,td=0,25<=s)throw Error(ie(301));s+=1,fn=nn=null,e.updateQueue=null,Cf.current=UP,t=n(r,i)}while(Cu)}if(Cf.current=fp,e=nn!==null&&nn.next!==null,tA=0,fn=nn=Qt=null,hp=!1,e)throw Error(ie(300));return t}function Cv(){var t=td!==0;return td=0,t}function Pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Qt.memoizedState=fn=t:fn=fn.next=t,fn}function Xr(){if(nn===null){var t=Qt.alternate;t=t!==null?t.memoizedState:null}else t=nn.next;var e=fn===null?Qt.memoizedState:fn.next;if(e!==null)fn=e,nn=t;else{if(t===null)throw Error(ie(310));nn=t,t={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},fn===null?Qt.memoizedState=fn=t:fn=fn.next=t}return fn}function nd(t,e){return typeof e=="function"?e(t):e}function Gg(t){var e=Xr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=nn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((tA&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,Qt.lanes|=p,nA|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,vi(r,e.memoizedState)||(hr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Qt.lanes|=s,nA|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qg(t){var e=Xr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vi(s,e.memoizedState)||(hr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function RT(){}function DT(t,e){var n=Qt,r=Xr(),i=e(),s=!vi(r.memoizedState,i);if(s&&(r.memoizedState=i,hr=!0),r=r.queue,bv(OT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,rd(9,MT.bind(null,n,r,i,e),void 0,null),pn===null)throw Error(ie(349));tA&30||jT(n,e,i)}return i}function jT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MT(t,e,n,r){e.value=n,e.getSnapshot=r,HT(e)&&VT(t)}function OT(t,e,n){return n(function(){HT(e)&&VT(t)})}function HT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vi(t,n)}catch{return!0}}function VT(t){var e=Ns(t,1);e!==null&&yi(e,t,1,-1)}function UB(t){var e=Pi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:t},e.queue=t,t=t.dispatch=TP.bind(null,Qt,t),[e.memoizedState,t]}function rd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function KT(){return Xr().memoizedState}function bf(t,e,n,r){var i=Pi();Qt.flags|=t,i.memoizedState=rd(1|e,n,void 0,r===void 0?null:r)}function cm(t,e,n,r){var i=Xr();r=r===void 0?null:r;var s=void 0;if(nn!==null){var o=nn.memoizedState;if(s=o.destroy,r!==null&&_v(r,o.deps)){i.memoizedState=rd(e,n,s,r);return}}Qt.flags|=t,i.memoizedState=rd(1|e,n,s,r)}function NB(t,e){return bf(8390656,8,t,e)}function bv(t,e){return cm(2048,8,t,e)}function zT(t,e){return cm(4,2,t,e)}function GT(t,e){return cm(4,4,t,e)}function qT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WT(t,e,n){return n=n!=null?n.concat([t]):null,cm(4,4,qT.bind(null,e,t),n)}function Ev(){}function $T(t,e){var n=Xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_v(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ZT(t,e){var n=Xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_v(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function JT(t,e,n){return tA&21?(vi(n,e)||(n=nT(),Qt.lanes|=n,nA|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hr=!0),t.memoizedState=n)}function EP(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var r=zg.transition;zg.transition={};try{t(!1),e()}finally{At=n,zg.transition=r}}function XT(){return Xr().memoizedState}function IP(t,e,n){var r=Ma(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},YT(t))e1(e,n);else if(n=QT(t,e,n,r),n!==null){var i=Jn();yi(n,t,r,i),t1(n,e,r)}}function TP(t,e,n){var r=Ma(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(YT(t))e1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,vi(l,o)){var u=e.interleaved;u===null?(i.next=i,gv(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=QT(t,e,i,r),n!==null&&(i=Jn(),yi(n,t,r,i),t1(n,e,r))}}function YT(t){var e=t.alternate;return t===Qt||e!==null&&e===Qt}function e1(t,e){Cu=hp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function t1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}var fp={readContext:Jr,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},SP={readContext:Jr,useCallback:function(t,e){return Pi().memoizedState=[t,e===void 0?null:e],t},useContext:Jr,useEffect:NB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bf(4194308,4,qT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bf(4194308,4,t,e)},useInsertionEffect:function(t,e){return bf(4,2,t,e)},useMemo:function(t,e){var n=Pi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IP.bind(null,Qt,t),[r.memoizedState,t]},useRef:function(t){var e=Pi();return t={current:t},e.memoizedState=t},useState:UB,useDebugValue:Ev,useDeferredValue:function(t){return Pi().memoizedState=t},useTransition:function(){var t=UB(!1),e=t[0];return t=EP.bind(null,t[1]),Pi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qt,i=Pi();if(It){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),pn===null)throw Error(ie(349));tA&30||jT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,NB(OT.bind(null,r,s,t),[t]),r.flags|=2048,rd(9,MT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Pi(),e=pn.identifierPrefix;if(It){var n=ys,r=gs;n=(r&~(1<<32-gi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=td++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kP={readContext:Jr,useCallback:$T,useContext:Jr,useEffect:bv,useImperativeHandle:WT,useInsertionEffect:zT,useLayoutEffect:GT,useMemo:ZT,useReducer:Gg,useRef:KT,useState:function(){return Gg(nd)},useDebugValue:Ev,useDeferredValue:function(t){var e=Xr();return JT(e,nn.memoizedState,t)},useTransition:function(){var t=Gg(nd)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:RT,useSyncExternalStore:DT,useId:XT,unstable_isNewReconciler:!1},UP={readContext:Jr,useCallback:$T,useContext:Jr,useEffect:bv,useImperativeHandle:WT,useInsertionEffect:zT,useLayoutEffect:GT,useMemo:ZT,useReducer:qg,useRef:KT,useState:function(){return qg(nd)},useDebugValue:Ev,useDeferredValue:function(t){var e=Xr();return nn===null?e.memoizedState=t:JT(e,nn.memoizedState,t)},useTransition:function(){var t=qg(nd)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:RT,useSyncExternalStore:DT,useId:XT,unstable_isNewReconciler:!1};function di(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var um={isMounted:function(t){return(t=t._reactInternals)?CA(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jn(),i=Ma(t),s=bs(r,i);s.payload=e,n!=null&&(s.callback=n),e=Da(t,s,i),e!==null&&(yi(e,t,i,r),Bf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jn(),i=Ma(t),s=bs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Da(t,s,i),e!==null&&(yi(e,t,i,r),Bf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jn(),r=Ma(t),i=bs(n,r);i.tag=2,e!=null&&(i.callback=e),e=Da(t,i,r),e!==null&&(yi(e,t,r,n),Bf(e,t,r))}};function FB(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$u(n,r)||!$u(i,s):!0}function n1(t,e,n){var r=!1,i=qa,s=e.contextType;return typeof s=="object"&&s!==null?s=Jr(s):(i=gr(e)?Yo:Mn.current,r=e.contextTypes,s=(r=r!=null)?Ol(t,i):qa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=um,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function QB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&um.enqueueReplaceState(e,e.state,null)}function vy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jr(s):(s=gr(e)?Yo:Mn.current,i.context=Ol(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&um.enqueueReplaceState(i,i.state,null),up(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zl(t,e){try{var n="",r=e;do n+=sQ(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function r1(t,e,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mp||(mp=!0,Uy=r),xy(t,e)},n}function i1(t,e,n){n=bs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){xy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){xy(t,e),typeof r!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function PB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=GP.bind(null,t,e,n),e.then(t,t))}function LB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function RB(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bs(-1,1),e.tag=2,Da(n,e,1))),n.lanes|=1),t)}var FP=js.ReactCurrentOwner,hr=!1;function $n(t,e,n,r){e.child=t===null?FT(e,null,n,r):Vl(e,t.child,n,r)}function DB(t,e,n,r,i){n=n.render;var s=e.ref;return Nl(e,i),r=Bv(t,e,n,r,s,i),n=Cv(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fs(t,e,i)):(It&&n&&uv(e),e.flags|=1,$n(t,e,r,i),e.child)}function jB(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,s1(t,e,s,r,i)):(t=Sf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$u,n(o,r)&&t.ref===e.ref)return Fs(t,e,i)}return e.flags|=1,t=Oa(s,r),t.ref=e.ref,t.return=e,e.child=t}function s1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($u(s,r)&&t.ref===e.ref)if(hr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(hr=!0);else return e.lanes=t.lanes,Fs(t,e,i)}return _y(t,e,n,r,i)}function a1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(bl,Cr),Cr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(bl,Cr),Cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,mt(bl,Cr),Cr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,mt(bl,Cr),Cr|=r;return $n(t,e,i,n),e.child}function o1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _y(t,e,n,r,i){var s=gr(n)?Yo:Mn.current;return s=Ol(e,s),Nl(e,i),n=Bv(t,e,n,r,s,i),r=Cv(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fs(t,e,i)):(It&&r&&uv(e),e.flags|=1,$n(t,e,n,i),e.child)}function MB(t,e,n,r,i){if(gr(n)){var s=!0;ap(e)}else s=!1;if(Nl(e,i),e.stateNode===null)Ef(t,e),n1(e,n,r),vy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Jr(h):(h=gr(n)?Yo:Mn.current,h=Ol(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&QB(e,o,r,h),ga=!1;var w=e.memoizedState;o.state=w,up(e,r,o,i),u=e.memoizedState,l!==r||w!==u||mr.current||ga?(typeof p=="function"&&(wy(e,n,p,r),u=e.memoizedState),(l=ga||FB(e,n,l,r,w,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,PT(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:di(e.type,l),o.props=h,g=e.pendingProps,w=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Jr(u):(u=gr(n)?Yo:Mn.current,u=Ol(e,u));var C=n.getDerivedStateFromProps;(p=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||w!==u)&&QB(e,o,r,u),ga=!1,w=e.memoizedState,o.state=w,up(e,r,o,i);var b=e.memoizedState;l!==g||w!==b||mr.current||ga?(typeof C=="function"&&(wy(e,n,C,r),b=e.memoizedState),(h=ga||FB(e,n,h,r,w,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return By(t,e,n,r,s,i)}function By(t,e,n,r,i,s){o1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&bB(e,n,!1),Fs(t,e,s);r=e.stateNode,FP.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vl(e,t.child,null,s),e.child=Vl(e,null,l,s)):$n(t,e,l,s),e.memoizedState=r.state,i&&bB(e,n,!0),e.child}function A1(t){var e=t.stateNode;e.pendingContext?CB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CB(t,e.context,!1),wv(t,e.containerInfo)}function OB(t,e,n,r,i){return Hl(),hv(i),e.flags|=256,$n(t,e,n,r),e.child}var Cy={dehydrated:null,treeContext:null,retryLane:0};function by(t){return{baseLanes:t,cachePool:null,transitions:null}}function l1(t,e,n){var r=e.pendingProps,i=Ft.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),mt(Ft,i&1),t===null)return gy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fm(o,r,0,null),t=qo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=by(n),e.memoizedState=Cy,t):Iv(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return QP(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Oa(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Oa(l,s):(s=qo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?by(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Cy,r}return s=t.child,t=s.sibling,r=Oa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iv(t,e){return e=fm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sh(t,e,n,r){return r!==null&&hv(r),Vl(e,t.child,null,n),t=Iv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Wg(Error(ie(422))),Sh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fm({mode:"visible",children:r.children},i,0,null),s=qo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Vl(e,t.child,null,o),e.child.memoizedState=by(o),e.memoizedState=Cy,s);if(!(e.mode&1))return Sh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(ie(419)),r=Wg(s,r,void 0),Sh(t,e,o,r)}if(l=(o&t.childLanes)!==0,hr||l){if(r=pn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ns(t,i),yi(r,t,i,-1))}return Fv(),r=Wg(Error(ie(421))),Sh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Er=Ra(i.nextSibling),Sr=e,It=!0,fi=null,t!==null&&(Vr[Kr++]=gs,Vr[Kr++]=ys,Vr[Kr++]=eA,gs=t.id,ys=t.overflow,eA=e),e=Iv(e,r.children),e.flags|=4096,e)}function HB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yy(t.return,e,n)}function $g(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function c1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($n(t,e,r.children,n),r=Ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HB(t,n,e);else if(t.tag===19)HB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mt(Ft,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$g(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$g(e,!0,n,null,s);break;case"together":$g(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ef(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),nA|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=Oa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PP(t,e,n){switch(e.tag){case 3:A1(e),Hl();break;case 5:LT(e);break;case 1:gr(e.type)&&ap(e);break;case 4:wv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;mt(lp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mt(Ft,Ft.current&1),e.flags|=128,null):n&e.child.childLanes?l1(t,e,n):(mt(Ft,Ft.current&1),t=Fs(t,e,n),t!==null?t.sibling:null);mt(Ft,Ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return c1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mt(Ft,Ft.current),r)break;return null;case 22:case 23:return e.lanes=0,a1(t,e,n)}return Fs(t,e,n)}var u1,Ey,d1,h1;u1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ey=function(){};d1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ho(Hi.current);var s=null;switch(n){case"input":i=W0(t,i),r=W0(t,r),s=[];break;case"select":i=Pt({},i,{value:void 0}),r=Pt({},r,{value:void 0}),s=[];break;case"textarea":i=J0(t,i),r=J0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ip)}Y0(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hu.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hu.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&_t("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};h1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hc(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LP(t,e,n){var r=e.pendingProps;switch(dv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return gr(e.type)&&sp(),Sn(e),null;case 3:return r=e.stateNode,Kl(),Bt(mr),Bt(Mn),xv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ih(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fi!==null&&(Qy(fi),fi=null))),Ey(t,e),Sn(e),null;case 5:vv(e);var i=Ho(ed.current);if(n=e.type,t!==null&&e.stateNode!=null)d1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Sn(e),null}if(t=Ho(Hi.current),Ih(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Li]=e,r[Xu]=s,t=(e.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(i=0;i<su.length;i++)_t(su[i],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":J_(r,s),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_t("invalid",r);break;case"textarea":Y_(r,s),_t("invalid",r)}Y0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Eh(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Eh(r.textContent,l,t),i=["children",""+l]):Hu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_t("scroll",r)}switch(n){case"input":yh(r),X_(r,s,!0);break;case"textarea":yh(r),eB(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ip)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=OI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Li]=e,t[Xu]=r,u1(t,e,!1,!1),e.stateNode=t;e:{switch(o=ey(n,r),n){case"dialog":_t("cancel",t),_t("close",t),i=r;break;case"iframe":case"object":case"embed":_t("load",t),i=r;break;case"video":case"audio":for(i=0;i<su.length;i++)_t(su[i],t);i=r;break;case"source":_t("error",t),i=r;break;case"img":case"image":case"link":_t("error",t),_t("load",t),i=r;break;case"details":_t("toggle",t),i=r;break;case"input":J_(t,r),i=W0(t,r),_t("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pt({},r,{value:void 0}),_t("invalid",t);break;case"textarea":Y_(t,r),i=J0(t,r),_t("invalid",t);break;default:i=r}Y0(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?KI(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&HI(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Vu(t,u):typeof u=="number"&&Vu(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hu.hasOwnProperty(s)?u!=null&&s==="onScroll"&&_t("scroll",t):u!=null&&Jw(t,s,u,o))}switch(n){case"input":yh(t),X_(t,r,!1);break;case"textarea":yh(t),eB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ga(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Tl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Tl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ip)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(t&&e.stateNode!=null)h1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Ho(ed.current),Ho(Hi.current),Ih(e)){if(r=e.stateNode,n=e.memoizedProps,r[Li]=e,(s=r.nodeValue!==n)&&(t=Sr,t!==null))switch(t.tag){case 3:Eh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Eh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Li]=e,e.stateNode=r}return Sn(e),null;case 13:if(Bt(Ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(It&&Er!==null&&e.mode&1&&!(e.flags&128))UT(),Hl(),e.flags|=98560,s=!1;else if(s=Ih(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ie(317));s[Li]=e}else Hl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),s=!1}else fi!==null&&(Qy(fi),fi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?sn===0&&(sn=3):Fv())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return Kl(),Ey(t,e),t===null&&Zu(e.stateNode.containerInfo),Sn(e),null;case 10:return mv(e.type._context),Sn(e),null;case 17:return gr(e.type)&&sp(),Sn(e),null;case 19:if(Bt(Ft),s=e.memoizedState,s===null)return Sn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Hc(s,!1);else{if(sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dp(t),o!==null){for(e.flags|=128,Hc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(Ft,Ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&Gt()>Gl&&(e.flags|=128,r=!0,Hc(s,!1),e.lanes=4194304)}else{if(!r)if(t=dp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!It)return Sn(e),null}else 2*Gt()-s.renderingStartTime>Gl&&n!==1073741824&&(e.flags|=128,r=!0,Hc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Gt(),e.sibling=null,n=Ft.current,mt(Ft,r?n&1|2:n&1),e):(Sn(e),null);case 22:case 23:return Nv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cr&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function RP(t,e){switch(dv(e),e.tag){case 1:return gr(e.type)&&sp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kl(),Bt(mr),Bt(Mn),xv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vv(e),null;case 13:if(Bt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Hl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(Ft),null;case 4:return Kl(),null;case 10:return mv(e.type._context),null;case 22:case 23:return Nv(),null;case 24:return null;default:return null}}var kh=!1,Qn=!1,DP=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Cl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(t,e,r)}else n.current=null}function Iy(t,e,n){try{n()}catch(r){Rt(t,e,r)}}var VB=!1;function jP(t,e){if(cy=tp,t=yT(),cv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,g=t,w=null;t:for(;;){for(var C;g!==n||i!==0&&g.nodeType!==3||(l=o+i),g!==s||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(C=g.firstChild)!==null;)w=g,g=C;for(;;){if(g===t)break t;if(w===n&&++h===i&&(l=o),w===s&&++p===r&&(u=o),(C=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uy={focusedElem:t,selectionRange:n},tp=!1,Ce=e;Ce!==null;)if(e=Ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ce=t;else for(;Ce!==null;){e=Ce;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var _=b.memoizedProps,F=b.memoizedState,I=e.stateNode,B=I.getSnapshotBeforeUpdate(e.elementType===e.type?_:di(e.type,_),F);I.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(O){Rt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}return b=VB,VB=!1,b}function bu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Iy(e,n,s)}i=i.next}while(i!==r)}}function dm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ty(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f1(t){var e=t.alternate;e!==null&&(t.alternate=null,f1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Li],delete e[Xu],delete e[fy],delete e[xP],delete e[_P])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p1(t){return t.tag===5||t.tag===3||t.tag===4}function KB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ip));else if(r!==4&&(t=t.child,t!==null))for(Sy(t,e,n),t=t.sibling;t!==null;)Sy(t,e,n),t=t.sibling}function ky(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ky(t,e,n),t=t.sibling;t!==null;)ky(t,e,n),t=t.sibling}var mn=null,hi=!1;function ca(t,e,n){for(n=n.child;n!==null;)m1(t,e,n),n=n.sibling}function m1(t,e,n){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(im,n)}catch{}switch(n.tag){case 5:Qn||Cl(n,e);case 6:var r=mn,i=hi;mn=null,ca(t,e,n),mn=r,hi=i,mn!==null&&(hi?(t=mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mn.removeChild(n.stateNode));break;case 18:mn!==null&&(hi?(t=mn,n=n.stateNode,t.nodeType===8?Hg(t.parentNode,n):t.nodeType===1&&Hg(t,n),qu(t)):Hg(mn,n.stateNode));break;case 4:r=mn,i=hi,mn=n.stateNode.containerInfo,hi=!0,ca(t,e,n),mn=r,hi=i;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Iy(n,e,o),i=i.next}while(i!==r)}ca(t,e,n);break;case 1:if(!Qn&&(Cl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Rt(n,e,l)}ca(t,e,n);break;case 21:ca(t,e,n);break;case 22:n.mode&1?(Qn=(r=Qn)||n.memoizedState!==null,ca(t,e,n),Qn=r):ca(t,e,n);break;default:ca(t,e,n)}}function zB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DP),e.forEach(function(r){var i=WP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ci(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:mn=l.stateNode,hi=!1;break e;case 3:mn=l.stateNode.containerInfo,hi=!0;break e;case 4:mn=l.stateNode.containerInfo,hi=!0;break e}l=l.return}if(mn===null)throw Error(ie(160));m1(s,o,i),mn=null,hi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Rt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)g1(e,t),e=e.sibling}function g1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ci(e,t),Fi(t),r&4){try{bu(3,t,t.return),dm(3,t)}catch(_){Rt(t,t.return,_)}try{bu(5,t,t.return)}catch(_){Rt(t,t.return,_)}}break;case 1:ci(e,t),Fi(t),r&512&&n!==null&&Cl(n,n.return);break;case 5:if(ci(e,t),Fi(t),r&512&&n!==null&&Cl(n,n.return),t.flags&32){var i=t.stateNode;try{Vu(i,"")}catch(_){Rt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&jI(i,s),ey(l,o);var h=ey(l,s);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?KI(i,g):p==="dangerouslySetInnerHTML"?HI(i,g):p==="children"?Vu(i,g):Jw(i,p,g,h)}switch(l){case"input":$0(i,s);break;case"textarea":MI(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?Tl(i,!!s.multiple,C,!1):w!==!!s.multiple&&(s.defaultValue!=null?Tl(i,!!s.multiple,s.defaultValue,!0):Tl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xu]=s}catch(_){Rt(t,t.return,_)}}break;case 6:if(ci(e,t),Fi(t),r&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){Rt(t,t.return,_)}}break;case 3:if(ci(e,t),Fi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qu(e.containerInfo)}catch(_){Rt(t,t.return,_)}break;case 4:ci(e,t),Fi(t);break;case 13:ci(e,t),Fi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kv=Gt())),r&4&&zB(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qn=(h=Qn)||p,ci(e,t),Qn=h):ci(e,t),Fi(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Ce=t,p=t.child;p!==null;){for(g=Ce=p;Ce!==null;){switch(w=Ce,C=w.child,w.tag){case 0:case 11:case 14:case 15:bu(4,w,w.return);break;case 1:Cl(w,w.return);var b=w.stateNode;if(typeof b.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(_){Rt(r,n,_)}}break;case 5:Cl(w,w.return);break;case 22:if(w.memoizedState!==null){qB(g);continue}}C!==null?(C.return=w,Ce=C):qB(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=VI("display",o))}catch(_){Rt(t,t.return,_)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(_){Rt(t,t.return,_)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ci(e,t),Fi(t),r&4&&zB(t);break;case 21:break;default:ci(e,t),Fi(t)}}function Fi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(p1(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vu(i,""),r.flags&=-33);var s=KB(t);ky(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=KB(t);Sy(t,l,o);break;default:throw Error(ie(161))}}catch(u){Rt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MP(t,e,n){Ce=t,y1(t)}function y1(t,e,n){for(var r=(t.mode&1)!==0;Ce!==null;){var i=Ce,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||kh;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Qn;l=kh;var h=Qn;if(kh=o,(Qn=u)&&!h)for(Ce=i;Ce!==null;)o=Ce,u=o.child,o.tag===22&&o.memoizedState!==null?WB(i):u!==null?(u.return=o,Ce=u):WB(i);for(;s!==null;)Ce=s,y1(s),s=s.sibling;Ce=i,kh=l,Qn=h}GB(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ce=s):GB(t)}}function GB(t){for(;Ce!==null;){var e=Ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qn||dm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:di(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kB(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kB(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&qu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Qn||e.flags&512&&Ty(e)}catch(w){Rt(e,e.return,w)}}if(e===t){Ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ce=n;break}Ce=e.return}}function qB(t){for(;Ce!==null;){var e=Ce;if(e===t){Ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ce=n;break}Ce=e.return}}function WB(t){for(;Ce!==null;){var e=Ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dm(4,e)}catch(u){Rt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Rt(e,i,u)}}var s=e.return;try{Ty(e)}catch(u){Rt(e,s,u)}break;case 5:var o=e.return;try{Ty(e)}catch(u){Rt(e,o,u)}}}catch(u){Rt(e,e.return,u)}if(e===t){Ce=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ce=l;break}Ce=e.return}}var OP=Math.ceil,pp=js.ReactCurrentDispatcher,Tv=js.ReactCurrentOwner,Zr=js.ReactCurrentBatchConfig,tt=0,pn=null,Yt=null,xn=0,Cr=0,bl=no(0),sn=0,id=null,nA=0,hm=0,Sv=0,Eu=null,cr=null,kv=0,Gl=1/0,hs=null,mp=!1,Uy=null,ja=null,Uh=!1,Ta=null,gp=0,Iu=0,Ny=null,If=-1,Tf=0;function Jn(){return tt&6?Gt():If!==-1?If:If=Gt()}function Ma(t){return t.mode&1?tt&2&&xn!==0?xn&-xn:CP.transition!==null?(Tf===0&&(Tf=nT()),Tf):(t=At,t!==0||(t=window.event,t=t===void 0?16:lT(t.type)),t):1}function yi(t,e,n,r){if(50<Iu)throw Iu=0,Ny=null,Error(ie(185));Ed(t,n,r),(!(tt&2)||t!==pn)&&(t===pn&&(!(tt&2)&&(hm|=n),sn===4&&va(t,xn)),yr(t,r),n===1&&tt===0&&!(e.mode&1)&&(Gl=Gt()+500,lm&&ro()))}function yr(t,e){var n=t.callbackNode;CQ(t,e);var r=ep(t,t===pn?xn:0);if(r===0)n!==null&&rB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rB(n),e===1)t.tag===0?BP($B.bind(null,t)):TT($B.bind(null,t)),wP(function(){!(tt&6)&&ro()}),n=null;else{switch(rT(r)){case 1:n=nv;break;case 4:n=eT;break;case 16:n=Yf;break;case 536870912:n=tT;break;default:n=Yf}n=E1(n,w1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w1(t,e){if(If=-1,Tf=0,tt&6)throw Error(ie(327));var n=t.callbackNode;if(Fl()&&t.callbackNode!==n)return null;var r=ep(t,t===pn?xn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yp(t,r);else{e=r;var i=tt;tt|=2;var s=x1();(pn!==t||xn!==e)&&(hs=null,Gl=Gt()+500,Go(t,e));do try{KP();break}catch(l){v1(t,l)}while(!0);pv(),pp.current=s,tt=i,Yt!==null?e=0:(pn=null,xn=0,e=sn)}if(e!==0){if(e===2&&(i=sy(t),i!==0&&(r=i,e=Fy(t,i))),e===1)throw n=id,Go(t,0),va(t,r),yr(t,Gt()),n;if(e===6)va(t,r);else{if(i=t.current.alternate,!(r&30)&&!HP(i)&&(e=yp(t,r),e===2&&(s=sy(t),s!==0&&(r=s,e=Fy(t,s))),e===1))throw n=id,Go(t,0),va(t,r),yr(t,Gt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:ko(t,cr,hs);break;case 3:if(va(t,r),(r&130023424)===r&&(e=kv+500-Gt(),10<e)){if(ep(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=hy(ko.bind(null,t,cr,hs),e);break}ko(t,cr,hs);break;case 4:if(va(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OP(r/1960))-r,10<r){t.timeoutHandle=hy(ko.bind(null,t,cr,hs),r);break}ko(t,cr,hs);break;case 5:ko(t,cr,hs);break;default:throw Error(ie(329))}}}return yr(t,Gt()),t.callbackNode===n?w1.bind(null,t):null}function Fy(t,e){var n=Eu;return t.current.memoizedState.isDehydrated&&(Go(t,e).flags|=256),t=yp(t,e),t!==2&&(e=cr,cr=n,e!==null&&Qy(e)),t}function Qy(t){cr===null?cr=t:cr.push.apply(cr,t)}function HP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function va(t,e){for(e&=~Sv,e&=~hm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gi(e),r=1<<n;t[n]=-1,e&=~r}}function $B(t){if(tt&6)throw Error(ie(327));Fl();var e=ep(t,0);if(!(e&1))return yr(t,Gt()),null;var n=yp(t,e);if(t.tag!==0&&n===2){var r=sy(t);r!==0&&(e=r,n=Fy(t,r))}if(n===1)throw n=id,Go(t,0),va(t,e),yr(t,Gt()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ko(t,cr,hs),yr(t,Gt()),null}function Uv(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(Gl=Gt()+500,lm&&ro())}}function rA(t){Ta!==null&&Ta.tag===0&&!(tt&6)&&Fl();var e=tt;tt|=1;var n=Zr.transition,r=At;try{if(Zr.transition=null,At=1,t)return t()}finally{At=r,Zr.transition=n,tt=e,!(tt&6)&&ro()}}function Nv(){Cr=bl.current,Bt(bl)}function Go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yP(n)),Yt!==null)for(n=Yt.return;n!==null;){var r=n;switch(dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sp();break;case 3:Kl(),Bt(mr),Bt(Mn),xv();break;case 5:vv(r);break;case 4:Kl();break;case 13:Bt(Ft);break;case 19:Bt(Ft);break;case 10:mv(r.type._context);break;case 22:case 23:Nv()}n=n.return}if(pn=t,Yt=t=Oa(t.current,null),xn=Cr=e,sn=0,id=null,Sv=hm=nA=0,cr=Eu=null,Oo!==null){for(e=0;e<Oo.length;e++)if(n=Oo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Oo=null}return t}function v1(t,e){do{var n=Yt;try{if(pv(),Cf.current=fp,hp){for(var r=Qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hp=!1}if(tA=0,fn=nn=Qt=null,Cu=!1,td=0,Tv.current=null,n===null||n.return===null){sn=1,id=e,Yt=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=xn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=LB(o);if(C!==null){C.flags&=-257,RB(C,o,l,s,e),C.mode&1&&PB(s,h,e),e=C,u=h;var b=e.updateQueue;if(b===null){var _=new Set;_.add(u),e.updateQueue=_}else b.add(u);break e}else{if(!(e&1)){PB(s,h,e),Fv();break e}u=Error(ie(426))}}else if(It&&l.mode&1){var F=LB(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),RB(F,o,l,s,e),hv(zl(u,l));break e}}s=u=zl(u,l),sn!==4&&(sn=2),Eu===null?Eu=[s]:Eu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=r1(s,u,e);SB(s,I);break e;case 1:l=u;var B=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof B.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ja===null||!ja.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=i1(s,l,e);SB(s,O);break e}}s=s.return}while(s!==null)}B1(n)}catch(V){e=V,Yt===n&&n!==null&&(Yt=n=n.return);continue}break}while(!0)}function x1(){var t=pp.current;return pp.current=fp,t===null?fp:t}function Fv(){(sn===0||sn===3||sn===2)&&(sn=4),pn===null||!(nA&268435455)&&!(hm&268435455)||va(pn,xn)}function yp(t,e){var n=tt;tt|=2;var r=x1();(pn!==t||xn!==e)&&(hs=null,Go(t,e));do try{VP();break}catch(i){v1(t,i)}while(!0);if(pv(),tt=n,pp.current=r,Yt!==null)throw Error(ie(261));return pn=null,xn=0,sn}function VP(){for(;Yt!==null;)_1(Yt)}function KP(){for(;Yt!==null&&!pQ();)_1(Yt)}function _1(t){var e=b1(t.alternate,t,Cr);t.memoizedProps=t.pendingProps,e===null?B1(t):Yt=e,Tv.current=null}function B1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RP(n,e),n!==null){n.flags&=32767,Yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{sn=6,Yt=null;return}}else if(n=LP(n,e,Cr),n!==null){Yt=n;return}if(e=e.sibling,e!==null){Yt=e;return}Yt=e=t}while(e!==null);sn===0&&(sn=5)}function ko(t,e,n){var r=At,i=Zr.transition;try{Zr.transition=null,At=1,zP(t,e,n,r)}finally{Zr.transition=i,At=r}return null}function zP(t,e,n,r){do Fl();while(Ta!==null);if(tt&6)throw Error(ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bQ(t,s),t===pn&&(Yt=pn=null,xn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uh||(Uh=!0,E1(Yf,function(){return Fl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zr.transition,Zr.transition=null;var o=At;At=1;var l=tt;tt|=4,Tv.current=null,jP(t,n),g1(n,t),uP(uy),tp=!!cy,uy=cy=null,t.current=n,MP(n),mQ(),tt=l,At=o,Zr.transition=s}else t.current=n;if(Uh&&(Uh=!1,Ta=t,gp=i),s=t.pendingLanes,s===0&&(ja=null),wQ(n.stateNode),yr(t,Gt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mp)throw mp=!1,t=Uy,Uy=null,t;return gp&1&&t.tag!==0&&Fl(),s=t.pendingLanes,s&1?t===Ny?Iu++:(Iu=0,Ny=t):Iu=0,ro(),null}function Fl(){if(Ta!==null){var t=rT(gp),e=Zr.transition,n=At;try{if(Zr.transition=null,At=16>t?16:t,Ta===null)var r=!1;else{if(t=Ta,Ta=null,gp=0,tt&6)throw Error(ie(331));var i=tt;for(tt|=4,Ce=t.current;Ce!==null;){var s=Ce,o=s.child;if(Ce.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Ce=h;Ce!==null;){var p=Ce;switch(p.tag){case 0:case 11:case 15:bu(8,p,s)}var g=p.child;if(g!==null)g.return=p,Ce=g;else for(;Ce!==null;){p=Ce;var w=p.sibling,C=p.return;if(f1(p),p===h){Ce=null;break}if(w!==null){w.return=C,Ce=w;break}Ce=C}}}var b=s.alternate;if(b!==null){var _=b.child;if(_!==null){b.child=null;do{var F=_.sibling;_.sibling=null,_=F}while(_!==null)}}Ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ce=o;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bu(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,Ce=I;break e}Ce=s.return}}var B=t.current;for(Ce=B;Ce!==null;){o=Ce;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Ce=k;else e:for(o=B;Ce!==null;){if(l=Ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:dm(9,l)}}catch(V){Rt(l,l.return,V)}if(l===o){Ce=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,Ce=O;break e}Ce=l.return}}if(tt=i,ro(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(im,t)}catch{}r=!0}return r}finally{At=n,Zr.transition=e}}return!1}function ZB(t,e,n){e=zl(n,e),e=r1(t,e,1),t=Da(t,e,1),e=Jn(),t!==null&&(Ed(t,1,e),yr(t,e))}function Rt(t,e,n){if(t.tag===3)ZB(t,t,n);else for(;e!==null;){if(e.tag===3){ZB(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ja===null||!ja.has(r))){t=zl(n,t),t=i1(e,t,1),e=Da(e,t,1),t=Jn(),e!==null&&(Ed(e,1,t),yr(e,t));break}}e=e.return}}function GP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jn(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(xn&n)===n&&(sn===4||sn===3&&(xn&130023424)===xn&&500>Gt()-kv?Go(t,0):Sv|=n),yr(t,e)}function C1(t,e){e===0&&(t.mode&1?(e=xh,xh<<=1,!(xh&130023424)&&(xh=4194304)):e=1);var n=Jn();t=Ns(t,e),t!==null&&(Ed(t,e,n),yr(t,n))}function qP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),C1(t,n)}function WP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),C1(t,n)}var b1;b1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mr.current)hr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hr=!1,PP(t,e,n);hr=!!(t.flags&131072)}else hr=!1,It&&e.flags&1048576&&ST(e,Ap,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ef(t,e),t=e.pendingProps;var i=Ol(e,Mn.current);Nl(e,n),i=Bv(null,e,r,t,i,n);var s=Cv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gr(r)?(s=!0,ap(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yv(e),i.updater=um,e.stateNode=i,i._reactInternals=e,vy(e,r,t,n),e=By(null,e,r,!0,s,n)):(e.tag=0,It&&s&&uv(e),$n(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ef(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ZP(r),t=di(r,t),i){case 0:e=_y(null,e,r,t,n);break e;case 1:e=MB(null,e,r,t,n);break e;case 11:e=DB(null,e,r,t,n);break e;case 14:e=jB(null,e,r,di(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),_y(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),MB(t,e,r,i,n);case 3:e:{if(A1(e),t===null)throw Error(ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,PT(t,e),up(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zl(Error(ie(423)),e),e=OB(t,e,r,n,i);break e}else if(r!==i){i=zl(Error(ie(424)),e),e=OB(t,e,r,n,i);break e}else for(Er=Ra(e.stateNode.containerInfo.firstChild),Sr=e,It=!0,fi=null,n=FT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hl(),r===i){e=Fs(t,e,n);break e}$n(t,e,r,n)}e=e.child}return e;case 5:return LT(e),t===null&&gy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,dy(r,i)?o=null:s!==null&&dy(r,s)&&(e.flags|=32),o1(t,e),$n(t,e,o,n),e.child;case 6:return t===null&&gy(e),null;case 13:return l1(t,e,n);case 4:return wv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vl(e,null,r,n):$n(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),DB(t,e,r,i,n);case 7:return $n(t,e,e.pendingProps,n),e.child;case 8:return $n(t,e,e.pendingProps.children,n),e.child;case 12:return $n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,mt(lp,r._currentValue),r._currentValue=o,s!==null)if(vi(s.value,o)){if(s.children===i.children&&!mr.current){e=Fs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=bs(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),yy(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ie(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$n(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Nl(e,n),i=Jr(i),r=r(i),e.flags|=1,$n(t,e,r,n),e.child;case 14:return r=e.type,i=di(r,e.pendingProps),i=di(r.type,i),jB(t,e,r,i,n);case 15:return s1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),Ef(t,e),e.tag=1,gr(r)?(t=!0,ap(e)):t=!1,Nl(e,n),n1(e,r,i),vy(e,r,i,n),By(null,e,r,!0,t,n);case 19:return c1(t,e,n);case 22:return a1(t,e,n)}throw Error(ie(156,e.tag))};function E1(t,e){return YI(t,e)}function $P(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(t,e,n,r){return new $P(t,e,n,r)}function Qv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZP(t){if(typeof t=="function")return Qv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yw)return 11;if(t===ev)return 14}return 2}function Oa(t,e){var n=t.alternate;return n===null?(n=qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pl:return qo(n.children,i,s,e);case Xw:o=8,i|=8;break;case K0:return t=qr(12,n,e,i|2),t.elementType=K0,t.lanes=s,t;case z0:return t=qr(13,n,e,i),t.elementType=z0,t.lanes=s,t;case G0:return t=qr(19,n,e,i),t.elementType=G0,t.lanes=s,t;case LI:return fm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QI:o=10;break e;case PI:o=9;break e;case Yw:o=11;break e;case ev:o=14;break e;case ma:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=qr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function qo(t,e,n,r){return t=qr(7,t,r,e),t.lanes=n,t}function fm(t,e,n,r){return t=qr(22,t,r,e),t.elementType=LI,t.lanes=n,t.stateNode={isHidden:!1},t}function Zg(t,e,n){return t=qr(6,t,null,e),t.lanes=n,t}function Jg(t,e,n){return e=qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ug(0),this.expirationTimes=Ug(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ug(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pv(t,e,n,r,i,s,o,l,u){return t=new JP(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yv(s),t}function XP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function I1(t){if(!t)return qa;t=t._reactInternals;e:{if(CA(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(gr(n))return IT(t,n,e)}return e}function T1(t,e,n,r,i,s,o,l,u){return t=Pv(n,r,!0,t,i,s,o,l,u),t.context=I1(null),n=t.current,r=Jn(),i=Ma(n),s=bs(r,i),s.callback=e??null,Da(n,s,i),t.current.lanes=i,Ed(t,i,r),yr(t,r),t}function pm(t,e,n,r){var i=e.current,s=Jn(),o=Ma(i);return n=I1(n),e.context===null?e.context=n:e.pendingContext=n,e=bs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Da(i,e,o),t!==null&&(yi(t,i,o,s),Bf(t,i,o)),o}function wp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function JB(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lv(t,e){JB(t,e),(t=t.alternate)&&JB(t,e)}function YP(){return null}var S1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rv(t){this._internalRoot=t}mm.prototype.render=Rv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));pm(t,e,null,null)};mm.prototype.unmount=Rv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rA(function(){pm(null,t,null,null)}),e[Us]=null}};function mm(t){this._internalRoot=t}mm.prototype.unstable_scheduleHydration=function(t){if(t){var e=aT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wa.length&&e!==0&&e<wa[n].priority;n++);wa.splice(n,0,t),n===0&&AT(t)}};function Dv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XB(){}function eL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=wp(o);s.call(h)}}var o=T1(e,r,t,0,null,!1,!1,"",XB);return t._reactRootContainer=o,t[Us]=o.current,Zu(t.nodeType===8?t.parentNode:t),rA(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=wp(u);l.call(h)}}var u=Pv(t,0,!1,null,null,!1,!1,"",XB);return t._reactRootContainer=u,t[Us]=u.current,Zu(t.nodeType===8?t.parentNode:t),rA(function(){pm(e,u,n,r)}),u}function ym(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=wp(o);l.call(u)}}pm(e,o,t,i)}else o=eL(n,e,t,i,r);return wp(o)}iT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=iu(e.pendingLanes);n!==0&&(rv(e,n|1),yr(e,Gt()),!(tt&6)&&(Gl=Gt()+500,ro()))}break;case 13:rA(function(){var r=Ns(t,1);if(r!==null){var i=Jn();yi(r,t,1,i)}}),Lv(t,1)}};iv=function(t){if(t.tag===13){var e=Ns(t,134217728);if(e!==null){var n=Jn();yi(e,t,134217728,n)}Lv(t,134217728)}};sT=function(t){if(t.tag===13){var e=Ma(t),n=Ns(t,e);if(n!==null){var r=Jn();yi(n,t,e,r)}Lv(t,e)}};aT=function(){return At};oT=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};ny=function(t,e,n){switch(e){case"input":if($0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Am(r);if(!i)throw Error(ie(90));DI(r),$0(r,i)}}}break;case"textarea":MI(t,n);break;case"select":e=n.value,e!=null&&Tl(t,!!n.multiple,e,!1)}};qI=Uv;WI=rA;var tL={usingClientEntryPoint:!1,Events:[Td,wl,Am,zI,GI,Uv]},Vc={findFiberByHostInstance:Mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nL={bundleType:Vc.bundleType,version:Vc.version,rendererPackageName:Vc.rendererPackageName,rendererConfig:Vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:js.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=JI(t),t===null?null:t.stateNode},findFiberByHostInstance:Vc.findFiberByHostInstance||YP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{im=Nh.inject(nL),Oi=Nh}catch{}}Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tL;Qr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dv(e))throw Error(ie(200));return XP(t,e,null,n)};Qr.createRoot=function(t,e){if(!Dv(t))throw Error(ie(299));var n=!1,r="",i=S1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pv(t,1,!1,null,null,n,!1,r,i),t[Us]=e.current,Zu(t.nodeType===8?t.parentNode:t),new Rv(e)};Qr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=JI(e),t=t===null?null:t.stateNode,t};Qr.flushSync=function(t){return rA(t)};Qr.hydrate=function(t,e,n){if(!gm(e))throw Error(ie(200));return ym(null,t,e,!0,n)};Qr.hydrateRoot=function(t,e,n){if(!Dv(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=S1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=T1(e,null,t,1,n??null,i,!1,s,o),t[Us]=e.current,Zu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mm(e)};Qr.render=function(t,e,n){if(!gm(e))throw Error(ie(200));return ym(null,t,e,!1,n)};Qr.unmountComponentAtNode=function(t){if(!gm(t))throw Error(ie(40));return t._reactRootContainer?(rA(function(){ym(null,null,t,!1,function(){t._reactRootContainer=null,t[Us]=null})}),!0):!1};Qr.unstable_batchedUpdates=Uv;Qr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gm(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return ym(t,e,n,!1,r)};Qr.version="18.3.1-next-f1338f8080-20240426";function k1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k1)}catch(t){console.error(t)}}k1(),kI.exports=Qr;var U1=kI.exports,YB=U1;H0.createRoot=YB.createRoot,H0.hydrateRoot=YB.hydrateRoot;const rL="modulepreload",iL=function(t){return"/"+t},eC={},Py=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=iL(u),u in eC)return;eC[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":rL,h||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((w,C)=>{g.addEventListener("load",w),g.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var tC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},F1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,g=(s&3)<<4|l>>4;let w=(l&15)<<2|h>>6,C=h&63;u||(C=64,o||(w=64)),r.push(n[p],n[g],n[w],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(N1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||g==null)throw new aL;const w=s<<2|l>>4;if(r.push(w),h!==64){const C=l<<4&240|h>>2;if(r.push(C),g!==64){const b=h<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oL=function(t){const e=N1(t);return F1.encodeByteArray(e,!0)},vp=function(t){return oL(t).replace(/\./g,"")},Q1=function(t){try{return F1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=()=>AL().__FIREBASE_DEFAULTS__,cL=()=>{if(typeof process>"u"||typeof tC>"u")return;const t=tC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Q1(t[1]);return e&&JSON.parse(e)},wm=()=>{try{return lL()||cL()||uL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P1=t=>{var e,n;return(n=(e=wm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},L1=t=>{const e=P1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},R1=()=>{var t;return(t=wm())===null||t===void 0?void 0:t.config},D1=t=>{var e;return(e=wm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vp(JSON.stringify(n)),vp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function pL(){var t;const e=(t=wm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wL(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function j1(){return!pL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jv(){try{return typeof indexedDB=="object"}catch{return!1}}function M1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function vL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL="FirebaseError";class ni extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xL,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bA.prototype.create)}}class bA{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_L(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ni(i,l,r)}}function _L(t,e){return t.replace(BL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BL=/\{\$([^}]+)}/g;function CL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iA(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(nC(s)&&nC(o)){if(!iA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function au(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ou(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bL(t,e){const n=new EL(t,e);return n.subscribe.bind(n)}class EL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Xg),i.error===void 0&&(i.error=Xg),i.complete===void 0&&(i.complete=Xg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class Nr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kL(e))try{this.getOrInitializeService({instanceIdentifier:Uo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Uo){return this.instances.has(e)}getOptions(e=Uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Uo){return this.component?this.component.multipleInstances?e:Uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SL(t){return t===Uo?void 0:t}function kL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const NL={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},FL=We.INFO,QL={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},PL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=QL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Mv=class{constructor(e){this.name=e,this._logLevel=FL,this._logHandler=PL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}};const LL=(t,e)=>e.some(n=>t instanceof n);let rC,iC;function RL(){return rC||(rC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DL(){return iC||(iC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O1=new WeakMap,Ly=new WeakMap,H1=new WeakMap,Yg=new WeakMap,Ov=new WeakMap;function jL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Es(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&O1.set(n,t)}).catch(()=>{}),Ov.set(e,t),e}function ML(t){if(Ly.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ly.set(t,e)}let Ry={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ly.get(t);if(e==="objectStoreNames")return t.objectStoreNames||H1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OL(t){Ry=t(Ry)}function HL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(e0(this),e,...n);return H1.set(r,e.sort?e.sort():[e]),Es(r)}:DL().includes(t)?function(...e){return t.apply(e0(this),e),Es(O1.get(this))}:function(...e){return Es(t.apply(e0(this),e))}}function VL(t){return typeof t=="function"?HL(t):(t instanceof IDBTransaction&&ML(t),LL(t,RL())?new Proxy(t,Ry):t)}function Es(t){if(t instanceof IDBRequest)return jL(t);if(Yg.has(t))return Yg.get(t);const e=VL(t);return e!==t&&(Yg.set(t,e),Ov.set(e,t)),e}const e0=t=>Ov.get(t);function vm(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Es(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Es(o.result),u.oldVersion,u.newVersion,Es(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}function t0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Es(n).then(()=>{})}const KL=["get","getKey","getAll","getAllKeys","count"],zL=["put","add","delete","clear"],n0=new Map;function sC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(n0.get(e))return n0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=zL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KL.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return n0.set(e,s),s}OL(t=>({...t,get:(e,n,r)=>sC(e,n)||t.get(e,n,r),has:(e,n)=>!!sC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dy="@firebase/app",aC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Mv("@firebase/app"),WL="@firebase/app-compat",$L="@firebase/analytics-compat",ZL="@firebase/analytics",JL="@firebase/app-check-compat",XL="@firebase/app-check",YL="@firebase/auth",eR="@firebase/auth-compat",tR="@firebase/database",nR="@firebase/data-connect",rR="@firebase/database-compat",iR="@firebase/functions",sR="@firebase/functions-compat",aR="@firebase/installations",oR="@firebase/installations-compat",AR="@firebase/messaging",lR="@firebase/messaging-compat",cR="@firebase/performance",uR="@firebase/performance-compat",dR="@firebase/remote-config",hR="@firebase/remote-config-compat",fR="@firebase/storage",pR="@firebase/storage-compat",mR="@firebase/firestore",gR="@firebase/vertexai-preview",yR="@firebase/firestore-compat",wR="firebase",vR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",xR={[Dy]:"fire-core",[WL]:"fire-core-compat",[ZL]:"fire-analytics",[$L]:"fire-analytics-compat",[XL]:"fire-app-check",[JL]:"fire-app-check-compat",[YL]:"fire-auth",[eR]:"fire-auth-compat",[tR]:"fire-rtdb",[nR]:"fire-data-connect",[rR]:"fire-rtdb-compat",[iR]:"fire-fn",[sR]:"fire-fn-compat",[aR]:"fire-iid",[oR]:"fire-iid-compat",[AR]:"fire-fcm",[lR]:"fire-fcm-compat",[cR]:"fire-perf",[uR]:"fire-perf-compat",[dR]:"fire-rc",[hR]:"fire-rc-compat",[fR]:"fire-gcs",[pR]:"fire-gcs-compat",[mR]:"fire-fst",[yR]:"fire-fst-compat",[gR]:"fire-vertex","fire-js":"fire-js",[wR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=new Map,_R=new Map,My=new Map;function oC(t,e){try{t.container.addComponent(e)}catch(n){Qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yr(t){const e=t.name;if(My.has(e))return Qs.debug(`There were multiple attempts to register component ${e}.`),!1;My.set(e,t);for(const n of xp.values())oC(n,t);for(const n of _R.values())oC(n,t);return!0}function io(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ha=new bA("app","Firebase",BR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=vR;function V1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ha.create("bad-app-name",{appName:String(i)});if(n||(n=R1()),!n)throw Ha.create("no-options");const s=xp.get(i);if(s){if(iA(n,s.options)&&iA(r,s.config))return s;throw Ha.create("duplicate-app",{appName:i})}const o=new UL(i);for(const u of My.values())o.addComponent(u);const l=new CR(n,r,o);return xp.set(i,l),l}function xm(t=jy){const e=xp.get(t);if(!e&&t===jy&&R1())return V1();if(!e)throw Ha.create("no-app",{appName:t});return e}function Dn(t,e,n){var r;let i=(r=xR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qs.warn(l.join(" "));return}Yr(new Nr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebase-heartbeat-database",ER=1,sd="firebase-heartbeat-store";let r0=null;function K1(){return r0||(r0=vm(bR,ER,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ha.create("idb-open",{originalErrorMessage:t.message})})),r0}async function IR(t){try{const n=(await K1()).transaction(sd),r=await n.objectStore(sd).get(z1(t));return await n.done,r}catch(e){if(e instanceof ni)Qs.warn(e.message);else{const n=Ha.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qs.warn(n.message)}}}async function AC(t,e){try{const r=(await K1()).transaction(sd,"readwrite");await r.objectStore(sd).put(e,z1(t)),await r.done}catch(n){if(n instanceof ni)Qs.warn(n.message);else{const r=Ha.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qs.warn(r.message)}}}function z1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=1024,SR=30*24*60*60*1e3;class kR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=SR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lC(),{heartbeatsToSend:r,unsentEntries:i}=UR(this._heartbeatsCache.heartbeats),s=vp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Qs.warn(n),""}}}function lC(){return new Date().toISOString().substring(0,10)}function UR(t,e=TR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jv()?M1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return AC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return AC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cC(t){return vp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){Yr(new Nr("platform-logger",e=>new GL(e),"PRIVATE")),Yr(new Nr("heartbeat",e=>new kR(e),"PRIVATE")),Dn(Dy,aC,t),Dn(Dy,aC,"esm2017"),Dn("fire-js","")}FR("");function Hv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function G1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QR=G1,q1=new bA("auth","Firebase",G1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Mv("@firebase/auth");function PR(t,...e){_p.logLevel<=We.WARN&&_p.warn(`Auth (${EA}): ${t}`,...e)}function kf(t,...e){_p.logLevel<=We.ERROR&&_p.error(`Auth (${EA}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,...e){throw Kv(t,...e)}function wi(t,...e){return Kv(t,...e)}function Vv(t,e,n){const r=Object.assign(Object.assign({},QR()),{[e]:n});return new bA("auth","Firebase",r).create(e,{appName:t.name})}function Is(t){return Vv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ei(t,"argument-error"),Vv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return q1.create(t,...e)}function Pe(t,e,...n){if(!t)throw Kv(e,...n)}function ws(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kf(e),new Error(e)}function Ps(t,e){t||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function RR(){return uC()==="http:"||uC()==="https:"}function uC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RR()||gL()||"connection"in navigator)?navigator.onLine:!0}function jR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ps(n>e,"Short delay should be less than long delay!"),this.isMobile=fL()||yL()}get(){return DR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e){Ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new Ud(3e4,6e4);function Ms(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Os(t,e,n,r,i={}){return $1(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=kd(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return mL()||(h.referrerPolicy="no-referrer"),W1.fetch()(Z1(t,t.config.apiHost,n,l),h)})}async function $1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MR),e);try{const i=new VR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Fh(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Fh(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Vv(t,p,h);ei(t,p)}}catch(i){if(i instanceof ni)throw i;ei(t,"network-request-failed",{message:String(i)})}}async function Nd(t,e,n,r,i={}){const s=await Os(t,e,n,r,i);return"mfaPendingCredential"in s&&ei(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Z1(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?zv(t.config,i):`${t.config.apiScheme}://${i}`}function HR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wi(this.auth,"network-request-failed")),OR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=wi(t,e,r);return i.customData._tokenResponse=n,i}function dC(t){return t!==void 0&&t.enterprise!==void 0}class KR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function zR(t,e){return Os(t,"GET","/v2/recaptchaConfig",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){return Os(t,"POST","/v1/accounts:delete",e)}async function J1(t,e){return Os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qR(t,e=!1){const n=nt(t),r=await n.getIdToken(e),i=Gv(r);Pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Tu(i0(i.auth_time)),issuedAtTime:Tu(i0(i.iat)),expirationTime:Tu(i0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function i0(t){return Number(t)*1e3}function Gv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kf("JWT malformed, contained fewer than 3 sections"),null;try{const i=Q1(n);return i?JSON.parse(i):(kf("Failed to decode base64 JWT payload"),null)}catch(i){return kf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hC(t){const e=Gv(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ni&&WR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ad(t,J1(n,{idToken:r}));Pe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?X1(s.providerUserInfo):[],l=JR(t.providerData,o),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function ZR(t){const e=nt(t);await Bp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function X1(t){return t.map(e=>{var{providerId:n}=e,r=Hv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e){const n=await $1(t,{},async()=>{const r=kd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Z1(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",W1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YR(t,e){return Os(t,"POST","/v2/accounts:revokeToken",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=hC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ql;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Pe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ql,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $R(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ad(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(Is(this.auth));const e=await this.getIdToken();return await ad(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,h,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,C=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(l=n.tenantId)!==null&&l!==void 0?l:void 0,F=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,B=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:k,emailVerified:O,isAnonymous:V,providerData:j,stsTokenManager:T}=n;Pe(k&&T,e,"internal-error");const E=Ql.fromJSON(this.name,T);Pe(typeof k=="string",e,"internal-error"),ua(g,e.name),ua(w,e.name),Pe(typeof O=="boolean",e,"internal-error"),Pe(typeof V=="boolean",e,"internal-error"),ua(C,e.name),ua(b,e.name),ua(_,e.name),ua(F,e.name),ua(I,e.name),ua(B,e.name);const U=new vs({uid:k,auth:e,email:w,emailVerified:O,displayName:g,isAnonymous:V,photoURL:b,phoneNumber:C,tenantId:_,stsTokenManager:E,createdAt:I,lastLoginAt:B});return j&&Array.isArray(j)&&(U.providerData=j.map(Q=>Object.assign({},Q))),F&&(U._redirectEventId=F),U}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ql;i.updateFromServerResponse(n);const s=new vs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Pe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?X1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Ql;l.updateFromIdToken(r);const u=new vs({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Hy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Map;function xs(t){Ps(t instanceof Function,"Expected a class definition");let e=fC.get(t);return e?(Ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Y1.type="NONE";const pC=Y1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e,n){return`firebase:${t}:${e}:${n}`}class Pl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Uf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Uf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pl(xs(pC),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||xs(pC);const o=Uf(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const g=vs._fromJSON(e,p);h!==s&&(l=g),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Pl(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Pl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sS(e))return"Blackberry";if(aS(e))return"Webos";if(tS(e))return"Safari";if((e.includes("chrome/")||nS(e))&&!e.includes("edge/"))return"Chrome";if(iS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eS(t=on()){return/firefox\//i.test(t)}function tS(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nS(t=on()){return/crios\//i.test(t)}function rS(t=on()){return/iemobile/i.test(t)}function iS(t=on()){return/android/i.test(t)}function sS(t=on()){return/blackberry/i.test(t)}function aS(t=on()){return/webos/i.test(t)}function qv(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function e4(t=on()){var e;return qv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function t4(){return wL()&&document.documentMode===10}function oS(t=on()){return qv(t)||iS(t)||aS(t)||sS(t)||/windows phone/i.test(t)||rS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t,e=[]){let n;switch(t){case"Browser":n=mC(on());break;case"Worker":n=`${mC(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${EA}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,e={}){return Os(t,"GET","/v2/passwordPolicy",Ms(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=6;class s4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:i4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gC(this),this.idTokenSubscription=new gC(this),this.beforeStateQueue=new n4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xs(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await J1(this,{idToken:e}),r=await vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(Is(this));const n=e?nt(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(Is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(Is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r4(this),n=new s4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bA("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await YR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xs(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[xs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qi(t){return nt(t)}class gC{constructor(e){this.auth=e,this.observer=null,this.addObserver=bL(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o4(t){_m=t}function lS(t){return _m.loadJS(t)}function A4(){return _m.recaptchaEnterpriseScript}function l4(){return _m.gapiScript}function c4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const u4="recaptcha-enterprise",d4="NO_RECAPTCHA";class h4{constructor(e){this.type=u4,this.auth=qi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{zR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new KR(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;dC(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(d4)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&dC(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=A4();u.length!==0&&(u+=l),lS(u).then(()=>{i(l,s,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function yC(t,e,n,r=!1){const i=new h4(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Cp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await yC(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await yC(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t,e){const n=io(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(iA(s,e??{}))return i;ei(i,"already-initialized")}return n.initialize({options:e})}function p4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function m4(t,e,n){const r=qi(t);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=cS(e),{host:o,port:l}=g4(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),y4()}function cS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function g4(t){const e=cS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wC(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wC(o)}}}function wC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function y4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,n){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function w4(t,e){return Os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(t,e){return Nd(t,"POST","/v1/accounts:signInWithPassword",Ms(t,e))}async function uS(t,e){return Os(t,"POST","/v1/accounts:sendOobCode",Ms(t,e))}async function x4(t,e){return uS(t,e)}async function _4(t,e){return uS(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e){return Nd(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,e))}async function C4(t,e){return Nd(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Wv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new od(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new od(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(e,n,"signInWithPassword",v4);case"emailLink":return B4(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cp(e,r,"signUpPassword",w4);case"emailLink":return C4(e,{idToken:n,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e){return Nd(t,"POST","/v1/accounts:signInWithIdp",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="http://localhost";class sA extends Wv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Hv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new sA(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ll(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ll(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ll(e,n)}buildRequest(){const e={requestUri:b4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function I4(t){const e=au(ou(t)).link,n=e?au(ou(e)).deep_link_id:null,r=au(ou(t)).deep_link_id;return(r?au(ou(r)).link:null)||r||n||e||t}class $v{constructor(e){var n,r,i,s,o,l;const u=au(ou(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,g=E4((i=u.mode)!==null&&i!==void 0?i:null);Pe(h&&p&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=p,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=I4(e);try{return new $v(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.providerId=hc.PROVIDER_ID}static credential(e,n){return od._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$v.parseLink(n);return Pe(r,"argument-error"),od._fromEmailAndCode(e,r.code,r.tenantId)}}hc.PROVIDER_ID="password";hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Zv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Fd{constructor(){super("facebook.com")}static credential(e){return sA._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xa.credential(e.oauthAccessToken)}catch{return null}}}xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";xa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sA._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ms.credential(n,r)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Fd{constructor(){super("github.com")}static credential(e){return sA._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.GITHUB_SIGN_IN_METHOD="github.com";_a.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Fd{constructor(){super("twitter.com")}static credential(e,n){return sA._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ba.credential(n,r)}catch{return null}}}Ba.TWITTER_SIGN_IN_METHOD="twitter.com";Ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e){return Nd(t,"POST","/v1/accounts:signUp",Ms(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await vs._fromIdTokenResponse(e,r,i),o=vC(r);return new aA({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=vC(r);return new aA({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function vC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends ni{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new bp(e,n,r,i)}}function dS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bp._fromErrorAndOperation(t,s,e,r):s})}async function S4(t,e,n=!1){const r=await ad(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return aA._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e,n=!1){const{auth:r}=t;if(pi(r.app))return Promise.reject(Is(r));const i="reauthenticate";try{const s=await ad(t,dS(r,i,e,t),n);Pe(s.idToken,r,"internal-error");const o=Gv(s.idToken);Pe(o,r,"internal-error");const{sub:l}=o;return Pe(t.uid===l,r,"user-mismatch"),aA._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ei(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e,n=!1){if(pi(t.app))return Promise.reject(Is(t));const r="signIn",i=await dS(t,r,e),s=await aA._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function U4(t,e){return hS(qi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(t){const e=qi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function N4(t,e,n){const r=qi(t);await Cp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_4)}async function F4(t,e,n){if(pi(t.app))return Promise.reject(Is(t));const r=qi(t),o=await Cp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T4).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&fS(t),u}),l=await aA._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Q4(t,e,n){return pi(t.app)?Promise.reject(Is(t)):U4(nt(t),hc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fS(t),r})}async function pS(t,e){const n=nt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await x4(n.auth,i);s!==t.email&&await t.reload()}function P4(t,e,n,r){return nt(t).onIdTokenChanged(e,n,r)}function L4(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function R4(t,e,n,r){return nt(t).onAuthStateChanged(e,n,r)}function mS(t){return nt(t).signOut()}const Ep="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ep,"1"),this.storage.removeItem(Ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=1e3,j4=10;class yS extends gS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);t4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,j4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},D4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yS.type="LOCAL";const M4=yS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends gS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wS.type="SESSION";const vS=wS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Bm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),u=await O4(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const h=Jv("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const w=g;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(w.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function V4(t){Vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function K4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function G4(){return xS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="firebaseLocalStorageDb",q4=1,Ip="firebaseLocalStorage",BS="fbase_key";class Qd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cm(t,e){return t.transaction([Ip],e?"readwrite":"readonly").objectStore(Ip)}function W4(){const t=indexedDB.deleteDatabase(_S);return new Qd(t).toPromise()}function Vy(){const t=indexedDB.open(_S,q4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ip,{keyPath:BS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ip)?e(r):(r.close(),await W4(),e(await Vy()))})})}async function xC(t,e,n){const r=Cm(t,!0).put({[BS]:e,value:n});return new Qd(r).toPromise()}async function $4(t,e){const n=Cm(t,!1).get(e),r=await new Qd(n).toPromise();return r===void 0?null:r.value}function _C(t,e){const n=Cm(t,!0).delete(e);return new Qd(n).toPromise()}const Z4=800,J4=3;class CS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>J4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bm._getInstance(G4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await K4(),!this.activeServiceWorker)return;this.sender=new H4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vy();return await xC(e,Ep,"1"),await _C(e,Ep),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_C(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Cm(i,!1).getAll();return new Qd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CS.type="LOCAL";const X4=CS;new Ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e){return e?xs(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends Wv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ll(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ll(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y4(t){return hS(t.auth,new Xv(t),t.bypassAuthState)}function eD(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),k4(n,new Xv(t),t.bypassAuthState)}async function tD(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),S4(n,new Xv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y4;case"linkViaPopup":case"linkViaRedirect":return tD;case"reauthViaPopup":case"reauthViaRedirect":return eD;default:ei(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new Ud(2e3,1e4);async function rD(t,e,n){if(pi(t.app))return Promise.reject(wi(t,"operation-not-supported-in-this-environment"));const r=qi(t);LR(t,e,Zv);const i=bS(r,n);return new Vo(r,"signInViaPopup",e,i).executeNotNull()}class Vo extends ES{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const e=Jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nD.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="pendingRedirect",Nf=new Map;class sD extends ES{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nf.get(this.auth._key());if(!e){try{const r=await aD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nf.set(this.auth._key(),e)}return this.bypassAuthState||Nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aD(t,e){const n=lD(e),r=AD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function oD(t,e){Nf.set(t._key(),e)}function AD(t){return xs(t._redirectPersistence)}function lD(t){return Uf(iD,t.config.apiKey,t.name)}async function cD(t,e){return await qi(t)._initializationPromise,IS(t,e,!1)}async function IS(t,e,n=!1){if(pi(t.app))return Promise.reject(Is(t));const r=qi(t),i=bS(r,e),o=await new sD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=10*60*1e3;class dD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uD&&this.cachedEventUids.clear(),this.cachedEventUids.has(BC(e))}saveEventToCache(e){this.cachedEventUids.add(BC(e)),this.lastProcessedEventTime=Date.now()}}function BC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t,e={}){return Os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mD=/^https?/;async function gD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fD(t);for(const n of e)try{if(yD(n))return}catch{}ei(t,"unauthorized-domain")}function yD(t){const e=Oy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mD.test(n))return!1;if(pD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new Ud(3e4,6e4);function CC(){const t=Vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vD(t){return new Promise((e,n)=>{var r,i,s;function o(){CC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CC(),n(wi(t,"network-request-failed"))},timeout:wD.get()})}if(!((i=(r=Vi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vi().gapi)===null||s===void 0)&&s.load)o();else{const l=c4("iframefcb");return Vi()[l]=()=>{gapi.load?o():n(wi(t,"network-request-failed"))},lS(`${l4()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ff=null,e})}let Ff=null;function xD(t){return Ff=Ff||vD(t),Ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new Ud(5e3,15e3),BD="__/auth/iframe",CD="emulator/auth/iframe",bD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ED=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ID(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zv(e,CD):`https://${t.config.authDomain}/${BD}`,r={apiKey:e.apiKey,appName:t.name,v:EA},i=ED.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${kd(r).slice(1)}`}async function TD(t){const e=await xD(t),n=Vi().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:ID(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=wi(t,"network-request-failed"),l=Vi().setTimeout(()=>{s(o)},_D.get());function u(){Vi().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kD=500,UD=600,ND="_blank",FD="http://localhost";class bC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QD(t,e,n,r=kD,i=UD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},SD),{width:r.toString(),height:i.toString(),top:s,left:o}),h=on().toLowerCase();n&&(l=nS(h)?ND:n),eS(h)&&(e=e||FD,u.scrollbars="yes");const p=Object.entries(u).reduce((w,[C,b])=>`${w}${C}=${b},`,"");if(e4(h)&&l!=="_self")return PD(e||"",l),new bC(null);const g=window.open(e||"",l,p);Pe(g,t,"popup-blocked");try{g.focus()}catch{}return new bC(g)}function PD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="__/auth/handler",RD="emulator/auth/handler",DD=encodeURIComponent("fac");async function EC(t,e,n,r,i,s){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:EA,eventId:i};if(e instanceof Zv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",CL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof Fd){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),h=u?`#${DD}=${encodeURIComponent(u)}`:"";return`${jD(t)}?${kd(l).slice(1)}${h}`}function jD({config:t}){return t.emulator?zv(t,RD):`https://${t.authDomain}/${LD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="webStorageSupport";class MD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vS,this._completeRedirectFn=IS,this._overrideRedirectResult=oD}async _openPopup(e,n,r,i){var s;Ps((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await EC(e,n,r,Oy(),i);return QD(e,o,Jv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await EC(e,n,r,Oy(),i);return V4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ps(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TD(e),r=new dD(e);return n.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(s0,{type:s0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[s0];o!==void 0&&n(!!o),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oS()||tS()||qv()}}const OD=MD;var IC="@firebase/auth",TC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KD(t){Yr(new Nr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AS(t)},h=new a4(r,i,s,u);return p4(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yr(new Nr("auth-internal",e=>{const n=qi(e.getProvider("auth").getImmediate());return(r=>new HD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(IC,TC,VD(t)),Dn(IC,TC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=5*60,GD=D1("authIdTokenMaxAge")||zD;let SC=null;const qD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GD)return;const i=n==null?void 0:n.token;SC!==i&&(SC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function WD(t=xm()){const e=io(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f4(t,{popupRedirectResolver:OD,persistence:[X4,M4,vS]}),r=D1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=qD(s.toString());L4(n,o,()=>o(n.currentUser)),P4(n,l=>o(l))}}const i=P1("auth");return i&&m4(n,`http://${i}`),n}function $D(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}o4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=wi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$D().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KD("Browser");var kC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wo,SS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function U(){}U.prototype=E.prototype,T.D=E.prototype,T.prototype=new U,T.prototype.constructor=T,T.C=function(Q,D,K){for(var R=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)R[Y-2]=arguments[Y];return E.prototype[D].apply(Q,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,E,U){U||(U=0);var Q=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)Q[D]=E.charCodeAt(U++)|E.charCodeAt(U++)<<8|E.charCodeAt(U++)<<16|E.charCodeAt(U++)<<24;else for(D=0;16>D;++D)Q[D]=E[U++]|E[U++]<<8|E[U++]<<16|E[U++]<<24;E=T.g[0],U=T.g[1],D=T.g[2];var K=T.g[3],R=E+(K^U&(D^K))+Q[0]+3614090360&4294967295;E=U+(R<<7&4294967295|R>>>25),R=K+(D^E&(U^D))+Q[1]+3905402710&4294967295,K=E+(R<<12&4294967295|R>>>20),R=D+(U^K&(E^U))+Q[2]+606105819&4294967295,D=K+(R<<17&4294967295|R>>>15),R=U+(E^D&(K^E))+Q[3]+3250441966&4294967295,U=D+(R<<22&4294967295|R>>>10),R=E+(K^U&(D^K))+Q[4]+4118548399&4294967295,E=U+(R<<7&4294967295|R>>>25),R=K+(D^E&(U^D))+Q[5]+1200080426&4294967295,K=E+(R<<12&4294967295|R>>>20),R=D+(U^K&(E^U))+Q[6]+2821735955&4294967295,D=K+(R<<17&4294967295|R>>>15),R=U+(E^D&(K^E))+Q[7]+4249261313&4294967295,U=D+(R<<22&4294967295|R>>>10),R=E+(K^U&(D^K))+Q[8]+1770035416&4294967295,E=U+(R<<7&4294967295|R>>>25),R=K+(D^E&(U^D))+Q[9]+2336552879&4294967295,K=E+(R<<12&4294967295|R>>>20),R=D+(U^K&(E^U))+Q[10]+4294925233&4294967295,D=K+(R<<17&4294967295|R>>>15),R=U+(E^D&(K^E))+Q[11]+2304563134&4294967295,U=D+(R<<22&4294967295|R>>>10),R=E+(K^U&(D^K))+Q[12]+1804603682&4294967295,E=U+(R<<7&4294967295|R>>>25),R=K+(D^E&(U^D))+Q[13]+4254626195&4294967295,K=E+(R<<12&4294967295|R>>>20),R=D+(U^K&(E^U))+Q[14]+2792965006&4294967295,D=K+(R<<17&4294967295|R>>>15),R=U+(E^D&(K^E))+Q[15]+1236535329&4294967295,U=D+(R<<22&4294967295|R>>>10),R=E+(D^K&(U^D))+Q[1]+4129170786&4294967295,E=U+(R<<5&4294967295|R>>>27),R=K+(U^D&(E^U))+Q[6]+3225465664&4294967295,K=E+(R<<9&4294967295|R>>>23),R=D+(E^U&(K^E))+Q[11]+643717713&4294967295,D=K+(R<<14&4294967295|R>>>18),R=U+(K^E&(D^K))+Q[0]+3921069994&4294967295,U=D+(R<<20&4294967295|R>>>12),R=E+(D^K&(U^D))+Q[5]+3593408605&4294967295,E=U+(R<<5&4294967295|R>>>27),R=K+(U^D&(E^U))+Q[10]+38016083&4294967295,K=E+(R<<9&4294967295|R>>>23),R=D+(E^U&(K^E))+Q[15]+3634488961&4294967295,D=K+(R<<14&4294967295|R>>>18),R=U+(K^E&(D^K))+Q[4]+3889429448&4294967295,U=D+(R<<20&4294967295|R>>>12),R=E+(D^K&(U^D))+Q[9]+568446438&4294967295,E=U+(R<<5&4294967295|R>>>27),R=K+(U^D&(E^U))+Q[14]+3275163606&4294967295,K=E+(R<<9&4294967295|R>>>23),R=D+(E^U&(K^E))+Q[3]+4107603335&4294967295,D=K+(R<<14&4294967295|R>>>18),R=U+(K^E&(D^K))+Q[8]+1163531501&4294967295,U=D+(R<<20&4294967295|R>>>12),R=E+(D^K&(U^D))+Q[13]+2850285829&4294967295,E=U+(R<<5&4294967295|R>>>27),R=K+(U^D&(E^U))+Q[2]+4243563512&4294967295,K=E+(R<<9&4294967295|R>>>23),R=D+(E^U&(K^E))+Q[7]+1735328473&4294967295,D=K+(R<<14&4294967295|R>>>18),R=U+(K^E&(D^K))+Q[12]+2368359562&4294967295,U=D+(R<<20&4294967295|R>>>12),R=E+(U^D^K)+Q[5]+4294588738&4294967295,E=U+(R<<4&4294967295|R>>>28),R=K+(E^U^D)+Q[8]+2272392833&4294967295,K=E+(R<<11&4294967295|R>>>21),R=D+(K^E^U)+Q[11]+1839030562&4294967295,D=K+(R<<16&4294967295|R>>>16),R=U+(D^K^E)+Q[14]+4259657740&4294967295,U=D+(R<<23&4294967295|R>>>9),R=E+(U^D^K)+Q[1]+2763975236&4294967295,E=U+(R<<4&4294967295|R>>>28),R=K+(E^U^D)+Q[4]+1272893353&4294967295,K=E+(R<<11&4294967295|R>>>21),R=D+(K^E^U)+Q[7]+4139469664&4294967295,D=K+(R<<16&4294967295|R>>>16),R=U+(D^K^E)+Q[10]+3200236656&4294967295,U=D+(R<<23&4294967295|R>>>9),R=E+(U^D^K)+Q[13]+681279174&4294967295,E=U+(R<<4&4294967295|R>>>28),R=K+(E^U^D)+Q[0]+3936430074&4294967295,K=E+(R<<11&4294967295|R>>>21),R=D+(K^E^U)+Q[3]+3572445317&4294967295,D=K+(R<<16&4294967295|R>>>16),R=U+(D^K^E)+Q[6]+76029189&4294967295,U=D+(R<<23&4294967295|R>>>9),R=E+(U^D^K)+Q[9]+3654602809&4294967295,E=U+(R<<4&4294967295|R>>>28),R=K+(E^U^D)+Q[12]+3873151461&4294967295,K=E+(R<<11&4294967295|R>>>21),R=D+(K^E^U)+Q[15]+530742520&4294967295,D=K+(R<<16&4294967295|R>>>16),R=U+(D^K^E)+Q[2]+3299628645&4294967295,U=D+(R<<23&4294967295|R>>>9),R=E+(D^(U|~K))+Q[0]+4096336452&4294967295,E=U+(R<<6&4294967295|R>>>26),R=K+(U^(E|~D))+Q[7]+1126891415&4294967295,K=E+(R<<10&4294967295|R>>>22),R=D+(E^(K|~U))+Q[14]+2878612391&4294967295,D=K+(R<<15&4294967295|R>>>17),R=U+(K^(D|~E))+Q[5]+4237533241&4294967295,U=D+(R<<21&4294967295|R>>>11),R=E+(D^(U|~K))+Q[12]+1700485571&4294967295,E=U+(R<<6&4294967295|R>>>26),R=K+(U^(E|~D))+Q[3]+2399980690&4294967295,K=E+(R<<10&4294967295|R>>>22),R=D+(E^(K|~U))+Q[10]+4293915773&4294967295,D=K+(R<<15&4294967295|R>>>17),R=U+(K^(D|~E))+Q[1]+2240044497&4294967295,U=D+(R<<21&4294967295|R>>>11),R=E+(D^(U|~K))+Q[8]+1873313359&4294967295,E=U+(R<<6&4294967295|R>>>26),R=K+(U^(E|~D))+Q[15]+4264355552&4294967295,K=E+(R<<10&4294967295|R>>>22),R=D+(E^(K|~U))+Q[6]+2734768916&4294967295,D=K+(R<<15&4294967295|R>>>17),R=U+(K^(D|~E))+Q[13]+1309151649&4294967295,U=D+(R<<21&4294967295|R>>>11),R=E+(D^(U|~K))+Q[4]+4149444226&4294967295,E=U+(R<<6&4294967295|R>>>26),R=K+(U^(E|~D))+Q[11]+3174756917&4294967295,K=E+(R<<10&4294967295|R>>>22),R=D+(E^(K|~U))+Q[2]+718787259&4294967295,D=K+(R<<15&4294967295|R>>>17),R=U+(K^(D|~E))+Q[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+K&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var U=E-this.blockSize,Q=this.B,D=this.h,K=0;K<E;){if(D==0)for(;K<=U;)i(this,T,K),K+=this.blockSize;if(typeof T=="string"){for(;K<E;)if(Q[D++]=T.charCodeAt(K++),D==this.blockSize){i(this,Q),D=0;break}}else for(;K<E;)if(Q[D++]=T[K++],D==this.blockSize){i(this,Q),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var U=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=U&255,U/=256;for(this.u(T),T=Array(16),E=U=0;4>E;++E)for(var Q=0;32>Q;Q+=8)T[U++]=this.g[E]>>>Q&255;return T};function s(T,E){var U=l;return Object.prototype.hasOwnProperty.call(U,T)?U[T]:U[T]=E(T)}function o(T,E){this.h=E;for(var U=[],Q=!0,D=T.length-1;0<=D;D--){var K=T[D]|0;Q&&K==E||(U[D]=K,Q=!1)}this.g=U}var l={};function u(T){return-128<=T&&128>T?s(T,function(E){return new o([E|0],0>E?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return F(h(-T));for(var E=[],U=1,Q=0;T>=U;Q++)E[Q]=T/U|0,U*=4294967296;return new o(E,0)}function p(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return F(p(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=h(Math.pow(E,8)),Q=g,D=0;D<T.length;D+=8){var K=Math.min(8,T.length-D),R=parseInt(T.substring(D,D+K),E);8>K?(K=h(Math.pow(E,K)),Q=Q.j(K).add(h(R))):(Q=Q.j(U),Q=Q.add(h(R)))}return Q}var g=u(0),w=u(1),C=u(16777216);t=o.prototype,t.m=function(){if(_(this))return-F(this).m();for(var T=0,E=1,U=0;U<this.g.length;U++){var Q=this.i(U);T+=(0<=Q?Q:4294967296+Q)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(_(this))return"-"+F(this).toString(T);for(var E=h(Math.pow(T,6)),U=this,Q="";;){var D=O(U,E).g;U=I(U,D.j(E));var K=((0<U.g.length?U.g[0]:U.h)>>>0).toString(T);if(U=D,b(U))return K+Q;for(;6>K.length;)K="0"+K;Q=K+Q}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function _(T){return T.h==-1}t.l=function(T){return T=I(this,T),_(T)?-1:b(T)?0:1};function F(T){for(var E=T.g.length,U=[],Q=0;Q<E;Q++)U[Q]=~T.g[Q];return new o(U,~T.h).add(w)}t.abs=function(){return _(this)?F(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),U=[],Q=0,D=0;D<=E;D++){var K=Q+(this.i(D)&65535)+(T.i(D)&65535),R=(K>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);Q=R>>>16,K&=65535,R&=65535,U[D]=R<<16|K}return new o(U,U[U.length-1]&-2147483648?-1:0)};function I(T,E){return T.add(F(E))}t.j=function(T){if(b(this)||b(T))return g;if(_(this))return _(T)?F(this).j(F(T)):F(F(this).j(T));if(_(T))return F(this.j(F(T)));if(0>this.l(C)&&0>T.l(C))return h(this.m()*T.m());for(var E=this.g.length+T.g.length,U=[],Q=0;Q<2*E;Q++)U[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var D=0;D<T.g.length;D++){var K=this.i(Q)>>>16,R=this.i(Q)&65535,Y=T.i(D)>>>16,oe=T.i(D)&65535;U[2*Q+2*D]+=R*oe,B(U,2*Q+2*D),U[2*Q+2*D+1]+=K*oe,B(U,2*Q+2*D+1),U[2*Q+2*D+1]+=R*Y,B(U,2*Q+2*D+1),U[2*Q+2*D+2]+=K*Y,B(U,2*Q+2*D+2)}for(Q=0;Q<E;Q++)U[Q]=U[2*Q+1]<<16|U[2*Q];for(Q=E;Q<2*E;Q++)U[Q]=0;return new o(U,0)};function B(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function k(T,E){this.g=T,this.h=E}function O(T,E){if(b(E))throw Error("division by zero");if(b(T))return new k(g,g);if(_(T))return E=O(F(T),E),new k(F(E.g),F(E.h));if(_(E))return E=O(T,F(E)),new k(F(E.g),E.h);if(30<T.g.length){if(_(T)||_(E))throw Error("slowDivide_ only works with positive integers.");for(var U=w,Q=E;0>=Q.l(T);)U=V(U),Q=V(Q);var D=j(U,1),K=j(Q,1);for(Q=j(Q,2),U=j(U,2);!b(Q);){var R=K.add(Q);0>=R.l(T)&&(D=D.add(U),K=R),Q=j(Q,1),U=j(U,1)}return E=I(T,D.j(E)),new k(D,E)}for(D=g;0<=T.l(E);){for(U=Math.max(1,Math.floor(T.m()/E.m())),Q=Math.ceil(Math.log(U)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),K=h(U),R=K.j(E);_(R)||0<R.l(T);)U-=Q,K=h(U),R=K.j(E);b(K)&&(K=w),D=D.add(K),T=I(T,R)}return new k(D,T)}t.A=function(T){return O(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),U=[],Q=0;Q<E;Q++)U[Q]=this.i(Q)&T.i(Q);return new o(U,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),U=[],Q=0;Q<E;Q++)U[Q]=this.i(Q)|T.i(Q);return new o(U,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),U=[],Q=0;Q<E;Q++)U[Q]=this.i(Q)^T.i(Q);return new o(U,this.h^T.h)};function V(T){for(var E=T.g.length+1,U=[],Q=0;Q<E;Q++)U[Q]=T.i(Q)<<1|T.i(Q-1)>>>31;return new o(U,T.h)}function j(T,E){var U=E>>5;E%=32;for(var Q=T.g.length-U,D=[],K=0;K<Q;K++)D[K]=0<E?T.i(K+U)>>>E|T.i(K+U+1)<<32-E:T.i(K+U);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,SS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Wo=o}).apply(typeof kC<"u"?kC:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kS,Au,US,Qf,Ky,NS,FS,QS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,x){return d==Array.prototype||d==Object.prototype||(d[y]=x.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var y=0;y<d.length;++y){var x=d[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(d,y){if(y)e:{var x=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var z=d[N];if(!(z in x))break e;x=x[z]}d=d[d.length-1],N=x[d],y=y(N),y!=N&&y!=null&&e(x,d,{configurable:!0,writable:!0,value:y})}}function s(d,y){d instanceof String&&(d+="");var x=0,N=!1,z={next:function(){if(!N&&x<d.length){var X=x++;return{value:y(X,d[X]),done:!1}}return N=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(d){return d||function(){return s(this,function(y,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function h(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function p(d,y,x){return d.call.apply(d.bind,arguments)}function g(d,y,x){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,N),d.apply(y,z)}}return function(){return d.apply(y,arguments)}}function w(d,y,x){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,w.apply(null,arguments)}function C(d,y){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function b(d,y){function x(){}x.prototype=y.prototype,d.aa=y.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(N,z,X){for(var le=Array(arguments.length-2),at=2;at<arguments.length;at++)le[at-2]=arguments[at];return y.prototype[z].apply(N,le)}}function _(d){const y=d.length;if(0<y){const x=Array(y);for(let N=0;N<y;N++)x[N]=d[N];return x}return[]}function F(d,y){for(let x=1;x<arguments.length;x++){const N=arguments[x];if(u(N)){const z=d.length||0,X=N.length||0;d.length=z+X;for(let le=0;le<X;le++)d[z+le]=N[le]}else d.push(N)}}class I{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(d){return/^[\s\xa0]*$/.test(d)}function k(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function O(d){return O[" "](d),d}O[" "]=function(){};var V=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function j(d,y,x){for(const N in d)y.call(x,d[N],N,d)}function T(d,y){for(const x in d)y.call(void 0,d[x],x,d)}function E(d){const y={};for(const x in d)y[x]=d[x];return y}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(d,y){let x,N;for(let z=1;z<arguments.length;z++){N=arguments[z];for(x in N)d[x]=N[x];for(let X=0;X<U.length;X++)x=U[X],Object.prototype.hasOwnProperty.call(N,x)&&(d[x]=N[x])}}function D(d){var y=1;d=d.split(":");const x=[];for(;0<y&&d.length;)x.push(d.shift()),y--;return d.length&&x.push(d.join(":")),x}function K(d){l.setTimeout(()=>{throw d},0)}function R(){var d=ae;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Y{constructor(){this.h=this.g=null}add(y,x){const N=oe.get();N.set(y,x),this.h?this.h.next=N:this.g=N,this.h=N}}var oe=new I(()=>new Ae,d=>d.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,G=!1,ae=new Y,ee=()=>{const d=l.Promise.resolve(void 0);fe=()=>{d.then(ve)}};var ve=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(x){K(x)}var y=oe;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}G=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};l.addEventListener("test",x,y),l.removeEventListener("test",x,y)}catch{}return d}();function de(d,y){if(he.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(V){e:{try{O(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else x=="mouseover"?y=d.fromElement:x=="mouseout"&&(y=d.toElement);this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:se[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&de.aa.h.call(this)}}b(de,he);var se={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),et=0;function vr(d,y,x,N,z){this.listener=d,this.proxy=null,this.src=y,this.type=x,this.capture=!!N,this.ha=z,this.key=++et,this.da=this.fa=!1}function Lt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function On(d){this.src=d,this.g={},this.h=0}On.prototype.add=function(d,y,x,N,z){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var le=yt(d,y,N,z);return-1<le?(y=d[le],x||(y.fa=!1)):(y=new vr(y,this.src,X,!!N,z),y.fa=x,d.push(y)),y};function Cn(d,y){var x=y.type;if(x in d.g){var N=d.g[x],z=Array.prototype.indexOf.call(N,y,void 0),X;(X=0<=z)&&Array.prototype.splice.call(N,z,1),X&&(Lt(y),d.g[x].length==0&&(delete d.g[x],d.h--))}}function yt(d,y,x,N){for(var z=0;z<d.length;++z){var X=d[z];if(!X.da&&X.listener==y&&X.capture==!!x&&X.ha==N)return z}return-1}var wt="closure_lm_"+(1e6*Math.random()|0),Je={};function en(d,y,x,N,z){if(Array.isArray(y)){for(var X=0;X<y.length;X++)en(d,y[X],x,N,z);return null}return x=nr(x),d&&d[Fe]?d.K(y,x,h(N)?!!N.capture:!1,z):vt(d,y,x,!1,N,z)}function vt(d,y,x,N,z,X){if(!y)throw Error("Invalid event type");var le=h(z)?!!z.capture:!!z,at=Gs(d);if(at||(d[wt]=at=new On(d)),x=at.add(y,x,N,le,X),x.proxy)return x;if(N=bn(),x.proxy=N,N.src=d,N.listener=x,d.addEventListener)ge||(z=le),z===void 0&&(z=!1),d.addEventListener(y.toString(),N,z);else if(d.attachEvent)d.attachEvent(zs(y.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function bn(){function d(x){return y.call(d.src,d.listener,x)}const y=UA;return d}function Vs(d,y,x,N,z){if(Array.isArray(y))for(var X=0;X<y.length;X++)Vs(d,y[X],x,N,z);else N=h(N)?!!N.capture:!!N,x=nr(x),d&&d[Fe]?(d=d.i,y=String(y).toString(),y in d.g&&(X=d.g[y],x=yt(X,x,N,z),-1<x&&(Lt(X[x]),Array.prototype.splice.call(X,x,1),X.length==0&&(delete d.g[y],d.h--)))):d&&(d=Gs(d))&&(y=d.g[y.toString()],d=-1,y&&(d=yt(y,x,N,z)),(x=-1<d?y[d]:null)&&Ks(x))}function Ks(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Fe])Cn(y.i,d);else{var x=d.type,N=d.proxy;y.removeEventListener?y.removeEventListener(x,N,d.capture):y.detachEvent?y.detachEvent(zs(x),N):y.addListener&&y.removeListener&&y.removeListener(N),(x=Gs(y))?(Cn(x,d),x.h==0&&(x.src=null,y[wt]=null)):Lt(d)}}}function zs(d){return d in Je?Je[d]:Je[d]="on"+d}function UA(d,y){if(d.da)d=!0;else{y=new de(y,this);var x=d.listener,N=d.ha||d.src;d.fa&&Ks(d),d=x.call(N,y)}return d}function Gs(d){return d=d[wt],d instanceof On?d:null}var Ji="__closure_events_fn_"+(1e9*Math.random()>>>0);function nr(d){return typeof d=="function"?d:(d[Ji]||(d[Ji]=function(y){return d.handleEvent(y)}),d[Ji])}function St(){ue.call(this),this.i=new On(this),this.M=this,this.F=null}b(St,ue),St.prototype[Fe]=!0,St.prototype.removeEventListener=function(d,y,x,N){Vs(this,d,y,x,N)};function Wt(d,y){var x,N=d.F;if(N)for(x=[];N;N=N.F)x.push(N);if(d=d.M,N=y.type||y,typeof y=="string")y=new he(y,d);else if(y instanceof he)y.target=y.target||d;else{var z=y;y=new he(N,d),Q(y,z)}if(z=!0,x)for(var X=x.length-1;0<=X;X--){var le=y.g=x[X];z=_i(le,N,!0,y)&&z}if(le=y.g=d,z=_i(le,N,!0,y)&&z,z=_i(le,N,!1,y)&&z,x)for(X=0;X<x.length;X++)le=y.g=x[X],z=_i(le,N,!1,y)&&z}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var x=d.g[y],N=0;N<x.length;N++)Lt(x[N]);delete d.g[y],d.h--}}this.F=null},St.prototype.K=function(d,y,x,N){return this.i.add(String(d),y,!1,x,N)},St.prototype.L=function(d,y,x,N){return this.i.add(String(d),y,!0,x,N)};function _i(d,y,x,N){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,X=0;X<y.length;++X){var le=y[X];if(le&&!le.da&&le.capture==x){var at=le.listener,$t=le.ha||le.src;le.fa&&Cn(d.i,le),z=at.call($t,N)!==!1&&z}}return z&&!N.defaultPrevented}function lo(d,y,x){if(typeof d=="function")x&&(d=w(d,x));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:l.setTimeout(d,y||0)}function Xi(d){d.g=lo(()=>{d.g=null,d.i&&(d.i=!1,Xi(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class co extends ue{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Xi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(d){ue.call(this),this.h=d,this.g={}}b(Bi,ue);var rr=[];function qs(d){j(d.g,function(y,x){this.g.hasOwnProperty(x)&&Ks(y)},d),d.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),qs(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ws=l.JSON.stringify,vc=l.JSON.parse,Ci=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function $s(){}$s.prototype.h=null;function Zs(d){return d.h||(d.h=d.i())}function uo(){}var ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Js(){he.call(this,"d")}b(Js,he);function Yi(){he.call(this,"c")}b(Yi,he);var Hn={},es=null;function Xs(){return es=es||new St}Hn.La="serverreachability";function ho(d){he.call(this,Hn.La,d)}b(ho,he);function bi(d){const y=Xs();Wt(y,new ho(y))}Hn.STAT_EVENT="statevent";function ts(d,y){he.call(this,Hn.STAT_EVENT,d),this.stat=y}b(ts,he);function tn(d){const y=Xs();Wt(y,new ts(y,d))}Hn.Ma="timingevent";function fo(d,y){he.call(this,Hn.Ma,d),this.size=y}b(fo,he);function Ei(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},y)}function ns(){this.g=!0}ns.prototype.xa=function(){this.g=!1};function ir(d,y,x,N,z,X){d.info(function(){if(d.g)if(X)for(var le="",at=X.split("&"),$t=0;$t<at.length;$t++){var Xe=at[$t].split("=");if(1<Xe.length){var ct=Xe[0];Xe=Xe[1];var Nt=ct.split("_");le=2<=Nt.length&&Nt[1]=="type"?le+(ct+"="+Xe+"&"):le+(ct+"=redacted&")}}else le=null;else le=X;return"XMLHTTP REQ ("+N+") [attempt "+z+"]: "+y+`
`+x+`
`+le})}function Ie(d,y,x,N,z,X,le){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+z+"]: "+y+`
`+x+`
`+X+" "+le})}function si(d,y,x,N){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+NA(d,x)+(N?" "+N:"")})}function po(d,y){d.info(function(){return"TIMEOUT: "+y})}ns.prototype.info=function(){};function NA(d,y){if(!d.g)return y;if(!y)return null;try{var x=JSON.parse(y);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var N=x[d];if(!(2>N.length)){var z=N[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return Ws(x)}catch{return y}}var Vn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},En;function ft(){}b(ft,$s),ft.prototype.g=function(){return new XMLHttpRequest},ft.prototype.i=function(){return{}},En=new ft;function sr(d,y,x,N){this.j=d,this.i=y,this.l=x,this.R=N||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mo}function mo(){this.i=null,this.g="",this.h=!1}var go={},st={};function yo(d,y,x){d.L=1,d.v=ye(xt(y)),d.m=x,d.P=!0,wo(d,null)}function wo(d,y){d.F=Date.now(),ea(d),d.A=xt(d.v);var x=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),Zd(x.i,"t",N),d.C=0,x=d.j.J,d.h=new mo,d.g=rh(d.j,x?y:null,!d.m),0<d.O&&(d.M=new co(w(d.Y,d,d.g),d.O)),y=d.U,x=d.g,N=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(rr[0]=z.toString()),z=rr);for(var X=0;X<z.length;X++){var le=en(x,z[X],N||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),bi(),ir(d.i,d.u,d.A,d.l,d.R,d.m)}sr.prototype.ca=function(d){d=d.target;const y=this.M;y&&zn(d)==3?y.j():this.Y(d)},sr.prototype.Y=function(d){try{if(d==this.g)e:{const Nt=zn(this.g);var y=this.g.Ba();const Aa=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Ic(this.g)))){this.J||Nt!=4||y==7||(y==8||0>=Aa?bi(3):bi(2)),xo(this);var x=this.g.Z();this.X=x;t:if(FA(this)){var N=Ic(this.g);d="";var z=N.length,X=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),rs(this);var le="";break t}this.h.i=new l.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,d+=this.h.i.decode(N[y],{stream:!(X&&y==z-1)});N.length=0,this.h.g+=d,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=x==200,Ie(this.i,this.u,this.A,this.l,this.R,Nt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var at,$t=this.g;if((at=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(at)){var Xe=at;break t}}Xe=null}if(x=Xe)si(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,is(this,x);else{this.o=!1,this.s=3,tn(12),ai(this),rs(this);break e}}if(this.P){x=!0;let Vt;for(;!this.J&&this.C<le.length;)if(Vt=Ys(this,le),Vt==st){Nt==4&&(this.s=4,tn(14),x=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==go){this.s=4,tn(15),si(this.i,this.l,le,"[Invalid Chunk]"),x=!1;break}else si(this.i,this.l,Vt,null),is(this,Vt);if(FA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||le.length!=0||this.h.h||(this.s=1,tn(16),x=!1),this.o=this.o&&x,!x)si(this.i,this.l,le,"[Invalid Chunked Response]"),ai(this),rs(this);else if(0<le.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),MA(ct),ct.M=!0,tn(11))}}else si(this.i,this.l,le,null),is(this,le);Nt==4&&ai(this),this.o&&!this.J&&(Nt==4?Sc(this.j,this):(this.o=!1,ea(this)))}else wg(this.g),x==400&&0<le.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),ai(this),rs(this)}}}catch{}finally{}};function FA(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Ys(d,y){var x=d.C,N=y.indexOf(`
`,x);return N==-1?st:(x=Number(y.substring(x,N)),isNaN(x)?go:(N+=1,N+x>y.length?st:(y=y.slice(N,N+x),d.C=N+x,y)))}sr.prototype.cancel=function(){this.J=!0,ai(this)};function ea(d){d.S=Date.now()+d.I,vo(d,d.I)}function vo(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ei(w(d.ba,d),y)}function xo(d){d.B&&(l.clearTimeout(d.B),d.B=null)}sr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(po(this.i,this.A),this.L!=2&&(bi(),tn(17)),ai(this),this.s=2,rs(this)):vo(this,this.S-d)};function rs(d){d.j.G==0||d.J||Sc(d.j,d)}function ai(d){xo(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,qs(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function is(d,y){try{var x=d.j;if(x.G!=0&&(x.g==d||Re(x.h,d))){if(!d.K&&Re(x.h,d)&&x.G==3){try{var N=x.Da.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var z=N;if(z[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)HA(x),DA(x);else break e;jA(x),tn(18)}}else x.za=z[1],0<x.za-x.T&&37500>z[2]&&x.F&&x.v==0&&!x.C&&(x.C=Ei(w(x.Za,x),6e3));if(1>=Ti(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else os(x,11)}else if((d.K||x.g==d)&&HA(x),!B(y))for(z=x.Da.g.parse(y),y=0;y<z.length;y++){let Xe=z[y];if(x.T=Xe[0],Xe=Xe[1],x.G==2)if(Xe[0]=="c"){x.K=Xe[1],x.ia=Xe[2];const ct=Xe[3];ct!=null&&(x.la=ct,x.j.info("VER="+x.la));const Nt=Xe[4];Nt!=null&&(x.Aa=Nt,x.j.info("SVER="+x.Aa));const Aa=Xe[5];Aa!=null&&typeof Aa=="number"&&0<Aa&&(N=1.5*Aa,x.L=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const Vt=d.g;if(Vt){const KA=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(KA){var X=N.h;X.g||KA.indexOf("spdy")==-1&&KA.indexOf("quic")==-1&&KA.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(_e(X,X.h),X.h=null))}if(N.D){const Ui=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ui&&(N.ya=Ui,Z(N.I,N.D,Ui))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),N=x;var le=d;if(N.qa=VA(N,N.J?N.ia:null,N.W),le.K){Si(N.h,le);var at=le,$t=N.L;$t&&(at.I=$t),at.B&&(xo(at),ea(at)),N.g=le}else li(N);0<x.i.length&&oa(x)}else Xe[0]!="stop"&&Xe[0]!="close"||os(x,7);else x.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?os(x,7):RA(x):Xe[0]!="noop"&&x.l&&x.l.ta(Xe),x.v=0)}}bi(4)}catch{}}var Ii=class{constructor(d,y){this.g=d,this.map=y}};function _o(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ti(d){return d.h?1:d.g?d.g.size:0}function Re(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function _e(d,y){d.g?d.g.add(y):d.h=y}function Si(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}_o.prototype.cancel=function(){if(this.i=Lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Lr(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const x of d.g.values())y=y.concat(x.D);return y}return _(d.i)}function oi(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var y=[],x=d.length,N=0;N<x;N++)y.push(d[N]);return y}y=[],x=0;for(N in d)y[x++]=d[N];return y}function ta(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var y=[];d=d.length;for(var x=0;x<d;x++)y.push(x);return y}y=[],x=0;for(const N in d)y[x++]=N;return y}}}function Le(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var x=ta(d),N=oi(d),z=N.length,X=0;X<z;X++)y.call(void 0,N[X],x&&x[X],d)}var ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function na(d,y){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var N=d[x].indexOf("="),z=null;if(0<=N){var X=d[x].substring(0,N);z=d[x].substring(N+1)}else X=d[x];y(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Kn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Kn){this.h=d.h,ss(this,d.j),this.o=d.o,this.g=d.g,P(this,d.s),this.l=d.l;var y=d.i,x=new Ai;x.i=y.i,y.g&&(x.g=new Map(y.g),x.h=y.h),$(this,x),this.m=d.m}else d&&(y=String(d).match(ht))?(this.h=!1,ss(this,y[1]||"",!0),this.o=Qe(y[2]||""),this.g=Qe(y[3]||"",!0),P(this,y[4]),this.l=Qe(y[5]||"",!0),$(this,y[6]||"",!0),this.m=Qe(y[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}Kn.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Ke(y,Ht,!0),":");var x=this.g;return(x||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Ke(y,Ht,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Ke(x,x.charAt(0)=="/"?ra:ln,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Ke(x,Co)),d.join("")};function xt(d){return new Kn(d)}function ss(d,y,x){d.j=x?Qe(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function P(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function $(d,y,x){y instanceof Ai?(d.i=y,Rr(d.i,d.h)):(x||(y=Ke(y,ia)),d.i=new Ai(y,d.h))}function Z(d,y,x){d.i.set(y,x)}function ye(d){return Z(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Qe(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ke(d,y,x){return typeof d=="string"?(d=encodeURI(d).replace(y,Me),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Me(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ht=/[#\/\?@]/g,ln=/[#\?:]/g,ra=/[#\?]/g,ia=/[#\?@]/g,Co=/#/g;function Ai(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function In(d){d.g||(d.g=new Map,d.h=0,d.i&&na(d.i,function(y,x){d.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=Ai.prototype,t.add=function(d,y){In(this),this.i=null,d=Ue(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(y),this.h+=1,this};function xc(d,y){In(d),y=Ue(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function QA(d,y){return In(d),y=Ue(d,y),d.g.has(y)}t.forEach=function(d,y){In(this),this.g.forEach(function(x,N){x.forEach(function(z){d.call(y,z,N,this)},this)},this)},t.na=function(){In(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),x=[];for(let N=0;N<y.length;N++){const z=d[N];for(let X=0;X<z.length;X++)x.push(y[N])}return x},t.V=function(d){In(this);let y=[];if(typeof d=="string")QA(this,d)&&(y=y.concat(this.g.get(Ue(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)y=y.concat(d[x])}return y},t.set=function(d,y){return In(this),this.i=null,d=Ue(this,d),QA(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Zd(d,y,x){xc(d,y),0<x.length&&(d.i=null,d.g.set(Ue(d,y),_(x)),d.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var x=0;x<y.length;x++){var N=y[x];const X=encodeURIComponent(String(N)),le=this.V(N);for(N=0;N<le.length;N++){var z=X;le[N]!==""&&(z+="="+encodeURIComponent(String(le[N]))),d.push(z)}}return this.i=d.join("&")};function Ue(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Rr(d,y){y&&!d.j&&(In(d),d.i=null,d.g.forEach(function(x,N){var z=N.toLowerCase();N!=z&&(xc(this,N),Zd(this,z,x))},d)),d.j=y}function lt(d,y){const x=new ns;if(l.Image){const N=new Image;N.onload=C(Dr,x,"TestLoadImage: loaded",!0,y,N),N.onerror=C(Dr,x,"TestLoadImage: error",!1,y,N),N.onabort=C(Dr,x,"TestLoadImage: abort",!1,y,N),N.ontimeout=C(Dr,x,"TestLoadImage: timeout",!1,y,N),l.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else y(!1)}function Jd(d,y){const x=new ns,N=new AbortController,z=setTimeout(()=>{N.abort(),Dr(x,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:N.signal}).then(X=>{clearTimeout(z),X.ok?Dr(x,"TestPingServer: ok",!0,y):Dr(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Dr(x,"TestPingServer: error",!1,y)})}function Dr(d,y,x,N,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),N(x)}catch{}}function _c(){this.g=new Ci}function Bc(d,y,x){const N=x||"";try{Le(d,function(z,X){let le=z;h(z)&&(le=Ws(z)),y.push(N+X+"="+encodeURIComponent(le))})}catch(z){throw y.push(N+"type="+encodeURIComponent("_badmap")),z}}function jr(d){this.l=d.Ub||null,this.j=d.eb||!1}b(jr,$s),jr.prototype.g=function(){return new sa(this.l,this.j)},jr.prototype.i=function(d){return function(){return d}}({});function sa(d,y){St.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(sa,St),t=sa.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,xr(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||l).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ut(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;aa(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function aa(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ut(this):xr(this),this.readyState==3&&aa(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ut(this))},t.Qa=function(d){this.g&&(this.response=d,Ut(this))},t.ga=function(){this.g&&Ut(this)};function Ut(d){d.readyState=4,d.l=null,d.j=null,d.v=null,xr(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=y.next();return d.join(`\r
`)};function xr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Cc(d){let y="";return j(d,function(x,N){y+=N,y+=":",y+=x,y+=`\r
`}),y}function PA(d,y,x){e:{for(N in x){var N=!1;break e}N=!0}N||(x=Cc(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):Z(d,y,x))}function Ct(d){St.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ct,St);var Xd=/^https?$/i,bc=["POST","PUT"];t=Ct.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():En.g(),this.v=this.o?Zs(this.o):Zs(En),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(X){Yd(this,X);return}if(d=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var z in N)x.set(z,N[z]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const X of N.keys())x.set(X,N.get(X));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(bc,y,void 0))||N||z||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,le]of x)this.g.setRequestHeader(X,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ar(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){Yd(this,X)}};function Yd(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Ec(d),LA(d)}function Ec(d){d.A||(d.A=!0,Wt(d,"complete"),Wt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Wt(this,"complete"),Wt(this,"abort"),LA(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),LA(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ze(this):this.bb())},t.bb=function(){ze(this)};function ze(d){if(d.h&&typeof o<"u"&&(!d.v[1]||zn(d)!=4||d.Z()!=2)){if(d.u&&zn(d)==4)lo(d.Ea,0,d);else if(Wt(d,"readystatechange"),zn(d)==4){d.h=!1;try{const le=d.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var N;if(N=le===0){var z=String(d.D).match(ht)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),N=!Xd.test(z?z.toLowerCase():"")}x=N}if(x)Wt(d,"complete"),Wt(d,"success");else{d.m=6;try{var X=2<zn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Ec(d)}}finally{LA(d)}}}}function LA(d,y){if(d.g){ar(d);const x=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Wt(d,"ready");try{x.onreadystatechange=N}catch{}}}function ar(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function zn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),vc(y)}};function Ic(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function wg(d){const y={};d=(d.g&&2<=zn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(B(d[N]))continue;var x=D(d[N]);const z=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=y[z]||[];y[z]=X,X.push(x)}T(y,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(d,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||y}function eh(d){this.Aa=0,this.i=[],this.j=new ns,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,d),this.cb=as("retryDelaySeedMs",1e4,d),this.Wa=as("forwardChannelMaxRetries",2,d),this.wa=as("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new _o(d&&d.concurrentRequestLimit),this.Da=new _c,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eh.prototype,t.la=8,t.G=1,t.connect=function(d,y,x,N){tn(0),this.W=d,this.H=y||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.I=VA(this,null,this.W),oa(this)};function RA(d){if(th(d),d.G==3){var y=d.U++,x=xt(d.I);if(Z(x,"SID",d.K),Z(x,"RID",y),Z(x,"TYPE","terminate"),bo(d,x),y=new sr(d,d.j,y),y.L=2,y.v=ye(xt(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(y.v.toString(),"")}catch{}!x&&l.Image&&(new Image().src=y.v,x=!0),x||(y.g=rh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ea(y)}nh(d)}function DA(d){d.g&&(MA(d),d.g.cancel(),d.g=null)}function th(d){DA(d),d.u&&(l.clearTimeout(d.u),d.u=null),HA(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function oa(d){if(!Bo(d.h)&&!d.s){d.s=!0;var y=d.Ga;fe||ee(),G||(fe(),G=!0),ae.add(y,d),d.B=0}}function vg(d,y){return Ti(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ei(w(d.Ga,d,y),kc(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new sr(this,this.j,d);let X=this.o;if(this.S&&(X?(X=E(X),Q(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,4096<y){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Tc(this,z,y),x=xt(this.I),Z(x,"RID",d),Z(x,"CVER",22),this.D&&Z(x,"X-HTTP-Session-Id",this.D),bo(this,x),X&&(this.O?y="headers="+encodeURIComponent(String(Cc(X)))+"&"+y:this.m&&PA(x,this.m,X)),_e(this.h,z),this.Ua&&Z(x,"TYPE","init"),this.P?(Z(x,"$req",y),Z(x,"SID","null"),z.T=!0,yo(z,x,null)):yo(z,x,y),this.G=2}}else this.G==3&&(d?_r(this,d):this.i.length==0||Bo(this.h)||_r(this))};function _r(d,y){var x;y?x=y.l:x=d.U++;const N=xt(d.I);Z(N,"SID",d.K),Z(N,"RID",x),Z(N,"AID",d.T),bo(d,N),d.m&&d.o&&PA(N,d.m,d.o),x=new sr(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Tc(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),_e(d.h,x),yo(x,N,y)}function bo(d,y){d.H&&j(d.H,function(x,N){Z(y,N,x)}),d.l&&Le({},function(x,N){Z(y,N,x)})}function Tc(d,y,x){x=Math.min(d.i.length,x);var N=d.l?w(d.l.Na,d.l,d):null;e:{var z=d.i;let X=-1;for(;;){const le=["count="+x];X==-1?0<x?(X=z[0].g,le.push("ofs="+X)):X=0:le.push("ofs="+X);let at=!0;for(let $t=0;$t<x;$t++){let Xe=z[$t].g;const ct=z[$t].map;if(Xe-=X,0>Xe)X=Math.max(0,z[$t].g-100),at=!1;else try{Bc(ct,le,"req"+Xe+"_")}catch{N&&N(ct)}}if(at){N=le.join("&");break e}}}return d=d.i.splice(0,x),y.D=d,N}function li(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;fe||ee(),G||(fe(),G=!0),ae.add(y,d),d.v=0}}function jA(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ei(w(d.Fa,d),kc(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,OA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ei(w(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),DA(this),OA(this))};function MA(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function OA(d){d.g=new sr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=xt(d.qa);Z(y,"RID","rpc"),Z(y,"SID",d.K),Z(y,"AID",d.T),Z(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Z(y,"TO",d.ja),Z(y,"TYPE","xmlhttp"),bo(d,y),d.m&&d.o&&PA(y,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=ye(xt(y)),x.m=null,x.P=!0,wo(x,d)}t.Za=function(){this.C!=null&&(this.C=null,DA(this),jA(this),tn(19))};function HA(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Sc(d,y){var x=null;if(d.g==y){HA(d),MA(d),d.g=null;var N=2}else if(Re(d.h,y))x=y.D,Si(d.h,y),N=1;else return;if(d.G!=0){if(y.o)if(N==1){x=y.m?y.m.length:0,y=Date.now()-y.F;var z=d.B;N=Xs(),Wt(N,new fo(N,x)),oa(d)}else li(d);else if(z=y.s,z==3||z==0&&0<y.X||!(N==1&&vg(d,y)||N==2&&jA(d)))switch(x&&0<x.length&&(y=d.h,y.i=y.i.concat(x)),z){case 1:os(d,5);break;case 4:os(d,10);break;case 3:os(d,6);break;default:os(d,2)}}}function kc(d,y){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*y}function os(d,y){if(d.j.info("Error code "+y),y==2){var x=w(d.fb,d),N=d.Xa;const z=!N;N=new Kn(N||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ss(N,"https"),ye(N),z?lt(N.toString(),x):Jd(N.toString(),x)}else tn(2);d.G=0,d.l&&d.l.sa(y),nh(d),th(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function nh(d){if(d.G=0,d.ka=[],d.l){const y=Lr(d.h);(y.length!=0||d.i.length!=0)&&(F(d.ka,y),F(d.ka,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.ra()}}function VA(d,y,x){var N=x instanceof Kn?xt(x):new Kn(x);if(N.g!="")y&&(N.g=y+"."+N.g),P(N,N.s);else{var z=l.location;N=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var X=new Kn(null);N&&ss(X,N),y&&(X.g=y),z&&P(X,z),x&&(X.l=x),N=X}return x=d.D,y=d.ya,x&&y&&Z(N,x,y),Z(N,"VER",d.la),bo(d,N),N}function rh(d,y,x){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ct(new jr({eb:x})):new Ct(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uc(){}t=Uc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Eo(){}Eo.prototype.g=function(d,y){return new cn(d,y)};function cn(d,y){St.call(this),this.g=new eh(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!B(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!B(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Mr(this)}b(cn,St),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){RA(this.g)},cn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=Ws(d),d=x);y.i.push(new Ii(y.Ya++,d)),y.G==3&&oa(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,RA(this.g),delete this.g,cn.aa.N.call(this)};function ki(d){Js.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const x in y){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}b(ki,Js);function ih(){Yi.call(this),this.status=1}b(ih,Yi);function Mr(d){this.g=d}b(Mr,Uc),Mr.prototype.ua=function(){Wt(this.g,"a")},Mr.prototype.ta=function(d){Wt(this.g,new ki(d))},Mr.prototype.sa=function(d){Wt(this.g,new ih)},Mr.prototype.ra=function(){Wt(this.g,"b")},Eo.prototype.createWebChannel=Eo.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,QS=function(){return new Eo},FS=function(){return Xs()},NS=Hn,Ky={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,Qf=Vn,kt.COMPLETE="complete",US=kt,uo.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",St.prototype.listen=St.prototype.K,Au=uo,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,kS=Ct}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const UC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new Mv("@firebase/firestore");function ol(){return oA.logLevel}function re(t,...e){if(oA.logLevel<=We.DEBUG){const n=e.map(Yv);oA.debug(`Firestore (${fc}): ${t}`,...n)}}function qt(t,...e){if(oA.logLevel<=We.ERROR){const n=e.map(Yv);oA.error(`Firestore (${fc}): ${t}`,...n)}}function ql(t,...e){if(oA.logLevel<=We.WARN){const n=e.map(Yv);oA.warn(`Firestore (${fc}): ${t}`,...n)}}function Yv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: `+t;throw qt(e),new Error(e)}function Te(t,e){t||be()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class JD{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ki,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ki)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new ZD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Nn(e)}}class XD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new XD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ej{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new ej(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function De(t,e){return t<e?-1:t>e?1:0}function Wl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function LS(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ve(0,0))}static max(){return new Se(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ad.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ad?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends Ad{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const rj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Ad{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return rj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ce(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ce(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new ce(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(it.fromString(e))}static fromName(e){return new pe(it.fromString(e).popFirst(5))}static empty(){return new pe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new it(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function zy(t){return t.fields.find(e=>e.kind===2)}function No(t){return t.fields.filter(e=>e.kind!==2)}Tp.UNKNOWN_ID=-1;class Pf{constructor(e,n){this.fieldPath=e,this.kind=n}}class ld{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ld(0,Fr.min())}}function RS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Fr(i,pe.empty(),e)}function DS(t){return new Fr(t.readTime,t.key,-1)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(Se.min(),pe.empty(),-1)}static max(){return new Fr(Se.max(),pe.empty(),-1)}}function tx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==jS)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ki,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Su(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=nx(r.target.error);this.V.reject(new Su(e,i))}}static open(e,n,r,i){try{return new bm(n,e.transaction(i,r))}catch(s){throw new Su(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new sj(n)}}class Va{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Va.S(on())===12.2&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),Qo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!jv())return!1;if(Va.v())return!0;const e=on(),n=Va.S(e),r=0<n&&n<10,i=OS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(re("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Su(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ce(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ce(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Su(e,o))},i.onupgradeneeded=s=>{re("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{re("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=bm.open(this.db,e,s?"readonly":"readwrite",r),u=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),W.reject(h))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,h=u.name!=="FirebaseError"&&o<3;if(re("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ij{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Qo(this.B.delete())}}class Su extends ce{constructor(e,n){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ao(t){return t.name==="IndexedDbTransactionError"}class sj{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(re("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qo(r)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),Qo(this.store.add(e))}get(e){return Qo(this.store.get(e)).next(n=>(n===void 0&&(n=null),re("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),Qo(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),Qo(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new W((o,l)=>{s.onerror=u=>{l(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(l,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new W((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new W((r,i)=>{n.onerror=s=>{const o=nx(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new W((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const u=new ij(l),h=n(l.primaryKey,l.value,u);if(h instanceof W){const p=h.catch(g=>(u.done(),W.reject(g)));r.push(p)}u.isDone?i():u.K===null?l.continue():l.continue(u.K)}}).next(()=>W.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Qo(t){return new W((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=nx(r.target.error);n(i)}})}let NC=!1;function nx(t){const e=Va.S(on());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NC||(NC=!0,setTimeout(()=>{throw r},0)),r}}return t}class aj{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){re("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{re("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ao(n)?re("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await so(n)}await this.X(6e4)})}}class oj{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return W.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return re("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(l=>{i-=l,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(l=>(re("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=DS(s);tx(o,r)>0&&(r=o)}),new Fr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fr.oe=-1;function Em(t){return t==null}function cd(t){return t===0&&1/t==-1/0}function HS(t){return typeof t=="number"&&Number.isInteger(t)&&!cd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=FC(e)),e=Aj(t.get(n),e);return FC(e)}function Aj(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function FC(t){return t+""}function Ri(t){const e=t.length;if(Te(e>=2),e===2)return Te(t.charAt(0)===""&&t.charAt(1)===""),it.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&be(),t.charAt(o+1)){case"":const l=t.substring(s,o);let u;i.length===0?u=l:(i+=l,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:be()}s=o+2}return new it(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){return[t,Xn(e)]}function VS(t,e,n){return[t,Xn(e),n]}const lj={},cj=["prefixPath","collectionGroup","readTime","documentId"],uj=["prefixPath","collectionGroup","documentId"],dj=["collectionGroup","readTime","prefixPath","documentId"],hj=["canonicalId","targetId"],fj=["targetId","path"],pj=["path","targetId"],mj=["collectionId","parent"],gj=["indexId","uid"],yj=["uid","sequenceNumber"],wj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vj=["indexId","uid","orderedDocumentKey"],xj=["userId","collectionPath","documentId"],_j=["userId","collectionPath","largestBatchId"],Bj=["userId","collectionGroup","largestBatchId"],KS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cj=[...KS,"documentOverlays"],zS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GS=zS,rx=[...GS,"indexConfiguration","indexState","indexEntries"],bj=rx,Ej=[...rx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends MS{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function An(t,e){const n=Ee(t);return Va.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function IA(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yn.RED,this.left=i??yn.EMPTY,this.right=s??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new yn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return yn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,i,s){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LC(this.data.getIterator())}getIteratorFrom(e){return new LC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class LC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ZA(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new pr([])}unionWith(e){let n=new dt(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WS("Invalid base64 string: "+s):s}}(e);return new jt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const Ij=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(t){if(Te(!!t),typeof t=="string"){let e=0;const n=Ij.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wa(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sx(t){const e=t.mapValue.fields.__previous_value__;return ix(e)?sx(e):e}function ud(t){const e=Ls(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class $a{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rf={nullValue:"NULL_VALUE"};function AA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ix(t)?4:$S(t)?9007199254740991:Im(t)?10:11:be()}function zi(t,e){if(t===e)return!0;const n=AA(t);if(n!==AA(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ud(t).isEqual(ud(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ls(i.timestampValue),l=Ls(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wa(i.bytesValue).isEqual(Wa(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Et(i.doubleValue),l=Et(s.doubleValue);return o===l?cd(o)===cd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Wl(t.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(PC(o)!==PC(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!zi(o[u],l[u])))return!1;return!0}(t,e);default:return be()}}function dd(t,e){return(t.values||[]).find(n=>zi(n,e))!==void 0}function Za(t,e){if(t===e)return 0;const n=AA(t),r=AA(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Et(s.integerValue||s.doubleValue),u=Et(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return RC(t.timestampValue,e.timestampValue);case 4:return RC(ud(t),ud(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Wa(s),u=Wa(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=De(l[h],u[h]);if(p!==0)return p}return De(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=De(Et(s.latitude),Et(o.latitude));return l!==0?l:De(Et(s.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,p;const g=s.fields||{},w=o.fields||{},C=(l=g.value)===null||l===void 0?void 0:l.arrayValue,b=(u=w.value)===null||u===void 0?void 0:u.arrayValue,_=De(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return _!==0?_:DC(C,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Sa.mapValue&&o===Sa.mapValue)return 0;if(s===Sa.mapValue)return 1;if(o===Sa.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const w=De(u[g],p[g]);if(w!==0)return w;const C=Za(l[u[g]],h[p[g]]);if(C!==0)return C}return De(u.length,p.length)}(t.mapValue,e.mapValue);default:throw be()}}function RC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=Ls(t),r=Ls(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function DC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Za(n[i],r[i]);if(s)return s}return De(n.length,r.length)}function $l(t){return qy(t)}function qy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ls(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${qy(n.fields[o])}`;return i+"}"}(t.mapValue):be()}function hd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wy(t){return!!t&&"integerValue"in t}function fd(t){return!!t&&"arrayValue"in t}function jC(t){return!!t&&"nullValue"in t}function MC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Df(t){return!!t&&"mapValue"in t}function Im(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return IA(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ku(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ku(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $S(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const ZS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Sj(t){return"nullValue"in t?Rf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?hd($a.empty(),pe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Im(t)?ZS:{mapValue:{}}:be()}function kj(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?hd($a.empty(),pe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?ZS:"mapValue"in t?Im(t)?{mapValue:{}}:Sa:be()}function OC(t,e){const n=Za(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function HC(t,e){const n=Za(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Df(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ku(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Df(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Df(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){IA(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ln(ku(this.value))}}function JS(t){const e=[];return IA(t.fields,(n,r)=>{const i=new Tt([n]);if(Df(r)){const s=JS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,Se.min(),Se.min(),Se.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,i){return new Dt(e,1,n,Se.min(),r,i,0)}static newNoDocument(e,n){return new Dt(e,2,n,Se.min(),Se.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,Se.min(),Se.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.position=e,this.inclusive=n}}function VC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=Za(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function KC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n="asc"){this.field=e,this.dir=n}}function Uj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{}class Ze extends XS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nj(e,n,r):n==="array-contains"?new Pj(e,r):n==="in"?new ik(e,r):n==="not-in"?new Lj(e,r):n==="array-contains-any"?new Rj(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Fj(e,r):new Qj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Za(n,this.value)):n!==null&&AA(this.value)===AA(n)&&this.matchesComparison(Za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends XS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ot(e,n)}matches(e){return Jl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jl(t){return t.op==="and"}function $y(t){return t.op==="or"}function ax(t){return YS(t)&&Jl(t)}function YS(t){for(const e of t.filters)if(e instanceof ot)return!1;return!0}function Zy(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+$l(t.value);if(ax(t))return t.filters.map(e=>Zy(e)).join(",");{const e=t.filters.map(n=>Zy(n)).join(",");return`${t.op}(${e})`}}function ek(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&zi(r.value,i.value)}(t,e):t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&ek(o,i.filters[l]),!0):!1}(t,e):void be()}function tk(t,e){const n=t.filters.concat(e);return ot.create(n,t.op)}function nk(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${$l(n.value)}`}(t):t instanceof ot?function(n){return n.op.toString()+" {"+n.getFilters().map(nk).join(" ,")+"}"}(t):"Filter"}class Nj extends Ze{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Fj extends Ze{constructor(e,n){super(e,"in",n),this.keys=rk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Qj extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=rk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class Pj extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fd(n)&&dd(n.arrayValue,this.value)}}class ik extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dd(this.value.arrayValue,n)}}class Lj extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!dd(this.value.arrayValue,n)}}class Rj extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Jy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Dj(t,e,n,r,i,s,o)}function lA(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Em(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$l(r)).join(",")),e.ue=n}return e.ue}function Pd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Uj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ek(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KC(t.startAt,e.startAt)&&KC(t.endAt,e.endAt)}function Sp(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function kp(t,e){return t.filters.filter(n=>n instanceof Ze&&n.field.isEqual(e))}function zC(t,e,n){let r=Rf,i=!0;for(const s of kp(t,e)){let o=Rf,l=!0;switch(s.op){case"<":case"<=":o=Sj(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=Rf}OC({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];OC({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function GC(t,e,n){let r=Sa,i=!0;for(const s of kp(t,e)){let o=Sa,l=!0;switch(s.op){case">=":case">":o=kj(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=Sa}HC({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];HC({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sk(t,e,n,r,i,s,o,l){return new pc(t,e,n,r,i,s,o,l)}function Ld(t){return new pc(t)}function qC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ak(t){return t.collectionGroup!==null}function Uu(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new dt(Tt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new pd(s,r))}),n.has(Tt.keyField().canonicalString())||e.ce.push(new pd(Tt.keyField(),r))}return e.ce}function kr(t){const e=Ee(t);return e.le||(e.le=jj(e,Uu(t))),e.le}function jj(t,e){if(t.limitType==="F")return Jy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new pd(i.field,s)});const n=t.endAt?new Zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zl(t.startAt.position,t.startAt.inclusive):null;return Jy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xy(t,e){const n=t.filters.concat([e]);return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Up(t,e,n){return new pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tm(t,e){return Pd(kr(t),kr(e))&&t.limitType===e.limitType}function ok(t){return`${lA(kr(t))}|lt:${t.limitType}`}function Al(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nk(i)).join(", ")}]`),Em(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$l(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$l(i)).join(",")),`Target(${r})`}(kr(t))}; limitType=${t.limitType})`}function Rd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Uu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=VC(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Uu(r),i)||r.endAt&&!function(o,l,u){const h=VC(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Uu(r),i))}(t,e)}function Ak(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lk(t){return(e,n)=>{let r=!1;for(const i of Uu(t)){const s=Mj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Mj(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Za(u,h):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){IA(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return qS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new gt(pe.comparator);function Ir(){return Oj}const ck=new gt(pe.comparator);function lu(...t){let e=ck;for(const n of t)e=e.insert(n.key,n);return e}function uk(t){let e=ck;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Di(){return Nu()}function dk(){return Nu()}function Nu(){return new oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hj=new gt(pe.comparator),Vj=new dt(pe.comparator);function je(...t){let e=Vj;for(const n of t)e=e.add(n);return e}const Kj=new dt(De);function ox(){return Kj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function hk(t){return{integerValue:""+t}}function zj(t,e){return HS(e)?hk(e):Ax(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this._=void 0}}function Gj(t,e,n){return t instanceof Xl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ix(s)&&(s=sx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof cA?pk(t,e):t instanceof uA?mk(t,e):function(i,s){const o=fk(i,s),l=WC(o)+WC(i.Pe);return Wy(o)&&Wy(i.Pe)?hk(l):Ax(i.serializer,l)}(t,e)}function qj(t,e,n){return t instanceof cA?pk(t,e):t instanceof uA?mk(t,e):n}function fk(t,e){return t instanceof md?function(r){return Wy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xl extends Sm{}class cA extends Sm{constructor(e){super(),this.elements=e}}function pk(t,e){const n=gk(e);for(const r of t.elements)n.some(i=>zi(i,r))||n.push(r);return{arrayValue:{values:n}}}class uA extends Sm{constructor(e){super(),this.elements=e}}function mk(t,e){let n=gk(e);for(const r of t.elements)n=n.filter(i=>!zi(i,r));return{arrayValue:{values:n}}}class md extends Sm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function WC(t){return Et(t.integerValue||t.doubleValue)}function gk(t){return fd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.field=e,this.transform=n}}function Wj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cA&&i instanceof cA||r instanceof uA&&i instanceof uA?Wl(r.elements,i.elements,zi):r instanceof md&&i instanceof md?zi(r.Pe,i.Pe):r instanceof Xl&&i instanceof Xl}(t.transform,e.transform)}class $j{constructor(e,n){this.version=e,this.transformResults=n}}class Rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Um{}function yk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nm(t.key,Rn.none()):new mc(t.key,t.data,Rn.none());{const n=t.data,r=Ln.empty();let i=new dt(Tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hs(t.key,r,new pr(i.toArray()),Rn.none())}}function Zj(t,e,n){t instanceof mc?function(i,s,o){const l=i.value.clone(),u=ZC(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(i,s,o){if(!jf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=ZC(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(wk(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fu(t,e,n,r){return t instanceof mc?function(s,o,l,u){if(!jf(s.precondition,o))return l;const h=s.value.clone(),p=JC(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(s,o,l,u){if(!jf(s.precondition,o))return l;const h=JC(s.fieldTransforms,u,o),p=o.data;return p.setAll(wk(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,l){return jf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Jj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=fk(r.transform,i||null);s!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,s))}return n||null}function $C(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wl(r,i,(s,o)=>Wj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mc extends Um{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends Um{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ZC(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,qj(o,l,n[i]))}return r}function JC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Gj(s,o,e))}return r}class Nm extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vk extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Zj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=yk(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,(n,r)=>$C(n,r))&&Wl(this.baseMutations,e.baseMutations,(n,r)=>$C(n,r))}}class cx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return Hj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,Ye;function Yj(t){switch(t){default:return be();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function xk(t){if(t===void 0)return qt("GRPC error has no .code"),te.UNKNOWN;switch(t){case Jt.OK:return te.OK;case Jt.CANCELLED:return te.CANCELLED;case Jt.UNKNOWN:return te.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return te.INTERNAL;case Jt.UNAVAILABLE:return te.UNAVAILABLE;case Jt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Jt.NOT_FOUND:return te.NOT_FOUND;case Jt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Jt.ABORTED:return te.ABORTED;case Jt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Jt.DATA_LOSS:return te.DATA_LOSS;default:return be()}}(Ye=Jt||(Jt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new Wo([4294967295,4294967295],0);function XC(t){const e=eM().encode(t),n=new SS;return n.update(e),new Uint8Array(n.digest())}function YC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wo([n,r],0),new Wo([i,s],0)]}class dx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cu(`Invalid padding: ${n}`);if(r<0)throw new cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Wo.fromNumber(r)));return i.compare(tM)===1&&(i=new Wo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=XC(e),[r,i]=YC(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dx(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=XC(e),[r,i]=YC(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,jd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dd(Se.min(),i,new gt(De),Ir(),je())}}class jd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jd(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class _k{constructor(e,n){this.targetId=e,this.me=n}}class Bk{constructor(e,n,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class eb{constructor(){this.fe=0,this.ge=nb(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=je(),n=je(),r=je();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:be()}}),new jd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ir(),this.qe=tb(),this.Qe=new gt(De)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Sp(s))if(r===0){const o=new pe(s.path);this.Ue(n,o,Dt.newNoDocument(o,Se.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Wa(r).toUint8Array()}catch(u){if(u instanceof WS)return ql("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new dx(o,i,s)}catch(u){return ql(u instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Sp(l.target)){const u=new pe(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Dt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=je();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Dd(e,n,this.Qe,this.ke,r);return this.ke=Ir(),this.qe=tb(),this.Qe=new gt(De),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new eb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(De),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eb),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function tb(){return new gt(pe.comparator)}function nb(){return new gt(pe.comparator)}const rM={asc:"ASCENDING",desc:"DESCENDING"},iM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sM={and:"AND",or:"OR"};class aM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yy(t,e){return t.useProto3Json||Em(e)?e:{value:e}}function Yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ck(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oM(t,e){return Yl(t,e.toTimestamp())}function Yn(t){return Te(!!t),Se.fromTimestamp(function(n){const r=Ls(n);return new Ve(r.seconds,r.nanos)}(t))}function hx(t,e){return ew(t,e).canonicalString()}function ew(t,e){const n=function(i){return new it(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bk(t){const e=it.fromString(t);return Te(Qk(e)),e}function Np(t,e){return hx(t.databaseId,e.path)}function $o(t,e){const n=bk(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(Tk(n))}function Ek(t,e){return hx(t.databaseId,e)}function Ik(t){const e=bk(t);return e.length===4?it.emptyPath():Tk(e)}function tw(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tk(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rb(t,e,n){return{name:Np(t,e),fields:n.value.mapValue.fields}}function AM(t,e,n){const r=$o(t,e.name),i=Yn(e.updateTime),s=e.createTime?Yn(e.createTime):Se.min(),o=new Ln({mapValue:{fields:e.fields}}),l=Dt.newFoundDocument(r,i,s,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function lM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(Te(p===void 0||typeof p=="string"),jt.fromBase64String(p||"")):(Te(p===void 0||p instanceof Buffer||p instanceof Uint8Array),jt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?te.UNKNOWN:xk(h.code);return new ce(p,h.message||"")}(o);n=new Bk(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$o(t,r.document.name),s=Yn(r.document.updateTime),o=r.document.createTime?Yn(r.document.createTime):Se.min(),l=new Ln({mapValue:{fields:r.document.fields}}),u=Dt.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Mf(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$o(t,r.document),s=r.readTime?Yn(r.readTime):Se.min(),o=Dt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Mf([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$o(t,r.document),s=r.removedTargetIds||[];n=new Mf([],s,i,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Xj(i,s),l=r.targetId;n=new _k(l,o)}}return n}function Fp(t,e){let n;if(e instanceof mc)n={update:rb(t,e.key,e.value)};else if(e instanceof Nm)n={delete:Np(t,e.key)};else if(e instanceof Hs)n={update:rb(t,e.key,e.data),updateMask:pM(e.fieldMask)};else{if(!(e instanceof vk))return be();n={verify:Np(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof uA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof md)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:be()}(t,e.precondition)),n}function nw(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Rn.updateTime(Yn(s.updateTime)):s.exists!==void 0?Rn.exists(s.exists):Rn.none()}(e.currentDocument):Rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let u=null;if("setToServerValue"in l)Te(l.setToServerValue==="REQUEST_TIME"),u=new Xl;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];u=new cA(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];u=new uA(p)}else"increment"in l?u=new md(o,l.increment):be();const h=Tt.fromServerFormat(l.fieldPath);return new km(h,u)}(t,i)):[];if(e.update){e.update.name;const i=$o(t,e.update.name),s=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const h=u.fieldPaths||[];return new pr(h.map(p=>Tt.fromServerFormat(p)))}(e.updateMask);return new Hs(i,s,o,n,r)}return new mc(i,s,n,r)}if(e.delete){const i=$o(t,e.delete);return new Nm(i,n)}if(e.verify){const i=$o(t,e.verify);return new vk(i,n)}return be()}function cM(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Yn(i.updateTime):Yn(s);return o.isEqual(Se.min())&&(o=Yn(s)),new $j(o,i.transformResults||[])}(n,e))):[]}function Sk(t,e){return{documents:[Ek(t,e.path)]}}function kk(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ek(t,i);const s=function(h){if(h.length!==0)return Fk(ot.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(w){return{field:ll(w.field),direction:dM(w.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Yy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function Uk(t){let e=Ik(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const w=Nk(g);return w instanceof ot&&ax(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(w=>function(b){return new pd(cl(b.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(w))}(n.orderBy));let l=null;n.limit&&(l=function(g){let w;return w=typeof g=="object"?g.value:g,Em(w)?null:w}(n.limit));let u=null;n.startAt&&(u=function(g){const w=!!g.before,C=g.values||[];return new Zl(C,w)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const w=!g.before,C=g.values||[];return new Zl(C,w)}(n.endAt)),sk(e,i,o,s,l,"F",u,h)}function uM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cl(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=cl(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cl(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cl(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(cl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ot.create(n.compositeFilter.filters.map(r=>Nk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function dM(t){return rM[t]}function hM(t){return iM[t]}function fM(t){return sM[t]}function ll(t){return{fieldPath:t.canonicalString()}}function cl(t){return Tt.fromServerFormat(t.fieldPath)}function Fk(t){return t instanceof Ze?function(n){if(n.op==="=="){if(MC(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NAN"}};if(jC(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MC(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NAN"}};if(jC(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(n.field),op:hM(n.op),value:n.value}}}(t):t instanceof ot?function(n){const r=n.getFilters().map(i=>Fk(i));return r.length===1?r[0]:{compositeFilter:{op:fM(n.op),filters:r}}}(t):be()}function pM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,i,s=Se.min(),o=Se.min(),l=jt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.ct=e}}function mM(t,e){let n;if(e.document)n=AM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),i=hA(e.noDocument.readTime);n=Dt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return be();{const r=pe.fromSegments(e.unknownDocument.path),i=hA(e.unknownDocument.version);n=Dt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ve(i[0],i[1]);return Se.fromTimestamp(s)}(e.readTime)),n}function ib(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Np(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Yl(s,o.version.toTimestamp()),createTime:Yl(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:dA(e.version)};else{if(!e.isUnknownDocument())return be();r.unknownDocument={path:n.path.toArray(),version:dA(e.version)}}return r}function Qp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function dA(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hA(t){const e=new Ve(t.seconds,t.nanoseconds);return Se.fromTimestamp(e)}function Po(t,e){const n=(e.baseMutations||[]).map(s=>nw(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>nw(t.ct,s)),i=Ve.fromMillis(e.localWriteTimeMs);return new lx(e.batchId,i,n,r)}function uu(t){const e=hA(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?hA(t.lastLimboFreeSnapshotVersion):Se.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Te(s.documents.length===1),kr(Ld(Ik(s.documents[0])))}(t.query):function(s){return kr(Uk(s))}(t.query),new _s(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,jt.fromBase64String(t.resumeToken))}function Lk(t,e){const n=dA(e.snapshotVersion),r=dA(e.lastLimboFreeSnapshotVersion);let i;i=Sp(e.target)?Sk(t.ct,e.target):kk(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:lA(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Rk(t){const e=Uk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Up(e,e.limit,"L"):e}function a0(t,e){return new ux(e.largestBatchId,nw(t.ct,e.overlayMutation))}function sb(t,e){const n=e.path.lastSegment();return[t,Xn(e.path.popLast()),n]}function ab(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:dA(r.readTime),documentKey:Xn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{getBundleMetadata(e,n){return ob(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:hA(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return ob(e).put(function(i){return{bundleId:i.id,createTime:dA(Yn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Ab(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Rk(s.bundledQuery),readTime:hA(s.readTime)}}(r)})}saveNamedQuery(e,n){return Ab(e).put(function(i){return{name:i.name,readTime:dA(Yn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function ob(t){return An(t,"bundles")}function Ab(t){return An(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Fm(e,r)}getOverlay(e,n){return Kc(e).get(sb(this.userId,n)).next(r=>r?a0(this.serializer,r):null)}getOverlays(e,n){const r=Di();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const l=new ux(n,o);i.push(this.ht(e,l))}),W.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Xn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Kc(e).j("collectionPathOverlayIndex",l))}),W.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Di(),s=Xn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Kc(e).U("collectionPathOverlayIndex",o).next(l=>{for(const u of l){const h=a0(this.serializer,u);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Di();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Kc(e).J({index:"collectionGroupOverlayIndex",range:l},(u,h,p)=>{const g=a0(this.serializer,h);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):p.done()}).next(()=>s)}ht(e,n){return Kc(e).put(function(i,s,o){const[l,u,h]=sb(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Fp(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Kc(t){return An(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{Pt(e){return An(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?jt.fromUint8Array(r):jt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Et(e.integerValue));else if("doubleValue"in e){const r=Et(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),cd(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ls(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Wa(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?$S(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Im(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):be()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",l=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Et(l)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),pe.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Lo.vt=new Lo;function wM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function lb(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=wM(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class vM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=lb(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=lb(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class xM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class _M{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class zc{constructor(){this.jt=new vM,this.Ht=new xM(this.jt),this.Jt=new _M(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ro(this.indexId,this.documentKey,this.arrayValue,r)}}function da(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=cb(t.arrayValue,e.arrayValue),n!==0?n:(n=cb(t.directionalValue,e.directionalValue),n!==0?n:pe.comparator(t.documentKey,e.documentKey)))}function cb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.Xt=new dt((n,r)=>Tt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Te(e.collectionGroup===this.collectionId),this.nn)return!1;const n=zy(e);if(n!==void 0&&!this.sn(n))return!1;const r=No(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const u=r[s];if(!this.on(l,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s){const l=r[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new dt(Tt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Pf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Pf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Pf(r.field,r.dir==="asc"?0:1)));return new Tp(Tp.UNKNOWN_ID,this.collectionId,n,ld.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){var e,n;if(Te(t instanceof Ze||t instanceof ot),t instanceof Ze){if(t instanceof ik){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ze.create(t.field,"==",s)))||[];return ot.create(i,"or")}return t}const r=t.filters.map(i=>Dk(i));return ot.create(r,t.op)}function BM(t){if(t.getFilters().length===0)return[];const e=sw(Dk(t));return Te(jk(e)),rw(e)||iw(e)?[e]:e.getFilters()}function rw(t){return t instanceof Ze}function iw(t){return t instanceof ot&&ax(t)}function jk(t){return rw(t)||iw(t)||function(n){if(n instanceof ot&&$y(n)){for(const r of n.getFilters())if(!rw(r)&&!iw(r))return!1;return!0}return!1}(t)}function sw(t){if(Te(t instanceof Ze||t instanceof ot),t instanceof Ze)return t;if(t.filters.length===1)return sw(t.filters[0]);const e=t.filters.map(r=>sw(r));let n=ot.create(e,t.op);return n=Pp(n),jk(n)?n:(Te(n instanceof ot),Te(Jl(n)),Te(n.filters.length>1),n.filters.reduce((r,i)=>fx(r,i)))}function fx(t,e){let n;return Te(t instanceof Ze||t instanceof ot),Te(e instanceof Ze||e instanceof ot),n=t instanceof Ze?e instanceof Ze?function(i,s){return ot.create([i,s],"and")}(t,e):db(t,e):e instanceof Ze?db(e,t):function(i,s){if(Te(i.filters.length>0&&s.filters.length>0),Jl(i)&&Jl(s))return tk(i,s.getFilters());const o=$y(i)?i:s,l=$y(i)?s:i,u=o.filters.map(h=>fx(h,l));return ot.create(u,"or")}(t,e),Pp(n)}function db(t,e){if(Jl(e))return tk(e,t.getFilters());{const n=e.filters.map(r=>fx(t,r));return ot.create(n,"or")}}function Pp(t){if(Te(t instanceof Ze||t instanceof ot),t instanceof Ze)return t;const e=t.getFilters();if(e.length===1)return Pp(e[0]);if(YS(t))return t;const n=e.map(i=>Pp(i)),r=[];return n.forEach(i=>{i instanceof Ze?r.push(i):i instanceof ot&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ot.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.un=new px}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Fr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class px{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt(it.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Uint8Array(0);class bM{constructor(e,n){this.databaseId=n,this.cn=new px,this.ln=new oo(r=>lA(r),(r,i)=>Pd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Xn(i)};return hb(e).put(s)}return W.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[LS(n),""],!1,!0);return hb(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ri(o.parent))}return r})}addFieldIndex(e,n){const r=Gc(e),i=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=XA(e);return s.next(l=>{o.put(ab(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Gc(e),i=XA(e),s=JA(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Gc(e),r=JA(e),i=XA(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return W.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new ub(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=JA(e);let i=!0;const s=new Map;return W.forEach(this.hn(n),o=>this.Pn(e,o).next(l=>{i&&(i=!!l),s.set(o,l)})).next(()=>{if(i){let o=je();const l=[];return W.forEach(s,(u,h)=>{re("IndexedDbIndexManager",`Using index ${function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(u)} to execute ${lA(n)}`);const p=function(k,O){const V=zy(O);if(V===void 0)return null;for(const j of kp(k,V.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(h,u),g=function(k,O){const V=new Map;for(const j of No(O))for(const T of kp(k,j.fieldPath))switch(T.op){case"==":case"in":V.set(j.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return V.set(j.fieldPath.canonicalString(),T.value),Array.from(V.values())}return null}(h,u),w=function(k,O){const V=[];let j=!0;for(const T of No(O)){const E=T.kind===0?zC(k,T.fieldPath,k.startAt):GC(k,T.fieldPath,k.startAt);V.push(E.value),j&&(j=E.inclusive)}return new Zl(V,j)}(h,u),C=function(k,O){const V=[];let j=!0;for(const T of No(O)){const E=T.kind===0?GC(k,T.fieldPath,k.endAt):zC(k,T.fieldPath,k.endAt);V.push(E.value),j&&(j=E.inclusive)}return new Zl(V,j)}(h,u),b=this.In(u,h,w),_=this.In(u,h,C),F=this.Tn(u,h,g),I=this.En(u.indexId,p,b,w.inclusive,_,C.inclusive,F);return W.forEach(I,B=>r.G(B,n.limit).next(k=>{k.forEach(O=>{const V=pe.fromSegments(O.documentKey);o.has(V)||(o=o.add(V),l.push(V))})}))}).next(()=>l)}return W.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=BM(ot.create(e.filters,"and")).map(r=>Jy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),h=u/(n!=null?n.length:1),p=[];for(let g=0;g<u;++g){const w=n?this.dn(n[g/h]):Lh,C=this.An(e,w,r[g%h],i),b=this.Rn(e,w,s[g%h],o),_=l.map(F=>this.An(e,w,F,!0));p.push(...this.createRange(C,b,_))}return p}An(e,n,r,i){const s=new Ro(e,pe.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Ro(e,pe.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new ub(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const l of s)r.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return W.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let h=new dt(Tt.comparator),p=!1;for(const g of u.filters)for(const w of g.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?p=!0:h=h.add(w.field));for(const g of u.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new zc;for(const i of No(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Lo.vt.It(s,o)}return r.zt()}dn(e){const n=new zc;return Lo.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new zc;return Lo.vt.It(hd(this.databaseId,n),r.Yt(function(s){const o=No(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new zc);let s=0;for(const o of No(e)){const l=r[s++];for(const u of i)if(this.fn(n,o.fieldPath)&&fd(l))i=this.gn(i,o,l);else{const h=u.Yt(o.kind);Lo.vt.It(l,h)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const l of i){const u=new zc;u.seed(l.zt()),Lo.vt.It(o,u.Yt(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof Ze&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Gc(e),i=XA(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return W.forEach(s,l=>i.get([l.indexId,this.uid]).next(u=>{o.push(function(p,g){const w=g?new ld(g.sequenceNumber,new Fr(hA(g.readTime),new pe(Ri(g.documentKey)),g.largestBatchId)):ld.empty(),C=p.fields.map(([b,_])=>new Pf(Tt.fromServerFormat(b),_));return new Tp(p.indexId,p.collectionGroup,C,w)}(l,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:De(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Gc(e),s=XA(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>W.forEach(l,u=>s.put(ab(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return W.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?W.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),W.forEach(l,u=>this.wn(e,i,u).next(h=>{const p=this.Sn(s,u);return h.isEqual(p)?W.resolve():this.bn(e,s,u,h,p)}))))})}Dn(e,n,r,i){return JA(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return JA(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=JA(e);let s=new dt(da);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,l)=>{s=s.add(new Ro(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,n){let r=new dt(da);const i=this.Vn(n,e);if(i==null)return r;const s=zy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(fd(o))for(const l of o.arrayValue.values||[])r=r.add(new Ro(n.indexId,e.key,this.dn(l),i))}else r=r.add(new Ro(n.indexId,e.key,Lh,i));return r}bn(e,n,r,i,s){re("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,h,p,g,w){const C=u.getIterator(),b=h.getIterator();let _=ZA(C),F=ZA(b);for(;_||F;){let I=!1,B=!1;if(_&&F){const k=p(_,F);k<0?B=!0:k>0&&(I=!0)}else _!=null?B=!0:I=!0;I?(g(F),F=ZA(b)):B?(w(_),_=ZA(C)):(_=ZA(C),F=ZA(b))}}(i,s,da,l=>{o.push(this.Dn(e,n,r,l))},l=>{o.push(this.vn(e,n,r,l))}),W.waitFor(o)}yn(e){let n=1;return XA(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>da(o,l)).filter((o,l,u)=>!l||da(o,u[l-1])!==0);const i=[];i.push(e);for(const o of r){const l=da(o,e),u=da(o,n);if(l===0)i[0]=e.Zt();else if(l>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const l=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Lh,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Lh,[]];s.push(IDBKeyRange.bound(l,u))}return s}Cn(e,n){return da(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(fb)}getMinOffset(e,n){return W.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||be())).next(fb)}}function hb(t){return An(t,"collectionParents")}function JA(t){return An(t,"indexEntries")}function Gc(t){return An(t,"indexConfiguration")}function XA(t){return An(t,"indexState")}function fb(t){Te(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;tx(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Fr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ar{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.J({range:o},(p,g,w)=>(l++,w.delete()));s.push(u.next(()=>{Te(l===1)}));const h=[];for(const p of n.mutations){const g=VS(e,p.key.path,n.batchId);s.push(i.delete(g)),h.push(p.key)}return W.waitFor(s).next(()=>h)}function Lp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw be();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(41943040,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class Qm{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Te(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Qm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ha(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ul(e),o=ha(e);return o.add({}).next(l=>{Te(typeof l=="number");const u=new lx(l,n,r,i),h=function(C,b,_){const F=_.baseMutations.map(B=>Fp(C.ct,B)),I=_.mutations.map(B=>Fp(C.ct,B));return{userId:b,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:F,mutations:I}}(this.serializer,this.userId,u),p=[];let g=new dt((w,C)=>De(w.canonicalString(),C.canonicalString()));for(const w of i){const C=VS(this.userId,w.key.path,l);g=g.add(w.key.path.popLast()),p.push(o.put(h)),p.push(s.put(C,lj))}return g.forEach(w=>{p.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Fn[l]=u.keys()}),W.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return ha(e).get(n).next(r=>r?(Te(r.userId===this.userId),Po(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?W.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ha(e).J({index:"userMutationsIndex",range:i},(o,l,u)=>{l.userId===this.userId&&(Te(l.batchId>=r),s=Po(this.serializer,l)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ha(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ha(e).U("userMutationsIndex",n).next(r=>r.map(i=>Po(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Lf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ul(e).J({range:i},(o,l,u)=>{const[h,p,g]=o,w=Ri(p);if(h===this.userId&&n.path.isEqual(w))return ha(e).get(g).next(C=>{if(!C)throw be();Te(C.userId===this.userId),s.push(Po(this.serializer,C))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(De);const i=[];return n.forEach(s=>{const o=Lf(this.userId,s.path),l=IDBKeyRange.lowerBound(o),u=ul(e).J({range:l},(h,p,g)=>{const[w,C,b]=h,_=Ri(C);w===this.userId&&s.path.isEqual(_)?r=r.add(b):g.done()});i.push(u)}),W.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Lf(this.userId,r),o=IDBKeyRange.lowerBound(s);let l=new dt(De);return ul(e).J({range:o},(u,h,p)=>{const[g,w,C]=u,b=Ri(w);g===this.userId&&r.isPrefixOf(b)?b.length===i&&(l=l.add(C)):p.done()}).next(()=>this.xn(e,l))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ha(e).get(s).next(o=>{if(o===null)throw be();Te(o.userId===this.userId),r.push(Po(this.serializer,o))}))}),W.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Mk(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),W.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return W.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ul(e).J({range:r},(s,o,l)=>{if(s[0]===this.userId){const u=Ri(s[1]);i.push(u)}else l.done()}).next(()=>{Te(i.length===0)})})}containsKey(e,n){return Ok(e,this.userId,n)}Nn(e){return Hk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ok(t,e,n){const r=Lf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ul(t).J({range:s,H:!0},(l,u,h)=>{const[p,g,w]=l;p===e&&g===i&&(o=!0),h.done()}).next(()=>o)}function ha(t){return An(t,"mutations")}function ul(t){return An(t,"documentMutations")}function Hk(t){return An(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fA(0)}static kn(){return new fA(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new fA(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Se.fromTimestamp(new Ve(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>YA(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Te(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return YA(e).J((o,l)=>{const u=uu(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>W.waitFor(s)).next(()=>i)}forEachTarget(e,n){return YA(e).J((r,i)=>{const s=uu(i);n(s)})}qn(e){return mb(e).get("targetGlobalKey").next(n=>(Te(n!==null),n))}Qn(e,n){return mb(e).put("targetGlobalKey",n)}Kn(e,n){return YA(e).put(Lk(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=lA(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return YA(e).J({range:i,index:"queryTargetsIndex"},(o,l,u)=>{const h=uu(l);Pd(n,h.target)&&(s=h,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ca(e);return n.forEach(o=>{const l=Xn(o.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,o))}),W.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ca(e);return W.forEach(n,s=>{const o=Xn(s.path);return W.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ca(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ca(e);let s=je();return i.J({range:r,H:!0},(o,l,u)=>{const h=Ri(o[1]),p=new pe(h);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=Xn(n.path),i=IDBKeyRange.bound([r],[LS(r)],!1,!0);let s=0;return Ca(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,l],u,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}ot(e,n){return YA(e).get(n).next(r=>r?uu(r):null)}}function YA(t){return An(t,"targets")}function mb(t){return An(t,"targetGlobal")}function Ca(t){return An(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb([t,e],[n,r]){const i=De(t,n);return i===0?De(e,r):i}class IM{constructor(e){this.Un=e,this.buffer=new dt(gb),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();gb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ao(n)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await so(n)}await this.Hn(3e5)})}}class SM{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return W.resolve(fr.oe);const r=new IM(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(pb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pb):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,l=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),ol()<=We.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function kM(t,e){return new SM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n){this.db=e,this.garbageCollector=kM(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Rh(e,r)}removeReference(e,n,r){return Rh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Rh(e,n)}nr(e,n){return function(i,s){let o=!1;return Hk(i).Y(l=>Ok(i,l,s).next(u=>(u&&(o=!0),W.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,l)=>{if(l<=n){const u=this.nr(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Se.min()),Ca(e).delete(function(g){return[0,Xn(g.path)]}(o))))});i.push(u)}}).next(()=>W.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Rh(e,n)}tr(e,n){const r=Ca(e);let i,s=fr.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:u,sequenceNumber:h})=>{o===0?(s!==fr.oe&&n(new pe(Ri(i)),s),s=h,i=u):s=fr.oe}).next(()=>{s!==fr.oe&&n(new pe(Ri(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rh(t,e){return Ca(t).put(function(r,i){return{targetId:0,path:Xn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Io(e).put(r)}removeEntry(e,n,r){return Io(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Qp(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Dt.newInvalidDocument(n);return Io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qc(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Dt.newInvalidDocument(n)};return Io(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qc(n))},(i,s)=>{r={document:this.ir(n,s),size:Lp(s)}}).next(()=>r)}getEntries(e,n){let r=Ir();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Ir(),i=new gt(pe.comparator);return this._r(e,n,(s,o)=>{const l=this.ir(s,o);r=r.insert(s,l),i=i.insert(s,Lp(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return W.resolve();let i=new dt(vb);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(qc(i.first()),qc(i.last())),o=i.getIterator();let l=o.getNext();return Io(e).J({index:"documentKeyIndex",range:s},(u,h,p)=>{const g=pe.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&vb(l,g)<0;)r(l,null),l=o.getNext();l&&l.isEqual(g)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?p.$(qc(l)):p.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),Qp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Io(e).U(IDBKeyRange.bound(l,u,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let p=Ir();for(const g of h){const w=this.ir(pe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);w.isFoundDocument()&&(Rd(n,w)||i.has(w.key))&&(p=p.insert(w.key,w))}return p})}getAllFromCollectionGroup(e,n,r,i){let s=Ir();const o=wb(n,r),l=wb(n,Fr.max());return Io(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(u,h,p)=>{const g=this.ir(pe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new FM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return yb(e).get("remoteDocumentGlobalKey").next(n=>(Te(!!n),n))}rr(e,n){return yb(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=mM(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return Dt.newInvalidDocument(e)}}function Kk(t){return new NM(t)}class FM extends Vk{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new oo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new dt((s,o)=>De(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const u=ib(this.cr.serializer,o);i=i.add(s.path.popLast());const h=Lp(u);r+=h-l.size,n.push(this.cr.addEntry(e,s,u))}else if(r-=l.size,this.trackRemovals){const u=ib(this.cr.serializer,o.convertToNoDocument(Se.min()));n.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),W.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function yb(t){return An(t,"remoteDocumentGlobal")}function Io(t){return An(t,"remoteDocumentsV14")}function qc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wb(t,e){const n=e.documentKey.path.toArray();return[t,Qp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vb(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=De(n[s],r[s]),i)return i;return i=De(n.length,r.length),i||(i=De(n[n.length-2],r[r.length-2]),i||De(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fu(r.mutation,i,pr.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=Di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=lu();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Ir();const o=Nu(),l=function(){return Nu()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Hs)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Fu(p.mutation,h,p.mutation.getFieldMask(),Ve.now())):o.set(h.key,pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return l.set(h,new QM(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Nu();let i=new gt((o,l)=>o-l),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||pr.empty();p=l.applyToLocalView(h,p),r.set(u,p);const g=(i.get(l.batchId)||je()).add(u);i=i.insert(l.batchId,g)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,g=dk();p.forEach(w=>{if(!s.has(w)){const C=yk(n.get(w),r.get(w));C!==null&&g.set(w,C),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ak(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(Di());let l=-1,u=s;return o.next(h=>W.forEach(h,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(p)?W.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{u=u.insert(p,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,je())).next(p=>({batchId:l,changes:uk(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let i=lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=lu();return this.indexManager.getCollectionParents(e,s).next(l=>W.forEach(l,u=>{const h=function(g,w){return new pc(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((g,w)=>{o=o.insert(g,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Dt.newInvalidDocument(p)))});let l=lu();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&Fu(p.mutation,h,pr.empty(),Ve.now()),Rd(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Yn(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Rk(i.bundledQuery),readTime:Yn(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.overlays=new gt(pe.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Di();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=Di(),s=n.length+1,o=new pe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new gt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Di(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Di(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return W.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ux(n,r));let s=this.Ir.get(n);s===void 0&&(s=je(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.Tr=new dt(hn.Er),this.dr=new dt(hn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new hn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new hn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new pe(new it([])),r=new hn(n,e),i=new hn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new pe(new it([])),r=new hn(n,e),i=new hn(n,e+1);let s=je();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new hn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return pe.comparator(e.key,n.key)||De(e.wr,n.wr)}static Ar(e,n){return De(e.wr,n.wr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new dt(hn.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lx(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new hn(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hn(n,0),i=new hn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(De);return n.forEach(i=>{const s=new hn(i,0),o=new hn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;pe.isDocumentKey(s)||(s=s.child(""));const o=new hn(new pe(s),0);let l=new dt(De);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),W.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,i=>{const s=new hn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new hn(n,0),i=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.Mr=e,this.docs=function(){return new gt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Ir();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ir();const o=n.path,l=new pe(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||tx(DS(p),r)<=0||(i.has(p.key)||Rd(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){be()}Or(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MM(this)}getSize(e){return W.resolve(this.size)}}class MM extends Vk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.persistence=e,this.Nr=new oo(n=>lA(n),Pd),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mx,this.targetCount=0,this.kr=fA.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fA(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fr(0),this.Kr=!1,this.Kr=!0,this.$r=new RM,this.referenceDelegate=e(this),this.Ur=new OM(this),this.indexManager=new CM,this.remoteDocumentCache=function(i){return new jM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Pk(n),this.Gr=new PM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const i=new HM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class HM extends MS{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.Jr=new mx,this.Yr=null}static Zr(e){return new Pm(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=pe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.serializer=e}O(e,n,r,i){const s=new bm("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QC,{unique:!0}),u.createObjectStore("documentMutations")}(e),xb(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=W.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),xb(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,h){return h.store("mutations").U().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QC,{unique:!0});const g=h.store("mutations"),w=p.map(C=>g.put(C));return W.waitFor(w)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const h=u.createObjectStore("documentOverlays",{keyPath:xj});h.createIndex("collectionPathOverlayIndex",_j,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",Bj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:cj});h.createIndex("documentKeyIndex",uj),h.createIndex("collectionGroupIndex",dj)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:gj}).createIndex("sequenceNumberIndex",yj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:wj}).createIndex("documentKeyIndex",vj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Lp(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>W.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>W.forEach(l,u=>{Te(u.userId===s.userId);const h=Po(this.serializer,u);return Mk(e,s.userId,h).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,l)=>{const u=new it(o),h=function(g){return[0,Xn(g)]}(u);s.push(n.get(h).next(p=>p?W.resolve():(g=>n.put({targetId:0,path:Xn(g),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>W.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:mj});const r=n.store("collectionParents"),i=new px,s=o=>{if(i.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:Xn(u)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const u=new it(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,u],h)=>{const p=Ri(l);return s(p.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=uu(i),o=Lk(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const l=n.store("remoteDocumentsV14"),u=function(g){return g.document?new pe(it.fromString(g.document.name).popFirst(5)):g.noDocument?pe.fromSegments(g.noDocument.path):g.unknownDocument?pe.fromSegments(g.unknownDocument.path):be()}(o).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(h))}).next(()=>W.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=Kk(this.serializer),s=new Gk(Pm.Zr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(u=>{var h;let p=(h=l.get(u.userId))!==null&&h!==void 0?h:je();Po(this.serializer,u).keys().forEach(g=>p=p.add(g)),l.set(u.userId,p)}),W.forEach(l,(u,h)=>{const p=new Nn(h),g=Fm.lt(this.serializer,p),w=s.getIndexManager(p),C=Qm.lt(p,this.serializer,w,s.referenceDelegate);return new zk(i,C,g,w).recalculateAndSaveOverlaysForDocumentKeys(new Gy(n,fr.oe),u).next()})})}}function xb(t){t.createObjectStore("targetDocuments",{keyPath:fj}).createIndex("documentTargetsIndex",pj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hj,{unique:!0}),t.createObjectStore("targetGlobal")}const o0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gx{constructor(e,n,r,i,s,o,l,u,h,p,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=l,this.ci=h,this.li=p,this.hi=g,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=w=>Promise.resolve(),!gx.D())throw new ce(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UM(this,i),this.Ai=n+"main",this.serializer=new Pk(u),this.Ri=new Va(this.Ai,this.hi,new VM(this.serializer)),this.$r=new yM,this.Ur=new EM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kk(this.serializer),this.Gr=new gM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&qt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(te.FAILED_PRECONDITION,o0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ao(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Wc(e).get("owner").next(n=>W.resolve(this.vi(n)))}Ci(e){return Dh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=An(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(l=>s.indexOf(l)===-1);return W.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?W.resolve(!0):Wc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ce(te.FAILED_PRECONDITION,o0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&re("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Gy(e,fr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Dh(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Qm.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Fm.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===17?Ej:u===16?bj:u===15?rx:u===14?GS:u===13?zS:u===12?Cj:u===11?KS:void be()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,l=>(o=new Gy(l,this.Qr?this.Qr.next():fr.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ce(te.FAILED_PRECONDITION,jS);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return Wc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ce(te.FAILED_PRECONDITION,o0)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wc(e).put("owner",n)}static D(){return Va.D()}bi(e){const n=Wc(e);return n.get("owner").next(r=>this.vi(r)?(re("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):W.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(qt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;j1()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){qt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wc(t){return An(t,"owner")}function Dh(t){return An(t,"clientMetadata")}function qk(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=je(),i=je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return j1()?8:OS(on())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new KM;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ol()<=We.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(ol()<=We.DEBUG&&re("QueryEngine","Query:",Al(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ol()<=We.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(n))):W.resolve())}Yi(e,n){if(qC(n))return W.resolve(null);let r=kr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Up(n,null,"F"),r=kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=je(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Up(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return qC(n)||i.isEqual(Se.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?W.resolve(null):(ol()<=We.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Al(n)),this.rs(e,o,n,RS(i,-1)).next(l=>l))})}ts(e,n){let r=new dt(lk(e));return n.forEach((i,s)=>{Rd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ol()<=We.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Al(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new gt(De),this._s=new oo(s=>lA(s),Pd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $k(t,e,n,r){return new zM(t,e,n,r)}async function Zk(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=je();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function GM(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const g=h.batch,w=g.keys();let C=W.resolve();return w.forEach(b=>{C=C.next(()=>p.getEntry(u,b)).next(_=>{const F=h.docVersions.get(b);Te(F!==null),_.version.compareTo(F)<0&&(g.applyToRemoteDocument(_,h),_.isValidDocument()&&(_.setReadTime(h.commitVersion),p.addEntry(_)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=je();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Jk(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qM(t,e){const n=Ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((p,g)=>{const w=i.get(g);if(!w)return;l.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,g)));let C=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),i=i.insert(g,C),function(_,F,I){return _.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(w,C,p)&&l.push(n.Ur.updateTargetData(s,C))});let u=Ir(),h=je();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(WM(s,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(Se.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return W.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function WM(t,e,n){let r=je(),i=je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ir();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):re("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function $M(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rp(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new _s(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ec(t,e,n){const r=Ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ao(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function aw(t,e,n){const r=Ee(t);let i=Se.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const g=Ee(u),w=g._s.get(p);return w!==void 0?W.resolve(g.os.get(w)):g.Ur.getTargetData(h,p)}(r,o,kr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Se.min(),n?s:je())).next(l=>(eU(r,Ak(e),l),{documents:l,Ts:s})))}function Xk(t,e){const n=Ee(t),r=Ee(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Yk(t,e){const n=Ee(t),r=n.us.get(e)||Se.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,RS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eU(n,e,i),i))}function eU(t,e,n){let r=t.us.get(e)||Se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function _b(t,e){return`firestore_clients_${t}_${e}`}function Bb(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function A0(t,e){return`firestore_targets_${t}_${e}`}class Dp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ce(i.error.code,i.error.message))),o?new Dp(e,n,i.state,s):(qt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ce(r.error.code,r.error.message))),s?new Qu(e,r.state,i):(qt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ox();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=HS(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new jp(e,s):(qt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class wx{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new wx(n.clientId,n.onlineState):(qt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ow{constructor(){this.activeTargetIds=ox()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l0{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new gt(De),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=_b(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ow),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(_b(this.persistenceKey,r));if(i){const s=jp.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(A0(this.persistenceKey,e));if(i){const s=Qu.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(A0(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return re("SharedClientState","READ",e,n),n}setItem(e,n){re("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(re("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=fr.oe;if(s!=null)try{const l=JSON.parse(s);Te(typeof l=="number"),o=l}catch(l){qt("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);r!==fr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Dp(this.currentUser,e,n,r),s=Bb(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=Bb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=A0(this.persistenceKey,e),s=new Qu(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return jp.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Dp.Rs(new Nn(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Qu.Rs(i,n)}Ls(e){return wx.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],l=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||l.push(u)}),this.syncEngine.io(o,l).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=ox();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class tU{constructor(){this.so=new ow,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ow,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=null;function c0(){return jh===null?jh=function(){return 268435456+Math.round(2147483648*Math.random())}():jh++,"0x"+jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection";class YM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=c0(),u=this.xo(n,r.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(p=>(re("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ql("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=JM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=c0();return new Promise((o,l)=>{const u=new kS;u.setWithCredentials(!0),u.listenOnce(US.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qf.NO_ERROR:const p=u.getResponseJson();re(kn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Qf.TIMEOUT:re(kn,`RPC '${e}' ${s} timed out`),l(new ce(te.DEADLINE_EXCEEDED,"Request time out"));break;case Qf.HTTP_ERROR:const g=u.getStatus();if(re(kn,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const b=function(F){const I=F.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(I)>=0?I:te.UNKNOWN}(C.status);l(new ce(b,C.message))}else l(new ce(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ce(te.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{re(kn,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);re(kn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=c0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QS(),l=FS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");re(kn,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);let w=!1,C=!1;const b=new XM({Io:F=>{C?re(kn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(w||(re(kn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),re(kn,`RPC '${e}' stream ${i} sending:`,F),g.send(F))},To:()=>g.close()}),_=(F,I,B)=>{F.listen(I,k=>{try{B(k)}catch(O){setTimeout(()=>{throw O},0)}})};return _(g,Au.EventType.OPEN,()=>{C||(re(kn,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),_(g,Au.EventType.CLOSE,()=>{C||(C=!0,re(kn,`RPC '${e}' stream ${i} transport closed`),b.So())}),_(g,Au.EventType.ERROR,F=>{C||(C=!0,ql(kn,`RPC '${e}' stream ${i} transport errored:`,F),b.So(new ce(te.UNAVAILABLE,"The operation could not be completed")))}),_(g,Au.EventType.MESSAGE,F=>{var I;if(!C){const B=F.data[0];Te(!!B);const k=B,O=k.error||((I=k[0])===null||I===void 0?void 0:I.error);if(O){re(kn,`RPC '${e}' stream ${i} received error:`,O);const V=O.status;let j=function(U){const Q=Jt[U];if(Q!==void 0)return xk(Q)}(V),T=O.message;j===void 0&&(j=te.INTERNAL,T="Unknown error status: "+V+" with message "+O.message),C=!0,b.So(new ce(j,T)),g.close()}else re(kn,`RPC '${e}' stream ${i} received:`,B),b.bo(B)}}),_(l,NS.STAT_EVENT,F=>{F.stat===Ky.PROXY?re(kn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===Ky.NOPROXY&&re(kn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(){return typeof window<"u"?window:null}function Of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){return new aM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rU(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(qt(n.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ce(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eO extends iU{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=lM(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?Yn(o.readTime):Se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=tw(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Sp(u)?{documents:Sk(s,u)}:{query:kk(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Ck(s,o.resumeToken);const h=Yy(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Se.min())>0){l.readTime=Yl(s,o.snapshotVersion.toTimestamp());const h=Yy(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=uM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=tw(this.serializer),n.removeTarget=e,this.a_(n)}}class tO extends iU{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cM(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=tw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Fp(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ew(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(te.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,ew(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(te.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qt(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{TA(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Ee(u);h.L_.add(4),await Md(h),h.q_.set("Unknown"),h.L_.delete(4),await Rm(h)}(this))})}),this.q_=new rO(r,i)}}async function Rm(t){if(TA(t))for(const e of t.B_)await e(!0)}async function Md(t){for(const e of t.B_)await e(!1)}function Dm(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_x(n)?xx(n):yc(n).r_()&&vx(n,e))}function tc(t,e){const n=Ee(t),r=yc(n);n.N_.delete(e),r.r_()&&sU(n,e),n.N_.size===0&&(r.r_()?r.o_():TA(n)&&n.q_.set("Unknown"))}function vx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yc(t).A_(e)}function sU(t,e){t.Q_.xe(e),yc(t).R_(e)}function xx(t){t.Q_=new nM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yc(t).start(),t.q_.v_()}function _x(t){return TA(t)&&!yc(t).n_()&&t.N_.size>0}function TA(t){return Ee(t).L_.size===0}function aU(t){t.Q_=void 0}async function sO(t){t.q_.set("Online")}async function aO(t){t.N_.forEach((e,n)=>{vx(t,e)})}async function oO(t,e){aU(t),_x(t)?(t.q_.M_(e),xx(t)):t.q_.set("Unknown")}async function AO(t,e,n){if(t.q_.set("Online"),e instanceof Bk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mp(t,r)}else if(e instanceof Mf?t.Q_.Ke(e):e instanceof _k?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Se.min()))try{const r=await Jk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(jt.EMPTY_BYTE_STRING,p.snapshotVersion)),sU(s,u);const g=new _s(p.target,u,h,p.sequenceNumber);vx(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){re("RemoteStore","Failed to raise snapshot:",r),await Mp(t,r)}}async function Mp(t,e,n){if(!ao(e))throw e;t.L_.add(1),await Md(t),t.q_.set("Offline"),n||(n=()=>Jk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Rm(t)})}function oU(t,e){return e().catch(n=>Mp(t,n,e))}async function gc(t){const e=Ee(t),n=Ja(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lO(e);)try{const i=await $M(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,cO(e,i)}catch(i){await Mp(e,i)}AU(e)&&lU(e)}function lO(t){return TA(t)&&t.O_.length<10}function cO(t,e){t.O_.push(e);const n=Ja(t);n.r_()&&n.V_&&n.m_(e.mutations)}function AU(t){return TA(t)&&!Ja(t).n_()&&t.O_.length>0}function lU(t){Ja(t).start()}async function uO(t){Ja(t).p_()}async function dO(t){const e=Ja(t);for(const n of t.O_)e.m_(n.mutations)}async function hO(t,e,n){const r=t.O_.shift(),i=cx.from(r,e,n);await oU(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gc(t)}async function fO(t,e){e&&Ja(t).V_&&await async function(r,i){if(function(o){return Yj(o)&&o!==te.ABORTED}(i.code)){const s=r.O_.shift();Ja(r).s_(),await oU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gc(r)}}(t,e),AU(t)&&lU(t)}async function bb(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=TA(n);n.L_.add(3),await Md(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Rm(n)}async function Aw(t,e){const n=Ee(t);e?(n.L_.delete(2),await Rm(n)):e||(n.L_.add(2),await Md(n),n.q_.set("Unknown"))}function yc(t){return t.K_||(t.K_=function(n,r,i){const s=Ee(n);return s.w_(),new eO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:sO.bind(null,t),Ro:aO.bind(null,t),mo:oO.bind(null,t),d_:AO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_x(t)?xx(t):t.q_.set("Unknown")):(await t.K_.stop(),aU(t))})),t.K_}function Ja(t){return t.U_||(t.U_=function(n,r,i){const s=Ee(n);return s.w_(),new tO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uO.bind(null,t),mo:fO.bind(null,t),f_:dO.bind(null,t),g_:hO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await gc(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Bx(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cx(t,e){if(qt("AsyncQueue",`${e}: ${t}`),ao(t))return new ce(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=lu(),this.sortedSet=new gt(this.comparator)}static emptySet(e){return new Rl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.W_=new gt(pe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class nc{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new nc(e,n,Rl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class mO{constructor(){this.queries=Ib(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ee(n),s=i.queries;i.queries=Ib(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new ce(te.ABORTED,"Firestore shutting down"))}}function Ib(){return new oo(t=>ok(t),Tm)}async function bx(t,e){const n=Ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new pO,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Cx(o,`Initialization of query '${Al(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ix(n)}async function Ex(t,e){const n=Ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gO(t,e){const n=Ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Ix(n)}function yO(t,e,n){const r=Ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Ix(t){t.Y_.forEach(e=>{e.next()})}var lw,Tb;(Tb=lw||(lw={})).ea="default",Tb.Cache="cache";class Tx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.key=e}}class uU{constructor(e){this.key=e}}class wO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=je(),this.mutatedKeys=je(),this.Aa=lk(e),this.Ra=new Rl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Eb,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const w=i.get(p),C=Rd(this.query,g)?g:null,b=!!w&&this.mutatedKeys.has(w.key),_=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let F=!1;w&&C?w.data.isEqual(C.data)?b!==_&&(r.track({type:3,doc:C}),F=!0):this.ga(w,C)||(r.track({type:2,doc:C}),F=!0,(u&&this.Aa(C,u)>0||h&&this.Aa(C,h)<0)&&(l=!0)):!w&&C?(r.track({type:0,doc:C}),F=!0):w&&!C&&(r.track({type:1,doc:w}),F=!0,(u||h)&&(l=!0)),F&&(C?(o=o.add(C),s=_?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(C,b){const _=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return _(C)-_(b)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new nc(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Eb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uU(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cU(r))}),n}ba(e){this.Ta=e.Ts,this.da=je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return nc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class vO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xO{constructor(e){this.key=e,this.va=!1}}class _O{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new oo(l=>ok(l),Tm),this.Ma=new Map,this.xa=new Set,this.Oa=new gt(pe.comparator),this.Na=new Map,this.La=new mx,this.Ba={},this.ka=new Map,this.qa=fA.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BO(t,e,n=!0){const r=jm(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await dU(r,e,n,!0),i}async function CO(t,e){const n=jm(t);await dU(n,e,!0,!1)}async function dU(t,e,n,r){const i=await Rp(t.localStore,kr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await Sx(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Dm(t.remoteStore,i),l}async function Sx(t,e,n,r,i){t.Ka=(g,w,C)=>async function(_,F,I,B){let k=F.view.ma(I);k.ns&&(k=await aw(_.localStore,F.query,!1).then(({documents:T})=>F.view.ma(T,k)));const O=B&&B.targetChanges.get(F.targetId),V=B&&B.targetMismatches.get(F.targetId)!=null,j=F.view.applyChanges(k,_.isPrimaryClient,O,V);return cw(_,F.targetId,j.wa),j.snapshot}(t,g,w,C);const s=await aw(t.localStore,e,!0),o=new wO(e,s.Ts),l=o.ma(s.documents),u=jd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);cw(t,n,h.wa);const p=new vO(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function bO(t,e,n){const r=Ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Tm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ec(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tc(r.remoteStore,i.targetId),rc(r,i.targetId)}).catch(so)):(rc(r,i.targetId),await ec(r.localStore,i.targetId,!0))}async function EO(t,e){const n=Ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tc(n.remoteStore,r.targetId))}async function IO(t,e,n){const r=Fx(t);try{const i=await function(o,l){const u=Ee(o),h=Ve.now(),p=l.reduce((C,b)=>C.add(b.key),je());let g,w;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=Ir(),_=je();return u.cs.getEntries(C,p).next(F=>{b=F,b.forEach((I,B)=>{B.isValidDocument()||(_=_.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,b)).next(F=>{g=F;const I=[];for(const B of l){const k=Jj(B,g.get(B.key).overlayedDocument);k!=null&&I.push(new Hs(B.key,k,JS(k.value.mapValue),Rn.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,I,l)}).next(F=>{w=F;const I=F.applyToLocalDocumentSet(g,_);return u.documentOverlayCache.saveOverlays(C,F.batchId,I)})}).then(()=>({batchId:w.batchId,changes:uk(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new gt(De)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Ao(r,i.changes),await gc(r.remoteStore)}catch(i){const s=Cx(i,"Failed to persist write");n.reject(s)}}async function hU(t,e){const n=Ee(t);try{const r=await qM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Te(o.va):i.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await Ao(n,r,e)}catch(r){await so(r)}}function Sb(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=Ee(o);u.onlineState=l;let h=!1;u.queries.forEach((p,g)=>{for(const w of g.j_)w.Z_(l)&&(h=!0)}),h&&Ix(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TO(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new gt(pe.comparator);o=o.insert(s,Dt.newNoDocument(s,Se.min()));const l=je().add(s),u=new Dd(Se.min(),new Map,new gt(De),o,l);await hU(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Nx(r)}else await ec(r.localStore,e,!1).then(()=>rc(r,e,n)).catch(so)}async function SO(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await GM(n.localStore,e);Ux(n,r,null),kx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ao(n,i)}catch(i){await so(i)}}async function kO(t,e,n){const r=Ee(t);try{const i=await function(o,l){const u=Ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(Te(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);Ux(r,e,n),kx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ao(r,i)}catch(i){await so(i)}}function kx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ux(t,e,n){const r=Ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function rc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fU(t,r)})}function fU(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(tc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Nx(t))}function cw(t,e,n){for(const r of n)r instanceof cU?(t.La.addReference(r.key,e),UO(t,r)):r instanceof uU?(re("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fU(t,r.key)):be()}function UO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(r),Nx(t))}function Nx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new pe(it.fromString(e)),r=t.qa.next();t.Na.set(r,new xO(n)),t.Oa=t.Oa.insert(n,r),Dm(t.remoteStore,new _s(kr(Ld(n.path)),r,"TargetPurposeLimboResolution",fr.oe))}}async function Ao(t,e,n){const r=Ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=yx.Wi(u.targetId,h);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const p=Ee(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>W.forEach(h,w=>W.forEach(w.$i,C=>p.persistence.referenceDelegate.addReference(g,w.targetId,C)).next(()=>W.forEach(w.Ui,C=>p.persistence.referenceDelegate.removeReference(g,w.targetId,C)))))}catch(g){if(!ao(g))throw g;re("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const w=g.targetId;if(!g.fromCache){const C=p.os.get(w),b=C.snapshotVersion,_=C.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(w,_)}}}(r.localStore,s))}async function NO(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=await Zk(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new ce(te.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ao(n,r.hs)}}function FO(t,e){const n=Ee(t),r=n.Na.get(e);if(r&&r.va)return je().add(r.key);{let i=je();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}async function QO(t,e){const n=Ee(t),r=await aw(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&cw(n,e.targetId,i.wa),i}async function PO(t,e){const n=Ee(t);return Yk(n.localStore,e).then(r=>Ao(n,r))}async function LO(t,e,n,r){const i=Ee(t),s=await function(l,u){const h=Ee(l),p=Ee(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Mn(g,u).next(w=>w?h.localDocuments.getDocuments(g,w):W.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await gc(i.remoteStore):n==="acknowledged"||n==="rejected"?(Ux(i,e,r||null),kx(i,e),function(l,u){Ee(Ee(l).mutationQueue).On(u)}(i.localStore,e)):be(),await Ao(i,s)):re("SyncEngine","Cannot apply mutation batch with id: "+e)}async function RO(t,e){const n=Ee(t);if(jm(n),Fx(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await kb(n,r.toArray());n.Qa=!0,await Aw(n.remoteStore,!0);for(const s of i)Dm(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(rc(n,o),ec(n.localStore,o,!0))),tc(n.remoteStore,o)}),await i,await kb(n,r),function(o){const l=Ee(o);l.Na.forEach((u,h)=>{tc(l.remoteStore,h)}),l.La.pr(),l.Na=new Map,l.Oa=new gt(pe.comparator)}(n),n.Qa=!1,await Aw(n.remoteStore,!1)}}async function kb(t,e,n){const r=Ee(t),i=[],s=[];for(const o of e){let l;const u=r.Ma.get(o);if(u&&u.length!==0){l=await Rp(r.localStore,kr(u[0]));for(const h of u){const p=r.Fa.get(h),g=await QO(r,p);g.snapshot&&s.push(g.snapshot)}}else{const h=await Xk(r.localStore,o);l=await Rp(r.localStore,h),await Sx(r,pU(h),o,!1,l.resumeToken)}i.push(l)}return r.Ca.d_(s),i}function pU(t){return sk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function DO(t){return function(n){return Ee(Ee(n).persistence).Qi()}(Ee(t).localStore)}async function jO(t,e,n,r){const i=Ee(t);if(i.Qa)return void re("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Yk(i.localStore,Ak(s[0])),l=Dd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",jt.EMPTY_BYTE_STRING);await Ao(i,o,l);break}case"rejected":await ec(i.localStore,e,!0),rc(i,e,r);break;default:be()}}async function MO(t,e,n){const r=jm(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){re("SyncEngine","Adding an already active target "+i);continue}const s=await Xk(r.localStore,i),o=await Rp(r.localStore,s);await Sx(r,pU(s),o.targetId,!1,o.resumeToken),Dm(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await ec(r.localStore,i,!1).then(()=>{tc(r.remoteStore,i),rc(r,i)}).catch(so)}}function jm(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TO.bind(null,e),e.Ca.d_=gO.bind(null,e.eventManager),e.Ca.$a=yO.bind(null,e.eventManager),e}function Fx(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kO.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $k(this.persistence,new Wk,e.initialUser,this.serializer)}Ga(e){return new Gk(Pm.Zr,this.serializer)}Wa(e){return new tU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class mU extends gd{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Fx(this.Ja.syncEngine),await gc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return $k(this.persistence,new Wk,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new TM(r,e.asyncQueue,n)}Ha(e,n){const r=new oj(n,this.persistence);return new aj(e.asyncQueue,r)}Ga(e){const n=qk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new gx(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,nU(),Of(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new tU}}class OO extends mU{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof l0&&(this.sharedClientState.syncEngine={no:LO.bind(null,n),ro:jO.bind(null,n),io:MO.bind(null,n),Qi:DO.bind(null,n),eo:PO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await RO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=nU();if(!l0.D(n))throw new ce(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new l0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class yd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NO.bind(null,this.syncEngine),await Aw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mO}()}createDatastore(e){const n=Lm(e.databaseInfo.databaseId),r=function(s){return new YM(s)}(e.databaseInfo);return function(s,o,l,u){return new nO(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new iO(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Sb(this.syncEngine,n,0),function(){return Cb.D()?new Cb:new ZM}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const g=new _O(i,s,o,l,u,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ee(i);re("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Md(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}yd.provider={build:()=>new yd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nn.UNAUTHENTICATED,this.clientId=ex.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function u0(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Zk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ub(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VO(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bb(e.remoteStore,i)),t._onlineComponents=e}async function VO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await u0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ql("Error using user provided cache. Falling back to memory cache: "+n),await u0(t,new gd)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await u0(t,new gd);return t._offlineComponents}async function gU(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await Ub(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await Ub(t,new yd))),t._onlineComponents}function KO(t){return gU(t).then(e=>e.syncEngine)}async function Op(t){const e=await gU(t),n=e.eventManager;return n.onListen=BO.bind(null,e.syncEngine),n.onUnlisten=bO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EO.bind(null,e.syncEngine),n}function zO(t,e,n={}){const r=new Ki;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const p=new Qx({next:w=>{p.Za(),o.enqueueAndForget(()=>Ex(s,g));const C=w.docs.has(l);!C&&w.fromCache?h.reject(new ce(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&u&&u.source==="server"?h.reject(new ce(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Tx(Ld(l.path),p,{includeMetadataChanges:!0,_a:!0});return bx(s,g)}(await Op(t),t.asyncQueue,e,n,r)),r.promise}function GO(t,e,n={}){const r=new Ki;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const p=new Qx({next:w=>{p.Za(),o.enqueueAndForget(()=>Ex(s,g)),w.fromCache&&u.source==="server"?h.reject(new ce(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Tx(l,p,{includeMetadataChanges:!0,_a:!0});return bx(s,g)}(await Op(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t,e,n){if(!n)throw new ce(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vU(t,e,n,r){if(e===!0&&r===!0)throw new ce(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fb(t){if(!pe.isDocumentKey(t))throw new ce(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qb(t){if(pe.isDocumentKey(t))throw new ce(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(t);throw new ce(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Px{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pb(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PS;switch(r.type){case"firstParty":return new YD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nb.get(n);r&&(re("ComponentProvider","Removing Datastore"),Nb.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class _n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class Ts extends Wi{constructor(e,n,r){super(e,n,Ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new pe(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function wn(t,e,...n){if(t=nt(t),wU("collection","path",e),t instanceof Px){const r=it.fromString(e,...n);return Qb(r),new Ts(t,null,r)}{if(!(t instanceof _n||t instanceof Ts))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return Qb(r),new Ts(t.firestore,null,r)}}function $e(t,e,...n){if(t=nt(t),arguments.length===1&&(e=ex.newId()),wU("doc","path",e),t instanceof Px){const r=it.fromString(e,...n);return Fb(r),new _n(t,null,new pe(r))}{if(!(t instanceof _n||t instanceof Ts))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return Fb(r),new _n(t.firestore,t instanceof Ts?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rU(this,"async_queue_retry"),this.Vu=()=>{const r=Of();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ki;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ao(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw qt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Bx.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Rb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Gi extends Px{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Lb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lb(e),this._firestoreClient=void 0,await e}}}function xU(t,e,n){const r=io(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(iA(s,e))return i;throw new ce(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Od(t){if(t._terminated)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qO(t),t._firestoreClient}function qO(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,p){return new Tj(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,yU(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new HO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pA(jt.fromBase64String(e))}catch(n){throw new ce(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pA(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=/^__.*__$/;class $O{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new mc(e,this.data,n,this.fieldTransforms)}}class _U{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Vm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BU(this.Cu)&&WO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ZO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lm(e)}Qu(e,n,r,i=!1){return new Vm({Cu:e,methodName:n,qu:r,path:Tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Km(t){const e=t._freezeSettings(),n=Lm(t._databaseId);return new ZO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CU(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);jx("Data must be an object, but it was:",o,r);const l=EU(r,o);let u,h;if(s.merge)u=new pr(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const w=uw(e,g,n);if(!o.contains(w))throw new ce(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);TU(p,w)||p.push(w)}u=new pr(p),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new $O(new Ln(l),u,h)}class zm extends SA{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zm}}function bU(t,e,n){return new Vm({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lx extends SA{_toFieldTransform(e){return new km(e.path,new Xl)}isEqual(e){return e instanceof Lx}}class Rx extends SA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=bU(this,e,!0),r=this.Ku.map(s=>kA(s,n)),i=new cA(r);return new km(e.path,i)}isEqual(e){return e instanceof Rx&&iA(this.Ku,e.Ku)}}class Dx extends SA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=bU(this,e,!0),r=this.Ku.map(s=>kA(s,n)),i=new uA(r);return new km(e.path,i)}isEqual(e){return e instanceof Dx&&iA(this.Ku,e.Ku)}}function JO(t,e,n,r){const i=t.Qu(1,e,n);jx("Data must be an object, but it was:",i,r);const s=[],o=Ln.empty();IA(r,(u,h)=>{const p=Mx(e,u,n);h=nt(h);const g=i.Nu(p);if(h instanceof zm)s.push(p);else{const w=kA(h,g);w!=null&&(s.push(p),o.set(p,w))}});const l=new pr(s);return new _U(o,l,i.fieldTransforms)}function XO(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[uw(e,r,n)],u=[i];if(s.length%2!=0)throw new ce(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)l.push(uw(e,s[w])),u.push(s[w+1]);const h=[],p=Ln.empty();for(let w=l.length-1;w>=0;--w)if(!TU(h,l[w])){const C=l[w];let b=u[w];b=nt(b);const _=o.Nu(C);if(b instanceof zm)h.push(C);else{const F=kA(b,_);F!=null&&(h.push(C),p.set(C,F))}}const g=new pr(h);return new _U(p,g,o.fieldTransforms)}function YO(t,e,n,r=!1){return kA(n,t.Qu(r?4:3,e))}function kA(t,e){if(IU(t=nt(t)))return jx("Unsupported field value:",e,t),EU(t,e);if(t instanceof SA)return function(r,i){if(!BU(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=kA(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ve.fromDate(r);return{timestampValue:Yl(i.serializer,s)}}if(r instanceof Ve){const s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yl(i.serializer,s)}}if(r instanceof Om)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pA)return{bytesValue:Ck(i.serializer,r._byteString)};if(r instanceof _n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Ax(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Mm(r)}`)}(t,e)}function EU(t,e){const n={};return qS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):IA(t,(r,i)=>{const s=kA(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Om||t instanceof pA||t instanceof _n||t instanceof SA||t instanceof Hm)}function jx(t,e,n){if(!IU(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Mm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function uw(t,e,n){if((e=nt(e))instanceof Hd)return e._internalPath;if(typeof e=="string")return Mx(t,e);throw Hp("Field path arguments must be of type string or ",t,!1,void 0,n)}const eH=new RegExp("[~\\*/\\[\\]]");function Mx(t,e,n){if(e.search(eH)>=0)throw Hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hd(...e.split("."))._internalPath}catch{throw Hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ce(te.INVALID_ARGUMENT,l+t+u)}function TU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tH extends SU{data(){return super.data()}}function Gm(t,e){return typeof e=="string"?Mx(t,e):e instanceof Hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ox{}class qm extends Ox{}function Vd(t,e,...n){let r=[];e instanceof Ox&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Wm).length,l=s.filter(u=>u instanceof Kd).length;if(o>1||o>0&&l>0)throw new ce(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Kd extends qm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kd(e,n,r)}_apply(e){const n=this._parse(e);return NU(e._query,n),new Wi(e.firestore,e.converter,Xy(e._query,n))}_parse(e){const n=Km(e.firestore);return function(s,o,l,u,h,p,g){let w;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ce(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){jb(g,p);const C=[];for(const b of g)C.push(Db(u,s,b));w={arrayValue:{values:C}}}else w=Db(u,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||jb(g,p),w=YO(l,o,g,p==="in"||p==="not-in");return Ze.create(h,p,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Hx(t,e,n){const r=e,i=Gm("where",t);return Kd._create(i,r,n)}class Wm extends Ox{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ot.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)NU(o,u),o=Xy(o,u)}(e._query,n),new Wi(e.firestore,e.converter,Xy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $m extends qm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $m(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pd(s,o)}(e._query,this._field,this._direction);return new Wi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new pc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Vx(t,e="asc"){const n=e,r=Gm("orderBy",t);return $m._create(r,n)}class Zm extends qm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Zm(e,n,r)}_apply(e){return new Wi(e.firestore,e.converter,Up(e._query,this._limit,this._limitType))}}function UU(t){return Zm._create("limit",t,"F")}function Db(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new ce(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ak(e)&&n.indexOf("/")!==-1)throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!pe.isDocumentKey(r))throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hd(t,new pe(r))}if(n instanceof _n)return hd(t,n._key);throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mm(n)}.`)}function jb(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NU(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class FU{convertValue(e,n="none"){switch(AA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return IA(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Et(o.doubleValue));return new Hm(s)}convertGeoPoint(e){return new Om(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){const n=Ls(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Te(Qk(r));const i=new $a(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(n)||qt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kx extends SU{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pu extends Kx{data(e={}){return super.data(e)}}class zx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new El(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pu(this._firestore,this._userDataWriter,r.key,r,new El(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Pu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new El(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Pu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new El(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:nH(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t){t=wr(t,_n);const e=wr(t.firestore,Gi);return zO(Od(e),t._key).then(n=>PU(e,t,n))}class Gx extends FU{constructor(e){super(),this.firestore=e}convertBytes(e){return new pA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function Do(t){t=wr(t,Wi);const e=wr(t.firestore,Gi),n=Od(e),r=new Gx(e);return kU(t._query),GO(n,t._query).then(i=>new zx(e,r,t,i))}function Zn(t,e,n){t=wr(t,_n);const r=wr(t.firestore,Gi),i=QU(t.converter,e,n);return zd(r,[CU(Km(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rn.none())])}function mA(t,e,n,...r){t=wr(t,_n);const i=wr(t.firestore,Gi),s=Km(i);let o;return o=typeof(e=nt(e))=="string"||e instanceof Hd?XO(s,"updateDoc",t._key,e,n,r):JO(s,"updateDoc",t._key,e),zd(i,[o.toMutation(t._key,Rn.exists(!0))])}function Jm(t){return zd(wr(t.firestore,Gi),[new Nm(t._key,Rn.none())])}function ic(t,e){const n=wr(t.firestore,Gi),r=$e(t),i=QU(t.converter,e);return zd(n,[CU(Km(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}function Bs(t,...e){var n,r,i;t=nt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Rb(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Rb(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,h,p;if(t instanceof _n)h=wr(t.firestore,Gi),p=Ld(t._key.path),u={next:g=>{e[o]&&e[o](PU(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=wr(t,Wi);h=wr(g.firestore,Gi),p=g._query;const w=new Gx(h);u={next:C=>{e[o]&&e[o](new zx(h,w,g,C))},error:e[o+1],complete:e[o+2]},kU(t._query)}return function(w,C,b,_){const F=new Qx(_),I=new Tx(C,F,b);return w.asyncQueue.enqueueAndForget(async()=>bx(await Op(w),I)),()=>{F.Za(),w.asyncQueue.enqueueAndForget(async()=>Ex(await Op(w),I))}}(Od(h),p,l,u)}function zd(t,e){return function(r,i){const s=new Ki;return r.asyncQueue.enqueueAndForget(async()=>IO(await KO(r),i,s)),s.promise}(Od(t),e)}function PU(t,e,n){const r=n.docs.get(e._key),i=new Gx(t);return new Kx(t,i,e._key,r,new El(n.hasPendingWrites,n.fromCache),e.converter)}class rH{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=RU(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function LU(t){return new rH(t)}class iH{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=yd.provider,this._offlineComponentProvider={build:n=>new mU(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class sH{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=yd.provider,this._offlineComponentProvider={build:n=>new OO(n,e==null?void 0:e.cacheSizeBytes)}}}function RU(t){return new iH(void 0)}function DU(){return new sH}function Vp(){return new Lx("serverTimestamp")}function jU(...t){return new Rx("arrayUnion",t)}function MU(...t){return new Dx("arrayRemove",t)}(function(e,n=!0){(function(i){fc=i})(EA),Yr(new Nr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Gi(new JD(r.getProvider("auth-internal")),new tj(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ce(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Dn(UC,"4.7.3",e),Dn(UC,"4.7.3","esm2017")})();const Mb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:FU,Bytes:pA,CollectionReference:Ts,DocumentReference:_n,DocumentSnapshot:Kx,FieldPath:Hd,FieldValue:SA,Firestore:Gi,FirestoreError:ce,GeoPoint:Om,Query:Wi,QueryCompositeFilterConstraint:Wm,QueryConstraint:qm,QueryDocumentSnapshot:Pu,QueryFieldFilterConstraint:Kd,QueryLimitConstraint:Zm,QueryOrderByConstraint:$m,QuerySnapshot:zx,SnapshotMetadata:El,Timestamp:Ve,VectorValue:Hm,_AutoId:ex,_ByteString:jt,_DatabaseId:$a,_DocumentKey:pe,_EmptyAuthCredentialsProvider:PS,_FieldPath:Tt,_cast:wr,_logWarn:ql,_validateIsNotUsedTogether:vU,addDoc:ic,arrayRemove:MU,arrayUnion:jU,collection:wn,deleteDoc:Jm,doc:$e,ensureFirestoreConfigured:Od,executeWrite:zd,getDoc:mi,getDocs:Do,initializeFirestore:xU,limit:UU,onSnapshot:Bs,orderBy:Vx,persistentLocalCache:LU,persistentMultipleTabManager:DU,persistentSingleTabManager:RU,query:Vd,serverTimestamp:Vp,setDoc:Zn,updateDoc:mA,where:Hx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH="type.googleapis.com/google.protobuf.Int64Value",oH="type.googleapis.com/google.protobuf.UInt64Value";function OU(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function dw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>dw(e));if(typeof t=="function"||typeof t=="object")return OU(t,e=>dw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Kp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case aH:case oH:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Kp(e)):typeof t=="function"||typeof t=="object"?OU(t,e=>Kp(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dl extends ni{constructor(e,n,r){super(`${qx}/${e}`,n||""),this.details=r}}function AH(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function lH(t,e){let n=AH(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!Ob[o])return new Dl("internal","internal");n=Ob[o],r=o}const l=s.message;typeof l=="string"&&(r=l),i=s.details,i!==void 0&&(i=Kp(i))}}catch{}return n==="ok"?null:new Dl(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="us-central1";function uH(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Dl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class dH{constructor(e,n,r,i,s=hw,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new cH(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=hw}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function hH(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function fH(t,e,n){return r=>mH(t,e,r,{})}async function pH(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function mH(t,e,n,r){const i=t._url(e);return gH(t,i,n,r)}async function gH(t,e,n,r){n=dw(n);const i={data:n},s={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const l=r.timeout||7e4,u=uH(l),h=await Promise.race([pH(e,i,s,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!h)throw new Dl("cancelled","Firebase Functions instance was deleted.");const p=lH(h.status,h.json);if(p)throw p;if(!h.json)throw new Dl("internal","Response is not valid JSON object.");let g=h.json.data;if(typeof g>"u"&&(g=h.json.result),typeof g>"u")throw new Dl("internal","Response is missing data field.");return{data:Kp(g)}}const Hb="@firebase/functions",Vb="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="auth-internal",wH="app-check-internal",vH="messaging-internal";function xH(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(yH),l=r.getProvider(vH),u=r.getProvider(wH);return new dH(s,o,l,u,i,t)};Yr(new Nr(qx,n,"PUBLIC").setMultipleInstances(!0)),Dn(Hb,Vb,e),Dn(Hb,Vb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t=xm(),e=hw){const r=io(nt(t),qx).getImmediate({identifier:e}),i=L1("functions");return i&&_H(r,...i),r}function _H(t,e,n){hH(nt(t),e,n)}function br(t,e,n){return fH(nt(t),e)}xH(fetch.bind(self));var BH="firebase",CH="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn(BH,CH,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU="firebasestorage.googleapis.com",VU="storageBucket",bH=2*60*1e3,EH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends ni{constructor(e,n,r=0){super(d0(e),`Firebase Storage: ${n} (${d0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mt||(Mt={}));function d0(t){return"storage/"+t}function Wx(){const t="An unknown error occurred, please check the error payload for server response.";return new Ot(Mt.UNKNOWN,t)}function IH(t){return new Ot(Mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TH(t){return new Ot(Mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Mt.UNAUTHENTICATED,t)}function kH(){return new Ot(Mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UH(t){return new Ot(Mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function NH(){return new Ot(Mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FH(){return new Ot(Mt.CANCELED,"User canceled the upload/download.")}function QH(t){return new Ot(Mt.INVALID_URL,"Invalid URL '"+t+"'.")}function PH(t){return new Ot(Mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function LH(){return new Ot(Mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VU+"' property when initializing the app?")}function RH(){return new Ot(Mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function DH(){return new Ot(Mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jH(t){return new Ot(Mt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fw(t){return new Ot(Mt.INVALID_ARGUMENT,t)}function KU(){return new Ot(Mt.APP_DELETED,"The Firebase app was deleted.")}function MH(t){return new Ot(Mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lu(t,e){return new Ot(Mt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $c(t){throw new Ot(Mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tr.makeFromUrl(e,n)}catch{return new Tr(e,"")}if(r.path==="")return r;throw PH(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function h(O){O.path_=decodeURIComponent(O.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${g}/${p}/b/${i}/o${w}`,"i"),b={bucket:1,path:3},_=n===HU?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",I=new RegExp(`^https?://${_}/${i}/${F}`,"i"),k=[{regex:l,indices:u,postModify:s},{regex:C,indices:b,postModify:h},{regex:I,indices:{bucket:1,path:2},postModify:h}];for(let O=0;O<k.length;O++){const V=k[O],j=V.regex.exec(e);if(j){const T=j[V.indices.bucket];let E=j[V.indices.path];E||(E=""),r=new Tr(T,E),V.postModify(r);break}}if(r==null)throw QH(e);return r}}class OH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let h=!1;function p(...F){h||(h=!0,e.apply(null,F))}function g(F){i=setTimeout(()=>{i=null,t(C,u())},F)}function w(){s&&clearTimeout(s)}function C(F,...I){if(h){w();return}if(F){w(),p.call(null,F,...I);return}if(u()||o){w(),p.call(null,F,...I);return}r<64&&(r*=2);let k;l===1?(l=2,k=0):k=(r+Math.random())*1e3,g(k)}let b=!1;function _(F){b||(b=!0,w(),!h&&(i!==null?(F||(l=2),clearTimeout(i),g(0)):F||(l=1)))}return g(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function VH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(t){return t!==void 0}function zH(t){return typeof t=="object"&&!Array.isArray(t)}function $x(t){return typeof t=="string"||t instanceof String}function Kb(t){return Zx()&&t instanceof Blob}function Zx(){return typeof Blob<"u"}function zb(t,e,n,r){if(r<e)throw fw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function zU(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Zo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zo||(Zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GH(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(e,n,r,i,s,o,l,u,h,p,g,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,b)=>{this.resolve_=C,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Mh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Zo.NO_ERROR,u=s.getStatus();if(!l||GH(u,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Zo.ABORT;r(!1,new Mh(!1,null,p));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new Mh(h,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());KH(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=Wx();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?KU():FH();o(u)}else{const u=NH();o(u)}};this.canceled_?n(!1,new Mh(!1,null,!0)):this.backoffId_=HH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function WH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $H(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ZH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function XH(t,e,n,r,i,s,o=!0){const l=zU(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return ZH(h,e),WH(h,n),$H(h,s),JH(h,r),new qH(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eV(...t){const e=YH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Zx())return new Blob(t);throw new Ot(Mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){if(typeof atob>"u")throw jH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class h0{constructor(e,n){this.data=e,this.contentType=n||null}}function rV(t,e){switch(t){case ji.RAW:return new h0(GU(e));case ji.BASE64:case ji.BASE64URL:return new h0(qU(t,e));case ji.DATA_URL:return new h0(sV(e),aV(e))}throw Wx()}function GU(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function iV(t){let e;try{e=decodeURIComponent(t)}catch{throw Lu(ji.DATA_URL,"Malformed data URL.")}return GU(e)}function qU(t,e){switch(t){case ji.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Lu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ji.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Lu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=nV(e)}catch(i){throw i.message.includes("polyfill")?i:Lu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class WU{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Lu(ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=oV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function sV(t){const e=new WU(t);return e.base64?qU(ji.BASE64,e.rest):iV(e.rest)}function aV(t){return new WU(t).contentType}function oV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){let r=0,i="";Kb(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Kb(this.data_)){const r=this.data_,i=tV(r,e,n);return i===null?null:new ba(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ba(r,!0)}}static getBlob(...e){if(Zx()){const n=e.map(r=>r instanceof ba?r.data_:r);return new ba(eV.apply(null,n))}else{const n=e.map(o=>$x(o)?rV(ji.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new ba(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t){let e;try{e=JSON.parse(t)}catch{return null}return zH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lV(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ZU(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t,e){return e}class qn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||cV}}let Oh=null;function uV(t){return!$x(t)||t.length<2?t:ZU(t)}function JU(){if(Oh)return Oh;const t=[];t.push(new qn("bucket")),t.push(new qn("generation")),t.push(new qn("metageneration")),t.push(new qn("name","fullPath",!0));function e(s,o){return uV(o)}const n=new qn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new qn("size");return i.xform=r,t.push(i),t.push(new qn("timeCreated")),t.push(new qn("updated")),t.push(new qn("md5Hash",null,!0)),t.push(new qn("cacheControl",null,!0)),t.push(new qn("contentDisposition",null,!0)),t.push(new qn("contentEncoding",null,!0)),t.push(new qn("contentLanguage",null,!0)),t.push(new qn("contentType",null,!0)),t.push(new qn("metadata","customMetadata",!0)),Oh=t,Oh}function dV(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Tr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function hV(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return dV(r,t),r}function XU(t,e,n){const r=$U(e);return r===null?null:hV(t,r,n)}function fV(t,e,n,r){const i=$U(e);if(i===null||!$x(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const p=t.bucket,g=t.fullPath,w="/b/"+o(p)+"/o/"+o(g),C=Xm(w,n,r),b=zU({alt:"media",token:h});return C+b})[0]}function pV(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Jx{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(t){if(!t)throw Wx()}function mV(t,e){function n(r,i){const s=XU(t,i,e);return YU(s!==null),s}return n}function gV(t,e){function n(r,i){const s=XU(t,i,e);return YU(s!==null),fV(s,i,t.host,t._protocol)}return n}function eN(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=kH():i=SH():n.getStatus()===402?i=TH(t.bucket):n.getStatus()===403?i=UH(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function tN(t){const e=eN(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=IH(t.path)),s.serverResponse=i.serverResponse,s}return n}function yV(t,e,n){const r=e.fullServerUrl(),i=Xm(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Jx(i,s,gV(t,n),o);return l.errorHandler=tN(e),l}function wV(t,e){const n=e.fullServerUrl(),r=Xm(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,h){}const l=new Jx(r,i,o,s);return l.successCodes=[200,204],l.errorHandler=tN(e),l}function vV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=vV(null,e)),r}function _V(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let k="";for(let O=0;O<2;O++)k=k+Math.random().toString().slice(2);return k}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const h=xV(e,r,i),p=pV(h,n),g="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+u+"--",C=ba.getBlob(g,r,w);if(C===null)throw RH();const b={name:h.fullPath},_=Xm(s,t.host,t._protocol),F="POST",I=t.maxUploadRetryTime,B=new Jx(_,F,mV(t,n),I);return B.urlParams=b,B.headers=o,B.body=C.uploadData(),B.errorHandler=eN(e),B}class BV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw $c("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $c("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $c("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $c("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $c("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class CV extends BV{initXhr(){this.xhr_.responseType="text"}}function Xx(){return new CV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this._service=e,n instanceof Tr?this._location=n:this._location=Tr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new gA(e,n)}get root(){const e=new Tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZU(this._location.path)}get storage(){return this._service}get parent(){const e=AV(this._location.path);if(e===null)return null;const n=new Tr(this._location.bucket,e);return new gA(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MH(e)}}function bV(t,e,n){t._throwIfRoot("uploadBytes");const r=_V(t.storage,t._location,JU(),new ba(e,!0),n);return t.storage.makeRequestWithTokens(r,Xx).then(i=>({metadata:i,ref:t}))}function EV(t){t._throwIfRoot("getDownloadURL");const e=yV(t.storage,t._location,JU());return t.storage.makeRequestWithTokens(e,Xx).then(n=>{if(n===null)throw DH();return n})}function IV(t){t._throwIfRoot("deleteObject");const e=wV(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Xx)}function TV(t,e){const n=lV(t._location.path,e),r=new Tr(t._location.bucket,n);return new gA(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){return/^[A-Za-z]+:\/\//.test(t)}function kV(t,e){return new gA(t,e)}function nN(t,e){if(t instanceof Yx){const n=t;if(n._bucket==null)throw LH();const r=new gA(n,n._bucket);return e!=null?nN(r,e):r}else return e!==void 0?TV(t,e):t}function UV(t,e){if(e&&SV(e)){if(t instanceof Yx)return kV(t,e);throw fw("To use ref(service, url), the first argument must be a Storage instance.")}else return nN(t,e)}function Gb(t,e){const n=e==null?void 0:e[VU];return n==null?null:Tr.makeFromBucketSpec(n,t)}function NV(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:hL(i,t.app.options.projectId))}class Yx{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=HU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bH,this._maxUploadRetryTime=EH,this._requests=new Set,i!=null?this._bucket=Tr.makeFromBucketSpec(i,this._host):this._bucket=Gb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tr.makeFromBucketSpec(this._url,e):this._bucket=Gb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gA(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new OH(KU());{const o=XH(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const qb="@firebase/storage",Wb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="storage";function sc(t,e,n){return t=nt(t),bV(t,e,n)}function ac(t){return t=nt(t),EV(t)}function iN(t){return t=nt(t),IV(t)}function Xa(t,e){return t=nt(t),UV(t,e)}function FV(t=xm(),e){t=nt(t);const r=io(t,rN).getImmediate({identifier:e}),i=L1("storage");return i&&QV(r,...i),r}function QV(t,e,n,r={}){NV(t,e,n,r)}function PV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Yx(n,r,i,e,EA)}function LV(){Yr(new Nr(rN,PV,"PUBLIC").setMultipleInstances(!0)),Dn(qb,Wb,""),Dn(qb,Wb,"esm2017")}LV();const sN="@firebase/installations",e_="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1e4,oN=`w:${e_}`,AN="FIS_v2",RV="https://firebaseinstallations.googleapis.com/v1",DV=60*60*1e3,jV="installations",MV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yA=new bA(jV,MV,OV);function lN(t){return t instanceof ni&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN({projectId:t}){return`${RV}/projects/${t}/installations`}function uN(t){return{token:t.token,requestStatus:2,expiresIn:VV(t.expiresIn),creationTime:Date.now()}}async function dN(t,e){const r=(await e.json()).error;return yA.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function HV(t,{refreshToken:e}){const n=hN(t);return n.append("Authorization",KV(e)),n}async function fN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function VV(t){return Number(t.replace("s","000"))}function KV(t){return`${AN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=cN(t),i=hN(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:AN,appId:t.appId,sdkVersion:oN},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await fN(()=>fetch(r,l));if(u.ok){const h=await u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:uN(h.authToken)}}else throw await dN("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=/^[cdef][\w-]{21}$/,pw="";function WV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$V(t);return qV.test(n)?n:pw}catch{return pw}}function $V(t){return GV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new Map;function gN(t,e){const n=Ym(t);yN(n,e),ZV(n,e)}function yN(t,e){const n=mN.get(t);if(n)for(const r of n)r(e)}function ZV(t,e){const n=JV();n&&n.postMessage({key:t,fid:e}),XV()}let Ko=null;function JV(){return!Ko&&"BroadcastChannel"in self&&(Ko=new BroadcastChannel("[Firebase] FID Change"),Ko.onmessage=t=>{yN(t.data.key,t.data.fid)}),Ko}function XV(){mN.size===0&&Ko&&(Ko.close(),Ko=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="firebase-installations-database",e5=1,wA="firebase-installations-store";let f0=null;function t_(){return f0||(f0=vm(YV,e5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wA)}}})),f0}async function zp(t,e){const n=Ym(t),i=(await t_()).transaction(wA,"readwrite"),s=i.objectStore(wA),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&gN(t,e.fid),e}async function wN(t){const e=Ym(t),r=(await t_()).transaction(wA,"readwrite");await r.objectStore(wA).delete(e),await r.done}async function eg(t,e){const n=Ym(t),i=(await t_()).transaction(wA,"readwrite"),s=i.objectStore(wA),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&gN(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(t){let e;const n=await eg(t.appConfig,r=>{const i=t5(r),s=n5(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===pw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function t5(t){const e=t||{fid:WV(),registrationStatus:0};return vN(e)}function n5(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(yA.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=r5(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:i5(t)}:{installationEntry:e}}async function r5(t,e){try{const n=await zV(t,e);return zp(t.appConfig,n)}catch(n){throw lN(n)&&n.customData.serverCode===409?await wN(t.appConfig):await zp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function i5(t){let e=await $b(t.appConfig);for(;e.registrationStatus===1;)await pN(100),e=await $b(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await n_(t);return r||n}return e}function $b(t){return eg(t,e=>{if(!e)throw yA.create("installation-not-found");return vN(e)})}function vN(t){return s5(t)?{fid:t.fid,registrationStatus:0}:t}function s5(t){return t.registrationStatus===1&&t.registrationTime+aN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5({appConfig:t,heartbeatServiceProvider:e},n){const r=o5(t,n),i=HV(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:oN,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await fN(()=>fetch(r,l));if(u.ok){const h=await u.json();return uN(h)}else throw await dN("Generate Auth Token",u)}function o5(t,{fid:e}){return`${cN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r_(t,e=!1){let n;const r=await eg(t.appConfig,s=>{if(!xN(s))throw yA.create("not-registered");const o=s.authToken;if(!e&&c5(o))return s;if(o.requestStatus===1)return n=A5(t,e),s;{if(!navigator.onLine)throw yA.create("app-offline");const l=d5(s);return n=l5(t,l),l}});return n?await n:r.authToken}async function A5(t,e){let n=await Zb(t.appConfig);for(;n.authToken.requestStatus===1;)await pN(100),n=await Zb(t.appConfig);const r=n.authToken;return r.requestStatus===0?r_(t,e):r}function Zb(t){return eg(t,e=>{if(!xN(e))throw yA.create("not-registered");const n=e.authToken;return h5(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function l5(t,e){try{const n=await a5(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await zp(t.appConfig,r),n}catch(n){if(lN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await wN(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await zp(t.appConfig,r)}throw n}}function xN(t){return t!==void 0&&t.registrationStatus===2}function c5(t){return t.requestStatus===2&&!u5(t)}function u5(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+DV}function d5(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function h5(t){return t.requestStatus===1&&t.requestTime+aN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t){const e=t,{installationEntry:n,registrationPromise:r}=await n_(e);return r?r.catch(console.error):r_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e=!1){const n=t;return await m5(n),(await r_(n,e)).token}async function m5(t){const{registrationPromise:e}=await n_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){if(!t||!t.options)throw p0("App Configuration");if(!t.name)throw p0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw p0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function p0(t){return yA.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="installations",y5="installations-internal",w5=t=>{const e=t.getProvider("app").getImmediate(),n=g5(e),r=io(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},v5=t=>{const e=t.getProvider("app").getImmediate(),n=io(e,_N).getImmediate();return{getId:()=>f5(n),getToken:i=>p5(n,i)}};function x5(){Yr(new Nr(_N,w5,"PUBLIC")),Yr(new Nr(y5,v5,"PRIVATE"))}x5();Dn(sN,e_);Dn(sN,e_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="/firebase-messaging-sw.js",B5="/firebase-cloud-messaging-push-scope",BN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",C5="https://fcmregistrations.googleapis.com/v1",CN="google.c.a.c_id",b5="google.c.a.c_l",E5="google.c.a.ts",I5="google.c.a.e";var Jb;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Jb||(Jb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var wd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(wd||(wd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function T5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="fcm_token_details_db",S5=5,Xb="fcm_token_object_Store";async function k5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(m0))return null;let e=null;return(await vm(m0,S5,{upgrade:async(r,i,s,o)=>{var l;if(i<2||!r.objectStoreNames.contains(Xb))return;const u=o.objectStore(Xb),h=await u.index("fcmSenderId").get(t);if(await u.clear(),!!h){if(i===2){const p=h;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:(l=p.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:fs(p.vapidKey)}}}else if(i===3){const p=h;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:fs(p.auth),p256dh:fs(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:fs(p.vapidKey)}}}else if(i===4){const p=h;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:fs(p.auth),p256dh:fs(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:fs(p.vapidKey)}}}}}})).close(),await t0(m0),await t0("fcm_vapid_details_db"),await t0("undefined"),U5(e)?e:null}function U5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5="firebase-messaging-database",F5=1,vd="firebase-messaging-store";let g0=null;function bN(){return g0||(g0=vm(N5,F5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vd)}}})),g0}async function Q5(t){const e=EN(t),r=await(await bN()).transaction(vd).objectStore(vd).get(e);if(r)return r;{const i=await k5(t.appConfig.senderId);if(i)return await i_(t,i),i}}async function i_(t,e){const n=EN(t),i=(await bN()).transaction(vd,"readwrite");return await i.objectStore(vd).put(e,n),await i.done,e}function EN({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},jn=new bA("messaging","Messaging",P5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(t,e){const n=await a_(t),r=IN(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(s_(t.appConfig),i)).json()}catch(o){throw jn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw jn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw jn.create("token-subscribe-no-token");return s.token}async function R5(t,e){const n=await a_(t),r=IN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${s_(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw jn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw jn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw jn.create("token-update-no-token");return s.token}async function D5(t,e){const r={method:"DELETE",headers:await a_(t)};try{const s=await(await fetch(`${s_(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw jn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw jn.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function s_({projectId:t}){return`${C5}/projects/${t}/registrations`}async function a_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function IN({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==BN&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=7*24*60*60*1e3;async function M5(t){const e=await H5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:fs(e.getKey("auth")),p256dh:fs(e.getKey("p256dh"))},r=await Q5(t.firebaseDependencies);if(r){if(V5(r.subscriptionOptions,n))return Date.now()>=r.createTime+j5?O5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await D5(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Yb(t.firebaseDependencies,n)}else return Yb(t.firebaseDependencies,n)}async function O5(t,e){try{const n=await R5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await i_(t.firebaseDependencies,r),n}catch(n){throw n}}async function Yb(t,e){const r={token:await L5(t,e),createTime:Date.now(),subscriptionOptions:e};return await i_(t,r),r.token}async function H5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:T5(e)})}function V5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return K5(e,t),z5(e,t),G5(e,t),e}function K5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function z5(t,e){e.data&&(t.data=e.data)}function G5(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;l&&(t.fcmOptions.link=l);const u=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t){return typeof t=="object"&&!!t&&CN in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){if(!t||!t.options)throw y0("App Configuration Object");if(!t.name)throw y0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw y0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function y0(t){return jn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=W5(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(t){try{t.swRegistration=await navigator.serviceWorker.register(_5,{scope:B5}),t.swRegistration.update().catch(()=>{})}catch(e){throw jn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(t,e){if(!e&&!t.swRegistration&&await Z5(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=BN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(t,e){if(!navigator)throw jn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw jn.create("permission-blocked");return await X5(t,e==null?void 0:e.vapidKey),await J5(t,e==null?void 0:e.serviceWorkerRegistration),M5(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e,n){const r=e3(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[CN],message_name:n[b5],message_time:n[E5],message_device_time:Math.floor(Date.now()/1e3)})}function e3(t){switch(t){case wd.NOTIFICATION_CLICKED:return"notification_open";case wd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===wd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(eE(n)):t.onMessageHandler.next(eE(n)));const r=n.data;q5(r)&&r[I5]==="1"&&await Y5(t,n.messageType,r)}const tE="@firebase/messaging",nE="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=t=>{const e=new $5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>t3(e,n)),e},r3=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>TN(e,r)}};function i3(){Yr(new Nr("messaging",n3,"PUBLIC")),Yr(new Nr("messaging-internal",r3,"PRIVATE")),Dn(tE,nE),Dn(tE,nE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(){try{await M1()}catch{return!1}return typeof window<"u"&&jv()&&vL()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t,e){if(!navigator)throw jn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t=xm()){return SN().then(e=>{if(!e)throw jn.create("unsupported-browser")},e=>{throw jn.create("indexed-db-unsupported")}),io(nt(t),"messaging").getImmediate()}async function o3(t,e){return t=nt(t),TN(t,e)}function rE(t,e){return t=nt(t),s3(t,e)}i3();const A3={apiKey:"AIzaSyCWp0X6bLJBsyYKTjUaVsXBSuVD8KeeEqY",authDomain:"carnival-planner.firebaseapp.com",projectId:"carnival-planner",storageBucket:"carnival-planner.firebasestorage.app",messagingSenderId:"1036340118282",appId:"1:1036340118282:web:809dc12c298ff1b8f2f0f3",measurementId:"G-XC1K69PSVC"},Pn=V1(A3),ka=WD(Pn),ke=xU(Pn,{localCache:LU({tabManager:DU()})},"squad-db"),Ya=FV(Pn);Promise.resolve(!0);console.log("Firestore initialized");let Cs=null;const o_=async()=>{try{return await SN()?(Cs=a3(Pn),console.log("Firebase Messaging initialized"),Cs):(console.log("Firebase Messaging not supported in this browser"),null)}catch(t){return console.log("Error initializing Firebase Messaging:",t),null}},l3=async t=>{try{if(await Notification.requestPermission()!=="granted")return console.log("Notification permission denied"),null;if(Cs||await o_(),!Cs)return null;const n=await o3(Cs,{vapidKey:t});return console.log("FCM Token:",n),n}catch(e){return console.log("Error getting FCM token:",e),null}},c3=t=>{Cs?rE(Cs,t):o_().then(()=>{Cs&&rE(Cs,t)})};o_();const Hh="/assets/carnival-logo-CBA9n7vt.png",w0=[{name:"Sugar Mas (St. Kitts)",date:"2026-01-01"},{name:"St. Croix Carnival",date:"2026-01-03"},{name:"Carnaval Ponceno (Puerto Rico)",date:"2026-02-12"},{name:"Aruba Carnival",date:"2026-02-14"},{name:"Barranquilla Carnival (Colombia)",date:"2026-02-14"},{name:"Martinique Carnival",date:"2026-02-15"},{name:"Rio Carnival (Brazil)",date:"2026-02-15"},{name:"Carnaval De Saint-Martin",date:"2026-02-15"},{name:"Mas Domnik (Dominica)",date:"2026-02-16"},{name:"Carriacou & Petite Martinique",date:"2026-02-16"},{name:"Venezuela Carnival",date:"2026-02-16"},{name:"Trinidad Carnival",date:"2026-02-16"},{name:"Guyana Mashramani",date:"2026-02-23"},{name:"Carnaval De San Pedro (Belize)",date:"2026-02-23"},{name:"Cape Town Carnival (South Africa)",date:"2026-03-21"},{name:"Virgin Gorda Easter Festival",date:"2026-04-05"},{name:"Jamaica Carnival",date:"2026-04-12"},{name:"Tampa Bay Carnival (USA)",date:"2026-04-18"},{name:"St. Maarten Carnival",date:"2026-04-30"},{name:"St. Thomas Carnival (USVI)",date:"2026-05-02"},{name:"Cayman Carnival Batabano",date:"2026-05-09"},{name:"Braccanal (Cayman Islands)",date:"2026-05-13"},{name:"Berlin Carnival (Germany)",date:"2026-05-22"},{name:"Atlanta Caribbean Carnival",date:"2026-05-23"},{name:"Aalborg Karneval (Denmark)",date:"2026-05-23"},{name:"Orlando Carnival",date:"2026-05-24"},{name:"Luton International Carnival (UK)",date:"2026-05-24"},{name:"Guyana Independence",date:"2026-05-26"},{name:"Munich Carnival (Germany)",date:"2026-06-04"},{name:"Bahamas Carnival",date:"2026-06-06"},{name:"South Carolina Carnival",date:"2026-06-11"},{name:"Bermuda Carnival",date:"2026-06-15"},{name:"Hollywood Carnival (USA)",date:"2026-06-20"},{name:"Caymas Carnival (Cayman Islands)",date:"2026-06-20"},{name:"Philadelphia Carnival",date:"2026-06-20"},{name:"Vienna Carnival (Austria)",date:"2026-06-26"},{name:"Vincy Mas (St. Vincent)",date:"2026-07-06"},{name:"Saint Lucia Carnival",date:"2026-07-20"},{name:"Anguilla Summer Festival",date:"2026-07-24"},{name:"Zomercarnaval (Rotterdam)",date:"2026-07-25"},{name:"Toronto Caribbean Carnival (Caribana)",date:"2026-08-01"},{name:"Crop Over (Barbados)",date:"2026-08-03"},{name:"Antigua Carnival",date:"2026-08-03"},{name:"Nevis Culturama Festival",date:"2026-08-04"},{name:"Cariwest (Canada)",date:"2026-08-07"},{name:"Spice Mas (Grenada)",date:"2026-08-10"},{name:"Notting Hill Carnival (London)",date:"2026-08-31"},{name:"New York Carnival (Labor Day)",date:"2026-09-07"},{name:"Japan Caribbean Carnival",date:"2026-09-23"},{name:"Miami Carnival",date:"2026-10-11"},{name:"Tobago Carnival",date:"2026-11-01"}];function kN(t,e){const n=M.useRef(e);M.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const u3=1;function d3(t){return Object.freeze({__version:u3,map:t})}function h3(t,e){return Object.freeze({...t,...e})}const UN=M.createContext(null),NN=UN.Provider;function A_(){const t=M.useContext(UN);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function f3(t){function e(n,r){const{instance:i,context:s}=t(n).current;return M.useImperativeHandle(r,()=>i),n.children==null?null:$f.createElement(NN,{value:s},n.children)}return M.forwardRef(e)}function p3(t){function e(n,r){const[i,s]=M.useState(!1),{instance:o}=t(n,s).current;M.useImperativeHandle(r,()=>o),M.useEffect(function(){i&&o.update()},[o,i,n.children]);const l=o._contentNode;return l?U1.createPortal(n.children,l):null}return M.forwardRef(e)}function m3(t){function e(n,r){const{instance:i}=t(n).current;return M.useImperativeHandle(r,()=>i),null}return M.forwardRef(e)}function FN(t,e){const n=M.useRef();M.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function l_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function g3(t,e){return function(r,i){const s=A_(),o=t(l_(r,s),s);return kN(s.map,r.attribution),FN(o.current,r.eventHandlers),e(o.current,s,r,i),o}}var mw={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(U2,function(n){var r="1.9.4";function i(a){var c,f,m,v;for(f=1,m=arguments.length;f<m;f++){v=arguments[f];for(c in v)a[c]=v[c]}return a}var s=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function o(a,c){var f=Array.prototype.slice;if(a.bind)return a.bind.apply(a,f.call(arguments,1));var m=f.call(arguments,2);return function(){return a.apply(c,m.length?m.concat(f.call(arguments)):arguments)}}var l=0;function u(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,c,f){var m,v,S,H;return H=function(){m=!1,v&&(S.apply(f,v),v=!1)},S=function(){m?v=arguments:(a.apply(f,arguments),setTimeout(H,c),m=!0)},S}function p(a,c,f){var m=c[1],v=c[0],S=m-v;return a===m&&f?a:((a-v)%S+S)%S+v}function g(){return!1}function w(a,c){if(c===!1)return a;var f=Math.pow(10,c===void 0?6:c);return Math.round(a*f)/f}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function b(a){return C(a).split(/\s+/)}function _(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var f in c)a.options[f]=c[f];return a.options}function F(a,c,f){var m=[];for(var v in a)m.push(encodeURIComponent(f?v.toUpperCase():v)+"="+encodeURIComponent(a[v]));return(!c||c.indexOf("?")===-1?"?":"&")+m.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function B(a,c){return a.replace(I,function(f,m){var v=c[m];if(v===void 0)throw new Error("No value provided for variable "+f);return typeof v=="function"&&(v=v(c)),v})}var k=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function O(a,c){for(var f=0;f<a.length;f++)if(a[f]===c)return f;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function j(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var T=0;function E(a){var c=+new Date,f=Math.max(0,16-(c-T));return T=c+f,window.setTimeout(a,f)}var U=window.requestAnimationFrame||j("RequestAnimationFrame")||E,Q=window.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function D(a,c,f){if(f&&U===E)a.call(c);else return U.call(window,o(a,c))}function K(a){a&&Q.call(window,a)}var R={__proto__:null,extend:i,create:s,bind:o,get lastId(){return l},stamp:u,throttle:h,wrapNum:p,falseFn:g,formatNum:w,trim:C,splitWords:b,setOptions:_,getParamString:F,template:B,isArray:k,indexOf:O,emptyImageUrl:V,requestFn:U,cancelFn:Q,requestAnimFrame:D,cancelAnimFrame:K};function Y(){}Y.extend=function(a){var c=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=c.__super__=this.prototype,m=s(f);m.constructor=c,c.prototype=m;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(c[v]=this[v]);return a.statics&&i(c,a.statics),a.includes&&(oe(a.includes),i.apply(null,[m].concat(a.includes))),i(m,a),delete m.statics,delete m.includes,m.options&&(m.options=f.options?s(f.options):{},i(m.options,a.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,H=m._initHooks.length;S<H;S++)m._initHooks[S].call(this)}},c},Y.include=function(a){var c=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},Y.mergeOptions=function(a){return i(this.prototype.options,a),this},Y.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),f=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function oe(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=k(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ae={on:function(a,c,f){if(typeof a=="object")for(var m in a)this._on(m,a[m],c);else{a=b(a);for(var v=0,S=a.length;v<S;v++)this._on(a[v],c,f)}return this},off:function(a,c,f){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var m in a)this._off(m,a[m],c);else{a=b(a);for(var v=arguments.length===1,S=0,H=a.length;S<H;S++)v?this._off(a[S]):this._off(a[S],c,f)}return this},_on:function(a,c,f,m){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,f)===!1){f===this&&(f=void 0);var v={fn:c,ctx:f};m&&(v.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(v)}},_off:function(a,c,f){var m,v,S;if(this._events&&(m=this._events[a],!!m)){if(arguments.length===1){if(this._firingCount)for(v=0,S=m.length;v<S;v++)m[v].fn=g;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var H=this._listens(a,c,f);if(H!==!1){var q=m[H];this._firingCount&&(q.fn=g,this._events[a]=m=m.slice()),m.splice(H,1)}}},fire:function(a,c,f){if(!this.listens(a,f))return this;var m=i({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var v=this._events[a];if(v){this._firingCount=this._firingCount+1||1;for(var S=0,H=v.length;S<H;S++){var q=v[S],J=q.fn;q.once&&this.off(a,J,q.ctx),J.call(q.ctx||this,m)}this._firingCount--}}return f&&this._propagateEvent(m),this},listens:function(a,c,f,m){typeof a!="string"&&console.warn('"string" type argument expected');var v=c;typeof c!="function"&&(m=!!c,v=void 0,f=void 0);var S=this._events&&this._events[a];if(S&&S.length&&this._listens(a,v,f)!==!1)return!0;if(m){for(var H in this._eventParents)if(this._eventParents[H].listens(a,c,f,m))return!0}return!1},_listens:function(a,c,f){if(!this._events)return!1;var m=this._events[a]||[];if(!c)return!!m.length;f===this&&(f=void 0);for(var v=0,S=m.length;v<S;v++)if(m[v].fn===c&&m[v].ctx===f)return v;return!1},once:function(a,c,f){if(typeof a=="object")for(var m in a)this._on(m,a[m],c,!0);else{a=b(a);for(var v=0,S=a.length;v<S;v++)this._on(a[v],c,f,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[u(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[u(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};Ae.addEventListener=Ae.on,Ae.removeEventListener=Ae.clearAllEventListeners=Ae.off,Ae.addOneTimeEventListener=Ae.once,Ae.fireEvent=Ae.fire,Ae.hasEventListeners=Ae.listens;var fe=Y.extend(Ae);function G(a,c,f){this.x=f?Math.round(a):a,this.y=f?Math.round(c):c}var ae=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(a){return this.clone()._add(ee(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ee(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new G(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new G(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(a){a=ee(a);var c=a.x-this.x,f=a.y-this.y;return Math.sqrt(c*c+f*f)},equals:function(a){return a=ee(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ee(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function ee(a,c,f){return a instanceof G?a:k(a)?new G(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new G(a.x,a.y):new G(a,c,f)}function ve(a,c){if(a)for(var f=c?[a,c]:a,m=0,v=f.length;m<v;m++)this.extend(f[m])}ve.prototype={extend:function(a){var c,f;if(!a)return this;if(a instanceof G||typeof a[0]=="number"||"x"in a)c=f=ee(a);else if(a=ue(a),c=a.min,f=a.max,!c||!f)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=f.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(a){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,f;return typeof a[0]=="number"||a instanceof G?a=ee(a):a=ue(a),a instanceof ve?(c=a.min,f=a.max):c=f=a,c.x>=this.min.x&&f.x<=this.max.x&&c.y>=this.min.y&&f.y<=this.max.y},intersects:function(a){a=ue(a);var c=this.min,f=this.max,m=a.min,v=a.max,S=v.x>=c.x&&m.x<=f.x,H=v.y>=c.y&&m.y<=f.y;return S&&H},overlaps:function(a){a=ue(a);var c=this.min,f=this.max,m=a.min,v=a.max,S=v.x>c.x&&m.x<f.x,H=v.y>c.y&&m.y<f.y;return S&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,f=this.max,m=Math.abs(c.x-f.x)*a,v=Math.abs(c.y-f.y)*a;return ue(ee(c.x-m,c.y-v),ee(f.x+m,f.y+v))},equals:function(a){return a?(a=ue(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function ue(a,c){return!a||a instanceof ve?a:new ve(a,c)}function he(a,c){if(a)for(var f=c?[a,c]:a,m=0,v=f.length;m<v;m++)this.extend(f[m])}he.prototype={extend:function(a){var c=this._southWest,f=this._northEast,m,v;if(a instanceof de)m=a,v=a;else if(a instanceof he){if(m=a._southWest,v=a._northEast,!m||!v)return this}else return a?this.extend(se(a)||ge(a)):this;return!c&&!f?(this._southWest=new de(m.lat,m.lng),this._northEast=new de(v.lat,v.lng)):(c.lat=Math.min(m.lat,c.lat),c.lng=Math.min(m.lng,c.lng),f.lat=Math.max(v.lat,f.lat),f.lng=Math.max(v.lng,f.lng)),this},pad:function(a){var c=this._southWest,f=this._northEast,m=Math.abs(c.lat-f.lat)*a,v=Math.abs(c.lng-f.lng)*a;return new he(new de(c.lat-m,c.lng-v),new de(f.lat+m,f.lng+v))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof de||"lat"in a?a=se(a):a=ge(a);var c=this._southWest,f=this._northEast,m,v;return a instanceof he?(m=a.getSouthWest(),v=a.getNorthEast()):m=v=a,m.lat>=c.lat&&v.lat<=f.lat&&m.lng>=c.lng&&v.lng<=f.lng},intersects:function(a){a=ge(a);var c=this._southWest,f=this._northEast,m=a.getSouthWest(),v=a.getNorthEast(),S=v.lat>=c.lat&&m.lat<=f.lat,H=v.lng>=c.lng&&m.lng<=f.lng;return S&&H},overlaps:function(a){a=ge(a);var c=this._southWest,f=this._northEast,m=a.getSouthWest(),v=a.getNorthEast(),S=v.lat>c.lat&&m.lat<f.lat,H=v.lng>c.lng&&m.lng<f.lng;return S&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=ge(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ge(a,c){return a instanceof he?a:new he(a,c)}function de(a,c,f){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,f!==void 0&&(this.alt=+f)}de.prototype={equals:function(a,c){if(!a)return!1;a=se(a);var f=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return f<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return et.distance(this,se(a))},wrap:function(){return et.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,f=c/Math.cos(Math.PI/180*this.lat);return ge([this.lat-c,this.lng-f],[this.lat+c,this.lng+f])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function se(a,c,f){return a instanceof de?a:k(a)&&typeof a[0]!="object"?a.length===3?new de(a[0],a[1],a[2]):a.length===2?new de(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new de(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new de(a,c,f)}var Fe={latLngToPoint:function(a,c){var f=this.projection.project(a),m=this.scale(c);return this.transformation._transform(f,m)},pointToLatLng:function(a,c){var f=this.scale(c),m=this.transformation.untransform(a,f);return this.projection.unproject(m)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,f=this.scale(a),m=this.transformation.transform(c.min,f),v=this.transformation.transform(c.max,f);return new ve(m,v)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?p(a.lng,this.wrapLng,!0):a.lng,f=this.wrapLat?p(a.lat,this.wrapLat,!0):a.lat,m=a.alt;return new de(f,c,m)},wrapLatLngBounds:function(a){var c=a.getCenter(),f=this.wrapLatLng(c),m=c.lat-f.lat,v=c.lng-f.lng;if(m===0&&v===0)return a;var S=a.getSouthWest(),H=a.getNorthEast(),q=new de(S.lat-m,S.lng-v),J=new de(H.lat-m,H.lng-v);return new he(q,J)}},et=i({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var f=Math.PI/180,m=a.lat*f,v=c.lat*f,S=Math.sin((c.lat-a.lat)*f/2),H=Math.sin((c.lng-a.lng)*f/2),q=S*S+Math.cos(m)*Math.cos(v)*H*H,J=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*J}}),vr=6378137,Lt={R:vr,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,f=this.MAX_LATITUDE,m=Math.max(Math.min(f,a.lat),-f),v=Math.sin(m*c);return new G(this.R*a.lng*c,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(a){var c=180/Math.PI;return new de((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=vr*Math.PI;return new ve([-a,-a],[a,a])}()};function On(a,c,f,m){if(k(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=f,this._d=m}On.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new G((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function Cn(a,c,f,m){return new On(a,c,f,m)}var yt=i({},et,{code:"EPSG:3857",projection:Lt,transformation:function(){var a=.5/(Math.PI*Lt.R);return Cn(a,.5,-a,.5)}()}),wt=i({},yt,{code:"EPSG:900913"});function Je(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function en(a,c){var f="",m,v,S,H,q,J;for(m=0,S=a.length;m<S;m++){for(q=a[m],v=0,H=q.length;v<H;v++)J=q[v],f+=(v?"L":"M")+J.x+" "+J.y;f+=c?Ie.svg?"z":"x":""}return f||"M0 0"}var vt=document.documentElement.style,bn="ActiveXObject"in window,Vs=bn&&!document.addEventListener,Ks="msLaunchUri"in navigator&&!("documentMode"in document),zs=ir("webkit"),UA=ir("android"),Gs=ir("android 2")||ir("android 3"),Ji=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),nr=UA&&ir("Google")&&Ji<537&&!("AudioNode"in window),St=!!window.opera,Wt=!Ks&&ir("chrome"),_i=ir("gecko")&&!zs&&!St&&!bn,lo=!Wt&&ir("safari"),Xi=ir("phantom"),co="OTransition"in vt,Bi=navigator.platform.indexOf("Win")===0,rr=bn&&"transition"in vt,qs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Gs,Ws="MozPerspective"in vt,vc=!window.L_DISABLE_3D&&(rr||qs||Ws)&&!co&&!Xi,Ci=typeof orientation<"u"||ir("mobile"),$s=Ci&&zs,Zs=Ci&&qs,uo=!window.PointerEvent&&window.MSPointerEvent,ii=!!(window.PointerEvent||uo),Js="ontouchstart"in window||!!window.TouchEvent,Yi=!window.L_NO_TOUCH&&(Js||ii),Hn=Ci&&St,es=Ci&&_i,Xs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ho=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",g,c),window.removeEventListener("testPassiveEventSupport",g,c)}catch{}return a}(),bi=function(){return!!document.createElement("canvas").getContext}(),ts=!!(document.createElementNS&&Je("svg").createSVGRect),tn=!!ts&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fo=!ts&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Ei=navigator.platform.indexOf("Mac")===0,ns=navigator.platform.indexOf("Linux")===0;function ir(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ie={ie:bn,ielt9:Vs,edge:Ks,webkit:zs,android:UA,android23:Gs,androidStock:nr,opera:St,chrome:Wt,gecko:_i,safari:lo,phantom:Xi,opera12:co,win:Bi,ie3d:rr,webkit3d:qs,gecko3d:Ws,any3d:vc,mobile:Ci,mobileWebkit:$s,mobileWebkit3d:Zs,msPointer:uo,pointer:ii,touch:Yi,touchNative:Js,mobileOpera:Hn,mobileGecko:es,retina:Xs,passiveEvents:ho,canvas:bi,svg:ts,vml:fo,inlineSvg:tn,mac:Ei,linux:ns},si=Ie.msPointer?"MSPointerDown":"pointerdown",po=Ie.msPointer?"MSPointerMove":"pointermove",NA=Ie.msPointer?"MSPointerUp":"pointerup",Vn=Ie.msPointer?"MSPointerCancel":"pointercancel",kt={touchstart:si,touchmove:po,touchend:NA,touchcancel:Vn},En={touchstart:ea,touchmove:Ys,touchend:Ys,touchcancel:Ys},ft={},sr=!1;function mo(a,c,f){return c==="touchstart"&&FA(),En[c]?(f=En[c].bind(this,f),a.addEventListener(kt[c],f,!1),f):(console.warn("wrong event specified:",c),g)}function go(a,c,f){if(!kt[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(kt[c],f,!1)}function st(a){ft[a.pointerId]=a}function yo(a){ft[a.pointerId]&&(ft[a.pointerId]=a)}function wo(a){delete ft[a.pointerId]}function FA(){sr||(document.addEventListener(si,st,!0),document.addEventListener(po,yo,!0),document.addEventListener(NA,wo,!0),document.addEventListener(Vn,wo,!0),sr=!0)}function Ys(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var f in ft)c.touches.push(ft[f]);c.changedTouches=[c],a(c)}}function ea(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Ut(c),Ys(a,c)}function vo(a){var c={},f,m;for(m in a)f=a[m],c[m]=f&&f.bind?f.bind(a):f;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var xo=200;function rs(a,c){a.addEventListener("dblclick",c);var f=0,m;function v(S){if(S.detail!==1){m=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var H=Cc(S);if(!(H.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!H.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var q=Date.now();q-f<=xo?(m++,m===2&&c(vo(S))):m=1,f=q}}}return a.addEventListener("click",v),{dblclick:c,simDblclick:v}}function ai(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var is=P(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ii=P(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),_o=Ii==="webkitTransition"||Ii==="OTransition"?Ii+"End":"transitionend";function Bo(a){return typeof a=="string"?document.getElementById(a):a}function Ti(a,c){var f=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!f||f==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(a,null);f=m?m[c]:null}return f==="auto"?null:f}function Re(a,c,f){var m=document.createElement(a);return m.className=c||"",f&&f.appendChild(m),m}function _e(a){var c=a.parentNode;c&&c.removeChild(a)}function Si(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Lr(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function oi(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function ta(a,c){if(a.classList!==void 0)return a.classList.contains(c);var f=Kn(a);return f.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(f)}function Le(a,c){if(a.classList!==void 0)for(var f=b(c),m=0,v=f.length;m<v;m++)a.classList.add(f[m]);else if(!ta(a,c)){var S=Kn(a);na(a,(S?S+" ":"")+c)}}function ht(a,c){a.classList!==void 0?a.classList.remove(c):na(a,C((" "+Kn(a)+" ").replace(" "+c+" "," ")))}function na(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function Kn(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function xt(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&ss(a,c)}function ss(a,c){var f=!1,m="DXImageTransform.Microsoft.Alpha";try{f=a.filters.item(m)}catch{if(c===1)return}c=Math.round(c*100),f?(f.Enabled=c!==100,f.Opacity=c):a.style.filter+=" progid:"+m+"(opacity="+c+")"}function P(a){for(var c=document.documentElement.style,f=0;f<a.length;f++)if(a[f]in c)return a[f];return!1}function $(a,c,f){var m=c||new G(0,0);a.style[is]=(Ie.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(f?" scale("+f+")":"")}function Z(a,c){a._leaflet_pos=c,Ie.any3d?$(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function ye(a){return a._leaflet_pos||new G(0,0)}var Qe,Ke,Me;if("onselectstart"in document)Qe=function(){Ue(window,"selectstart",Ut)},Ke=function(){lt(window,"selectstart",Ut)};else{var Ht=P(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qe=function(){if(Ht){var a=document.documentElement.style;Me=a[Ht],a[Ht]="none"}},Ke=function(){Ht&&(document.documentElement.style[Ht]=Me,Me=void 0)}}function ln(){Ue(window,"dragstart",Ut)}function ra(){lt(window,"dragstart",Ut)}var ia,Co;function Ai(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(In(),ia=a,Co=a.style.outlineStyle,a.style.outlineStyle="none",Ue(window,"keydown",In))}function In(){ia&&(ia.style.outlineStyle=Co,ia=void 0,Co=void 0,lt(window,"keydown",In))}function xc(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function QA(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var Zd={__proto__:null,TRANSFORM:is,TRANSITION:Ii,TRANSITION_END:_o,get:Bo,getStyle:Ti,create:Re,remove:_e,empty:Si,toFront:Lr,toBack:oi,hasClass:ta,addClass:Le,removeClass:ht,setClass:na,getClass:Kn,setOpacity:xt,testProp:P,setTransform:$,setPosition:Z,getPosition:ye,get disableTextSelection(){return Qe},get enableTextSelection(){return Ke},disableImageDrag:ln,enableImageDrag:ra,preventOutline:Ai,restoreOutline:In,getSizedParentNode:xc,getScale:QA};function Ue(a,c,f,m){if(c&&typeof c=="object")for(var v in c)_c(a,v,c[v],f);else{c=b(c);for(var S=0,H=c.length;S<H;S++)_c(a,c[S],f,m)}return this}var Rr="_leaflet_events";function lt(a,c,f,m){if(arguments.length===1)Jd(a),delete a[Rr];else if(c&&typeof c=="object")for(var v in c)Bc(a,v,c[v],f);else if(c=b(c),arguments.length===2)Jd(a,function(q){return O(c,q)!==-1});else for(var S=0,H=c.length;S<H;S++)Bc(a,c[S],f,m);return this}function Jd(a,c){for(var f in a[Rr]){var m=f.split(/\d/)[0];(!c||c(m))&&Bc(a,m,null,null,f)}}var Dr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _c(a,c,f,m){var v=c+u(f)+(m?"_"+u(m):"");if(a[Rr]&&a[Rr][v])return this;var S=function(q){return f.call(m||a,q||window.event)},H=S;!Ie.touchNative&&Ie.pointer&&c.indexOf("touch")===0?S=mo(a,c,S):Ie.touch&&c==="dblclick"?S=rs(a,S):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(Dr[c]||c,S,Ie.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(S=function(q){q=q||window.event,bc(a,q)&&H(q)},a.addEventListener(Dr[c],S,!1)):a.addEventListener(c,H,!1):a.attachEvent("on"+c,S),a[Rr]=a[Rr]||{},a[Rr][v]=S}function Bc(a,c,f,m,v){v=v||c+u(f)+(m?"_"+u(m):"");var S=a[Rr]&&a[Rr][v];if(!S)return this;!Ie.touchNative&&Ie.pointer&&c.indexOf("touch")===0?go(a,c,S):Ie.touch&&c==="dblclick"?ai(a,S):"removeEventListener"in a?a.removeEventListener(Dr[c]||c,S,!1):a.detachEvent("on"+c,S),a[Rr][v]=null}function jr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function sa(a){return _c(a,"wheel",jr),this}function aa(a){return Ue(a,"mousedown touchstart dblclick contextmenu",jr),a._leaflet_disable_click=!0,this}function Ut(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function xr(a){return Ut(a),jr(a),this}function Cc(a){if(a.composedPath)return a.composedPath();for(var c=[],f=a.target;f;)c.push(f),f=f.parentNode;return c}function PA(a,c){if(!c)return new G(a.clientX,a.clientY);var f=QA(c),m=f.boundingClientRect;return new G((a.clientX-m.left)/f.x-c.clientLeft,(a.clientY-m.top)/f.y-c.clientTop)}var Ct=Ie.linux&&Ie.chrome?window.devicePixelRatio:Ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xd(a){return Ie.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Ct:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function bc(a,c){var f=c.relatedTarget;if(!f)return!0;try{for(;f&&f!==a;)f=f.parentNode}catch{return!1}return f!==a}var Yd={__proto__:null,on:Ue,off:lt,stopPropagation:jr,disableScrollPropagation:sa,disableClickPropagation:aa,preventDefault:Ut,stop:xr,getPropagationPath:Cc,getMousePosition:PA,getWheelDelta:Xd,isExternalTarget:bc,addListener:Ue,removeListener:lt},Ec=fe.extend({run:function(a,c,f,m){this.stop(),this._el=a,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=ye(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,f=this._duration*1e3;c<f?this._runFrame(this._easeOut(c/f),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var f=this._startPos.add(this._offset.multiplyBy(a));c&&f._round(),Z(this._el,f),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),ze=fe.extend({options:{crs:yt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=_(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(se(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ii&&Ie.any3d&&!Ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ue(this._proxy,_o,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,f){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(se(a),c,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=i({animate:f.animate},f.zoom),f.pan=i({animate:f.animate,duration:f.duration},f.pan));var m=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,f.zoom):this._tryAnimatedPan(a,f.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,f.pan&&f.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,f){var m=this.getZoomScale(c),v=this.getSize().divideBy(2),S=a instanceof G?a:this.latLngToContainerPoint(a),H=S.subtract(v).multiplyBy(1-1/m),q=this.containerPointToLatLng(v.add(H));return this.setView(q,c,{zoom:f})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():ge(a);var f=ee(c.paddingTopLeft||c.padding||[0,0]),m=ee(c.paddingBottomRight||c.padding||[0,0]),v=this.getBoundsZoom(a,!1,f.add(m));if(v=typeof c.maxZoom=="number"?Math.min(c.maxZoom,v):v,v===1/0)return{center:a.getCenter(),zoom:v};var S=m.subtract(f).divideBy(2),H=this.project(a.getSouthWest(),v),q=this.project(a.getNorthEast(),v),J=this.unproject(H.add(q).divideBy(2).add(S),v);return{center:J,zoom:v}},fitBounds:function(a,c){if(a=ge(a),!a.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(a,c);return this.setView(f.center,f.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=ee(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ec,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Le(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,f,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,f){if(f=f||{},f.animate===!1||!Ie.any3d)return this.setView(a,c,f);this._stop();var m=this.project(this.getCenter()),v=this.project(a),S=this.getSize(),H=this._zoom;a=se(a),c=c===void 0?H:c;var q=Math.max(S.x,S.y),J=q*this.getZoomScale(H,c),ne=v.distanceTo(m)||1,xe=1.42,Ne=xe*xe;function Oe(Zt){var ph=Zt?-1:1,I2=Zt?J:q,T2=J*J-q*q+ph*Ne*Ne*ne*ne,S2=2*I2*Ne*ne,bg=T2/S2,K_=Math.sqrt(bg*bg+1)-bg,k2=K_<1e-9?-18:Math.log(K_);return k2}function Gn(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function un(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}function Or(Zt){return Gn(Zt)/un(Zt)}var or=Oe(0);function WA(Zt){return q*(un(or)/un(or+xe*Zt))}function B2(Zt){return q*(un(or)*Or(or+xe*Zt)-Gn(or))/Ne}function C2(Zt){return 1-Math.pow(1-Zt,1.5)}var b2=Date.now(),H_=(Oe(1)-or)/xe,E2=f.duration?1e3*f.duration:1e3*H_*.8;function V_(){var Zt=(Date.now()-b2)/E2,ph=C2(Zt)*H_;Zt<=1?(this._flyToFrame=D(V_,this),this._move(this.unproject(m.add(v.subtract(m).multiplyBy(B2(ph)/ne)),H),this.getScaleZoom(q/WA(ph),H),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),V_.call(this),this},flyToBounds:function(a,c){var f=this._getBoundsCenterZoom(a,c);return this.flyTo(f.center,f.zoom,c)},setMaxBounds:function(a){return a=ge(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var f=this.getCenter(),m=this._limitCenter(f,this._zoom,ge(a));return f.equals(m)||this.panTo(m,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var f=ee(c.paddingTopLeft||c.padding||[0,0]),m=ee(c.paddingBottomRight||c.padding||[0,0]),v=this.project(this.getCenter()),S=this.project(a),H=this.getPixelBounds(),q=ue([H.min.add(f),H.max.subtract(m)]),J=q.getSize();if(!q.contains(S)){this._enforcingBounds=!0;var ne=S.subtract(q.getCenter()),xe=q.extend(S).getSize().subtract(J);v.x+=ne.x<0?-xe.x:xe.x,v.y+=ne.y<0?-xe.y:xe.y,this.panTo(this.unproject(v),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),m=c.divideBy(2).round(),v=f.divideBy(2).round(),S=m.subtract(v);return!S.x&&!S.y?this:(a.animate&&a.pan?this.panBy(S):(a.pan&&this._rawPanBy(S),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,f,a):navigator.geolocation.getCurrentPosition(c,f,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,f=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,f=a.coords.longitude,m=new de(c,f),v=m.toBounds(a.coords.accuracy*2),S=this._locateOptions;if(S.setView){var H=this.getBoundsZoom(v);this.setView(m,S.maxZoom?Math.min(H,S.maxZoom):H)}var q={latlng:m,bounds:v,timestamp:a.timestamp};for(var J in a.coords)typeof a.coords[J]=="number"&&(q[J]=a.coords[J]);this.fire("locationfound",q)}},addHandler:function(a,c){if(!c)return this;var f=this[a]=new c(this);return this._handlers.push(f),this.options[a]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)_e(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var f="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),m=Re("div",f,c||this._mapPane);return a&&(this._panes[a]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),f=this.unproject(a.getTopRight());return new he(c,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,f){a=ge(a),f=ee(f||[0,0]);var m=this.getZoom()||0,v=this.getMinZoom(),S=this.getMaxZoom(),H=a.getNorthWest(),q=a.getSouthEast(),J=this.getSize().subtract(f),ne=ue(this.project(q,m),this.project(H,m)).getSize(),xe=Ie.any3d?this.options.zoomSnap:1,Ne=J.x/ne.x,Oe=J.y/ne.y,Gn=c?Math.max(Ne,Oe):Math.min(Ne,Oe);return m=this.getScaleZoom(Gn,m),xe&&(m=Math.round(m/(xe/100))*(xe/100),m=c?Math.ceil(m/xe)*xe:Math.floor(m/xe)*xe),Math.max(v,Math.min(S,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var f=this._getTopLeftPoint(a,c);return new ve(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var f=this.options.crs;return c=c===void 0?this._zoom:c,f.scale(a)/f.scale(c)},getScaleZoom:function(a,c){var f=this.options.crs;c=c===void 0?this._zoom:c;var m=f.zoom(a*f.scale(c));return isNaN(m)?1/0:m},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(se(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ee(a),c)},layerPointToLatLng:function(a){var c=ee(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(se(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(se(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ge(a))},distance:function(a,c){return this.options.crs.distance(se(a),se(c))},containerPointToLayerPoint:function(a){return ee(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ee(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(ee(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(a)))},mouseEventToContainerPoint:function(a){return PA(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=Bo(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ue(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ie.any3d,Le(a,"leaflet-container"+(Ie.touch?" leaflet-touch":"")+(Ie.retina?" leaflet-retina":"")+(Ie.ielt9?" leaflet-oldie":"")+(Ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Ti(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Z(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Le(a.markerPane,"leaflet-zoom-hide"),Le(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,f){Z(this._mapPane,new G(0,0));var m=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var v=this._zoom!==c;this._moveStart(v,f)._move(a,c)._moveEnd(v),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,f,m){c===void 0&&(c=this._zoom);var v=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),m?f&&f.pinch&&this.fire("zoom",f):((v||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Z(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[u(this._container)]=this;var c=a?lt:Ue;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ie.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var f=[],m,v=c==="mouseout"||c==="mouseover",S=a.target||a.srcElement,H=!1;S;){if(m=this._targets[u(S)],m&&(c==="click"||c==="preclick")&&this._draggableMoved(m)){H=!0;break}if(m&&m.listens(c,!0)&&(v&&!bc(S,a)||(f.push(m),v))||S===this._container)break;S=S.parentNode}return!f.length&&!H&&!v&&this.listens(c,!0)&&(f=[this]),f},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var f=a.type;f==="mousedown"&&Ai(c),this._fireDOMEvent(a,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,f){if(a.type==="click"){var m=i({},a);m.type="preclick",this._fireDOMEvent(m,m.type,f)}var v=this._findEventTargets(a,c);if(f){for(var S=[],H=0;H<f.length;H++)f[H].listens(c,!0)&&S.push(f[H]);v=S.concat(v)}if(v.length){c==="contextmenu"&&Ut(a);var q=v[0],J={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ne=q.getLatLng&&(!q._radius||q._radius<=10);J.containerPoint=ne?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(a),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ne?q.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(H=0;H<v.length;H++)if(v[H].fire(c,J,!0),J.originalEvent._stopped||v[H].options.bubblingMouseEvents===!1&&O(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return ye(this._mapPane)||new G(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var f=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var f=this.getSize()._divideBy(2);return this.project(a,c)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,f){var m=this._getNewPixelOrigin(f,c);return this.project(a,c)._subtract(m)},_latLngBoundsToNewLayerBounds:function(a,c,f){var m=this._getNewPixelOrigin(f,c);return ue([this.project(a.getSouthWest(),c)._subtract(m),this.project(a.getNorthWest(),c)._subtract(m),this.project(a.getSouthEast(),c)._subtract(m),this.project(a.getNorthEast(),c)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,f){if(!f)return a;var m=this.project(a,c),v=this.getSize().divideBy(2),S=new ve(m.subtract(v),m.add(v)),H=this._getBoundsOffset(S,f,c);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?a:this.unproject(m.add(H),c)},_limitOffset:function(a,c){if(!c)return a;var f=this.getPixelBounds(),m=new ve(f.min.add(a),f.max.add(a));return a.add(this._getBoundsOffset(m,c))},_getBoundsOffset:function(a,c,f){var m=ue(this.project(c.getNorthEast(),f),this.project(c.getSouthWest(),f)),v=m.min.subtract(a.min),S=m.max.subtract(a.max),H=this._rebound(v.x,-S.x),q=this._rebound(v.y,-S.y);return new G(H,q)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),f=this.getMaxZoom(),m=Ie.any3d?this.options.zoomSnap:1;return m&&(a=Math.round(a/m)*m),Math.max(c,Math.min(f,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var f=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,c),!0)},_createAnimProxy:function(){var a=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var f=is,m=this._proxy.style[f];$(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),m===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();$(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(c),v=this._getCenterOffset(a)._divideBy(1-1/m);return f.animate!==!0&&!this.getSize().contains(v)?!1:(D(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,f,m){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,Le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function LA(a,c){return new ze(a,c)}var ar=Y.extend({options:{position:"topright"},initialize:function(a){_(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),f=this.getPosition(),m=a._controlCorners[f];return Le(c,"leaflet-control"),f.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),zn=function(a){return new ar(a)};ze.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",f=this._controlContainer=Re("div",c+"control-container",this._container);function m(v,S){var H=c+v+" "+c+S;a[v+S]=Re("div",H,f)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)_e(this._controlCorners[a]);_e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ic=ar.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,f,m){return f<m?-1:m<f?1:0}},initialize:function(a,c,f){_(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in a)this._addLayer(a[m],m);for(m in c)this._addLayer(c[m],m,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ar.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=Re("div",a),f=this.options.collapsed;c.setAttribute("aria-haspopup",!0),aa(c),sa(c);var m=this._section=Re("section",a+"-list");f&&(this._map.on("click",this.collapse,this),Ue(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Re("a",a+"-toggle",c);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ue(v,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){Ut(S),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Re("div",a+"-base",m),this._separator=Re("div",a+"-separator",m),this._overlaysList=Re("div",a+"-overlays",m),c.appendChild(m)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,f){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(m,v){return this.options.sortFunction(m.layer,v.layer,m.name,v.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Si(this._baseLayersList),Si(this._overlaysList),this._layerControlInputs=[];var a,c,f,m,v=0;for(f=0;f<this._layers.length;f++)m=this._layers[f],this._addItem(m),c=c||m.overlay,a=a||!m.overlay,v+=m.overlay?0:1;return this.options.hideSingleBase&&(a=a&&v>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(u(a.target)),f=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;f&&this._map.fire(f,c)},_createRadioElement:function(a,c){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=f,m.firstChild},_addItem:function(a){var c=document.createElement("label"),f=this._map.hasLayer(a.layer),m;a.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=f):m=this._createRadioElement("leaflet-base-layers_"+u(this),f),this._layerControlInputs.push(m),m.layerId=u(a.layer),Ue(m,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+a.name;var S=document.createElement("span");c.appendChild(S),S.appendChild(m),S.appendChild(v);var H=a.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,f,m=[],v=[];this._handlingClick=!0;for(var S=a.length-1;S>=0;S--)c=a[S],f=this._getLayer(c.layerId).layer,c.checked?m.push(f):c.checked||v.push(f);for(S=0;S<v.length;S++)this._map.hasLayer(v[S])&&this._map.removeLayer(v[S]);for(S=0;S<m.length;S++)this._map.hasLayer(m[S])||this._map.addLayer(m[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,f,m=this._map.getZoom(),v=a.length-1;v>=0;v--)c=a[v],f=this._getLayer(c.layerId).layer,c.disabled=f.options.minZoom!==void 0&&m<f.options.minZoom||f.options.maxZoom!==void 0&&m>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ue(a,"click",Ut),this.expand();var c=this;setTimeout(function(){lt(a,"click",Ut),c._preventClick=!1})}}),wg=function(a,c,f){return new Ic(a,c,f)},as=ar.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",f=Re("div",c+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,c+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,c+"-out",f,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,f,m,v){var S=Re("a",f,m);return S.innerHTML=a,S.href="#",S.title=c,S.setAttribute("role","button"),S.setAttribute("aria-label",c),aa(S),Ue(S,"click",xr),Ue(S,"click",v,this),Ue(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";ht(this._zoomInButton,c),ht(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Le(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Le(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});ze.mergeOptions({zoomControl:!0}),ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new as,this.addControl(this.zoomControl))});var eh=function(a){return new as(a)},RA=ar.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",f=Re("div",c),m=this.options;return this._addScales(m,c+"-line",f),a.on(m.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),f},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,f){a.metric&&(this._mScale=Re("div",c,f)),a.imperial&&(this._iScale=Re("div",c,f))},_update:function(){var a=this._map,c=a.getSize().y/2,f=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(f)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),f=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,f,c/a)},_updateImperial:function(a){var c=a*3.2808399,f,m,v;c>5280?(f=c/5280,m=this._getRoundNum(f),this._updateScale(this._iScale,m+" mi",m/f)):(v=this._getRoundNum(c),this._updateScale(this._iScale,v+" ft",v/c))},_updateScale:function(a,c,f){a.style.width=Math.round(this.options.maxWidth*f)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),f=a/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,c*f}}),DA=function(a){return new RA(a)},th='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oa=ar.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ie.inlineSvg?th+" ":"")+"Leaflet</a>"},initialize:function(a){_(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),aa(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var f=[];this.options.prefix&&f.push(this.options.prefix),a.length&&f.push(a.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});ze.mergeOptions({attributionControl:!0}),ze.addInitHook(function(){this.options.attributionControl&&new oa().addTo(this)});var vg=function(a){return new oa(a)};ar.Layers=Ic,ar.Zoom=as,ar.Scale=RA,ar.Attribution=oa,zn.layers=wg,zn.zoom=eh,zn.scale=DA,zn.attribution=vg;var _r=Y.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_r.addTo=function(a,c){return a.addHandler(c,this),this};var bo={Events:Ae},Tc=Ie.touch?"touchstart mousedown":"mousedown",li=fe.extend({options:{clickTolerance:3},initialize:function(a,c,f,m){_(this,m),this._element=a,this._dragStartTarget=c||a,this._preventOutline=f},enable:function(){this._enabled||(Ue(this._dragStartTarget,Tc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(li._dragging===this&&this.finishDrag(!0),lt(this._dragStartTarget,Tc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!ta(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){li._dragging===this&&this.finishDrag();return}if(!(li._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(li._dragging=this,this._preventOutline&&Ai(this._element),ln(),Qe(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,f=xc(this._element);this._startPoint=new G(c.clientX,c.clientY),this._startPos=ye(this._element),this._parentScale=QA(f);var m=a.type==="mousedown";Ue(document,m?"mousemove":"touchmove",this._onMove,this),Ue(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,f=new G(c.clientX,c.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Ut(a),this._moved||(this.fire("dragstart"),this._moved=!0,Le(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Z(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),lt(document,"mousemove touchmove",this._onMove,this),lt(document,"mouseup touchend touchcancel",this._onUp,this),ra(),Ke();var c=this._moved&&this._moving;this._moving=!1,li._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function jA(a,c,f){var m,v=[1,4,2,8],S,H,q,J,ne,xe,Ne,Oe;for(S=0,xe=a.length;S<xe;S++)a[S]._code=ki(a[S],c);for(q=0;q<4;q++){for(Ne=v[q],m=[],S=0,xe=a.length,H=xe-1;S<xe;H=S++)J=a[S],ne=a[H],J._code&Ne?ne._code&Ne||(Oe=cn(ne,J,Ne,c,f),Oe._code=ki(Oe,c),m.push(Oe)):(ne._code&Ne&&(Oe=cn(ne,J,Ne,c,f),Oe._code=ki(Oe,c),m.push(Oe)),m.push(J));a=m}return a}function MA(a,c){var f,m,v,S,H,q,J,ne,xe;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ne=se([0,0]),Oe=ge(a),Gn=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());Gn<1700&&(Ne=OA(a));var un=a.length,Or=[];for(f=0;f<un;f++){var or=se(a[f]);Or.push(c.project(se([or.lat-Ne.lat,or.lng-Ne.lng])))}for(q=J=ne=0,f=0,m=un-1;f<un;m=f++)v=Or[f],S=Or[m],H=v.y*S.x-S.y*v.x,J+=(v.x+S.x)*H,ne+=(v.y+S.y)*H,q+=H*3;q===0?xe=Or[0]:xe=[J/q,ne/q];var WA=c.unproject(ee(xe));return se([WA.lat+Ne.lat,WA.lng+Ne.lng])}function OA(a){for(var c=0,f=0,m=0,v=0;v<a.length;v++){var S=se(a[v]);c+=S.lat,f+=S.lng,m++}return se([c/m,f/m])}var HA={__proto__:null,clipPolygon:jA,polygonCenter:MA,centroid:OA};function Sc(a,c){if(!c||!a.length)return a.slice();var f=c*c;return a=rh(a,f),a=nh(a,f),a}function kc(a,c,f){return Math.sqrt(Mr(a,c,f,!0))}function os(a,c,f){return Mr(a,c,f)}function nh(a,c){var f=a.length,m=typeof Uint8Array<"u"?Uint8Array:Array,v=new m(f);v[0]=v[f-1]=1,VA(a,v,c,0,f-1);var S,H=[];for(S=0;S<f;S++)v[S]&&H.push(a[S]);return H}function VA(a,c,f,m,v){var S=0,H,q,J;for(q=m+1;q<=v-1;q++)J=Mr(a[q],a[m],a[v],!0),J>S&&(H=q,S=J);S>f&&(c[H]=1,VA(a,c,f,m,H),VA(a,c,f,H,v))}function rh(a,c){for(var f=[a[0]],m=1,v=0,S=a.length;m<S;m++)ih(a[m],a[v])>c&&(f.push(a[m]),v=m);return v<S-1&&f.push(a[S-1]),f}var Uc;function Eo(a,c,f,m,v){var S=m?Uc:ki(a,f),H=ki(c,f),q,J,ne;for(Uc=H;;){if(!(S|H))return[a,c];if(S&H)return!1;q=S||H,J=cn(a,c,q,f,v),ne=ki(J,f),q===S?(a=J,S=ne):(c=J,H=ne)}}function cn(a,c,f,m,v){var S=c.x-a.x,H=c.y-a.y,q=m.min,J=m.max,ne,xe;return f&8?(ne=a.x+S*(J.y-a.y)/H,xe=J.y):f&4?(ne=a.x+S*(q.y-a.y)/H,xe=q.y):f&2?(ne=J.x,xe=a.y+H*(J.x-a.x)/S):f&1&&(ne=q.x,xe=a.y+H*(q.x-a.x)/S),new G(ne,xe,v)}function ki(a,c){var f=0;return a.x<c.min.x?f|=1:a.x>c.max.x&&(f|=2),a.y<c.min.y?f|=4:a.y>c.max.y&&(f|=8),f}function ih(a,c){var f=c.x-a.x,m=c.y-a.y;return f*f+m*m}function Mr(a,c,f,m){var v=c.x,S=c.y,H=f.x-v,q=f.y-S,J=H*H+q*q,ne;return J>0&&(ne=((a.x-v)*H+(a.y-S)*q)/J,ne>1?(v=f.x,S=f.y):ne>0&&(v+=H*ne,S+=q*ne)),H=a.x-v,q=a.y-S,m?H*H+q*q:new G(v,S)}function d(a){return!k(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function y(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(a)}function x(a,c){var f,m,v,S,H,q,J,ne;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var xe=se([0,0]),Ne=ge(a),Oe=Ne.getNorthWest().distanceTo(Ne.getSouthWest())*Ne.getNorthEast().distanceTo(Ne.getNorthWest());Oe<1700&&(xe=OA(a));var Gn=a.length,un=[];for(f=0;f<Gn;f++){var Or=se(a[f]);un.push(c.project(se([Or.lat-xe.lat,Or.lng-xe.lng])))}for(f=0,m=0;f<Gn-1;f++)m+=un[f].distanceTo(un[f+1])/2;if(m===0)ne=un[0];else for(f=0,S=0;f<Gn-1;f++)if(H=un[f],q=un[f+1],v=H.distanceTo(q),S+=v,S>m){J=(S-m)/v,ne=[q.x-J*(q.x-H.x),q.y-J*(q.y-H.y)];break}var or=c.unproject(ee(ne));return se([or.lat+xe.lat,or.lng+xe.lng])}var N={__proto__:null,simplify:Sc,pointToSegmentDistance:kc,closestPointOnSegment:os,clipSegment:Eo,_getEdgeIntersection:cn,_getBitCode:ki,_sqClosestPointOnSegment:Mr,isFlat:d,_flat:y,polylineCenter:x},z={project:function(a){return new G(a.lng,a.lat)},unproject:function(a){return new de(a.y,a.x)},bounds:new ve([-180,-90],[180,90])},X={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,f=this.R,m=a.lat*c,v=this.R_MINOR/f,S=Math.sqrt(1-v*v),H=S*Math.sin(m),q=Math.tan(Math.PI/4-m/2)/Math.pow((1-H)/(1+H),S/2);return m=-f*Math.log(Math.max(q,1e-10)),new G(a.lng*c*f,m)},unproject:function(a){for(var c=180/Math.PI,f=this.R,m=this.R_MINOR/f,v=Math.sqrt(1-m*m),S=Math.exp(-a.y/f),H=Math.PI/2-2*Math.atan(S),q=0,J=.1,ne;q<15&&Math.abs(J)>1e-7;q++)ne=v*Math.sin(H),ne=Math.pow((1-ne)/(1+ne),v/2),J=Math.PI/2-2*Math.atan(S*ne)-H,H+=J;return new de(H*c,a.x*c/f)}},le={__proto__:null,LonLat:z,Mercator:X,SphericalMercator:Lt},at=i({},et,{code:"EPSG:3395",projection:X,transformation:function(){var a=.5/(Math.PI*X.R);return Cn(a,.5,-a,.5)}()}),$t=i({},et,{code:"EPSG:4326",projection:z,transformation:Cn(1/180,1,-1/180,.5)}),Xe=i({},Fe,{projection:z,transformation:Cn(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var f=c.lng-a.lng,m=c.lat-a.lat;return Math.sqrt(f*f+m*m)},infinite:!0});Fe.Earth=et,Fe.EPSG3395=at,Fe.EPSG3857=yt,Fe.EPSG900913=wt,Fe.EPSG4326=$t,Fe.Simple=Xe;var ct=fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[u(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[u(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var f=this.getEvents();c.on(f,this),this.once("remove",function(){c.off(f,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});ze.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=u(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return u(a)in this._layers},eachLayer:function(a,c){for(var f in this._layers)a.call(c,this._layers[f]);return this},_addLayers:function(a){a=a?k(a)?a:[a]:[];for(var c=0,f=a.length;c<f;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[u(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=u(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,f=this._getZoomSpan();for(var m in this._zoomBoundLayers){var v=this._zoomBoundLayers[m].options;a=v.minZoom===void 0?a:Math.min(a,v.minZoom),c=v.maxZoom===void 0?c:Math.max(c,v.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Nt=ct.extend({initialize:function(a,c){_(this,c),this._layers={};var f,m;if(a)for(f=0,m=a.length;f<m;f++)this.addLayer(a[f])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),f,m;for(f in this._layers)m=this._layers[f],m[a]&&m[a].apply(m,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var f in this._layers)a.call(c,this._layers[f]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return u(a)}}),Aa=function(a,c){return new Nt(a,c)},Vt=Nt.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Nt.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Nt.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new he;for(var c in this._layers){var f=this._layers[c];a.extend(f.getBounds?f.getBounds():f.getLatLng())}return a}}),KA=function(a,c){return new Vt(a,c)},Ui=Y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){_(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var f=this._getIconUrl(a);if(!f){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(f,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(m,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(a,c){var f=this.options,m=f[c+"Size"];typeof m=="number"&&(m=[m,m]);var v=ee(m),S=ee(c==="shadow"&&f.shadowAnchor||f.iconAnchor||v&&v.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(f.className||""),S&&(a.style.marginLeft=-S.x+"px",a.style.marginTop=-S.y+"px"),v&&(a.style.width=v.x+"px",a.style.height=v.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return Ie.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function i2(a){return new Ui(a)}var Nc=Ui.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Nc.imagePath!="string"&&(Nc.imagePath=this._detectIconPath()),(this.options.imagePath||Nc.imagePath)+Ui.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(f,m,v){var S=m.exec(f);return S&&S[v]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Re("div","leaflet-default-icon-path",document.body),c=Ti(a,"background-image")||Ti(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),B_=_r.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new li(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Le(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,f=c._map,m=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,S=ye(c._icon),H=f.getPixelBounds(),q=f.getPixelOrigin(),J=ue(H.min._subtract(q).add(v),H.max._subtract(q).subtract(v));if(!J.contains(S)){var ne=ee((Math.max(J.max.x,S.x)-J.max.x)/(H.max.x-J.max.x)-(Math.min(J.min.x,S.x)-J.min.x)/(H.min.x-J.min.x),(Math.max(J.max.y,S.y)-J.max.y)/(H.max.y-J.max.y)-(Math.min(J.min.y,S.y)-J.min.y)/(H.min.y-J.min.y)).multiplyBy(m);f.panBy(ne,{animate:!1}),this._draggable._newPos._add(ne),this._draggable._startPos._add(ne),Z(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=D(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,f=c._shadow,m=ye(c._icon),v=c._map.layerPointToLatLng(m);f&&Z(f,m),c._latlng=v,a.latlng=v,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),sh=ct.extend({options:{icon:new Nc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){_(this,c),this._latlng=se(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=se(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=a.icon.createIcon(this._icon),m=!1;f!==this._icon&&(this._icon&&this._removeIcon(),m=!0,a.title&&(f.title=a.title),f.tagName==="IMG"&&(f.alt=a.alt||"")),Le(f,c),a.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(f,"focus",this._panOnFocus,this);var v=a.icon.createShadow(this._shadow),S=!1;v!==this._shadow&&(this._removeShadow(),S=!0),v&&(Le(v,c),v.alt=""),this._shadow=v,a.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&S&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(this._icon,"focus",this._panOnFocus,this),_e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_e(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Z(this._icon,a),this._shadow&&Z(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),B_)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new B_(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&xt(this._icon,a),this._shadow&&xt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,f=c.iconSize?ee(c.iconSize):ee(0,0),m=c.iconAnchor?ee(c.iconAnchor):ee(0,0);a.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:f.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function s2(a,c){return new sh(a,c)}var la=ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return _(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ah=la.extend({options:{fill:!0,radius:10},initialize:function(a,c){_(this,c),this._latlng=se(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=se(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return la.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,f=this._clickTolerance(),m=[a+f,c+f];this._pxBounds=new ve(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function a2(a,c){return new ah(a,c)}var xg=ah.extend({initialize:function(a,c,f){if(typeof c=="number"&&(c=i({},f,{radius:c})),_(this,c),this._latlng=se(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new he(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:la.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,f=this._map,m=f.options.crs;if(m.distance===et.distance){var v=Math.PI/180,S=this._mRadius/et.R/v,H=f.project([c+S,a]),q=f.project([c-S,a]),J=H.add(q).divideBy(2),ne=f.unproject(J).lat,xe=Math.acos((Math.cos(S*v)-Math.sin(c*v)*Math.sin(ne*v))/(Math.cos(c*v)*Math.cos(ne*v)))/v;(isNaN(xe)||xe===0)&&(xe=S/Math.cos(Math.PI/180*c)),this._point=J.subtract(f.getPixelOrigin()),this._radius=isNaN(xe)?0:J.x-f.project([ne,a-xe]).x,this._radiusY=J.y-H.y}else{var Ne=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Ne).x}this._updateBounds()}});function o2(a,c,f){return new xg(a,c,f)}var As=la.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){_(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,f=null,m=Mr,v,S,H=0,q=this._parts.length;H<q;H++)for(var J=this._parts[H],ne=1,xe=J.length;ne<xe;ne++){v=J[ne-1],S=J[ne];var Ne=m(a,v,S,!0);Ne<c&&(c=Ne,f=m(a,v,S))}return f&&(f.distance=Math.sqrt(c)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=se(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new he,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],f=d(a),m=0,v=a.length;m<v;m++)f?(c[m]=se(a[m]),this._bounds.extend(c[m])):c[m]=this._convertLatLngs(a[m]);return c},_project:function(){var a=new ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new G(a,a);this._rawPxBounds&&(this._pxBounds=new ve([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,f){var m=a[0]instanceof de,v=a.length,S,H;if(m){for(H=[],S=0;S<v;S++)H[S]=this._map.latLngToLayerPoint(a[S]),f.extend(H[S]);c.push(H)}else for(S=0;S<v;S++)this._projectLatlngs(a[S],c,f)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,f,m,v,S,H,q,J;for(f=0,v=0,S=this._rings.length;f<S;f++)for(J=this._rings[f],m=0,H=J.length;m<H-1;m++)q=Eo(J[m],J[m+1],a,m,!0),q&&(c[v]=c[v]||[],c[v].push(q[0]),(q[1]!==J[m+1]||m===H-2)&&(c[v].push(q[1]),v++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,f=0,m=a.length;f<m;f++)a[f]=Sc(a[f],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var f,m,v,S,H,q,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(f=0,S=this._parts.length;f<S;f++)for(q=this._parts[f],m=0,H=q.length,v=H-1;m<H;v=m++)if(!(!c&&m===0)&&kc(a,q[v],q[m])<=J)return!0;return!1}});function A2(a,c){return new As(a,c)}As._flat=y;var zA=As.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return MA(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=As.prototype._convertLatLngs.call(this,a),f=c.length;return f>=2&&c[0]instanceof de&&c[0].equals(c[f-1])&&c.pop(),c},_setLatLngs:function(a){As.prototype._setLatLngs.call(this,a),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,f=new G(c,c);if(a=new ve(a.min.subtract(f),a.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,v=this._rings.length,S;m<v;m++)S=jA(this._rings[m],a,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,f,m,v,S,H,q,J,ne;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(S=0,J=this._parts.length;S<J;S++)for(f=this._parts[S],H=0,ne=f.length,q=ne-1;H<ne;q=H++)m=f[H],v=f[q],m.y>a.y!=v.y>a.y&&a.x<(v.x-m.x)*(a.y-m.y)/(v.y-m.y)+m.x&&(c=!c);return c||As.prototype._containsPoint.call(this,a,!0)}});function l2(a,c){return new zA(a,c)}var ls=Vt.extend({initialize:function(a,c){_(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=k(a)?a:a.features,f,m,v;if(c){for(f=0,m=c.length;f<m;f++)v=c[f],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var S=this.options;if(S.filter&&!S.filter(a))return this;var H=oh(a,S);return H?(H.feature=ch(a),H.defaultOptions=H.options,this.resetStyle(H),S.onEachFeature&&S.onEachFeature(a,H),this.addLayer(H)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function oh(a,c){var f=a.type==="Feature"?a.geometry:a,m=f?f.coordinates:null,v=[],S=c&&c.pointToLayer,H=c&&c.coordsToLatLng||_g,q,J,ne,xe;if(!m&&!f)return null;switch(f.type){case"Point":return q=H(m),C_(S,a,q,c);case"MultiPoint":for(ne=0,xe=m.length;ne<xe;ne++)q=H(m[ne]),v.push(C_(S,a,q,c));return new Vt(v);case"LineString":case"MultiLineString":return J=Ah(m,f.type==="LineString"?0:1,H),new As(J,c);case"Polygon":case"MultiPolygon":return J=Ah(m,f.type==="Polygon"?1:2,H),new zA(J,c);case"GeometryCollection":for(ne=0,xe=f.geometries.length;ne<xe;ne++){var Ne=oh({geometry:f.geometries[ne],type:"Feature",properties:a.properties},c);Ne&&v.push(Ne)}return new Vt(v);case"FeatureCollection":for(ne=0,xe=f.features.length;ne<xe;ne++){var Oe=oh(f.features[ne],c);Oe&&v.push(Oe)}return new Vt(v);default:throw new Error("Invalid GeoJSON object.")}}function C_(a,c,f,m){return a?a(c,f):new sh(f,m&&m.markersInheritOptions&&m)}function _g(a){return new de(a[1],a[0],a[2])}function Ah(a,c,f){for(var m=[],v=0,S=a.length,H;v<S;v++)H=c?Ah(a[v],c-1,f):(f||_g)(a[v]),m.push(H);return m}function Bg(a,c){return a=se(a),a.alt!==void 0?[w(a.lng,c),w(a.lat,c),w(a.alt,c)]:[w(a.lng,c),w(a.lat,c)]}function lh(a,c,f,m){for(var v=[],S=0,H=a.length;S<H;S++)v.push(c?lh(a[S],d(a[S])?0:c-1,f,m):Bg(a[S],m));return!c&&f&&v.length>0&&v.push(v[0].slice()),v}function GA(a,c){return a.feature?i({},a.feature,{geometry:c}):ch(c)}function ch(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Cg={toGeoJSON:function(a){return GA(this,{type:"Point",coordinates:Bg(this.getLatLng(),a)})}};sh.include(Cg),xg.include(Cg),ah.include(Cg),As.include({toGeoJSON:function(a){var c=!d(this._latlngs),f=lh(this._latlngs,c?1:0,!1,a);return GA(this,{type:(c?"Multi":"")+"LineString",coordinates:f})}}),zA.include({toGeoJSON:function(a){var c=!d(this._latlngs),f=c&&!d(this._latlngs[0]),m=lh(this._latlngs,f?2:c?1:0,!0,a);return c||(m=[m]),GA(this,{type:(f?"Multi":"")+"Polygon",coordinates:m})}}),Nt.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(f){c.push(f.toGeoJSON(a).geometry.coordinates)}),GA(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var f=c==="GeometryCollection",m=[];return this.eachLayer(function(v){if(v.toGeoJSON){var S=v.toGeoJSON(a);if(f)m.push(S.geometry);else{var H=ch(S);H.type==="FeatureCollection"?m.push.apply(m,H.features):m.push(H)}}}),f?GA(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function b_(a,c){return new ls(a,c)}var c2=b_,uh=ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,f){this._url=a,this._bounds=ge(c),_(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Lr(this._image),this},bringToBack:function(){return this._map&&oi(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ge(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:Re("img");if(Le(c,"leaflet-image-layer"),this._zoomAnimated&&Le(c,"leaflet-zoom-animated"),this.options.className&&Le(c,this.options.className),c.onselectstart=g,c.onmousemove=g,c.onload=o(this.fire,this,"load"),c.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;$(this._image,f,c)},_reset:function(){var a=this._image,c=new ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=c.getSize();Z(a,c.min),a.style.width=f.x+"px",a.style.height=f.y+"px"},_updateOpacity:function(){xt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),u2=function(a,c,f){return new uh(a,c,f)},E_=uh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:Re("video");if(Le(c,"leaflet-image-layer"),this._zoomAnimated&&Le(c,"leaflet-zoom-animated"),this.options.className&&Le(c,this.options.className),c.onselectstart=g,c.onmousemove=g,c.onloadeddata=o(this.fire,this,"load"),a){for(var f=c.getElementsByTagName("source"),m=[],v=0;v<f.length;v++)m.push(f[v].src);this._url=f.length>0?m:[c.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var H=Re("source");H.src=this._url[S],c.appendChild(H)}}});function d2(a,c,f){return new E_(a,c,f)}var I_=uh.extend({_initImage:function(){var a=this._image=this._url;Le(a,"leaflet-image-layer"),this._zoomAnimated&&Le(a,"leaflet-zoom-animated"),this.options.className&&Le(a,this.options.className),a.onselectstart=g,a.onmousemove=g}});function h2(a,c,f){return new I_(a,c,f)}var Ni=ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof de||k(a))?(this._latlng=se(a),_(this,c)):(_(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&xt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&xt(this._container,1),this.bringToFront(),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(xt(this._container,0),this._removeTimeout=setTimeout(o(_e,void 0,this._container),200)):_e(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=se(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Lr(this._container),this},bringToBack:function(){return this._map&&oi(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof Vt){c=null;var f=this._source._layers;for(var m in f)if(f[m]._map){c=f[m];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=ee(this.options.offset),f=this._getAnchor();this._zoomAnimated?Z(this._container,a.add(f)):c=c.add(a).add(f);var m=this._containerBottom=-c.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=m+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});ze.include({_initOverlay:function(a,c,f,m){var v=c;return v instanceof a||(v=new a(m).setContent(c)),f&&v.setLatLng(f),v}}),ct.include({_initOverlay:function(a,c,f,m){var v=f;return v instanceof a?(_(v,m),v._source=this):(v=c&&!m?c:new a(m,this),v.setContent(f)),v}});var dh=Ni.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Ni.prototype.openOn.call(this,a)},onAdd:function(a){Ni.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof la||this._source.on("preclick",jr))},onRemove:function(a){Ni.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof la||this._source.off("preclick",jr))},getEvents:function(){var a=Ni.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=Re("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Re("div",a+"-content-wrapper",c);if(this._contentNode=Re("div",a+"-content",f),aa(c),sa(this._contentNode),Ue(c,"contextmenu",jr),this._tipContainer=Re("div",a+"-tip-container",c),this._tip=Re("div",a+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Re("a",a+"-close-button",c);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Ue(m,"click",function(v){Ut(v),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var f=a.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),c.width=f+1+"px",c.whiteSpace="",c.height="";var m=a.offsetHeight,v=this.options.maxHeight,S="leaflet-popup-scrolled";v&&m>v?(c.height=v+"px",Le(a,S)):ht(a,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),f=this._getAnchor();Z(this._container,c.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(Ti(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+c,m=this._containerWidth,v=new G(this._containerLeft,-f-this._containerBottom);v._add(ye(this._container));var S=a.layerPointToContainerPoint(v),H=ee(this.options.autoPanPadding),q=ee(this.options.autoPanPaddingTopLeft||H),J=ee(this.options.autoPanPaddingBottomRight||H),ne=a.getSize(),xe=0,Ne=0;S.x+m+J.x>ne.x&&(xe=S.x+m-ne.x+J.x),S.x-xe-q.x<0&&(xe=S.x-q.x),S.y+f+J.y>ne.y&&(Ne=S.y+f-ne.y+J.y),S.y-Ne-q.y<0&&(Ne=S.y-q.y),(xe||Ne)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([xe,Ne]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),f2=function(a,c){return new dh(a,c)};ze.mergeOptions({closePopupOnClick:!0}),ze.include({openPopup:function(a,c,f){return this._initOverlay(dh,a,c,f).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),ct.include({bindPopup:function(a,c){return this._popup=this._initOverlay(dh,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Vt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){xr(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof la)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var hh=Ni.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Ni.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Ni.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Ni.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,f,m=this._map,v=this._container,S=m.latLngToContainerPoint(m.getCenter()),H=m.layerPointToContainerPoint(a),q=this.options.direction,J=v.offsetWidth,ne=v.offsetHeight,xe=ee(this.options.offset),Ne=this._getAnchor();q==="top"?(c=J/2,f=ne):q==="bottom"?(c=J/2,f=0):q==="center"?(c=J/2,f=ne/2):q==="right"?(c=0,f=ne/2):q==="left"?(c=J,f=ne/2):H.x<S.x?(q="right",c=0,f=ne/2):(q="left",c=J+(xe.x+Ne.x)*2,f=ne/2),a=a.subtract(ee(c,f,!0)).add(xe).add(Ne),ht(v,"leaflet-tooltip-right"),ht(v,"leaflet-tooltip-left"),ht(v,"leaflet-tooltip-top"),ht(v,"leaflet-tooltip-bottom"),Le(v,"leaflet-tooltip-"+q),Z(v,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&xt(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),p2=function(a,c){return new hh(a,c)};ze.include({openTooltip:function(a,c,f){return this._initOverlay(hh,a,c,f).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),ct.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(hh,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[c](f),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Vt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(Ue(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ue(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,f,m;this._tooltip.options.sticky&&a.originalEvent&&(f=this._map.mouseEventToContainerPoint(a.originalEvent),m=this._map.containerPointToLayerPoint(f),c=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(c)}});var T_=Ui.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Si(c),c.appendChild(f.html)):c.innerHTML=f.html!==!1?f.html:"",f.bgPos){var m=ee(f.bgPos);c.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function m2(a){return new T_(a)}Ui.Default=Nc;var Fc=ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){_(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),_e(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof G?a:new G(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,f=-a(-1/0,1/0),m=0,v=c.length,S;m<v;m++)S=c[m].style.zIndex,c[m]!==this._container&&S&&(f=a(f,+S));isFinite(f)&&(this.options.zIndex=f+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie.ielt9){xt(this._container,this.options.opacity);var a=+new Date,c=!1,f=!1;for(var m in this._tiles){var v=this._tiles[m];if(!(!v.current||!v.loaded)){var S=Math.min(1,(a-v.loaded)/200);xt(v.el,S),S<1?c=!0:(v.active?f=!0:this._onOpaqueTile(v),v.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),c&&(K(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===a?(this._levels[f].el.style.zIndex=c-Math.abs(a-f),this._onUpdateLevel(f)):(_e(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var m=this._levels[a],v=this._map;return m||(m=this._levels[a]={},m.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=c,m.origin=v.project(v.unproject(v.getPixelOrigin()),a).round(),m.zoom=a,this._setZoomTransform(m,v.getCenter(),v.getZoom()),g(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var a,c,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var m=c.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)_e(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,f,m){var v=Math.floor(a/2),S=Math.floor(c/2),H=f-1,q=new G(+v,+S);q.z=+H;var J=this._tileCoordsToKey(q),ne=this._tiles[J];return ne&&ne.active?(ne.retain=!0,!0):(ne&&ne.loaded&&(ne.retain=!0),H>m?this._retainParent(v,S,H,m):!1)},_retainChildren:function(a,c,f,m){for(var v=2*a;v<2*a+2;v++)for(var S=2*c;S<2*c+2;S++){var H=new G(v,S);H.z=f+1;var q=this._tileCoordsToKey(H),J=this._tiles[q];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);f+1<m&&this._retainChildren(v,S,f+1,m)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,f,m){var v=Math.round(c);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var S=this.options.updateWhenZooming&&v!==this._tileZoom;(!m||S)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(a),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var f in this._levels)this._setZoomTransform(this._levels[f],a,c)},_setZoomTransform:function(a,c,f){var m=this._map.getZoomScale(f,a.zoom),v=a.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(c,f)).round();Ie.any3d?$(a.el,v,m):Z(a.el,v)},_resetGrid:function(){var a=this._map,c=a.options.crs,f=this._tileSize=this.getTileSize(),m=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],m).x/f.x),Math.ceil(a.project([0,c.wrapLng[1]],m).x/f.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],m).y/f.x),Math.ceil(a.project([c.wrapLat[1],0],m).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,f=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),m=c.getZoomScale(f,this._tileZoom),v=c.project(a,this._tileZoom).floor(),S=c.getSize().divideBy(m*2);return new ve(v.subtract(S),v.add(S))},_update:function(a){var c=this._map;if(c){var f=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(a),v=this._pxBoundsToTileRange(m),S=v.getCenter(),H=[],q=this.options.keepBuffer,J=new ve(v.getBottomLeft().subtract([q,-q]),v.getTopRight().add([q,-q]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ne in this._tiles){var xe=this._tiles[ne].coords;(xe.z!==this._tileZoom||!J.contains(new G(xe.x,xe.y)))&&(this._tiles[ne].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(a,f);return}for(var Ne=v.min.y;Ne<=v.max.y;Ne++)for(var Oe=v.min.x;Oe<=v.max.x;Oe++){var Gn=new G(Oe,Ne);if(Gn.z=this._tileZoom,!!this._isValidTile(Gn)){var un=this._tiles[this._tileCoordsToKey(Gn)];un?un.current=!0:H.push(Gn)}}if(H.sort(function(or,WA){return or.distanceTo(S)-WA.distanceTo(S)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Or=document.createDocumentFragment();for(Oe=0;Oe<H.length;Oe++)this._addTile(H[Oe],Or);this._level.el.appendChild(Or)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var f=this._globalTileRange;if(!c.wrapLng&&(a.x<f.min.x||a.x>f.max.x)||!c.wrapLat&&(a.y<f.min.y||a.y>f.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(a);return ge(this.options.bounds).overlaps(m)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,f=this.getTileSize(),m=a.scaleBy(f),v=m.add(f),S=c.unproject(m,a.z),H=c.unproject(v,a.z);return[S,H]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),f=new he(c[0],c[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),f=new G(+c[0],+c[1]);return f.z=+c[2],f},_removeTile:function(a){var c=this._tiles[a];c&&(_e(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Le(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=g,a.onmousemove=g,Ie.ielt9&&this.options.opacity<1&&xt(a,this.options.opacity)},_addTile:function(a,c){var f=this._getTilePos(a),m=this._tileCoordsToKey(a),v=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(v),this.createTile.length<2&&D(o(this._tileReady,this,a,null,v)),Z(v,f),this._tiles[m]={el:v,coords:a,current:!0},c.appendChild(v),this.fire("tileloadstart",{tile:v,coords:a})},_tileReady:function(a,c,f){c&&this.fire("tileerror",{error:c,tile:f,coords:a});var m=this._tileCoordsToKey(a);f=this._tiles[m],f&&(f.loaded=+new Date,this._map._fadeAnimated?(xt(f.el,0),K(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),c||(Le(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new G(this._wrapX?p(a.x,this._wrapX):a.x,this._wrapY?p(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new ve(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function g2(a){return new Fc(a)}var qA=Fc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=_(this,c),c.detectRetina&&Ie.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var f=document.createElement("img");return Ue(f,"load",o(this._tileOnLoad,this,c,f)),Ue(f,"error",o(this._tileOnError,this,c,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(a),f},getTileUrl:function(a){var c={r:Ie.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=f),c["-y"]=f}return B(this._url,i(c,this.options))},_tileOnLoad:function(a,c){Ie.ielt9?setTimeout(o(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,f){var m=this.options.errorTileUrl;m&&c.getAttribute("src")!==m&&(c.src=m),a(f,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,f=this.options.zoomReverse,m=this.options.zoomOffset;return f&&(a=c-a),a+m},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=g,c.onerror=g,!c.complete)){c.src=V;var f=this._tiles[a].coords;_e(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:f})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",V),Fc.prototype._removeTile.call(this,a)},_tileReady:function(a,c,f){if(!(!this._map||f&&f.getAttribute("src")===V))return Fc.prototype._tileReady.call(this,a,c,f)}});function S_(a,c){return new qA(a,c)}var k_=qA.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var f=i({},this.defaultWmsParams);for(var m in c)m in this.options||(f[m]=c[m]);c=_(this,c);var v=c.detectRetina&&Ie.retina?2:1,S=this.getTileSize();f.width=S.x*v,f.height=S.y*v,this.wmsParams=f},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,qA.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),f=this._crs,m=ue(f.project(c[0]),f.project(c[1])),v=m.min,S=m.max,H=(this._wmsVersion>=1.3&&this._crs===$t?[v.y,v.x,S.y,S.x]:[v.x,v.y,S.x,S.y]).join(","),q=qA.prototype.getTileUrl.call(this,a);return q+F(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(a,c){return i(this.wmsParams,a),c||this.redraw(),this}});function y2(a,c){return new k_(a,c)}qA.WMS=k_,S_.wms=y2;var cs=ct.extend({options:{padding:.1},initialize:function(a){_(this,a),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var f=this._map.getZoomScale(c,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,c),S=m.multiplyBy(-f).add(v).subtract(this._map._getNewPixelOrigin(a,c));Ie.any3d?$(this._container,S,f):Z(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),f=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new ve(f,f.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),U_=cs.extend({options:{tolerance:0},getEvents:function(){var a=cs.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ue(a,"mousemove",this._onMouseMove,this),Ue(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ue(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,_e(this._container),lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cs.prototype._update.call(this);var a=this._bounds,c=this._container,f=a.getSize(),m=Ie.retina?2:1;Z(c,a.min),c.width=m*f.x,c.height=m*f.y,c.style.width=f.x+"px",c.style.height=f.y+"px",Ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){cs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[u(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,f=c.next,m=c.prev;f?f.prev=m:this._drawLast=m,m?m.next=f:this._drawFirst=f,delete a._order,delete this._layers[u(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),f=[],m,v;for(v=0;v<c.length;v++){if(m=Number(c[v]),isNaN(m))return;f.push(m)}a.options._dashArray=f}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ve,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var f=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)a=m.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var f,m,v,S,H=a._parts,q=H.length,J=this._ctx;if(q){for(J.beginPath(),f=0;f<q;f++){for(m=0,v=H[f].length;m<v;m++)S=H[f][m],J[m?"lineTo":"moveTo"](S.x,S.y);c&&J.closePath()}this._fillStroke(J,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,f=this._ctx,m=Math.max(Math.round(a._radius),1),v=(Math.max(Math.round(a._radiusY),1)||m)/m;v!==1&&(f.save(),f.scale(1,v)),f.beginPath(),f.arc(c.x,c.y/v,m,0,Math.PI*2,!1),v!==1&&f.restore(),this._fillStroke(f,a)}},_fillStroke:function(a,c){var f=c.options;f.fill&&(a.globalAlpha=f.fillOpacity,a.fillStyle=f.fillColor||f.color,a.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=f.opacity,a.lineWidth=f.weight,a.strokeStyle=f.color,a.lineCap=f.lineCap,a.lineJoin=f.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),f,m,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(f))&&(m=f);this._fireEvent(m?[m]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(ht(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var f,m,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(c)&&(m=f);m!==this._hoveredLayer&&(this._handleMouseOut(a),m&&(Le(this._container,"leaflet-interactive"),this._fireEvent([m],a,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,f){this._map._fireDOMEvent(c,f||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var f=c.next,m=c.prev;if(f)f.prev=m;else return;m?m.next=f:f&&(this._drawFirst=f),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var f=c.next,m=c.prev;if(m)m.next=f;else return;f?f.prev=m:m&&(this._drawLast=m),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function N_(a){return Ie.canvas?new U_(a):null}var Qc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),w2={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cs.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=Qc("shape");Le(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=Qc("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;_e(c),a.removeInteractiveTarget(c),delete this._layers[u(a)]},_updateStyle:function(a){var c=a._stroke,f=a._fill,m=a.options,v=a._container;v.stroked=!!m.stroke,v.filled=!!m.fill,m.stroke?(c||(c=a._stroke=Qc("stroke")),v.appendChild(c),c.weight=m.weight+"px",c.color=m.color,c.opacity=m.opacity,m.dashArray?c.dashStyle=k(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=m.lineCap.replace("butt","flat"),c.joinstyle=m.lineJoin):c&&(v.removeChild(c),a._stroke=null),m.fill?(f||(f=a._fill=Qc("fill")),v.appendChild(f),f.color=m.fillColor||m.color,f.opacity=m.fillOpacity):f&&(v.removeChild(f),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),f=Math.round(a._radius),m=Math.round(a._radiusY||f);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+f+","+m+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){Lr(a._container)},_bringToBack:function(a){oi(a._container)}},fh=Ie.vml?Qc:Je,Pc=cs.extend({_initContainer:function(){this._container=fh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_e(this._container),lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cs.prototype._update.call(this);var a=this._bounds,c=a.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,f.setAttribute("width",c.x),f.setAttribute("height",c.y)),Z(f,a.min),f.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=fh("path");a.options.className&&Le(c,a.options.className),a.options.interactive&&Le(c,"leaflet-interactive"),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){_e(a._path),a.removeInteractiveTarget(a._path),delete this._layers[u(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,f=a.options;c&&(f.stroke?(c.setAttribute("stroke",f.color),c.setAttribute("stroke-opacity",f.opacity),c.setAttribute("stroke-width",f.weight),c.setAttribute("stroke-linecap",f.lineCap),c.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?c.setAttribute("stroke-dasharray",f.dashArray):c.removeAttribute("stroke-dasharray"),f.dashOffset?c.setAttribute("stroke-dashoffset",f.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),f.fill?(c.setAttribute("fill",f.fillColor||f.color),c.setAttribute("fill-opacity",f.fillOpacity),c.setAttribute("fill-rule",f.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,en(a._parts,c))},_updateCircle:function(a){var c=a._point,f=Math.max(Math.round(a._radius),1),m=Math.max(Math.round(a._radiusY),1)||f,v="a"+f+","+m+" 0 1,0 ",S=a._empty()?"M0 0":"M"+(c.x-f)+","+c.y+v+f*2+",0 "+v+-f*2+",0 ";this._setPath(a,S)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){Lr(a._path)},_bringToBack:function(a){oi(a._path)}});Ie.vml&&Pc.include(w2);function F_(a){return Ie.svg||Ie.vml?new Pc(a):null}ze.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&N_(a)||F_(a)}});var Q_=zA.extend({initialize:function(a,c){zA.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=ge(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function v2(a,c){return new Q_(a,c)}Pc.create=fh,Pc.pointsToPath=en,ls.geometryToLayer=oh,ls.coordsToLatLng=_g,ls.coordsToLatLngs=Ah,ls.latLngToCoords=Bg,ls.latLngsToCoords=lh,ls.getFeature=GA,ls.asFeature=ch,ze.mergeOptions({boxZoom:!0});var P_=_r.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qe(),ln(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ue(document,{contextmenu:xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),Le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new ve(this._point,this._startPoint),f=c.getSize();Z(this._box,c.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(_e(this._box),ht(this._container,"leaflet-crosshair")),Ke(),ra(),lt(document,{contextmenu:xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var c=new he(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ze.addInitHook("addHandler","boxZoom",P_),ze.mergeOptions({doubleClickZoom:!0});var L_=_r.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,f=c.getZoom(),m=c.options.zoomDelta,v=a.originalEvent.shiftKey?f-m:f+m;c.options.doubleClickZoom==="center"?c.setZoom(v):c.setZoomAround(a.containerPoint,v)}});ze.addInitHook("addHandler","doubleClickZoom",L_),ze.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var R_=_r.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new li(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ge(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),f=this._initialWorldOffset,m=this._draggable._newPos.x,v=(m-c+f)%a+c-f,S=(m+c+f)%a-c-f,H=Math.abs(v+f)<Math.abs(S+f)?v:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(a){var c=this._map,f=c.options,m=!f.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),m)c.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,H=f.easeLinearity,q=v.multiplyBy(H/S),J=q.distanceTo([0,0]),ne=Math.min(f.inertiaMaxSpeed,J),xe=q.multiplyBy(ne/J),Ne=ne/(f.inertiaDeceleration*H),Oe=xe.multiplyBy(-Ne/2).round();!Oe.x&&!Oe.y?c.fire("moveend"):(Oe=c._limitOffset(Oe,c.options.maxBounds),D(function(){c.panBy(Oe,{duration:Ne,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});ze.addInitHook("addHandler","dragging",R_),ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var D_=_r.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ue(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,f=a.scrollTop||c.scrollTop,m=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(m,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},f=this.keyCodes,m,v;for(m=0,v=f.left.length;m<v;m++)c[f.left[m]]=[-1*a,0];for(m=0,v=f.right.length;m<v;m++)c[f.right[m]]=[a,0];for(m=0,v=f.down.length;m<v;m++)c[f.down[m]]=[0,a];for(m=0,v=f.up.length;m<v;m++)c[f.up[m]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},f=this.keyCodes,m,v;for(m=0,v=f.zoomIn.length;m<v;m++)c[f.zoomIn[m]]=a;for(m=0,v=f.zoomOut.length;m<v;m++)c[f.zoomOut[m]]=-a},_addHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,f=this._map,m;if(c in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(m=this._panKeys[c],a.shiftKey&&(m=ee(m).multiplyBy(3)),f.options.maxBounds&&(m=f._limitOffset(ee(m),f.options.maxBounds)),f.options.worldCopyJump){var v=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(m)));f.panTo(v)}else f.panBy(m)}else if(c in this._zoomKeys)f.setZoom(f.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;xr(a)}}});ze.addInitHook("addHandler","keyboard",D_),ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var j_=_r.extend({addHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=Xd(a),f=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var m=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),m),xr(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),f=this._map.options.zoomSnap||0;a._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,S=f?Math.ceil(v/f)*f:v,H=a._limitZoom(c+(this._delta>0?S:-S))-c;this._delta=0,this._startTime=null,H&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+H):a.setZoomAround(this._lastMousePos,c+H))}});ze.addInitHook("addHandler","scrollWheelZoom",j_);var x2=600;ze.mergeOptions({tapHold:Ie.touchNative&&Ie.safari&&Ie.mobile,tapTolerance:15});var M_=_r.extend({addHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new G(c.clientX,c.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ue(document,"touchend",Ut),Ue(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),x2),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){lt(document,"touchend",Ut),lt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new G(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var f=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});f._simulated=!0,c.target.dispatchEvent(f)}});ze.addInitHook("addHandler","tapHold",M_),ze.mergeOptions({touchZoom:Ie.touch,bounceAtZoomLimits:!0});var O_=_r.extend({addHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var f=c.mouseEventToContainerPoint(a.touches[0]),m=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(f.add(m)._divideBy(2))),this._startDist=f.distanceTo(m),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),Ut(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,f=c.mouseEventToContainerPoint(a.touches[0]),m=c.mouseEventToContainerPoint(a.touches[1]),v=f.distanceTo(m)/this._startDist;if(this._zoom=c.getScaleZoom(v,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&v<1||this._zoom>c.getMaxZoom()&&v>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var S=f._add(m)._divideBy(2)._subtract(this._centerPoint);if(v===1&&S.x===0&&S.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var H=o(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(H,this,!0),Ut(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ze.addInitHook("addHandler","touchZoom",O_),ze.BoxZoom=P_,ze.DoubleClickZoom=L_,ze.Drag=R_,ze.Keyboard=D_,ze.ScrollWheelZoom=j_,ze.TapHold=M_,ze.TouchZoom=O_,n.Bounds=ve,n.Browser=Ie,n.CRS=Fe,n.Canvas=U_,n.Circle=xg,n.CircleMarker=ah,n.Class=Y,n.Control=ar,n.DivIcon=T_,n.DivOverlay=Ni,n.DomEvent=Yd,n.DomUtil=Zd,n.Draggable=li,n.Evented=fe,n.FeatureGroup=Vt,n.GeoJSON=ls,n.GridLayer=Fc,n.Handler=_r,n.Icon=Ui,n.ImageOverlay=uh,n.LatLng=de,n.LatLngBounds=he,n.Layer=ct,n.LayerGroup=Nt,n.LineUtil=N,n.Map=ze,n.Marker=sh,n.Mixin=bo,n.Path=la,n.Point=G,n.PolyUtil=HA,n.Polygon=zA,n.Polyline=As,n.Popup=dh,n.PosAnimation=Ec,n.Projection=le,n.Rectangle=Q_,n.Renderer=cs,n.SVG=Pc,n.SVGOverlay=I_,n.TileLayer=qA,n.Tooltip=hh,n.Transformation=On,n.Util=R,n.VideoOverlay=E_,n.bind=o,n.bounds=ue,n.canvas=N_,n.circle=o2,n.circleMarker=a2,n.control=zn,n.divIcon=m2,n.extend=i,n.featureGroup=KA,n.geoJSON=b_,n.geoJson=c2,n.gridLayer=g2,n.icon=i2,n.imageOverlay=u2,n.latLng=se,n.latLngBounds=ge,n.layerGroup=Aa,n.map=LA,n.marker=s2,n.point=ee,n.polygon=l2,n.polyline=A2,n.popup=f2,n.rectangle=v2,n.setOptions=_,n.stamp=u,n.svg=F_,n.svgOverlay=h2,n.tileLayer=S_,n.tooltip=p2,n.transformation=Cn,n.version=r,n.videoOverlay=d2;var _2=window.L;n.noConflict=function(){return window.L=_2,this},window.L=n})})(mw,mw.exports);var Gd=mw.exports;const c_=yI(Gd);function u_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function d_(t,e){return e==null?function(r,i){const s=M.useRef();return s.current||(s.current=t(r,i)),s}:function(r,i){const s=M.useRef();s.current||(s.current=t(r,i));const o=M.useRef(r),{instance:l}=s.current;return M.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,i]),s}}function y3(t,e){M.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function QN(t){return function(n){const r=A_(),i=t(l_(n,r),r);return kN(r.map,n.attribution),FN(i.current,n.eventHandlers),y3(i.current,r),i}}function w3(t,e){const n=d_(t,e),r=QN(n);return f3(r)}function v3(t,e){const n=d_(t),r=g3(n,e);return p3(r)}function x3(t,e){const n=d_(t,e),r=QN(n);return m3(r)}function _3(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function B3(){return A_().map}function gw(){return gw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gw.apply(this,arguments)}function C3({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:s,placeholder:o,style:l,whenReady:u,zoom:h,...p},g){const[w]=M.useState({className:i,id:s,style:l}),[C,b]=M.useState(null);M.useImperativeHandle(g,()=>(C==null?void 0:C.map)??null,[C]);const _=M.useCallback(I=>{if(I!==null&&C===null){const B=new Gd.Map(I,p);n!=null&&h!=null?B.setView(n,h):t!=null&&B.fitBounds(t,e),u!=null&&B.whenReady(u),b(d3(B))}},[]);M.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const F=C?$f.createElement(NN,{value:C},r):o??null;return $f.createElement("div",gw({},w,{ref:_}),F)}const b3=M.forwardRef(C3),iE=w3(function({position:e,...n},r){const i=new Gd.Marker(e,n);return u_(i,h3(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),sE=v3(function(e,n){const r=new Gd.Popup(e,n.overlayContainer);return u_(r,n)},function(e,n,{position:r},i){M.useEffect(function(){const{instance:o}=e;function l(h){h.popup===o&&(o.update(),i(!0))}function u(h){h.popup===o&&i(!1)}return n.map.on({popupopen:l,popupclose:u}),n.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var p;n.map.off({popupopen:l,popupclose:u}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(o)}},[e,n,i,r])}),E3=x3(function({url:e,...n},r){const i=new Gd.TileLayer(e,l_(n,r));return u_(i,r)},function(e,n,r){_3(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,...h},p)=>M.createElement("svg",{ref:p,...I3,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${T3(t)}`,l].join(" "),...h},[...e.map(([g,w])=>M.createElement(g,w)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=me("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=me("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=me("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=me("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=me("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=me("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=me("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=me("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=me("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=me("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=me("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=me("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=me("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=me("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=me("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=me("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=me("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=me("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=me("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=me("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=me("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=me("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=me("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=me("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=me("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=me("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=me("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=me("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=me("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=me("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=me("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=me("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=me("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=me("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=me("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=me("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=me("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=me("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=me("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=me("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=me("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);delete c_.Icon.Default.prototype._getIconUrl;c_.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const uE=t=>c_.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 24px; height: 24px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>`,iconSize:[24,24],iconAnchor:[12,24],popupAnchor:[0,-24]}),Zc={accommodation:{label:"Accommodation",color:"#3B82F6",icon:DN},costume:{label:"Costume Pickup",color:"#F59E0B",icon:W3},fete:{label:"Fete Location",color:"#EC4899",icon:HN},meetup:{label:"Meetup Spot",color:"#10B981",icon:dr},scraped:{label:"Live Events",color:"#8B5CF6",icon:ti}};function X3({center:t,zoom:e}){const n=B3();return M.useEffect(()=>{t&&n.setView(t,e||13)},[t,e,n]),null}function Y3(t,e,n,r){const s=(n-t)*Math.PI/180,o=(r-e)*Math.PI/180,l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}const dE={trinidad:{center:[10.6918,-61.2225],zoom:11,country:"Trinidad & Tobago"},"stkitts-sugar-mas":{center:[17.3026,-62.7177],zoom:12,country:"St. Kitts"},stcroix:{center:[17.7246,-64.8348],zoom:11,country:"St. Croix, USVI"},dominica:{center:[15.415,-61.371],zoom:11,country:"Dominica"},aruba:{center:[12.5211,-69.9683],zoom:12,country:"Aruba"},"guyana-mashramani":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},guyana:{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},"guyana-independence":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},jamaica:{center:[18.0179,-76.8099],zoom:11,country:"Jamaica"},stmaarten:{center:[18.0425,-63.0548],zoom:12,country:"St. Maarten"},bahamas:{center:[25.0343,-77.3963],zoom:12,country:"Bahamas"},bermuda:{center:[32.3078,-64.7505],zoom:13,country:"Bermuda"},vincymas:{center:[13.1587,-61.2248],zoom:12,country:"St. Vincent"},antigua:{center:[17.1274,-61.8468],zoom:12,country:"Antigua"},stlucia:{center:[14.0101,-60.987],zoom:11,country:"St. Lucia"},tobago:{center:[11.1889,-60.732],zoom:11,country:"Tobago"},nottinghill:{center:[51.5156,-.205],zoom:14,country:"London, UK"},miami:{center:[25.7617,-80.1918],zoom:11,country:"Miami, FL"},tampa:{center:[27.9506,-82.4572],zoom:12,country:"Tampa, FL"},"cayman-batabano":{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},stthomas:{center:[18.3358,-64.8963],zoom:13,country:"St. Thomas, USVI"},atlanta:{center:[33.749,-84.388],zoom:12,country:"Atlanta, GA"},hollywood:{center:[34.0928,-118.3287],zoom:13,country:"Hollywood, CA"},caymas:{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},toronto:{center:[43.65107,-79.347015],zoom:12,country:"Toronto, Canada"},barbados:{center:[13.1939,-59.5432],zoom:12,country:"Barbados"},nevis:{center:[17.15,-62.58],zoom:12,country:"Nevis"},grenada:{center:[12.0529,-61.7523],zoom:12,country:"Grenada"},"ny-labor-day":{center:[40.6782,-73.9442],zoom:13,country:"Brooklyn, NY"},japan:{center:[35.6762,139.6503],zoom:10,country:"Tokyo, Japan"}};function eK({locations:t=[],scrapedEvents:e=[],onLocationsChange:n,carnivalName:r,carnivalId:i}){const[s,o]=M.useState(!1),[l,u]=M.useState({name:"",type:"fete",lat:"",lng:""}),[h,p]=M.useState(""),[g,w]=M.useState([]),[C,b]=M.useState(!1),_=t.find(T=>T.type==="accommodation"),F=dE[i]||dE.trinidad,I=M.useMemo(()=>{if(_)return[_.lat,_.lng];if(t.length>0)return[t[0].lat,t[0].lng];const T=e.find(E=>E.lat&&E.lng);return T?[T.lat,T.lng]:F.center},[t,_,F,e]),B=async()=>{if(h.trim()){b(!0);try{const E=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h)}`)).json();w(E.slice(0,5))}catch(T){console.error("Search error:",T)}b(!1)}},k=T=>{u({...l,lat:parseFloat(T.lat),lng:parseFloat(T.lon),name:l.name||T.display_name.split(",")[0]}),w([]),p("")},O=()=>{if(!l.name||!l.lat||!l.lng)return;const T={id:Date.now().toString(),name:l.name,type:l.type,lat:parseFloat(l.lat),lng:parseFloat(l.lng)};n([...t,T]),u({name:"",type:"fete",lat:"",lng:""}),o(!1)},V=T=>{n(t.filter(E=>E.id!==T))},j=T=>{if(!_||T.type==="accommodation")return null;const E=Y3(_.lat,_.lng,T.lat,T.lng);return E<1?`${Math.round(E*1e3)}m`:`${E.toFixed(1)}km`};return A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(ti,{className:"w-5 h-5 text-purple-500"}),"Fete Map - ",r]}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-7",children:[" ",F.country]})]}),A.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition",children:[A.jsx(KN,{className:"w-4 h-4"}),"Add Pin"]})]}),s&&A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"text",placeholder:"Location name",value:l.name,onChange:T=>u({...l,name:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("select",{value:l.type,onChange:T=>u({...l,type:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white",children:Object.entries(Zc).map(([T,{label:E}])=>A.jsx("option",{value:T,children:E},T))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Search for a place...",value:h,onChange:T=>p(T.target.value),onKeyPress:T=>T.key==="Enter"&&B(),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("button",{onClick:B,disabled:C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:C?"...":"Search"})]}),g.length>0&&A.jsx("ul",{className:"bg-white dark:bg-gray-600 border dark:border-gray-500 rounded-lg max-h-40 overflow-y-auto",children:g.map((T,E)=>A.jsx("li",{onClick:()=>k(T),className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-500 cursor-pointer text-sm truncate dark:text-white",children:T.display_name},E))}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"number",step:"any",placeholder:"Latitude",value:l.lat,onChange:T=>u({...l,lat:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("input",{type:"number",step:"any",placeholder:"Longitude",value:l.lng,onChange:T=>u({...l,lng:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:O,disabled:!l.name||!l.lat||!l.lng,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Location"}),A.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}),A.jsx("div",{className:"h-[400px] rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-600",children:A.jsxs(b3,{center:I,zoom:F.zoom,style:{height:"100%",width:"100%"},children:[A.jsx(E3,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),A.jsx(X3,{center:I,zoom:F.zoom}),t.map(T=>{var E,U;return A.jsx(iE,{position:[T.lat,T.lng],icon:uE(((E=Zc[T.type])==null?void 0:E.color)||"#6B7280"),children:A.jsxs(sE,{children:[A.jsx("div",{className:"font-medium",children:T.name}),A.jsx("div",{className:"text-xs text-gray-500",children:(U=Zc[T.type])==null?void 0:U.label}),j(T)&&A.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-1 mt-1",children:[A.jsx(V3,{className:"w-3 h-3"}),j(T)," from accommodation"]})]})},T.id)}),e.filter(T=>T.lat&&T.lng).map(T=>A.jsx(iE,{position:[T.lat,T.lng],icon:uE(Zc.scraped.color),children:A.jsxs(sE,{children:[A.jsx("div",{className:"font-medium",children:T.title}),A.jsx("div",{className:"text-xs text-purple-600 font-bold mb-1",children:"Live Event"}),T.venue&&A.jsx("div",{className:"text-xs text-gray-500 mb-2",children:T.venue}),A.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"block text-center px-2 py-1 bg-purple-100 text-purple-700 text-[10px] font-bold rounded uppercase hover:bg-purple-200 transition",children:"Find Tickets"})]})},T.id))]})}),t.length>0&&A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Saved Locations"}),A.jsx("div",{className:"grid gap-2",children:t.map(T=>{const E=Zc[T.type],U=(E==null?void 0:E.icon)||ti,Q=j(T);return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:(E==null?void 0:E.color)||"#6B7280"},children:A.jsx(U,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:T.name}),A.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E==null?void 0:E.label,Q&&`  ${Q} from stay`]})]})]}),A.jsx("button",{onClick:()=>V(T.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(Rs,{className:"w-4 h-4"})})]},T.id)})})]}),!_&&t.length===0&&A.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[A.jsx(DN,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),A.jsx("p",{children:"Start by adding your accommodation location"}),A.jsx("p",{className:"text-sm",children:"Then add fetes, costume pickup, and meetup spots"})]})]})}let Fo=[{id:"1",text:"Who's ready for the road?! ",senderId:"2",senderName:"Soca Junkie",createdAt:new Date(Date.now()-864e5).toISOString(),isBot:!1},{id:"2",text:"My costume is ready! The Monarch section looks fire ",senderId:"3",senderName:"Fete King",createdAt:new Date(Date.now()-8e7).toISOString(),isBot:!1},{id:"3",text:"Just waiting on my flight confirmation.",senderId:"4",senderName:"Carnival Baby",createdAt:new Date(Date.now()-7e7).toISOString(),isBot:!1},{id:"4",text:"Welcome to Trinidad! I'm your Carnival Concierge. Ask me anything about fete locations, transport, or safety tips!",senderId:"bot",senderName:"Carnival Concierge",createdAt:new Date(Date.now()-6e4).toISOString(),isBot:!0}];const tK=(t,e,n)=>{if(e)return n(Fo),()=>{};if(!t)return console.warn("subscribeToMessages aborted: No squadId provided."),()=>{};console.log("Subscribing to messages for squad:",t);const r=wn(ke,"squads",t,"messages"),i=Vd(r,Vx("createdAt","asc"),UU(50));return Bs(i,o=>{const l=o.docs.map(u=>{var h;return{id:u.id,...u.data(),createdAt:(h=u.data().createdAt)!=null&&h.toDate?u.data().createdAt.toDate().toISOString():new Date().toISOString()}});n(l)},o=>{console.error(" Chat subscription error:",o)})},nK=async(t,e,n,r,i,s)=>{let o=null;if(r)if(i)o=URL.createObjectURL(r);else try{const u=Xa(Ya,`squads/${t}/${Date.now()}_${r.name}`),h=await sc(u,r);o=await ac(h.ref)}catch(u){console.error("Image upload failed:",u)}const l={text:n,imageUrl:o,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString(),senderId:e.uid||"demo-user",senderName:e.displayName||"Me",senderPhoto:e.photoURL||null,createdAt:i?new Date().toISOString():Vp(),isBot:!1};if(i){const u={id:Date.now().toString(),...l};Fo=[...Fo,u],s([...Fo]),setTimeout(()=>{const h=hE(n||(r?"Nice photo! ":"...")),p={id:(Date.now()+1).toString(),text:h,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:new Date().toISOString(),isBot:!0};Fo=[...Fo,p],s([...Fo])},1500);return}if(!t){console.warn("sendMessage aborted: No squadId provided.");return}console.log("Sending message to Firestore...",{squadId:t,messageData:l}),await ic(wn(ke,"squads",t,"messages"),l),l.isBot||setTimeout(async()=>{const u=hE(n||(r?"Nice photo! ":"...")),h={text:u,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:Vp(),isBot:!0,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString()};try{await ic(wn(ke,"squads",t,"messages"),h),console.log(" AI Concierge replied:",u)}catch(p){console.error("Failed to send AI reply:",p)}},2e3)},hE=t=>{const e=t.toLowerCase();return e.includes("fete")||e.includes("party")?"Based on your schedule, I recommend 'Phuket' on Friday night. It's close to your Airbnb in Woodbrook and tickets are running low! ":e.includes("food")||e.includes("hungry")||e.includes("eat")?"You have to try 'Sauce Doubles' in Curepe! Or if you're near the Savannah, check out the corn soup vendor near the exit. ":e.includes("transport")||e.includes("taxi")||e.includes("uber")?"Rideshare apps like TT RideShare are reliable. For late nights, I recommend pre-booking a driver for your squad. Safety first! ":e.includes("costume")||e.includes("mas")?"Costume pickup for Tribe is at the Queen's Park Savannah. Don't forget your distribution slip and ID! ":"That sounds like a vibe! Remember to stay hydrated . Need help with transport or fete tickets?"};function rK({squadId:t,user:e,isDemoMode:n}){const[r,i]=M.useState([]),[s,o]=M.useState(""),[l,u]=M.useState(null),[h,p]=M.useState(null),g=M.useRef(null),w=M.useRef(null);console.log("SquadChat Rendered. squadId:",t,"User:",e==null?void 0:e.uid),M.useEffect(()=>{const F=tK(n?"demo-squad":t,n,I=>{i(I)});return()=>F()},[t,n]),M.useEffect(()=>{var _;(_=g.current)==null||_.scrollIntoView({behavior:"smooth"})},[r]),M.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);const C=_=>{if(_.target.files&&_.target.files[0]){const F=_.target.files[0];u(F),p(URL.createObjectURL(F))}},b=async _=>{if(_.preventDefault(),!s.trim()&&!l)return;const F=s,I=l;o(""),u(null),p(null);try{await nK(n?"demo-squad":t,e,F,I,n,i)}catch(B){console.error("Failed to send:",B),o(F)}};return t?A.jsxs("div",{className:"flex flex-col h-[65vh] sm:h-[600px] bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[A.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center shadow-md z-10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-full backdrop-blur-sm",children:A.jsx(aE,{className:"w-5 h-5 text-white"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Squad Chat"}),A.jsxs("p",{className:"text-xs text-purple-100 opacity-90 flex items-center gap-1",children:[A.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),"Carnival Concierge Active"]})]})]}),n&&A.jsx("span",{className:"px-2 py-1 text-[10px] font-black tracking-widest bg-yellow-400 text-yellow-900 rounded uppercase",children:"Demo"})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900/50",children:[r.length===0?A.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 opacity-50",children:A.jsx("p",{children:"No messages yet. Say hi!"})}):r.map(_=>{const F=_.senderId===((e==null?void 0:e.uid)||"demo-user"),I=_.isBot;let B=!1,k=null;return _.expiresAt&&(k=new Date(_.expiresAt),new Date>k&&(B=!0)),A.jsx("div",{className:`flex w-full ${F?"justify-end":"justify-start"}`,children:A.jsxs("div",{className:`flex max-w-[85%] sm:max-w-[80%] gap-2 ${F?"flex-row-reverse":"flex-row"}`,children:[A.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center shadow-sm 
                    ${I?"bg-gradient-to-br from-pink-500 to-orange-400":"bg-gray-300 dark:bg-gray-700"}`,children:I?A.jsx(aE,{className:"w-4 h-4 text-white"}):A.jsx(Ac,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{className:`flex flex-col ${F?"items-end":"items-start"}`,children:[A.jsx("span",{className:"text-[10px] text-gray-400 mb-1 ml-1",children:_.senderName}),A.jsxs("div",{className:`px-4 py-2 sm:py-3 rounded-2xl shadow-sm text-sm leading-relaxed relative break-words
                        ${F?"bg-blue-600 text-white rounded-tr-none":I?"bg-white dark:bg-gray-800 border-l-4 border-pink-500 text-gray-800 dark:text-gray-100 rounded-tl-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-tl-none"}
                    `,children:[_.imageUrl&&A.jsx("div",{className:"mb-2",children:B?A.jsxs("div",{className:"w-48 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg flex flex-col items-center justify-center text-gray-500",children:[A.jsx(Kf,{className:"w-8 h-8 mb-1 opacity-50"}),A.jsx("span",{className:"text-xs italic",children:"Image expired"})]}):A.jsxs("div",{className:"relative group",children:[A.jsx("img",{src:_.imageUrl,alt:"Shared",className:"w-48 h-48 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(_.imageUrl,"_blank")}),A.jsx("span",{className:"absolute top-2 right-2 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded backdrop-blur-sm",children:" 24h"})]})}),_.text]}),A.jsx("span",{className:"text-[10px] text-gray-400 mt-1 opacity-50",children:new Date(_.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},_.id)}),A.jsx("div",{ref:g})]}),A.jsxs("form",{onSubmit:b,className:"p-2 sm:p-4 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700",children:[h&&A.jsxs("div",{className:"mb-3 relative inline-block",children:[A.jsx("img",{src:h,alt:"Preview",className:"h-20 w-20 object-cover rounded-lg border border-purple-200"}),A.jsx("button",{type:"button",onClick:()=>{u(null),p(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600",children:A.jsx(ri,{className:"w-3 h-3"})})]}),A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("input",{type:"file",ref:w,onChange:C,accept:"image/*",className:"hidden"}),A.jsx("button",{type:"button",onClick:()=>{var _;return(_=w.current)==null?void 0:_.click()},className:"p-2 sm:p-3 flex-shrink-0 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-xl transition-colors",title:"Upload Image (Expires in 24h)",children:A.jsx(oc,{className:"w-5 h-5"})}),A.jsx("input",{type:"text",value:s,onChange:_=>o(_.target.value),placeholder:l?"Add caption...":"Message squad...",className:"flex-1 px-3 py-2 sm:px-4 sm:py-3 bg-gray-100 dark:bg-gray-900 border-0 rounded-xl focus:ring-2 focus:ring-purple-500 dark:text-white placeholder-gray-400 transition-all text-sm sm:text-base min-w-0"}),A.jsx("button",{type:"submit",disabled:!s.trim()&&!l,className:"p-2 sm:p-3 flex-shrink-0 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-purple-500/30",children:A.jsx(GN,{className:"w-5 h-5"})})]})]})]}):A.jsxs("div",{className:"flex flex-col h-[300px] items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700 p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:A.jsx(Ac,{className:"w-8 h-8 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"No Active Squad"}),A.jsx("p",{className:"text-gray-500 text-sm max-w-xs mx-auto",children:"Join or create a squad above to verify your Road Mode connection and start chatting!"})]})}const xw={ticket:{label:"Ticket",icon:_A,color:"#F59E0B"},photo:{label:"Photo",icon:Vf,color:"#3B82F6"}};function iK({files:t=[],onFilesChange:e,carnivalName:n,carnivalId:r,userId:i}){const[s,o]=M.useState(!1),[l,u]=M.useState(""),[h,p]=M.useState(null),[g,w]=M.useState("ticket"),[C,b]=M.useState(""),_=M.useRef(null),F=async V=>{const j=V.target.files[0];if(!j)return;const T=10*1024*1024;if(j.size>T){alert("File too large. Maximum size is 10MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp","application/pdf"].includes(j.type)){alert("Invalid file type. Please upload an image (JPG, PNG, GIF, WebP) or PDF.");return}o(!0),u("Uploading...");try{const U=Date.now(),Q=j.name.split(".").pop(),D=`users/${i}/carnivals/${r}/${U}.${Q}`,K=Xa(Ya,D);await sc(K,j);const R=await ac(K),Y={id:U.toString(),name:C||j.name.split(".")[0],type:g,url:R,storagePath:D,originalName:j.name,uploadedAt:new Date().toISOString(),fileType:j.type};e([...t,Y]),b(""),u(""),_.current&&(_.current.value="")}catch(U){console.error("Upload error:",U),alert("Failed to upload file. Please try again.")}o(!1)},I=async V=>{if(confirm("Are you sure you want to delete this file?"))try{const j=Xa(Ya,V.storagePath);await iN(j),e(t.filter(T=>T.id!==V.id))}catch(j){console.error("Delete error:",j),e(t.filter(T=>T.id!==V.id))}},B=V=>{const j=document.createElement("a");j.href=V.url,j.download=V.originalName||V.name,j.target="_blank",document.body.appendChild(j),j.click(),document.body.removeChild(j)},k=t.filter(V=>V.type==="ticket"),O=t.filter(V=>V.type==="photo");return A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(Vf,{className:"w-5 h-5 text-purple-500"}),"Media Vault"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Store your tickets, photos, and important documents for ",n]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-4 border border-purple-100 dark:border-purple-800",children:[A.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Upload New File"}),A.jsxs("div",{className:"grid gap-3",children:[A.jsxs("div",{className:"flex gap-3",children:[A.jsx("input",{type:"text",placeholder:"File label (e.g., 'Tribe Costume Receipt')",value:C,onChange:V=>b(V.target.value),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:g,onChange:V=>w(V.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:Object.entries(xw).map(([V,{label:j}])=>A.jsx("option",{value:V,children:j},V))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{ref:_,type:"file",accept:"image/*,.pdf",onChange:F,className:"hidden",id:"file-upload"}),A.jsx("label",{htmlFor:"file-upload",className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed rounded-lg cursor-pointer transition ${s?"border-gray-300 bg-gray-50 dark:bg-gray-800 cursor-not-allowed":"border-purple-300 hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20"}`,children:s?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-5 h-5 animate-spin text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:l})]}):A.jsxs(A.Fragment,{children:[A.jsx(Z3,{className:"w-5 h-5 text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Click to upload image or PDF (max 10MB)"})]})})]})]})]}),k.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(_A,{className:"w-4 h-4 text-yellow-500"}),"Tickets (",k.length,")"]}),A.jsx("div",{className:"grid gap-3",children:k.map(V=>A.jsx(sK,{file:V,onView:p,onDownload:B,onDelete:I},V.id))})]}),O.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(Vf,{className:"w-4 h-4 text-blue-500"}),"Photos (",O.length,")"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:O.map(V=>A.jsx(aK,{file:V,onView:p,onDownload:B,onDelete:I},V.id))})]}),t.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(Vf,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No files uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload your tickets, costume receipts, and travel photos"})]}),h&&A.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>p(null),children:A.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",onClick:V=>V.stopPropagation(),children:[A.jsx("button",{onClick:()=>p(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300",children:A.jsx(ri,{className:"w-8 h-8"})}),h.fileType==="application/pdf"?A.jsx("iframe",{src:h.url,className:"w-full h-[80vh] rounded-lg"}):A.jsx("img",{src:h.url,alt:h.name,className:"max-w-full max-h-[80vh] mx-auto rounded-lg"}),A.jsx("p",{className:"text-white text-center mt-4 font-medium",children:h.name})]})})]})}function sK({file:t,onView:e,onDownload:n,onDelete:r}){const i=xw[t.type]||xw.ticket,s=i.icon;return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${i.color}20`},children:A.jsx(s,{className:"w-5 h-5",style:{color:i.color}})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:t.name}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.uploadedAt).toLocaleDateString()})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(f_,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 text-gray-500 hover:text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition",children:A.jsx(qd,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(Rs,{className:"w-4 h-4"})})]})]})}function aK({file:t,onView:e,onDownload:n,onDelete:r}){return A.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600",children:[A.jsx("img",{src:t.url,alt:t.name,className:"w-full h-32 object-cover cursor-pointer",onClick:()=>e(t)}),A.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(f_,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(qd,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 bg-red-500/50 hover:bg-red-500/70 rounded-full text-white transition",children:A.jsx(Rs,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-2 truncate",children:t.name})]})}const Vh={trinidad:"https://open.spotify.com/embed/playlist/2H61cIhlAeFVmreSMqvui3",jamaica:"https://open.spotify.com/embed/playlist/37i9dQZF1DX82pCGH5USnM",miami:"https://open.spotify.com/embed/playlist/37i9dQZF1DXS1X4r7p38D5",stlucia:"https://open.spotify.com/embed/playlist/37i9dQZF1DX62XscWx9t6h",barbados:"https://open.spotify.com/embed/playlist/37i9dQZF1DX23V8kYg8jC2",stkitts:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stcroix:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stthomas:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",default:"https://open.spotify.com/embed/playlist/28bCuQ5IhyPbmvJx30ZMea"};function oK({activeCarnivalId:t,isPremium:e}){const[n,r]=M.useState(!1),[i,s]=M.useState(!1),[o,l]=M.useState(!1),u=()=>{if(!t)return{key:"default",url:Vh.default};const g=Object.keys(Vh).find(C=>t.toLowerCase().includes(C)),w=Vh[g]||Vh.default;return{key:g||"default (fallback)",url:w}},{key:h,url:p}=u();return n?A.jsxs("div",{className:`fixed z-40 transition-all duration-300 shadow-2xl overflow-hidden bg-black/90 backdrop-blur-md border border-white/20 rounded-t-2xl sm:rounded-2xl
      ${i?"bottom-24 right-4 w-64 h-16 rounded-full":"bottom-0 sm:bottom-24 right-0 sm:right-4 w-full sm:w-80 h-[400px]"}`,children:[A.jsxs("div",{className:`flex items-center justify-between p-3 bg-gradient-to-r from-pink-600 to-purple-700 text-white
        ${i?"h-full":""}`,children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(xA,{className:"w-5 h-5 animate-pulse"}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-bold text-sm",children:i?"Carnival Vibes":o?"Team Soca Live":"Soca Vibes Player"}),!i&&A.jsx("button",{onClick:()=>l(!o),className:"text-[10px] bg-white/20 px-2 py-0.5 rounded-full hover:bg-white/30 transition text-left w-fit",children:o?"Switch to Playlist":"Switch to Live Radio"})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[i?A.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(j3,{className:"w-4 h-4"})}):A.jsx("button",{onClick:()=>s(!0),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(O3,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(ri,{className:"w-4 h-4"})})]})]}),!i&&A.jsxs("div",{className:"h-[calc(100%-48px)] bg-black relative",children:[!e&&!o&&A.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-yellow-500/90 text-black text-xs font-bold px-2 py-1 text-center",children:"Upgrade directly in Spotify for ad-free listening"}),o?A.jsx("iframe",{src:"https://ice23.securenetsystems.net/TSDC",width:"100%",height:"100%",frameBorder:"0",allow:"autoplay; encrypted-media;",title:"Team Soca Live"}):A.jsx("iframe",{style:{borderRadius:"12px"},src:p,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Soca Playlist"})]})]}):A.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-24 right-4 z-40 bg-gradient-to-r from-pink-500 to-purple-600 text-white p-3 rounded-full shadow-lg hover:scale-110 transition-transform animate-bounce-slow","aria-label":"Open Vibes Player",children:A.jsx(xA,{className:"w-6 h-6"})})}function AK({users:t,onDeleteUser:e,onDeleteAll:n,onClose:r}){const[i,s]=M.useState(new Set),[o,l]=M.useState(!1),u=M.useMemo(()=>t.filter(w=>{var _,F;const C=((_=w.profile)==null?void 0:_.email)&&w.profile.email.trim()!=="",b=((F=w.profile)==null?void 0:F.displayName)&&w.profile.displayName.trim()!==""&&w.profile.displayName!=="User";return!C&&!b}),[t]),h=w=>{const C=new Set(i);C.has(w)?C.delete(w):C.add(w),s(C)},p=()=>{i.size===u.length?s(new Set):s(new Set(u.map(w=>w.id)))},g=()=>{o?(n(Array.from(i)),l(!1),s(new Set)):l(!0)};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-xl overflow-hidden animate-fadeIn",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-red-50 dark:bg-red-900/10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400",children:A.jsx(WN,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Database Cleanup"}),A.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:["Found ",u.length," incomplete records"]})]})]}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition",children:A.jsx(ri,{className:"w-5 h-5 text-gray-500"})})]}),A.jsx("div",{className:"p-4",children:u.length===0?A.jsxs("div",{className:"text-center py-12 text-gray-500",children:[A.jsx(vA,{className:"w-12 h-12 mx-auto mb-3 text-green-500 opacity-50"}),A.jsx("p",{children:"Database is clean! No incomplete users found."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:i.size>0&&i.size===u.length,onChange:p,className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),A.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select All (",u.length,")"]})]}),i.size>0&&A.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition ${o?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-300"}`,children:[A.jsx(Rs,{className:"w-4 h-4"}),o?"CONFIRM DELETION":`Delete (${i.size})`]})]}),A.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:A.jsxs("table",{className:"w-full text-sm text-left",children:[A.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-xs uppercase text-gray-500 font-medium sticky top-0 backdrop-blur-sm",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-3 w-10"}),A.jsx("th",{className:"p-3",children:"User ID"}),A.jsx("th",{className:"p-3",children:"Created"}),A.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),A.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:u.map(w=>{var C;return A.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition",children:[A.jsx("td",{className:"p-3",children:A.jsx("input",{type:"checkbox",checked:i.has(w.id),onChange:()=>h(w.id),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"})}),A.jsx("td",{className:"p-3 font-mono text-xs text-gray-500",children:w.id}),A.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-300",children:(C=w.createdAt)!=null&&C.toDate?w.createdAt.toDate().toLocaleDateString():"Unknown"}),A.jsx("td",{className:"p-3 text-right",children:A.jsx("button",{onClick:()=>e(w.id),className:"text-gray-400 hover:text-red-500 transition",title:"Delete single user",children:A.jsx(Rs,{className:"w-4 h-4"})})})]},w.id)})})]})})]})}),u.length>0&&A.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 border-t border-yellow-100 dark:border-yellow-900/20 flex items-start gap-3 text-xs text-yellow-800 dark:text-yellow-200",children:[A.jsx(PN,{className:"w-4 h-4 shrink-0 mt-0.5"}),A.jsxs("p",{children:[A.jsx("strong",{children:"Warning:"})," Deleting users is permanent. This will remove their record from the 'users' collection. If they sign in again, a new record will be created."]})]})]})}const lK=({onScheduleDetected:t})=>{const[e,n]=M.useState(!1),[r,i]=M.useState(""),[s,o]=M.useState(""),l=window.SpeechRecognition||window.webkitSpeechRecognition;if(!l)return null;const u=new l;u.continuous=!1,u.lang="en-US",u.interimResults=!1;const h=()=>{n(!0),o('Listening... Say "Add [Event] for [Day] at [Time]"'),u.start()},p=()=>{n(!1),u.stop()};u.onresult=w=>{const C=w.results[0][0].transcript;i(C),o("Processing..."),g(C),n(!1)},u.onerror=w=>{console.error("Voice Error:",w.error),n(!1),o("Error listening. Try again.")};const g=w=>{let C=w,b="",_="";const F=w.toLowerCase();(F.startsWith("add")||F.startsWith("schedule")||F.startsWith("remind me to"))&&(C=w.replace(/^(Add|Schedule|Remind me to)\s+/i,""));const I=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(const k of I)F.includes(k.toLowerCase())&&(b=k,C=C.replace(new RegExp(`(on|for)?\\s*${k}`,"i"),""));const B=C.match(/(\d{1,2}(?::\d{2})?\s?(?:am|pm)?)/i);B&&(B[0].toLowerCase().includes("am")||B[0].toLowerCase().includes("pm")||B[0].includes(":"))&&(_=B[0],C=C.replace(B[0],"")),C=C.replace(/\s+(at|for|on)\s*$/i,"").trim(),C=C.replace(/^\s+(at|for|on)\s+/i,"").trim(),C?(o(`Found: ${C} (${b||"No Day"} @ ${_||"No Time"})`),t({name:C,day:b||"Friday",time:_||"12:00 PM",note:`Voice: "${w}"`})):o("Could not understand event name.")};return A.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700 mt-4",children:[A.jsxs("button",{onClick:e?p:h,className:`
            flex items-center gap-2 px-6 py-3 rounded-full font-bold transition-all transform hover:scale-105
            ${e?"bg-red-500 text-white animate-pulse shadow-red-500/50 shadow-lg":"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg"}
        `,children:[e?A.jsx(M3,{className:"w-5 h-5"}):A.jsx(ON,{className:"w-5 h-5"}),e?"Stop Listening":"Voice Add Event (Free)"]}),(r||s)&&A.jsxs("div",{className:"mt-3 text-center",children:[A.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r&&`"${r}"`}),A.jsx("p",{className:"text-xs text-blue-500 mt-1 font-mono",children:s})]})]})},Kh=[{id:"default-fete-map-banner",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-banner",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-banner",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-banner",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-fete-map-inline",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-inline",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-inline",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-inline",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"madd-colors-banner-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"banner",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1},{id:"madd-colors-inline-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"inline",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1}];function zh({placement:t="banner",className:e="",onUpgradeClick:n}){const[r,i]=M.useState([]),[s,o]=M.useState(0),[l,u]=M.useState(!1),[h,p]=M.useState(!0),[g,w]=M.useState(null);if(M.useEffect(()=>{p(!0),w(null);const B=wn(ke,"promoAds"),k=Vd(B,Hx("active","==",!0)),O=Bs(k,V=>{const j=[];V.forEach(Q=>{j.push({id:Q.id,...Q.data()})});const T=j.filter(Q=>Q.placement===t),E=Kh.find(Q=>Q.id.includes("madd-colors")&&Q.placement===t);let U=T;if(T.length===0?U=Kh.filter(Q=>Q.placement===t):E&&(T.some(D=>D.id.includes("madd-colors"))||(U=[...T,{...E,isDefault:!1}])),U.length>0)i(U);else{const Q=Kh.filter(D=>D.placement===t);i(Q)}p(!1)},V=>{console.error(`PromoAd [${t}] error:`,V);const j=Kh.filter(T=>T.placement===t);i(j),w(null),p(!1)});return()=>O()},[t]),M.useEffect(()=>{if(r.length<=1)return;const B=setInterval(()=>{o(k=>(k+1)%r.length)},8e3);return()=>clearInterval(B)},[r.length]),h||l||r.length===0)return null;const C=Math.min(s,r.length-1),b=r[C];if(!b||!b.imageUrl)return null;const _=b.mediaType==="video",F=b.id.includes("madd-colors")?!1:b.isDefault;b.id.includes("madd-colors")||b.linkUrl;const I=()=>{F&&n?n():b.linkUrl&&window.open(b.linkUrl,"_blank","noopener,noreferrer")};return A.jsx("div",{className:`p-4 relative ${e}`,children:A.jsxs("div",{onClick:I,className:`relative overflow-hidden rounded-lg shadow-md ${b.linkUrl||F?"cursor-pointer hover:shadow-lg transition-shadow":""}`,children:[_?A.jsx("video",{src:b.imageUrl,className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onError:B=>console.error("Video load error:",B)}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Promotion",className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},onError:B=>{console.error("Image load error:",b.imageUrl),B.target.style.display="none"}}),b.title&&A.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:[A.jsx("p",{className:"text-white text-sm font-bold truncate",children:b.title}),F&&A.jsx("p",{className:"text-yellow-300 text-xs font-medium",children:"Tap to upgrade to Premium"})]}),A.jsx("div",{className:"absolute top-1 left-1 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded",children:F?"PREMIUM":"AD"}),A.jsx("button",{onClick:B=>{B.stopPropagation(),u(!0)},className:"absolute top-1 right-1 p-1 bg-black/50 hover:bg-black/70 text-white rounded-full transition",children:A.jsx(ri,{className:"w-3 h-3"})}),r.length>1&&A.jsx("div",{className:"absolute bottom-2 right-2 flex gap-1",children:r.map((B,k)=>A.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition ${k===s?"bg-white":"bg-white/50"}`},k))})]})})}const fE=[{id:"banner",label:"Top Banner"},{id:"sidebar",label:"Sidebar"},{id:"inline",label:"Inline (Between Sections)"}];function cK(){const[t,e]=M.useState([]),[n,r]=M.useState(!1),[i,s]=M.useState(""),[o,l]=M.useState(!1),[u,h]=M.useState({title:"",linkUrl:"",placement:"banner"}),p=M.useRef(null);M.useEffect(()=>{const b=wn(ke,"promoAds"),_=Bs(b,F=>{const I=[];F.forEach(B=>{I.push({id:B.id,...B.data()})}),I.sort((B,k)=>(k.createdAt||0)-(B.createdAt||0)),e(I)});return()=>_()},[]);const g=async b=>{const _=b.target.files[0];if(!_)return;const F=_.type.startsWith("video/"),I=F?10*1024*1024:5*1024*1024;if(_.size>I){alert(`File too large. Maximum size is ${F?"10MB for videos":"5MB for images"}.`);return}const B=["image/jpeg","image/png","image/gif","image/webp"],k=["video/mp4","video/webm"];if(![...B,...k].includes(_.type)){alert("Invalid file type. Please upload JPG, PNG, GIF, WebP, MP4, or WebM.");return}r(!0),s("Preparing upload...");const V=setTimeout(()=>{r(!1),s(""),alert("Upload timed out after 60 seconds. Please check your connection and try again."),p.current&&(p.current.value="")},6e4);try{const j=Date.now(),T=_.name.split(".").pop(),E=`promoAds/${j}.${T}`,U=Xa(Ya,E);s("Uploading to storage..."),console.log("Uploading file to Storage...",E),await sc(U,_),s("Getting download URL...");const Q=await ac(U);console.log("File uploaded, URL:",Q);const D=_.type.startsWith("video/"),K={title:u.title||"",linkUrl:u.linkUrl||"",placement:u.placement,imageUrl:Q,mediaType:D?"video":"image",storagePath:E,active:!0,createdAt:j};s("Saving ad data..."),console.log("Saving ad metadata to Firestore...",K);const R=await ic(wn(ke,"promoAds"),K);console.log("Ad saved to Firestore successfully, ID:",R.id),clearTimeout(V),alert("Ad uploaded successfully!"),h({title:"",linkUrl:"",placement:"banner"}),l(!1),p.current&&(p.current.value="")}catch(j){clearTimeout(V),console.error("Upload error:",j),console.error("Error code:",j.code),console.error("Error message:",j.message),console.error("Full error:",JSON.stringify(j,null,2)),j.code==="storage/unauthorized"?alert("Upload failed: You do not have permission to upload ads. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):j.code==="storage/canceled"?alert("Upload was cancelled."):j.code==="permission-denied"?alert("Firestore permission denied: You do not have permission to save ad metadata. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):alert(`Failed to upload ad: ${j.code||"Unknown error"} - ${j.message||"Please try again."}`)}r(!1),s("")},w=async b=>{try{await mA($e(ke,"promoAds",b.id),{active:!b.active})}catch(_){console.error("Toggle error:",_)}},C=async b=>{if(confirm("Delete this ad?"))try{if(b.storagePath){const _=Xa(Ya,b.storagePath);await iN(_).catch(()=>{})}await Jm($e(ke,"promoAds",b.id))}catch(_){console.error("Delete error:",_)}};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(Kf,{className:"w-5 h-5 text-orange-500"}),"Ad Manager"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload promotional ads and flyers for free users"})]}),A.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition",children:[A.jsx(KN,{className:"w-4 h-4"}),"New Ad"]})]}),o&&A.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4 border border-orange-200 dark:border-orange-800 space-y-3",children:[A.jsxs("div",{className:"grid gap-3",children:[A.jsx("input",{type:"text",placeholder:"Ad title (optional)",value:u.title,onChange:b=>h({...u,title:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"url",placeholder:"Link URL (optional) - where to go when clicked",value:u.linkUrl,onChange:b=>h({...u,linkUrl:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:u.placement,onChange:b=>h({...u,placement:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:fE.map(b=>A.jsx("option",{value:b.id,children:b.label},b.id))})]}),A.jsx("input",{ref:p,type:"file",accept:"image/*,video/mp4,video/webm",onChange:g,className:"hidden",id:"ad-upload"}),A.jsx("label",{htmlFor:"ad-upload",className:`flex flex-col items-center justify-center gap-2 px-4 py-4 border-2 border-dashed rounded-lg cursor-pointer transition ${n?"border-gray-300 bg-gray-50 cursor-not-allowed":"border-orange-300 hover:border-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/30"}`,children:n?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-5 h-5 animate-spin text-orange-500"}),A.jsx("span",{className:"text-orange-600",children:i||"Uploading..."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Kf,{className:"w-5 h-5 text-orange-500"}),A.jsx(J3,{className:"w-5 h-5 text-orange-500"})]}),A.jsx("span",{className:"text-orange-600 font-medium",children:"Click to upload image or video"}),A.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Images: max 5MB (1200x300 recommended) | Videos: max 10MB (MP4, WebM)"})]})})]}),t.length>0?A.jsx("div",{className:"space-y-3",children:t.map(b=>{var _;return A.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-lg border transition ${b.active?"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 opacity-60"}`,children:[b.mediaType==="video"?A.jsx("video",{src:b.imageUrl,className:"w-20 h-14 object-cover rounded",muted:!0}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Ad",className:"w-20 h-14 object-cover rounded"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:b.title||"Untitled Ad"}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((_=fE.find(F=>F.id===b.placement))==null?void 0:_.label)||b.placement,b.linkUrl&&"  Has link"]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>w(b),className:`p-2 rounded-lg transition ${b.active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:b.active?"Active - Click to disable":"Inactive - Click to enable",children:b.active?A.jsx(ZN,{className:"w-5 h-5"}):A.jsx($N,{className:"w-5 h-5"})}),b.linkUrl&&A.jsx("a",{href:b.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(rg,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>C(b),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(Rs,{className:"w-4 h-4"})})]})]},b.id)})}):A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(Kf,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No ads uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload flyers and promotions to show to free users"})]})]})}const Jc="carnival-planner-v1",uK=["djkrss1@gmail.com"],dK=zr(Pn);function hK(){const[t,e]=M.useState([]),[n,r]=M.useState(!0),[i,s]=M.useState(null),[o,l]=M.useState(""),[u,h]=M.useState(null),[p,g]=M.useState({total:0,premium:0,free:0}),[w,C]=M.useState(!1),[b,_]=M.useState(!1),[F,I]=M.useState(null),[B,k]=M.useState(!1),[O,V]=M.useState(!1),j=async Y=>{if(confirm("Are you sure you want to delete this user? This cannot be undone."))try{await Py(async()=>{const{deleteDoc:oe}=await Promise.resolve().then(()=>Mb);return{deleteDoc:oe}},void 0).then(({deleteDoc:oe})=>{oe($e(ke,"users",Y))}),e(oe=>oe.filter(Ae=>Ae.id!==Y)),g(oe=>({...oe,total:oe.total-1,free:oe.free-1}))}catch(oe){console.error("Delete error:",oe),alert("Failed to delete user: "+oe.message)}},T=async Y=>{try{const{deleteDoc:oe}=await Py(async()=>{const{deleteDoc:fe}=await Promise.resolve().then(()=>Mb);return{deleteDoc:fe}},void 0);let Ae=0;for(const fe of Y)await oe($e(ke,"users",fe)),Ae++;e(fe=>fe.filter(G=>!Y.includes(G.id))),g(fe=>({...fe,total:fe.total-Ae,free:fe.free-Ae})),alert(`Successfully deleted ${Ae} users.`)}catch(oe){console.error("Batch delete error:",oe),alert("Batch delete failed partially: "+oe.message)}},E=async()=>{k(!0),I("Migrating users from Firebase Auth...");try{const oe=await br(dK,"migrateAuthUsers")({});I(oe.data.message),await Q()}catch(Y){console.error("Auth migration error:",Y),I(`Auth migration failed: ${Y.message}`)}k(!1)},U=async()=>{var Y,oe,Ae,fe,G,ae,ee,ve,ue,he,ge,de,se,Fe,et,vr;_(!0),I("Starting migration...");try{const Lt=new Map;let On=[];try{const yt=await Do(wn(ke,"user-activity"));console.log("[Migration] Found",yt.size,"user-activity records"),On.push(`${yt.size} activity records`);for(const wt of yt.docs){const Je=wt.data(),en=Je.uid;if(en)if(!Lt.has(en))Lt.set(en,{createdAt:Je.loginAt,lastLoginAt:Je.loginAt,email:Je.email||null,displayName:Je.displayName||null});else{const vt=Lt.get(en);((oe=(Y=Je.loginAt)==null?void 0:Y.toMillis)==null?void 0:oe.call(Y))<((fe=(Ae=vt.createdAt)==null?void 0:Ae.toMillis)==null?void 0:fe.call(Ae))&&(vt.createdAt=Je.loginAt),((ae=(G=Je.loginAt)==null?void 0:G.toMillis)==null?void 0:ae.call(G))>((ve=(ee=vt.lastLoginAt)==null?void 0:ee.toMillis)==null?void 0:ve.call(ee))&&(vt.lastLoginAt=Je.loginAt),!vt.email&&Je.email&&(vt.email=Je.email),!vt.displayName&&Je.displayName&&(vt.displayName=Je.displayName)}}}catch(yt){console.log("[Migration] Could not fetch user-activity:",yt.message)}try{const yt=await Do(wn(ke,"artifacts",Jc,"users"));console.log("[Migration] Found",yt.size,"artifact users"),On.push(`${yt.size} artifact users`);for(const wt of yt.docs){const Je=wt.id,en=wt.data();Lt.has(Je)||Lt.set(Je,{createdAt:en.createdAt||Ve.now(),lastLoginAt:en.lastLoginAt||Ve.now(),email:null,displayName:null})}}catch(yt){console.log("[Migration] Could not fetch artifacts:",yt.message)}I(`Found ${Lt.size} unique users (${On.join(", ")})...`);let Cn=0;for(const[yt,wt]of Lt)try{const Je=$e(ke,"users",yt),en=await mi(Je);if(!en.exists())await Zn(Je,wt),Cn++;else{const vt=en.data(),bn={};wt.createdAt&&(!vt.createdAt||((he=(ue=wt.createdAt).toMillis)==null?void 0:he.call(ue))<((de=(ge=vt.createdAt)==null?void 0:ge.toMillis)==null?void 0:de.call(ge)))&&(bn.createdAt=wt.createdAt),wt.lastLoginAt&&(!vt.lastLoginAt||((Fe=(se=wt.lastLoginAt).toMillis)==null?void 0:Fe.call(se))>((vr=(et=vt.lastLoginAt)==null?void 0:et.toMillis)==null?void 0:vr.call(et)))&&(bn.lastLoginAt=wt.lastLoginAt),!vt.email&&wt.email&&(bn.email=wt.email),!vt.displayName&&wt.displayName&&(bn.displayName=wt.displayName),Object.keys(bn).length>0&&(await Zn(Je,bn,{merge:!0}),Cn++)}}catch(Je){console.error(`Failed to migrate user ${yt}:`,Je)}I(`Migration complete! Migrated ${Cn} users.`),await Q()}catch(Lt){console.error("Migration error:",Lt),I(`Migration failed: ${Lt.message}`)}_(!1)},Q=async()=>{var Y,oe,Ae,fe,G;r(!0),s(null);try{console.log("[AdminAnalytics] Fetching users...");const ae=new Map;try{console.log("[AdminAnalytics] Attempting to fetch users collection...");const ue=await Do(wn(ke,"users"));console.log("[AdminAnalytics] SUCCESS: Found",ue.size,"user documents in users collection"),ue.docs.forEach(he=>console.log("[AdminAnalytics] User doc:",he.id,he.data()));for(const he of ue.docs){const ge=he.id,de=he.data();ae.set(ge,{id:ge,createdAt:de.createdAt,lastLoginAt:de.lastLoginAt,profile:{email:de.email||null,displayName:de.displayName||null},source:"users"})}}catch(ue){console.log("[AdminAnalytics] Could not fetch users collection:",ue.message)}try{console.log("[AdminAnalytics] Attempting to fetch user-activity collection...");const ue=await Do(wn(ke,"user-activity"));console.log("[AdminAnalytics] SUCCESS: Found",ue.size,"activity records");for(const he of ue.docs){const ge=he.data(),de=ge.uid;if(de&&!ae.has(de))ae.set(de,{id:de,createdAt:ge.loginAt||null,lastLoginAt:ge.loginAt||null,profile:{email:ge.email||null,displayName:ge.displayName||null},source:"user-activity"});else if(de&&ae.has(de)){const se=ae.get(de);ge.loginAt&&(!se.lastLoginAt||((oe=(Y=ge.loginAt).toMillis)==null?void 0:oe.call(Y))>((fe=(Ae=se.lastLoginAt).toMillis)==null?void 0:fe.call(Ae)))&&(se.lastLoginAt=ge.loginAt),!se.profile.email&&ge.email&&(se.profile.email=ge.email)}}}catch(ue){console.log("[AdminAnalytics] Could not fetch user-activity collection:",ue.message)}try{console.log("[AdminAnalytics] Attempting to fetch artifacts collection...");const ue=await Do(wn(ke,"artifacts",Jc,"users"));console.log("[AdminAnalytics] SUCCESS: Found",ue.size,"users in artifacts collection");for(const he of ue.docs){const ge=he.id;if(!ae.has(ge)){const de=he.data();ae.set(ge,{id:ge,createdAt:de.createdAt||null,lastLoginAt:de.lastLoginAt||null,profile:{email:null,displayName:null},source:"artifacts"})}}}catch(ue){console.log("[AdminAnalytics] Could not fetch artifacts collection:",ue.message)}const ee=[];for(const[ue,he]of ae){try{const de=$e(ke,"users",ue,"profile","info"),se=await mi(de);if(se.exists()){const Fe=se.data();he.profile={...he.profile,...Fe,email:Fe.email||he.profile.email,displayName:Fe.displayName||he.profile.displayName}}}catch{}he.isPremium=!1,he.carnivalCount=0;try{const de=$e(ke,"users",ue,"apps",Jc),se=await mi(de);if(se.exists()){const Fe=se.data();he.isPremium=!!Fe.premiumActive,Fe.selectedCarnivals&&(he.carnivalCount=Object.keys(Fe.selectedCarnivals).length)}}catch{try{const se=$e(ke,"artifacts",Jc,"users",ue),Fe=await mi(se);if(Fe.exists()){const et=Fe.data();he.isPremium=!!et.premiumActive,et.selectedCarnivals&&(he.carnivalCount=Object.keys(et.selectedCarnivals).length)}}catch{}}const ge=((G=he.profile)==null?void 0:G.email)||"";ge&&uK.includes(ge.toLowerCase())&&(he.isPremium=!0,he.premiumOverride=!0),ee.push(he)}console.log("[AdminAnalytics] Total unique users found:",ee.length),ee.sort((ue,he)=>{var se,Fe,et,vr;const ge=((Fe=(se=ue.createdAt)==null?void 0:se.toDate)==null?void 0:Fe.call(se))||new Date(0);return(((vr=(et=he.createdAt)==null?void 0:et.toDate)==null?void 0:vr.call(et))||new Date(0))-ge}),e(ee);const ve=ee.filter(ue=>ue.isPremium).length;g({total:ee.length,premium:ve,free:ee.length-ve})}catch(ae){console.error("Error fetching users:",ae),s(ae.message||"Failed to fetch users")}r(!1)};M.useEffect(()=>{Q()},[]);const D=async()=>{C(!0),await Q(),C(!1)},K=async(Y,oe,Ae)=>{if(Ae){alert("This user has premium via email override. Cannot toggle manually.");return}try{const fe=$e(ke,"users",Y,"apps",Jc);await Zn(fe,{premiumActive:!oe,premiumUpdatedAt:Ve.now(),premiumUpdatedBy:"admin-manual"},{merge:!0}),e(G=>G.map(ae=>ae.id===Y?{...ae,isPremium:!oe}:ae)),g(G=>({...G,premium:oe?G.premium-1:G.premium+1,free:oe?G.free+1:G.free-1})),alert(`Premium ${oe?"disabled":"enabled"} for user.`)}catch(fe){console.error("Error toggling premium:",fe),alert("Failed to update premium status: "+fe.message)}},R=t.filter(Y=>{var G,ae;const oe=((G=Y.profile)==null?void 0:G.email)||Y.id,Ae=((ae=Y.profile)==null?void 0:ae.displayName)||"",fe=o.toLowerCase();return oe.toLowerCase().includes(fe)||Ae.toLowerCase().includes(fe)});return n?A.jsxs("div",{className:"flex items-center justify-center py-12",children:[A.jsx(an,{className:"w-8 h-8 animate-spin text-blue-500"}),A.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading user data..."})]}):i?A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:i}),A.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(dr,{className:"w-5 h-5 text-blue-500"}),"User Analytics"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View and manage registered users"})]}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[A.jsxs("button",{onClick:E,disabled:B,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition disabled:opacity-50",children:[B?A.jsx(an,{className:"w-4 h-4 animate-spin"}):A.jsx(qd,{className:"w-4 h-4"}),"Migrate Auth Users"]}),A.jsxs("button",{onClick:U,disabled:b,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:[b?A.jsx(an,{className:"w-4 h-4 animate-spin"}):A.jsx(dr,{className:"w-4 h-4"}),"Migrate Data"]}),A.jsxs("button",{onClick:()=>V(!O),className:`flex items-center gap-1 px-3 py-1.5 text-sm rounded-lg transition ${O?"bg-red-600 text-white hover:bg-red-700":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}`,children:[A.jsx(WN,{className:"w-4 h-4"}),O?"Close Cleanup":"Cleanup Tool"]}),A.jsxs("button",{onClick:D,disabled:w,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:[A.jsx(z3,{className:`w-4 h-4 ${w?"animate-spin":""}`}),"Refresh"]})]})]}),O&&A.jsx(AK,{users:t,onDeleteUser:j,onDeleteAll:T,onClose:()=>V(!1)}),F&&A.jsx("div",{className:`p-3 rounded-lg text-sm ${F.includes("failed")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:F}),A.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(dr,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Total Users"})]}),A.jsx("p",{className:"text-3xl font-bold",children:p.total})]}),A.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(AE,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Premium"})]}),A.jsx("p",{className:"text-3xl font-bold",children:p.premium})]}),A.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(dr,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Free"})]}),A.jsx("p",{className:"text-3xl font-bold",children:p.free})]})]}),A.jsxs("div",{className:"relative",children:[A.jsx(zN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search by email or name...",value:o,onChange:Y=>l(Y.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),A.jsx("div",{className:"space-y-2",children:R.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:o?"No users match your search":"No users found"}):R.map(Y=>{var oe,Ae,fe,G;return A.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[A.jsxs("div",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600",onClick:()=>h(u===Y.id?null:Y.id),children:[(oe=Y.profile)!=null&&oe.avatarUrl?A.jsx("img",{src:Y.profile.avatarUrl,alt:"",className:"w-10 h-10 rounded-full object-cover"}):A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-500 flex items-center justify-center",children:A.jsx(dr,{className:"w-5 h-5 text-gray-400 dark:text-gray-300"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:((Ae=Y.profile)==null?void 0:Ae.displayName)||"No name"}),Y.isPremium&&A.jsxs("span",{className:`px-1.5 py-0.5 text-xs rounded-full flex items-center gap-1 ${Y.premiumOverride?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:[A.jsx(AE,{className:"w-3 h-3"}),Y.premiumOverride?"Admin":"Premium"]})]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:((fe=Y.profile)==null?void 0:fe.email)||Y.id})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[Y.carnivalCount>0&&A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[A.jsx(ti,{className:"w-4 h-4"}),Y.carnivalCount," carnival",Y.carnivalCount!==1?"s":""]}),u===Y.id?A.jsx(U3,{className:"w-5 h-5 text-gray-400"}):A.jsx(k3,{className:"w-5 h-5 text-gray-400"})]})]}),u===Y.id&&A.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"User ID"}),A.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 truncate",children:Y.id})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:((G=Y.profile)==null?void 0:G.bio)||"No bio"})]})]}),A.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-600",children:[A.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Premium Status"}),A.jsx("button",{onClick:ae=>{ae.stopPropagation(),K(Y.id,Y.isPremium,Y.premiumOverride)},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition ${Y.isPremium?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:Y.isPremium?A.jsxs(A.Fragment,{children:[A.jsx(ZN,{className:"w-5 h-5"}),A.jsx("span",{children:"Premium Active"})]}):A.jsxs(A.Fragment,{children:[A.jsx($N,{className:"w-5 h-5"}),A.jsx("span",{children:"Free User"})]})})]})]})]},Y.id)})}),A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:["Showing ",R.length," of ",t.length," users"]})]})}const YN=[{name:"TRIBE Carnival",carnivalId:"trinidad",type:"mas",website:"https://tribecarnival.com",tags:["Premium","High Energy","Popular"]},{name:"The Lost Tribe",carnivalId:"trinidad",type:"mas",website:"https://losttribecarnival.com",tags:["Creative","Thematic","Premium"]},{name:"Bliss Carnival",carnivalId:"trinidad",type:"mas",website:"https://blisscarnival.com",tags:["Premium","Exclusive"]},{name:"YUMA Vibe",carnivalId:"trinidad",type:"mas",website:"https://yumavibe.com",tags:["Young","Energetic","Party"]},{name:"Harts Carnival",carnivalId:"trinidad",type:"mas",website:"https://hartscarnival.com",tags:["Traditional","Family","Fun"]},{name:"Pure Carnival",carnivalId:"trinidad",type:"mas",website:"https://pure.carnival-tribe.com",tags:["Fun","All Inclusive"]},{name:"Paparazzi Carnival",carnivalId:"trinidad",type:"mas",website:"https://paparazzicarnival.com",tags:["Thematic","Design"]},{name:"Ronnie and Caro",carnivalId:"trinidad",type:"mas",website:"https://ronnieandcaro.com",tags:["Big Band","Winner"]},{name:"K2K Alliance",carnivalId:"trinidad",type:"mas",website:"https://k2k-alliance.com",tags:["Artistic","Couture"]},{name:"Resonate Carnival",carnivalId:"trinidad",type:"mas",tags:["New","Vibes"]},{name:"Showtime Carnival",carnivalId:"trinidad",type:"mas",tags:["Affordable","Fun"]},{name:"Spirit Mas",carnivalId:"trinidad",type:"mas",tags:["Inaugural","Exciting"]},{name:"Exousia Mas",carnivalId:"trinidad",type:"mas",tags:["Small Band","Detailed"]},{name:"Just Wee and Friends",carnivalId:"trinidad",type:"mas",tags:["J'ouvert","Fun"]},{name:"Xodus Carnival",carnivalId:"jamaica",type:"mas",website:"https://xoduscarnival.com",tags:["Premium","Big Band"]},{name:"Bacchanal Jamaica",carnivalId:"jamaica",type:"mas",website:"https://bacchanaljamaica.com",tags:["Legacy","Big Band"]},{name:"Xaymaca International",carnivalId:"jamaica",type:"mas",website:"https://xaymacainternational.com",tags:["Premium","Vibes"]},{name:"Yardmas Carnival",carnivalId:"jamaica",type:"mas",website:"https://yardmas.com",tags:["New","Local"]},{name:"GenX Jamaica",carnivalId:"jamaica",type:"mas",website:"https://genxcarnival.com",tags:["Miami Link","Fun"]},{name:"Ocho Rios Carnival",carnivalId:"jamaica",type:"mas",tags:["North Coast","Holiday"]},{name:"GenX Carnival",carnivalId:"miami",type:"mas",website:"https://genx.carnival-tribe.com",tags:["Big Band","Winner"]},{name:"Ramajay Mas",carnivalId:"miami",type:"mas",website:"https://ramajaymas.com",tags:["Vibes","Party"]},{name:"Revel Nation",carnivalId:"miami",type:"mas",tags:["Premium","Service"]},{name:"One Island Band",carnivalId:"miami",type:"mas",website:"https://oneislandband.com",tags:["Big Band","Fun"]},{name:"Freaks Mas",carnivalId:"miami",type:"mas",website:"https://freaksmas.com",tags:["Energy","New York Link"]},{name:"Dingolay Mas",carnivalId:"miami",type:"mas",tags:["Vibrant","Fun"]},{name:"K-Paya",carnivalId:"miami",type:"mas",tags:["Party","Vibes"]},{name:"Savage Mas",carnivalId:"miami",type:"mas",tags:["Sexy","Fun"]},{name:"Euphoria Mas",carnivalId:"miami",type:"mas",tags:["Service","Quality"]},{name:"UCOM (United Colours of Mas)",carnivalId:"nottinghill",type:"mas",website:"https://unitedcoloursofmas.com",tags:["Modern","Premium"]},{name:"Chocolate Nation",carnivalId:"nottinghill",type:"mas",website:"https://chocolatenationmas.com",tags:["Vibes","Service"]},{name:"Mangrove Carnival",carnivalId:"nottinghill",type:"mas",tags:["Traditional","Community"]},{name:"Gemz Mas",carnivalId:"nottinghill",type:"mas",tags:["Sexy","Fun"]},{name:"Caribbean Sessions",carnivalId:"nottinghill",type:"mas",tags:["Party","Inclusive"]},{name:"Colours Carnival",carnivalId:"nottinghill",type:"mas",tags:["Colourful","Fun"]},{name:"Saldenah Carnival",carnivalId:"toronto",type:"mas",website:"https://saldenahcarnival.com",tags:["Legendary","Big Band","Winner"]},{name:"Carnival Nationz",carnivalId:"toronto",type:"mas",website:"https://carnivalnationz.com",tags:["Big Band","Vibes"]},{name:"Toronto Revellers",carnivalId:"toronto",type:"mas",website:"https://torontorevellers.com",tags:["Community","Fun"]},{name:"Tribal Carnival",carnivalId:"toronto",type:"mas",tags:["Culture","Mas"]},{name:"Venom Mas",carnivalId:"toronto",type:"mas",tags:["Sexy","Party"]},{name:"Fantazia",carnivalId:"toronto",type:"mas",tags:["Fun","Service"]},{name:"Krave The Band",carnivalId:"barbados",type:"mas",website:"https://kravetheband.com",tags:["Premium","Luxury"]},{name:"Aura Experience",carnivalId:"barbados",type:"mas",website:"https://auraexperience.com",tags:["Rihanna","Vibes"]},{name:"Zulu International",carnivalId:"barbados",type:"mas",tags:["Fun","Party"]},{name:"Baje International",carnivalId:"barbados",type:"mas",tags:["Legacy","Service"]},{name:"Erup The Band",carnivalId:"barbados",type:"mas",tags:["Energy","Soca"]},{name:"Oro Luxury Carnival",carnivalId:"grenada",type:"mas",tags:["Premium","Luxury"]},{name:"Xtravo",carnivalId:"grenada",type:"mas",tags:["Party","Vibes"]},{name:"Lavish The Band",carnivalId:"grenada",type:"mas",tags:["Service","Costumes"]},{name:"Legends Carnival",carnivalId:"stlucia",type:"mas",tags:["Big Band","Fun"]},{name:"Xuovo",carnivalId:"stlucia",type:"mas",tags:["Vibes","Party"]},{name:"Fuzion Mas",carnivalId:"stlucia",type:"mas",tags:["Premium","Service"]},{name:"Insane Carnival",carnivalId:"antigua",type:"mas",tags:["Fun","Party"]},{name:"Myst Carnival",carnivalId:"antigua",type:"mas",tags:["Sexy","Vibes"]},{name:"Seaduced",carnivalId:"antigua",type:"mas",tags:["Luxury","Premium"]},{name:"Madd Colors Carnival",carnivalId:"atlanta",type:"mas",website:"https://maddcolorscarnival.com/",tags:["Premium","#1 Band"]},{name:"We Kinda Ting",carnivalId:"atlanta",type:"mas",tags:["Fun","Local"]},{name:"Savage Mas",carnivalId:"atlanta",type:"mas",tags:["Sexy","Vibes"]},{name:"Panache",carnivalId:"atlanta",type:"mas",tags:["Service","Costumes"]}];function fK({carnivalId:t}){const[e,n]=M.useState(""),[r,i]=M.useState("all"),s=M.useMemo(()=>YN.filter(l=>{if(t&&l.carnivalId!==t)return!1;const u=e.toLowerCase(),h=l.name.toLowerCase().includes(u)||l.tags.some(g=>g.toLowerCase().includes(u)),p=r==="all"||l.type===r;return h&&p}),[t,e,r]),o=l=>{switch(l){case"trinidad":return"Trinidad";case"jamaica":return"Jamaica";case"miami":return"Miami";case"nottinghill":return"London";case"toronto":return"Toronto";case"barbados":return"Barbados";case"grenada":return"Grenada";case"antigua":return"Antigua";case"stlucia":return"St. Lucia";case"atlanta":return"Atlanta";default:return l}};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:A.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[A.jsx(lE,{className:"w-5 h-5 text-purple-500"}),"Costume Bands"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Find your perfect fit for ",t?o(t):"Carnival"]})]}),A.jsxs("div",{className:"relative w-full md:w-64",children:[A.jsx(zN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search bands...",value:e,onChange:l=>n(l.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 transition"})]})]})}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((l,u)=>A.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-300 hover:border-purple-300 dark:hover:border-purple-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:l.name}),!t&&A.jsxs("span",{className:"text-xs font-medium text-gray-500 flex items-center gap-1 mt-1",children:[A.jsx(ti,{className:"w-3 h-3"}),o(l.carnivalId)]})]}),l.website&&A.jsx("a",{href:l.website,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-full hover:bg-purple-100 hover:text-purple-600 dark:hover:bg-purple-900/40 dark:hover:text-purple-400 transition",children:A.jsx(rg,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:l.tags.map((h,p)=>A.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-300 rounded-md",children:h},p))})]},u))}),s.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(lE,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),A.jsx("p",{children:"No bands found matching your search."})]})]})}function pK({onGetStarted:t,logo:e,onTryDemo:n}){const[r,i]=M.useState(0),[s,o]=M.useState({x:0,y:0});return M.useEffect(()=>{const l=()=>i(window.scrollY),u=h=>o({x:h.clientX,y:h.clientY});return window.addEventListener("scroll",l),window.addEventListener("mousemove",u),()=>{window.removeEventListener("scroll",l),window.removeEventListener("mousemove",u)}},[]),A.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden selection:bg-pink-500 selection:text-white font-sans",children:[A.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[A.jsx("div",{className:"absolute w-[800px] h-[800px] bg-indigo-600/20 rounded-full blur-[120px] mix-blend-screen transition-transform duration-100 ease-out",style:{top:-200,left:-200,transform:`translate(${s.x*.02}px, ${s.y*.02}px)`}}),A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-pink-600/20 rounded-full blur-[100px] mix-blend-screen transition-transform duration-100 ease-out",style:{bottom:-100,right:-100,transform:`translate(${s.x*-.03}px, ${s.y*-.03}px)`}})]}),A.jsx("nav",{className:"fixed top-0 w-full z-50 px-6 py-4 backdrop-blur-md border-b border-white/5 bg-black/50",children:A.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-pink-500 to-indigo-600 flex items-center justify-center font-bold text-sm",children:"CP"}),A.jsx("span",{className:"font-bold tracking-tight text-white/90",children:"Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-sm font-semibold transition-all",children:"Log In"})]})}),A.jsxs("section",{className:"relative z-10 pt-40 pb-20 px-6 max-w-7xl mx-auto flex flex-col items-center text-center",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm mb-8 animate-fadeIn",children:[A.jsxs("span",{className:"relative flex h-2 w-2",children:[A.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),A.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),A.jsx("span",{className:"text-xs font-medium text-gray-400 tracking-wide uppercase",children:"V2.0 Now Live"})]}),A.jsxs("h1",{className:"text-6xl md:text-8xl font-black tracking-tighter mb-8 bg-clip-text text-transparent bg-gradient-to-b from-white via-white to-gray-500 leading-tight",children:["The Operating System",A.jsx("br",{}),A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500",children:"For Carnival."})]}),A.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mb-12 leading-relaxed",children:"The all-in-one workspace for your next carnival. Budget, schedule, squad sync, and ticketing  seamlessly integrated."}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[A.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-white text-black rounded-full font-bold text-lg shadow-[0_0_40px_-10px_rgba(255,255,255,0.3)] hover:shadow-[0_0_60px_-10px_rgba(255,255,255,0.5)] transition-all transform hover:scale-105",children:["Start Planning For Free",A.jsx(Hf,{className:"inline-block ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),A.jsx("button",{onClick:n,className:"px-8 py-4 bg-white/10 hover:bg-white/20 border border-white/10 text-white rounded-full font-bold text-lg backdrop-blur-sm transition-all transform hover:scale-105",children:"Try Live Demo"})]}),A.jsxs("div",{className:"mt-20 relative w-full max-w-5xl aspect-[16/9] bg-gray-900/50 rounded-xl border border-white/10 backdrop-blur-sm overflow-hidden shadow-2xl group",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"}),A.jsxs("div",{className:"absolute top-4 left-4 right-4 h-4 flex gap-2",children:[A.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]}),A.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:A.jsxs("div",{className:"text-center space-y-4",children:[A.jsx("div",{className:"inline-block p-4 rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 shadow-xl mb-4 group-hover:scale-110 transition-transform duration-500",children:A.jsx(xd,{className:"w-12 h-12 text-white"})}),A.jsx("div",{className:"text-2xl font-bold text-white/50",children:"Mission Control"})]})})]})]}),A.jsx("div",{className:"w-full bg-white/5 border-y border-white/5 py-4 overflow-hidden relative z-10 backdrop-blur-sm",children:A.jsxs("div",{className:"flex animate-marquee whitespace-nowrap gap-12 text-sm font-medium text-gray-400 uppercase tracking-widest",children:[A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"}),A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"})]})}),A.jsxs("section",{className:"relative z-10 py-32 px-6 max-w-7xl mx-auto",children:[A.jsx("div",{className:"mb-16",children:A.jsxs("h2",{className:"text-4xl md:text-5xl font-black mb-6",children:["Everything you need.",A.jsx("br",{}),"Nothing you don't."]})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]",children:[A.jsxs("div",{className:"md:col-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col justify-between",children:[A.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-20 group-hover:opacity-40 transition-opacity",children:A.jsx(dr,{className:"w-48 h-48 text-indigo-500 transform rotate-12 translate-x-12 -translate-y-12"})}),A.jsxs("div",{children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center mb-4 text-indigo-400",children:A.jsx(dr,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Squad Sync"}),A.jsx("p",{className:"text-gray-400 max-w-sm",children:"Real-time collaboration. See when your friends add events, update budgets, or get road ready."})]}),A.jsxs("div",{className:"flex -space-x-4 mt-8",children:[[1,2,3,4].map(l=>A.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-gray-500 transform transition-transform group-hover:translate-x-2",style:{transitionDelay:`${l*50}ms`},children:"User"},l)),A.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-600 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-white z-10",children:"+3"})]})]}),A.jsxs("div",{className:"md:row-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center mb-4 text-green-400",children:A.jsx(ag,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Smart Budget"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Track every costume payment, fete ticket, and flight."}),A.jsxs("div",{className:"mt-auto space-y-4",children:[A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Costume Deposit"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$300"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-3/4 h-full rounded-full"})})]}),A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Flight (MIA  POS)"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$850"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-full h-full rounded-full"})})]})]})]}),A.jsxs("div",{className:"relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"}),A.jsx("div",{className:"absolute inset-0 opacity-30 grayscale group-hover:grayscale-0 transition-all duration-700",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0)",backgroundSize:"24px 24px"}}),A.jsxs("div",{className:"relative z-20 h-full flex flex-col justify-end",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center mb-4 text-purple-400",children:A.jsx(D3,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Live Map"}),A.jsx("p",{className:"text-gray-400",children:"Discover events near your AirBnb."})]})]}),A.jsxs("div",{className:"col-span-1 md:col-span-2 relative group overflow-hidden rounded-3xl bg-gradient-to-br from-teal-900 to-gray-900 border border-white/10 hover:border-teal-500/30 transition-all p-8 flex items-center justify-between",children:[A.jsxs("div",{className:"max-w-xs",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-500/20 flex items-center justify-center mb-4 text-teal-400",children:A.jsx(ng,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Soca Passport"}),A.jsx("p",{className:"text-gray-400",children:"Your digital carnival identity. Syncs seamlessly with the Soca Passport app."})]}),A.jsxs("div",{className:"hidden sm:block relative w-64 h-40 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 shadow-2xl transform rotate-3 group-hover:rotate-0 transition-transform duration-500",children:[A.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 rounded-full bg-teal-500"}),A.jsx("div",{className:"absolute top-4 right-4 text-[10px] font-mono opacity-50",children:"9438-2910"}),A.jsx("div",{className:"absolute bottom-4 left-4 text-xs font-bold",children:"FEBUARY 2026"})]})]})]})]}),A.jsxs("section",{className:"relative z-10 py-32 text-center px-6",children:[A.jsx("h2",{className:"text-5xl md:text-7xl font-black mb-8",children:"Ready to jump?"}),A.jsx("button",{onClick:t,className:"px-10 py-5 bg-white text-black rounded-full font-bold text-xl hover:scale-105 transition-transform shadow-2xl",children:"Get Started Now"}),A.jsxs("div",{className:"mt-16 text-sm text-gray-500 flex flex-col md:flex-row items-center justify-center gap-8",children:[A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(ig,{className:"w-4 h-4"})," Global Support"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(sg,{className:"w-4 h-4"})," Secure Data"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(xA,{className:"w-4 h-4"})," Vibes Included"]})]})]}),A.jsx("div",{className:"w-full border-t border-white/10 p-8 text-center text-gray-600 text-sm",children:" 2026 Carnival Planner. Built for the culture."})]})}const Ea="Carnival Planner",ur="support@carnival-planner.com",og="December 12, 2025";function mK({onBack:t,logo:e}){return A.jsxs(Ag,{title:"Privacy Policy",icon:sg,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",og]}),A.jsx(He,{title:"1. Introduction",children:A.jsxs("p",{children:[Ea,' ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application and website (collectively, the "Service").']})}),A.jsxs(He,{title:"2. Information We Collect",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Personal Information"}),A.jsx("p",{className:"mb-4",children:"When you sign in with Google, we collect:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Email address"}),A.jsx("li",{children:"Display name"}),A.jsx("li",{children:"Profile picture URL"}),A.jsx("li",{children:"Google account unique identifier"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 User-Generated Content"}),A.jsx("p",{className:"mb-4",children:"Information you voluntarily provide includes:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Carnival planning data (budgets, schedules, packing lists)"}),A.jsx("li",{children:"Costume and band information"}),A.jsx("li",{children:"Squad member names and coordination data"}),A.jsx("li",{children:"Uploaded media files (tickets, photos, documents)"}),A.jsx("li",{children:"Map pins and location notes"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Payment Information"}),A.jsx("p",{children:"For premium subscriptions, payment processing is handled securely by Stripe. We do not store your credit card numbers. We receive only transaction confirmation, subscription status, and billing email from Stripe."})]}),A.jsx(He,{title:"3. How We Use Your Information",children:A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsx("li",{children:"To provide and maintain the Service"}),A.jsx("li",{children:"To authenticate your identity via Google Sign-In"}),A.jsx("li",{children:"To process premium subscription payments via Stripe"}),A.jsx("li",{children:"To sync your carnival planning data across devices"}),A.jsx("li",{children:"To send push notifications for squad alerts (if enabled)"}),A.jsx("li",{children:"To improve and optimize our Service"}),A.jsx("li",{children:"To respond to your inquiries and support requests"})]})}),A.jsxs(He,{title:"4. Data Storage and Security",children:[A.jsx("p",{className:"mb-4",children:"Your data is stored using Firebase services provided by Google:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Manages secure sign-in"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Cloud Firestore:"})," Stores your planning data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Storage:"})," Stores uploaded media files"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Cloud Messaging:"})," Delivers push notifications"]})]}),A.jsx("p",{children:"We implement industry-standard security measures including encryption in transit (TLS) and at rest. Firebase services are SOC 2 and ISO 27001 certified."})]}),A.jsxs(He,{title:"5. Third-Party Services",children:[A.jsx("p",{className:"mb-4",children:"We use the following third-party services:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Google (Firebase):"})," Authentication, database, storage, and hosting. ",A.jsx("a",{href:"https://firebase.google.com/support/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Firebase Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing. ",A.jsx("a",{href:"https://stripe.com/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Stripe Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"OpenStreetMap:"})," Map tiles for the Fete Map feature. ",A.jsx("a",{href:"https://wiki.osmfoundation.org/wiki/Privacy_Policy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"OSM Privacy Policy"})]})]})]}),A.jsxs(He,{title:"6. Your Rights (GDPR/CCPA)",children:[A.jsx("p",{className:"mb-4",children:"Depending on your location, you may have the following rights:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Rectification:"})," Correct inaccurate personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Erasure:"})," Request deletion of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Portability:"})," Receive your data in a portable format"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Opt-out:"})," Opt out of certain data processing"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Non-discrimination:"})," We will not discriminate against you for exercising your rights"]})]}),A.jsxs("p",{className:"mt-4",children:["To exercise these rights, contact us at ",A.jsx("a",{href:`mailto:${ur}`,className:"text-pink-400 hover:underline",children:ur}),"."]})]}),A.jsx(He,{title:"7. Data Retention",children:A.jsx("p",{children:"We retain your personal data for as long as your account is active. If you delete your account, we will delete your data within 30 days, except where we are legally required to retain it."})}),A.jsx(He,{title:"8. Children's Privacy",children:A.jsx("p",{children:"Our Service is not intended for children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected such information, please contact us immediately."})}),A.jsx(He,{title:"9. Changes to This Policy",children:A.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'})}),A.jsxs(He,{title:"10. Contact Us",children:[A.jsx("p",{children:"If you have questions about this Privacy Policy, please contact us at:"}),A.jsx("p",{className:"mt-2",children:A.jsx("a",{href:`mailto:${ur}`,className:"text-pink-400 hover:underline",children:ur})})]})]})}function gK({onBack:t,logo:e}){return A.jsxs(Ag,{title:"Terms of Service",icon:Q3,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",og]}),A.jsx(He,{title:"1. Acceptance of Terms",children:A.jsxs("p",{children:["By accessing or using ",Ea,' ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.']})}),A.jsx(He,{title:"2. Description of Service",children:A.jsxs("p",{children:[Ea," is a Progressive Web App that helps users plan and organize Caribbean carnival events. The Service includes free features (budget planning, scheduling, squad coordination) and premium subscription features (interactive maps, media vault, offline mode)."]})}),A.jsxs(He,{title:"3. User Accounts",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Registration"}),A.jsx("p",{className:"mb-4",children:"You must sign in with a valid Google account to use the Service. You are responsible for maintaining the security of your account."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Account Responsibilities"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"You must provide accurate information"}),A.jsx("li",{children:"You are responsible for all activities under your account"}),A.jsx("li",{children:"You must notify us immediately of any unauthorized use"})]})]}),A.jsxs(He,{title:"4. Premium Subscriptions",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.1 Subscription Plans"}),A.jsx("p",{className:"mb-4",children:"We offer monthly ($4.99/month) and yearly ($39.99/year) subscription plans. Prices are subject to change with reasonable notice."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.2 Billing"}),A.jsx("p",{className:"mb-4",children:"Subscriptions are billed in advance on a recurring basis. Payment is processed through Stripe. Your subscription will automatically renew unless you cancel before the renewal date."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.3 Cancellation"}),A.jsx("p",{children:"You may cancel your subscription at any time. You will continue to have access to premium features until the end of your current billing period. See our Refund Policy for details."})]}),A.jsxs(He,{title:"5. User Content",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.1 Your Content"}),A.jsx("p",{className:"mb-4",children:"You retain ownership of all content you upload to the Service (schedules, media, notes). By uploading content, you grant us a limited license to store, display, and process it to provide the Service."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.2 Content Restrictions"}),A.jsx("p",{className:"mb-2",children:"You agree not to upload content that:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Is illegal, harmful, or offensive"}),A.jsx("li",{children:"Infringes on intellectual property rights"}),A.jsx("li",{children:"Contains malware or malicious code"}),A.jsx("li",{children:"Violates others' privacy"})]})]}),A.jsxs(He,{title:"6. Acceptable Use",children:[A.jsx("p",{className:"mb-2",children:"You agree not to:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Use the Service for any unlawful purpose"}),A.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),A.jsx("li",{children:"Interfere with or disrupt the Service"}),A.jsx("li",{children:"Reverse engineer or decompile the Service"}),A.jsx("li",{children:"Use automated systems to access the Service without permission"})]})]}),A.jsx(He,{title:"7. Intellectual Property",children:A.jsxs("p",{children:["The Service, including its design, features, and content (excluding user content), is owned by ",Ea," and protected by intellectual property laws. You may not copy, modify, or distribute our intellectual property without permission."]})}),A.jsx(He,{title:"8. Disclaimer of Warranties",children:A.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE. YOUR USE OF THE SERVICE IS AT YOUR OWN RISK.'})}),A.jsx(He,{title:"9. Limitation of Liability",children:A.jsxs("p",{children:["TO THE MAXIMUM EXTENT PERMITTED BY LAW, ",Ea.toUpperCase()," SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE, EVEN IF WE HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."]})}),A.jsx(He,{title:"10. Termination",children:A.jsx("p",{children:"We may terminate or suspend your account at any time for violation of these Terms. You may delete your account at any time. Upon termination, your right to use the Service will immediately cease."})}),A.jsx(He,{title:"11. Governing Law",children:A.jsxs("p",{children:["These Terms shall be governed by the laws of the jurisdiction in which ",Ea," operates, without regard to conflict of law principles."]})}),A.jsx(He,{title:"12. Changes to Terms",children:A.jsx("p",{children:"We may modify these Terms at any time. We will notify you of significant changes via email or in-app notification. Continued use of the Service after changes constitutes acceptance of the new Terms."})}),A.jsx(He,{title:"13. Contact",children:A.jsxs("p",{children:["For questions about these Terms, contact us at ",A.jsx("a",{href:`mailto:${ur}`,className:"text-pink-400 hover:underline",children:ur}),"."]})})]})}function yK({onBack:t,logo:e}){return A.jsxs(Ag,{title:"Cookie Policy",icon:N3,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",og]}),A.jsx(He,{title:"1. What Are Cookies",children:A.jsx("p",{children:"Cookies are small text files stored on your device when you visit a website. They help websites remember your preferences and improve your experience."})}),A.jsxs(He,{title:"2. How We Use Cookies",children:[A.jsxs("p",{className:"mb-4",children:[Ea," uses cookies and similar technologies for the following purposes:"]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Essential Cookies (Required)"}),A.jsx("p",{className:"mb-4",children:"These cookies are necessary for the Service to function and cannot be disabled:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Maintains your signed-in session securely"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Session Management:"})," Remembers your authentication state"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Functional Cookies"}),A.jsx("p",{className:"mb-4",children:"These cookies enhance your experience:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Preferences:"})," Remembers your dark mode setting"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Local Storage:"})," Caches carnival data for offline access (Premium feature)"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Third-Party Cookies"}),A.jsx("p",{className:"mb-2",children:"Our third-party services may set their own cookies:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase/Google:"})," Authentication and analytics"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing security"]})]})]}),A.jsx(He,{title:"3. Cookie Details",children:A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left text-sm mb-4",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b border-gray-700",children:[A.jsx("th",{className:"py-2 pr-4",children:"Cookie Name"}),A.jsx("th",{className:"py-2 pr-4",children:"Purpose"}),A.jsx("th",{className:"py-2 pr-4",children:"Duration"}),A.jsx("th",{className:"py-2",children:"Type"})]})}),A.jsxs("tbody",{className:"text-gray-400",children:[A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"firebase-auth"}),A.jsx("td",{className:"py-2 pr-4",children:"User authentication"}),A.jsx("td",{className:"py-2 pr-4",children:"Session"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"__stripe_mid"}),A.jsx("td",{className:"py-2 pr-4",children:"Fraud prevention"}),A.jsx("td",{className:"py-2 pr-4",children:"1 year"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"darkMode"}),A.jsx("td",{className:"py-2 pr-4",children:"Theme preference"}),A.jsx("td",{className:"py-2 pr-4",children:"Persistent"}),A.jsx("td",{className:"py-2",children:"Functional"})]})]})]})})}),A.jsxs(He,{title:"4. Local Storage",children:[A.jsx("p",{className:"mb-4",children:"In addition to cookies, we use browser local storage for:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Caching carnival data for offline access (Premium)"}),A.jsx("li",{children:"Storing FCM tokens for push notifications"}),A.jsx("li",{children:"Temporary UI state"})]})]}),A.jsxs(He,{title:"5. Managing Cookies",children:[A.jsx("p",{className:"mb-4",children:"You can manage cookies through your browser settings:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Chrome:"})," Settings  Privacy and security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firefox:"})," Settings  Privacy & Security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Safari:"})," Preferences  Privacy  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Edge:"})," Settings  Cookies and site permissions"]})]}),A.jsx("p",{className:"mt-4 text-yellow-400",children:"Note: Disabling essential cookies may prevent you from using the Service."})]}),A.jsx(He,{title:"6. Updates to This Policy",children:A.jsx("p",{children:"We may update this Cookie Policy to reflect changes in our practices or for legal reasons. Check this page periodically for updates."})}),A.jsx(He,{title:"7. Contact",children:A.jsxs("p",{children:["For questions about our use of cookies, contact us at ",A.jsx("a",{href:`mailto:${ur}`,className:"text-pink-400 hover:underline",children:ur}),"."]})})]})}function wK({onBack:t,logo:e}){return A.jsxs(Ag,{title:"Refund Policy",icon:ng,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",og]}),A.jsx(He,{title:"1. Premium Subscription",children:A.jsxs("p",{children:[Ea," offers premium subscriptions at $4.99/month or $39.99/year. This policy explains our refund terms for these subscriptions."]})}),A.jsxs(He,{title:"2. Subscription Cancellation",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 How to Cancel"}),A.jsx("p",{className:"mb-4",children:"You can cancel your subscription at any time by:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:["Contacting us at ",A.jsx("a",{href:`mailto:${ur}`,className:"text-pink-400 hover:underline",children:ur})]}),A.jsx("li",{children:"Managing your subscription through Stripe's customer portal (link provided in your confirmation email)"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Effect of Cancellation"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Your premium access continues until the end of your current billing period"}),A.jsx("li",{children:"You will not be charged again after cancellation"}),A.jsx("li",{children:"No partial refunds are provided for unused time in the current billing period"})]})]}),A.jsxs(He,{title:"3. Refund Eligibility",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Eligible for Refund"}),A.jsx("p",{className:"mb-2",children:"We offer refunds in the following situations:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Technical Issues:"})," If the Service was unavailable or significantly impaired for an extended period"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Accidental Purchase:"})," If you accidentally subscribed and request a refund within 48 hours, without using premium features"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Duplicate Charges:"})," If you were charged multiple times for the same subscription period"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Not Eligible for Refund"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Change of mind after using premium features"}),A.jsx("li",{children:"Requests made after 30 days from the charge date"}),A.jsx("li",{children:"Failure to cancel before renewal (you must cancel before renewal to avoid charges)"}),A.jsx("li",{children:"Issues caused by your device, browser, or internet connection"})]})]}),A.jsxs(He,{title:"4. How to Request a Refund",children:[A.jsx("p",{className:"mb-4",children:"To request a refund:"}),A.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[A.jsxs("li",{children:["Email us at ",A.jsx("a",{href:`mailto:${ur}`,className:"text-pink-400 hover:underline",children:ur})]}),A.jsx("li",{children:"Include your account email and the date of the charge"}),A.jsx("li",{children:"Explain the reason for your refund request"})]}),A.jsx("p",{className:"mt-4",children:"We will review your request and respond within 5 business days."})]}),A.jsxs(He,{title:"5. Refund Processing",children:[A.jsx("p",{className:"mb-4",children:"If your refund is approved:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Refunds are processed through Stripe to your original payment method"}),A.jsx("li",{children:"Allow 5-10 business days for the refund to appear on your statement"}),A.jsx("li",{children:"Your premium access will be revoked upon refund"})]})]}),A.jsx(He,{title:"6. Free Trial",children:A.jsx("p",{children:"We do not currently offer free trials. All core features are free to use. Premium features require a paid subscription."})}),A.jsx(He,{title:"7. Price Changes",children:A.jsx("p",{children:"If we increase subscription prices, existing subscribers will be notified at least 30 days in advance. You may cancel before the new price takes effect to avoid being charged at the higher rate."})}),A.jsx(He,{title:"8. Contact",children:A.jsxs("p",{children:["For refund requests or questions about this policy, contact us at ",A.jsx("a",{href:`mailto:${ur}`,className:"text-pink-400 hover:underline",children:ur}),"."]})})]})}function Ag({title:t,icon:e,onBack:n,logo:r,children:i}){return A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(h_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r&&A.jsx("img",{src:r,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(e,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:t})]})]}),A.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:i}),A.jsx("footer",{className:"mt-12 text-center text-gray-500 text-sm",children:A.jsx("p",{children:"Carnival Planner - Plan your Mas. Track your Fetes. Coordinate your Squad."})})]})]})}function He({title:t,children:e}){return A.jsxs("div",{className:"mb-8",children:[A.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:t}),A.jsx("div",{className:"text-gray-300 leading-relaxed",children:e})]})}function vK(){const[t,e]=M.useState(null),[n,r]=M.useState(!1),[i,s]=M.useState(!1),[o,l]=M.useState(!1);M.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){s(!0);return}const p=localStorage.getItem("pwa-install-dismissed");p&&(Date.now()-parseInt(p))/864e5<7&&l(!0);const g=C=>{C.preventDefault(),e(C),o||r(!0)},w=()=>{s(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",g),window.addEventListener("appinstalled",w),()=>{window.removeEventListener("beforeinstallprompt",g),window.removeEventListener("appinstalled",w)}},[o]);const u=async()=>{if(!t)return;t.prompt();const{outcome:p}=await t.userChoice;p==="accepted"&&s(!0),e(null),r(!1)},h=()=>{r(!1),l(!0),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return!n||i?null:A.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 animate-slideUp md:left-auto md:right-4 md:max-w-sm safe-bottom",children:A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-2xl p-4 text-white",children:[A.jsx("button",{onClick:h,className:"absolute top-2 right-2 p-1 hover:bg-white/20 rounded-full transition-colors",children:A.jsx(ri,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx($3,{className:"w-6 h-6"})}),A.jsxs("div",{className:"flex-1 pr-6",children:[A.jsx("h3",{className:"font-bold text-lg mb-1",children:"Add to Home Screen"}),A.jsx("p",{className:"text-white/80 text-sm mb-3",children:"Install Carnival Planner for quick access and offline use!"}),A.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-colors",children:[A.jsx(qd,{className:"w-4 h-4"}),"Install App"]})]})]})]})})}function xK({onBack:t,logo:e,user:n}){const[r,i]=M.useState(""),[s,o]=M.useState(""),[l,u]=M.useState((n==null?void 0:n.email)||""),[h,p]=M.useState(!1),[g,w]=M.useState(!1),[C,b]=M.useState(""),_=async F=>{if(F.preventDefault(),!s.trim()||!l.trim()){b("Please fill in all required fields");return}p(!0),b("");try{await ic(wn(ke,"support-requests"),{email:l.trim(),subject:r.trim()||"General Inquiry",message:s.trim(),userId:(n==null?void 0:n.uid)||null,userName:(n==null?void 0:n.displayName)||null,status:"new",createdAt:Ve.now()}),w(!0),i(""),o("")}catch(I){console.error("Error submitting support request:",I),b("Failed to send message. Please try again.")}finally{p(!1)}};return g?A.jsx("div",{className:"min-h-screen bg-slate-950 text-white flex items-center justify-center p-6",children:A.jsxs("div",{className:"text-center max-w-md",children:[A.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx(S3,{className:"w-10 h-10 text-green-400"})}),A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Message Sent!"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Thank you for reaching out. We'll get back to you as soon as possible."}),A.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold hover:opacity-90 transition-opacity",children:"Back to App"})]})}):A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-2xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(h_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e&&A.jsx("img",{src:e,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(MN,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Contact Support"})]})]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:[A.jsx("p",{className:"text-gray-400 mb-6",children:"Have a question, feedback, or need help? Send us a message and we'll get back to you as soon as possible."}),A.jsxs("form",{onSubmit:_,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address *"}),A.jsxs("div",{className:"relative",children:[A.jsx(p_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:l,onChange:F=>u(F.target.value),placeholder:"your@email.com",required:!0,className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Subject"}),A.jsxs("select",{value:r,onChange:F=>i(F.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-pink-500 transition-colors",children:[A.jsx("option",{value:"",className:"bg-gray-900",children:"Select a topic..."}),A.jsx("option",{value:"General Question",className:"bg-gray-900",children:"General Question"}),A.jsx("option",{value:"Premium Subscription",className:"bg-gray-900",children:"Premium Subscription"}),A.jsx("option",{value:"Technical Issue",className:"bg-gray-900",children:"Technical Issue"}),A.jsx("option",{value:"Feature Request",className:"bg-gray-900",children:"Feature Request"}),A.jsx("option",{value:"Refund Request",className:"bg-gray-900",children:"Refund Request"}),A.jsx("option",{value:"Account Issue",className:"bg-gray-900",children:"Account Issue"}),A.jsx("option",{value:"Other",className:"bg-gray-900",children:"Other"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message *"}),A.jsx("textarea",{value:s,onChange:F=>o(F.target.value),placeholder:"How can we help you?",required:!0,rows:6,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors resize-none"})]}),C&&A.jsx("p",{className:"text-red-400 text-sm",children:C}),A.jsx("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold text-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:h?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):A.jsxs(A.Fragment,{children:[A.jsx(GN,{className:"w-5 h-5"}),"Send Message"]})})]})]}),A.jsxs("p",{className:"text-gray-500 text-sm text-center mt-8",children:["You can also email us directly at"," ",A.jsx("a",{href:"mailto:support@carnival-planner.com",className:"text-pink-400 hover:underline",children:"support@carnival-planner.com"})]})]})]})}function _K(){const[t,e]=M.useState([]),[n,r]=M.useState(!0);M.useEffect(()=>{const s=Vd(wn(ke,"support-requests"),Vx("createdAt","desc")),o=Bs(s,l=>{const u=l.docs.map(h=>({id:h.id,...h.data()}));e(u),r(!1)});return()=>o()},[]);const i=async s=>{confirm("Delete this support request?")&&await Jm($e(ke,"support-requests",s))};return n?A.jsx("div",{className:"text-center py-8 text-gray-500",children:A.jsx(an,{className:"w-6 h-6 animate-spin mx-auto"})}):A.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h3",{className:"font-bold text-lg mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(MN,{className:"w-5 h-5"}),"Support Requests (",t.length,")"]}),t.length===0?A.jsx("p",{className:"text-gray-500 text-center py-4",children:"No support requests yet"}):A.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.map(s=>{var o,l;return A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:s.email}),A.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),A.jsx("span",{className:"text-sm text-gray-500",children:s.subject||"General"})]}),A.jsx("button",{onClick:()=>i(s.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:A.jsx(Rs,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm whitespace-pre-wrap",children:s.message}),A.jsx("p",{className:"text-xs text-gray-400 mt-2",children:((l=(o=s.createdAt)==null?void 0:o.toDate)==null?void 0:l.call(o).toLocaleString())||"Unknown date"})]},s.id)})})]})}function BK({user:t,onClose:e}){const[n,r]=M.useState(!1),[i,s]=M.useState(""),[o,l]=M.useState(!1),[u,h]=M.useState(""),[p,g]=M.useState({displayName:"",bio:"",avatarUrl:""}),[w,C]=M.useState(!1),[b,_]=M.useState(!1),[F,I]=M.useState(!1),[B,k]=M.useState(""),O=M.useRef(null);M.useEffect(()=>{if(!t)return;(async()=>{try{const U=$e(ke,"users",t.uid,"profile","info"),Q=await mi(U);if(Q.exists()){const D=Q.data();g({displayName:D.displayName||t.displayName||"",bio:D.bio||"",avatarUrl:D.avatarUrl||t.photoURL||""})}else g({displayName:t.displayName||"",bio:"",avatarUrl:t.photoURL||""})}catch(U){console.log("Could not load profile:",U)}})()},[t]);const V=async()=>{if(t){_(!0),h("");try{const E=$e(ke,"users",t.uid,"profile","info");await Zn(E,{displayName:p.displayName,bio:p.bio,avatarUrl:p.avatarUrl,updatedAt:Ve.now()},{merge:!0}),C(!1),k("Profile saved!"),setTimeout(()=>k(""),3e3)}catch(E){console.error("Error saving profile:",E),h("Could not save profile. Please try again.")}finally{_(!1)}}},j=async E=>{const U=E.target.files[0];if(!U||!t)return;if(U.size>2*1024*1024){h("Image too large. Max 2MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(U.type)){h("Please upload a JPG, PNG, GIF, or WebP image.");return}I(!0),h("");try{const D=Date.now(),K=U.name.split(".").pop(),R=`avatars/${t.uid}/${D}.${K}`,Y=Xa(Ya,R);await sc(Y,U);const oe=await ac(Y);g(fe=>({...fe,avatarUrl:oe}));const Ae=$e(ke,"users",t.uid,"profile","info");await Zn(Ae,{avatarUrl:oe,updatedAt:Ve.now()},{merge:!0}),k("Avatar updated!"),setTimeout(()=>k(""),3e3)}catch(D){console.error("Avatar upload error:",D),h("Could not upload avatar. Please try again.")}finally{I(!1),O.current&&(O.current.value="")}},T=async()=>{if(i!=="DELETE"){h("Please type DELETE to confirm");return}l(!0),h("");try{const E=zr(Pn);await br(E,"deleteUserAccount")(),await mS(ka),window.location.reload()}catch(E){console.error("Error deleting account:",E),h(E.message||"Failed to delete account. Please try again."),l(!1)}};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Account Settings"}),e&&A.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:A.jsx(ri,{className:"w-5 h-5"})})]}),B&&A.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 text-sm",children:B}),u&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:u}),A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-5",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:p.avatarUrl?A.jsx("img",{src:p.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):A.jsx(Ac,{className:"w-10 h-10 text-gray-400"})}),A.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:j,className:"hidden",id:"avatar-upload"}),A.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 rounded-full text-white cursor-pointer hover:bg-blue-700 transition",children:F?A.jsx(an,{className:"w-4 h-4 animate-spin"}):A.jsx(oc,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex-1",children:w?A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:p.displayName,onChange:E=>g(U=>({...U,displayName:E.target.value})),placeholder:"Your name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("textarea",{value:p.bio,onChange:E=>g(U=>({...U,bio:E.target.value})),placeholder:"Tell us about yourself...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm resize-none",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[p.bio.length,"/200"]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{onClick:V,disabled:b,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[b?A.jsx(an,{className:"w-4 h-4 animate-spin"}):A.jsx(G3,{className:"w-4 h-4"}),"Save"]}),A.jsx("button",{onClick:()=>C(!1),className:"px-3 py-1.5 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"})]})]}):A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white mb-1",children:p.displayName||"No name set"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:t==null?void 0:t.email}),p.bio&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:p.bio}),A.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:[A.jsx(VN,{className:"w-4 h-4"}),"Edit Profile"]})]})})]})}),A.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h4",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[A.jsx(PN,{className:"w-5 h-5"}),"Danger Zone"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),n?A.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[A.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3",children:"This will permanently delete:"}),A.jsxs("ul",{className:"text-sm text-red-500 dark:text-red-400 list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"All your carnival plans and data"}),A.jsx("li",{children:"Uploaded photos and documents"}),A.jsx("li",{children:"Squad memberships"}),A.jsx("li",{children:"Your account and login"})]}),A.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Type ",A.jsx("span",{className:"font-mono bg-gray-200 dark:bg-gray-700 px-1 rounded",children:"DELETE"})," to confirm:"]}),A.jsx("input",{type:"text",value:i,onChange:E=>s(E.target.value),placeholder:"Type DELETE",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-3"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>{r(!1),s(""),h("")},disabled:o,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:"Cancel"}),A.jsx("button",{onClick:T,disabled:o||i!=="DELETE",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:o?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Rs,{className:"w-4 h-4"}),"Delete Forever"]})})]})]}):A.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[A.jsx(Rs,{className:"w-4 h-4"}),"Delete My Account"]})]})]})]})}const CK={BRONZE:{name:"Bronze",color:"from-amber-600 to-amber-800",textColor:"text-amber-600",bgColor:"bg-amber-100 dark:bg-amber-900/30",icon:""},SILVER:{name:"Silver",color:"from-gray-400 to-gray-600",textColor:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-700/30",icon:""},GOLD:{name:"Gold",color:"from-yellow-400 to-amber-500",textColor:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",icon:""},PLATINUM:{name:"Platinum",color:"from-purple-400 to-indigo-600",textColor:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30",icon:""}},bK={COMMON:"border-gray-300 dark:border-gray-600",RARE:"border-blue-400 dark:border-blue-500",EPIC:"border-purple-500 dark:border-purple-400",LEGENDARY:"border-yellow-400 dark:border-yellow-500"};function EK({user:t,isPremium:e,activeCarnivalId:n,onOpenCheckin:r,onViewStamps:i,onViewAchievements:s}){const[o,l]=M.useState(null),[u,h]=M.useState([]),[p,g]=M.useState(!0),[w,C]=M.useState(null);if(M.useEffect(()=>{if(!t)return;(async()=>{g(!0),C(null);try{const k=zr(Pn),V=await br(k,"getPassportProfile")();l(V.data);const T=await br(k,"getPassportStamps")({limit:5});h(T.data.stamps||[])}catch(k){console.error("Error loading passport data:",k),C(k.message)}finally{g(!1)}})()},[t]),p)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] animate-pulse",children:[A.jsx("div",{className:"p-4 bg-teal-100 dark:bg-teal-900/30 rounded-full mb-4",children:A.jsx(an,{className:"w-8 h-8 text-teal-500 animate-spin"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your passport..."})]});if(w)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[A.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:A.jsx(ng,{className:"w-8 h-8 text-red-500"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Unable to Load Passport"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:w}),A.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-teal-500 text-white rounded-xl font-medium hover:bg-teal-600 transition-colors",children:"Try Again"})]});const b=CK[(o==null?void 0:o.currentTier)||"BRONZE"],_=(o==null?void 0:o.tierProgress)||{},F=(o==null?void 0:o.unlockedAchievements)||[],I=(o==null?void 0:o.achievementDefinitions)||{};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsxs("div",{className:`relative overflow-hidden rounded-3xl bg-gradient-to-br ${b.color} p-6 text-white shadow-xl`,children:[A.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full -ml-10 -mb-10 blur-xl"}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center text-3xl shadow-inner",children:b.icon}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black tracking-tight",children:"SOCA PASSPORT"}),A.jsxs("p",{className:"text-white/80 text-sm",children:[b.name," Tier"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-3xl font-black",children:(o==null?void 0:o.totalCredits)||0}),A.jsx("p",{className:"text-xs text-white/70 uppercase tracking-wider",children:"Credits"})]})]}),_.nextTier&&A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{className:"font-medium",children:b.name}),A.jsxs("span",{className:"text-white/80",children:[_.creditsToNextTier," to ",_.nextTier]})]}),A.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:A.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:`${_.progressPercent}%`}})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-teal-100 dark:bg-teal-900/30 flex items-center justify-center",children:A.jsx(_A,{className:"w-5 h-5 text-teal-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(o==null?void 0:o.totalEvents)||0}),A.jsx("p",{className:"text-xs text-gray-500",children:"Events"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:A.jsx(ti,{className:"w-5 h-5 text-blue-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((o==null?void 0:o.countriesVisited)||[]).length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Countries"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:A.jsx(JN,{className:"w-5 h-5 text-yellow-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Achievements"})]})]}),A.jsxs("button",{onClick:r,className:"w-full group relative overflow-hidden bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl p-5 shadow-lg shadow-teal-500/20 transition-all hover:-translate-y-1 active:scale-[0.99]",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),A.jsxs("div",{className:"relative flex items-center justify-center gap-3",children:[A.jsx(xd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-lg font-bold",children:"CHECK IN TO EVENT"}),A.jsx(v0,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(ww,{className:"w-5 h-5 text-yellow-500"}),"Recent Stamps"]}),u.length>0&&A.jsxs("button",{onClick:i,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(v0,{className:"w-4 h-4"})]})]}),u.length===0?A.jsxs("div",{className:"text-center py-8",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:A.jsx(_A,{className:"w-8 h-8 text-gray-400"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"No stamps yet"}),A.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Check in to your first event!"})]}):A.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-1 px-1",children:u.map(B=>A.jsxs("div",{className:`flex-shrink-0 w-24 h-24 rounded-2xl border-2 ${bK[B.rarity]} bg-gray-50 dark:bg-gray-700 flex flex-col items-center justify-center p-2 text-center`,children:[A.jsx("span",{className:"text-2xl mb-1",children:B.countryCode==="TT"?"":B.countryCode==="US"?"":B.countryCode==="JM"?"":B.countryCode==="BB"?"":B.countryCode==="LC"?"":B.countryCode==="VC"?"":""}),A.jsx("p",{className:"text-[10px] font-medium text-gray-700 dark:text-gray-300 truncate w-full",children:B.eventTitle}),A.jsx("p",{className:"text-[8px] text-gray-400 uppercase",children:B.rarity})]},B.id))})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(LN,{className:"w-5 h-5 text-purple-500"}),"Achievements",A.jsxs("span",{className:"text-xs font-normal text-gray-400",children:[F.length,"/",Object.keys(I).length]})]}),A.jsxs("button",{onClick:s,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(v0,{className:"w-4 h-4"})]})]}),A.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.values(I).map(B=>{const k=F.includes(B.id);return A.jsx("div",{className:`aspect-square rounded-xl flex items-center justify-center text-2xl transition-all ${k?"bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40 shadow-sm":"bg-gray-100 dark:bg-gray-700 opacity-40 grayscale"}`,title:`${B.name}${k?" ":""}`,children:B.icon},B.id)})}),(o==null?void 0:o.achievementPoints)>0&&A.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-purple-500",children:[A.jsx(Mi,{className:"w-4 h-4"}),A.jsxs("span",{className:"font-medium",children:[o.achievementPoints," Achievement Points"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-5 text-white shadow-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(vw,{className:"w-6 h-6"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Leaderboard"}),A.jsx("p",{className:"text-white/70 text-sm",children:"See how you rank"})]})]}),A.jsx("button",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"View Rankings"})]})})]})}function IK({isOpen:t,onClose:e,onSuccess:n}){var C,b,_,F,I,B,k,O;const[r,i]=M.useState(""),[s,o]=M.useState(!1),[l,u]=M.useState(null),[h,p]=M.useState(null);M.useEffect(()=>{t&&(i(""),u(null),p(null))},[t]);const g=async V=>{if(V.preventDefault(),!r.trim()){u("Please enter an access code");return}o(!0),u(null);try{const j=zr(Pn),E=await br(j,"passportCheckin")({accessCode:r.trim()});p(E.data),setTimeout(()=>{n==null||n(E.data)},3e3)}catch(j){console.error("Check-in error:",j);const T=j.message||"Check-in failed. Please try again.";j.code==="functions/not-found"?u("Invalid or expired access code."):j.code==="functions/already-exists"?u("You have already checked in to this event."):u(T)}finally{o(!1)}},w=V=>V.toUpperCase().replace(/[^A-Z0-9-]/g,"");return t?A.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:[A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden animate-slideUp",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-10",children:A.jsx(ri,{className:"w-5 h-5"})}),h?A.jsxs("div",{className:"p-8 text-center",children:[A.jsxs("div",{className:"relative mb-6",children:[A.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-teal-400 to-emerald-500 rounded-3xl flex items-center justify-center shadow-lg shadow-teal-500/30 animate-bounce",children:A.jsx(vA,{className:"w-16 h-16 text-white"})}),A.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:A.jsx(Mi,{className:"w-4 h-4 text-yellow-900"})})]}),A.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2",children:"Check-in Complete!"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"You earned a new stamp"}),A.jsx("div",{className:"inline-block mb-6",children:A.jsxs("div",{className:`px-6 py-4 rounded-2xl border-2 ${((C=h.stamp)==null?void 0:C.rarity)==="LEGENDARY"?"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":((b=h.stamp)==null?void 0:b.rarity)==="EPIC"?"border-purple-400 bg-purple-50 dark:bg-purple-900/20":((_=h.stamp)==null?void 0:_.rarity)==="RARE"?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 bg-gray-50 dark:bg-gray-700/50"}`,children:[A.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(F=h.stamp)==null?void 0:F.eventTitle}),A.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[(B=(I=h.stamp)==null?void 0:I.rarity)==null?void 0:B.toLowerCase()," Stamp  #",(k=h.stamp)==null?void 0:k.editionNumber]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 rounded-2xl p-4 text-white mb-4",children:[A.jsxs("div",{className:"flex items-center justify-center gap-3",children:[A.jsx(xd,{className:"w-6 h-6"}),A.jsxs("span",{className:"text-3xl font-black",children:["+",h.creditsEarned]}),A.jsx("span",{className:"text-white/80",children:"Credits"})]}),h.bonusCredits>0&&A.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 text-sm text-white/90",children:[A.jsx(P3,{className:"w-4 h-4"}),A.jsxs("span",{children:["+",h.bonusCredits," Achievement Bonus!"]})]})]}),((O=h.newAchievements)==null?void 0:O.length)>0&&A.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-2xl p-4 mb-4",children:[A.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:" Achievement Unlocked!"}),h.newAchievements.map(V=>A.jsxs("div",{className:"flex items-center justify-center gap-2",children:[A.jsx("span",{className:"text-2xl",children:V.icon}),A.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:V.name})]},V.id))]}),h.tierChanged&&A.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 text-white mb-4",children:A.jsxs("p",{className:"font-bold text-lg",children:[" You ranked up to ",h.newTier,"!"]})}),A.jsx("button",{onClick:e,className:"w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-2xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Done"})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-emerald-500 p-6 text-white text-center",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(_A,{className:"w-8 h-8"})}),A.jsx("h2",{className:"text-2xl font-black",children:"Event Check-in"}),A.jsx("p",{className:"text-teal-100 text-sm mt-1",children:"Enter your access code to earn stamps"})]}),A.jsxs("form",{onSubmit:g,className:"p-6",children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Code"}),A.jsx("input",{type:"text",value:r,onChange:V=>i(w(V.target.value)),placeholder:"e.g. PRO-123-4567",className:"w-full px-5 py-4 text-2xl font-mono font-bold text-center tracking-widest bg-gray-50 dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 dark:text-white transition-all uppercase",disabled:s,autoFocus:!0}),A.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Get this code from the event host or promoter"})]}),l&&A.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[A.jsx(Gp,{className:"w-5 h-5 flex-shrink-0"}),A.jsx("span",{children:l})]}),A.jsx("button",{type:"submit",disabled:s||!r.trim(),className:"w-full py-4 bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl font-bold text-lg shadow-lg shadow-teal-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:s?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-5 h-5 animate-spin"}),"Checking in..."]}):A.jsxs(A.Fragment,{children:[A.jsx(xd,{className:"w-5 h-5"}),"Claim Stamp"]})})]})]})]}),A.jsx("style",{children:`
                @keyframes slideUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-slideUp {
                    animation: slideUp 0.3s ease-out;
                }
            `})]}):null}const pE={TT:"",US:"",JM:"",BB:"",LC:"",VC:"",GD:"",AG:"",KN:"",BS:"",BM:"",GY:"",CA:"",GB:"",VG:"",VI:"",KY:"",SX:"",MQ:"",GP:"",PR:"",CU:"",HT:"",DO:"",AW:"",CW:"",JP:"",XX:""},el={LEGENDARY:{name:"Legendary",borderColor:"border-yellow-400",bgColor:"bg-gradient-to-br from-yellow-50 to-amber-100 dark:from-yellow-900/20 dark:to-amber-900/30",textColor:"text-yellow-600 dark:text-yellow-400",glow:"shadow-lg shadow-yellow-400/30"},EPIC:{name:"Epic",borderColor:"border-purple-400",bgColor:"bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/30",textColor:"text-purple-600 dark:text-purple-400",glow:"shadow-lg shadow-purple-400/20"},RARE:{name:"Rare",borderColor:"border-blue-400",bgColor:"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-900/20 dark:to-cyan-900/30",textColor:"text-blue-600 dark:text-blue-400",glow:""},COMMON:{name:"Common",borderColor:"border-gray-300 dark:border-gray-600",bgColor:"bg-gray-50 dark:bg-gray-700/50",textColor:"text-gray-600 dark:text-gray-400",glow:""}};function TK({user:t,onBack:e}){const[n,r]=M.useState([]),[i,s]=M.useState(!0),[o,l]=M.useState(null),[u,h]=M.useState("ALL"),[p,g]=M.useState(new Set);M.useEffect(()=>{if(!t)return;(async()=>{var F;s(!0),l(null);try{const I=zr(Pn),k=await br(I,"getPassportStamps")({limit:100,rarity:u==="ALL"?null:u});r(k.data.stamps||[]);const O=new Set(((F=k.data.stamps)==null?void 0:F.filter(V=>V.isFavorite).map(V=>V.id))||[]);g(O)}catch(I){console.error("Error loading stamps:",I),l(I.message)}finally{s(!1)}})()},[t,u]);const w=_=>{g(F=>{const I=new Set(F);return I.has(_)?I.delete(_):I.add(_),I})},C=_=>_?(_.toDate?_.toDate():new Date(_)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",b=n.reduce((_,F)=>(_[F.rarity]=(_[F.rarity]||0)+1,_),{});return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(RN,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(ww,{className:"w-6 h-6 text-yellow-500"}),"Stamp Collection"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," stamps collected"]})]})]}),A.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 -mx-1 px-1",children:[A.jsxs("button",{onClick:()=>h("ALL"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${u==="ALL"?"bg-teal-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["All (",n.length,")"]}),["LEGENDARY","EPIC","RARE","COMMON"].map(_=>A.jsxs("button",{onClick:()=>h(_),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${u===_?`${el[_].bgColor} ${el[_].textColor} border ${el[_].borderColor}`:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[el[_].name," (",b[_]||0,")"]},_))]}),i&&A.jsx("div",{className:"flex items-center justify-center py-20",children:A.jsx(an,{className:"w-8 h-8 text-teal-500 animate-spin"})}),o&&!i&&A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:o}),A.jsx("button",{onClick:()=>h("ALL"),className:"px-4 py-2 bg-teal-500 text-white rounded-xl",children:"Retry"})]}),!i&&!o&&n.length===0&&A.jsxs("div",{className:"text-center py-16",children:[A.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center",children:A.jsx(ww,{className:"w-10 h-10 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 mb-2",children:"No Stamps Yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Check in to events to start collecting stamps!"})]}),!i&&n.length>0&&A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n.map(_=>{const F=el[_.rarity]||el.COMMON,I=p.has(_.id);return A.jsxs("div",{className:`relative rounded-2xl border-2 ${F.borderColor} ${F.bgColor} ${F.glow} p-4 transition-all hover:scale-[1.02] cursor-pointer`,children:[A.jsx("button",{onClick:()=>w(_.id),className:"absolute top-2 right-2 p-1.5 rounded-full bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 transition-colors",children:A.jsx(L3,{className:`w-4 h-4 ${I?"fill-red-500 text-red-500":"text-gray-400"}`})}),A.jsx("div",{className:"text-4xl mb-3 text-center",children:pE[_.countryCode]||pE.XX}),A.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm text-center truncate mb-1",children:_.eventTitle}),A.jsxs("p",{className:`text-xs ${F.textColor} text-center font-medium uppercase tracking-wide`,children:[F.name," #",_.editionNumber]}),A.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 space-y-1",children:[A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(tg,{className:"w-3 h-3"}),A.jsx("span",{children:C(_.stampedAt)})]}),_.location&&A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(ti,{className:"w-3 h-3"}),A.jsx("span",{className:"truncate",children:_.location})]})]}),A.jsx("div",{className:"mt-2 text-center",children:A.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 rounded-full text-xs font-medium",children:["+",_.creditsEarned," credits"]})})]},_.id)})})]})}const SK={first_stamp:{id:"first_stamp",name:"First Steps",description:"Claim your first stamp",icon:"",category:"MILESTONE",points:50,criteria:{type:"EVENT_COUNT",target:1}},island_hopper:{id:"island_hopper",name:"Island Hopper",description:"Check in at 3 different countries",icon:"",category:"TRAVEL",points:500,criteria:{type:"COUNTRY_COUNT",target:3}},sunrise_warrior:{id:"sunrise_warrior",name:"Sunrise Warrior",description:"Check in at 5 J'ouvert or early morning events",icon:"",category:"EVENTS",points:300,criteria:{type:"EVENT_TYPE",target:5}},loyal_fan:{id:"loyal_fan",name:"Loyal Fan",description:"Check in to 10 events total",icon:"",category:"MILESTONE",points:250,criteria:{type:"EVENT_COUNT",target:10}},tier_up:{id:"tier_up",name:"Moving Up",description:"Reach Silver tier",icon:"",category:"MILESTONE",points:200,criteria:{type:"TIER_REACHED",target:"SILVER"}}},Gh={MILESTONE:"from-blue-500 to-indigo-500",TRAVEL:"from-teal-500 to-cyan-500",EVENTS:"from-orange-500 to-amber-500",SOCIAL:"from-pink-500 to-rose-500"};function kK({profile:t,onBack:e}){const n=(t==null?void 0:t.unlockedAchievements)||[],r=(t==null?void 0:t.achievementPoints)||0,i=(t==null?void 0:t.totalEvents)||0,s=((t==null?void 0:t.countriesVisited)||[]).length,o=(t==null?void 0:t.currentTier)||"BRONZE",l=(t==null?void 0:t.eventTypeStats)||{},u=g=>{const{criteria:w}=g;let C=0,b=w.target;switch(w.type){case"EVENT_COUNT":C=i;break;case"COUNTRY_COUNT":C=s;break;case"TIER_REACHED":const _=["BRONZE","SILVER","GOLD","PLATINUM"],F=_.indexOf(o),I=_.indexOf(w.target);C=F>=I?1:0,b=1;break;case"EVENT_TYPE":C=(l.jouvert||0)+(l.breakfast||0)+(l.early_morning||0);break;default:C=0}return{current:Math.min(C,b),target:b,percent:Math.min(100,Math.floor(C/b*100))}},h=Object.values(SK).map(g=>({...g,isUnlocked:n.includes(g.id),progress:u(g)})),p=h.filter(g=>g.isUnlocked).length;return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(RN,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(LN,{className:"w-6 h-6 text-purple-500"}),"Achievements"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[p,"/",h.length," unlocked"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-5 text-white mb-6 shadow-lg shadow-purple-500/20",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-purple-200 text-sm",children:"Total Points Earned"}),A.jsx("p",{className:"text-4xl font-black",children:r})]}),A.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(Mi,{className:"w-8 h-8"})})]})}),A.jsx("div",{className:"space-y-4",children:h.map(g=>A.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-2xl border overflow-hidden transition-all ${g.isUnlocked?"border-purple-200 dark:border-purple-800 shadow-sm":"border-gray-200 dark:border-gray-700 opacity-75"}`,children:[A.jsx("div",{className:`h-1 bg-gradient-to-r ${Gh[g.category]||Gh.MILESTONE}`}),A.jsx("div",{className:"p-4",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center text-2xl ${g.isUnlocked?"bg-purple-100 dark:bg-purple-900/30":"bg-gray-100 dark:bg-gray-700 grayscale"}`,children:g.icon}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-start justify-between gap-2",children:[A.jsxs("div",{children:[A.jsx("h3",{className:`font-bold ${g.isUnlocked?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:g.name}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.description})]}),g.isUnlocked?A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg text-xs font-medium",children:[A.jsx(vA,{className:"w-3 h-3"}),"Unlocked"]}):A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-500 rounded-lg text-xs font-medium",children:[A.jsx(yw,{className:"w-3 h-3"}),"Locked"]})]}),!g.isUnlocked&&A.jsxs("div",{className:"mt-3",children:[A.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[A.jsx("span",{children:"Progress"}),A.jsxs("span",{children:[g.progress.current,"/",g.progress.target]})]}),A.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:A.jsx("div",{className:`h-full rounded-full bg-gradient-to-r ${Gh[g.category]||Gh.MILESTONE} transition-all duration-500`,style:{width:`${g.progress.percent}%`}})})]}),A.jsx("div",{className:"mt-2",children:A.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium ${g.isUnlocked?"text-purple-600 dark:text-purple-400":"text-gray-400"}`,children:[A.jsx(Mi,{className:"w-3 h-3"}),g.isUnlocked?`+${g.points} points earned`:`${g.points} points`]})})]})]})})]},g.id))}),A.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-2xl text-center",children:[A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"More achievements coming soon!"}),A.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Squad Leader  Ocean Voyager  Carnival Royalty  and more..."})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _w=function(t,e){return _w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},_w(t,e)};function xi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_w(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Bw=function(){return Bw=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bw.apply(this,arguments)};function Wn(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(p){try{h(r.next(p))}catch(g){o(g)}}function u(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?s(p.value):i(p.value).then(l,u)}h((r=r.apply(t,[])).next())})}function Un(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(p){return u([h,p])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(p){h=[6,p],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function qh(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var Ds=function(){function t(e,n,r,i){this.left=e,this.top=n,this.width=r,this.height=i}return t.prototype.add=function(e,n,r,i){return new t(this.left+e,this.top+n,this.width+r,this.height+i)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(i){return i.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),lg=function(t,e){return Ds.fromClientRect(t,e.getBoundingClientRect())},UK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),i=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Ds(0,0,r,i)},cg=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e},zt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,s="";++i<n;){var o=t[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},mE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",NK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wh=0;Wh<mE.length;Wh++)NK[mE.charCodeAt(Wh)]=Wh;var gE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",du=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $h=0;$h<gE.length;$h++)du[gE.charCodeAt($h)]=$h;var FK=function(t){var e=t.length*.75,n=t.length,r,i=0,s,o,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),p=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)s=du[t.charCodeAt(r)],o=du[t.charCodeAt(r+1)],l=du[t.charCodeAt(r+2)],u=du[t.charCodeAt(r+3)],p[i++]=s<<2|o>>4,p[i++]=(o&15)<<4|l>>2,p[i++]=(l&3)<<6|u&63;return h},QK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},PK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Jo=5,m_=11,x0=2,LK=m_-Jo,eF=65536>>Jo,RK=1<<Jo,_0=RK-1,DK=1024>>Jo,jK=eF+DK,MK=jK,OK=32,HK=MK+OK,VK=65536>>m_,KK=1<<LK,zK=KK-1,yE=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},GK=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},qK=function(t,e){var n=FK(t),r=Array.isArray(n)?PK(n):new Uint32Array(n),i=Array.isArray(n)?QK(n):new Uint16Array(n),s=24,o=yE(i,s/2,r[4]/2),l=r[5]===2?yE(i,(s+r[4])/2):GK(r,Math.ceil((s+r[4])/4));return new WK(r[0],r[1],r[2],r[3],o,l)},WK=function(){function t(e,n,r,i,s,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Jo],n=(n<<x0)+(e&_0),this.data[n];if(e<=65535)return n=this.index[eF+(e-55296>>Jo)],n=(n<<x0)+(e&_0),this.data[n];if(e<this.highStart)return n=HK-VK+(e>>m_),n=this.index[n],n+=e>>Jo&zK,n=this.index[n],n=(n<<x0)+(e&_0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),wE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$K=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zh=0;Zh<wE.length;Zh++)$K[wE.charCodeAt(Zh)]=Zh;var ZK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",vE=50,JK=1,tF=2,nF=3,XK=4,YK=5,xE=7,rF=8,_E=9,Ua=10,Cw=11,BE=12,bw=13,e6=14,hu=15,Ew=16,Jh=17,Xc=18,t6=19,CE=20,Iw=21,Yc=22,B0=23,tl=24,Br=25,fu=26,pu=27,nl=28,n6=29,jo=30,r6=31,Xh=32,Yh=33,Tw=34,Sw=35,kw=36,_d=37,Uw=38,zf=39,Gf=40,C0=41,iF=42,i6=43,s6=[9001,65288],sF="!",qe="",ef="",Nw=qK(ZK),us=[jo,kw],Fw=[JK,tF,nF,YK],aF=[Ua,rF],bE=[pu,fu],a6=Fw.concat(aF),EE=[Uw,zf,Gf,Tw,Sw],o6=[hu,bw],A6=function(t,e){e===void 0&&(e="strict");var n=[],r=[],i=[];return t.forEach(function(s,o){var l=Nw.get(s);if(l>vE?(i.push(!0),l-=vE):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(o),n.push(Ew);if(l===XK||l===Cw){if(o===0)return r.push(o),n.push(jo);var u=n[o-1];return a6.indexOf(u)===-1?(r.push(r[o-1]),n.push(u)):(r.push(o),n.push(jo))}if(r.push(o),l===r6)return n.push(e==="strict"?Iw:_d);if(l===iF||l===n6)return n.push(jo);if(l===i6)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(_d):n.push(jo);n.push(l)}),[r,n,i]},b0=function(t,e,n,r){var i=r[n];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var s=n;s<=r.length;){s++;var o=r[s];if(o===e)return!0;if(o!==Ua)break}if(i===Ua)for(var s=n;s>0;){s--;var l=r[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var u=n;u<=r.length;){u++;var o=r[u];if(o===e)return!0;if(o!==Ua)break}if(l!==Ua)break}return!1},IE=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Ua)n--;else return r}return 0},l6=function(t,e,n,r,i){if(n[r]===0)return qe;var s=r-1;if(Array.isArray(i)&&i[s]===!0)return qe;var o=s-1,l=s+1,u=e[s],h=o>=0?e[o]:0,p=e[l];if(u===tF&&p===nF)return qe;if(Fw.indexOf(u)!==-1)return sF;if(Fw.indexOf(p)!==-1||aF.indexOf(p)!==-1)return qe;if(IE(s,e)===rF)return ef;if(Nw.get(t[s])===Cw||(u===Xh||u===Yh)&&Nw.get(t[l])===Cw||u===xE||p===xE||u===_E||[Ua,bw,hu].indexOf(u)===-1&&p===_E||[Jh,Xc,t6,tl,nl].indexOf(p)!==-1||IE(s,e)===Yc||b0(B0,Yc,s,e)||b0([Jh,Xc],Iw,s,e)||b0(BE,BE,s,e))return qe;if(u===Ua)return ef;if(u===B0||p===B0)return qe;if(p===Ew||u===Ew)return ef;if([bw,hu,Iw].indexOf(p)!==-1||u===e6||h===kw&&o6.indexOf(u)!==-1||u===nl&&p===kw||p===CE||us.indexOf(p)!==-1&&u===Br||us.indexOf(u)!==-1&&p===Br||u===pu&&[_d,Xh,Yh].indexOf(p)!==-1||[_d,Xh,Yh].indexOf(u)!==-1&&p===fu||us.indexOf(u)!==-1&&bE.indexOf(p)!==-1||bE.indexOf(u)!==-1&&us.indexOf(p)!==-1||[pu,fu].indexOf(u)!==-1&&(p===Br||[Yc,hu].indexOf(p)!==-1&&e[l+1]===Br)||[Yc,hu].indexOf(u)!==-1&&p===Br||u===Br&&[Br,nl,tl].indexOf(p)!==-1)return qe;if([Br,nl,tl,Jh,Xc].indexOf(p)!==-1)for(var g=s;g>=0;){var w=e[g];if(w===Br)return qe;if([nl,tl].indexOf(w)!==-1)g--;else break}if([pu,fu].indexOf(p)!==-1)for(var g=[Jh,Xc].indexOf(u)!==-1?o:s;g>=0;){var w=e[g];if(w===Br)return qe;if([nl,tl].indexOf(w)!==-1)g--;else break}if(Uw===u&&[Uw,zf,Tw,Sw].indexOf(p)!==-1||[zf,Tw].indexOf(u)!==-1&&[zf,Gf].indexOf(p)!==-1||[Gf,Sw].indexOf(u)!==-1&&p===Gf||EE.indexOf(u)!==-1&&[CE,fu].indexOf(p)!==-1||EE.indexOf(p)!==-1&&u===pu||us.indexOf(u)!==-1&&us.indexOf(p)!==-1||u===tl&&us.indexOf(p)!==-1||us.concat(Br).indexOf(u)!==-1&&p===Yc&&s6.indexOf(t[l])===-1||us.concat(Br).indexOf(p)!==-1&&u===Xc)return qe;if(u===C0&&p===C0){for(var C=n[s],b=1;C>0&&(C--,e[C]===C0);)b++;if(b%2!==0)return qe}return u===Xh&&p===Yh?qe:ef},c6=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=A6(t,e.lineBreak),r=n[0],i=n[1],s=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(l){return[Br,jo,iF].indexOf(l)!==-1?_d:l}));var o=e.wordBreak==="keep-all"?s.map(function(l,u){return l&&t[u]>=19968&&t[u]<=40959}):void 0;return[r,i,o]},u6=function(){function t(e,n,r,i){this.codePoints=e,this.required=n===sF,this.start=r,this.end=i}return t.prototype.slice=function(){return zt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),d6=function(t,e){var n=cg(t),r=c6(n,e),i=r[0],s=r[1],o=r[2],l=n.length,u=0,h=0;return{next:function(){if(h>=l)return{done:!0,value:null};for(var p=qe;h<l&&(p=l6(n,s,i,++h,o))===qe;);if(p!==qe||h===l){var g=new u6(n,p,u,h);return u=h,{value:g,done:!1}}return{done:!0,value:null}}}},h6=1,f6=2,Wd=4,TE=8,qp=10,SE=47,Ru=92,p6=9,m6=32,tf=34,eu=61,g6=35,y6=36,w6=37,nf=39,rf=40,tu=41,v6=95,lr=45,x6=33,_6=60,B6=62,C6=64,b6=91,E6=93,I6=61,T6=123,sf=63,S6=125,kE=124,k6=126,U6=128,UE=65533,E0=42,zo=43,N6=44,F6=58,Q6=59,Bd=46,P6=0,L6=8,R6=11,D6=14,j6=31,M6=127,Qi=-1,oF=48,AF=97,lF=101,O6=102,H6=117,V6=122,cF=65,uF=69,dF=70,K6=85,z6=90,Fn=function(t){return t>=oF&&t<=57},G6=function(t){return t>=55296&&t<=57343},rl=function(t){return Fn(t)||t>=cF&&t<=dF||t>=AF&&t<=O6},q6=function(t){return t>=AF&&t<=V6},W6=function(t){return t>=cF&&t<=z6},$6=function(t){return q6(t)||W6(t)},Z6=function(t){return t>=U6},af=function(t){return t===qp||t===p6||t===m6},Wp=function(t){return $6(t)||Z6(t)||t===v6},NE=function(t){return Wp(t)||Fn(t)||t===lr},J6=function(t){return t>=P6&&t<=L6||t===R6||t>=D6&&t<=j6||t===M6},ya=function(t,e){return t!==Ru?!1:e!==qp},of=function(t,e,n){return t===lr?Wp(e)||ya(e,n):Wp(t)?!0:!!(t===Ru&&ya(t,e))},I0=function(t,e,n){return t===zo||t===lr?Fn(e)?!0:e===Bd&&Fn(n):Fn(t===Bd?e:t)},X6=function(t){var e=0,n=1;(t[e]===zo||t[e]===lr)&&(t[e]===lr&&(n=-1),e++);for(var r=[];Fn(t[e]);)r.push(t[e++]);var i=r.length?parseInt(zt.apply(void 0,r),10):0;t[e]===Bd&&e++;for(var s=[];Fn(t[e]);)s.push(t[e++]);var o=s.length,l=o?parseInt(zt.apply(void 0,s),10):0;(t[e]===uF||t[e]===lF)&&e++;var u=1;(t[e]===zo||t[e]===lr)&&(t[e]===lr&&(u=-1),e++);for(var h=[];Fn(t[e]);)h.push(t[e++]);var p=h.length?parseInt(zt.apply(void 0,h),10):0;return n*(i+l*Math.pow(10,-o))*Math.pow(10,u*p)},Y6={type:2},e8={type:3},t8={type:4},n8={type:13},r8={type:8},i8={type:21},s8={type:9},a8={type:10},o8={type:11},A8={type:12},l8={type:14},Af={type:23},c8={type:1},u8={type:25},d8={type:24},h8={type:26},f8={type:27},p8={type:28},m8={type:29},g8={type:31},Qw={type:32},hF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(cg(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==Qw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case tf:return this.consumeStringToken(tf);case g6:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);if(NE(n)||ya(r,i)){var s=of(n,r,i)?f6:h6,o=this.consumeName();return{type:5,value:o,flags:s}}break;case y6:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),n8;break;case nf:return this.consumeStringToken(nf);case rf:return Y6;case tu:return e8;case E0:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),l8;break;case zo:if(I0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case N6:return t8;case lr:var l=e,u=this.peekCodePoint(0),h=this.peekCodePoint(1);if(I0(l,u,h))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(of(l,u,h))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(u===lr&&h===B6)return this.consumeCodePoint(),this.consumeCodePoint(),d8;break;case Bd:if(I0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case SE:if(this.peekCodePoint(0)===E0)for(this.consumeCodePoint();;){var p=this.consumeCodePoint();if(p===E0&&(p=this.consumeCodePoint(),p===SE))return this.consumeToken();if(p===Qi)return this.consumeToken()}break;case F6:return h8;case Q6:return f8;case _6:if(this.peekCodePoint(0)===x6&&this.peekCodePoint(1)===lr&&this.peekCodePoint(2)===lr)return this.consumeCodePoint(),this.consumeCodePoint(),u8;break;case C6:var g=this.peekCodePoint(0),w=this.peekCodePoint(1),C=this.peekCodePoint(2);if(of(g,w,C)){var o=this.consumeName();return{type:7,value:o}}break;case b6:return p8;case Ru:if(ya(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case E6:return m8;case I6:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),r8;break;case T6:return o8;case S6:return A8;case H6:case K6:var b=this.peekCodePoint(0),_=this.peekCodePoint(1);return b===zo&&(rl(_)||_===sf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case kE:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),s8;if(this.peekCodePoint(0)===kE)return this.consumeCodePoint(),i8;break;case k6:if(this.peekCodePoint(0)===eu)return this.consumeCodePoint(),a8;break;case Qi:return Qw}return af(e)?(this.consumeWhiteSpace(),g8):Fn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Wp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:zt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();rl(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===sf&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var i=parseInt(zt.apply(void 0,e.map(function(u){return u===sf?oF:u})),16),s=parseInt(zt.apply(void 0,e.map(function(u){return u===sf?dF:u})),16);return{type:30,start:i,end:s}}var o=parseInt(zt.apply(void 0,e),16);if(this.peekCodePoint(0)===lr&&rl(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var l=[];rl(n)&&l.length<6;)l.push(n),n=this.consumeCodePoint();var s=parseInt(zt.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===rf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===rf?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qi)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===nf||n===tf){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qi||this.peekCodePoint(0)===tu)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Af)}for(;;){var i=this.consumeCodePoint();if(i===Qi||i===tu)return{type:22,value:zt.apply(void 0,e)};if(af(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Qi||this.peekCodePoint(0)===tu?(this.consumeCodePoint(),{type:22,value:zt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Af);if(i===tf||i===nf||i===rf||J6(i))return this.consumeBadUrlRemnants(),Af;if(i===Ru)if(ya(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Af;else e.push(i)}},t.prototype.consumeWhiteSpace=function(){for(;af(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===tu||e===Qi)return;ya(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var i=Math.min(n,e);r+=zt.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var i=this._value[r];if(i===Qi||i===void 0||i===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(i===qp)return this._value.splice(0,r),c8;if(i===Ru){var s=this._value[r+1];s!==Qi&&s!==void 0&&(s===qp?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):ya(i,s)&&(n+=this.consumeStringSlice(r),n+=zt(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Wd,r=this.peekCodePoint(0);for((r===zo||r===lr)&&e.push(this.consumeCodePoint());Fn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(r===Bd&&Fn(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=TE;Fn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===uF||r===lF)&&((i===zo||i===lr)&&Fn(s)||Fn(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=TE;Fn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[X6(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(of(i,s,o)){var l=this.consumeName();return{type:15,number:n,flags:r,unit:l}}return i===w6?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(rl(e)){for(var n=zt(e);rl(this.peekCodePoint(0))&&n.length<6;)n+=zt(this.consumeCodePoint());af(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||G6(r)||r>1114111?UE:r}return e===Qi?UE:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(NE(n))e+=zt(n);else if(ya(n,this.peekCodePoint(0)))e+=zt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),fF=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new hF;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||w8(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Qw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),$d=function(t){return t.type===15},wc=function(t){return t.type===17},ut=function(t){return t.type===20},y8=function(t){return t.type===0},Pw=function(t,e){return ut(t)&&t.value===e},pF=function(t){return t.type!==31},lc=function(t){return t.type!==31&&t.type!==4},$i=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},w8=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},eo=function(t){return t.type===17||t.type===15},Xt=function(t){return t.type===16||eo(t)},mF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},vn={type:17,number:0,flags:Wd},g_={type:16,number:50,flags:Wd},Na={type:16,number:100,flags:Wd},mu=function(t,e,n){var r=t[0],i=t[1];return[pt(r,e),pt(typeof i<"u"?i:r,n)]},pt=function(t,e){if(t.type===16)return t.number/100*e;if($d(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},gF="deg",yF="grad",wF="rad",vF="turn",ug={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case gF:return Math.PI*e.number/180;case yF:return Math.PI/200*e.number;case wF:return e.number;case vF:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},xF=function(t){return t.type===15&&(t.unit===gF||t.unit===yF||t.unit===wF||t.unit===vF)},_F=function(t){var e=t.filter(ut).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[vn,vn];case"to top":case"bottom":return Wr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[vn,Na];case"to right":case"left":return Wr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Na,Na];case"to bottom":case"top":return Wr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Na,vn];case"to left":case"right":return Wr(270)}return 0},Wr=function(t){return Math.PI*t/180},Ka={name:"color",parse:function(t,e){if(e.type===18){var n=v8[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return Fa(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return Fa(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return Fa(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return Fa(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var l=Ss[e.value.toUpperCase()];if(typeof l<"u")return l}return Ss.TRANSPARENT}},za=function(t){return(255&t)===0},dn=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+r+","+n+","+e/255+")":"rgb("+i+","+r+","+n+")"},Fa=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},FE=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},QE=function(t,e){var n=e.filter(lc);if(n.length===3){var r=n.map(FE),i=r[0],s=r[1],o=r[2];return Fa(i,s,o,1)}if(n.length===4){var l=n.map(FE),i=l[0],s=l[1],o=l[2],u=l[3];return Fa(i,s,o,u)}return 0};function T0(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var PE=function(t,e){var n=e.filter(lc),r=n[0],i=n[1],s=n[2],o=n[3],l=(r.type===17?Wr(r.number):ug.parse(t,r))/(Math.PI*2),u=Xt(i)?i.number/100:0,h=Xt(s)?s.number/100:0,p=typeof o<"u"&&Xt(o)?pt(o,1):1;if(u===0)return Fa(h*255,h*255,h*255,1);var g=h<=.5?h*(u+1):h+u-h*u,w=h*2-g,C=T0(w,g,l+1/3),b=T0(w,g,l),_=T0(w,g,l-1/3);return Fa(C*255,b*255,_*255,p)},v8={hsl:PE,hsla:PE,rgb:QE,rgba:QE},Du=function(t,e){return Ka.parse(t,fF.create(e).parseComponentValue())},Ss={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},x8={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ut(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_8={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dg=function(t,e){var n=Ka.parse(t,e[0]),r=e[1];return r&&Xt(r)?{color:n,stop:r}:{color:n,stop:null}},LE=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=vn),r.stop===null&&(r.stop=Na);for(var i=[],s=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var u=pt(l,e);u>s?i.push(u):i.push(s),s=u}else i.push(null)}for(var h=null,o=0;o<i.length;o++){var p=i[o];if(p===null)h===null&&(h=o);else if(h!==null){for(var g=o-h,w=i[h-1],C=(p-w)/(g+1),b=1;b<=g;b++)i[h+b-1]=C*b;h=null}}return t.map(function(_,F){var I=_.color;return{color:I,stop:Math.max(Math.min(1,i[F]/e),0)}})},B8=function(t,e,n){var r=e/2,i=n/2,s=pt(t[0],e)-r,o=i-pt(t[1],n);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},C8=function(t,e,n){var r=typeof t=="number"?t:B8(t,e,n),i=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,o=n/2,l=i/2,u=Math.sin(r-Math.PI/2)*l,h=Math.cos(r-Math.PI/2)*l;return[i,s-h,s+h,o-u,o+u]},ui=function(t,e){return Math.sqrt(t*t+e*e)},RE=function(t,e,n,r,i){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(o,l){var u=l[0],h=l[1],p=ui(n-u,r-h);return(i?p<o.optimumDistance:p>o.optimumDistance)?{optimumCorner:l,optimumDistance:p}:o},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},b8=function(t,e,n,r,i){var s=0,o=0;switch(t.size){case 0:t.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(t.shape===0)s=o=Math.min(ui(e,n),ui(e,n-i),ui(e-r,n),ui(e-r,n-i));else if(t.shape===1){var l=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(e),Math.abs(e-r)),u=RE(r,i,e,n,!0),h=u[0],p=u[1];s=ui(h-e,(p-n)/l),o=l*s}break;case 1:t.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(t.shape===0)s=o=Math.max(ui(e,n),ui(e,n-i),ui(e-r,n),ui(e-r,n-i));else if(t.shape===1){var l=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(e),Math.abs(e-r)),g=RE(r,i,e,n,!1),h=g[0],p=g[1];s=ui(h-e,(p-n)/l),o=l*s}break}return Array.isArray(t.size)&&(s=pt(t.size[0],r),o=t.size.length===2?pt(t.size[1],i):s),[s,o]},E8=function(t,e){var n=Wr(180),r=[];return $i(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&o.value==="to"){n=_F(i);return}else if(xF(o)){n=ug.parse(t,o);return}}var l=dg(t,i);r.push(l)}),{angle:n,stops:r,type:1}},lf=function(t,e){var n=Wr(180),r=[];return $i(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=_F(i);return}else if(xF(o)){n=(ug.parse(t,o)+Wr(270))%Wr(360);return}}var l=dg(t,i);r.push(l)}),{angle:n,stops:r,type:1}},I8=function(t,e){var n=Wr(180),r=[],i=1,s=0,o=3,l=[];return $i(e).forEach(function(u,h){var p=u[0];if(h===0){if(ut(p)&&p.value==="linear"){i=1;return}else if(ut(p)&&p.value==="radial"){i=2;return}}if(p.type===18){if(p.name==="from"){var g=Ka.parse(t,p.values[0]);r.push({stop:vn,color:g})}else if(p.name==="to"){var g=Ka.parse(t,p.values[0]);r.push({stop:Na,color:g})}else if(p.name==="color-stop"){var w=p.values.filter(lc);if(w.length===2){var g=Ka.parse(t,w[1]),C=w[0];wc(C)&&r.push({stop:{type:16,number:C.number*100,flags:C.flags},color:g})}}}}),i===1?{angle:(n+Wr(180))%Wr(360),stops:r,type:i}:{size:o,shape:s,stops:r,position:l,type:i}},BF="closest-side",CF="farthest-side",bF="closest-corner",EF="farthest-corner",IF="circle",TF="ellipse",SF="cover",kF="contain",T8=function(t,e){var n=0,r=3,i=[],s=[];return $i(e).forEach(function(o,l){var u=!0;if(l===0){var h=!1;u=o.reduce(function(g,w){if(h)if(ut(w))switch(w.value){case"center":return s.push(g_),g;case"top":case"left":return s.push(vn),g;case"right":case"bottom":return s.push(Na),g}else(Xt(w)||eo(w))&&s.push(w);else if(ut(w))switch(w.value){case IF:return n=0,!1;case TF:return n=1,!1;case"at":return h=!0,!1;case BF:return r=0,!1;case SF:case CF:return r=1,!1;case kF:case bF:return r=2,!1;case EF:return r=3,!1}else if(eo(w)||Xt(w))return Array.isArray(r)||(r=[]),r.push(w),!1;return g},u)}if(u){var p=dg(t,o);i.push(p)}}),{size:r,shape:n,stops:i,position:s,type:2}},cf=function(t,e){var n=0,r=3,i=[],s=[];return $i(e).forEach(function(o,l){var u=!0;if(l===0?u=o.reduce(function(p,g){if(ut(g))switch(g.value){case"center":return s.push(g_),!1;case"top":case"left":return s.push(vn),!1;case"right":case"bottom":return s.push(Na),!1}else if(Xt(g)||eo(g))return s.push(g),!1;return p},u):l===1&&(u=o.reduce(function(p,g){if(ut(g))switch(g.value){case IF:return n=0,!1;case TF:return n=1,!1;case kF:case BF:return r=0,!1;case CF:return r=1,!1;case bF:return r=2,!1;case SF:case EF:return r=3,!1}else if(eo(g)||Xt(g))return Array.isArray(r)||(r=[]),r.push(g),!1;return p},u)),u){var h=dg(t,o);i.push(h)}}),{size:r,shape:n,stops:i,position:s,type:2}},S8=function(t){return t.type===1},k8=function(t){return t.type===2},y_={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=UF[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function U8(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!UF[t.name])}var UF={"linear-gradient":E8,"-moz-linear-gradient":lf,"-ms-linear-gradient":lf,"-o-linear-gradient":lf,"-webkit-linear-gradient":lf,"radial-gradient":T8,"-moz-radial-gradient":cf,"-ms-radial-gradient":cf,"-o-radial-gradient":cf,"-webkit-radial-gradient":cf,"-webkit-gradient":I8},N8={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return lc(r)&&U8(r)}).map(function(r){return y_.parse(t,r)})}},F8={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ut(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Q8={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return $i(e).map(function(n){return n.filter(Xt)}).map(mF)}},P8={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return $i(e).map(function(n){return n.filter(ut).map(function(r){return r.value}).join(" ")}).map(L8)}},L8=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},jl;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(jl||(jl={}));var R8={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return $i(e).map(function(n){return n.filter(D8)})}},D8=function(t){return ut(t)||Xt(t)},hg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},j8=hg("top"),M8=hg("right"),O8=hg("bottom"),H8=hg("left"),fg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return mF(n.filter(Xt))}}},V8=fg("top-left"),K8=fg("top-right"),z8=fg("bottom-right"),G8=fg("bottom-left"),pg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},q8=pg("top"),W8=pg("right"),$8=pg("bottom"),Z8=pg("left"),mg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return $d(n)?n.number:0}}},J8=mg("top"),X8=mg("right"),Y8=mg("bottom"),e9=mg("left"),t9={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},n9={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},r9={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ut).reduce(function(n,r){return n|i9(r.value)},0)}},i9=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},s9={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},a9={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},$p;(function(t){t.NORMAL="normal",t.STRICT="strict"})($p||($p={}));var o9={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return $p.STRICT;case"normal":default:return $p.NORMAL}}},A9={name:"line-height",initialValue:"normal",prefix:!1,type:4},DE=function(t,e){return ut(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Xt(t)?pt(t,e):e},l9={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:y_.parse(t,e)}},c9={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Lw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},gg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},u9=gg("top"),d9=gg("right"),h9=gg("bottom"),f9=gg("left"),p9={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ut).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},m9={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},yg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},g9=yg("top"),y9=yg("right"),w9=yg("bottom"),v9=yg("left"),x9={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},_9={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},B9={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Pw(e[0],"none")?[]:$i(e).map(function(n){for(var r={color:Ss.TRANSPARENT,offsetX:vn,offsetY:vn,blur:vn},i=0,s=0;s<n.length;s++){var o=n[s];eo(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:r.blur=o,i++):r.color=Ka.parse(t,o)}return r})}},C9={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},b9={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=T9[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},E9=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},I9=function(t){var e=t.filter(function(u){return u.type===17}).map(function(u){return u.number}),n=e[0],r=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[n,r,i,s,o,l]:null},T9={matrix:E9,matrix3d:I9},jE={type:16,number:50,flags:Wd},S9=[jE,jE],k9={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Xt);return n.length!==2?S9:[n[0],n[1]]}},U9={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ju;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ju||(ju={}));var N9={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ju.BREAK_ALL;case"keep-all":return ju.KEEP_ALL;case"normal":default:return ju.NORMAL}}},F9={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(wc(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},NF={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Q9={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return wc(e)?e.number:1}},P9={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},L9={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ut).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},R9={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(i){switch(i.type){case 20:case 0:n.push(i.value);break;case 17:n.push(i.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},D9={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},j9={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(wc(e))return e.number;if(ut(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},M9={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ut).map(function(n){return n.value})}},O9={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},rn=function(t,e){return(t&e)!==0},H9={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},V9={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],i=e.filter(pF),s=0;s<i.length;s++){var o=i[s],l=i[s+1];if(o.type===20){var u=l&&wc(l)?l.number:1;r.push({counter:o.value,increment:u})}}return r}},K9={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(pF),i=0;i<r.length;i++){var s=r[i],o=r[i+1];if(ut(s)&&s.value!=="none"){var l=o&&wc(o)?o.number:0;n.push({counter:s.value,reset:l})}}return n}},z9={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter($d).map(function(n){return NF.parse(t,n)})}},G9={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],i=e.filter(y8);if(i.length%2!==0)return null;for(var s=0;s<i.length;s+=2){var o=i[s].value,l=i[s+1].value;r.push({open:o,close:l})}return r}},ME=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},q9={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Pw(e[0],"none")?[]:$i(e).map(function(n){for(var r={color:255,offsetX:vn,offsetY:vn,blur:vn,spread:vn,inset:!1},i=0,s=0;s<n.length;s++){var o=n[s];Pw(o,"inset")?r.inset=!0:eo(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:i===2?r.blur=o:r.spread=o,i++):r.color=Ka.parse(t,o)}return r})}},W9={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(ut).forEach(function(i){switch(i.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(i){r.indexOf(i)===-1&&r.push(i)}),r}},$9={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Z9={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return $d(e)?e.number:0}},J9=function(){function t(e,n){var r,i;this.animationDuration=Be(e,z9,n.animationDuration),this.backgroundClip=Be(e,x8,n.backgroundClip),this.backgroundColor=Be(e,_8,n.backgroundColor),this.backgroundImage=Be(e,N8,n.backgroundImage),this.backgroundOrigin=Be(e,F8,n.backgroundOrigin),this.backgroundPosition=Be(e,Q8,n.backgroundPosition),this.backgroundRepeat=Be(e,P8,n.backgroundRepeat),this.backgroundSize=Be(e,R8,n.backgroundSize),this.borderTopColor=Be(e,j8,n.borderTopColor),this.borderRightColor=Be(e,M8,n.borderRightColor),this.borderBottomColor=Be(e,O8,n.borderBottomColor),this.borderLeftColor=Be(e,H8,n.borderLeftColor),this.borderTopLeftRadius=Be(e,V8,n.borderTopLeftRadius),this.borderTopRightRadius=Be(e,K8,n.borderTopRightRadius),this.borderBottomRightRadius=Be(e,z8,n.borderBottomRightRadius),this.borderBottomLeftRadius=Be(e,G8,n.borderBottomLeftRadius),this.borderTopStyle=Be(e,q8,n.borderTopStyle),this.borderRightStyle=Be(e,W8,n.borderRightStyle),this.borderBottomStyle=Be(e,$8,n.borderBottomStyle),this.borderLeftStyle=Be(e,Z8,n.borderLeftStyle),this.borderTopWidth=Be(e,J8,n.borderTopWidth),this.borderRightWidth=Be(e,X8,n.borderRightWidth),this.borderBottomWidth=Be(e,Y8,n.borderBottomWidth),this.borderLeftWidth=Be(e,e9,n.borderLeftWidth),this.boxShadow=Be(e,q9,n.boxShadow),this.color=Be(e,t9,n.color),this.direction=Be(e,n9,n.direction),this.display=Be(e,r9,n.display),this.float=Be(e,s9,n.cssFloat),this.fontFamily=Be(e,R9,n.fontFamily),this.fontSize=Be(e,D9,n.fontSize),this.fontStyle=Be(e,O9,n.fontStyle),this.fontVariant=Be(e,M9,n.fontVariant),this.fontWeight=Be(e,j9,n.fontWeight),this.letterSpacing=Be(e,a9,n.letterSpacing),this.lineBreak=Be(e,o9,n.lineBreak),this.lineHeight=Be(e,A9,n.lineHeight),this.listStyleImage=Be(e,l9,n.listStyleImage),this.listStylePosition=Be(e,c9,n.listStylePosition),this.listStyleType=Be(e,Lw,n.listStyleType),this.marginTop=Be(e,u9,n.marginTop),this.marginRight=Be(e,d9,n.marginRight),this.marginBottom=Be(e,h9,n.marginBottom),this.marginLeft=Be(e,f9,n.marginLeft),this.opacity=Be(e,Q9,n.opacity);var s=Be(e,p9,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Be(e,m9,n.overflowWrap),this.paddingTop=Be(e,g9,n.paddingTop),this.paddingRight=Be(e,y9,n.paddingRight),this.paddingBottom=Be(e,w9,n.paddingBottom),this.paddingLeft=Be(e,v9,n.paddingLeft),this.paintOrder=Be(e,W9,n.paintOrder),this.position=Be(e,_9,n.position),this.textAlign=Be(e,x9,n.textAlign),this.textDecorationColor=Be(e,P9,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Be(e,L9,(i=n.textDecorationLine)!==null&&i!==void 0?i:n.textDecoration),this.textShadow=Be(e,B9,n.textShadow),this.textTransform=Be(e,C9,n.textTransform),this.transform=Be(e,b9,n.transform),this.transformOrigin=Be(e,k9,n.transformOrigin),this.visibility=Be(e,U9,n.visibility),this.webkitTextStrokeColor=Be(e,$9,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Be(e,Z9,n.webkitTextStrokeWidth),this.wordBreak=Be(e,N9,n.wordBreak),this.zIndex=Be(e,F9,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return za(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return rn(this.display,4)||rn(this.display,33554432)||rn(this.display,268435456)||rn(this.display,536870912)||rn(this.display,67108864)||rn(this.display,134217728)},t}(),X9=function(){function t(e,n){this.content=Be(e,H9,n.content),this.quotes=Be(e,G9,n.quotes)}return t}(),OE=function(){function t(e,n){this.counterIncrement=Be(e,V9,n.counterIncrement),this.counterReset=Be(e,K9,n.counterReset)}return t}(),Be=function(t,e,n){var r=new hF,i=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(i);var s=new fF(r.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,ut(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return ug.parse(t,s.parseComponentValue());case"color":return Ka.parse(t,s.parseComponentValue());case"image":return y_.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return eo(l)?l:vn;case"length-percentage":var u=s.parseComponentValue();return Xt(u)?u:vn;case"time":return NF.parse(t,s.parseComponentValue())}break}},Y9="data-html2canvas-debug",ez=function(t){var e=t.getAttribute(Y9);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Rw=function(t,e){var n=ez(t);return n===1||e===n},Zi=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Rw(n,3))debugger;this.styles=new J9(e,window.getComputedStyle(n,null)),Mw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=lg(this.context,n),Rw(n,4)&&(this.flags|=16)}return t}(),tz="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",HE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uf=0;uf<HE.length;uf++)gu[HE.charCodeAt(uf)]=uf;var nz=function(t){var e=t.length*.75,n=t.length,r,i=0,s,o,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),p=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)s=gu[t.charCodeAt(r)],o=gu[t.charCodeAt(r+1)],l=gu[t.charCodeAt(r+2)],u=gu[t.charCodeAt(r+3)],p[i++]=s<<2|o>>4,p[i++]=(o&15)<<4|l>>2,p[i++]=(l&3)<<6|u&63;return h},rz=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},iz=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Xo=5,w_=11,S0=2,sz=w_-Xo,FF=65536>>Xo,az=1<<Xo,k0=az-1,oz=1024>>Xo,Az=FF+oz,lz=Az,cz=32,uz=lz+cz,dz=65536>>w_,hz=1<<sz,fz=hz-1,VE=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},pz=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},mz=function(t,e){var n=nz(t),r=Array.isArray(n)?iz(n):new Uint32Array(n),i=Array.isArray(n)?rz(n):new Uint16Array(n),s=24,o=VE(i,s/2,r[4]/2),l=r[5]===2?VE(i,(s+r[4])/2):pz(r,Math.ceil((s+r[4])/4));return new gz(r[0],r[1],r[2],r[3],o,l)},gz=function(){function t(e,n,r,i,s,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Xo],n=(n<<S0)+(e&k0),this.data[n];if(e<=65535)return n=this.index[FF+(e-55296>>Xo)],n=(n<<S0)+(e&k0),this.data[n];if(e<this.highStart)return n=uz-dz+(e>>w_),n=this.index[n],n+=e>>Xo&fz,n=this.index[n],n=(n<<S0)+(e&k0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),KE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yz=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var df=0;df<KE.length;df++)yz[KE.charCodeAt(df)]=df;var wz=1,U0=2,N0=3,zE=4,GE=5,vz=7,qE=8,F0=9,Q0=10,WE=11,$E=12,ZE=13,JE=14,P0=15,xz=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e},_z=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,s="";++i<n;){var o=t[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Bz=mz(tz),Hr="",L0="",Cz=function(t){return Bz.get(t)},bz=function(t,e,n){var r=n-2,i=e[r],s=e[n-1],o=e[n];if(s===U0&&o===N0)return Hr;if(s===U0||s===N0||s===zE||o===U0||o===N0||o===zE)return L0;if(s===qE&&[qE,F0,WE,$E].indexOf(o)!==-1||(s===WE||s===F0)&&(o===F0||o===Q0)||(s===$E||s===Q0)&&o===Q0||o===ZE||o===GE||o===vz||s===wz)return Hr;if(s===ZE&&o===JE){for(;i===GE;)i=e[--r];if(i===JE)return Hr}if(s===P0&&o===P0){for(var l=0;i===P0;)l++,i=e[--r];if(l%2===0)return Hr}return L0},Ez=function(t){var e=xz(t),n=e.length,r=0,i=0,s=e.map(Cz);return{next:function(){if(r>=n)return{done:!0,value:null};for(var o=Hr;r<n&&(o=bz(e,s,++r))===Hr;);if(o!==Hr||r===n){var l=_z.apply(null,e.slice(i,r));return i=r,{value:l,done:!1}}return{done:!0,value:null}}}},Iz=function(t){for(var e=Ez(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},Tz=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var i=n.getBoundingClientRect(),s=Math.round(i.height);if(t.body.removeChild(r),s===e)return!0}}return!1},Sz=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,i=cg(r.data).map(function(u){return zt(u)}),s=0,o={},l=i.every(function(u,h){n.setStart(r,s),n.setEnd(r,s+u.length);var p=n.getBoundingClientRect();s+=u.length;var g=p.x>o.x||p.y>o.y;return o=p,h===0?!0:g});return t.body.removeChild(e),l},kz=function(){return typeof new Image().crossOrigin<"u"},Uz=function(){return typeof new XMLHttpRequest().responseType=="string"},Nz=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},XE=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Fz=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,s=e.toDataURL();i.src=s;var o=Dw(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),YE(o).then(function(l){r.drawImage(l,0,0);var u=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var h=t.createElement("div");return h.style.backgroundImage="url("+s+")",h.style.height=n+"px",XE(u)?YE(Dw(n,n,0,0,h)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),XE(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Dw=function(t,e,n,r,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(i),o},YE=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},gn={get SUPPORT_RANGE_BOUNDS(){var t=Tz(document);return Object.defineProperty(gn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=gn.SUPPORT_RANGE_BOUNDS&&Sz(document);return Object.defineProperty(gn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Nz(document);return Object.defineProperty(gn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Fz(document):Promise.resolve(!1);return Object.defineProperty(gn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=kz();return Object.defineProperty(gn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Uz();return Object.defineProperty(gn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(gn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(gn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Mu=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),Qz=function(t,e,n,r){var i=Rz(e,n),s=[],o=0;return i.forEach(function(l){if(n.textDecorationLine.length||l.trim().length>0)if(gn.SUPPORT_RANGE_BOUNDS){var u=eI(r,o,l.length).getClientRects();if(u.length>1){var h=v_(l),p=0;h.forEach(function(w){s.push(new Mu(w,Ds.fromDOMRectList(t,eI(r,p+o,w.length).getClientRects()))),p+=w.length})}else s.push(new Mu(l,Ds.fromDOMRectList(t,u)))}else{var g=r.splitText(l.length);s.push(new Mu(l,Pz(t,r))),r=g}else gn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));o+=l.length}),s},Pz=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var s=lg(t,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return Ds.EMPTY},eI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(t,e),i.setEnd(t,e+n),i},v_=function(t){if(gn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Iz(t)},Lz=function(t,e){if(gn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return jz(t,e)},Rz=function(t,e){return e.letterSpacing!==0?v_(t):Lz(t,e)},Dz=[32,160,4961,65792,65793,4153,4241],jz=function(t,e){for(var n=d6(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],i,s=function(){if(i.value){var o=i.value.slice(),l=cg(o),u="";l.forEach(function(h){Dz.indexOf(h)===-1?u+=zt(h):(u.length&&r.push(u),r.push(zt(h)),u="")}),u.length&&r.push(u)}};!(i=n.next()).done;)s();return r},Mz=function(){function t(e,n,r){this.text=Oz(n.data,r.textTransform),this.textBounds=Qz(e,this.text,r,n)}return t}(),Oz=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Hz,Vz);case 2:return t.toUpperCase();default:return t}},Hz=/(^|\s|:|-|\(|\))([a-z])/g,Vz=function(t,e,n){return t.length>0?e+n.toUpperCase():t},QF=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.src=r.currentSrc||r.src,i.intrinsicWidth=r.naturalWidth,i.intrinsicHeight=r.naturalHeight,i.context.cache.addImage(i.src),i}return e}(Zi),PF=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.canvas=r,i.intrinsicWidth=r.width,i.intrinsicHeight=r.height,i}return e}(Zi),LF=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this,s=new XMLSerializer,o=lg(n,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),i.intrinsicWidth=r.width.baseVal.value,i.intrinsicHeight=r.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(Zi),RF=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.value=r.value,i}return e}(Zi),jw=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.start=r.start,i.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,i}return e}(Zi),Kz=[{type:15,flags:0,unit:"px",number:3}],zz=[{type:16,flags:0,number:50}],Gz=function(t){return t.width>t.height?new Ds(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ds(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},qz=function(t){var e=t.type===Wz?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Zp="checkbox",Jp="radio",Wz="password",tI=707406591,x_=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;switch(i.type=r.type.toLowerCase(),i.checked=r.checked,i.value=qz(r),(i.type===Zp||i.type===Jp)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=Gz(i.bounds)),i.type){case Zp:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Kz;break;case Jp:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=zz;break}return i}return e}(Zi),DF=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this,s=r.options[r.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(Zi),jF=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.value=r.value,i}return e}(Zi),MF=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;i.src=r.src,i.width=parseInt(r.width,10)||0,i.height=parseInt(r.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){i.tree=HF(n,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?Du(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Ss.TRANSPARENT,o=r.contentWindow.document.body?Du(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Ss.TRANSPARENT;i.backgroundColor=za(s)?za(o)?i.styles.backgroundColor:o:s}}catch{}return i}return e}(Zi),$z=["OL","UL","MENU"],qf=function(t,e,n,r){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,VF(i)&&i.data.trim().length>0)n.textNodes.push(new Mz(t,i,n.styles));else if(Il(i))if(qF(i)&&i.assignedNodes)i.assignedNodes().forEach(function(l){return qf(t,l,n,r)});else{var o=OF(t,i);o.styles.isVisible()&&(Zz(i,o,r)?o.flags|=4:Jz(o.styles)&&(o.flags|=2),$z.indexOf(i.tagName)!==-1&&(o.flags|=8),n.elements.push(o),i.slot,i.shadowRoot?qf(t,i.shadowRoot,o,r):!Xp(i)&&!KF(i)&&!Yp(i)&&qf(t,i,o,r))}},OF=function(t,e){return Ow(e)?new QF(t,e):zF(e)?new PF(t,e):KF(e)?new LF(t,e):Xz(e)?new RF(t,e):Yz(e)?new jw(t,e):eG(e)?new x_(t,e):Yp(e)?new DF(t,e):Xp(e)?new jF(t,e):GF(e)?new MF(t,e):new Zi(t,e)},HF=function(t,e){var n=OF(t,e);return n.flags|=4,qf(t,e,n,n),n},Zz=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||__(t)&&n.styles.isTransparent()},Jz=function(t){return t.isPositioned()||t.isFloating()},VF=function(t){return t.nodeType===Node.TEXT_NODE},Il=function(t){return t.nodeType===Node.ELEMENT_NODE},Mw=function(t){return Il(t)&&typeof t.style<"u"&&!Wf(t)},Wf=function(t){return typeof t.className=="object"},Xz=function(t){return t.tagName==="LI"},Yz=function(t){return t.tagName==="OL"},eG=function(t){return t.tagName==="INPUT"},tG=function(t){return t.tagName==="HTML"},KF=function(t){return t.tagName==="svg"},__=function(t){return t.tagName==="BODY"},zF=function(t){return t.tagName==="CANVAS"},nI=function(t){return t.tagName==="VIDEO"},Ow=function(t){return t.tagName==="IMG"},GF=function(t){return t.tagName==="IFRAME"},rI=function(t){return t.tagName==="STYLE"},nG=function(t){return t.tagName==="SCRIPT"},Xp=function(t){return t.tagName==="TEXTAREA"},Yp=function(t){return t.tagName==="SELECT"},qF=function(t){return t.tagName==="SLOT"},iI=function(t){return t.tagName.indexOf("-")>0},rG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,i=e.counterReset,s=!0;r!==null&&r.forEach(function(l){var u=n.counters[l.counter];u&&l.increment!==0&&(s=!1,u.length||u.push(1),u[Math.max(0,u.length-1)]+=l.increment)});var o=[];return s&&i.forEach(function(l){var u=n.counters[l.counter];o.push(l.counter),u||(u=n.counters[l.counter]=[]),u.push(l.reset)}),o},t}(),sI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},aI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},il=function(t,e,n,r,i,s){return t<e||t>n?Cd(t,i,s.length>0):r.integers.reduce(function(o,l,u){for(;t>=l;)t-=l,o+=r.values[u];return o},"")+s},WF=function(t,e,n,r){var i="";do n||t--,i=r(t)+i,t/=e;while(t*e>=e);return i},Kt=function(t,e,n,r,i){var s=n-e+1;return(t<0?"-":"")+(WF(Math.abs(t),s,r,function(o){return zt(Math.floor(o%s)+e)})+i)},To=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return WF(Math.abs(t),r,!1,function(i){return e[Math.floor(i%r)]})+n},dl=1,fa=2,pa=4,yu=8,ds=function(t,e,n,r,i,s){if(t<-9999||t>9999)return Cd(t,4,i.length>0);var o=Math.abs(t),l=i;if(o===0)return e[0]+l;for(var u=0;o>0&&u<=4;u++){var h=o%10;h===0&&rn(s,dl)&&l!==""?l=e[h]+l:h>1||h===1&&u===0||h===1&&u===1&&rn(s,fa)||h===1&&u===1&&rn(s,pa)&&t>100||h===1&&u>1&&rn(s,yu)?l=e[h]+(u>0?n[u-1]:"")+l:h===1&&u>0&&(l=n[u-1]+l),o=Math.floor(o/10)}return(t<0?r:"")+l},oI="",AI="",lI="",R0="",Cd=function(t,e,n){var r=n?". ":"",i=n?"":"",s=n?", ":"",o=n?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Kt(t,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return To(t,"",i);case 6:return il(t,1,3999,sI,3,r).toLowerCase();case 7:return il(t,1,3999,sI,3,r);case 8:return Kt(t,945,969,!1,r);case 9:return Kt(t,97,122,!1,r);case 10:return Kt(t,65,90,!1,r);case 11:return Kt(t,1632,1641,!0,r);case 12:case 49:return il(t,1,9999,aI,3,r);case 35:return il(t,1,9999,aI,3,r).toLowerCase();case 13:return Kt(t,2534,2543,!0,r);case 14:case 30:return Kt(t,6112,6121,!0,r);case 15:return To(t,"",i);case 16:return To(t,"",i);case 17:case 48:return ds(t,"",oI,"",i,fa|pa|yu);case 47:return ds(t,"",AI,"",i,dl|fa|pa|yu);case 42:return ds(t,"",oI,"",i,fa|pa|yu);case 41:return ds(t,"",AI,"",i,dl|fa|pa|yu);case 26:return ds(t,"","",lI,i,0);case 25:return ds(t,"","",lI,i,dl|fa|pa);case 31:return ds(t,"","",R0,s,dl|fa|pa);case 33:return ds(t,"","",R0,s,0);case 32:return ds(t,"","",R0,s,dl|fa|pa);case 18:return Kt(t,2406,2415,!0,r);case 20:return il(t,1,19999,sG,3,r);case 21:return Kt(t,2790,2799,!0,r);case 22:return Kt(t,2662,2671,!0,r);case 22:return il(t,1,10999,iG,3,r);case 23:return To(t,"");case 24:return To(t,"");case 27:return Kt(t,3302,3311,!0,r);case 28:return To(t,"",i);case 29:return To(t,"",i);case 34:return Kt(t,3792,3801,!0,r);case 37:return Kt(t,6160,6169,!0,r);case 38:return Kt(t,4160,4169,!0,r);case 39:return Kt(t,2918,2927,!0,r);case 40:return Kt(t,1776,1785,!0,r);case 43:return Kt(t,3046,3055,!0,r);case 44:return Kt(t,3174,3183,!0,r);case 45:return Kt(t,3664,3673,!0,r);case 46:return Kt(t,3872,3881,!0,r);case 3:default:return Kt(t,48,57,!0,r)}},$F="data-html2canvas-ignore",cI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new rG,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,i=aG(e,n);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=i.contentWindow,u=l.document,h=lG(i).then(function(){return Wn(r,void 0,void 0,function(){var p,g;return Un(this,function(w){switch(w.label){case 0:return this.scrolledElements.forEach(hG),l&&(l.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==n.top||l.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-n.left,l.scrollY-n.top,0,0))),p=this.options.onclone,g=this.clonedReferenceElement,typeof g>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:w.sent(),w.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,AG(u)]:[3,4];case 3:w.sent(),w.label=4;case 4:return typeof p=="function"?[2,Promise.resolve().then(function(){return p(u,g)}).then(function(){return i})]:[2,i]}})})});return u.open(),u.write(uG(document.doctype)+"<html></html>"),dG(this.referenceElement.ownerDocument,s,o),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),h},t.prototype.createElementClone=function(e){if(Rw(e,2))debugger;if(zF(e))return this.createCanvasClone(e);if(nI(e))return this.createVideoClone(e);if(rI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return Ow(n)&&(Ow(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),iI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return D0(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),i=e.cloneNode(!1);return i.textContent=r,i}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var s=e.getContext("2d"),o=i.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(l){var u=l.getContextAttributes();(u==null?void 0:u.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},t.prototype.appendChildNode=function(e,n,r){(!Il(n)||!nG(n)&&!n.hasAttribute($F)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Il(n)||!rI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var i=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Il(s)&&qF(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return i.appendChildNode(n,l,r)})}else this.appendChildNode(n,s,r)},t.prototype.cloneNode=function(e,n){if(VF(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Il(e)&&(Mw(e)||Wf(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var s=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),l=r.getComputedStyle(e,":after");this.referenceElement===e&&Mw(i)&&(this.clonedReferenceElement=i),__(i)&&mG(i);var u=this.counters.parse(new OE(this.context,s)),h=this.resolvePseudoContent(e,i,o,Ou.BEFORE);iI(e)&&(n=!0),nI(e)||this.cloneChildNodes(e,i,n),h&&i.insertBefore(h,i.firstChild);var p=this.resolvePseudoContent(e,i,l,Ou.AFTER);return p&&i.appendChild(p),this.counters.pop(u),(s&&(this.options.copyStyles||Wf(e))&&!GF(e)||n)&&D0(s,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(Xp(e)||Yp(e))&&(Xp(i)||Yp(i))&&(i.value=e.value),i}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,i){var s=this;if(r){var o=r.content,l=n.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new OE(this.context,r));var u=new X9(this.context,r),h=l.createElement("html2canvaspseudoelement");D0(r,h),u.content.forEach(function(g){if(g.type===0)h.appendChild(l.createTextNode(g.value));else if(g.type===22){var w=l.createElement("img");w.src=g.value,w.style.opacity="1",h.appendChild(w)}else if(g.type===18){if(g.name==="attr"){var C=g.values.filter(ut);C.length&&h.appendChild(l.createTextNode(e.getAttribute(C[0].value)||""))}else if(g.name==="counter"){var b=g.values.filter(lc),_=b[0],F=b[1];if(_&&ut(_)){var I=s.counters.getCounterValue(_.value),B=F&&ut(F)?Lw.parse(s.context,F.value):3;h.appendChild(l.createTextNode(Cd(I,B,!1)))}}else if(g.name==="counters"){var k=g.values.filter(lc),_=k[0],O=k[1],F=k[2];if(_&&ut(_)){var V=s.counters.getCounterValues(_.value),j=F&&ut(F)?Lw.parse(s.context,F.value):3,T=O&&O.type===0?O.value:"",E=V.map(function(D){return Cd(D,j,!1)}).join(T);h.appendChild(l.createTextNode(E))}}}else if(g.type===20)switch(g.value){case"open-quote":h.appendChild(l.createTextNode(ME(u.quotes,s.quoteDepth++,!0)));break;case"close-quote":h.appendChild(l.createTextNode(ME(u.quotes,--s.quoteDepth,!1)));break;default:h.appendChild(l.createTextNode(g.value))}}),h.className=Hw+" "+Vw;var p=i===Ou.BEFORE?" "+Hw:" "+Vw;return Wf(n)?n.className.baseValue+=p:n.className+=p,h}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ou;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ou||(Ou={}));var aG=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute($F,"true"),t.body.appendChild(n),n},oG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},AG=function(t){return Promise.all([].slice.call(t.images,0).map(oG))},lG=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},cG=["all","d","content"],D0=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);cG.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},uG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},dG=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},hG=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},fG=":before",pG=":after",Hw="___html2canvas___pseudoelement_before",Vw="___html2canvas___pseudoelement_after",uI=`{
    content: "" !important;
    display: none !important;
}`,mG=function(t){gG(t,"."+Hw+fG+uI+`
         .`+Vw+pG+uI)},gG=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},ZF=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),yG=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(M0(e)||_G(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Wn(this,void 0,void 0,function(){var n,r,i,s,o=this;return Un(this,function(l){switch(l.label){case 0:return n=ZF.isSameOrigin(e),r=!j0(e)&&this._options.useCORS===!0&&gn.SUPPORT_CORS_IMAGES&&!n,i=!j0(e)&&!n&&!M0(e)&&typeof this._options.proxy=="string"&&gn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!j0(e)&&!M0(e)&&!i&&!r?[2]:(s=e,i?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(u,h){var p=new Image;p.onload=function(){return u(p)},p.onerror=h,(BG(s)||r)&&(p.crossOrigin="anonymous"),p.src=s,p.complete===!0&&setTimeout(function(){return u(p)},500),o._options.imageTimeout>0&&setTimeout(function(){return h("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(s,o){var l=gn.SUPPORT_RESPONSE_TYPE?"blob":"text",u=new XMLHttpRequest;u.onload=function(){if(u.status===200)if(l==="text")s(u.response);else{var g=new FileReader;g.addEventListener("load",function(){return s(g.result)},!1),g.addEventListener("error",function(w){return o(w)},!1),g.readAsDataURL(u.response)}else o("Failed to proxy resource "+i+" with status code "+u.status)},u.onerror=o;var h=r.indexOf("?")>-1?"&":"?";if(u.open("GET",""+r+h+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&u instanceof XMLHttpRequest&&(u.responseType=l),n._options.imageTimeout){var p=n._options.imageTimeout;u.timeout=p,u.ontimeout=function(){return o("Timed out ("+p+"ms) proxying "+i)}}u.send()})},t}(),wG=/^data:image\/svg\+xml/i,vG=/^data:image\/.*;base64,/i,xG=/^data:image\/.*/i,_G=function(t){return gn.SUPPORT_SVG_DRAWING||!CG(t)},j0=function(t){return xG.test(t)},BG=function(t){return vG.test(t)},M0=function(t){return t.substr(0,4)==="blob"},CG=function(t){return t.substr(-3).toLowerCase()==="svg"||wG.test(t)},we=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),sl=function(t,e,n){return new we(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},hf=function(){function t(e,n,r,i){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=i}return t.prototype.subdivide=function(e,n){var r=sl(this.start,this.startControl,e),i=sl(this.startControl,this.endControl,e),s=sl(this.endControl,this.end,e),o=sl(r,i,e),l=sl(i,s,e),u=sl(o,l,e);return n?new t(this.start,r,o,u):new t(u,l,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Gr=function(t){return t.type===1},bG=function(){function t(e){var n=e.styles,r=e.bounds,i=mu(n.borderTopLeftRadius,r.width,r.height),s=i[0],o=i[1],l=mu(n.borderTopRightRadius,r.width,r.height),u=l[0],h=l[1],p=mu(n.borderBottomRightRadius,r.width,r.height),g=p[0],w=p[1],C=mu(n.borderBottomLeftRadius,r.width,r.height),b=C[0],_=C[1],F=[];F.push((s+u)/r.width),F.push((b+g)/r.width),F.push((o+_)/r.height),F.push((h+w)/r.height);var I=Math.max.apply(Math,F);I>1&&(s/=I,o/=I,u/=I,h/=I,g/=I,w/=I,b/=I,_/=I);var B=r.width-u,k=r.height-w,O=r.width-g,V=r.height-_,j=n.borderTopWidth,T=n.borderRightWidth,E=n.borderBottomWidth,U=n.borderLeftWidth,Q=pt(n.paddingTop,e.bounds.width),D=pt(n.paddingRight,e.bounds.width),K=pt(n.paddingBottom,e.bounds.width),R=pt(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?bt(r.left+U/3,r.top+j/3,s-U/3,o-j/3,rt.TOP_LEFT):new we(r.left+U/3,r.top+j/3),this.topRightBorderDoubleOuterBox=s>0||o>0?bt(r.left+B,r.top+j/3,u-T/3,h-j/3,rt.TOP_RIGHT):new we(r.left+r.width-T/3,r.top+j/3),this.bottomRightBorderDoubleOuterBox=g>0||w>0?bt(r.left+O,r.top+k,g-T/3,w-E/3,rt.BOTTOM_RIGHT):new we(r.left+r.width-T/3,r.top+r.height-E/3),this.bottomLeftBorderDoubleOuterBox=b>0||_>0?bt(r.left+U/3,r.top+V,b-U/3,_-E/3,rt.BOTTOM_LEFT):new we(r.left+U/3,r.top+r.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?bt(r.left+U*2/3,r.top+j*2/3,s-U*2/3,o-j*2/3,rt.TOP_LEFT):new we(r.left+U*2/3,r.top+j*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?bt(r.left+B,r.top+j*2/3,u-T*2/3,h-j*2/3,rt.TOP_RIGHT):new we(r.left+r.width-T*2/3,r.top+j*2/3),this.bottomRightBorderDoubleInnerBox=g>0||w>0?bt(r.left+O,r.top+k,g-T*2/3,w-E*2/3,rt.BOTTOM_RIGHT):new we(r.left+r.width-T*2/3,r.top+r.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||_>0?bt(r.left+U*2/3,r.top+V,b-U*2/3,_-E*2/3,rt.BOTTOM_LEFT):new we(r.left+U*2/3,r.top+r.height-E*2/3),this.topLeftBorderStroke=s>0||o>0?bt(r.left+U/2,r.top+j/2,s-U/2,o-j/2,rt.TOP_LEFT):new we(r.left+U/2,r.top+j/2),this.topRightBorderStroke=s>0||o>0?bt(r.left+B,r.top+j/2,u-T/2,h-j/2,rt.TOP_RIGHT):new we(r.left+r.width-T/2,r.top+j/2),this.bottomRightBorderStroke=g>0||w>0?bt(r.left+O,r.top+k,g-T/2,w-E/2,rt.BOTTOM_RIGHT):new we(r.left+r.width-T/2,r.top+r.height-E/2),this.bottomLeftBorderStroke=b>0||_>0?bt(r.left+U/2,r.top+V,b-U/2,_-E/2,rt.BOTTOM_LEFT):new we(r.left+U/2,r.top+r.height-E/2),this.topLeftBorderBox=s>0||o>0?bt(r.left,r.top,s,o,rt.TOP_LEFT):new we(r.left,r.top),this.topRightBorderBox=u>0||h>0?bt(r.left+B,r.top,u,h,rt.TOP_RIGHT):new we(r.left+r.width,r.top),this.bottomRightBorderBox=g>0||w>0?bt(r.left+O,r.top+k,g,w,rt.BOTTOM_RIGHT):new we(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=b>0||_>0?bt(r.left,r.top+V,b,_,rt.BOTTOM_LEFT):new we(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||o>0?bt(r.left+U,r.top+j,Math.max(0,s-U),Math.max(0,o-j),rt.TOP_LEFT):new we(r.left+U,r.top+j),this.topRightPaddingBox=u>0||h>0?bt(r.left+Math.min(B,r.width-T),r.top+j,B>r.width+T?0:Math.max(0,u-T),Math.max(0,h-j),rt.TOP_RIGHT):new we(r.left+r.width-T,r.top+j),this.bottomRightPaddingBox=g>0||w>0?bt(r.left+Math.min(O,r.width-U),r.top+Math.min(k,r.height-E),Math.max(0,g-T),Math.max(0,w-E),rt.BOTTOM_RIGHT):new we(r.left+r.width-T,r.top+r.height-E),this.bottomLeftPaddingBox=b>0||_>0?bt(r.left+U,r.top+Math.min(V,r.height-E),Math.max(0,b-U),Math.max(0,_-E),rt.BOTTOM_LEFT):new we(r.left+U,r.top+r.height-E),this.topLeftContentBox=s>0||o>0?bt(r.left+U+R,r.top+j+Q,Math.max(0,s-(U+R)),Math.max(0,o-(j+Q)),rt.TOP_LEFT):new we(r.left+U+R,r.top+j+Q),this.topRightContentBox=u>0||h>0?bt(r.left+Math.min(B,r.width+U+R),r.top+j+Q,B>r.width+U+R?0:u-U+R,h-(j+Q),rt.TOP_RIGHT):new we(r.left+r.width-(T+D),r.top+j+Q),this.bottomRightContentBox=g>0||w>0?bt(r.left+Math.min(O,r.width-(U+R)),r.top+Math.min(k,r.height+j+Q),Math.max(0,g-(T+D)),w-(E+K),rt.BOTTOM_RIGHT):new we(r.left+r.width-(T+D),r.top+r.height-(E+K)),this.bottomLeftContentBox=b>0||_>0?bt(r.left+U+R,r.top+V,Math.max(0,b-(U+R)),_-(E+K),rt.BOTTOM_LEFT):new we(r.left+U+R,r.top+r.height-(E+K))}return t}(),rt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(rt||(rt={}));var bt=function(t,e,n,r,i){var s=4*((Math.sqrt(2)-1)/3),o=n*s,l=r*s,u=t+n,h=e+r;switch(i){case rt.TOP_LEFT:return new hf(new we(t,h),new we(t,h-l),new we(u-o,e),new we(u,e));case rt.TOP_RIGHT:return new hf(new we(t,e),new we(t+o,e),new we(u,h-l),new we(u,h));case rt.BOTTOM_RIGHT:return new hf(new we(u,e),new we(u,e+l),new we(t+o,h),new we(t,h));case rt.BOTTOM_LEFT:default:return new hf(new we(u,h),new we(u-o,h),new we(t,e+l),new we(t,e))}},em=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},EG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},tm=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},IG=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),ff=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),TG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),SG=function(t){return t.type===0},JF=function(t){return t.type===1},kG=function(t){return t.type===2},dI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},UG=function(t,e,n,r,i){return t.map(function(s,o){switch(o){case 0:return s.add(e,n);case 1:return s.add(e+r,n);case 2:return s.add(e+r,n+i);case 3:return s.add(e,n+i)}return s})},XF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),YF=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new bG(this.container),this.container.styles.opacity<1&&this.effects.push(new TG(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new IG(r,i,s))}if(this.container.styles.overflowX!==0){var o=em(this.curves),l=tm(this.curves);dI(o,l)?this.effects.push(new ff(o,6)):(this.effects.push(new ff(o,2)),this.effects.push(new ff(l,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,i=this.effects.slice(0);r;){var s=r.effects.filter(function(u){return!JF(u)});if(n||r.container.styles.position!==0||!r.parent){if(i.unshift.apply(i,s),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=em(r.curves),l=tm(r.curves);dI(o,l)||i.unshift(new ff(l,6))}}else i.unshift.apply(i,s);r=r.parent}return i.filter(function(u){return rn(u.target,e)})},t}(),Kw=function(t,e,n,r){t.container.elements.forEach(function(i){var s=rn(i.flags,4),o=rn(i.flags,2),l=new YF(i,t);rn(i.styles.display,2048)&&r.push(l);var u=rn(i.flags,8)?[]:r;if(s||o){var h=s||i.styles.isPositioned()?n:e,p=new XF(l);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var g=i.styles.zIndex.order;if(g<0){var w=0;h.negativeZIndex.some(function(b,_){return g>b.element.container.styles.zIndex.order?(w=_,!1):w>0}),h.negativeZIndex.splice(w,0,p)}else if(g>0){var C=0;h.positiveZIndex.some(function(b,_){return g>=b.element.container.styles.zIndex.order?(C=_+1,!1):C>0}),h.positiveZIndex.splice(C,0,p)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(p)}else i.styles.isFloating()?h.nonPositionedFloats.push(p):h.nonPositionedInlineLevel.push(p);Kw(l,p,s?p:n,u)}else i.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),Kw(l,e,n,u);rn(i.flags,8)&&e2(i,u)})},e2=function(t,e){for(var n=t instanceof jw?t.start:1,r=t instanceof jw?t.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof RF&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=Cd(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},NG=function(t){var e=new YF(t,null),n=new XF(e),r=[];return Kw(e,n,n,r),e2(e.container,r),n},hI=function(t,e){switch(e){case 0:return $r(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return $r(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return $r(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return $r(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},FG=function(t,e){switch(e){case 0:return $r(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return $r(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return $r(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return $r(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},QG=function(t,e){switch(e){case 0:return $r(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return $r(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return $r(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return $r(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},PG=function(t,e){switch(e){case 0:return pf(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return pf(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return pf(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return pf(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},pf=function(t,e){var n=[];return Gr(t)?n.push(t.subdivide(.5,!1)):n.push(t),Gr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},$r=function(t,e,n,r){var i=[];return Gr(t)?i.push(t.subdivide(.5,!1)):i.push(t),Gr(n)?i.push(n.subdivide(.5,!0)):i.push(n),Gr(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Gr(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},t2=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},nm=function(t){var e=t.styles,n=t.bounds,r=pt(e.paddingLeft,n.width),i=pt(e.paddingRight,n.width),s=pt(e.paddingTop,n.width),o=pt(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},LG=function(t,e){return t===0?e.bounds:t===2?nm(e):t2(e)},RG=function(t,e){return t===0?e.bounds:t===2?nm(e):t2(e)},O0=function(t,e,n){var r=LG(hl(t.styles.backgroundOrigin,e),t),i=RG(hl(t.styles.backgroundClip,e),t),s=DG(hl(t.styles.backgroundSize,e),n,r),o=s[0],l=s[1],u=mu(hl(t.styles.backgroundPosition,e),r.width-o,r.height-l),h=jG(hl(t.styles.backgroundRepeat,e),u,s,r,i),p=Math.round(r.left+u[0]),g=Math.round(r.top+u[1]);return[h,p,g,o,l]},al=function(t){return ut(t)&&t.value===jl.AUTO},mf=function(t){return typeof t=="number"},DG=function(t,e,n){var r=e[0],i=e[1],s=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(Xt(o)&&l&&Xt(l))return[pt(o,n.width),pt(l,n.height)];var u=mf(s);if(ut(o)&&(o.value===jl.CONTAIN||o.value===jl.COVER)){if(mf(s)){var h=n.width/n.height;return h<s!=(o.value===jl.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var p=mf(r),g=mf(i),w=p||g;if(al(o)&&(!l||al(l))){if(p&&g)return[r,i];if(!u&&!w)return[n.width,n.height];if(w&&u){var C=p?r:i*s,b=g?i:r/s;return[C,b]}var _=p?r:n.width,F=g?i:n.height;return[_,F]}if(u){var I=0,B=0;return Xt(o)?I=pt(o,n.width):Xt(l)&&(B=pt(l,n.height)),al(o)?I=B*s:(!l||al(l))&&(B=I/s),[I,B]}var k=null,O=null;if(Xt(o)?k=pt(o,n.width):l&&Xt(l)&&(O=pt(l,n.height)),k!==null&&(!l||al(l))&&(O=p&&g?k/r*i:n.height),O!==null&&al(o)&&(k=p&&g?O/i*r:n.width),k!==null&&O!==null)return[k,O];throw new Error("Unable to calculate background-size for element")},hl=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},jG=function(t,e,n,r,i){var s=e[0],o=e[1],l=n[0],u=n[1];switch(t){case 2:return[new we(Math.round(r.left),Math.round(r.top+o)),new we(Math.round(r.left+r.width),Math.round(r.top+o)),new we(Math.round(r.left+r.width),Math.round(u+r.top+o)),new we(Math.round(r.left),Math.round(u+r.top+o))];case 3:return[new we(Math.round(r.left+s),Math.round(r.top)),new we(Math.round(r.left+s+l),Math.round(r.top)),new we(Math.round(r.left+s+l),Math.round(r.height+r.top)),new we(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new we(Math.round(r.left+s),Math.round(r.top+o)),new we(Math.round(r.left+s+l),Math.round(r.top+o)),new we(Math.round(r.left+s+l),Math.round(r.top+o+u)),new we(Math.round(r.left+s),Math.round(r.top+o+u))];default:return[new we(Math.round(i.left),Math.round(i.top)),new we(Math.round(i.left+i.width),Math.round(i.top)),new we(Math.round(i.left+i.width),Math.round(i.height+i.top)),new we(Math.round(i.left),Math.round(i.height+i.top))]}},MG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",fI="Hidden Text",OG=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),i.src=MG,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(fI)),r.appendChild(s),r.appendChild(i);var l=i.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(fI)),r.style.lineHeight="normal",i.style.verticalAlign="super";var u=i.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:l,middle:u}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),n2=function(){function t(e,n){this.context=e,this.options=n}return t}(),HG=1e4,VG=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i._activeEffects=[],i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),r.canvas||(i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px"),i.fontMetrics=new OG(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),i}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(i){return r.applyEffect(i)})},e.prototype.applyEffect=function(n){this.ctx.save(),kG(n)&&(this.ctx.globalAlpha=n.opacity),SG(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),JF(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Wn(this,void 0,void 0,function(){var r;return Un(this,function(i){switch(i.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Wn(this,void 0,void 0,function(){return Un(this,function(r){switch(r.label){case 0:if(rn(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,i){var s=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+i);else{var o=v_(n.text);o.reduce(function(l,u){return s.ctx.fillText(u,l,n.bounds.top+i),l+s.ctx.measureText(u).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),i=WG(n.fontFamily).join(", "),s=$d(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(n,r){return Wn(this,void 0,void 0,function(){var i,s,o,l,u,h,p,g,w=this;return Un(this,function(C){return i=this.createFontStyle(r),s=i[0],o=i[1],l=i[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",u=this.fontMetrics.getMetrics(o,l),h=u.baseline,p=u.middle,g=r.paintOrder,n.textBounds.forEach(function(b){g.forEach(function(_){switch(_){case 0:w.ctx.fillStyle=dn(r.color),w.renderTextWithLetterSpacing(b,r.letterSpacing,h);var F=r.textShadow;F.length&&b.text.trim().length&&(F.slice(0).reverse().forEach(function(I){w.ctx.shadowColor=dn(I.color),w.ctx.shadowOffsetX=I.offsetX.number*w.options.scale,w.ctx.shadowOffsetY=I.offsetY.number*w.options.scale,w.ctx.shadowBlur=I.blur.number,w.renderTextWithLetterSpacing(b,r.letterSpacing,h)}),w.ctx.shadowColor="",w.ctx.shadowOffsetX=0,w.ctx.shadowOffsetY=0,w.ctx.shadowBlur=0),r.textDecorationLine.length&&(w.ctx.fillStyle=dn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(I){switch(I){case 1:w.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+h),b.bounds.width,1);break;case 2:w.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:w.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+p),b.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&b.text.trim().length&&(w.ctx.strokeStyle=dn(r.webkitTextStrokeColor),w.ctx.lineWidth=r.webkitTextStrokeWidth,w.ctx.lineJoin=window.chrome?"miter":"round",w.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+h)),w.ctx.strokeStyle="",w.ctx.lineWidth=0,w.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,i){if(i&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=nm(n),o=tm(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Wn(this,void 0,void 0,function(){var r,i,s,o,l,u,B,B,h,p,g,w,O,C,b,V,_,F,I,B,k,O,V;return Un(this,function(j){switch(j.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,i=n.curves,s=r.styles,o=0,l=r.textNodes,j.label=1;case 1:return o<l.length?(u=l[o],[4,this.renderTextNode(u,s)]):[3,4];case 2:j.sent(),j.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof QF))return[3,8];j.label=5;case 5:return j.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return B=j.sent(),this.renderReplacedElement(r,i,B),[3,8];case 7:return j.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof PF&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof LF))return[3,12];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return B=j.sent(),this.renderReplacedElement(r,i,B),[3,12];case 11:return j.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof MF&&r.tree?(h=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,h.render(r.tree)]):[3,14];case 13:p=j.sent(),r.width&&r.height&&this.ctx.drawImage(p,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),j.label=14;case 14:if(r instanceof x_&&(g=Math.min(r.bounds.width,r.bounds.height),r.type===Zp?r.checked&&(this.ctx.save(),this.path([new we(r.bounds.left+g*.39363,r.bounds.top+g*.79),new we(r.bounds.left+g*.16,r.bounds.top+g*.5549),new we(r.bounds.left+g*.27347,r.bounds.top+g*.44071),new we(r.bounds.left+g*.39694,r.bounds.top+g*.5649),new we(r.bounds.left+g*.72983,r.bounds.top+g*.23),new we(r.bounds.left+g*.84,r.bounds.top+g*.34085),new we(r.bounds.left+g*.39363,r.bounds.top+g*.79)]),this.ctx.fillStyle=dn(tI),this.ctx.fill(),this.ctx.restore()):r.type===Jp&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+g/2,r.bounds.top+g/2,g/4,0,Math.PI*2,!0),this.ctx.fillStyle=dn(tI),this.ctx.fill(),this.ctx.restore())),KG(r)&&r.value.length){switch(w=this.createFontStyle(s),O=w[0],C=w[1],b=this.fontMetrics.getMetrics(O,C).baseline,this.ctx.font=O,this.ctx.fillStyle=dn(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=GG(r.styles.textAlign),V=nm(r),_=0,r.styles.textAlign){case 1:_+=V.width/2;break;case 2:_+=V.width;break}F=V.add(_,0,0,-V.height/2+1),this.ctx.save(),this.path([new we(V.left,V.top),new we(V.left+V.width,V.top),new we(V.left+V.width,V.top+V.height),new we(V.left,V.top+V.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Mu(r.value,F),s.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!rn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(I=r.styles.listStyleImage,I.type!==0)return[3,18];B=void 0,k=I.url,j.label=15;case 15:return j.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return B=j.sent(),this.ctx.drawImage(B,r.bounds.left-(B.width+10),r.bounds.top),[3,18];case 17:return j.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(O=this.createFontStyle(s)[0],this.ctx.font=O,this.ctx.fillStyle=dn(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",V=new Ds(r.bounds.left,r.bounds.top+pt(r.styles.paddingTop,r.bounds.width),r.bounds.width,DE(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Mu(n.listValue,V),s.letterSpacing,DE(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),j.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Wn(this,void 0,void 0,function(){var r,i,I,s,o,I,l,u,I,h,p,I,g,w,I,C,b,I,_,F,I;return Un(this,function(B){switch(B.label){case 0:if(rn(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:B.sent(),r=0,i=n.negativeZIndex,B.label=2;case 2:return r<i.length?(I=i[r],[4,this.renderStack(I)]):[3,5];case 3:B.sent(),B.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:B.sent(),s=0,o=n.nonInlineLevel,B.label=7;case 7:return s<o.length?(I=o[s],[4,this.renderNode(I)]):[3,10];case 8:B.sent(),B.label=9;case 9:return s++,[3,7];case 10:l=0,u=n.nonPositionedFloats,B.label=11;case 11:return l<u.length?(I=u[l],[4,this.renderStack(I)]):[3,14];case 12:B.sent(),B.label=13;case 13:return l++,[3,11];case 14:h=0,p=n.nonPositionedInlineLevel,B.label=15;case 15:return h<p.length?(I=p[h],[4,this.renderStack(I)]):[3,18];case 16:B.sent(),B.label=17;case 17:return h++,[3,15];case 18:g=0,w=n.inlineLevel,B.label=19;case 19:return g<w.length?(I=w[g],[4,this.renderNode(I)]):[3,22];case 20:B.sent(),B.label=21;case 21:return g++,[3,19];case 22:C=0,b=n.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return C<b.length?(I=b[C],[4,this.renderStack(I)]):[3,26];case 24:B.sent(),B.label=25;case 25:return C++,[3,23];case 26:_=0,F=n.positiveZIndex,B.label=27;case 27:return _<F.length?(I=F[_],[4,this.renderStack(I)]):[3,30];case 28:B.sent(),B.label=29;case 29:return _++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(i,s){var o=Gr(i)?i.start:i;s===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Gr(i)&&r.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(n,r,i,s){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(n,r,i){var s;if(n.width===r&&n.height===i)return n;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,i);var u=l.getContext("2d");return u.drawImage(n,0,0,n.width,n.height,0,0,r,i),l},e.prototype.renderBackgroundImage=function(n){return Wn(this,void 0,void 0,function(){var r,i,s,o,l,u;return Un(this,function(h){switch(h.label){case 0:r=n.styles.backgroundImage.length-1,i=function(p){var g,w,C,Q,Ae,fe,R,Y,E,b,Q,Ae,fe,R,Y,_,F,I,B,k,O,V,j,T,E,U,Q,D,K,R,Y,oe,Ae,fe,G,ae,ee,ve,ue,he,ge,de;return Un(this,function(se){switch(se.label){case 0:if(p.type!==0)return[3,5];g=void 0,w=p.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,s.context.cache.match(w)];case 2:return g=se.sent(),[3,4];case 3:return se.sent(),s.context.logger.error("Error loading background-image "+w),[3,4];case 4:return g&&(C=O0(n,r,[g.width,g.height,g.width/g.height]),Q=C[0],Ae=C[1],fe=C[2],R=C[3],Y=C[4],E=s.ctx.createPattern(s.resizeImage(g,R,Y),"repeat"),s.renderRepeat(Q,E,Ae,fe)),[3,6];case 5:S8(p)?(b=O0(n,r,[null,null,null]),Q=b[0],Ae=b[1],fe=b[2],R=b[3],Y=b[4],_=C8(p.angle,R,Y),F=_[0],I=_[1],B=_[2],k=_[3],O=_[4],V=document.createElement("canvas"),V.width=R,V.height=Y,j=V.getContext("2d"),T=j.createLinearGradient(I,k,B,O),LE(p.stops,F).forEach(function(Fe){return T.addColorStop(Fe.stop,dn(Fe.color))}),j.fillStyle=T,j.fillRect(0,0,R,Y),R>0&&Y>0&&(E=s.ctx.createPattern(V,"repeat"),s.renderRepeat(Q,E,Ae,fe))):k8(p)&&(U=O0(n,r,[null,null,null]),Q=U[0],D=U[1],K=U[2],R=U[3],Y=U[4],oe=p.position.length===0?[g_]:p.position,Ae=pt(oe[0],R),fe=pt(oe[oe.length-1],Y),G=b8(p,Ae,fe,R,Y),ae=G[0],ee=G[1],ae>0&&ee>0&&(ve=s.ctx.createRadialGradient(D+Ae,K+fe,0,D+Ae,K+fe,ae),LE(p.stops,ae*2).forEach(function(Fe){return ve.addColorStop(Fe.stop,dn(Fe.color))}),s.path(Q),s.ctx.fillStyle=ve,ae!==ee?(ue=n.bounds.left+.5*n.bounds.width,he=n.bounds.top+.5*n.bounds.height,ge=ee/ae,de=1/ge,s.ctx.save(),s.ctx.translate(ue,he),s.ctx.transform(1,0,0,ge,0,0),s.ctx.translate(-ue,-he),s.ctx.fillRect(D,de*(K-he)+he,R,Y*de),s.ctx.restore()):s.ctx.fill())),se.label=6;case 6:return r--,[2]}})},s=this,o=0,l=n.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return o<l.length?(u=l[o],[5,i(u)]):[3,4];case 2:h.sent(),h.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,i){return Wn(this,void 0,void 0,function(){return Un(this,function(s){return this.path(hI(i,r)),this.ctx.fillStyle=dn(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,i,s){return Wn(this,void 0,void 0,function(){var o,l;return Un(this,function(u){switch(u.label){case 0:return r<3?[4,this.renderSolidBorder(n,i,s)]:[3,2];case 1:return u.sent(),[2];case 2:return o=FG(s,i),this.path(o),this.ctx.fillStyle=dn(n),this.ctx.fill(),l=QG(s,i),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Wn(this,void 0,void 0,function(){var r,i,s,o,l,u,h,p,g=this;return Un(this,function(w){switch(w.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,i=!za(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=zG(hl(r.backgroundClip,0),n.curves),i||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),za(r.backgroundColor)||(this.ctx.fillStyle=dn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:w.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(C){g.ctx.save();var b=em(n.curves),_=C.inset?0:HG,F=UG(b,-_+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(g.path(b),g.ctx.clip(),g.mask(F)):(g.mask(b),g.ctx.clip(),g.path(F)),g.ctx.shadowOffsetX=C.offsetX.number+_,g.ctx.shadowOffsetY=C.offsetY.number,g.ctx.shadowColor=dn(C.color),g.ctx.shadowBlur=C.blur.number,g.ctx.fillStyle=C.inset?dn(C.color):"rgba(0,0,0,1)",g.ctx.fill(),g.ctx.restore()}),w.label=2;case 2:l=0,u=0,h=s,w.label=3;case 3:return u<h.length?(p=h[u],p.style!==0&&!za(p.color)&&p.width>0?p.style!==2?[3,5]:[4,this.renderDashedDottedBorder(p.color,p.width,l,n.curves,2)]:[3,11]):[3,13];case 4:return w.sent(),[3,11];case 5:return p.style!==3?[3,7]:[4,this.renderDashedDottedBorder(p.color,p.width,l,n.curves,3)];case 6:return w.sent(),[3,11];case 7:return p.style!==4?[3,9]:[4,this.renderDoubleBorder(p.color,p.width,l,n.curves)];case 8:return w.sent(),[3,11];case 9:return[4,this.renderSolidBorder(p.color,l,n.curves)];case 10:w.sent(),w.label=11;case 11:l++,w.label=12;case 12:return u++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,i,s,o){return Wn(this,void 0,void 0,function(){var l,u,h,p,g,w,C,b,_,F,I,B,k,O,V,j,V,j;return Un(this,function(T){return this.ctx.save(),l=PG(s,i),u=hI(s,i),o===2&&(this.path(u),this.ctx.clip()),Gr(u[0])?(h=u[0].start.x,p=u[0].start.y):(h=u[0].x,p=u[0].y),Gr(u[1])?(g=u[1].end.x,w=u[1].end.y):(g=u[1].x,w=u[1].y),i===0||i===2?C=Math.abs(h-g):C=Math.abs(p-w),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(u.slice(0,2)),b=r<3?r*3:r*2,_=r<3?r*2:r,o===3&&(b=r,_=r),F=!0,C<=b*2?F=!1:C<=b*2+_?(I=C/(2*b+_),b*=I,_*=I):(B=Math.floor((C+_)/(b+_)),k=(C-B*b)/(B-1),O=(C-(B+1)*b)/B,_=O<=0||Math.abs(_-k)<Math.abs(_-O)?k:O),F&&(o===3?this.ctx.setLineDash([0,b+_]):this.ctx.setLineDash([b,_])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=dn(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Gr(u[0])&&(V=u[3],j=u[0],this.ctx.beginPath(),this.formatPath([new we(V.end.x,V.end.y),new we(j.start.x,j.start.y)]),this.ctx.stroke()),Gr(u[1])&&(V=u[1],j=u[2],this.ctx.beginPath(),this.formatPath([new we(V.end.x,V.end.y),new we(j.start.x,j.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Wn(this,void 0,void 0,function(){var r;return Un(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=dn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=NG(n),[4,this.renderStack(r)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(n2),KG=function(t){return t instanceof jF||t instanceof DF?!0:t instanceof x_&&t.type!==Jp&&t.type!==Zp},zG=function(t,e){switch(t){case 0:return em(e);case 2:return EG(e);case 1:default:return tm(e)}},GG=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},qG=["-apple-system","system-ui"],WG=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return qG.indexOf(e)===-1}):t},$G=function(t){xi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=r,i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),i}return e.prototype.render=function(n){return Wn(this,void 0,void 0,function(){var r,i;return Un(this,function(s){switch(s.label){case 0:return r=Dw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,ZG(r)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=dn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(n2),ZG=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},JG=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,qh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,qh([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,qh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,qh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),XG=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new JG({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new yG(this,e)}return t.instanceCount=1,t}(),YG=function(t,e){return e===void 0&&(e={}),e7(t,e)};typeof window<"u"&&ZF.setContext(window);var e7=function(t,e){return Wn(void 0,void 0,void 0,function(){var n,r,i,s,o,l,u,h,p,g,w,C,b,_,F,I,B,k,O,V,T,j,T,E,U,Q,D,K,R,Y,oe,Ae,fe,G,ae,ee,ve,ue,he,ge;return Un(this,function(de){switch(de.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return i={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(U=e.imageTimeout)!==null&&U!==void 0?U:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=Bw({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},i),o={windowWidth:(K=e.windowWidth)!==null&&K!==void 0?K:r.innerWidth,windowHeight:(R=e.windowHeight)!==null&&R!==void 0?R:r.innerHeight,scrollX:(Y=e.scrollX)!==null&&Y!==void 0?Y:r.pageXOffset,scrollY:(oe=e.scrollY)!==null&&oe!==void 0?oe:r.pageYOffset},l=new Ds(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),u=new XG(s,l),h=(Ae=e.foreignObjectRendering)!==null&&Ae!==void 0?Ae:!1,p={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:h,copyStyles:h},u.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),g=new cI(u,t,p),w=g.clonedReferenceElement,w?[4,g.toIFrame(n,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=de.sent(),b=__(w)||tG(w)?UK(w.ownerDocument):lg(u,w),_=b.width,F=b.height,I=b.left,B=b.top,k=t7(u,w,e.backgroundColor),O={canvas:e.canvas,backgroundColor:k,scale:(ae=(G=e.scale)!==null&&G!==void 0?G:r.devicePixelRatio)!==null&&ae!==void 0?ae:1,x:((ee=e.x)!==null&&ee!==void 0?ee:0)+I,y:((ve=e.y)!==null&&ve!==void 0?ve:0)+B,width:(ue=e.width)!==null&&ue!==void 0?ue:Math.ceil(_),height:(he=e.height)!==null&&he!==void 0?he:Math.ceil(F)},h?(u.logger.debug("Document cloned, using foreign object rendering"),T=new $G(u,O),[4,T.render(w)]):[3,3];case 2:return V=de.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+I+","+B+" with size "+_+"x"+F+" using computed rendering"),u.logger.debug("Starting DOM parsing"),j=HF(u,w),k===j.styles.backgroundColor&&(j.styles.backgroundColor=Ss.TRANSPARENT),u.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),T=new VG(u,O),[4,T.render(j)];case 4:V=de.sent(),de.label=5;case 5:return(!((ge=e.removeContainer)!==null&&ge!==void 0)||ge)&&(cI.destroy(C)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,V]}})})},t7=function(t,e,n){var r=e.ownerDocument,i=r.documentElement?Du(t,getComputedStyle(r.documentElement).backgroundColor):Ss.TRANSPARENT,s=r.body?Du(t,getComputedStyle(r.body).backgroundColor):Ss.TRANSPARENT,o=typeof n=="string"?Du(t,n):n===null?Ss.TRANSPARENT:4294967295;return e===r.documentElement?za(i)?za(s)?o:s:i:o};const n7={BRONZE:{gradient:"from-amber-600 via-amber-500 to-orange-600",accent:"bg-amber-400",icon:""},SILVER:{gradient:"from-gray-400 via-gray-300 to-slate-400",accent:"bg-gray-300",icon:""},GOLD:{gradient:"from-yellow-400 via-amber-400 to-yellow-500",accent:"bg-yellow-300",icon:""},PLATINUM:{gradient:"from-purple-500 via-indigo-500 to-purple-600",accent:"bg-purple-400",icon:""}};function r7({profile:t,isOpen:e,onClose:n}){const r=M.useRef(null),[i,s]=M.useState(!1),[o,l]=M.useState(!1);if(!e)return null;const u=(t==null?void 0:t.currentTier)||"BRONZE",h=n7[u],p=async()=>{var C;if(r.current){s(!0);try{const b=await YG(r.current,{scale:2,backgroundColor:null,useCORS:!0}),_=document.createElement("a");_.download=`soca-passport-${((C=t==null?void 0:t.displayName)==null?void 0:C.replace(/\s+/g,"-").toLowerCase())||"card"}.png`,_.href=b.toDataURL("image/png"),_.click()}catch(b){console.error("Error generating card:",b),alert("Could not download card. Please try again.")}finally{s(!1)}}},g=async()=>{const C={title:"My Soca Passport",text:`I'm a ${u} tier carnivalist with ${(t==null?void 0:t.totalCredits)||0} credits! Check out my Soca Passport on Carnival Planner.`,url:window.location.origin};if(navigator.share)try{await navigator.share(C)}catch(b){b.name!=="AbortError"&&console.error("Share error:",b)}else w()},w=async()=>{try{await navigator.clipboard.writeText(window.location.origin),l(!0),setTimeout(()=>l(!1),2e3)}catch(C){console.error("Copy error:",C)}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fadeIn",children:A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden",children:[A.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-20",children:A.jsx(ri,{className:"w-5 h-5"})}),A.jsxs("div",{className:"p-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 text-center",children:"Your Passport Card"}),A.jsxs("div",{ref:r,className:`relative bg-gradient-to-br ${h.gradient} rounded-2xl p-6 text-white shadow-xl overflow-hidden aspect-[1.586/1]`,children:[A.jsxs("div",{className:"absolute inset-0 opacity-10",children:[A.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 border-2 border-white rounded-full -translate-x-1/2 -translate-y-1/2"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 border-2 border-white rounded-full translate-x-1/4 translate-y-1/4"}),A.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 border border-white/50 rounded-full -translate-x-1/2 -translate-y-1/2"})]}),A.jsxs("div",{className:"relative flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm text-xl",children:h.icon}),A.jsxs("div",{children:[A.jsx("p",{className:"text-[10px] font-medium text-white/70 uppercase tracking-wider",children:"Soca Passport"}),A.jsxs("p",{className:"text-sm font-bold",children:[u," TIER"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-2xl font-black",children:(t==null?void 0:t.totalCredits)||0}),A.jsx("p",{className:"text-[10px] text-white/70 uppercase",children:"Credits"})]})]}),A.jsx("div",{className:"relative mb-4",children:A.jsx("p",{className:"text-xl font-black truncate",children:(t==null?void 0:t.displayName)||"Carnival Lover"})}),A.jsxs("div",{className:"relative grid grid-cols-3 gap-2 mb-4",children:[A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(_A,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:(t==null?void 0:t.totalEvents)||0}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Events"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(ti,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.countriesVisited)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Countries"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(JN,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.unlockedAchievements)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Badges"})]})]}),A.jsxs("div",{className:"relative flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(Mi,{className:"w-3 h-3 opacity-70"}),A.jsx("span",{className:"text-[10px] font-medium opacity-70",children:"Carnival Planner"})]}),A.jsx("p",{className:"text-[10px] font-mono opacity-50",children:new Date().getFullYear()})]})]})]}),A.jsxs("div",{className:"p-6 pt-0 grid grid-cols-2 gap-3",children:[A.jsxs("button",{onClick:p,disabled:i,className:"flex items-center justify-center gap-2 py-3 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-bold transition-colors disabled:opacity-50",children:[i?A.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):A.jsx(qd,{className:"w-5 h-5"}),"Download"]}),A.jsx("button",{onClick:g,className:"flex items-center justify-center gap-2 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-bold transition-colors",children:o?A.jsxs(A.Fragment,{children:[A.jsx(vA,{className:"w-5 h-5 text-green-500"}),"Copied!"]}):A.jsxs(A.Fragment,{children:[A.jsx(qN,{className:"w-5 h-5"}),"Share"]})})]}),A.jsx("p",{className:"px-6 pb-4 text-xs text-gray-400 text-center",children:"Note: For best results, download requires the html2canvas library."})]})})}function i7({user:t,isPremium:e,activeCarnivalId:n}){const[r,i]=M.useState("home"),[s,o]=M.useState(!1),[l,u]=M.useState(!1),[h,p]=M.useState(null),[g,w]=M.useState(0);M.useEffect(()=>{if(!t)return;(async()=>{try{const F=zr(Pn),B=await br(F,"getPassportProfile")();p(B.data)}catch(F){console.error("Error loading passport profile:",F)}})()},[t,g]);const C=_=>{o(!1),w(F=>F+1)},b=()=>{switch(r){case"stamps":return A.jsx(TK,{user:t,onBack:()=>i("home")});case"achievements":return A.jsx(kK,{profile:h,onBack:()=>i("home")});default:return A.jsx(EK,{user:t,isPremium:e,activeCarnivalId:n,onOpenCheckin:()=>o(!0),onViewStamps:()=>i("stamps"),onViewAchievements:()=>i("achievements")},g)}};return A.jsxs("div",{className:"min-h-[500px]",children:[r==="home"&&A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2.5 bg-teal-100 dark:bg-teal-900/30 rounded-xl",children:A.jsx(ng,{className:"w-6 h-6 text-teal-600 dark:text-teal-400"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Soca Passport"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Your carnival journey"})]})]}),A.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-medium transition-colors",children:[A.jsx(qN,{className:"w-4 h-4"}),"Share"]})]}),b(),A.jsx(IK,{isOpen:s,onClose:()=>o(!1),onSuccess:C}),A.jsx(r7,{profile:h,isOpen:l,onClose:()=>u(!1)})]})}function pI({user:t,activeCarnivalId:e,carnivalData:n,scrapedEvents:r=[],squadMembers:i=[],budgetTotal:s=0,budgetSpent:o=0,isPremium:l,onAction:u}){var C;const h=M.useMemo(()=>{if(e){const I={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[e]||e.replace(/-/g," ");return n.find(k=>k.name.toLowerCase().includes(I.toLowerCase())||I.toLowerCase().includes(k.name.split("(")[0].trim().toLowerCase()))||n[0]}const b=new Date,_=[...n].sort((F,I)=>new Date(F.date)-new Date(I.date));return _.find(F=>new Date(F.date)>=b)||_[0]},[e,n]),[p,g]=M.useState({days:0,hours:0});M.useEffect(()=>{if(!h)return;const b=()=>{const B=new Date(h.date+"T00:00:00")-new Date;if(B>0){const k=Math.ceil(B/864e5),O=Math.floor(B/(1e3*60*60)%24);g({days:k,hours:O})}else g({days:0,hours:0})};b();const _=setInterval(b,6e4);return()=>clearInterval(_)},[h]);const w=M.useMemo(()=>r.length>0?r.slice(0,5):null,[r]);return A.jsxs("div",{className:"space-y-6 mb-8 animate-fadeIn",children:[A.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 shadow-2xl text-white",children:[A.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-pink-500/20 rounded-full blur-3xl -ml-10 -mb-10 animate-pulse"}),A.jsxs("div",{className:"relative z-10 p-6 sm:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"px-2 py-1 rounded-full bg-white/20 backdrop-blur-sm text-[10px] font-bold uppercase tracking-widest border border-white/10",children:e?"CURRENT MISSION":"UP NEXT"}),l&&A.jsxs("span",{className:"flex items-center px-2 py-1 rounded-full bg-yellow-400/20 text-yellow-300 text-[10px] font-bold uppercase tracking-widest",children:[A.jsx(xd,{className:"w-3 h-3 mr-1"})," Premium"]})]}),A.jsx("h2",{className:"text-3xl sm:text-4xl font-black tracking-tight leading-none mb-1",children:((C=h==null?void 0:h.name)==null?void 0:C.split("(")[0].trim())||"Carnival"}),A.jsx("p",{className:"text-white/80 text-sm font-medium",children:"Get ready for the road."})]}),A.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:p.days}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Days"})]}),A.jsx("div",{className:"h-8 w-px bg-white/20"}),A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:p.hours}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Hrs"})]})]})]}),w&&A.jsxs("div",{className:"mt-8 flex items-center gap-3 bg-black/20 rounded-xl p-2.5 backdrop-blur-sm overflow-hidden",children:[A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 px-2 py-0.5 bg-red-500 rounded text-[10px] font-bold uppercase animate-pulse",children:[A.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Live"]}),A.jsx("div",{className:"flex-1 overflow-hidden whitespace-nowrap",children:A.jsx("div",{className:"inline-block animate-marquee text-xs font-medium",children:w.map((b,_)=>A.jsxs("span",{className:"mr-8",children:[" ",A.jsx("span",{className:"font-bold text-pink-200",children:b.title}),b.venue&&A.jsxs("span",{className:"opacity-75",children:[" @ ",b.venue]}),b.price&&A.jsxs("span",{className:"text-green-300 ml-1",children:["($",b.price,")"]})]},b.id||_))})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[A.jsxs("div",{onClick:()=>u("Budget"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:A.jsx(ag,{className:"w-5 h-5"})}),A.jsx(Hf,{className:"w-4 h-4 text-gray-300 group-hover:text-blue-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Budget Spent"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:["$",o.toLocaleString(),A.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["/ $",s.toLocaleString()]})]}),s>0&&A.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full mt-2",children:A.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.min(o/s*100,100)}%`}})})]}),A.jsxs("div",{onClick:()=>u("Squad"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg text-green-600 dark:text-green-400",children:A.jsx(dr,{className:"w-5 h-5"})}),A.jsx(Hf,{className:"w-4 h-4 text-gray-300 group-hover:text-green-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Squad Online"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:[i.length+1,A.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"members"})]}),A.jsx("div",{className:"flex -space-x-2 mt-2",children:[...Array(Math.min(i.length+1,4))].map((b,_)=>A.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 border-2 border-white dark:border-gray-800"},_))})]}),A.jsxs("div",{onClick:()=>u("Map"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600 dark:text-purple-400",children:A.jsx(ti,{className:"w-5 h-5"})}),A.jsx(Hf,{className:"w-4 h-4 text-gray-300 group-hover:text-purple-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Live Events"}),A.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:r.length||"30+"}),A.jsx("p",{className:"text-[10px] text-purple-500 font-bold mt-1",children:" View Map"})]}),A.jsxs("div",{onClick:()=>u("Passport"),className:"bg-gradient-to-br from-teal-500 to-emerald-600 p-4 rounded-2xl shadow-sm shadow-teal-500/20 cursor-pointer hover:shadow-md hover:scale-[1.02] transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-lg text-white",children:A.jsx(_A,{className:"w-5 h-5"})}),A.jsx(rg,{className:"w-4 h-4 text-white/70 group-hover:text-white transition-colors"})]}),A.jsx("p",{className:"text-xs text-teal-100 font-medium",children:"Identity"}),A.jsx("p",{className:"text-lg font-bold text-white mt-0.5",children:"Passport"}),A.jsx("p",{className:"text-[10px] text-white/80 font-bold mt-1",children:"Launch App"})]})]})]})}function s7({onClose:t}){const e=[{icon:tg,title:"Plan Your Schedule",desc:"Add fetes, mas, and events to your itinerary"},{icon:ag,title:"Track Your Budget",desc:"Keep tabs on costume costs, accommodations, and more"},{icon:dr,title:"Squad Up",desc:"Create or join a squad to share plans with friends"},{icon:ti,title:"Map Your Adventure",desc:"Pin venues and see event locations (Premium)"},{icon:oc,title:"Share Memories",desc:"Upload photos to your private media vault (Premium)"},{icon:xA,title:"Vibes Player",desc:"Stream soca playlists while you plan"}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 p-6 rounded-t-2xl text-white text-center",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:A.jsx(ri,{className:"w-6 h-6"})}),A.jsx("h2",{className:"text-2xl font-black mb-1",children:"Welcome to Carnival Planner! "}),A.jsx("p",{className:"text-white/90 text-sm",children:"Your all-in-one Caribbean carnival companion"})]}),A.jsxs("div",{className:"p-6 space-y-4",children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm text-center mb-4",children:"Here's what you can do:"}),A.jsx("div",{className:"grid gap-3",children:e.map((n,r)=>A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[A.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg text-white flex-shrink-0",children:A.jsx(n.icon,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-sm",children:n.title}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:n.desc})]})]},r))})]}),A.jsxs("div",{className:"p-6 pt-0",children:[A.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-bold rounded-xl hover:opacity-90 transition-opacity shadow-lg shadow-purple-500/30",children:"Let's Go! "}),A.jsx("p",{className:"text-center text-xs text-gray-400 mt-3",children:'Tap "Help" in the footer anytime for guidance'})]})]})})}function a7({onClose:t}){const e=[{title:"Getting Started",items:[{icon:"",text:"Select your carnival from the dropdown at the top"},{icon:"",text:"Use the tabs to add budget items, schedule events, and more"},{icon:"",text:"Everything saves automatically to your account"}]},{title:"Free Features",items:[{icon:tg,text:"Schedule  Add fetes, mas bands, and events"},{icon:ag,text:"Budget  Track all your carnival expenses"},{icon:dr,text:"Squad  Create/join a group and chat with friends"},{icon:ON,text:'Voice Add  Say "Add Tribe Friday 3pm" to quick-add events'},{icon:xA,text:"Vibes Player  Stream soca playlists while planning"}]},{title:"Premium Features",items:[{icon:ti,text:"Map  Pin venues and view event locations"},{icon:oc,text:"Media Vault  Store and share carnival photos"},{icon:"",text:"Live Events  Daily-updated fete listings from ticket sites"},{icon:"",text:"Road Mode  Offline mesh chat via Bitchat"}]},{title:"Squad Mode",items:[{icon:"",text:"Create a squad to get a 6-digit share code"},{icon:"",text:"Friends join with your code to sync plans"},{icon:"",text:"Chat with your squad and the AI Carnival Concierge"},{icon:"",text:"Leaders can remove members if needed"}]}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800 p-4 flex items-center justify-between rounded-t-2xl",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(R3,{className:"w-6 h-6 text-purple-500"}),A.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"How to Use Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(ri,{className:"w-5 h-5"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[e.map((n,r)=>A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-purple-600 dark:text-purple-400 text-sm uppercase tracking-wider mb-3",children:n.title}),A.jsx("div",{className:"space-y-2",children:n.items.map((i,s)=>A.jsxs("div",{className:"flex items-start gap-3 p-2",children:[A.jsx("span",{className:"text-lg flex-shrink-0",children:typeof i.icon=="string"?i.icon:A.jsx(i.icon,{className:"w-5 h-5 text-gray-500"})}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:i.text})]},s))})]},r)),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:[A.jsx("h3",{className:"font-bold text-purple-800 dark:text-purple-300 mb-2",children:" Pro Tips"}),A.jsxs("ul",{className:"text-sm text-purple-700 dark:text-purple-400 space-y-1",children:[A.jsx("li",{children:" Use Demo Mode to try all features without signing up"}),A.jsx("li",{children:" Export your itinerary from the Info tab as a backup"}),A.jsx("li",{children:" The AI Concierge in Squad Chat can answer carnival questions"})]})]})]}),A.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 p-4 rounded-b-2xl",children:A.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Got it!"})})]})})}const mI={trinidad:"",jamaica:"",barbados:"",grenada:"",stlucia:"",antigua:"",bahamas:"",bermuda:"",stmaarten:"","stkitts-sugar-mas":"",nevis:"",dominica:"",vincymas:"",stthomas:"",stcroix:"",guyana:"",miami:"",atlanta:"","ny-labor-day":"",hollywood:"",tampa:"",toronto:"",nottinghill:"",japan:"","cayman-batabano":"",tobago:"",caymas:""},o7={trinidad:"Trinidad",jamaica:"Jamaica",barbados:"Crop Over",grenada:"Spicemas",stlucia:"St. Lucia",antigua:"Antigua",miami:"Miami",toronto:"Caribana",nottinghill:"Notting Hill",vincymas:"Vincy Mas",stmaarten:"St. Maarten",atlanta:"Atlanta","ny-labor-day":"NY Labor Day",bahamas:"Bahamas",bermuda:"Bermuda"};function A7({profileData:t,isOwnProfile:e,onEdit:n,currentUser:r}){const[i,s]=M.useState(!1);if(!t)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500 dark:text-gray-400",children:[A.jsx(Ac,{className:"w-16 h-16 mb-4 opacity-50"}),A.jsx("p",{className:"text-lg font-medium",children:"Profile not found"}),A.jsx("p",{className:"text-sm",children:"This masquerader hasn't created a public profile yet."})]});const{displayName:o="Carnival Lover",username:l,bio:u="",profilePhoto:h,coverPhoto:p,isPublic:g,carnivalHistory:w=[],stats:C={},socialLinks:b={},isCreator:_}=t,F=[...new Set(w.map(I=>I.carnivalId))];return A.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[A.jsxs("div",{className:"relative h-48 md:h-64 rounded-t-3xl overflow-hidden bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400",children:[p&&A.jsx("img",{src:p,alt:"Cover",className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e&&A.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/30 transition-colors",children:A.jsx(VN,{className:"w-5 h-5 text-white"})}),A.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[g?A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-green-500/20 backdrop-blur-md rounded-full text-green-200 text-xs font-medium",children:[A.jsx(ig,{className:"w-3.5 h-3.5"})," Public"]}):A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-gray-500/20 backdrop-blur-md rounded-full text-gray-200 text-xs font-medium",children:[A.jsx(sg,{className:"w-3.5 h-3.5"})," Private"]}),_&&A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-yellow-500/20 backdrop-blur-md rounded-full text-yellow-200 text-xs font-medium",children:[A.jsx(Mi,{className:"w-3.5 h-3.5"})," Creator"]})]})]}),A.jsxs("div",{className:"relative px-6 pb-6 bg-white dark:bg-gray-800 rounded-b-3xl shadow-lg",children:[A.jsx("div",{className:"absolute -top-16 left-6",children:A.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:h?A.jsx("img",{src:h,alt:o,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(Ac,{className:"w-12 h-12 text-white"})})})}),A.jsxs("div",{className:"pt-20 md:pt-6 md:ml-40",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[A.jsxs("div",{children:[A.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[o,_&&A.jsx(q3,{className:"w-5 h-5 text-yellow-500"})]}),l&&A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",l]})]}),A.jsxs("div",{className:"flex gap-3",children:[b.instagram&&A.jsx("a",{href:`https://instagram.com/${b.instagram}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-full text-pink-600 dark:text-pink-400 hover:scale-110 transition-transform",children:A.jsx(jN,{className:"w-5 h-5"})}),b.twitter&&A.jsx("a",{href:`https://twitter.com/${b.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full text-blue-500 dark:text-blue-400 hover:scale-110 transition-transform",children:A.jsx(XN,{className:"w-5 h-5"})}),b.tiktok&&A.jsx("a",{href:`https://tiktok.com/@${b.tiktok}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-full text-gray-700 dark:text-gray-300 hover:scale-110 transition-transform",children:A.jsx(xA,{className:"w-5 h-5"})})]})]}),u&&A.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300 max-w-2xl",children:u})]}),A.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl",children:[A.jsx(HN,{className:"w-6 h-6 mx-auto mb-2 text-purple-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carnivals"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl",children:[A.jsx(K3,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Countries"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-2xl",children:[A.jsx(dr,{className:"w-6 h-6 mx-auto mb-2 text-orange-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[...new Set(w.map(I=>I.band).filter(Boolean))].length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Bands"})]})]})]}),w.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(tg,{className:"w-5 h-5 text-purple-500"}),"Carnival History"]}),A.jsx("div",{className:"grid gap-3",children:w.sort((I,B)=>(B.year||0)-(I.year||0)).map((I,B)=>A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[A.jsx("div",{className:"text-3xl",children:mI[I.carnivalId]||""}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[o7[I.carnivalId]||I.carnivalId,I.year&&A.jsx("span",{className:"text-gray-400 font-normal ml-2",children:I.year})]}),I.band&&A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[I.band,I.section&&A.jsxs("span",{className:"ml-1",children:[" ",I.section]})]})]})]},B))})]}),F.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(ti,{className:"w-5 h-5 text-pink-500"}),"Countries Visited"]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:[...new Set(F.map(I=>mI[I]||""))].map((I,B)=>A.jsx("span",{className:"text-4xl hover:scale-125 transition-transform cursor-default",children:I},B))})]})]})}function l7({user:t,currentProfile:e,onSave:n,onClose:r,carnivals:i}){const[s,o]=M.useState(!1),[l,u]=M.useState(!1),[h,p]=M.useState(""),[g,w]=M.useState(""),[C,b]=M.useState(!1),[_,F]=M.useState({displayName:"",username:"",bio:"",isPublic:!1,socialLinks:{instagram:"",twitter:"",tiktok:""}}),[I,B]=M.useState(null),[k,O]=M.useState(null),[V,j]=M.useState(""),[T,E]=M.useState("");M.useEffect(()=>{var Y,oe,Ae;e?(F({displayName:e.displayName||(t==null?void 0:t.displayName)||"",username:e.username||"",bio:e.bio||"",isPublic:e.isPublic||!1,socialLinks:{instagram:((Y=e.socialLinks)==null?void 0:Y.instagram)||"",twitter:((oe=e.socialLinks)==null?void 0:oe.twitter)||"",tiktok:((Ae=e.socialLinks)==null?void 0:Ae.tiktok)||""}}),j(e.profilePhoto||""),E(e.coverPhoto||"")):F(fe=>({...fe,displayName:(t==null?void 0:t.displayName)||""}))},[e,t]);const U=async Y=>{if(!Y)return w(""),!0;if(!/^[a-z0-9_]{3,20}$/.test(Y))return w("3-20 chars, lowercase letters, numbers, underscores only"),!1;if((e==null?void 0:e.username)===Y)return w(""),!0;b(!0);try{return(await mi($e(ke,"usernames",Y))).exists()?(w("This username is taken"),b(!1),!1):(w(""),b(!1),!0)}catch(Ae){return console.error("Error checking username:",Ae),b(!1),!0}},Q=Y=>{const oe=Y.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");F(fe=>({...fe,username:oe}));const Ae=setTimeout(()=>U(oe),500);return()=>clearTimeout(Ae)},D=(Y,oe)=>{var G;const Ae=(G=Y.target.files)==null?void 0:G[0];if(!Ae)return;if(Ae.size>5*1024*1024){p("Image must be under 5MB");return}const fe=new FileReader;fe.onload=()=>{oe==="profile"?(B(Ae),j(fe.result)):(O(Ae),E(fe.result))},fe.readAsDataURL(Ae)},K=()=>{if(!i)return[];const Y=[];return Object.entries(i).forEach(([oe,Ae])=>{var fe;(fe=Ae.costume)!=null&&fe.band&&Y.push({carnivalId:oe,year:new Date().getFullYear(),band:Ae.costume.band,section:Ae.costume.section||null})}),Y},R=async()=>{if(t&&!(_.username&&!await U(_.username))){u(!0),p("");try{let Y=(e==null?void 0:e.profilePhoto)||"",oe=(e==null?void 0:e.coverPhoto)||"";if(I){const ee=Xa(Ya,`profiles/${t.uid}/avatar_${Date.now()}`);await sc(ee,I),Y=await ac(ee)}if(k){const ee=Xa(Ya,`profiles/${t.uid}/cover_${Date.now()}`);await sc(ee,k),oe=await ac(ee)}const Ae=e==null?void 0:e.username,fe=_.username;Ae&&Ae!==fe&&await Jm($e(ke,"usernames",Ae)),fe&&fe!==Ae&&await Zn($e(ke,"usernames",fe),{userId:t.uid,claimedAt:Ve.now()});const G=K(),ae={userId:t.uid,displayName:_.displayName||t.displayName||"Carnival Lover",username:_.username||null,bio:_.bio||"",profilePhoto:Y,coverPhoto:oe,isPublic:_.isPublic,socialLinks:_.socialLinks,carnivalHistory:G,stats:{carnivalsAttended:G.length,countriesVisited:[...new Set(G.map(ee=>ee.carnivalId))].length,bandsPlayedWith:[...new Set(G.map(ee=>ee.band).filter(Boolean))]},updatedAt:Ve.now(),...e?{}:{createdAt:Ve.now()}};await Zn($e(ke,"userProfiles",t.uid),ae,{merge:!0}),n==null||n(ae),r==null||r()}catch(Y){console.error("Error saving profile:",Y),p(Y.message||"Failed to save profile")}finally{u(!1)}}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700",children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Profile"}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:A.jsx(ri,{className:"w-5 h-5 text-gray-500"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"h-32 rounded-2xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:T&&A.jsx("img",{src:T,alt:"Cover",className:"w-full h-full object-cover"})}),A.jsxs("label",{className:"absolute bottom-2 right-2 p-2 bg-white/90 dark:bg-gray-800/90 rounded-full cursor-pointer hover:scale-110 transition-transform shadow-lg",children:[A.jsx(oc,{className:"w-4 h-4 text-gray-700 dark:text-gray-300"}),A.jsx("input",{type:"file",accept:"image/*",onChange:Y=>D(Y,"cover"),className:"hidden"})]})]}),A.jsx("div",{className:"flex justify-center -mt-16 relative z-10",children:A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:V?A.jsx("img",{src:V,alt:"Profile",className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(Ac,{className:"w-10 h-10 text-white"})})}),A.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-purple-500 rounded-full cursor-pointer hover:bg-purple-600 transition-colors shadow-lg",children:[A.jsx(oc,{className:"w-4 h-4 text-white"}),A.jsx("input",{type:"file",accept:"image/*",onChange:Y=>D(Y,"profile"),className:"hidden"})]})]})}),h&&A.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-sm",children:[A.jsx(Gp,{className:"w-4 h-4 flex-shrink-0"}),h]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:_.displayName,onChange:Y=>F(oe=>({...oe,displayName:Y.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Your carnival name",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),A.jsx("input",{type:"text",value:_.username,onChange:Q,className:`w-full pl-8 pr-10 py-3 rounded-xl border ${g?"border-red-300 dark:border-red-500":"border-gray-200 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all`,placeholder:"your_username",maxLength:20}),C&&A.jsx(an,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 animate-spin"})]}),g&&A.jsx("p",{className:"mt-1 text-xs text-red-500",children:g}),A.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Your public profile URL: carnivalplanner.app/profile/",_.username||"username"]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),A.jsx("textarea",{value:_.bio,onChange:Y=>F(oe=>({...oe,bio:Y.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-none",placeholder:"Tell the fete world about your carnival journey... ",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 text-right",children:[_.bio.length,"/200"]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Social Links"}),A.jsxs("div",{className:"relative",children:[A.jsx(jN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-pink-500"}),A.jsx("input",{type:"text",value:_.socialLinks.instagram,onChange:Y=>F(oe=>({...oe,socialLinks:{...oe.socialLinks,instagram:Y.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Instagram username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(XN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-400"}),A.jsx("input",{type:"text",value:_.socialLinks.twitter,onChange:Y=>F(oe=>({...oe,socialLinks:{...oe.socialLinks,twitter:Y.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Twitter/X username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(xA,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-600"}),A.jsx("input",{type:"text",value:_.socialLinks.tiktok,onChange:Y=>F(oe=>({...oe,socialLinks:{...oe.socialLinks,tiktok:Y.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"TikTok username"})]})]}),A.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[_.isPublic?A.jsx(ig,{className:"w-5 h-5 text-green-500"}):A.jsx(sg,{className:"w-5 h-5 text-gray-400"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Public Profile"}),A.jsx("p",{className:"text-xs text-gray-500",children:"Anyone can view your carnival history"})]})]}),A.jsx("button",{onClick:()=>F(Y=>({...Y,isPublic:!Y.isPublic})),className:`relative w-12 h-7 rounded-full transition-colors ${_.isPublic?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:A.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${_.isPublic?"translate-x-5":""}`})})]}),A.jsx("button",{onClick:R,disabled:l||!!g,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):A.jsxs(A.Fragment,{children:[A.jsx(vA,{className:"w-5 h-5"}),"Save Profile"]})})]})]})})}const c7=(t,e)=>!t||!e?[]:e.filter(n=>n.website).slice(0,10).map(n=>({id:`${n.carnivalId}-${n.name.toLowerCase().replace(/\s+/g,"-")}`,name:n.name,carnival:n.carnivalId,originalUrl:n.website,affiliateUrl:`${n.website}${n.website.includes("?")?"&":"?"}ref=${t}`,tags:n.tags||[]}));function u7({user:t,isPremium:e}){var _,F;const[n,r]=M.useState(!0),[i,s]=M.useState(null),[o,l]=M.useState(!1),[u,h]=M.useState(null),[p,g]=M.useState("");M.useEffect(()=>{if(!t)return;(async()=>{r(!0);try{const B=$e(ke,"affiliates",t.uid),k=await mi(B);k.exists()&&s({id:k.id,...k.data()})}catch(B){console.error("Error loading affiliate data:",B)}finally{r(!1)}})()},[t]);const w=async()=>{var I;if(t){l(!0),g("");try{const k=`${(t.displayName||((I=t.email)==null?void 0:I.split("@")[0])||"creator").toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,8)}${Math.random().toString(36).substring(2,5).toUpperCase()}`,O={userId:t.uid,email:t.email,displayName:t.displayName,affiliateCode:k,status:"pending",stats:{totalClicks:0,totalConversions:0,earnings:0},partnerLinks:[],appliedAt:Ve.now()};await Zn($e(ke,"affiliates",t.uid),O),s({id:t.uid,...O})}catch(B){console.error("Error applying:",B),g("Failed to submit application. Please try again.")}finally{l(!1)}}},C=async(I,B)=>{try{await navigator.clipboard.writeText(I),h(B),setTimeout(()=>h(null),2e3)}catch(k){console.error("Failed to copy:",k)}};if(n)return A.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:A.jsx(an,{className:"w-8 h-8 animate-spin text-purple-500"})});if(!i)return A.jsx("div",{className:"max-w-2xl mx-auto animate-fadeIn",children:A.jsxs("div",{className:"text-center p-8 bg-gradient-to-br from-purple-900 via-pink-900 to-orange-900 rounded-3xl shadow-2xl text-white",children:[A.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 backdrop-blur-md rounded-full mb-6",children:A.jsx(Mi,{className:"w-10 h-10 text-yellow-300"})}),A.jsx("h2",{className:"text-3xl font-black mb-3",children:"Become a Creator"}),A.jsx("p",{className:"text-white/80 mb-8 max-w-md mx-auto",children:"Share your favorite carnival bands and fetes with your followers. Get unique tracking links and see how many people you're inspiring!"}),A.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[A.jsxs("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-2xl",children:[A.jsx(cE,{className:"w-6 h-6 mx-auto mb-2 text-purple-300"}),A.jsx("p",{className:"text-sm font-medium",children:"Unique Links"})]}),A.jsxs("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-2xl",children:[A.jsx(vw,{className:"w-6 h-6 mx-auto mb-2 text-green-300"}),A.jsx("p",{className:"text-sm font-medium",children:"Track Clicks"})]}),A.jsxs("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-2xl",children:[A.jsx(dr,{className:"w-6 h-6 mx-auto mb-2 text-blue-300"}),A.jsx("p",{className:"text-sm font-medium",children:"Grow Influence"})]})]}),p&&A.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 mb-4 bg-red-500/20 rounded-xl text-red-200 text-sm",children:[A.jsx(Gp,{className:"w-4 h-4"}),p]}),A.jsx("button",{onClick:w,disabled:o,className:"px-8 py-4 bg-white text-purple-900 font-bold rounded-2xl hover:bg-gray-100 transition-colors disabled:opacity-50 flex items-center gap-2 mx-auto",children:o?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Mi,{className:"w-5 h-5"}),"Apply to Join"]})})]})});if(i.status==="pending")return A.jsx("div",{className:"max-w-2xl mx-auto animate-fadeIn",children:A.jsxs("div",{className:"text-center p-8 bg-yellow-50 dark:bg-yellow-900/20 rounded-3xl border-2 border-yellow-200 dark:border-yellow-800",children:[A.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full mb-4",children:A.jsx(an,{className:"w-8 h-8 text-yellow-600 animate-spin"})}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Application Pending"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Your creator application is under review. We'll notify you once approved!"}),A.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["Your affiliate code: ",A.jsx("span",{className:"font-mono font-bold",children:i.affiliateCode})]})]})});if(i.status==="rejected")return A.jsx("div",{className:"max-w-2xl mx-auto animate-fadeIn",children:A.jsxs("div",{className:"text-center p-8 bg-red-50 dark:bg-red-900/20 rounded-3xl border-2 border-red-200 dark:border-red-800",children:[A.jsx(Gp,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Application Not Approved"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unfortunately, your application wasn't approved at this time. Please contact support for more information."})]})});const b=c7(i.affiliateCode,YN);return A.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(Mi,{className:"w-6 h-6 text-yellow-500"}),"Creator Dashboard"]}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Share your links and track your influence"})]}),A.jsx("div",{className:"px-4 py-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:A.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:" Approved Creator"})})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[A.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx(H3,{className:"w-5 h-5 mb-2 text-purple-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((_=i.stats)==null?void 0:_.totalClicks)||0}),A.jsx("p",{className:"text-xs text-gray-500",children:"Total Clicks"})]}),A.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx(dr,{className:"w-5 h-5 mb-2 text-blue-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((F=i.stats)==null?void 0:F.totalConversions)||0}),A.jsx("p",{className:"text-xs text-gray-500",children:"Conversions"})]}),A.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx(vw,{className:"w-5 h-5 mb-2 text-green-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Partner Links"})]}),A.jsxs("div",{className:"p-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl shadow-sm text-white",children:[A.jsx(Mi,{className:"w-5 h-5 mb-2"}),A.jsx("p",{className:"text-sm font-mono font-bold",children:i.affiliateCode}),A.jsx("p",{className:"text-xs opacity-80",children:"Your Code"})]})]}),A.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl",children:[A.jsx("div",{className:"flex items-center justify-between mb-4",children:A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Your Affiliate Code"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Share this code or use the links below"})]})}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"flex-1 px-4 py-3 bg-white dark:bg-gray-800 rounded-xl font-mono text-lg font-bold text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700",children:i.affiliateCode}),A.jsx("button",{onClick:()=>C(i.affiliateCode,"code"),className:"p-3 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:u==="code"?A.jsx(vA,{className:"w-5 h-5"}):A.jsx(oE,{className:"w-5 h-5"})})]})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(cE,{className:"w-5 h-5 text-blue-500"}),"Partner Links"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Share these links with your followers. Clicks are automatically tracked!"}),A.jsx("div",{className:"space-y-3",children:b.map(I=>A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:I.name}),A.jsx("p",{className:"text-xs text-gray-400 truncate font-mono",children:I.affiliateUrl})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>C(I.affiliateUrl,I.id),className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Copy link",children:u===I.id?A.jsx(vA,{className:"w-4 h-4 text-green-500"}):A.jsx(oE,{className:"w-4 h-4 text-gray-500"})}),A.jsx("a",{href:I.affiliateUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",title:"Open link",children:A.jsx(rg,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})})]})]},I.id))}),b.length===0&&A.jsxs("div",{className:"text-center p-8 bg-gray-50 dark:bg-gray-800/50 rounded-2xl",children:[A.jsx(ig,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),A.jsx("p",{className:"text-gray-500",children:"No partner links available yet"})]})]})]})}function d7({onBack:t,onSuccess:e}){const[n,r]=M.useState("login"),[i,s]=M.useState(""),[o,l]=M.useState(""),[u,h]=M.useState(""),[p,g]=M.useState(!1),[w,C]=M.useState(!1),[b,_]=M.useState(""),[F,I]=M.useState(""),B=T=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T),k=T=>{switch(T){case"auth/email-already-in-use":return"This email is already registered. Try logging in instead.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password. Please check and try again.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"Something went wrong. Please try again."}},O=async T=>{if(T.preventDefault(),_(""),I(""),!B(i)){_("Please enter a valid email address.");return}if(o.length<6){_("Password must be at least 6 characters.");return}if(o!==u){_("Passwords do not match.");return}C(!0);try{const E=await F4(ka,i,o);await pS(E.user),I("Account created! Please check your email to verify your account."),e&&e(E.user)}catch(E){console.error("Sign up error:",E),_(k(E.code))}finally{C(!1)}},V=async T=>{if(T.preventDefault(),_(""),I(""),!B(i)){_("Please enter a valid email address.");return}if(!o){_("Please enter your password.");return}C(!0);try{const E=await Q4(ka,i,o);e&&e(E.user)}catch(E){console.error("Login error:",E),_(k(E.code))}finally{C(!1)}},j=async()=>{if(_(""),I(""),!B(i)){_("Please enter your email address first.");return}C(!0);try{await N4(ka,i),I("Password reset email sent! Check your inbox.")}catch(T){console.error("Password reset error:",T),_(k(T.code))}finally{C(!1)}};return A.jsxs("div",{className:"w-full max-w-md mx-auto",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[A.jsx(h_,{className:"w-4 h-4"}),"Back"]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:n==="login"?"Welcome Back":"Create Account"}),b&&A.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:b}),F&&A.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300 text-sm",children:F}),A.jsxs("form",{onSubmit:n==="login"?V:O,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),A.jsxs("div",{className:"relative",children:[A.jsx(p_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:i,onChange:T=>s(T.target.value),placeholder:"your@email.com",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(yw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:p?"text":"password",value:o,onChange:T=>l(T.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w}),A.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:p?A.jsx(F3,{className:"w-5 h-5"}):A.jsx(f_,{className:"w-5 h-5"})})]})]}),n==="signup"&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(yw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:p?"text":"password",value:u,onChange:T=>h(T.target.value),placeholder:"Confirm your password",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:w})]})]}),n==="login"&&A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"button",onClick:j,className:"text-sm text-pink-400 hover:text-pink-300 transition-colors",disabled:w,children:"Forgot password?"})}),A.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-xl font-bold text-white hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:w?A.jsxs(A.Fragment,{children:[A.jsx(an,{className:"w-5 h-5 animate-spin"}),n==="login"?"Signing in...":"Creating account..."]}):n==="login"?"Sign In":"Create Account"})]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsxs("p",{className:"text-gray-400 text-sm",children:[n==="login"?"Don't have an account?":"Already have an account?",A.jsx("button",{onClick:()=>{r(n==="login"?"signup":"login"),_(""),I("")},className:"ml-2 text-pink-400 hover:text-pink-300 font-semibold transition-colors",children:n==="login"?"Sign Up":"Sign In"})]})})]})]})}function h7({user:t,onResend:e}){const[n,r]=M.useState(!1),[i,s]=M.useState(!1);if(!t||t.emailVerified||!t.email)return null;const o=async()=>{r(!0);try{await pS(t),s(!0),setTimeout(()=>s(!1),5e3)}catch(l){console.error("Error sending verification:",l)}finally{r(!1)}};return A.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 text-yellow-200 px-4 py-3 flex items-center justify-between gap-4 flex-wrap",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(p_,{className:"w-5 h-5"}),A.jsx("span",{className:"text-sm",children:"Please verify your email address to access all features."})]}),A.jsx("button",{onClick:o,disabled:n||i,className:"text-sm font-semibold bg-yellow-500/30 hover:bg-yellow-500/40 px-3 py-1 rounded-lg transition-colors disabled:opacity-50",children:i?"Email Sent!":n?"Sending...":"Resend Email"})]})}const r2=()=>Math.random().toString(36).substring(2,8).toUpperCase(),f7=async(t,e,n)=>{if(!t)throw new Error("User not authenticated");const r=r2(),i={name:e,leaderId:t.uid,leaderName:t.displayName||t.email,members:[t.uid],memberDetails:{[t.uid]:{name:t.displayName||t.email,role:"leader",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}},carnivalId:n,inviteCode:r,createdAt:Vp(),sharedItinerary:[]};console.log("Attempting to create squad doc...",i);const s=await ic(wn(ke,"squads"),i);console.log("Squad doc created with ID:",s.id);const o=$e(ke,"users",t.uid);return console.log("Updating user profile for squad:",t.uid),await Zn(o,{currentSquadId:s.id},{merge:!0}),console.log("User profile updated."),{id:s.id,...i}},p7=async(t,e)=>{if(console.log("joinSquadByCode started",{uid:t==null?void 0:t.uid,inviteCode:e}),!t)throw new Error("Must be logged in");const n=wn(ke,"squads"),r=Vd(n,Hx("inviteCode","==",e.toUpperCase())),i=await Do(r);if(i.empty)throw new Error("Invalid Squad Code");const s=i.docs[0],o=s.id,l=s.data();console.log("Squad found:",{squadId:o,squadData:l});const u=$e(ke,"squads",o),h=t.displayName||t.email||"Unknown User";console.log("Adding user to squad:",h),!l.members||!l.members.includes(t.uid)?(await mA(u,{members:jU(t.uid),[`memberDetails.${t.uid}`]:{name:h,role:"member",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}}),console.log("Squad doc updated")):console.log("User already in squad (skipping array update)");const p=$e(ke,"users",t.uid);return await Zn(p,{currentSquadId:o},{merge:!0}),console.log("User profile updated with squadId:",o),{id:o,...l}},m7=async(t,e)=>{if(!t||!e)return;const n=$e(ke,"squads",e),r=$e(ke,"users",t.uid);await mA(n,{members:MU(t.uid)}),await mA(r,{currentSquadId:null})},g7=async(t,e)=>{if(!t||!e)throw new Error("Missing required parameters");const n=$e(ke,"squads",e),r=await mi(n);if(!r.exists())throw new Error("Squad not found");if(r.data().leaderId!==t)throw new Error("Only the squad leader can regenerate the invite code");const s=r2();return await mA(n,{inviteCode:s}),console.log(`New invite code generated for squad ${e}: ${s}`),s},gf="carnival-planner-v1",y7="price_1SanHUJR9xpdRiXijLesRPVt",w7="price_1SanMhJR9xpdRiXinv2F9knM",gI={trinidad:[{title:"Soca Brainwash",note:"The main event. Bring drinks."},{title:"AM Bush",note:"J'ouvert style. Wear old clothes."},{title:"Phuket",note:"All inclusive."},{title:"Soaka Street Festival",note:"Iron park."}],stlucia:[{title:"Remedy",note:"Beachside."},{title:"Mess",note:"Paint and Powder."},{title:"Indulgence",note:"Breakfast fete."}],default:[{title:"Catamaran Cruise",note:"Boat ride."},{title:"J'ouvert",note:"Paint and powder."},{title:"Monday Mas",note:"On the road."}]};function v7(){var ta,Le,ht,na,Kn,xt,ss;const[t,e]=M.useState(null),[n,r]=M.useState(!1),[i,s]=M.useState({}),[o,l]=M.useState(null),[u,h]=M.useState("Budget"),[p,g]=M.useState(!1),[w,C]=M.useState(!0),[b,_]=M.useState(!1),[F,I]=M.useState(!0),[B,k]=M.useState(!1),[O,V]=M.useState(""),[j,T]=M.useState(""),[E,U]=M.useState(""),[Q,D]=M.useState(""),[K,R]=M.useState(""),[Y,oe]=M.useState(""),[Ae,fe]=M.useState(""),[G,ae]=M.useState({band:"",section:"",total:"",paid:""}),[ee,ve]=M.useState(""),[ue,he]=M.useState(""),[ge,de]=M.useState([]),[se,Fe]=M.useState(null),[et,vr]=M.useState(null),[Lt,On]=M.useState(!1),[Cn,yt]=M.useState(!1),[wt,Je]=M.useState(""),[en,vt]=M.useState(""),bn=async()=>{const{DEMO_USER:P,DEMO_CARNIVALS:$,DEMO_SQUAD:Z}=await Py(async()=>{const{DEMO_USER:ye,DEMO_CARNIVALS:Qe,DEMO_SQUAD:Ke}=await import("./demoData-59eL2sCn.js");return{DEMO_USER:ye,DEMO_CARNIVALS:Qe,DEMO_SQUAD:Ke}},[]);r(!0),e(P),s($),l("trinidad"),de(Z),g(!0),C(!1),ft($.trinidad)},Vs=()=>{r(!1),e(null),s({}),l(null),de([]),g(!1),C(!0),ft(null)};M.useEffect(()=>{new URLSearchParams(window.location.search).get("demo")==="true"&&bn()},[]);const Ks=async()=>{if(n){alert("This feature is simulated in Demo Mode.");return}if(t){On(!0),Je("");try{const P=await f7(t,`${t.displayName||"User"}'s Squad`,o);Fe(P),ve(P.inviteCode),nr("Only Premium users can lead a squad!")}catch(P){console.error("Error creating squad:",P),Je(`Failed: ${P.message}`)}finally{On(!1)}}},zs=async()=>{if(n){alert("Joining squads is simulated in Demo Mode.");return}if(!t||!ue)return;const P=ue.trim().toUpperCase();yt(!0),Je(""),console.log("HandleJoinSquad: Attempting to join with code:",P);try{const $=await p7(t,P);console.log("HandleJoinSquad: Join success. Squad result:",$),$||console.warn("HandleJoinSquad: No squad object returned, but execution did not throw. Assuming success via listener."),vt("Joined Squad!"),he("")}catch($){console.error("Error joining squad:",$),Je($.message||"Invalid code")}finally{yt(!1)}},UA=async()=>{if(n){confirm("Exit Demo Mode?")&&Vs();return}!t||!se||confirm("Are you sure you want to leave this squad?")&&(await m7(t,se.id),Fe(null),de([]))},Gs=async(P,$)=>{if(n){alert("Member removal is disabled in Demo Mode.");return}if(!(!t||!se)){if(se.leaderId!==t.uid){alert("Only the squad leader can remove members.");return}if(confirm(`Remove ${$} from your squad?`))try{if(await Ii(t.uid,se.id,P),nr(`${$} has been removed from the squad.`),confirm(`${$} was removed.

Would you like to generate a new invite code?
(This prevents them from rejoining with the old code)`)){const Z=await g7(t.uid,se.id);ve(Z),nr(`New invite code: ${Z}`)}}catch(Z){console.error("Error removing member:",Z),alert(`Failed to remove member: ${Z.message}`)}}},[Ji,nr]=M.useState(null),[St,Wt]=M.useState(!0),[_i,lo]=M.useState(!1),[Xi,co]=M.useState(navigator.onLine);M.useEffect(()=>{const P=()=>co(!0),$=()=>co(!1);return window.addEventListener("online",P),window.addEventListener("offline",$),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",$)}},[]);const[Bi,rr]=M.useState(null),[qs,Ws]=M.useState(()=>!localStorage.getItem("carnival-planner-welcomed")),[vc,Ci]=M.useState(!1),[$s,Zs]=M.useState(null),[uo,ii]=M.useState(!1),[Js,Yi]=M.useState(!1),[Hn,es]=M.useState([]),[Xs,ho]=M.useState(!1),[bi,ts]=M.useState(null),tn=[{id:"stkitts-sugar-mas",name:"St. Kitts (Sugar Mas)",monthIndex:0},{id:"stcroix",name:"St. Croix Carnival",monthIndex:0},{id:"trinidad",name:"Trinidad Carnival",monthIndex:1},{id:"dominica",name:"Dominica (Mas Domnik)",monthIndex:1},{id:"jamaica",name:"Jamaica Carnival",monthIndex:3},{id:"tampa",name:"Tampa Bay Carnival",monthIndex:3},{id:"stmaarten",name:"St. Maarten Carnival",monthIndex:3},{id:"cayman-batabano",name:"Cayman Batabano",monthIndex:4},{id:"stthomas",name:"St. Thomas Carnival",monthIndex:4},{id:"atlanta",name:"Atlanta Caribbean Carnival",monthIndex:4},{id:"guyana",name:"Guyana Independence",monthIndex:4},{id:"bahamas",name:"Bahamas Carnival",monthIndex:5},{id:"bermuda",name:"Bermuda Carnival",monthIndex:5},{id:"hollywood",name:"Hollywood Carnival",monthIndex:5},{id:"caymas",name:"Caymas Carnival",monthIndex:5},{id:"vincymas",name:"St. Vincent (Vincy Mas)",monthIndex:6},{id:"stlucia",name:"St. Lucia Carnival",monthIndex:6},{id:"toronto",name:"Toronto (Caribana)",monthIndex:7},{id:"barbados",name:"Barbados Crop Over",monthIndex:7},{id:"nevis",name:"Nevis Culturama",monthIndex:7},{id:"antigua",name:"Antigua Carnival",monthIndex:7},{id:"grenada",name:"Grenada Spicemas",monthIndex:7},{id:"ny-labor-day",name:"New York Carnival",monthIndex:8},{id:"japan",name:"Japan Caribbean",monthIndex:8},{id:"miami",name:"Miami Carnival",monthIndex:9},{id:"tobago",name:"Tobago Carnival",monthIndex:10}],fo=["bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500","bg-gradient-to-r from-green-400 to-blue-500","bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500","bg-gradient-to-r from-teal-400 to-cyan-500","bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500","bg-gradient-to-r from-purple-600 to-indigo-600"],Ei=["January","February","March","April","May","June","July","August","September","October","November","December"];M.useEffect(()=>{F?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[F]),M.useEffect(()=>{if(!t||n)return;(async()=>{try{const $=$e(ke,"users",t.uid,"preferences","theme"),Z=await mi($);if(Z.exists()){const ye=Z.data();typeof ye.darkMode=="boolean"&&I(ye.darkMode)}}catch($){console.log("Could not load theme preference:",$)}})()},[t,n]);const ns=async P=>{if(!(!t||n))try{const $=$e(ke,"users",t.uid,"preferences","theme");await Zn($,{darkMode:P,updatedAt:Ve.now()},{merge:!0})}catch($){console.log("Could not save theme preference:",$)}},ir=()=>{const P=!F;I(P),ns(P)};M.useEffect(()=>{if(n)return;const P=R4(ka,async $=>{if(e($),$){console.log("[Analytics] Creating/updating user doc for:",$.uid,$.email);try{const Z=$e(ke,"users",$.uid);await Zn(Z,{lastLoginAt:Ve.now(),email:$.email||null,displayName:$.displayName||null},{merge:!0}),console.log("[Analytics] User document updated successfully"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(ye=>{const{latitude:Qe,longitude:Ke}=ye.coords;Zn(Z,{lastLocation:{lat:Qe,lng:Ke},lastLocationAt:Ve.now()},{merge:!0}).then(()=>console.log("Location saved")).catch(Me=>console.error("Loc save error",Me))},ye=>{console.log("Geolocation denied/error:",ye.message)})}catch(Z){console.error("[Analytics] Failed to update user doc:",Z.code,Z.message)}}});return()=>P()},[n]),M.useEffect(()=>{if(!t||n){vr(null);return}const P=Bs($e(ke,"users",t.uid),$=>{const Z=$.data(),ye=(Z==null?void 0:Z.currentSquadId)||null;ye!==et&&(console.log("App: User changed squad to:",ye),vr(ye))});return()=>P()},[t,n,et]),M.useEffect(()=>{if(!t||n)return;if(!et){console.log("App: No target squad, clearing state."),Fe(null),de([]),ft(null);return}console.log("App: Subscribing to squad:",et);const P=Bs($e(ke,"squads",et),$=>{if($.exists()){const Z=$.data();console.log("App: Squad loaded:",$.id),Fe({id:$.id,...Z}),ft(Z);const ye=Object.values(Z.memberDetails||{});de(ye),ve(Z.inviteCode)}else console.warn("App: Target squad does not exist/deleted:",et),Fe(null),ft(null),de([]),ve("")});return()=>{console.log("App: Unsubscribing from squad:",et),P(),ve("")}},[et,t,n]),M.useEffect(()=>{!se&&ge.length>0&&(console.warn("App: DETECTED GHOST MEMBERS! Self-healing state."),de([]),ve(""))},[se,ge]),M.useEffect(()=>{if(!t){n||g(!1);return}if(n){g(!0);return}const P=["djkrss1@gmail.com","maikacooke@gmail.com"];P.includes(t.email)&&g(!0);const $=$e(ke,"users",t.uid,"apps",gf),Z=Bs($,ye=>{if(P.includes(t.email)){g(!0);return}if(ye.exists()){const Qe=ye.data();g(!!Qe.premiumActive)}else g(!1)});return()=>Z()},[t,n]),M.useEffect(()=>{if(!t){n||(s({}),l(null));return}if(n)return;const P=wn(ke,"users",t.uid,"apps",gf,"carnivals"),$=Bs(P,Z=>{const ye={};Z.forEach(Qe=>{ye[Qe.id]=Qe.data()}),s(ye),!o&&Z.docs.length>0&&l(Z.docs[0].id)});return()=>$()},[t,n]),M.useEffect(()=>{if(!t||n){Zs(null);return}(async()=>{try{const $=await mi($e(ke,"userProfiles",t.uid));$.exists()&&Zs({id:$.id,...$.data()})}catch($){console.log("Could not load profile:",$)}})()},[t,n]),M.useEffect(()=>{n||cD(ka).catch(P=>console.error(P))},[n]),M.useEffect(()=>{if(!t||n)return;(async()=>{try{const Z=await l3("BLbW7EjHjQ9_YjKrRbJwgBgRqnkSmZsXMnEWTQZpqYwSRbVgYLmXW5RvXA2_aS3vH9XJpCxHu4VmXnZL2wQxMvI");if(Z){const ye=zr(Pn);await br(ye,"saveFcmToken")({fcmToken:Z}),console.log("FCM token saved")}}catch($){console.log("Error setting up notifications:",$)}})(),c3($=>{var Z,ye;console.log("Foreground message:",$),nr({title:((Z=$.notification)==null?void 0:Z.title)||"Squad Alert",body:((ye=$.notification)==null?void 0:ye.body)||"Someone in your squad is Road Ready!"}),setTimeout(()=>nr(null),5e3)})},[t,n]);const Ie=async()=>{const P=new ms;try{await rD(ka,P)}catch($){console.error("Sign in error:",$)}},si=async()=>{if(n){Vs();return}await mS(ka),C(!0),_(!1),h("Budget"),I(!0)},po=async P=>{if(n){alert("Subscriptions are disabled in Demo Mode.");return}if(!t){alert("You must be signed in to subscribe.");return}const $=P==="yearly"?"yearly":"monthly",Z=$==="yearly"?w7:y7;k(!0);try{const ye=zr(Pn),Qe=br(ye,"createCheckoutSession");console.log(`Starting checkout... Interval: ${$}, PriceID: ${Z}`);const Ke=await Qe({priceId:Z,success_url:window.location.origin,cancel_url:window.location.origin}),{data:Me}=Ke||{};Me&&(Me.url||Me.checkoutUrl)?window.location.href=Me.url||Me.checkoutUrl:(console.error("No checkout URL returned:",Me),alert("Unable to start checkout. Please try again."))}catch(ye){console.error("Error starting checkout:",ye),alert("There was a problem starting your checkout: "+ye.message)}finally{k(!1)}},NA=async(P,$)=>{if(t){if(l(P),n){i[P]?P==="trinidad"&&i.trinidad?ft(i.trinidad):ft(null):(s(Z=>({...Z,[P]:{name:$,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:new Date().toISOString()}})),ft(null));return}if(!i[P])try{const Z=$e(ke,"users",t.uid,"apps",gf,"carnivals",P);await Zn(Z,{name:$,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:Ve.now()},{merge:!0})}catch(Z){console.error(Z)}}},Vn=(ta=i[o])==null?void 0:ta.sharedPlanId,kt=!!Vn,[En,ft]=M.useState(null),[sr,mo]=M.useState(!1),go=async()=>{if(!n){if(!Vn||!t){ft(null);return}mo(!0);try{const P=zr(Pn),Z=await br(P,"getSharedCarnivalData")({planId:Vn,uid:t.uid});ft(Z.data)}catch(P){console.log("Could not load shared carnival data:",P.message),ft(null)}finally{mo(!1)}}};M.useEffect(()=>{Vn&&!n?go():n||ft(null)},[Vn,t,n]);const st=async(P,$,Z="set")=>{var Qe;if(!t||!o)return;if(n){const Ke=Me=>{let Ht=$;return Z==="add"&&Array.isArray(Me[P])?Ht=[...Me[P]||[],...$]:Z==="remove"&&Array.isArray(Me[P])?Ht=(Me[P]||[]).filter(ln=>ln.id!==$.id):Z==="update"&&Array.isArray(Me[P])&&$.id!==void 0&&(Ht=(Me[P]||[]).map(ln=>ln.id===$.id?{...ln,...$}:ln)),Z==="set"&&(Ht=$),{...Me,[P]:Ht}};kt?(ft(Me=>Ke(Me)),s(Me=>({...Me,[o]:Ke(Me[o])}))):s(Me=>({...Me,[o]:Ke(Me[o])}));return}if(Vn&&["budget","schedule","packing","costume","squad"].includes(P))try{const Ke=zr(Pn),Ht=await br(Ke,"updateSharedCarnivalData")({planId:Vn,field:P,data:$,action:Z,uid:t.uid,userEmail:t.email});(Qe=Ht.data)!=null&&Qe.data&&ft(Ht.data.data);return}catch(Ke){console.error("Error updating shared data:",Ke)}const ye=$e(ke,"users",t.uid,"apps",gf,"carnivals",o);await mA(ye,{[P]:$})};M.useEffect(()=>{if(!t||!o||!p){es([]);return}(async()=>{var $;ho(!0);try{const Z=zr(Pn),Qe=await br(Z,"getScrapedEvents")({carnivalId:o});($=Qe.data)!=null&&$.success?(es(Qe.data.events||[]),ts(Qe.data.lastScrapedAt)):(es([]),ts(null))}catch(Z){console.log("Error fetching scraped events:",Z),es([])}finally{ho(!1)}})()},[t,o,p]);const yo=async()=>{var P,$;if(_(!0),p&&St&&_e){lo(!0);try{const Z=zr(Pn),Qe=await br(Z,"sendRoadReadyAlert")({carnivalId:o,carnivalName:_e.name,userName:(t==null?void 0:t.displayName)||((P=t==null?void 0:t.email)==null?void 0:P.split("@")[0])||"Squad Member"});(($=Qe.data)==null?void 0:$.notified)>0&&(nr({title:"Squad Notified!",body:`${Qe.data.notified} squad member(s) alerted that you're Road Ready!`}),setTimeout(()=>nr(null),5e3))}catch(Z){console.log("Error sending Road Ready alert:",Z)}finally{lo(!1)}}},wo=()=>{var $;if(!O.trim()||!j)return;const P={id:Date.now().toString(),name:O.trim(),cost:parseFloat(j)};if(kt)st("budget",[P],"add");else{const Z=(($=i[o])==null?void 0:$.budget)||[];st("budget",[...Z,P])}V(""),T("")},FA=P=>{var $;if(kt)st("budget",{id:P},"remove");else{const Z=(($=i[o])==null?void 0:$.budget)||[];st("budget",Z.filter(ye=>ye.id!==P))}},Ys=()=>{var $;if(!E.trim()||!Q)return;const P={id:Date.now().toString(),title:E.trim(),datetime:Q,note:K.trim()};if(kt)st("schedule",[P],"add");else{const Z=(($=i[o])==null?void 0:$.schedule)||[];st("schedule",[...Z,P])}U(""),D(""),R("")},ea=P=>{var $;if(kt)st("schedule",{id:P},"remove");else{const Z=(($=i[o])==null?void 0:$.schedule)||[];st("schedule",Z.filter(ye=>ye.id!==P))}},vo=P=>{var Qe;const $=new Date;$.setDate($.getDate()+1),$.setHours(12,0,0,0);const Z=$.toISOString().slice(0,16),ye={id:Date.now().toString(),title:P.title,datetime:Z,note:P.note||"Added from curated list"};if(kt)st("schedule",[ye],"add");else{const Ke=((Qe=i[o])==null?void 0:Qe.schedule)||[];st("schedule",[...Ke,ye])}},xo=()=>{var $;if(!Y.trim())return;const P={id:Date.now().toString(),item:Y.trim(),checked:!1};if(kt)st("packing",[P],"add");else{const Z=(($=i[o])==null?void 0:$.packing)||[];st("packing",[...Z,P])}oe("")},rs=P=>{var ye;const $=kt?(En==null?void 0:En.packing)||[]:((ye=i[o])==null?void 0:ye.packing)||[],Z=$.find(Qe=>Qe.id===P);Z&&(kt?st("packing",{id:P,checked:!Z.checked},"update"):st("packing",$.map(Qe=>Qe.id===P?{...Qe,checked:!Qe.checked}:Qe)))},ai=P=>{var $;if(kt)st("packing",{id:P},"remove");else{const Z=(($=i[o])==null?void 0:$.packing)||[];st("packing",Z.filter(ye=>ye.id!==P))}},is=()=>{var $;if(!Ae.trim())return;const P={id:Date.now().toString(),name:Ae.trim()};if(kt)st("squad",[P],"add");else{const Z=(($=i[o])==null?void 0:$.squad)||[];st("squad",[...Z,P])}fe("")},Ii=P=>{var $;if(kt)st("squad",{id:P},"remove");else{const Z=(($=i[o])==null?void 0:$.squad)||[];st("squad",Z.filter(ye=>ye.id!==P))}};M.useEffect(()=>{const P=o?i[o]:null;P!=null&&P.shareCode?ve(P.shareCode):ve("")},[o,i]);const _o=()=>{ee&&(navigator.clipboard.writeText(ee),vt("Code copied to clipboard!"),setTimeout(()=>vt(""),2e3))},Bo=()=>{st("costume",{...G,total:parseFloat(G.total)||0,paid:parseFloat(G.paid)||0,updatedAt:Date.now()}),alert("Costume details saved!")},Ti=()=>{if(!_e)return;const P=[];P.push(`CARNIVAL PLANNER: ${_e.name}`),P.push(`==========================================
`),P.push("-- SQUAD --"),(_e.squad||[]).forEach(Ke=>P.push(`- ${Ke.name}`)),P.push(`
`),P.push("-- COSTUME --"),_e.costume?(P.push(`Band: ${_e.costume.band}`),P.push(`Section: ${_e.costume.section}`),P.push(`Balance Due: $${((_e.costume.total||0)-(_e.costume.paid||0)).toFixed(2)}`)):P.push("No costume details."),P.push(`
`),P.push("-- SCHEDULE --"),(_e.schedule||[]).slice().sort((Ke,Me)=>new Date(Ke.datetime)-new Date(Me.datetime)).forEach(Ke=>P.push(`${new Date(Ke.datetime).toLocaleString()} | ${Ke.title}`));const Z=new Blob([P.join(`
`)],{type:"text/plain"}),ye=URL.createObjectURL(Z),Qe=document.createElement("a");Qe.href=ye,Qe.download=`${_e.name.replace(/\s+/g,"_")}_Plan.txt`,Qe.click()},Re=o?i[o]:null,_e=Re?{...Re,...kt&&En?{budget:En.budget||Re.budget||[],schedule:En.schedule||Re.schedule||[],packing:En.packing||Re.packing||[],costume:En.costume||Re.costume,squad:En.squad||Re.squad||[]}:{}}:null,Si=((Le=_e==null?void 0:_e.budget)==null?void 0:Le.reduce((P,$)=>P+($.cost||0),0))||0,Lr=_e!=null&&_e.costume?_e.costume.total-_e.costume.paid:0,oi=_e?gI[o]||gI.default:[];if(Bi){const P={onBack:()=>rr(null),logo:Hh};switch(Bi){case"privacy":return A.jsx(mK,{...P});case"terms":return A.jsx(gK,{...P});case"cookies":return A.jsx(yK,{...P});case"refund":return A.jsx(wK,{...P});case"contact":return A.jsx(xK,{...P,user:t});default:rr(null)}}if(w&&!t)return A.jsx(pK,{onGetStarted:()=>C(!1),logo:Hh,onLegalPage:rr,onTryDemo:bn});if(t&&b&&_e){const P=(_e.schedule||[]).slice().sort(($,Z)=>new Date($.datetime)-new Date(Z.datetime)).find($=>new Date($.datetime)>new Date);return A.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6 flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx("h1",{className:"text-2xl font-bold italic",children:"ROAD MODE"}),A.jsx("button",{onClick:()=>_(!1),className:"text-sm bg-gray-800 px-3 py-1 rounded",children:"Exit"})]}),A.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 rounded-2xl shadow-lg",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-1",children:"Up Next"}),P?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-3xl font-black mb-1",children:P.title}),A.jsx("div",{className:"text-xl opacity-90",children:new Date(P.datetime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),A.jsx("div",{className:"mt-2 text-sm bg-white/20 inline-block px-2 py-1 rounded",children:P.note||"No notes"})]}):A.jsx("div",{className:"text-xl italic opacity-75",children:"No more fetes scheduled! Sleep time?"})]}),A.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-2",children:"Costume Pickup"}),_e.costume?A.jsxs("div",{children:[A.jsx("div",{className:"text-xl font-bold text-yellow-400",children:_e.costume.band}),A.jsxs("div",{className:"text-gray-400",children:["Section: ",_e.costume.section]}),Lr>0&&A.jsxs("div",{className:"text-red-400 font-bold mt-1",children:["Balance Due: $",Lr]})]}):A.jsx("div",{className:"text-gray-500 italic",children:"No costume details saved."})]})]})]})}return A.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[Ji&&A.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slideIn",children:A.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-xl shadow-2xl max-w-sm",children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:Ji.title}),A.jsx("p",{className:"text-sm opacity-90",children:Ji.body})]}),A.jsx("button",{onClick:()=>nr(null),className:"ml-2 text-white/70 hover:text-white",children:""})]})})}),A.jsx(vK,{}),A.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm py-4 px-4 flex justify-between items-center sticky top-0 z-20 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("img",{src:Hh,alt:"Logo",className:"w-8 h-8"}),A.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white hidden sm:block",children:"Carnival Planner"})]}),t&&A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:ir,className:"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-yellow-300",children:F?"":""}),n&&A.jsx("button",{onClick:Vs,className:"px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-700 hover:bg-red-200 border border-red-200 transition-colors",children:"EXIT DEMO"}),_e&&A.jsx("button",{onClick:yo,disabled:_i,className:"px-3 py-1 text-xs font-bold rounded-full transition bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-200 disabled:opacity-50",children:_i?"...":"GO ROAD READY"}),p?A.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full font-bold",children:"Premium"}):A.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Free Plan"}),A.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${Xi?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300"}`,children:[A.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Xi?"bg-green-500":"bg-orange-500 animate-pulse"}`}),Xi?"Online":"Offline Mode"]}),A.jsx("button",{onClick:si,className:"text-sm font-medium text-gray-500 hover:text-red-500 dark:text-gray-400",children:"Sign Out"})]})]}),t&&A.jsx(h7,{user:t}),A.jsx("main",{className:"flex-1 p-4 max-w-4xl mx-auto w-full",children:t?A.jsxs("div",{children:[A.jsx("div",{className:"mb-8",children:A.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x",children:tn.map((P,$)=>{const Z=o===P.id,ye=fo[$%fo.length],Ke={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[P.id]||P.name,Me=w0.find(ln=>ln.name.toLowerCase().includes(Ke.toLowerCase())||Ke.toLowerCase().includes(ln.name.split("(")[0].trim().toLowerCase()));let Ht=null;if(Me){const ln=new Date,ra=new Date(ln.getFullYear(),ln.getMonth(),ln.getDate()),[ia,Co,Ai]=Me.date.split("-").map(Number),In=new Date(ia,Co-1,Ai);In>=ra&&(Ht=Math.round((In-ra)/(1e3*60*60*24)))}return A.jsx("div",{onClick:()=>NA(P.id,`${P.name} - ${Ei[P.monthIndex]}`),className:`snap-center min-w-[200px] cursor-pointer rounded-2xl p-5 shadow-lg relative overflow-hidden transition-all duration-300 ${Z?"ring-4 ring-offset-2 ring-blue-400 scale-105":"hover:scale-105 opacity-90"} ${ye}`,children:A.jsxs("div",{className:"relative z-10 text-white",children:[A.jsx("h4",{className:"font-bold text-lg leading-tight mb-1",children:P.name}),A.jsx("p",{className:"text-xs font-medium uppercase tracking-wider opacity-90",children:Ei[P.monthIndex]}),Me&&A.jsx("p",{className:"text-xs font-medium opacity-80 mt-1",children:new Date(Me.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),Ht!==null&&A.jsxs("div",{className:"mt-2 bg-white/20 backdrop-blur-sm rounded-lg px-2 py-1 inline-block",children:[A.jsx("span",{className:"text-lg font-black",children:Ht}),A.jsx("span",{className:"text-xs ml-1 opacity-90",children:"days"})]})]})},P.id)})})}),_e?A.jsxs(A.Fragment,{children:[A.jsx(pI,{user:t,activeCarnivalId:o,carnivalData:w0,scrapedEvents:Hn,squadMembers:ge,budgetTotal:2e4,budgetSpent:Si,isPremium:p,onAction:h}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors",children:[!p&&A.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-pink-500 p-4 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-bold text-sm",children:"Unlock Premium Features"}),A.jsx("p",{className:"text-white/80 text-xs",children:"Go ad-free and get a Premium badge!"})]})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-4 py-2 bg-white text-orange-600 font-bold text-sm rounded-full hover:bg-gray-100 transition",children:"Upgrade"})]}),!p&&A.jsx("div",{className:"border-b border-gray-100 dark:border-gray-700",children:A.jsx(zh,{placement:"banner",onUpgradeClick:()=>h("Info")})}),A.jsx("div",{className:"flex border-b border-gray-100 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:["Budget","Costume","Bands","Schedule","Squad","Passport","Packing","Map","Media","Profile","Creator","Info"].filter(P=>p||!["Map","Media","Passport","Creator"].includes(P)).map(P=>A.jsxs("button",{onClick:()=>{console.log("Switching to tab:",P,"isPremium:",p),h(P)},className:`flex-shrink-0 px-3 sm:px-4 py-3 sm:py-4 text-xs sm:text-sm font-medium transition-colors relative whitespace-nowrap ${u===P?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[P,["Map","Media","Passport"].includes(P)&&A.jsx("span",{className:"ml-1 text-xs text-yellow-500",children:""}),u===P&&A.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400"})]},P))}),kt&&A.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 px-4 py-2 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-white text-lg",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-medium text-sm",children:"Squad Mode Active"}),A.jsxs("p",{className:"text-white/80 text-xs",children:["Changes sync with ",ge.length," squad member(s)"]})]})]}),A.jsx("button",{onClick:go,disabled:sr,className:"px-3 py-1 bg-white/20 text-white text-xs font-medium rounded-full hover:bg-white/30 transition disabled:opacity-50",children:sr?"Syncing...":"Refresh"})]}),A.jsxs("div",{className:"p-6",children:[u==="Budget"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-end mb-6",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Budget"}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Estimate"}),A.jsxs("p",{className:"text-2xl font-black text-green-600 dark:text-green-400",children:["$",Si.toFixed(2)]})]})]}),A.jsx("div",{className:"space-y-3 mb-6",children:(_e.budget||[]).map(P=>{var $;return A.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg group hover:bg-gray-100 dark:hover:bg-gray-600",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:P.name}),P.addedBy&&kt&&A.jsxs("span",{className:"ml-2 text-xs text-gray-400 dark:text-gray-500",children:["by ",(($=P.addedBy.email)==null?void 0:$.split("@")[0])||"squad member"]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["$",P.cost.toFixed(2)]}),A.jsx("button",{onClick:()=>FA(P.id),className:"text-gray-400 hover:text-red-500",children:""})]})]},P.id)})}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsxs("div",{className:"flex gap-2 flex-1",children:[A.jsx("input",{type:"text",placeholder:"Item",value:O,onChange:P=>V(P.target.value),className:"flex-[2] p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("input",{type:"number",placeholder:"0.00",value:j,onChange:P=>T(P.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"})]}),A.jsx("button",{onClick:wo,className:"w-full sm:w-auto px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!p&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(zh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Bands"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(fK,{carnivalId:o})}),u==="Costume"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Mas Costume"}),A.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl border border-pink-100 dark:border-pink-900 mb-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Band Name"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.band||((ht=_e.costume)==null?void 0:ht.band)||"",onChange:P=>ae({...G,band:P.target.value}),placeholder:"e.g. Tribe, Bliss..."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Section"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.section||((na=_e.costume)==null?void 0:na.section)||"",onChange:P=>ae({...G,section:P.target.value}),placeholder:"e.g. The Monarch"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Total Cost"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.total||((Kn=_e.costume)==null?void 0:Kn.total)||"",onChange:P=>ae({...G,total:P.target.value}),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Amount Paid"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.paid||((xt=_e.costume)==null?void 0:xt.paid)||"",onChange:P=>ae({...G,paid:P.target.value}),placeholder:"0.00"})]})]}),A.jsx("button",{onClick:Bo,className:"mt-4 w-full py-2 bg-pink-600 text-white font-bold rounded hover:bg-pink-700",children:"Save Details"})]})]}),u==="Schedule"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Itinerary"}),oi.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Popular Events (Click to Add)"}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:oi.map((P,$)=>A.jsxs("button",{onClick:()=>vo(P),className:"min-w-[140px] p-3 text-left rounded-lg border transition bg-blue-50 dark:bg-blue-900/30 border-blue-100 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-800",children:[A.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300 text-sm",children:P.title}),A.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400 opacity-75 truncate",children:P.note})]},$))})]}),p?A.jsxs("div",{className:"mb-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase flex items-center gap-1",children:[A.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Live Events from Fete Sites"]}),bi&&A.jsxs("span",{className:"text-xs text-gray-400",children:["Updated: ",new Date(bi).toLocaleDateString()]})]}),Xs?A.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[A.jsx("div",{className:"animate-spin inline-block w-5 h-5 border-2 border-emerald-500 border-t-transparent rounded-full mb-2"}),A.jsx("p",{className:"text-sm",children:"Loading live events..."})]}):Hn.length>0?A.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Hn.slice(0,10).map((P,$)=>A.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg hover:shadow-md transition",children:[P.image&&A.jsx("img",{src:P.image,alt:"",className:"w-12 h-12 rounded object-cover flex-shrink-0"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h5",{className:"font-bold text-emerald-900 dark:text-emerald-300 text-sm truncate",children:P.title}),P.date&&A.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-400",children:[new Date(P.date+"T00:00:00").toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),P.time&&` at ${P.time}`]}),P.venue&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:P.venue}),A.jsxs("p",{className:"text-xs text-gray-400",children:["via ",P.source]})]}),A.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[P.url&&A.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 text-xs bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Tickets"}),A.jsx("button",{onClick:()=>vo({title:P.title,note:P.venue||`via ${P.source}`}),className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"+ Add"})]})]},P.id||$))}):A.jsxs("div",{className:"text-center py-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[A.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-400",children:"No live events found for this carnival yet."}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Events are updated daily from fetelist.com & frontlineticketing.com"})]})]}):A.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-bold text-amber-900 dark:text-amber-300",children:"Unlock Live Event Listings"}),A.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"Premium members get daily-updated fete listings from fetelist.com & frontlineticketing.com"})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-sm font-bold rounded-lg hover:opacity-90 flex-shrink-0",children:"Upgrade"})]})}),A.jsx("div",{className:"space-y-4 mb-6",children:(_e.schedule||[]).map(P=>{var $;return A.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-blue-400 relative group",children:[A.jsxs("div",{className:"text-center min-w-[60px]",children:[A.jsx("span",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:new Date(P.datetime).toLocaleDateString(void 0,{month:"short"})}),A.jsx("span",{className:"block text-xl font-black text-gray-800 dark:text-white",children:new Date(P.datetime).getDate()}),A.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:new Date(P.datetime).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white",children:P.title}),P.note&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:P.note}),P.addedBy&&kt&&A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Added by ",(($=P.addedBy.email)==null?void 0:$.split("@")[0])||"squad member"]})]}),A.jsx("button",{onClick:()=>ea(P.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100",children:""})]},P.id)})}),A.jsx("div",{className:"mb-6",children:A.jsx(lK,{onScheduleDetected:async P=>{if(console.log("Voice Command:",P),!t)return;const $={name:P.name,date:P.day+" "+P.time,note:P.note,completed:!1};try{await createScheduleItem(t,o,$);const Z={...i},ye=Z[o];ye&&(ye.schedule=[...ye.schedule||[],{id:Date.now().toString(),...$}],s(Z)),alert(`Added: ${P.name}`)}catch(Z){console.error("Voice Add Failed",Z),alert("Could not add voice event.")}}})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Event Name (e.g. Scorch, Tribe)",value:E,onChange:P=>U(P.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Date/Time (e.g. Fri 2PM)",value:Q,onChange:P=>D(P.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Type (Fete, Mas, transport...)",value:K,onChange:P=>R(P.target.value),className:"md:col-span-2 p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("button",{onClick:Ys,className:"md:col-span-2 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700",children:"Add Event"})]})]}),u==="Squad"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Your Squad"}),A.jsxs("span",{className:"text-sm bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:[((ss=_e.squad)==null?void 0:ss.length)||0," members"]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl p-4 mb-6 shadow-lg border border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[A.jsx("span",{children:""})," Road Mode: Offline Chat"]}),A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Mesh chat for when cell service dies. Open Bitchat and join your squad channel."})]}),A.jsx("span",{className:"bg-blue-600 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:"No Data Needed"})]}),!o||!se?A.jsx("div",{className:"text-center py-4 bg-white/5 rounded-lg border border-white/10",children:A.jsx("p",{className:"text-sm text-gray-300",children:"Create or join a squad to enable offline comms."})}):A.jsxs("div",{className:"space-y-4",children:[(()=>{const $=`#CP-${se.id.slice(0,8).toUpperCase()}`;return A.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-white/10",children:[A.jsx("p",{className:"text-[10px] uppercase text-gray-400 font-bold mb-2",children:"Join this channel in Bitchat"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("p",{className:"font-mono text-2xl font-bold text-blue-400 tracking-wider select-all flex-1",children:$}),A.jsx("button",{onClick:()=>{navigator.clipboard.writeText($),nr("Channel name copied!")},className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold rounded-lg transition-colors",children:"Copy"})]})]})})(),A.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[A.jsxs("a",{href:"https://apps.apple.com/us/app/bitchat-mesh/id6748219622",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," iOS App"]}),A.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.bitchat.droid",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," Android App"]})]})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4 mb-4",children:[A.jsxs("h4",{className:"font-bold text-purple-800 dark:text-purple-300 mb-3 flex items-center gap-2",children:[A.jsx("span",{children:""})," Squad Sharing"]}),wt&&A.jsx("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm",children:wt}),en&&A.jsx("div",{className:"mb-3 p-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-sm",children:en}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Share your carnival plan with friends:"}),ee?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-2xl font-mono font-bold text-purple-600 dark:text-purple-400 tracking-wider",children:ee}),A.jsx("button",{onClick:_o,className:"text-sm bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 px-3 py-1 rounded hover:bg-purple-200",children:"Copy"})]}):A.jsx("button",{onClick:Ks,disabled:Lt,className:"w-full py-2 bg-purple-600 text-white rounded font-medium hover:bg-purple-700 disabled:opacity-50",children:Lt?"Creating...":"Start a Squad"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Join a friend's squad:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Enter 6-digit code",value:ue,onChange:P=>he(P.target.value.toUpperCase().slice(0,6)),className:"flex-1 p-2 border rounded font-mono text-center tracking-wider uppercase dark:bg-gray-700 dark:border-gray-600 dark:text-white",maxLength:6}),A.jsx("button",{onClick:zs,disabled:Cn||ue.length!==6,className:"bg-pink-600 text-white px-4 rounded hover:bg-pink-700 disabled:opacity-50",children:Cn?"...":"Join"})]})]})]}),se&&A.jsx("div",{className:"mt-4 text-center",children:A.jsx("button",{onClick:UA,className:"text-sm text-red-500 hover:text-red-700 underline",children:"Leave Squad"})})]}),p&&A.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:A.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:St,onChange:P=>Wt(P.target.checked),className:"w-5 h-5 text-purple-600 rounded"}),A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-purple-800 dark:text-purple-300",children:"Notify squad when I go Road Ready"}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send push notification to squad members"})]}),A.jsx("span",{className:"ml-auto text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full",children:"Premium"})]})}),ge.length>0&&A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-green-200 dark:border-green-800 rounded-xl p-4 mb-4",children:[A.jsx("div",{className:"flex items-center justify-between mb-3",children:A.jsxs("h4",{className:"font-medium text-green-700 dark:text-green-400 flex items-center gap-2",children:[A.jsx("span",{children:""})," Connected Squad Members"]})}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:'These users joined using your share code and can see this carnival plan. Click "Refresh" to check for new members.'}),A.jsx("div",{className:"flex flex-wrap gap-2",children:ge.map((P,$)=>{var Z;return A.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full border ${P.role==="leader"?"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800":"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800"}`,children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-bold",children:(P.name||P.email||P.uid||"?").charAt(0).toUpperCase()}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:`font-medium text-sm ${P.role==="leader"?"text-yellow-800 dark:text-yellow-300":"text-green-800 dark:text-green-300"}`,children:P.name||P.email||`User ${(Z=P.uid)==null?void 0:Z.slice(0,6)}...`}),A.jsx("span",{className:`text-xs ${P.role==="leader"?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:P.role==="leader"?" Leader":" Member"})]}),(se==null?void 0:se.leaderId)===(t==null?void 0:t.uid)&&P.role!=="leader"&&P.uid&&A.jsx("button",{onClick:()=>Gs(P.uid,P.name||P.email||"this member"),className:"ml-auto text-red-400 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full p-1 transition-colors",title:"Remove from squad",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},P.uid||$)})})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 mb-4",children:[A.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Quick Add (Offline List)"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Add friend's name",value:Ae,onChange:P=>fe(P.target.value),className:"flex-1 p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:is,className:"w-full sm:w-auto bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 font-medium",children:"Add"})]}),A.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[ge.map(P=>A.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 dark:bg-purple-900/30 px-3 py-1 rounded-full border border-purple-100 dark:border-purple-800",children:[A.jsx("span",{className:"text-purple-900 dark:text-purple-200 font-medium",children:P.name}),A.jsx("button",{onClick:()=>Ii(P.id),className:"text-purple-400 hover:text-red-500 text-xs font-bold",children:""})]},P.id)),(_e.squad||[]).length===0&&A.jsx("p",{className:"text-gray-400 italic text-sm",children:"No squad members added yet. Riding solo?"})]})]}),A.jsx("div",{className:"mt-8 mb-8",children:A.jsx(rK,{squadId:se==null?void 0:se.id,user:t,isDemoMode:n})}),!p&&A.jsx("div",{className:"mt-4",children:A.jsx(zh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Packing"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Packing List"}),A.jsx("div",{className:"space-y-2 mb-6",children:(_e.packing||[]).map(P=>A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 border border-gray-100 dark:border-gray-600 shadow-sm rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("input",{type:"checkbox",checked:P.checked,onChange:()=>rs(P.id),className:"w-5 h-5 text-blue-600 rounded"}),A.jsx("span",{className:`text-gray-700 dark:text-gray-200 ${P.checked?"line-through opacity-50":""}`,children:P.item})]}),A.jsx("button",{onClick:()=>ai(P.id),className:"text-gray-400 hover:text-red-500",children:""})]},P.id))}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("input",{type:"text",placeholder:"Item",value:Y,onChange:P=>oe(P.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:xo,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!p&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(zh,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),u==="Map"&&p&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(eK,{locations:_e.mapLocations||[],scrapedEvents:Hn,onLocationsChange:P=>st("mapLocations",P),carnivalName:_e.name,carnivalId:o})}),u==="Passport"&&p&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(i7,{user:t,activeCarnivalId:o})}),u==="Media"&&p&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(iK,{files:_e.mediaFiles||[],onFilesChange:P=>st("mediaFiles",P),carnivalName:_e.name,carnivalId:o,userId:t.uid})}),u==="Profile"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(A7,{profileData:$s||{displayName:(t==null?void 0:t.displayName)||"Carnival Lover",bio:"",isPublic:!1,carnivalHistory:Object.entries(i||{}).filter(([P,$])=>{var Z;return(Z=$==null?void 0:$.costume)==null?void 0:Z.band}).map(([P,$])=>{var Z,ye;return{carnivalId:P,year:new Date().getFullYear(),band:(Z=$.costume)==null?void 0:Z.band,section:(ye=$.costume)==null?void 0:ye.section}})},isOwnProfile:!0,onEdit:()=>ii(!0),currentUser:t})}),u==="Creator"&&p&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(u7,{user:t,isPremium:p})}),u==="Info"&&A.jsxs("div",{className:"animate-fadeIn text-center",children:[A.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-2xl p-8 mb-6 shadow-xl",children:[A.jsx("img",{src:Hh,alt:"Logo",className:"w-20 h-20 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-2",children:p?"Premium Supporter":"Support the App"}),A.jsx("p",{className:"text-gray-400 mb-6",children:p?"Thank you for supporting Carnival Planner!":"All features are free! Premium removes ads and shows your support."}),A.jsxs("button",{onClick:Ti,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 rounded-full font-bold transition-colors bg-white text-gray-900 hover:bg-gray-100",children:[A.jsx("span",{children:""})," Export Itinerary"]})]}),!p&&A.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[A.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400 mb-2",children:"Become a Premium Supporter"}),A.jsx("p",{className:"text-yellow-700 dark:text-yellow-500 text-sm mb-4",children:"Get an ad-free experience and a Premium badge to show your support!"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[A.jsx("button",{onClick:()=>po("monthly"),disabled:B,className:"px-4 py-2 bg-blue-600 text-white font-bold rounded shadow hover:bg-blue-700 disabled:opacity-50",children:B?"Loading...":"Monthly - $4.99"}),A.jsx("button",{onClick:()=>po("yearly"),disabled:B,className:"px-4 py-2 bg-yellow-400 text-yellow-900 font-bold rounded shadow hover:bg-yellow-500 disabled:opacity-50",children:B?"Loading...":"Yearly - $39.99"})]})]}),A.jsx("div",{className:"mt-6",children:A.jsx(BK,{user:t})}),(t==null?void 0:t.email)==="djkrss1@gmail.com"&&A.jsxs("div",{className:"mt-6 text-left space-y-8",children:[A.jsx(cK,{}),A.jsx(_K,{}),A.jsx(hK,{})]})]})]})]})]}):A.jsx(pI,{user:t,activeCarnivalId:null,carnivalData:w0,scrapedEvents:Hn,squadMembers:[],budgetTotal:0,budgetSpent:0,isPremium:p,onAction:h})]}):A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:Js?A.jsx(d7,{onBack:()=>Yi(!1),onSuccess:()=>Yi(!1)}):A.jsxs(A.Fragment,{children:[A.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-white",children:"Welcome Back"}),A.jsxs("div",{className:"space-y-3 w-full max-w-sm",children:[A.jsxs("button",{onClick:Ie,className:"w-full flex items-center justify-center px-6 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-white transition-colors",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5 mr-3",alt:"G"}),"Continue with Google"]}),A.jsxs("div",{className:"flex items-center gap-3 text-gray-400 dark:text-gray-500",children:[A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),A.jsx("span",{className:"text-sm",children:"or"}),A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]}),A.jsx("button",{onClick:()=>Yi(!0),className:"w-full flex items-center justify-center px-6 py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-lg shadow-sm hover:opacity-90 text-white font-semibold transition-opacity",children:"Continue with Email"})]}),A.jsx("button",{onClick:()=>C(!0),className:"mt-6 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Back to home"})]})})}),A.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 px-4 mt-auto",children:A.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[A.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[A.jsx("button",{onClick:()=>rr("privacy"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Privacy"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>rr("terms"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Terms"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>rr("cookies"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cookies"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>rr("refund"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Refunds"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>rr("contact"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Contact"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Ci(!0),className:"hover:text-gray-900 dark:hover:text-white transition-colors font-medium",children:"Help"})]}),A.jsxs("p",{className:"text-gray-400 dark:text-gray-500 text-xs mt-3",children:[" ",new Date().getFullYear()," Carnival Planner"]})]})}),t&&A.jsx(oK,{activeCarnivalId:o,isPremium:p}),qs&&A.jsx(s7,{onClose:()=>{Ws(!1),localStorage.setItem("carnival-planner-welcomed","true")}}),vc&&A.jsx(a7,{onClose:()=>Ci(!1)}),uo&&A.jsx(l7,{user:t,currentProfile:$s,carnivals:i,onSave:P=>Zs(P),onClose:()=>ii(!1)})]})}H0.createRoot(document.getElementById("root")).render(A.jsx($f.StrictMode,{children:A.jsx(v7,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered:",t.scope)}).catch(t=>{console.log("SW registration failed:",t)})});
