(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var NQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fT={exports:{}},kg={},mT={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd=Symbol.for("react.element"),UQ=Symbol.for("react.portal"),FQ=Symbol.for("react.fragment"),QQ=Symbol.for("react.strict_mode"),PQ=Symbol.for("react.profiler"),RQ=Symbol.for("react.provider"),LQ=Symbol.for("react.context"),jQ=Symbol.for("react.forward_ref"),DQ=Symbol.for("react.suspense"),OQ=Symbol.for("react.memo"),MQ=Symbol.for("react.lazy"),bB=Symbol.iterator;function HQ(t){return t===null||typeof t!="object"?null:(t=bB&&t[bB]||t["@@iterator"],typeof t=="function"?t:null)}var gT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pT=Object.assign,yT={};function Sc(t,e,n){this.props=t,this.context=e,this.refs=yT,this.updater=n||gT}Sc.prototype.isReactComponent={};Sc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wT(){}wT.prototype=Sc.prototype;function wv(t,e,n){this.props=t,this.context=e,this.refs=yT,this.updater=n||gT}var vv=wv.prototype=new wT;vv.constructor=wv;pT(vv,Sc.prototype);vv.isPureReactComponent=!0;var CB=Array.isArray,vT=Object.prototype.hasOwnProperty,xv={current:null},xT={key:!0,ref:!0,__self:!0,__source:!0};function _T(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vT.call(e,r)&&!xT.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Yd,type:t,key:i,ref:o,props:s,_owner:xv.current}}function VQ(t,e){return{$$typeof:Yd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _v(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yd}function KQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var EB=/\/+/g;function $p(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KQ(""+t.key):e.toString(36)}function Kf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yd:case UQ:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$p(o,0):r,CB(s)?(n="",t!=null&&(n=t.replace(EB,"$&/")+"/"),Kf(s,e,n,"",function(h){return h})):s!=null&&(_v(s)&&(s=VQ(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(EB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",CB(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+$p(i,l);o+=Kf(i,e,n,c,s)}else if(c=HQ(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+$p(i,l++),o+=Kf(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mh(t,e,n){if(t==null)return t;var r=[],s=0;return Kf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function GQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lr={current:null},Gf={transition:null},zQ={ReactCurrentDispatcher:lr,ReactCurrentBatchConfig:Gf,ReactCurrentOwner:xv};function BT(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Mh,forEach:function(t,e,n){Mh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mh(t,function(){e++}),e},toArray:function(t){return Mh(t,function(e){return e})||[]},only:function(t){if(!_v(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Sc;$e.Fragment=FQ;$e.Profiler=PQ;$e.PureComponent=wv;$e.StrictMode=QQ;$e.Suspense=DQ;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zQ;$e.act=BT;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)vT.call(e,c)&&!xT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Yd,type:t.type,key:s,ref:i,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:LQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RQ,_context:t},t.Consumer=t};$e.createElement=_T;$e.createFactory=function(t){var e=_T.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:jQ,render:t}};$e.isValidElement=_v;$e.lazy=function(t){return{$$typeof:MQ,_payload:{_status:-1,_result:t},_init:GQ}};$e.memo=function(t,e){return{$$typeof:OQ,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=Gf.transition;Gf.transition={};try{t()}finally{Gf.transition=e}};$e.unstable_act=BT;$e.useCallback=function(t,e){return lr.current.useCallback(t,e)};$e.useContext=function(t){return lr.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return lr.current.useDeferredValue(t)};$e.useEffect=function(t,e){return lr.current.useEffect(t,e)};$e.useId=function(){return lr.current.useId()};$e.useImperativeHandle=function(t,e,n){return lr.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return lr.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return lr.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return lr.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return lr.current.useReducer(t,e,n)};$e.useRef=function(t){return lr.current.useRef(t)};$e.useState=function(t){return lr.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return lr.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return lr.current.useTransition()};$e.version="18.3.1";mT.exports=$e;var R=mT.exports;const Gi=Tc(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qQ=R,WQ=Symbol.for("react.element"),$Q=Symbol.for("react.fragment"),YQ=Object.prototype.hasOwnProperty,XQ=qQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZQ={key:!0,ref:!0,__self:!0,__source:!0};function bT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)YQ.call(e,r)&&!ZQ.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:WQ,type:t,key:i,ref:o,props:s,_owner:XQ.current}}kg.Fragment=$Q;kg.jsx=bT;kg.jsxs=bT;fT.exports=kg;var A=fT.exports,fy={},CT={exports:{}},Wr={},ET={exports:{}},IT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ae){var ee=G.length;G.push(ae);e:for(;0<ee;){var we=ee-1>>>1,de=G[we];if(0<s(de,ae))G[we]=ae,G[ee]=de,ee=we;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ae=G[0],ee=G.pop();if(ee!==ae){G[0]=ee;e:for(var we=0,de=G.length,me=de>>>1;we<me;){var pe=2*(we+1)-1,he=G[pe],ie=pe+1,Qe=G[ie];if(0>s(he,ee))ie<de&&0>s(Qe,he)?(G[we]=Qe,G[ie]=ee,we=ie):(G[we]=he,G[pe]=ee,we=pe);else if(ie<de&&0>s(Qe,ee))G[we]=Qe,G[ie]=ee,we=ie;else break e}}return ae}function s(G,ae){var ee=G.sortIndex-ae.sortIndex;return ee!==0?ee:G.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],m=1,g=null,y=3,B=!1,b=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(G){for(var ae=n(h);ae!==null;){if(ae.callback===null)r(h);else if(ae.startTime<=G)r(h),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=n(h)}}function M(G){if(x=!1,U(G),!b)if(n(c)!==null)b=!0,oe(H);else{var ae=n(h);ae!==null&&Ae(M,ae.startTime-G)}}function H(G,ae){b=!1,x&&(x=!1,I(C),C=-1),B=!0;var ee=y;try{for(U(ae),g=n(c);g!==null&&(!(g.expirationTime>ae)||G&&!D());){var we=g.callback;if(typeof we=="function"){g.callback=null,y=g.priorityLevel;var de=we(g.expirationTime<=ae);ae=t.unstable_now(),typeof de=="function"?g.callback=de:g===n(c)&&r(c),U(ae)}else r(c);g=n(c)}if(g!==null)var me=!0;else{var pe=n(h);pe!==null&&Ae(M,pe.startTime-ae),me=!1}return me}finally{g=null,y=ee,B=!1}}var O=!1,T=null,C=-1,N=5,Q=-1;function D(){return!(t.unstable_now()-Q<N)}function K(){if(T!==null){var G=t.unstable_now();Q=G;var ae=!0;try{ae=T(!0,G)}finally{ae?j():(O=!1,T=null)}}else O=!1}var j;if(typeof E=="function")j=function(){E(K)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,J=X.port2;X.port1.onmessage=K,j=function(){J.postMessage(null)}}else j=function(){S(K,0)};function oe(G){T=G,O||(O=!0,j())}function Ae(G,ae){C=S(function(){G(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){b||B||(b=!0,oe(H))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var ee=y;y=ae;try{return G()}finally{y=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=y;y=G;try{return ae()}finally{y=ee}},t.unstable_scheduleCallback=function(G,ae,ee){var we=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?we+ee:we):ee=we,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ee+de,G={id:m++,callback:ae,priorityLevel:G,startTime:ee,expirationTime:de,sortIndex:-1},ee>we?(G.sortIndex=ee,e(h,G),n(c)===null&&G===n(h)&&(x?(I(C),C=-1):x=!0,Ae(M,ee-we))):(G.sortIndex=de,e(c,G),b||B||(b=!0,oe(H))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var ae=y;return function(){var ee=y;y=ae;try{return G.apply(this,arguments)}finally{y=ee}}}})(IT);ET.exports=IT;var JQ=ET.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eP=R,Gr=JQ;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TT=new Set,dd={};function QA(t,e){sc(t,e),sc(t+"Capture",e)}function sc(t,e){for(dd[t]=e,t=0;t<e.length;t++)TT.add(e[t])}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),my=Object.prototype.hasOwnProperty,tP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,IB={},TB={};function nP(t){return my.call(TB,t)?!0:my.call(IB,t)?!1:tP.test(t)?TB[t]=!0:(IB[t]=!0,!1)}function rP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sP(t,e,n,r){if(e===null||typeof e>"u"||rP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fn[t]=new cr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fn[e]=new cr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fn[t]=new cr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fn[t]=new cr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fn[t]=new cr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fn[t]=new cr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fn[t]=new cr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fn[t]=new cr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fn[t]=new cr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bv=/[\-:]([a-z])/g;function bv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bv,bv);Fn[e]=new cr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bv,bv);Fn[e]=new cr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bv,bv);Fn[e]=new cr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fn[t]=new cr(t,1,!1,t.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fn[t]=new cr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cv(t,e,n,r){var s=Fn.hasOwnProperty(e)?Fn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sP(e,n,s,r)&&(n=null),r||s===null?nP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ia=eP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hh=Symbol.for("react.element"),Sl=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),gy=Symbol.for("react.profiler"),ST=Symbol.for("react.provider"),kT=Symbol.for("react.context"),Iv=Symbol.for("react.forward_ref"),py=Symbol.for("react.suspense"),yy=Symbol.for("react.suspense_list"),Tv=Symbol.for("react.memo"),Ta=Symbol.for("react.lazy"),NT=Symbol.for("react.offscreen"),SB=Symbol.iterator;function eu(t){return t===null||typeof t!="object"?null:(t=SB&&t[SB]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,Yp;function Bu(t){if(Yp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yp=e&&e[1]||""}return`
`+Yp+t}var Xp=!1;function Zp(t,e){if(!t||Xp)return"";Xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Xp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bu(t):""}function iP(t){switch(t.tag){case 5:return Bu(t.type);case 16:return Bu("Lazy");case 13:return Bu("Suspense");case 19:return Bu("SuspenseList");case 0:case 2:case 15:return t=Zp(t.type,!1),t;case 11:return t=Zp(t.type.render,!1),t;case 1:return t=Zp(t.type,!0),t;default:return""}}function wy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kl:return"Fragment";case Sl:return"Portal";case gy:return"Profiler";case Ev:return"StrictMode";case py:return"Suspense";case yy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kT:return(t.displayName||"Context")+".Consumer";case ST:return(t._context.displayName||"Context")+".Provider";case Iv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tv:return e=t.displayName||null,e!==null?e:wy(t.type)||"Memo";case Ta:e=t._payload,t=t._init;try{return wy(t(e))}catch{}}return null}function aP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wy(e);case 8:return e===Ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function so(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oP(t){var e=UT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vh(t){t._valueTracker||(t._valueTracker=oP(t))}function FT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=UT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vy(t,e){var n=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=so(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QT(t,e){e=e.checked,e!=null&&Cv(t,"checked",e,!1)}function xy(t,e){QT(t,e);var n=so(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_y(t,e.type,n):e.hasOwnProperty("defaultValue")&&_y(t,e.type,so(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function NB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _y(t,e,n){(e!=="number"||xm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bu=Array.isArray;function Vl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+so(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function By(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function UB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(bu(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:so(n)}}function PT(t,e){var n=so(e.value),r=so(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function FB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function by(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kh,LT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kh=Kh||document.createElement("div"),Kh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AP=["Webkit","ms","Moz","O"];Object.keys(Ou).forEach(function(t){AP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ou[e]=Ou[t]})});function jT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ou.hasOwnProperty(t)&&Ou[t]?(""+e).trim():e+"px"}function DT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var lP=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cy(t,e){if(e){if(lP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Ey(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iy=null;function Sv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ty=null,Kl=null,Gl=null;function QB(t){if(t=Jd(t)){if(typeof Ty!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Pg(e),Ty(t.stateNode,t.type,e))}}function OT(t){Kl?Gl?Gl.push(t):Gl=[t]:Kl=t}function MT(){if(Kl){var t=Kl,e=Gl;if(Gl=Kl=null,QB(t),e)for(t=0;t<e.length;t++)QB(e[t])}}function HT(t,e){return t(e)}function VT(){}var Jp=!1;function KT(t,e,n){if(Jp)return t(e,n);Jp=!0;try{return HT(t,e,n)}finally{Jp=!1,(Kl!==null||Gl!==null)&&(VT(),MT())}}function fd(t,e){var n=t.stateNode;if(n===null)return null;var r=Pg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var Sy=!1;if(Xi)try{var tu={};Object.defineProperty(tu,"passive",{get:function(){Sy=!0}}),window.addEventListener("test",tu,tu),window.removeEventListener("test",tu,tu)}catch{Sy=!1}function cP(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Mu=!1,_m=null,Bm=!1,ky=null,uP={onError:function(t){Mu=!0,_m=t}};function dP(t,e,n,r,s,i,o,l,c){Mu=!1,_m=null,cP.apply(uP,arguments)}function hP(t,e,n,r,s,i,o,l,c){if(dP.apply(this,arguments),Mu){if(Mu){var h=_m;Mu=!1,_m=null}else throw Error(le(198));Bm||(Bm=!0,ky=h)}}function PA(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function PB(t){if(PA(t)!==t)throw Error(le(188))}function fP(t){var e=t.alternate;if(!e){if(e=PA(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return PB(s),t;if(i===r)return PB(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function zT(t){return t=fP(t),t!==null?qT(t):null}function qT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qT(t);if(e!==null)return e;t=t.sibling}return null}var WT=Gr.unstable_scheduleCallback,RB=Gr.unstable_cancelCallback,mP=Gr.unstable_shouldYield,gP=Gr.unstable_requestPaint,en=Gr.unstable_now,pP=Gr.unstable_getCurrentPriorityLevel,kv=Gr.unstable_ImmediatePriority,$T=Gr.unstable_UserBlockingPriority,bm=Gr.unstable_NormalPriority,yP=Gr.unstable_LowPriority,YT=Gr.unstable_IdlePriority,Ng=null,ti=null;function wP(t){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(Ng,t,void 0,(t.current.flags&128)===128)}catch{}}var Ss=Math.clz32?Math.clz32:_P,vP=Math.log,xP=Math.LN2;function _P(t){return t>>>=0,t===0?32:31-(vP(t)/xP|0)|0}var Gh=64,zh=4194304;function Cu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Cu(l):(i&=o,i!==0&&(r=Cu(i)))}else o=n&~s,o!==0?r=Cu(o):i!==0&&(r=Cu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ss(e),s=1<<n,r|=t[n],e&=~s;return r}function BP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ss(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=BP(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ny(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XT(){var t=Gh;return Gh<<=1,!(Gh&4194240)&&(Gh=64),t}function e0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ss(e),t[e]=n}function CP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ss(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ss(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var dt=0;function ZT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JT,Uv,e1,t1,n1,Uy=!1,qh=[],za=null,qa=null,Wa=null,md=new Map,gd=new Map,Na=[],EP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LB(t,e){switch(t){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":md.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(e.pointerId)}}function nu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Jd(e),e!==null&&Uv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IP(t,e,n,r,s){switch(e){case"focusin":return za=nu(za,t,e,n,r,s),!0;case"dragenter":return qa=nu(qa,t,e,n,r,s),!0;case"mouseover":return Wa=nu(Wa,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return md.set(i,nu(md.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gd.set(i,nu(gd.get(i)||null,t,e,n,r,s)),!0}return!1}function r1(t){var e=Xo(t.target);if(e!==null){var n=PA(e);if(n!==null){if(e=n.tag,e===13){if(e=GT(n),e!==null){t.blockedOn=e,n1(t.priority,function(){e1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Iy=r,n.target.dispatchEvent(r),Iy=null}else return e=Jd(n),e!==null&&Uv(e),t.blockedOn=n,!1;e.shift()}return!0}function jB(t,e,n){zf(t)&&n.delete(e)}function TP(){Uy=!1,za!==null&&zf(za)&&(za=null),qa!==null&&zf(qa)&&(qa=null),Wa!==null&&zf(Wa)&&(Wa=null),md.forEach(jB),gd.forEach(jB)}function ru(t,e){t.blockedOn===e&&(t.blockedOn=null,Uy||(Uy=!0,Gr.unstable_scheduleCallback(Gr.unstable_NormalPriority,TP)))}function pd(t){function e(s){return ru(s,t)}if(0<qh.length){ru(qh[0],t);for(var n=1;n<qh.length;n++){var r=qh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(za!==null&&ru(za,t),qa!==null&&ru(qa,t),Wa!==null&&ru(Wa,t),md.forEach(e),gd.forEach(e),n=0;n<Na.length;n++)r=Na[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Na.length&&(n=Na[0],n.blockedOn===null);)r1(n),n.blockedOn===null&&Na.shift()}var zl=ia.ReactCurrentBatchConfig,Em=!0;function SP(t,e,n,r){var s=dt,i=zl.transition;zl.transition=null;try{dt=1,Fv(t,e,n,r)}finally{dt=s,zl.transition=i}}function kP(t,e,n,r){var s=dt,i=zl.transition;zl.transition=null;try{dt=4,Fv(t,e,n,r)}finally{dt=s,zl.transition=i}}function Fv(t,e,n,r){if(Em){var s=Fy(t,e,n,r);if(s===null)c0(t,e,r,Im,n),LB(t,r);else if(IP(s,t,e,n,r))r.stopPropagation();else if(LB(t,r),e&4&&-1<EP.indexOf(t)){for(;s!==null;){var i=Jd(s);if(i!==null&&JT(i),i=Fy(t,e,n,r),i===null&&c0(t,e,r,Im,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else c0(t,e,r,null,n)}}var Im=null;function Fy(t,e,n,r){if(Im=null,t=Sv(r),t=Xo(t),t!==null)if(e=PA(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Im=t,null}function s1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pP()){case kv:return 1;case $T:return 4;case bm:case yP:return 16;case YT:return 536870912;default:return 16}default:return 16}}var Da=null,Qv=null,qf=null;function i1(){if(qf)return qf;var t,e=Qv,n=e.length,r,s="value"in Da?Da.value:Da.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qf=s.slice(t,1<r?1-r:void 0)}function Wf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wh(){return!0}function DB(){return!1}function $r(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wh:DB,this.isPropagationStopped=DB,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wh)},persist:function(){},isPersistent:Wh}),e}var kc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pv=$r(kc),Zd=Mt({},kc,{view:0,detail:0}),NP=$r(Zd),t0,n0,su,Ug=Mt({},Zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==su&&(su&&t.type==="mousemove"?(t0=t.screenX-su.screenX,n0=t.screenY-su.screenY):n0=t0=0,su=t),t0)},movementY:function(t){return"movementY"in t?t.movementY:n0}}),OB=$r(Ug),UP=Mt({},Ug,{dataTransfer:0}),FP=$r(UP),QP=Mt({},Zd,{relatedTarget:0}),r0=$r(QP),PP=Mt({},kc,{animationName:0,elapsedTime:0,pseudoElement:0}),RP=$r(PP),LP=Mt({},kc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jP=$r(LP),DP=Mt({},kc,{data:0}),MB=$r(DP),OP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HP[t])?!!e[t]:!1}function Rv(){return VP}var KP=Mt({},Zd,{key:function(t){if(t.key){var e=OP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rv,charCode:function(t){return t.type==="keypress"?Wf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GP=$r(KP),zP=Mt({},Ug,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HB=$r(zP),qP=Mt({},Zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rv}),WP=$r(qP),$P=Mt({},kc,{propertyName:0,elapsedTime:0,pseudoElement:0}),YP=$r($P),XP=Mt({},Ug,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZP=$r(XP),JP=[9,13,27,32],Lv=Xi&&"CompositionEvent"in window,Hu=null;Xi&&"documentMode"in document&&(Hu=document.documentMode);var eR=Xi&&"TextEvent"in window&&!Hu,a1=Xi&&(!Lv||Hu&&8<Hu&&11>=Hu),VB=" ",KB=!1;function o1(t,e){switch(t){case"keyup":return JP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nl=!1;function tR(t,e){switch(t){case"compositionend":return A1(e);case"keypress":return e.which!==32?null:(KB=!0,VB);case"textInput":return t=e.data,t===VB&&KB?null:t;default:return null}}function nR(t,e){if(Nl)return t==="compositionend"||!Lv&&o1(t,e)?(t=i1(),qf=Qv=Da=null,Nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a1&&e.locale!=="ko"?null:e.data;default:return null}}var rR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rR[t.type]:e==="textarea"}function l1(t,e,n,r){OT(r),e=Tm(e,"onChange"),0<e.length&&(n=new Pv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vu=null,yd=null;function sR(t){v1(t,0)}function Fg(t){var e=Ql(t);if(FT(e))return t}function iR(t,e){if(t==="change")return e}var c1=!1;if(Xi){var s0;if(Xi){var i0="oninput"in document;if(!i0){var zB=document.createElement("div");zB.setAttribute("oninput","return;"),i0=typeof zB.oninput=="function"}s0=i0}else s0=!1;c1=s0&&(!document.documentMode||9<document.documentMode)}function qB(){Vu&&(Vu.detachEvent("onpropertychange",u1),yd=Vu=null)}function u1(t){if(t.propertyName==="value"&&Fg(yd)){var e=[];l1(e,yd,t,Sv(t)),KT(sR,e)}}function aR(t,e,n){t==="focusin"?(qB(),Vu=e,yd=n,Vu.attachEvent("onpropertychange",u1)):t==="focusout"&&qB()}function oR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fg(yd)}function AR(t,e){if(t==="click")return Fg(e)}function lR(t,e){if(t==="input"||t==="change")return Fg(e)}function cR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fs=typeof Object.is=="function"?Object.is:cR;function wd(t,e){if(Fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!my.call(e,s)||!Fs(t[s],e[s]))return!1}return!0}function WB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $B(t,e){var n=WB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=WB(n)}}function d1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function h1(){for(var t=window,e=xm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xm(t.document)}return e}function jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uR(t){var e=h1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d1(n.ownerDocument.documentElement,n)){if(r!==null&&jv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$B(n,i);var o=$B(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dR=Xi&&"documentMode"in document&&11>=document.documentMode,Ul=null,Qy=null,Ku=null,Py=!1;function YB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Py||Ul==null||Ul!==xm(r)||(r=Ul,"selectionStart"in r&&jv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ku&&wd(Ku,r)||(Ku=r,r=Tm(Qy,"onSelect"),0<r.length&&(e=new Pv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ul)))}function $h(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fl={animationend:$h("Animation","AnimationEnd"),animationiteration:$h("Animation","AnimationIteration"),animationstart:$h("Animation","AnimationStart"),transitionend:$h("Transition","TransitionEnd")},a0={},f1={};Xi&&(f1=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function Qg(t){if(a0[t])return a0[t];if(!Fl[t])return t;var e=Fl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in f1)return a0[t]=e[n];return t}var m1=Qg("animationend"),g1=Qg("animationiteration"),p1=Qg("animationstart"),y1=Qg("transitionend"),w1=new Map,XB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fo(t,e){w1.set(t,e),QA(e,[t])}for(var o0=0;o0<XB.length;o0++){var A0=XB[o0],hR=A0.toLowerCase(),fR=A0[0].toUpperCase()+A0.slice(1);fo(hR,"on"+fR)}fo(m1,"onAnimationEnd");fo(g1,"onAnimationIteration");fo(p1,"onAnimationStart");fo("dblclick","onDoubleClick");fo("focusin","onFocus");fo("focusout","onBlur");fo(y1,"onTransitionEnd");sc("onMouseEnter",["mouseout","mouseover"]);sc("onMouseLeave",["mouseout","mouseover"]);sc("onPointerEnter",["pointerout","pointerover"]);sc("onPointerLeave",["pointerout","pointerover"]);QA("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));QA("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));QA("onBeforeInput",["compositionend","keypress","textInput","paste"]);QA("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));QA("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));QA("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eu));function ZB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hP(r,e,void 0,t),t.currentTarget=null}function v1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;ZB(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;ZB(s,l,h),i=c}}}if(Bm)throw t=ky,Bm=!1,ky=null,t}function bt(t,e){var n=e[Oy];n===void 0&&(n=e[Oy]=new Set);var r=t+"__bubble";n.has(r)||(x1(e,t,2,!1),n.add(r))}function l0(t,e,n){var r=0;e&&(r|=4),x1(n,t,r,e)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function vd(t){if(!t[Yh]){t[Yh]=!0,TT.forEach(function(n){n!=="selectionchange"&&(mR.has(n)||l0(n,!1,t),l0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yh]||(e[Yh]=!0,l0("selectionchange",!1,e))}}function x1(t,e,n,r){switch(s1(e)){case 1:var s=SP;break;case 4:s=kP;break;default:s=Fv}n=s.bind(null,e,n,t),s=void 0,!Sy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function c0(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Xo(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}KT(function(){var h=i,m=Sv(n),g=[];e:{var y=w1.get(t);if(y!==void 0){var B=Pv,b=t;switch(t){case"keypress":if(Wf(n)===0)break e;case"keydown":case"keyup":B=GP;break;case"focusin":b="focus",B=r0;break;case"focusout":b="blur",B=r0;break;case"beforeblur":case"afterblur":B=r0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=OB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=FP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=WP;break;case m1:case g1:case p1:B=RP;break;case y1:B=YP;break;case"scroll":B=NP;break;case"wheel":B=ZP;break;case"copy":case"cut":case"paste":B=jP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=HB}var x=(e&4)!==0,S=!x&&t==="scroll",I=x?y!==null?y+"Capture":null:y;x=[];for(var E=h,U;E!==null;){U=E;var M=U.stateNode;if(U.tag===5&&M!==null&&(U=M,I!==null&&(M=fd(E,I),M!=null&&x.push(xd(E,M,U)))),S)break;E=E.return}0<x.length&&(y=new B(y,b,null,n,m),g.push({event:y,listeners:x}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",y&&n!==Iy&&(b=n.relatedTarget||n.fromElement)&&(Xo(b)||b[Zi]))break e;if((B||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,B?(b=n.relatedTarget||n.toElement,B=h,b=b?Xo(b):null,b!==null&&(S=PA(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(B=null,b=h),B!==b)){if(x=OB,M="onMouseLeave",I="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=HB,M="onPointerLeave",I="onPointerEnter",E="pointer"),S=B==null?y:Ql(B),U=b==null?y:Ql(b),y=new x(M,E+"leave",B,n,m),y.target=S,y.relatedTarget=U,M=null,Xo(m)===h&&(x=new x(I,E+"enter",b,n,m),x.target=U,x.relatedTarget=S,M=x),S=M,B&&b)t:{for(x=B,I=b,E=0,U=x;U;U=Al(U))E++;for(U=0,M=I;M;M=Al(M))U++;for(;0<E-U;)x=Al(x),E--;for(;0<U-E;)I=Al(I),U--;for(;E--;){if(x===I||I!==null&&x===I.alternate)break t;x=Al(x),I=Al(I)}x=null}else x=null;B!==null&&JB(g,y,B,x,!1),b!==null&&S!==null&&JB(g,S,b,x,!0)}}e:{if(y=h?Ql(h):window,B=y.nodeName&&y.nodeName.toLowerCase(),B==="select"||B==="input"&&y.type==="file")var H=iR;else if(GB(y))if(c1)H=lR;else{H=oR;var O=aR}else(B=y.nodeName)&&B.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(H=AR);if(H&&(H=H(t,h))){l1(g,H,n,m);break e}O&&O(t,y,h),t==="focusout"&&(O=y._wrapperState)&&O.controlled&&y.type==="number"&&_y(y,"number",y.value)}switch(O=h?Ql(h):window,t){case"focusin":(GB(O)||O.contentEditable==="true")&&(Ul=O,Qy=h,Ku=null);break;case"focusout":Ku=Qy=Ul=null;break;case"mousedown":Py=!0;break;case"contextmenu":case"mouseup":case"dragend":Py=!1,YB(g,n,m);break;case"selectionchange":if(dR)break;case"keydown":case"keyup":YB(g,n,m)}var T;if(Lv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Nl?o1(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(a1&&n.locale!=="ko"&&(Nl||C!=="onCompositionStart"?C==="onCompositionEnd"&&Nl&&(T=i1()):(Da=m,Qv="value"in Da?Da.value:Da.textContent,Nl=!0)),O=Tm(h,C),0<O.length&&(C=new MB(C,t,null,n,m),g.push({event:C,listeners:O}),T?C.data=T:(T=A1(n),T!==null&&(C.data=T)))),(T=eR?tR(t,n):nR(t,n))&&(h=Tm(h,"onBeforeInput"),0<h.length&&(m=new MB("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:h}),m.data=T))}v1(g,e)})}function xd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fd(t,n),i!=null&&r.unshift(xd(t,i,s)),i=fd(t,e),i!=null&&r.push(xd(t,i,s))),t=t.return}return r}function Al(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function JB(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=fd(n,i),c!=null&&o.unshift(xd(n,c,l))):s||(c=fd(n,i),c!=null&&o.push(xd(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gR=/\r\n?/g,pR=/\u0000|\uFFFD/g;function eb(t){return(typeof t=="string"?t:""+t).replace(gR,`
`).replace(pR,"")}function Xh(t,e,n){if(e=eb(e),eb(t)!==e&&n)throw Error(le(425))}function Sm(){}var Ry=null,Ly=null;function jy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dy=typeof setTimeout=="function"?setTimeout:void 0,yR=typeof clearTimeout=="function"?clearTimeout:void 0,tb=typeof Promise=="function"?Promise:void 0,wR=typeof queueMicrotask=="function"?queueMicrotask:typeof tb<"u"?function(t){return tb.resolve(null).then(t).catch(vR)}:Dy;function vR(t){setTimeout(function(){throw t})}function u0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),pd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);pd(e)}function $a(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),$s="__reactFiber$"+Nc,_d="__reactProps$"+Nc,Zi="__reactContainer$"+Nc,Oy="__reactEvents$"+Nc,xR="__reactListeners$"+Nc,_R="__reactHandles$"+Nc;function Xo(t){var e=t[$s];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[$s]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nb(t);t!==null;){if(n=t[$s])return n;t=nb(t)}return e}t=n,n=t.parentNode}return null}function Jd(t){return t=t[$s]||t[Zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ql(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Pg(t){return t[_d]||null}var My=[],Pl=-1;function mo(t){return{current:t}}function Ct(t){0>Pl||(t.current=My[Pl],My[Pl]=null,Pl--)}function yt(t,e){Pl++,My[Pl]=t.current,t.current=e}var io={},Wn=mo(io),Er=mo(!1),uA=io;function ic(t,e){var n=t.type.contextTypes;if(!n)return io;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(t){return t=t.childContextTypes,t!=null}function km(){Ct(Er),Ct(Wn)}function rb(t,e,n){if(Wn.current!==io)throw Error(le(168));yt(Wn,e),yt(Er,n)}function _1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,aP(t)||"Unknown",s));return Mt({},n,r)}function Nm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||io,uA=Wn.current,yt(Wn,t),yt(Er,Er.current),!0}function sb(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=_1(t,e,uA),r.__reactInternalMemoizedMergedChildContext=t,Ct(Er),Ct(Wn),yt(Wn,t)):Ct(Er),yt(Er,n)}var Pi=null,Rg=!1,d0=!1;function B1(t){Pi===null?Pi=[t]:Pi.push(t)}function BR(t){Rg=!0,B1(t)}function go(){if(!d0&&Pi!==null){d0=!0;var t=0,e=dt;try{var n=Pi;for(dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pi=null,Rg=!1}catch(s){throw Pi!==null&&(Pi=Pi.slice(t+1)),WT(kv,go),s}finally{dt=e,d0=!1}}return null}var Rl=[],Ll=0,Um=null,Fm=0,ts=[],ns=0,dA=null,ji=1,Di="";function Mo(t,e){Rl[Ll++]=Fm,Rl[Ll++]=Um,Um=t,Fm=e}function b1(t,e,n){ts[ns++]=ji,ts[ns++]=Di,ts[ns++]=dA,dA=t;var r=ji;t=Di;var s=32-Ss(r)-1;r&=~(1<<s),n+=1;var i=32-Ss(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ji=1<<32-Ss(e)+s|n<<s|r,Di=i+t}else ji=1<<i|n<<s|r,Di=t}function Dv(t){t.return!==null&&(Mo(t,1),b1(t,1,0))}function Ov(t){for(;t===Um;)Um=Rl[--Ll],Rl[Ll]=null,Fm=Rl[--Ll],Rl[Ll]=null;for(;t===dA;)dA=ts[--ns],ts[ns]=null,Di=ts[--ns],ts[ns]=null,ji=ts[--ns],ts[ns]=null}var Vr=null,Or=null,Ut=!1,Cs=null;function C1(t,e){var n=ss(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ib(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vr=t,Or=$a(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dA!==null?{id:ji,overflow:Di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ss(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vr=t,Or=null,!0):!1;default:return!1}}function Hy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vy(t){if(Ut){var e=Or;if(e){var n=e;if(!ib(t,e)){if(Hy(t))throw Error(le(418));e=$a(n.nextSibling);var r=Vr;e&&ib(t,e)?C1(r,n):(t.flags=t.flags&-4097|2,Ut=!1,Vr=t)}}else{if(Hy(t))throw Error(le(418));t.flags=t.flags&-4097|2,Ut=!1,Vr=t}}}function ab(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vr=t}function Zh(t){if(t!==Vr)return!1;if(!Ut)return ab(t),Ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jy(t.type,t.memoizedProps)),e&&(e=Or)){if(Hy(t))throw E1(),Error(le(418));for(;e;)C1(t,e),e=$a(e.nextSibling)}if(ab(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Or=$a(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=Vr?$a(t.stateNode.nextSibling):null;return!0}function E1(){for(var t=Or;t;)t=$a(t.nextSibling)}function ac(){Or=Vr=null,Ut=!1}function Mv(t){Cs===null?Cs=[t]:Cs.push(t)}var bR=ia.ReactCurrentBatchConfig;function iu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Jh(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ob(t){var e=t._init;return e(t._payload)}function I1(t){function e(I,E){if(t){var U=I.deletions;U===null?(I.deletions=[E],I.flags|=16):U.push(E)}}function n(I,E){if(!t)return null;for(;E!==null;)e(I,E),E=E.sibling;return null}function r(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function s(I,E){return I=Ja(I,E),I.index=0,I.sibling=null,I}function i(I,E,U){return I.index=U,t?(U=I.alternate,U!==null?(U=U.index,U<E?(I.flags|=2,E):U):(I.flags|=2,E)):(I.flags|=1048576,E)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,E,U,M){return E===null||E.tag!==6?(E=w0(U,I.mode,M),E.return=I,E):(E=s(E,U),E.return=I,E)}function c(I,E,U,M){var H=U.type;return H===kl?m(I,E,U.props.children,M,U.key):E!==null&&(E.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Ta&&ob(H)===E.type)?(M=s(E,U.props),M.ref=iu(I,E,U),M.return=I,M):(M=tm(U.type,U.key,U.props,null,I.mode,M),M.ref=iu(I,E,U),M.return=I,M)}function h(I,E,U,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==U.containerInfo||E.stateNode.implementation!==U.implementation?(E=v0(U,I.mode,M),E.return=I,E):(E=s(E,U.children||[]),E.return=I,E)}function m(I,E,U,M,H){return E===null||E.tag!==7?(E=sA(U,I.mode,M,H),E.return=I,E):(E=s(E,U),E.return=I,E)}function g(I,E,U){if(typeof E=="string"&&E!==""||typeof E=="number")return E=w0(""+E,I.mode,U),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hh:return U=tm(E.type,E.key,E.props,null,I.mode,U),U.ref=iu(I,null,E),U.return=I,U;case Sl:return E=v0(E,I.mode,U),E.return=I,E;case Ta:var M=E._init;return g(I,M(E._payload),U)}if(bu(E)||eu(E))return E=sA(E,I.mode,U,null),E.return=I,E;Jh(I,E)}return null}function y(I,E,U,M){var H=E!==null?E.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return H!==null?null:l(I,E,""+U,M);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Hh:return U.key===H?c(I,E,U,M):null;case Sl:return U.key===H?h(I,E,U,M):null;case Ta:return H=U._init,y(I,E,H(U._payload),M)}if(bu(U)||eu(U))return H!==null?null:m(I,E,U,M,null);Jh(I,U)}return null}function B(I,E,U,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(U)||null,l(E,I,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Hh:return I=I.get(M.key===null?U:M.key)||null,c(E,I,M,H);case Sl:return I=I.get(M.key===null?U:M.key)||null,h(E,I,M,H);case Ta:var O=M._init;return B(I,E,U,O(M._payload),H)}if(bu(M)||eu(M))return I=I.get(U)||null,m(E,I,M,H,null);Jh(E,M)}return null}function b(I,E,U,M){for(var H=null,O=null,T=E,C=E=0,N=null;T!==null&&C<U.length;C++){T.index>C?(N=T,T=null):N=T.sibling;var Q=y(I,T,U[C],M);if(Q===null){T===null&&(T=N);break}t&&T&&Q.alternate===null&&e(I,T),E=i(Q,E,C),O===null?H=Q:O.sibling=Q,O=Q,T=N}if(C===U.length)return n(I,T),Ut&&Mo(I,C),H;if(T===null){for(;C<U.length;C++)T=g(I,U[C],M),T!==null&&(E=i(T,E,C),O===null?H=T:O.sibling=T,O=T);return Ut&&Mo(I,C),H}for(T=r(I,T);C<U.length;C++)N=B(T,I,C,U[C],M),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?C:N.key),E=i(N,E,C),O===null?H=N:O.sibling=N,O=N);return t&&T.forEach(function(D){return e(I,D)}),Ut&&Mo(I,C),H}function x(I,E,U,M){var H=eu(U);if(typeof H!="function")throw Error(le(150));if(U=H.call(U),U==null)throw Error(le(151));for(var O=H=null,T=E,C=E=0,N=null,Q=U.next();T!==null&&!Q.done;C++,Q=U.next()){T.index>C?(N=T,T=null):N=T.sibling;var D=y(I,T,Q.value,M);if(D===null){T===null&&(T=N);break}t&&T&&D.alternate===null&&e(I,T),E=i(D,E,C),O===null?H=D:O.sibling=D,O=D,T=N}if(Q.done)return n(I,T),Ut&&Mo(I,C),H;if(T===null){for(;!Q.done;C++,Q=U.next())Q=g(I,Q.value,M),Q!==null&&(E=i(Q,E,C),O===null?H=Q:O.sibling=Q,O=Q);return Ut&&Mo(I,C),H}for(T=r(I,T);!Q.done;C++,Q=U.next())Q=B(T,I,C,Q.value,M),Q!==null&&(t&&Q.alternate!==null&&T.delete(Q.key===null?C:Q.key),E=i(Q,E,C),O===null?H=Q:O.sibling=Q,O=Q);return t&&T.forEach(function(K){return e(I,K)}),Ut&&Mo(I,C),H}function S(I,E,U,M){if(typeof U=="object"&&U!==null&&U.type===kl&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Hh:e:{for(var H=U.key,O=E;O!==null;){if(O.key===H){if(H=U.type,H===kl){if(O.tag===7){n(I,O.sibling),E=s(O,U.props.children),E.return=I,I=E;break e}}else if(O.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Ta&&ob(H)===O.type){n(I,O.sibling),E=s(O,U.props),E.ref=iu(I,O,U),E.return=I,I=E;break e}n(I,O);break}else e(I,O);O=O.sibling}U.type===kl?(E=sA(U.props.children,I.mode,M,U.key),E.return=I,I=E):(M=tm(U.type,U.key,U.props,null,I.mode,M),M.ref=iu(I,E,U),M.return=I,I=M)}return o(I);case Sl:e:{for(O=U.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===U.containerInfo&&E.stateNode.implementation===U.implementation){n(I,E.sibling),E=s(E,U.children||[]),E.return=I,I=E;break e}else{n(I,E);break}else e(I,E);E=E.sibling}E=v0(U,I.mode,M),E.return=I,I=E}return o(I);case Ta:return O=U._init,S(I,E,O(U._payload),M)}if(bu(U))return b(I,E,U,M);if(eu(U))return x(I,E,U,M);Jh(I,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,E!==null&&E.tag===6?(n(I,E.sibling),E=s(E,U),E.return=I,I=E):(n(I,E),E=w0(U,I.mode,M),E.return=I,I=E),o(I)):n(I,E)}return S}var oc=I1(!0),T1=I1(!1),Qm=mo(null),Pm=null,jl=null,Hv=null;function Vv(){Hv=jl=Pm=null}function Kv(t){var e=Qm.current;Ct(Qm),t._currentValue=e}function Ky(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ql(t,e){Pm=t,Hv=jl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Br=!0),t.firstContext=null)}function As(t){var e=t._currentValue;if(Hv!==t)if(t={context:t,memoizedValue:e,next:null},jl===null){if(Pm===null)throw Error(le(308));jl=t,Pm.dependencies={lanes:0,firstContext:t}}else jl=jl.next=t;return e}var Zo=null;function Gv(t){Zo===null?Zo=[t]:Zo.push(t)}function S1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gv(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ji(t,r)}function Ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sa=!1;function zv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ya(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ji(t,n)}return s=r.interleaved,s===null?(e.next=e,Gv(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ji(t,n)}function $f(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nv(t,n)}}function Ab(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rm(t,e,n,r){var s=t.updateQueue;Sa=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,m=h=c=null,l=i;do{var y=l.lane,B=l.eventTime;if((r&y)===y){m!==null&&(m=m.next={eventTime:B,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,x=l;switch(y=e,B=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){g=b.call(B,g,y);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,y=typeof b=="function"?b.call(B,g,y):b,y==null)break e;g=Mt({},g,y);break e;case 2:Sa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else B={eventTime:B,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=B,c=g):m=m.next=B,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(m===null&&(c=g),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fA|=o,t.lanes=o,t.memoizedState=g}}function lb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var eh={},ni=mo(eh),Bd=mo(eh),bd=mo(eh);function Jo(t){if(t===eh)throw Error(le(174));return t}function qv(t,e){switch(yt(bd,e),yt(Bd,t),yt(ni,eh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:by(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=by(e,t)}Ct(ni),yt(ni,e)}function Ac(){Ct(ni),Ct(Bd),Ct(bd)}function N1(t){Jo(bd.current);var e=Jo(ni.current),n=by(e,t.type);e!==n&&(yt(Bd,t),yt(ni,n))}function Wv(t){Bd.current===t&&(Ct(ni),Ct(Bd))}var jt=mo(0);function Lm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var h0=[];function $v(){for(var t=0;t<h0.length;t++)h0[t]._workInProgressVersionPrimary=null;h0.length=0}var Yf=ia.ReactCurrentDispatcher,f0=ia.ReactCurrentBatchConfig,hA=0,Ot=null,hn=null,Bn=null,jm=!1,Gu=!1,Cd=0,CR=0;function Rn(){throw Error(le(321))}function Yv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fs(t[n],e[n]))return!1;return!0}function Xv(t,e,n,r,s,i){if(hA=i,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yf.current=t===null||t.memoizedState===null?SR:kR,t=n(r,s),Gu){i=0;do{if(Gu=!1,Cd=0,25<=i)throw Error(le(301));i+=1,Bn=hn=null,e.updateQueue=null,Yf.current=NR,t=n(r,s)}while(Gu)}if(Yf.current=Dm,e=hn!==null&&hn.next!==null,hA=0,Bn=hn=Ot=null,jm=!1,e)throw Error(le(300));return t}function Zv(){var t=Cd!==0;return Cd=0,t}function Ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Ot.memoizedState=Bn=t:Bn=Bn.next=t,Bn}function ls(){if(hn===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=hn.next;var e=Bn===null?Ot.memoizedState:Bn.next;if(e!==null)Bn=e,hn=t;else{if(t===null)throw Error(le(310));hn=t,t={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},Bn===null?Ot.memoizedState=Bn=t:Bn=Bn.next=t}return Bn}function Ed(t,e){return typeof e=="function"?e(t):e}function m0(t){var e=ls(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=hn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var m=h.lane;if((hA&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=g,o=r):c=c.next=g,Ot.lanes|=m,fA|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,Fs(r,e.memoizedState)||(Br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ot.lanes|=i,fA|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function g0(t){var e=ls(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Fs(i,e.memoizedState)||(Br=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function U1(){}function F1(t,e){var n=Ot,r=ls(),s=e(),i=!Fs(r.memoizedState,s);if(i&&(r.memoizedState=s,Br=!0),r=r.queue,Jv(R1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Bn!==null&&Bn.memoizedState.tag&1){if(n.flags|=2048,Id(9,P1.bind(null,n,r,s,e),void 0,null),bn===null)throw Error(le(349));hA&30||Q1(n,e,s)}return s}function Q1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function P1(t,e,n,r){e.value=n,e.getSnapshot=r,L1(e)&&j1(t)}function R1(t,e,n){return n(function(){L1(e)&&j1(t)})}function L1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fs(t,n)}catch{return!0}}function j1(t){var e=Ji(t,1);e!==null&&ks(e,t,1,-1)}function cb(t){var e=Ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:t},e.queue=t,t=t.dispatch=TR.bind(null,Ot,t),[e.memoizedState,t]}function Id(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function D1(){return ls().memoizedState}function Xf(t,e,n,r){var s=Ws();Ot.flags|=t,s.memoizedState=Id(1|e,n,void 0,r===void 0?null:r)}function Lg(t,e,n,r){var s=ls();r=r===void 0?null:r;var i=void 0;if(hn!==null){var o=hn.memoizedState;if(i=o.destroy,r!==null&&Yv(r,o.deps)){s.memoizedState=Id(e,n,i,r);return}}Ot.flags|=t,s.memoizedState=Id(1|e,n,i,r)}function ub(t,e){return Xf(8390656,8,t,e)}function Jv(t,e){return Lg(2048,8,t,e)}function O1(t,e){return Lg(4,2,t,e)}function M1(t,e){return Lg(4,4,t,e)}function H1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function V1(t,e,n){return n=n!=null?n.concat([t]):null,Lg(4,4,H1.bind(null,e,t),n)}function ex(){}function K1(t,e){var n=ls();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function G1(t,e){var n=ls();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function z1(t,e,n){return hA&21?(Fs(n,e)||(n=XT(),Ot.lanes|=n,fA|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Br=!0),t.memoizedState=n)}function ER(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var r=f0.transition;f0.transition={};try{t(!1),e()}finally{dt=n,f0.transition=r}}function q1(){return ls().memoizedState}function IR(t,e,n){var r=Za(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},W1(t))$1(e,n);else if(n=S1(t,e,n,r),n!==null){var s=ar();ks(n,t,r,s),Y1(n,e,r)}}function TR(t,e,n){var r=Za(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(W1(t))$1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Fs(l,o)){var c=e.interleaved;c===null?(s.next=s,Gv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=S1(t,e,s,r),n!==null&&(s=ar(),ks(n,t,r,s),Y1(n,e,r))}}function W1(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function $1(t,e){Gu=jm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Y1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nv(t,n)}}var Dm={readContext:As,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},SR={readContext:As,useCallback:function(t,e){return Ws().memoizedState=[t,e===void 0?null:e],t},useContext:As,useEffect:ub,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xf(4194308,4,H1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xf(4,2,t,e)},useMemo:function(t,e){var n=Ws();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ws();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IR.bind(null,Ot,t),[r.memoizedState,t]},useRef:function(t){var e=Ws();return t={current:t},e.memoizedState=t},useState:cb,useDebugValue:ex,useDeferredValue:function(t){return Ws().memoizedState=t},useTransition:function(){var t=cb(!1),e=t[0];return t=ER.bind(null,t[1]),Ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ot,s=Ws();if(Ut){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),bn===null)throw Error(le(349));hA&30||Q1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ub(R1.bind(null,r,i,t),[t]),r.flags|=2048,Id(9,P1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ws(),e=bn.identifierPrefix;if(Ut){var n=Di,r=ji;n=(r&~(1<<32-Ss(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kR={readContext:As,useCallback:K1,useContext:As,useEffect:Jv,useImperativeHandle:V1,useInsertionEffect:O1,useLayoutEffect:M1,useMemo:G1,useReducer:m0,useRef:D1,useState:function(){return m0(Ed)},useDebugValue:ex,useDeferredValue:function(t){var e=ls();return z1(e,hn.memoizedState,t)},useTransition:function(){var t=m0(Ed)[0],e=ls().memoizedState;return[t,e]},useMutableSource:U1,useSyncExternalStore:F1,useId:q1,unstable_isNewReconciler:!1},NR={readContext:As,useCallback:K1,useContext:As,useEffect:Jv,useImperativeHandle:V1,useInsertionEffect:O1,useLayoutEffect:M1,useMemo:G1,useReducer:g0,useRef:D1,useState:function(){return g0(Ed)},useDebugValue:ex,useDeferredValue:function(t){var e=ls();return hn===null?e.memoizedState=t:z1(e,hn.memoizedState,t)},useTransition:function(){var t=g0(Ed)[0],e=ls().memoizedState;return[t,e]},useMutableSource:U1,useSyncExternalStore:F1,useId:q1,unstable_isNewReconciler:!1};function Bs(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jg={isMounted:function(t){return(t=t._reactInternals)?PA(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ar(),s=Za(t),i=zi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ya(t,i,s),e!==null&&(ks(e,t,s,r),$f(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ar(),s=Za(t),i=zi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ya(t,i,s),e!==null&&(ks(e,t,s,r),$f(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ar(),r=Za(t),s=zi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ya(t,s,r),e!==null&&(ks(e,t,r,n),$f(e,t,r))}};function db(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wd(n,r)||!wd(s,i):!0}function X1(t,e,n){var r=!1,s=io,i=e.contextType;return typeof i=="object"&&i!==null?i=As(i):(s=Ir(e)?uA:Wn.current,r=e.contextTypes,i=(r=r!=null)?ic(t,s):io),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jg.enqueueReplaceState(e,e.state,null)}function zy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=As(i):(i=Ir(e)?uA:Wn.current,s.context=ic(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Gy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jg.enqueueReplaceState(s,s.state,null),Rm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lc(t,e){try{var n="",r=e;do n+=iP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function p0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UR=typeof WeakMap=="function"?WeakMap:Map;function Z1(t,e,n){n=zi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mm||(Mm=!0,rw=r),qy(t,e)},n}function J1(t,e,n){n=zi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qy(t,e),typeof r!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zR.bind(null,t,e,n),e.then(t,t))}function mb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zi(-1,1),e.tag=2,Ya(n,e,1))),n.lanes|=1),t)}var FR=ia.ReactCurrentOwner,Br=!1;function sr(t,e,n,r){e.child=t===null?T1(e,null,n,r):oc(e,t.child,n,r)}function pb(t,e,n,r,s){n=n.render;var i=e.ref;return ql(e,s),r=Xv(t,e,n,r,i,s),n=Zv(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ea(t,e,s)):(Ut&&n&&Dv(e),e.flags|=1,sr(t,e,r,s),e.child)}function yb(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ax(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,eS(t,e,i,r,s)):(t=tm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wd,n(o,r)&&t.ref===e.ref)return ea(t,e,s)}return e.flags|=1,t=Ja(i,r),t.ref=e.ref,t.return=e,e.child=t}function eS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wd(i,r)&&t.ref===e.ref)if(Br=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Br=!0);else return e.lanes=t.lanes,ea(t,e,s)}return Wy(t,e,n,r,s)}function tS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Ol,Dr),Dr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yt(Ol,Dr),Dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,yt(Ol,Dr),Dr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,yt(Ol,Dr),Dr|=r;return sr(t,e,s,n),e.child}function nS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wy(t,e,n,r,s){var i=Ir(n)?uA:Wn.current;return i=ic(e,i),ql(e,s),n=Xv(t,e,n,r,i,s),r=Zv(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ea(t,e,s)):(Ut&&r&&Dv(e),e.flags|=1,sr(t,e,n,s),e.child)}function wb(t,e,n,r,s){if(Ir(n)){var i=!0;Nm(e)}else i=!1;if(ql(e,s),e.stateNode===null)Zf(t,e),X1(e,n,r),zy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=As(h):(h=Ir(n)?uA:Wn.current,h=ic(e,h));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&hb(e,o,r,h),Sa=!1;var y=e.memoizedState;o.state=y,Rm(e,r,o,s),c=e.memoizedState,l!==r||y!==c||Er.current||Sa?(typeof m=="function"&&(Gy(e,n,m,r),c=e.memoizedState),(l=Sa||db(e,n,l,r,y,c,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,k1(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Bs(e.type,l),o.props=h,g=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=As(c):(c=Ir(n)?uA:Wn.current,c=ic(e,c));var B=n.getDerivedStateFromProps;(m=typeof B=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||y!==c)&&hb(e,o,r,c),Sa=!1,y=e.memoizedState,o.state=y,Rm(e,r,o,s);var b=e.memoizedState;l!==g||y!==b||Er.current||Sa?(typeof B=="function"&&(Gy(e,n,B,r),b=e.memoizedState),(h=Sa||db(e,n,h,r,y,b,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return $y(t,e,n,r,i,s)}function $y(t,e,n,r,s,i){nS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&sb(e,n,!1),ea(t,e,i);r=e.stateNode,FR.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oc(e,t.child,null,i),e.child=oc(e,null,l,i)):sr(t,e,l,i),e.memoizedState=r.state,s&&sb(e,n,!0),e.child}function rS(t){var e=t.stateNode;e.pendingContext?rb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rb(t,e.context,!1),qv(t,e.containerInfo)}function vb(t,e,n,r,s){return ac(),Mv(s),e.flags|=256,sr(t,e,n,r),e.child}var Yy={dehydrated:null,treeContext:null,retryLane:0};function Xy(t){return{baseLanes:t,cachePool:null,transitions:null}}function sS(t,e,n){var r=e.pendingProps,s=jt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),yt(jt,s&1),t===null)return Vy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mg(o,r,0,null),t=sA(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Xy(n),e.memoizedState=Yy,t):tx(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return QR(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ja(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ja(l,i):(i=sA(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Xy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Yy,r}return i=t.child,t=i.sibling,r=Ja(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tx(t,e){return e=Mg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ef(t,e,n,r){return r!==null&&Mv(r),oc(e,t.child,null,n),t=tx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=p0(Error(le(422))),ef(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Mg({mode:"visible",children:r.children},s,0,null),i=sA(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oc(e,t.child,null,o),e.child.memoizedState=Xy(o),e.memoizedState=Yy,i);if(!(e.mode&1))return ef(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(le(419)),r=p0(i,r,void 0),ef(t,e,o,r)}if(l=(o&t.childLanes)!==0,Br||l){if(r=bn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ji(t,s),ks(r,t,s,-1))}return ox(),r=p0(Error(le(421))),ef(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=qR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Or=$a(s.nextSibling),Vr=e,Ut=!0,Cs=null,t!==null&&(ts[ns++]=ji,ts[ns++]=Di,ts[ns++]=dA,ji=t.id,Di=t.overflow,dA=e),e=tx(e,r.children),e.flags|=4096,e)}function xb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ky(t.return,e,n)}function y0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function iS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(sr(t,e,r.children,n),r=jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xb(t,n,e);else if(t.tag===19)xb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yt(jt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),y0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}y0(e,!0,n,null,i);break;case"together":y0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ea(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fA|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=Ja(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ja(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PR(t,e,n){switch(e.tag){case 3:rS(e),ac();break;case 5:N1(e);break;case 1:Ir(e.type)&&Nm(e);break;case 4:qv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;yt(Qm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yt(jt,jt.current&1),e.flags|=128,null):n&e.child.childLanes?sS(t,e,n):(yt(jt,jt.current&1),t=ea(t,e,n),t!==null?t.sibling:null);yt(jt,jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(jt,jt.current),r)break;return null;case 22:case 23:return e.lanes=0,tS(t,e,n)}return ea(t,e,n)}var aS,Zy,oS,AS;aS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zy=function(){};oS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Jo(ni.current);var i=null;switch(n){case"input":s=vy(t,s),r=vy(t,r),i=[];break;case"select":s=Mt({},s,{value:void 0}),r=Mt({},r,{value:void 0}),i=[];break;case"textarea":s=By(t,s),r=By(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sm)}Cy(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(dd.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(dd.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&bt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};AS=function(t,e,n,r){n!==r&&(e.flags|=4)};function au(t,e){if(!Ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RR(t,e,n){var r=e.pendingProps;switch(Ov(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return Ir(e.type)&&km(),Ln(e),null;case 3:return r=e.stateNode,Ac(),Ct(Er),Ct(Wn),$v(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cs!==null&&(aw(Cs),Cs=null))),Zy(t,e),Ln(e),null;case 5:Wv(e);var s=Jo(bd.current);if(n=e.type,t!==null&&e.stateNode!=null)oS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return Ln(e),null}if(t=Jo(ni.current),Zh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$s]=e,r[_d]=i,t=(e.mode&1)!==0,n){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(s=0;s<Eu.length;s++)bt(Eu[s],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":kB(r,i),bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},bt("invalid",r);break;case"textarea":UB(r,i),bt("invalid",r)}Cy(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xh(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xh(r.textContent,l,t),s=["children",""+l]):dd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&bt("scroll",r)}switch(n){case"input":Vh(r),NB(r,i,!0);break;case"textarea":Vh(r),FB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$s]=e,t[_d]=r,aS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ey(n,r),n){case"dialog":bt("cancel",t),bt("close",t),s=r;break;case"iframe":case"object":case"embed":bt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Eu.length;s++)bt(Eu[s],t);s=r;break;case"source":bt("error",t),s=r;break;case"img":case"image":case"link":bt("error",t),bt("load",t),s=r;break;case"details":bt("toggle",t),s=r;break;case"input":kB(t,r),s=vy(t,r),bt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Mt({},r,{value:void 0}),bt("invalid",t);break;case"textarea":UB(t,r),s=By(t,r),bt("invalid",t);break;default:s=r}Cy(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?DT(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&LT(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&hd(t,c):typeof c=="number"&&hd(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&bt("scroll",t):c!=null&&Cv(t,i,c,o))}switch(n){case"input":Vh(t),NB(t,r,!1);break;case"textarea":Vh(t),FB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+so(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(t&&e.stateNode!=null)AS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Jo(bd.current),Jo(ni.current),Zh(e)){if(r=e.stateNode,n=e.memoizedProps,r[$s]=e,(i=r.nodeValue!==n)&&(t=Vr,t!==null))switch(t.tag){case 3:Xh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$s]=e,e.stateNode=r}return Ln(e),null;case 13:if(Ct(jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&Or!==null&&e.mode&1&&!(e.flags&128))E1(),ac(),e.flags|=98560,i=!1;else if(i=Zh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[$s]=e}else ac(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),i=!1}else Cs!==null&&(aw(Cs),Cs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jt.current&1?mn===0&&(mn=3):ox())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return Ac(),Zy(t,e),t===null&&vd(e.stateNode.containerInfo),Ln(e),null;case 10:return Kv(e.type._context),Ln(e),null;case 17:return Ir(e.type)&&km(),Ln(e),null;case 19:if(Ct(jt),i=e.memoizedState,i===null)return Ln(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)au(i,!1);else{if(mn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lm(t),o!==null){for(e.flags|=128,au(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yt(jt,jt.current&1|2),e.child}t=t.sibling}i.tail!==null&&en()>cc&&(e.flags|=128,r=!0,au(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),au(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ut)return Ln(e),null}else 2*en()-i.renderingStartTime>cc&&n!==1073741824&&(e.flags|=128,r=!0,au(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=en(),e.sibling=null,n=jt.current,yt(jt,r?n&1|2:n&1),e):(Ln(e),null);case 22:case 23:return ax(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dr&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function LR(t,e){switch(Ov(e),e.tag){case 1:return Ir(e.type)&&km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ac(),Ct(Er),Ct(Wn),$v(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wv(e),null;case 13:if(Ct(jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));ac()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ct(jt),null;case 4:return Ac(),null;case 10:return Kv(e.type._context),null;case 22:case 23:return ax(),null;case 24:return null;default:return null}}var tf=!1,Hn=!1,jR=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Dl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gt(t,e,r)}else n.current=null}function Jy(t,e,n){try{n()}catch(r){Gt(t,e,r)}}var _b=!1;function DR(t,e){if(Ry=Em,t=h1(),jv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,m=0,g=t,y=null;t:for(;;){for(var B;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(B=g.firstChild)!==null;)y=g,g=B;for(;;){if(g===t)break t;if(y===n&&++h===s&&(l=o),y===i&&++m===r&&(c=o),(B=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=B}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ly={focusedElem:t,selectionRange:n},Em=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,S=b.memoizedState,I=e.stateNode,E=I.getSnapshotBeforeUpdate(e.elementType===e.type?x:Bs(e.type,x),S);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var U=e.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(M){Gt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return b=_b,_b=!1,b}function zu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Jy(e,n,i)}s=s.next}while(s!==r)}}function Dg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ew(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lS(t){var e=t.alternate;e!==null&&(t.alternate=null,lS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$s],delete e[_d],delete e[Oy],delete e[xR],delete e[_R])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cS(t){return t.tag===5||t.tag===3||t.tag===4}function Bb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sm));else if(r!==4&&(t=t.child,t!==null))for(tw(t,e,n),t=t.sibling;t!==null;)tw(t,e,n),t=t.sibling}function nw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nw(t,e,n),t=t.sibling;t!==null;)nw(t,e,n),t=t.sibling}var In=null,bs=!1;function _a(t,e,n){for(n=n.child;n!==null;)uS(t,e,n),n=n.sibling}function uS(t,e,n){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(Ng,n)}catch{}switch(n.tag){case 5:Hn||Dl(n,e);case 6:var r=In,s=bs;In=null,_a(t,e,n),In=r,bs=s,In!==null&&(bs?(t=In,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):In.removeChild(n.stateNode));break;case 18:In!==null&&(bs?(t=In,n=n.stateNode,t.nodeType===8?u0(t.parentNode,n):t.nodeType===1&&u0(t,n),pd(t)):u0(In,n.stateNode));break;case 4:r=In,s=bs,In=n.stateNode.containerInfo,bs=!0,_a(t,e,n),In=r,bs=s;break;case 0:case 11:case 14:case 15:if(!Hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jy(n,e,o),s=s.next}while(s!==r)}_a(t,e,n);break;case 1:if(!Hn&&(Dl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Gt(n,e,l)}_a(t,e,n);break;case 21:_a(t,e,n);break;case 22:n.mode&1?(Hn=(r=Hn)||n.memoizedState!==null,_a(t,e,n),Hn=r):_a(t,e,n);break;default:_a(t,e,n)}}function bb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jR),e.forEach(function(r){var s=WR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:In=l.stateNode,bs=!1;break e;case 3:In=l.stateNode.containerInfo,bs=!0;break e;case 4:In=l.stateNode.containerInfo,bs=!0;break e}l=l.return}if(In===null)throw Error(le(160));uS(i,o,s),In=null,bs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Gt(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dS(e,t),e=e.sibling}function dS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xs(e,t),zs(t),r&4){try{zu(3,t,t.return),Dg(3,t)}catch(x){Gt(t,t.return,x)}try{zu(5,t,t.return)}catch(x){Gt(t,t.return,x)}}break;case 1:xs(e,t),zs(t),r&512&&n!==null&&Dl(n,n.return);break;case 5:if(xs(e,t),zs(t),r&512&&n!==null&&Dl(n,n.return),t.flags&32){var s=t.stateNode;try{hd(s,"")}catch(x){Gt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&QT(s,i),Ey(l,o);var h=Ey(l,i);for(o=0;o<c.length;o+=2){var m=c[o],g=c[o+1];m==="style"?DT(s,g):m==="dangerouslySetInnerHTML"?LT(s,g):m==="children"?hd(s,g):Cv(s,m,g,h)}switch(l){case"input":xy(s,i);break;case"textarea":PT(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var B=i.value;B!=null?Vl(s,!!i.multiple,B,!1):y!==!!i.multiple&&(i.defaultValue!=null?Vl(s,!!i.multiple,i.defaultValue,!0):Vl(s,!!i.multiple,i.multiple?[]:"",!1))}s[_d]=i}catch(x){Gt(t,t.return,x)}}break;case 6:if(xs(e,t),zs(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Gt(t,t.return,x)}}break;case 3:if(xs(e,t),zs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pd(e.containerInfo)}catch(x){Gt(t,t.return,x)}break;case 4:xs(e,t),zs(t);break;case 13:xs(e,t),zs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sx=en())),r&4&&bb(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Hn=(h=Hn)||m,xs(e,t),Hn=h):xs(e,t),zs(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(_e=t,m=t.child;m!==null;){for(g=_e=m;_e!==null;){switch(y=_e,B=y.child,y.tag){case 0:case 11:case 14:case 15:zu(4,y,y.return);break;case 1:Dl(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){Gt(r,n,x)}}break;case 5:Dl(y,y.return);break;case 22:if(y.memoizedState!==null){Eb(g);continue}}B!==null?(B.return=y,_e=B):Eb(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=jT("display",o))}catch(x){Gt(t,t.return,x)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(x){Gt(t,t.return,x)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:xs(e,t),zs(t),r&4&&bb(t);break;case 21:break;default:xs(e,t),zs(t)}}function zs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cS(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hd(s,""),r.flags&=-33);var i=Bb(t);nw(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Bb(t);tw(t,l,o);break;default:throw Error(le(161))}}catch(c){Gt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OR(t,e,n){_e=t,hS(t)}function hS(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tf;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Hn;l=tf;var h=Hn;if(tf=o,(Hn=c)&&!h)for(_e=s;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?Ib(s):c!==null?(c.return=o,_e=c):Ib(s);for(;i!==null;)_e=i,hS(i),i=i.sibling;_e=s,tf=l,Hn=h}Cb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):Cb(t)}}function Cb(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||Dg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lb(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lb(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&pd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Hn||e.flags&512&&ew(e)}catch(y){Gt(e,e.return,y)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function Eb(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function Ib(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dg(4,e)}catch(c){Gt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Gt(e,s,c)}}var i=e.return;try{ew(e)}catch(c){Gt(e,i,c)}break;case 5:var o=e.return;try{ew(e)}catch(c){Gt(e,o,c)}}}catch(c){Gt(e,e.return,c)}if(e===t){_e=null;break}var l=e.sibling;if(l!==null){l.return=e.return,_e=l;break}_e=e.return}}var MR=Math.ceil,Om=ia.ReactCurrentDispatcher,nx=ia.ReactCurrentOwner,os=ia.ReactCurrentBatchConfig,rt=0,bn=null,ln=null,Nn=0,Dr=0,Ol=mo(0),mn=0,Td=null,fA=0,Og=0,rx=0,qu=null,xr=null,sx=0,cc=1/0,Fi=null,Mm=!1,rw=null,Xa=null,nf=!1,Oa=null,Hm=0,Wu=0,sw=null,Jf=-1,em=0;function ar(){return rt&6?en():Jf!==-1?Jf:Jf=en()}function Za(t){return t.mode&1?rt&2&&Nn!==0?Nn&-Nn:bR.transition!==null?(em===0&&(em=XT()),em):(t=dt,t!==0||(t=window.event,t=t===void 0?16:s1(t.type)),t):1}function ks(t,e,n,r){if(50<Wu)throw Wu=0,sw=null,Error(le(185));Xd(t,n,r),(!(rt&2)||t!==bn)&&(t===bn&&(!(rt&2)&&(Og|=n),mn===4&&Ua(t,Nn)),Tr(t,r),n===1&&rt===0&&!(e.mode&1)&&(cc=en()+500,Rg&&go()))}function Tr(t,e){var n=t.callbackNode;bP(t,e);var r=Cm(t,t===bn?Nn:0);if(r===0)n!==null&&RB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&RB(n),e===1)t.tag===0?BR(Tb.bind(null,t)):B1(Tb.bind(null,t)),wR(function(){!(rt&6)&&go()}),n=null;else{switch(ZT(r)){case 1:n=kv;break;case 4:n=$T;break;case 16:n=bm;break;case 536870912:n=YT;break;default:n=bm}n=xS(n,fS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fS(t,e){if(Jf=-1,em=0,rt&6)throw Error(le(327));var n=t.callbackNode;if(Wl()&&t.callbackNode!==n)return null;var r=Cm(t,t===bn?Nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vm(t,r);else{e=r;var s=rt;rt|=2;var i=gS();(bn!==t||Nn!==e)&&(Fi=null,cc=en()+500,rA(t,e));do try{KR();break}catch(l){mS(t,l)}while(!0);Vv(),Om.current=i,rt=s,ln!==null?e=0:(bn=null,Nn=0,e=mn)}if(e!==0){if(e===2&&(s=Ny(t),s!==0&&(r=s,e=iw(t,s))),e===1)throw n=Td,rA(t,0),Ua(t,r),Tr(t,en()),n;if(e===6)Ua(t,r);else{if(s=t.current.alternate,!(r&30)&&!HR(s)&&(e=Vm(t,r),e===2&&(i=Ny(t),i!==0&&(r=i,e=iw(t,i))),e===1))throw n=Td,rA(t,0),Ua(t,r),Tr(t,en()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Ho(t,xr,Fi);break;case 3:if(Ua(t,r),(r&130023424)===r&&(e=sx+500-en(),10<e)){if(Cm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ar(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dy(Ho.bind(null,t,xr,Fi),e);break}Ho(t,xr,Fi);break;case 4:if(Ua(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ss(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=en()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MR(r/1960))-r,10<r){t.timeoutHandle=Dy(Ho.bind(null,t,xr,Fi),r);break}Ho(t,xr,Fi);break;case 5:Ho(t,xr,Fi);break;default:throw Error(le(329))}}}return Tr(t,en()),t.callbackNode===n?fS.bind(null,t):null}function iw(t,e){var n=qu;return t.current.memoizedState.isDehydrated&&(rA(t,e).flags|=256),t=Vm(t,e),t!==2&&(e=xr,xr=n,e!==null&&aw(e)),t}function aw(t){xr===null?xr=t:xr.push.apply(xr,t)}function HR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Fs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ua(t,e){for(e&=~rx,e&=~Og,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ss(e),r=1<<n;t[n]=-1,e&=~r}}function Tb(t){if(rt&6)throw Error(le(327));Wl();var e=Cm(t,0);if(!(e&1))return Tr(t,en()),null;var n=Vm(t,e);if(t.tag!==0&&n===2){var r=Ny(t);r!==0&&(e=r,n=iw(t,r))}if(n===1)throw n=Td,rA(t,0),Ua(t,e),Tr(t,en()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ho(t,xr,Fi),Tr(t,en()),null}function ix(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(cc=en()+500,Rg&&go())}}function mA(t){Oa!==null&&Oa.tag===0&&!(rt&6)&&Wl();var e=rt;rt|=1;var n=os.transition,r=dt;try{if(os.transition=null,dt=1,t)return t()}finally{dt=r,os.transition=n,rt=e,!(rt&6)&&go()}}function ax(){Dr=Ol.current,Ct(Ol)}function rA(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yR(n)),ln!==null)for(n=ln.return;n!==null;){var r=n;switch(Ov(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&km();break;case 3:Ac(),Ct(Er),Ct(Wn),$v();break;case 5:Wv(r);break;case 4:Ac();break;case 13:Ct(jt);break;case 19:Ct(jt);break;case 10:Kv(r.type._context);break;case 22:case 23:ax()}n=n.return}if(bn=t,ln=t=Ja(t.current,null),Nn=Dr=e,mn=0,Td=null,rx=Og=fA=0,xr=qu=null,Zo!==null){for(e=0;e<Zo.length;e++)if(n=Zo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zo=null}return t}function mS(t,e){do{var n=ln;try{if(Vv(),Yf.current=Dm,jm){for(var r=Ot.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jm=!1}if(hA=0,Bn=hn=Ot=null,Gu=!1,Cd=0,nx.current=null,n===null||n.return===null){mn=1,Td=e,ln=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Nn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=l,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var B=mb(o);if(B!==null){B.flags&=-257,gb(B,o,l,i,e),B.mode&1&&fb(i,h,e),e=B,c=h;var b=e.updateQueue;if(b===null){var x=new Set;x.add(c),e.updateQueue=x}else b.add(c);break e}else{if(!(e&1)){fb(i,h,e),ox();break e}c=Error(le(426))}}else if(Ut&&l.mode&1){var S=mb(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),gb(S,o,l,i,e),Mv(lc(c,l));break e}}i=c=lc(c,l),mn!==4&&(mn=2),qu===null?qu=[i]:qu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Z1(i,c,e);Ab(i,I);break e;case 1:l=c;var E=i.type,U=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Xa===null||!Xa.has(U)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=J1(i,l,e);Ab(i,M);break e}}i=i.return}while(i!==null)}yS(n)}catch(H){e=H,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(!0)}function gS(){var t=Om.current;return Om.current=Dm,t===null?Dm:t}function ox(){(mn===0||mn===3||mn===2)&&(mn=4),bn===null||!(fA&268435455)&&!(Og&268435455)||Ua(bn,Nn)}function Vm(t,e){var n=rt;rt|=2;var r=gS();(bn!==t||Nn!==e)&&(Fi=null,rA(t,e));do try{VR();break}catch(s){mS(t,s)}while(!0);if(Vv(),rt=n,Om.current=r,ln!==null)throw Error(le(261));return bn=null,Nn=0,mn}function VR(){for(;ln!==null;)pS(ln)}function KR(){for(;ln!==null&&!mP();)pS(ln)}function pS(t){var e=vS(t.alternate,t,Dr);t.memoizedProps=t.pendingProps,e===null?yS(t):ln=e,nx.current=null}function yS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LR(n,e),n!==null){n.flags&=32767,ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mn=6,ln=null;return}}else if(n=RR(n,e,Dr),n!==null){ln=n;return}if(e=e.sibling,e!==null){ln=e;return}ln=e=t}while(e!==null);mn===0&&(mn=5)}function Ho(t,e,n){var r=dt,s=os.transition;try{os.transition=null,dt=1,GR(t,e,n,r)}finally{os.transition=s,dt=r}return null}function GR(t,e,n,r){do Wl();while(Oa!==null);if(rt&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CP(t,i),t===bn&&(ln=bn=null,Nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nf||(nf=!0,xS(bm,function(){return Wl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=os.transition,os.transition=null;var o=dt;dt=1;var l=rt;rt|=4,nx.current=null,DR(t,n),dS(n,t),uR(Ly),Em=!!Ry,Ly=Ry=null,t.current=n,OR(n),gP(),rt=l,dt=o,os.transition=i}else t.current=n;if(nf&&(nf=!1,Oa=t,Hm=s),i=t.pendingLanes,i===0&&(Xa=null),wP(n.stateNode),Tr(t,en()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mm)throw Mm=!1,t=rw,rw=null,t;return Hm&1&&t.tag!==0&&Wl(),i=t.pendingLanes,i&1?t===sw?Wu++:(Wu=0,sw=t):Wu=0,go(),null}function Wl(){if(Oa!==null){var t=ZT(Hm),e=os.transition,n=dt;try{if(os.transition=null,dt=16>t?16:t,Oa===null)var r=!1;else{if(t=Oa,Oa=null,Hm=0,rt&6)throw Error(le(331));var s=rt;for(rt|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(_e=h;_e!==null;){var m=_e;switch(m.tag){case 0:case 11:case 15:zu(8,m,i)}var g=m.child;if(g!==null)g.return=m,_e=g;else for(;_e!==null;){m=_e;var y=m.sibling,B=m.return;if(lS(m),m===h){_e=null;break}if(y!==null){y.return=B,_e=y;break}_e=B}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var S=x.sibling;x.sibling=null,x=S}while(x!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zu(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,_e=I;break e}_e=i.return}}var E=t.current;for(_e=E;_e!==null;){o=_e;var U=o.child;if(o.subtreeFlags&2064&&U!==null)U.return=o,_e=U;else e:for(o=E;_e!==null;){if(l=_e,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dg(9,l)}}catch(H){Gt(l,l.return,H)}if(l===o){_e=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,_e=M;break e}_e=l.return}}if(rt=s,go(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(Ng,t)}catch{}r=!0}return r}finally{dt=n,os.transition=e}}return!1}function Sb(t,e,n){e=lc(n,e),e=Z1(t,e,1),t=Ya(t,e,1),e=ar(),t!==null&&(Xd(t,1,e),Tr(t,e))}function Gt(t,e,n){if(t.tag===3)Sb(t,t,n);else for(;e!==null;){if(e.tag===3){Sb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xa===null||!Xa.has(r))){t=lc(n,t),t=J1(e,t,1),e=Ya(e,t,1),t=ar(),e!==null&&(Xd(e,1,t),Tr(e,t));break}}e=e.return}}function zR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ar(),t.pingedLanes|=t.suspendedLanes&n,bn===t&&(Nn&n)===n&&(mn===4||mn===3&&(Nn&130023424)===Nn&&500>en()-sx?rA(t,0):rx|=n),Tr(t,e)}function wS(t,e){e===0&&(t.mode&1?(e=zh,zh<<=1,!(zh&130023424)&&(zh=4194304)):e=1);var n=ar();t=Ji(t,e),t!==null&&(Xd(t,e,n),Tr(t,n))}function qR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wS(t,n)}function WR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),wS(t,n)}var vS;vS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Er.current)Br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Br=!1,PR(t,e,n);Br=!!(t.flags&131072)}else Br=!1,Ut&&e.flags&1048576&&b1(e,Fm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zf(t,e),t=e.pendingProps;var s=ic(e,Wn.current);ql(e,n),s=Xv(null,e,r,t,s,n);var i=Zv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ir(r)?(i=!0,Nm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zv(e),s.updater=jg,e.stateNode=s,s._reactInternals=e,zy(e,r,t,n),e=$y(null,e,r,!0,i,n)):(e.tag=0,Ut&&i&&Dv(e),sr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YR(r),t=Bs(r,t),s){case 0:e=Wy(null,e,r,t,n);break e;case 1:e=wb(null,e,r,t,n);break e;case 11:e=pb(null,e,r,t,n);break e;case 14:e=yb(null,e,r,Bs(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),Wy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),wb(t,e,r,s,n);case 3:e:{if(rS(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,k1(t,e),Rm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lc(Error(le(423)),e),e=vb(t,e,r,n,s);break e}else if(r!==s){s=lc(Error(le(424)),e),e=vb(t,e,r,n,s);break e}else for(Or=$a(e.stateNode.containerInfo.firstChild),Vr=e,Ut=!0,Cs=null,n=T1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ac(),r===s){e=ea(t,e,n);break e}sr(t,e,r,n)}e=e.child}return e;case 5:return N1(e),t===null&&Vy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,jy(r,s)?o=null:i!==null&&jy(r,i)&&(e.flags|=32),nS(t,e),sr(t,e,o,n),e.child;case 6:return t===null&&Vy(e),null;case 13:return sS(t,e,n);case 4:return qv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oc(e,null,r,n):sr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),pb(t,e,r,s,n);case 7:return sr(t,e,e.pendingProps,n),e.child;case 8:return sr(t,e,e.pendingProps.children,n),e.child;case 12:return sr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,yt(Qm,r._currentValue),r._currentValue=o,i!==null)if(Fs(i.value,o)){if(i.children===s.children&&!Er.current){e=ea(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=zi(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ky(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ky(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}sr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ql(e,n),s=As(s),r=r(s),e.flags|=1,sr(t,e,r,n),e.child;case 14:return r=e.type,s=Bs(r,e.pendingProps),s=Bs(r.type,s),yb(t,e,r,s,n);case 15:return eS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bs(r,s),Zf(t,e),e.tag=1,Ir(r)?(t=!0,Nm(e)):t=!1,ql(e,n),X1(e,r,s),zy(e,r,s,n),$y(null,e,r,!0,t,n);case 19:return iS(t,e,n);case 22:return tS(t,e,n)}throw Error(le(156,e.tag))};function xS(t,e){return WT(t,e)}function $R(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(t,e,n,r){return new $R(t,e,n,r)}function Ax(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YR(t){if(typeof t=="function")return Ax(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Iv)return 11;if(t===Tv)return 14}return 2}function Ja(t,e){var n=t.alternate;return n===null?(n=ss(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tm(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ax(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kl:return sA(n.children,s,i,e);case Ev:o=8,s|=8;break;case gy:return t=ss(12,n,e,s|2),t.elementType=gy,t.lanes=i,t;case py:return t=ss(13,n,e,s),t.elementType=py,t.lanes=i,t;case yy:return t=ss(19,n,e,s),t.elementType=yy,t.lanes=i,t;case NT:return Mg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ST:o=10;break e;case kT:o=9;break e;case Iv:o=11;break e;case Tv:o=14;break e;case Ta:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=ss(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function sA(t,e,n,r){return t=ss(7,t,r,e),t.lanes=n,t}function Mg(t,e,n,r){return t=ss(22,t,r,e),t.elementType=NT,t.lanes=n,t.stateNode={isHidden:!1},t}function w0(t,e,n){return t=ss(6,t,null,e),t.lanes=n,t}function v0(t,e,n){return e=ss(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e0(0),this.expirationTimes=e0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lx(t,e,n,r,s,i,o,l,c){return t=new XR(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ss(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zv(i),t}function ZR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _S(t){if(!t)return io;t=t._reactInternals;e:{if(PA(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Ir(n))return _1(t,n,e)}return e}function BS(t,e,n,r,s,i,o,l,c){return t=lx(n,r,!0,t,s,i,o,l,c),t.context=_S(null),n=t.current,r=ar(),s=Za(n),i=zi(r,s),i.callback=e??null,Ya(n,i,s),t.current.lanes=s,Xd(t,s,r),Tr(t,r),t}function Hg(t,e,n,r){var s=e.current,i=ar(),o=Za(s);return n=_S(n),e.context===null?e.context=n:e.pendingContext=n,e=zi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ya(s,e,o),t!==null&&(ks(t,s,o,i),$f(t,s,o)),o}function Km(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cx(t,e){kb(t,e),(t=t.alternate)&&kb(t,e)}function JR(){return null}var bS=typeof reportError=="function"?reportError:function(t){console.error(t)};function ux(t){this._internalRoot=t}Vg.prototype.render=ux.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Hg(t,e,null,null)};Vg.prototype.unmount=ux.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mA(function(){Hg(null,t,null,null)}),e[Zi]=null}};function Vg(t){this._internalRoot=t}Vg.prototype.unstable_scheduleHydration=function(t){if(t){var e=t1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Na.length&&e!==0&&e<Na[n].priority;n++);Na.splice(n,0,t),n===0&&r1(t)}};function dx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nb(){}function eL(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Km(o);i.call(h)}}var o=BS(e,r,t,0,null,!1,!1,"",Nb);return t._reactRootContainer=o,t[Zi]=o.current,vd(t.nodeType===8?t.parentNode:t),mA(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Km(c);l.call(h)}}var c=lx(t,0,!1,null,null,!1,!1,"",Nb);return t._reactRootContainer=c,t[Zi]=c.current,vd(t.nodeType===8?t.parentNode:t),mA(function(){Hg(e,c,n,r)}),c}function Gg(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Km(o);l.call(c)}}Hg(e,o,t,s)}else o=eL(n,e,t,s,r);return Km(o)}JT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cu(e.pendingLanes);n!==0&&(Nv(e,n|1),Tr(e,en()),!(rt&6)&&(cc=en()+500,go()))}break;case 13:mA(function(){var r=Ji(t,1);if(r!==null){var s=ar();ks(r,t,1,s)}}),cx(t,1)}};Uv=function(t){if(t.tag===13){var e=Ji(t,134217728);if(e!==null){var n=ar();ks(e,t,134217728,n)}cx(t,134217728)}};e1=function(t){if(t.tag===13){var e=Za(t),n=Ji(t,e);if(n!==null){var r=ar();ks(n,t,e,r)}cx(t,e)}};t1=function(){return dt};n1=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};Ty=function(t,e,n){switch(e){case"input":if(xy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Pg(r);if(!s)throw Error(le(90));FT(r),xy(r,s)}}}break;case"textarea":PT(t,n);break;case"select":e=n.value,e!=null&&Vl(t,!!n.multiple,e,!1)}};HT=ix;VT=mA;var tL={usingClientEntryPoint:!1,Events:[Jd,Ql,Pg,OT,MT,ix]},ou={findFiberByHostInstance:Xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nL={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zT(t),t===null?null:t.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||JR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{Ng=rf.inject(nL),ti=rf}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tL;Wr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dx(e))throw Error(le(200));return ZR(t,e,null,n)};Wr.createRoot=function(t,e){if(!dx(t))throw Error(le(299));var n=!1,r="",s=bS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lx(t,1,!1,null,null,n,!1,r,s),t[Zi]=e.current,vd(t.nodeType===8?t.parentNode:t),new ux(e)};Wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=zT(e),t=t===null?null:t.stateNode,t};Wr.flushSync=function(t){return mA(t)};Wr.hydrate=function(t,e,n){if(!Kg(e))throw Error(le(200));return Gg(null,t,e,!0,n)};Wr.hydrateRoot=function(t,e,n){if(!dx(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=BS(e,null,t,1,n??null,s,!1,i,o),t[Zi]=e.current,vd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vg(e)};Wr.render=function(t,e,n){if(!Kg(e))throw Error(le(200));return Gg(null,t,e,!1,n)};Wr.unmountComponentAtNode=function(t){if(!Kg(t))throw Error(le(40));return t._reactRootContainer?(mA(function(){Gg(null,null,t,!1,function(){t._reactRootContainer=null,t[Zi]=null})}),!0):!1};Wr.unstable_batchedUpdates=ix;Wr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kg(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Gg(t,e,n,!1,r)};Wr.version="18.3.1-next-f1338f8080-20240426";function CS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CS)}catch(t){console.error(t)}}CS(),CT.exports=Wr;var ES=CT.exports,Ub=ES;fy.createRoot=Ub.createRoot,fy.hydrateRoot=Ub.hydrateRoot;const rL="modulepreload",sL=function(t){return"/"+t},Fb={},ow=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=sL(c),c in Fb)return;Fb[c]=!0;const h=c.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":rL,h||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((y,B)=>{g.addEventListener("load",y),g.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var Qb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},TS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,g=(i&3)<<4|l>>4;let y=(l&15)<<2|h>>6,B=h&63;c||(B=64,o||(y=64)),r.push(n[m],n[g],n[y],n[B])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new aL;const y=i<<2|l>>4;if(r.push(y),h!==64){const B=l<<4&240|h>>2;if(r.push(B),g!==64){const b=h<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oL=function(t){const e=IS(t);return TS.encodeByteArray(e,!0)},Gm=function(t){return oL(t).replace(/\./g,"")},SS=function(t){try{return TS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=()=>AL().__FIREBASE_DEFAULTS__,cL=()=>{if(typeof process>"u"||typeof Qb>"u")return;const t=Qb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SS(t[1]);return e&&JSON.parse(e)},zg=()=>{try{return lL()||cL()||uL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kS=t=>{var e,n;return(n=(e=zg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NS=t=>{const e=kS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},US=()=>{var t;return(t=zg())===null||t===void 0?void 0:t.config},FS=t=>{var e;return(e=zg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gm(JSON.stringify(n)),Gm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function mL(){var t;const e=(t=zg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wL(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QS(){return!mL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hx(){try{return typeof indexedDB=="object"}catch{return!1}}function PS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function vL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL="FirebaseError";class ds extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xL,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,RA.prototype.create)}}class RA{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?_L(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ds(s,l,r)}}function _L(t,e){return t.replace(BL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const BL=/\{\$([^}]+)}/g;function bL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gA(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Pb(i)&&Pb(o)){if(!gA(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Iu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Tu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function CL(t,e){const n=new EL(t,e);return n.subscribe.bind(n)}class EL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=x0),s.error===void 0&&(s.error=x0),s.complete===void 0&&(s.complete=x0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function x0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kL(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SL(t){return t===Vo?void 0:t}function kL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const UL={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},FL=Xe.INFO,QL={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},PL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let fx=class{constructor(e){this.name=e,this._logLevel=FL,this._logHandler=PL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}};const RL=(t,e)=>e.some(n=>t instanceof n);let Rb,Lb;function LL(){return Rb||(Rb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jL(){return Lb||(Lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RS=new WeakMap,Aw=new WeakMap,LS=new WeakMap,_0=new WeakMap,mx=new WeakMap;function DL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RS.set(n,t)}).catch(()=>{}),mx.set(e,t),e}function OL(t){if(Aw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Aw.set(t,e)}let lw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Aw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ML(t){lw=t(lw)}function HL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(B0(this),e,...n);return LS.set(r,e.sort?e.sort():[e]),qi(r)}:jL().includes(t)?function(...e){return t.apply(B0(this),e),qi(RS.get(this))}:function(...e){return qi(t.apply(B0(this),e))}}function VL(t){return typeof t=="function"?HL(t):(t instanceof IDBTransaction&&OL(t),RL(t,LL())?new Proxy(t,lw):t)}function qi(t){if(t instanceof IDBRequest)return DL(t);if(_0.has(t))return _0.get(t);const e=VL(t);return e!==t&&(_0.set(t,e),mx.set(e,t)),e}const B0=t=>mx.get(t);function qg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=qi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qi(o.result),c.oldVersion,c.newVersion,qi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}function b0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),qi(n).then(()=>{})}const KL=["get","getKey","getAll","getAllKeys","count"],GL=["put","add","delete","clear"],C0=new Map;function jb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(C0.get(e))return C0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=GL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KL.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return C0.set(e,i),i}ML(t=>({...t,get:(e,n,r)=>jb(e,n)||t.get(e,n,r),has:(e,n)=>!!jb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cw="@firebase/app",Db="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new fx("@firebase/app"),WL="@firebase/app-compat",$L="@firebase/analytics-compat",YL="@firebase/analytics",XL="@firebase/app-check-compat",ZL="@firebase/app-check",JL="@firebase/auth",e4="@firebase/auth-compat",t4="@firebase/database",n4="@firebase/data-connect",r4="@firebase/database-compat",s4="@firebase/functions",i4="@firebase/functions-compat",a4="@firebase/installations",o4="@firebase/installations-compat",A4="@firebase/messaging",l4="@firebase/messaging-compat",c4="@firebase/performance",u4="@firebase/performance-compat",d4="@firebase/remote-config",h4="@firebase/remote-config-compat",f4="@firebase/storage",m4="@firebase/storage-compat",g4="@firebase/firestore",p4="@firebase/vertexai-preview",y4="@firebase/firestore-compat",w4="firebase",v4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="[DEFAULT]",x4={[cw]:"fire-core",[WL]:"fire-core-compat",[YL]:"fire-analytics",[$L]:"fire-analytics-compat",[ZL]:"fire-app-check",[XL]:"fire-app-check-compat",[JL]:"fire-auth",[e4]:"fire-auth-compat",[t4]:"fire-rtdb",[n4]:"fire-data-connect",[r4]:"fire-rtdb-compat",[s4]:"fire-fn",[i4]:"fire-fn-compat",[a4]:"fire-iid",[o4]:"fire-iid-compat",[A4]:"fire-fcm",[l4]:"fire-fcm-compat",[c4]:"fire-perf",[u4]:"fire-perf-compat",[d4]:"fire-rc",[h4]:"fire-rc-compat",[f4]:"fire-gcs",[m4]:"fire-gcs-compat",[g4]:"fire-fst",[y4]:"fire-fst-compat",[p4]:"fire-vertex","fire-js":"fire-js",[w4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Map,_4=new Map,dw=new Map;function Ob(t,e){try{t.container.addComponent(e)}catch(n){ta.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cs(t){const e=t.name;if(dw.has(e))return ta.debug(`There were multiple attempts to register component ${e}.`),!1;dw.set(e,t);for(const n of zm.values())Ob(n,t);for(const n of _4.values())Ob(n,t);return!0}function po(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Es(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new RA("app","Firebase",B4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=v4;function jS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:uw,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw eo.create("bad-app-name",{appName:String(s)});if(n||(n=US()),!n)throw eo.create("no-options");const i=zm.get(s);if(i){if(gA(n,i.options)&&gA(r,i.config))return i;throw eo.create("duplicate-app",{appName:s})}const o=new NL(s);for(const c of dw.values())o.addComponent(c);const l=new b4(n,r,o);return zm.set(s,l),l}function Wg(t=uw){const e=zm.get(t);if(!e&&t===uw&&US())return jS();if(!e)throw eo.create("no-app",{appName:t});return e}function zn(t,e,n){var r;let s=(r=x4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ta.warn(l.join(" "));return}cs(new zr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="firebase-heartbeat-database",E4=1,Sd="firebase-heartbeat-store";let E0=null;function DS(){return E0||(E0=qg(C4,E4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sd)}catch(n){console.warn(n)}}}}).catch(t=>{throw eo.create("idb-open",{originalErrorMessage:t.message})})),E0}async function I4(t){try{const n=(await DS()).transaction(Sd),r=await n.objectStore(Sd).get(OS(t));return await n.done,r}catch(e){if(e instanceof ds)ta.warn(e.message);else{const n=eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ta.warn(n.message)}}}async function Mb(t,e){try{const r=(await DS()).transaction(Sd,"readwrite");await r.objectStore(Sd).put(e,OS(t)),await r.done}catch(n){if(n instanceof ds)ta.warn(n.message);else{const r=eo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ta.warn(r.message)}}}function OS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=1024,S4=30*24*60*60*1e3;class k4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Hb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=S4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ta.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hb(),{heartbeatsToSend:r,unsentEntries:s}=N4(this._heartbeatsCache.heartbeats),i=Gm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ta.warn(n),""}}}function Hb(){return new Date().toISOString().substring(0,10)}function N4(t,e=T4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class U4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hx()?PS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vb(t){return Gm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){cs(new zr("platform-logger",e=>new zL(e),"PRIVATE")),cs(new zr("heartbeat",e=>new k4(e),"PRIVATE")),zn(cw,Db,t),zn(cw,Db,"esm2017"),zn("fire-js","")}F4("");function gx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function MS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q4=MS,HS=new RA("auth","Firebase",MS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=new fx("@firebase/auth");function P4(t,...e){qm.logLevel<=Xe.WARN&&qm.warn(`Auth (${LA}): ${t}`,...e)}function nm(t,...e){qm.logLevel<=Xe.ERROR&&qm.error(`Auth (${LA}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t,...e){throw yx(t,...e)}function Ns(t,...e){return yx(t,...e)}function px(t,e,n){const r=Object.assign(Object.assign({},Q4()),{[e]:n});return new RA("auth","Firebase",r).create(e,{appName:t.name})}function Wi(t){return px(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function R4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&us(t,"argument-error"),px(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return HS.create(t,...e)}function Pe(t,e,...n){if(!t)throw yx(e,...n)}function Oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nm(e),new Error(e)}function na(t,e){t||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function L4(){return Kb()==="http:"||Kb()==="https:"}function Kb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L4()||pL()||"connection"in navigator)?navigator.onLine:!0}function D4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.shortDelay=e,this.longDelay=n,na(n>e,"Short delay should be less than long delay!"),this.isMobile=fL()||yL()}get(){return j4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e){na(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new nh(3e4,6e4);function aa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oa(t,e,n,r,s={}){return KS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=th(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return gL()||(h.referrerPolicy="no-referrer"),VS.fetch()(GS(t,t.config.apiHost,n,l),h)})}async function KS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},O4),e);try{const s=new V4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw sf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw sf(t,"user-disabled",o);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw px(t,m,h);us(t,m)}}catch(s){if(s instanceof ds)throw s;us(t,"network-request-failed",{message:String(s)})}}async function rh(t,e,n,r,s={}){const i=await oa(t,e,n,r,s);return"mfaPendingCredential"in i&&us(t,"multi-factor-auth-required",{_serverResponse:i}),i}function GS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?wx(t.config,s):`${t.config.apiScheme}://${s}`}function H4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ns(this.auth,"network-request-failed")),M4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ns(t,e,r);return s.customData._tokenResponse=n,s}function Gb(t){return t!==void 0&&t.enterprise!==void 0}class K4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return H4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function G4(t,e){return oa(t,"GET","/v2/recaptchaConfig",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function zS(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q4(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=vx(r);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$u(I0(s.auth_time)),issuedAtTime:$u(I0(s.iat)),expirationTime:$u(I0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function I0(t){return Number(t)*1e3}function vx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nm("JWT malformed, contained fewer than 3 sections"),null;try{const s=SS(n);return s?JSON.parse(s):(nm("Failed to decode base64 JWT payload"),null)}catch(s){return nm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zb(t){const e=vx(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ds&&W4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function W4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await kd(t,zS(n,{idToken:r}));Pe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?qS(i.providerUserInfo):[],l=X4(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),m=c?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new fw(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function Y4(t){const e=it(t);await Wm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qS(t){return t.map(e=>{var{providerId:n}=e,r=gx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(t,e){const n=await KS(t,{},async()=>{const r=th({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=GS(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",VS.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J4(t,e){return oa(t,"POST","/v2/accounts:revokeToken",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=zb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Z4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $l;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=gx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await kd(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q4(this,e)}reload(){return Y4(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Es(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await kd(this,z4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,m;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,B=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,E=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:U,emailVerified:M,isAnonymous:H,providerData:O,stsTokenManager:T}=n;Pe(U&&T,e,"internal-error");const C=$l.fromJSON(this.name,T);Pe(typeof U=="string",e,"internal-error"),Ba(g,e.name),Ba(y,e.name),Pe(typeof M=="boolean",e,"internal-error"),Pe(typeof H=="boolean",e,"internal-error"),Ba(B,e.name),Ba(b,e.name),Ba(x,e.name),Ba(S,e.name),Ba(I,e.name),Ba(E,e.name);const N=new Mi({uid:U,auth:e,email:y,emailVerified:M,displayName:g,isAnonymous:H,photoURL:b,phoneNumber:B,tenantId:x,stsTokenManager:C,createdAt:I,lastLoginAt:E});return O&&Array.isArray(O)&&(N.providerData=O.map(Q=>Object.assign({},Q))),S&&(N._redirectEventId=S),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new $l;s.updateFromServerResponse(n);const i=new Mi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?qS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new $l;l.updateFromIdToken(r);const c=new Mi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new fw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=new Map;function Hi(t){na(t instanceof Function,"Expected a class definition");let e=qb.get(t);return e?(na(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WS.type="NONE";const Wb=WS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t,e,n){return`firebase:${t}:${e}:${n}`}class Yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=rm(this.userKey,s.apiKey,i),this.fullPersistenceKey=rm("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yl(Hi(Wb),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Hi(Wb);const o=rm(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const m=await h._get(o);if(m){const g=Mi._fromJSON(e,m);h!==i&&(l=g),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Yl(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Yl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($S(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ek(e))return"Blackberry";if(tk(e))return"Webos";if(YS(e))return"Safari";if((e.includes("chrome/")||XS(e))&&!e.includes("edge/"))return"Chrome";if(JS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $S(t=gn()){return/firefox\//i.test(t)}function YS(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XS(t=gn()){return/crios\//i.test(t)}function ZS(t=gn()){return/iemobile/i.test(t)}function JS(t=gn()){return/android/i.test(t)}function ek(t=gn()){return/blackberry/i.test(t)}function tk(t=gn()){return/webos/i.test(t)}function xx(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ej(t=gn()){var e;return xx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tj(){return wL()&&document.documentMode===10}function nk(t=gn()){return xx(t)||JS(t)||tk(t)||ek(t)||/windows phone/i.test(t)||ZS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e=[]){let n;switch(t){case"Browser":n=$b(gn());break;case"Worker":n=`${$b(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${LA}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e={}){return oa(t,"GET","/v2/passwordPolicy",aa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=6;class ij{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yb(this),this.idTokenSubscription=new Yb(this),this.beforeStateQueue=new nj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zS(this,{idToken:e}),r=await Mi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Es(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=D4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Es(this.app))return Promise.reject(Wi(this));const n=e?it(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Es(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Es(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rj(this),n=new ij(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new RA("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&P4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ai(t){return it(t)}class Yb{constructor(e){this.auth=e,this.observer=null,this.addObserver=CL(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oj(t){$g=t}function sk(t){return $g.loadJS(t)}function Aj(){return $g.recaptchaEnterpriseScript}function lj(){return $g.gapiScript}function cj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const uj="recaptcha-enterprise",dj="NO_RECAPTCHA";class hj{constructor(e){this.type=uj,this.auth=Ai(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{G4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new K4(c);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Gb(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(dj)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Gb(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Aj();c.length!==0&&(c+=l),sk(c).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function Xb(t,e,n,r=!1){const s=new hj(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function $m(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xb(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Xb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e){const n=po(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(gA(i,e??{}))return s;us(s,"already-initialized")}return n.initialize({options:e})}function mj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gj(t,e,n){const r=Ai(t);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ik(e),{host:o,port:l}=pj(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),yj()}function ik(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pj(t){const e=ik(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Zb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Zb(o)}}}function Zb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function wj(t,e){return oa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){return rh(t,"POST","/v1/accounts:signInWithPassword",aa(t,e))}async function ak(t,e){return oa(t,"POST","/v1/accounts:sendOobCode",aa(t,e))}async function xj(t,e){return ak(t,e)}async function _j(t,e){return ak(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bj(t,e){return rh(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}async function bj(t,e){return rh(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends _x{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Nd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Nd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,n,"signInWithPassword",vj);case"emailLink":return Bj(e,{email:this._email,oobCode:this._password});default:us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,r,"signUpPassword",wj);case"emailLink":return bj(e,{idToken:n,email:this._email,oobCode:this._password});default:us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t,e){return rh(t,"POST","/v1/accounts:signInWithIdp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="http://localhost";class pA extends _x{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=gx(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new pA(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xl(e,n)}buildRequest(){const e={requestUri:Cj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=th(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ij(t){const e=Iu(Tu(t)).link,n=e?Iu(Tu(e)).deep_link_id:null,r=Iu(Tu(t)).deep_link_id;return(r?Iu(Tu(r)).link:null)||r||n||e||t}class Bx{constructor(e){var n,r,s,i,o,l;const c=Iu(Tu(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(r=c.oobCode)!==null&&r!==void 0?r:null,g=Ej((s=c.mode)!==null&&s!==void 0?s:null);Pe(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Ij(e);try{return new Bx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(){this.providerId=Uc.PROVIDER_ID}static credential(e,n){return Nd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Bx.parseLink(n);return Pe(r,"argument-error"),Nd._fromEmailAndCode(e,r.code,r.tenantId)}}Uc.PROVIDER_ID="password";Uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends bx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends sh{constructor(){super("facebook.com")}static credential(e){return pA._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends sh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pA._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends sh{constructor(){super("github.com")}static credential(e){return pA._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.GITHUB_SIGN_IN_METHOD="github.com";Qa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends sh{constructor(){super("twitter.com")}static credential(e,n){return pA._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pa.credentialFromTaggedObject(e)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pa.credential(n,r)}catch{return null}}}Pa.TWITTER_SIGN_IN_METHOD="twitter.com";Pa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,e){return rh(t,"POST","/v1/accounts:signUp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Mi._fromIdTokenResponse(e,r,s),o=Jb(r);return new yA({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Jb(r);return new yA({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Jb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends ds{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ym.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ym(e,n,r,s)}}function ok(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ym._fromErrorAndOperation(t,i,e,r):i})}async function Sj(t,e,n=!1){const r=await kd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return yA._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e,n=!1){const{auth:r}=t;if(Es(r.app))return Promise.reject(Wi(r));const s="reauthenticate";try{const i=await kd(t,ok(r,s,e,t),n);Pe(i.idToken,r,"internal-error");const o=vx(i.idToken);Pe(o,r,"internal-error");const{sub:l}=o;return Pe(t.uid===l,r,"user-mismatch"),yA._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&us(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(t,e,n=!1){if(Es(t.app))return Promise.reject(Wi(t));const r="signIn",s=await ok(t,r,e),i=await yA._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Nj(t,e){return Ak(Ai(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t){const e=Ai(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Uj(t,e,n){const r=Ai(t);await $m(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_j)}async function Fj(t,e,n){if(Es(t.app))return Promise.reject(Wi(t));const r=Ai(t),o=await $m(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tj).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&lk(t),c}),l=await yA._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Qj(t,e,n){return Es(t.app)?Promise.reject(Wi(t)):Nj(it(t),Uc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lk(t),r})}async function ck(t,e){const n=it(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await xj(n.auth,s);i!==t.email&&await t.reload()}function Pj(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function Rj(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function Lj(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function uk(t){return it(t).signOut()}const Xm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xm,"1"),this.storage.removeItem(Xm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=1e3,Dj=10;class hk extends dk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Dj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hk.type="LOCAL";const Oj=hk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends dk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fk.type="SESSION";const mk=fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Yg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await Mj(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Cx("",20);s.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(y.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return window}function Vj(t){ri().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}async function Kj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Gj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zj(){return gk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="firebaseLocalStorageDb",qj=1,Zm="firebaseLocalStorage",yk="fbase_key";class ih{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xg(t,e){return t.transaction([Zm],e?"readwrite":"readonly").objectStore(Zm)}function Wj(){const t=indexedDB.deleteDatabase(pk);return new ih(t).toPromise()}function mw(){const t=indexedDB.open(pk,qj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zm,{keyPath:yk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zm)?e(r):(r.close(),await Wj(),e(await mw()))})})}async function eC(t,e,n){const r=Xg(t,!0).put({[yk]:e,value:n});return new ih(r).toPromise()}async function $j(t,e){const n=Xg(t,!1).get(e),r=await new ih(n).toPromise();return r===void 0?null:r.value}function tC(t,e){const n=Xg(t,!0).delete(e);return new ih(n).toPromise()}const Yj=800,Xj=3;class wk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Xj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yg._getInstance(zj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Kj(),!this.activeServiceWorker)return;this.sender=new Hj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Gj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mw();return await eC(e,Xm,"1"),await tC(e,Xm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>eC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$j(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Xg(s,!1).getAll();return new ih(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wk.type="LOCAL";const Zj=wk;new nh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t,e){return e?Hi(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex extends _x{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Jj(t){return Ak(t.auth,new Ex(t),t.bypassAuthState)}function eD(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),kj(n,new Ex(t),t.bypassAuthState)}async function tD(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),Sj(n,new Ex(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jj;case"linkViaPopup":case"linkViaRedirect":return tD;case"reauthViaPopup":case"reauthViaRedirect":return eD;default:us(this.auth,"internal-error")}}resolve(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new nh(2e3,1e4);async function rD(t,e,n){if(Es(t.app))return Promise.reject(Ns(t,"operation-not-supported-in-this-environment"));const r=Ai(t);R4(t,e,bx);const s=vk(r,n);return new eA(r,"signInViaPopup",e,s).executeNotNull()}class eA extends xk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,eA.currentPopupAction&&eA.currentPopupAction.cancel(),eA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){na(this.filter.length===1,"Popup operations only handle one event");const e=Cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eA.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nD.get())};e()}}eA.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="pendingRedirect",sm=new Map;class iD extends xk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sm.get(this.auth._key());if(!e){try{const r=await aD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sm.set(this.auth._key(),e)}return this.bypassAuthState||sm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aD(t,e){const n=lD(e),r=AD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function oD(t,e){sm.set(t._key(),e)}function AD(t){return Hi(t._redirectPersistence)}function lD(t){return rm(sD,t.config.apiKey,t.name)}async function cD(t,e){return await Ai(t)._initializationPromise,_k(t,e,!1)}async function _k(t,e,n=!1){if(Es(t.app))return Promise.reject(Wi(t));const r=Ai(t),s=vk(r,e),o=await new iD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=10*60*1e3;class dD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Bk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ns(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uD&&this.cachedEventUids.clear(),this.cachedEventUids.has(nC(e))}saveEventToCache(e){this.cachedEventUids.add(nC(e)),this.lastProcessedEventTime=Date.now()}}function nC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Bk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t,e={}){return oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gD=/^https?/;async function pD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fD(t);for(const n of e)try{if(yD(n))return}catch{}us(t,"unauthorized-domain")}function yD(t){const e=hw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gD.test(n))return!1;if(mD.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new nh(3e4,6e4);function rC(){const t=ri().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vD(t){return new Promise((e,n)=>{var r,s,i;function o(){rC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rC(),n(Ns(t,"network-request-failed"))},timeout:wD.get()})}if(!((s=(r=ri().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ri().gapi)===null||i===void 0)&&i.load)o();else{const l=cj("iframefcb");return ri()[l]=()=>{gapi.load?o():n(Ns(t,"network-request-failed"))},sk(`${lj()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw im=null,e})}let im=null;function xD(t){return im=im||vD(t),im}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new nh(5e3,15e3),BD="__/auth/iframe",bD="emulator/auth/iframe",CD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ED=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ID(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wx(e,bD):`https://${t.config.authDomain}/${BD}`,r={apiKey:e.apiKey,appName:t.name,v:LA},s=ED.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${th(r).slice(1)}`}async function TD(t){const e=await xD(t),n=ri().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:ID(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CD,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ns(t,"network-request-failed"),l=ri().setTimeout(()=>{i(o)},_D.get());function c(){ri().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kD=500,ND=600,UD="_blank",FD="http://localhost";class sC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QD(t,e,n,r=kD,s=ND){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},SD),{width:r.toString(),height:s.toString(),top:i,left:o}),h=gn().toLowerCase();n&&(l=XS(h)?UD:n),$S(h)&&(e=e||FD,c.scrollbars="yes");const m=Object.entries(c).reduce((y,[B,b])=>`${y}${B}=${b},`,"");if(ej(h)&&l!=="_self")return PD(e||"",l),new sC(null);const g=window.open(e||"",l,m);Pe(g,t,"popup-blocked");try{g.focus()}catch{}return new sC(g)}function PD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="__/auth/handler",LD="emulator/auth/handler",jD=encodeURIComponent("fac");async function iC(t,e,n,r,s,i){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:LA,eventId:s};if(e instanceof bx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof sh){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await t._getAppCheckToken(),h=c?`#${jD}=${encodeURIComponent(c)}`:"";return`${DD(t)}?${th(l).slice(1)}${h}`}function DD({config:t}){return t.emulator?wx(t,LD):`https://${t.authDomain}/${RD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="webStorageSupport";class OD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mk,this._completeRedirectFn=_k,this._overrideRedirectResult=oD}async _openPopup(e,n,r,s){var i;na((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await iC(e,n,r,hw(),s);return QD(e,o,Cx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await iC(e,n,r,hw(),s);return Vj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(na(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TD(e),r=new dD(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(T0,{type:T0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[T0];o!==void 0&&n(!!o),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nk()||YS()||xx()}}const MD=OD;var aC="@firebase/auth",oC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KD(t){cs(new zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rk(t)},h=new aj(r,s,i,c);return mj(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cs(new zr("auth-internal",e=>{const n=Ai(e.getProvider("auth").getImmediate());return(r=>new HD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(aC,oC,VD(t)),zn(aC,oC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=5*60,zD=FS("authIdTokenMaxAge")||GD;let AC=null;const qD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zD)return;const s=n==null?void 0:n.token;AC!==s&&(AC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function WD(t=Wg()){const e=po(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fj(t,{popupRedirectResolver:MD,persistence:[Zj,Oj,mk]}),r=FS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=qD(i.toString());Rj(n,o,()=>o(n.currentUser)),Pj(n,l=>o(l))}}const s=kS("auth");return s&&gj(n,`http://${s}`),n}function $D(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ns("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$D().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KD("Browser");var lC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iA,bk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,C){function N(){}N.prototype=C.prototype,T.D=C.prototype,T.prototype=new N,T.prototype.constructor=T,T.C=function(Q,D,K){for(var j=Array(arguments.length-2),X=2;X<arguments.length;X++)j[X-2]=arguments[X];return C.prototype[D].apply(Q,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,C,N){N||(N=0);var Q=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)Q[D]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(D=0;16>D;++D)Q[D]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=T.g[0],N=T.g[1],D=T.g[2];var K=T.g[3],j=C+(K^N&(D^K))+Q[0]+3614090360&4294967295;C=N+(j<<7&4294967295|j>>>25),j=K+(D^C&(N^D))+Q[1]+3905402710&4294967295,K=C+(j<<12&4294967295|j>>>20),j=D+(N^K&(C^N))+Q[2]+606105819&4294967295,D=K+(j<<17&4294967295|j>>>15),j=N+(C^D&(K^C))+Q[3]+3250441966&4294967295,N=D+(j<<22&4294967295|j>>>10),j=C+(K^N&(D^K))+Q[4]+4118548399&4294967295,C=N+(j<<7&4294967295|j>>>25),j=K+(D^C&(N^D))+Q[5]+1200080426&4294967295,K=C+(j<<12&4294967295|j>>>20),j=D+(N^K&(C^N))+Q[6]+2821735955&4294967295,D=K+(j<<17&4294967295|j>>>15),j=N+(C^D&(K^C))+Q[7]+4249261313&4294967295,N=D+(j<<22&4294967295|j>>>10),j=C+(K^N&(D^K))+Q[8]+1770035416&4294967295,C=N+(j<<7&4294967295|j>>>25),j=K+(D^C&(N^D))+Q[9]+2336552879&4294967295,K=C+(j<<12&4294967295|j>>>20),j=D+(N^K&(C^N))+Q[10]+4294925233&4294967295,D=K+(j<<17&4294967295|j>>>15),j=N+(C^D&(K^C))+Q[11]+2304563134&4294967295,N=D+(j<<22&4294967295|j>>>10),j=C+(K^N&(D^K))+Q[12]+1804603682&4294967295,C=N+(j<<7&4294967295|j>>>25),j=K+(D^C&(N^D))+Q[13]+4254626195&4294967295,K=C+(j<<12&4294967295|j>>>20),j=D+(N^K&(C^N))+Q[14]+2792965006&4294967295,D=K+(j<<17&4294967295|j>>>15),j=N+(C^D&(K^C))+Q[15]+1236535329&4294967295,N=D+(j<<22&4294967295|j>>>10),j=C+(D^K&(N^D))+Q[1]+4129170786&4294967295,C=N+(j<<5&4294967295|j>>>27),j=K+(N^D&(C^N))+Q[6]+3225465664&4294967295,K=C+(j<<9&4294967295|j>>>23),j=D+(C^N&(K^C))+Q[11]+643717713&4294967295,D=K+(j<<14&4294967295|j>>>18),j=N+(K^C&(D^K))+Q[0]+3921069994&4294967295,N=D+(j<<20&4294967295|j>>>12),j=C+(D^K&(N^D))+Q[5]+3593408605&4294967295,C=N+(j<<5&4294967295|j>>>27),j=K+(N^D&(C^N))+Q[10]+38016083&4294967295,K=C+(j<<9&4294967295|j>>>23),j=D+(C^N&(K^C))+Q[15]+3634488961&4294967295,D=K+(j<<14&4294967295|j>>>18),j=N+(K^C&(D^K))+Q[4]+3889429448&4294967295,N=D+(j<<20&4294967295|j>>>12),j=C+(D^K&(N^D))+Q[9]+568446438&4294967295,C=N+(j<<5&4294967295|j>>>27),j=K+(N^D&(C^N))+Q[14]+3275163606&4294967295,K=C+(j<<9&4294967295|j>>>23),j=D+(C^N&(K^C))+Q[3]+4107603335&4294967295,D=K+(j<<14&4294967295|j>>>18),j=N+(K^C&(D^K))+Q[8]+1163531501&4294967295,N=D+(j<<20&4294967295|j>>>12),j=C+(D^K&(N^D))+Q[13]+2850285829&4294967295,C=N+(j<<5&4294967295|j>>>27),j=K+(N^D&(C^N))+Q[2]+4243563512&4294967295,K=C+(j<<9&4294967295|j>>>23),j=D+(C^N&(K^C))+Q[7]+1735328473&4294967295,D=K+(j<<14&4294967295|j>>>18),j=N+(K^C&(D^K))+Q[12]+2368359562&4294967295,N=D+(j<<20&4294967295|j>>>12),j=C+(N^D^K)+Q[5]+4294588738&4294967295,C=N+(j<<4&4294967295|j>>>28),j=K+(C^N^D)+Q[8]+2272392833&4294967295,K=C+(j<<11&4294967295|j>>>21),j=D+(K^C^N)+Q[11]+1839030562&4294967295,D=K+(j<<16&4294967295|j>>>16),j=N+(D^K^C)+Q[14]+4259657740&4294967295,N=D+(j<<23&4294967295|j>>>9),j=C+(N^D^K)+Q[1]+2763975236&4294967295,C=N+(j<<4&4294967295|j>>>28),j=K+(C^N^D)+Q[4]+1272893353&4294967295,K=C+(j<<11&4294967295|j>>>21),j=D+(K^C^N)+Q[7]+4139469664&4294967295,D=K+(j<<16&4294967295|j>>>16),j=N+(D^K^C)+Q[10]+3200236656&4294967295,N=D+(j<<23&4294967295|j>>>9),j=C+(N^D^K)+Q[13]+681279174&4294967295,C=N+(j<<4&4294967295|j>>>28),j=K+(C^N^D)+Q[0]+3936430074&4294967295,K=C+(j<<11&4294967295|j>>>21),j=D+(K^C^N)+Q[3]+3572445317&4294967295,D=K+(j<<16&4294967295|j>>>16),j=N+(D^K^C)+Q[6]+76029189&4294967295,N=D+(j<<23&4294967295|j>>>9),j=C+(N^D^K)+Q[9]+3654602809&4294967295,C=N+(j<<4&4294967295|j>>>28),j=K+(C^N^D)+Q[12]+3873151461&4294967295,K=C+(j<<11&4294967295|j>>>21),j=D+(K^C^N)+Q[15]+530742520&4294967295,D=K+(j<<16&4294967295|j>>>16),j=N+(D^K^C)+Q[2]+3299628645&4294967295,N=D+(j<<23&4294967295|j>>>9),j=C+(D^(N|~K))+Q[0]+4096336452&4294967295,C=N+(j<<6&4294967295|j>>>26),j=K+(N^(C|~D))+Q[7]+1126891415&4294967295,K=C+(j<<10&4294967295|j>>>22),j=D+(C^(K|~N))+Q[14]+2878612391&4294967295,D=K+(j<<15&4294967295|j>>>17),j=N+(K^(D|~C))+Q[5]+4237533241&4294967295,N=D+(j<<21&4294967295|j>>>11),j=C+(D^(N|~K))+Q[12]+1700485571&4294967295,C=N+(j<<6&4294967295|j>>>26),j=K+(N^(C|~D))+Q[3]+2399980690&4294967295,K=C+(j<<10&4294967295|j>>>22),j=D+(C^(K|~N))+Q[10]+4293915773&4294967295,D=K+(j<<15&4294967295|j>>>17),j=N+(K^(D|~C))+Q[1]+2240044497&4294967295,N=D+(j<<21&4294967295|j>>>11),j=C+(D^(N|~K))+Q[8]+1873313359&4294967295,C=N+(j<<6&4294967295|j>>>26),j=K+(N^(C|~D))+Q[15]+4264355552&4294967295,K=C+(j<<10&4294967295|j>>>22),j=D+(C^(K|~N))+Q[6]+2734768916&4294967295,D=K+(j<<15&4294967295|j>>>17),j=N+(K^(D|~C))+Q[13]+1309151649&4294967295,N=D+(j<<21&4294967295|j>>>11),j=C+(D^(N|~K))+Q[4]+4149444226&4294967295,C=N+(j<<6&4294967295|j>>>26),j=K+(N^(C|~D))+Q[11]+3174756917&4294967295,K=C+(j<<10&4294967295|j>>>22),j=D+(C^(K|~N))+Q[2]+718787259&4294967295,D=K+(j<<15&4294967295|j>>>17),j=N+(K^(D|~C))+Q[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+K&4294967295}r.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var N=C-this.blockSize,Q=this.B,D=this.h,K=0;K<C;){if(D==0)for(;K<=N;)s(this,T,K),K+=this.blockSize;if(typeof T=="string"){for(;K<C;)if(Q[D++]=T.charCodeAt(K++),D==this.blockSize){s(this,Q),D=0;break}}else for(;K<C;)if(Q[D++]=T[K++],D==this.blockSize){s(this,Q),D=0;break}}this.h=D,this.o+=C},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var N=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=N&255,N/=256;for(this.u(T),T=Array(16),C=N=0;4>C;++C)for(var Q=0;32>Q;Q+=8)T[N++]=this.g[C]>>>Q&255;return T};function i(T,C){var N=l;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=C(T)}function o(T,C){this.h=C;for(var N=[],Q=!0,D=T.length-1;0<=D;D--){var K=T[D]|0;Q&&K==C||(N[D]=K,Q=!1)}this.g=N}var l={};function c(T){return-128<=T&&128>T?i(T,function(C){return new o([C|0],0>C?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return S(h(-T));for(var C=[],N=1,Q=0;T>=N;Q++)C[Q]=T/N|0,N*=4294967296;return new o(C,0)}function m(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return S(m(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(C,8)),Q=g,D=0;D<T.length;D+=8){var K=Math.min(8,T.length-D),j=parseInt(T.substring(D,D+K),C);8>K?(K=h(Math.pow(C,K)),Q=Q.j(K).add(h(j))):(Q=Q.j(N),Q=Q.add(h(j)))}return Q}var g=c(0),y=c(1),B=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-S(this).m();for(var T=0,C=1,N=0;N<this.g.length;N++){var Q=this.i(N);T+=(0<=Q?Q:4294967296+Q)*C,C*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(x(this))return"-"+S(this).toString(T);for(var C=h(Math.pow(T,6)),N=this,Q="";;){var D=M(N,C).g;N=I(N,D.j(C));var K=((0<N.g.length?N.g[0]:N.h)>>>0).toString(T);if(N=D,b(N))return K+Q;for(;6>K.length;)K="0"+K;Q=K+Q}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function x(T){return T.h==-1}t.l=function(T){return T=I(this,T),x(T)?-1:b(T)?0:1};function S(T){for(var C=T.g.length,N=[],Q=0;Q<C;Q++)N[Q]=~T.g[Q];return new o(N,~T.h).add(y)}t.abs=function(){return x(this)?S(this):this},t.add=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],Q=0,D=0;D<=C;D++){var K=Q+(this.i(D)&65535)+(T.i(D)&65535),j=(K>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);Q=j>>>16,K&=65535,j&=65535,N[D]=j<<16|K}return new o(N,N[N.length-1]&-2147483648?-1:0)};function I(T,C){return T.add(S(C))}t.j=function(T){if(b(this)||b(T))return g;if(x(this))return x(T)?S(this).j(S(T)):S(S(this).j(T));if(x(T))return S(this.j(S(T)));if(0>this.l(B)&&0>T.l(B))return h(this.m()*T.m());for(var C=this.g.length+T.g.length,N=[],Q=0;Q<2*C;Q++)N[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var D=0;D<T.g.length;D++){var K=this.i(Q)>>>16,j=this.i(Q)&65535,X=T.i(D)>>>16,J=T.i(D)&65535;N[2*Q+2*D]+=j*J,E(N,2*Q+2*D),N[2*Q+2*D+1]+=K*J,E(N,2*Q+2*D+1),N[2*Q+2*D+1]+=j*X,E(N,2*Q+2*D+1),N[2*Q+2*D+2]+=K*X,E(N,2*Q+2*D+2)}for(Q=0;Q<C;Q++)N[Q]=N[2*Q+1]<<16|N[2*Q];for(Q=C;Q<2*C;Q++)N[Q]=0;return new o(N,0)};function E(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function U(T,C){this.g=T,this.h=C}function M(T,C){if(b(C))throw Error("division by zero");if(b(T))return new U(g,g);if(x(T))return C=M(S(T),C),new U(S(C.g),S(C.h));if(x(C))return C=M(T,S(C)),new U(S(C.g),C.h);if(30<T.g.length){if(x(T)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var N=y,Q=C;0>=Q.l(T);)N=H(N),Q=H(Q);var D=O(N,1),K=O(Q,1);for(Q=O(Q,2),N=O(N,2);!b(Q);){var j=K.add(Q);0>=j.l(T)&&(D=D.add(N),K=j),Q=O(Q,1),N=O(N,1)}return C=I(T,D.j(C)),new U(D,C)}for(D=g;0<=T.l(C);){for(N=Math.max(1,Math.floor(T.m()/C.m())),Q=Math.ceil(Math.log(N)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),K=h(N),j=K.j(C);x(j)||0<j.l(T);)N-=Q,K=h(N),j=K.j(C);b(K)&&(K=y),D=D.add(K),T=I(T,j)}return new U(D,T)}t.A=function(T){return M(this,T).h},t.and=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],Q=0;Q<C;Q++)N[Q]=this.i(Q)&T.i(Q);return new o(N,this.h&T.h)},t.or=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],Q=0;Q<C;Q++)N[Q]=this.i(Q)|T.i(Q);return new o(N,this.h|T.h)},t.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),N=[],Q=0;Q<C;Q++)N[Q]=this.i(Q)^T.i(Q);return new o(N,this.h^T.h)};function H(T){for(var C=T.g.length+1,N=[],Q=0;Q<C;Q++)N[Q]=T.i(Q)<<1|T.i(Q-1)>>>31;return new o(N,T.h)}function O(T,C){var N=C>>5;C%=32;for(var Q=T.g.length-N,D=[],K=0;K<Q;K++)D[K]=0<C?T.i(K+N)>>>C|T.i(K+N+1)<<32-C:T.i(K+N);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,iA=o}).apply(typeof lC<"u"?lC:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ck,Su,Ek,am,gw,Ik,Tk,Sk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,w,_){return d==Array.prototype||d==Object.prototype||(d[w]=_.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var w=0;w<d.length;++w){var _=d[w];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(d,w){if(w)e:{var _=r;d=d.split(".");for(var F=0;F<d.length-1;F++){var z=d[F];if(!(z in _))break e;_=_[z]}d=d[d.length-1],F=_[d],w=w(F),w!=F&&w!=null&&e(_,d,{configurable:!0,writable:!0,value:w})}}function i(d,w){d instanceof String&&(d+="");var _=0,F=!1,z={next:function(){if(!F&&_<d.length){var Z=_++;return{value:w(Z,d[Z]),done:!1}}return F=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(d){return d||function(){return i(this,function(w,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var w=typeof d;return w=w!="object"?w:d?Array.isArray(d)?"array":w:"null",w=="array"||w=="object"&&typeof d.length=="number"}function h(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function m(d,w,_){return d.call.apply(d.bind,arguments)}function g(d,w,_){if(!d)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,F),d.apply(w,z)}}return function(){return d.apply(w,arguments)}}function y(d,w,_){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,y.apply(null,arguments)}function B(d,w){var _=Array.prototype.slice.call(arguments,1);return function(){var F=_.slice();return F.push.apply(F,arguments),d.apply(this,F)}}function b(d,w){function _(){}_.prototype=w.prototype,d.aa=w.prototype,d.prototype=new _,d.prototype.constructor=d,d.Qb=function(F,z,Z){for(var ce=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)ce[ct-2]=arguments[ct];return w.prototype[z].apply(F,ce)}}function x(d){const w=d.length;if(0<w){const _=Array(w);for(let F=0;F<w;F++)_[F]=d[F];return _}return[]}function S(d,w){for(let _=1;_<arguments.length;_++){const F=arguments[_];if(c(F)){const z=d.length||0,Z=F.length||0;d.length=z+Z;for(let ce=0;ce<Z;ce++)d[z+ce]=F[ce]}else d.push(F)}}class I{constructor(w,_){this.i=w,this.j=_,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function E(d){return/^[\s\xa0]*$/.test(d)}function U(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function M(d){return M[" "](d),d}M[" "]=function(){};var H=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function O(d,w,_){for(const F in d)w.call(_,d[F],F,d)}function T(d,w){for(const _ in d)w.call(void 0,d[_],_,d)}function C(d){const w={};for(const _ in d)w[_]=d[_];return w}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(d,w){let _,F;for(let z=1;z<arguments.length;z++){F=arguments[z];for(_ in F)d[_]=F[_];for(let Z=0;Z<N.length;Z++)_=N[Z],Object.prototype.hasOwnProperty.call(F,_)&&(d[_]=F[_])}}function D(d){var w=1;d=d.split(":");const _=[];for(;0<w&&d.length;)_.push(d.shift()),w--;return d.length&&_.push(d.join(":")),_}function K(d){l.setTimeout(()=>{throw d},0)}function j(){var d=ae;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class X{constructor(){this.h=this.g=null}add(w,_){const F=J.get();F.set(w,_),this.h?this.h.next=F:this.g=F,this.h=F}}var J=new I(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(w,_){this.h=w,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,G=!1,ae=new X,ee=()=>{const d=l.Promise.resolve(void 0);Ae=()=>{d.then(we)}};var we=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(_){K(_)}var w=J;w.j(d),100>w.h&&(w.h++,d.next=w.g,w.g=d)}G=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};l.addEventListener("test",_,w),l.removeEventListener("test",_,w)}catch{}return d}();function he(d,w){if(me.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var _=this.type=d.type,F=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget){if(H){e:{try{M(w.nodeName);var z=!0;break e}catch{}z=!1}z||(w=null)}}else _=="mouseover"?w=d.fromElement:_=="mouseout"&&(w=d.toElement);this.relatedTarget=w,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ie[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&he.aa.h.call(this)}}b(he,me);var ie={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Nr(d,w,_,F,z){this.listener=d,this.proxy=null,this.src=w,this.type=_,this.capture=!!F,this.ha=z,this.key=++Je,this.da=this.fa=!1}function Ht(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function $n(d){this.src=d,this.g={},this.h=0}$n.prototype.add=function(d,w,_,F,z){var Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);var ce=vt(d,w,F,z);return-1<ce?(w=d[ce],_||(w.fa=!1)):(w=new Nr(w,this.src,Z,!!F,z),w.fa=_,d.push(w)),w};function Qn(d,w){var _=w.type;if(_ in d.g){var F=d.g[_],z=Array.prototype.indexOf.call(F,w,void 0),Z;(Z=0<=z)&&Array.prototype.splice.call(F,z,1),Z&&(Ht(w),d.g[_].length==0&&(delete d.g[_],d.h--))}}function vt(d,w,_,F){for(var z=0;z<d.length;++z){var Z=d[z];if(!Z.da&&Z.listener==w&&Z.capture==!!_&&Z.ha==F)return z}return-1}var xt="closure_lm_"+(1e6*Math.random()|0),et={};function un(d,w,_,F,z){if(Array.isArray(w)){for(var Z=0;Z<w.length;Z++)un(d,w[Z],_,F,z);return null}return _=KA(_),d&&d[Qe]?d.K(w,_,h(F)?!!F.capture:!1,z):_t(d,w,_,!1,F,z)}function _t(d,w,_,F,z,Z){if(!w)throw Error("Invalid event type");var ce=h(z)?!!z.capture:!!z,ct=Ps(d);if(ct||(d[xt]=ct=new $n(d)),_=ct.add(w,_,F,ce,Z),_.proxy)return _;if(F=yn(),_.proxy=F,F.src=d,F.listener=_,d.addEventListener)pe||(z=ce),z===void 0&&(z=!1),d.addEventListener(w.toString(),F,z);else if(d.attachEvent)d.attachEvent(di(w.toString()),F);else if(d.addListener&&d.removeListener)d.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return _}function yn(){function d(_){return w.call(d.src,d.listener,_)}const w=Bo;return d}function VA(d,w,_,F,z){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)VA(d,w[Z],_,F,z);else F=h(F)?!!F.capture:!!F,_=KA(_),d&&d[Qe]?(d=d.i,w=String(w).toString(),w in d.g&&(Z=d.g[w],_=vt(Z,_,F,z),-1<_&&(Ht(Z[_]),Array.prototype.splice.call(Z,_,1),Z.length==0&&(delete d.g[w],d.h--)))):d&&(d=Ps(d))&&(w=d.g[w.toString()],d=-1,w&&(d=vt(w,_,F,z)),(_=-1<d?w[d]:null)&&_o(_))}function _o(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[Qe])Qn(w.i,d);else{var _=d.type,F=d.proxy;w.removeEventListener?w.removeEventListener(_,F,d.capture):w.detachEvent?w.detachEvent(di(_),F):w.addListener&&w.removeListener&&w.removeListener(F),(_=Ps(w))?(Qn(_,d),_.h==0&&(_.src=null,w[xt]=null)):Ht(d)}}}function di(d){return d in et?et[d]:et[d]="on"+d}function Bo(d,w){if(d.da)d=!0;else{w=new he(w,this);var _=d.listener,F=d.ha||d.src;d.fa&&_o(d),d=_.call(F,w)}return d}function Ps(d){return d=d[xt],d instanceof $n?d:null}var bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function KA(d){return typeof d=="function"?d:(d[bo]||(d[bo]=function(w){return d.handleEvent(w)}),d[bo])}function Vt(){de.call(this),this.i=new $n(this),this.M=this,this.F=null}b(Vt,de),Vt.prototype[Qe]=!0,Vt.prototype.removeEventListener=function(d,w,_,F){VA(this,d,w,_,F)};function nn(d,w){var _,F=d.F;if(F)for(_=[];F;F=F.F)_.push(F);if(d=d.M,F=w.type||w,typeof w=="string")w=new me(w,d);else if(w instanceof me)w.target=w.target||d;else{var z=w;w=new me(F,d),Q(w,z)}if(z=!0,_)for(var Z=_.length-1;0<=Z;Z--){var ce=w.g=_[Z];z=Rs(ce,F,!0,w)&&z}if(ce=w.g=d,z=Rs(ce,F,!0,w)&&z,z=Rs(ce,F,!1,w)&&z,_)for(Z=0;Z<_.length;Z++)ce=w.g=_[Z],z=Rs(ce,F,!1,w)&&z}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var d=this.i,w;for(w in d.g){for(var _=d.g[w],F=0;F<_.length;F++)Ht(_[F]);delete d.g[w],d.h--}}this.F=null},Vt.prototype.K=function(d,w,_,F){return this.i.add(String(d),w,!1,_,F)},Vt.prototype.L=function(d,w,_,F){return this.i.add(String(d),w,!0,_,F)};function Rs(d,w,_,F){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();for(var z=!0,Z=0;Z<w.length;++Z){var ce=w[Z];if(ce&&!ce.da&&ce.capture==_){var ct=ce.listener,rn=ce.ha||ce.src;ce.fa&&Qn(d.i,ce),z=ct.call(rn,F)!==!1&&z}}return z&&!F.defaultPrevented}function GA(d,w,_){if(typeof d=="function")_&&(d=y(d,_));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:l.setTimeout(d,w||0)}function hi(d){d.g=GA(()=>{d.g=null,d.i&&(d.i=!1,hi(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class Pn extends de{constructor(w,_){super(),this.m=w,this.l=_,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:hi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(d){de.call(this),this.h=d,this.g={}}b(Ls,de);var Co=[];function fi(d){O(d.g,function(w,_){this.g.hasOwnProperty(_)&&_o(w)},d),d.g={}}Ls.prototype.N=function(){Ls.aa.N.call(this),fi(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mi=l.JSON.stringify,Eo=l.JSON.parse,js=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function la(){}la.prototype.h=null;function Ur(d){return d.h||(d.h=d.i())}function Io(){}var Ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ca(){me.call(this,"d")}b(ca,me);function ua(){me.call(this,"c")}b(ua,me);var Yn={},da=null;function ha(){return da=da||new Vt}Yn.La="serverreachability";function To(d){me.call(this,Yn.La,d)}b(To,me);function gi(d){const w=ha();nn(w,new To(w))}Yn.STAT_EVENT="statevent";function Os(d,w){me.call(this,Yn.STAT_EVENT,d),this.stat=w}b(Os,me);function Pt(d){const w=ha();nn(w,new Os(w,d))}Yn.Ma="timingevent";function pi(d,w){me.call(this,Yn.Ma,d),this.size=w}b(pi,me);function yi(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},w)}function Ms(){this.g=!0}Ms.prototype.xa=function(){this.g=!1};function Xn(d,w,_,F,z,Z){d.info(function(){if(d.g)if(Z)for(var ce="",ct=Z.split("&"),rn=0;rn<ct.length;rn++){var tt=ct[rn].split("=");if(1<tt.length){var ht=tt[0];tt=tt[1];var Lt=ht.split("_");ce=2<=Lt.length&&Lt[1]=="type"?ce+(ht+"="+tt+"&"):ce+(ht+"=redacted&")}}else ce=null;else ce=Z;return"XMLHTTP REQ ("+F+") [attempt "+z+"]: "+w+`
`+_+`
`+ce})}function Ee(d,w,_,F,z,Z,ce){d.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+z+"]: "+w+`
`+_+`
`+Z+" "+ce})}function fs(d,w,_,F){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+ko(d,_)+(F?" "+F:"")})}function So(d,w){d.info(function(){return"TIMEOUT: "+w})}Ms.prototype.info=function(){};function ko(d,w){if(!d.g)return w;if(!w)return null;try{var _=JSON.parse(w);if(_){for(d=0;d<_.length;d++)if(Array.isArray(_[d])){var F=_[d];if(!(2>F.length)){var z=F[1];if(Array.isArray(z)&&!(1>z.length)){var Z=z[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return mi(_)}catch{return w}}var wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hs;function Cn(){}b(Cn,la),Cn.prototype.g=function(){return new XMLHttpRequest},Cn.prototype.i=function(){return{}},Hs=new Cn;function Fr(d,w,_,F){this.j=d,this.i=w,this.l=_,this.R=F||1,this.U=new Ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zA}function zA(){this.i=null,this.g="",this.h=!1}var No={},Uo={};function ur(d,w,_){d.L=1,d.v=Zn(Bt(w)),d.m=_,d.P=!0,Kt(d,null)}function Kt(d,w){d.F=Date.now(),vi(d),d.A=Bt(d.v);var _=d.A,F=d.R;Array.isArray(F)||(F=[String(F)]),En(_.i,"t",F),d.C=0,_=d.j.J,d.h=new zA,d.g=Th(d.j,_?w:null,!d.m),0<d.O&&(d.M=new Pn(y(d.Y,d,d.g),d.O)),w=d.U,_=d.g,F=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Co[0]=z.toString()),z=Co);for(var Z=0;Z<z.length;Z++){var ce=un(_,z[Z],F||w.handleEvent,!1,w.h||w);if(!ce)break;w.g[ce.key]=ce}w=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,w)):(d.u="GET",d.g.ea(d.A,d.u,null,w)),gi(),Xn(d.i,d.u,d.A,d.l,d.R,d.m)}Fr.prototype.ca=function(d){d=d.target;const w=this.M;w&&er(d)==3?w.j():this.Y(d)},Fr.prototype.Y=function(d){try{if(d==this.g)e:{const Lt=er(this.g);var w=this.g.Ba();const va=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Gc(this.g)))){this.J||Lt!=4||w==7||(w==8||0>=va?gi(3):gi(2)),ma(this);var _=this.g.Z();this.X=_;t:if(dr(this)){var F=Gc(this.g);d="";var z=F.length,Z=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ms(this),st(this);var ce="";break t}this.h.i=new l.TextDecoder}for(w=0;w<z;w++)this.h.h=!0,d+=this.h.i.decode(F[w],{stream:!(Z&&w==z-1)});F.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,Ee(this.i,this.u,this.A,this.l,this.R,Lt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,rn=this.g;if((ct=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ct)){var tt=ct;break t}}tt=null}if(_=tt)fs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,_);else{this.o=!1,this.s=3,Pt(12),ms(this),st(this);break e}}if(this.P){_=!0;let Xt;for(;!this.J&&this.C<ce.length;)if(Xt=Yt(this,ce),Xt==Uo){Lt==4&&(this.s=4,Pt(14),_=!1),fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==No){this.s=4,Pt(15),fs(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else fs(this.i,this.l,Xt,null),xi(this,Xt);if(dr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||ce.length!=0||this.h.h||(this.s=1,Pt(16),_=!1),this.o=this.o&&_,!_)fs(this.i,this.l,ce,"[Invalid Chunked Response]"),ms(this),st(this);else if(0<ce.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),JA(ht),ht.M=!0,Pt(11))}}else fs(this.i,this.l,ce,null),xi(this,ce);Lt==4&&ms(this),this.o&&!this.J&&(Lt==4?qc(this.j,this):(this.o=!1,vi(this)))}else Hp(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),ms(this),st(this)}}}catch{}finally{}};function dr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Yt(d,w){var _=d.C,F=w.indexOf(`
`,_);return F==-1?Uo:(_=Number(w.substring(_,F)),isNaN(_)?No:(F+=1,F+_>w.length?Uo:(w=w.slice(F,F+_),d.C=F+_,w)))}Fr.prototype.cancel=function(){this.J=!0,ms(this)};function vi(d){d.S=Date.now()+d.I,Fo(d,d.I)}function Fo(d,w){if(d.B!=null)throw Error("WatchDog timer not null");d.B=yi(y(d.ba,d),w)}function ma(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Fr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(So(this.i,this.A),this.L!=2&&(gi(),Pt(17)),ms(this),this.s=2,st(this)):Fo(this,this.S-d)};function st(d){d.j.G==0||d.J||qc(d.j,d)}function ms(d){ma(d);var w=d.M;w&&typeof w.ma=="function"&&w.ma(),d.M=null,fi(d.U),d.g&&(w=d.g,d.g=null,w.abort(),w.ma())}function xi(d,w){try{var _=d.j;if(_.G!=0&&(_.g==d||He(_.h,d))){if(!d.K&&He(_.h,d)&&_.G==3){try{var F=_.Da.g.parse(w)}catch{F=null}if(Array.isArray(F)&&F.length==3){var z=F;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<d.F)tl(_),XA(_);else break e;ZA(_),Pt(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=yi(y(_.Za,_),6e3));if(1>=gs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ei(_,11)}else if((d.K||_.g==d)&&tl(_),!E(w))for(z=_.Da.g.parse(w),w=0;w<z.length;w++){let tt=z[w];if(_.T=tt[0],tt=tt[1],_.G==2)if(tt[0]=="c"){_.K=tt[1],_.ia=tt[2];const ht=tt[3];ht!=null&&(_.la=ht,_.j.info("VER="+_.la));const Lt=tt[4];Lt!=null&&(_.Aa=Lt,_.j.info("SVER="+_.Aa));const va=tt[5];va!=null&&typeof va=="number"&&0<va&&(F=1.5*va,_.L=F,_.j.info("backChannelRequestTimeoutMs_="+F)),F=_;const Xt=d.g;if(Xt){const rl=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var Z=F.h;Z.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(lt(Z,Z.h),Z.h=null))}if(F.D){const Ks=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ks&&(F.ya=Ks,Ue(F.I,F.D,Ks))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-d.F,_.j.info("Handshake RTT: "+_.R+"ms")),F=_;var ce=d;if(F.qa=nl(F,F.J?F.ia:null,F.W),ce.K){Bi(F.h,ce);var ct=ce,rn=F.L;rn&&(ct.I=rn),ct.B&&(ma(ct),vi(ct)),F.g=ce}else vs(F);0<_.i.length&&wa(_)}else tt[0]!="stop"&&tt[0]!="close"||Ei(_,7);else _.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Ei(_,7):YA(_):tt[0]!="noop"&&_.l&&_.l.ta(tt),_.v=0)}}gi(4)}catch{}}var _i=class{constructor(d,w){this.g=d,this.map=w}};function Qo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Po(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function gs(d){return d.h?1:d.g?d.g.size:0}function He(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function lt(d,w){d.g?d.g.add(w):d.h=w}function Bi(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}Qo.prototype.cancel=function(){if(this.i=ps(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ps(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const _ of d.g.values())w=w.concat(_.D);return w}return x(d.i)}function ys(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var w=[],_=d.length,F=0;F<_;F++)w.push(d[F]);return w}w=[],_=0;for(F in d)w[_++]=d[F];return w}function Ro(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var w=[];d=d.length;for(var _=0;_<d;_++)w.push(_);return w}w=[],_=0;for(const F in d)w[_++]=F;return w}}}function Le(d,w){if(d.forEach&&typeof d.forEach=="function")d.forEach(w,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,w,void 0);else for(var _=Ro(d),F=ys(d),z=F.length,Z=0;Z<z;Z++)w.call(void 0,F[Z],_&&_[Z],d)}var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qr(d,w){if(d){d=d.split("&");for(var _=0;_<d.length;_++){var F=d[_].indexOf("="),z=null;if(0<=F){var Z=d[_].substring(0,F);z=d[_].substring(F+1)}else Z=d[_];w(Z,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Se(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Se){this.h=d.h,bi(this,d.j),this.o=d.o,this.g=d.g,Yr(this,d.s),this.l=d.l;var w=d.i,_=new Re;_.i=w.i,w.g&&(_.g=new Map(w.g),_.h=w.h),Pr(this,_),this.m=d.m}else d&&(w=String(d).match(gt))?(this.h=!1,bi(this,w[1]||"",!0),this.o=hr(w[2]||""),this.g=hr(w[3]||"",!0),Yr(this,w[4]),this.l=hr(w[5]||"",!0),Pr(this,w[6]||"",!0),this.m=hr(w[7]||"")):(this.h=!1,this.i=new Re(null,this.h))}Se.prototype.toString=function(){var d=[],w=this.j;w&&d.push(fr(w,ws,!0),":");var _=this.g;return(_||w=="file")&&(d.push("//"),(w=this.o)&&d.push(fr(w,ws,!0),"@"),d.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&d.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(fr(_,_.charAt(0)=="/"?q:P,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",fr(_,Be)),d.join("")};function Bt(d){return new Se(d)}function bi(d,w,_){d.j=_?hr(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function Yr(d,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);d.s=w}else d.s=null}function Pr(d,w,_){w instanceof Re?(d.i=w,mr(d.i,d.h)):(_||(w=fr(w,ne)),d.i=new Re(w,d.h))}function Ue(d,w,_){d.i.set(w,_)}function Zn(d){return Ue(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function hr(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function fr(d,w,_){return typeof d=="string"?(d=encodeURI(d).replace(w,ga),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ga(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ws=/[#\/\?@]/g,P=/[#\?:]/g,q=/[#\?]/g,ne=/[#\?@]/g,Be=/#/g;function Re(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function Oe(d){d.g||(d.g=new Map,d.h=0,d.i&&Qr(d.i,function(w,_){d.add(decodeURIComponent(w.replace(/\+/g," ")),_)}))}t=Re.prototype,t.add=function(d,w){Oe(this),this.i=null,d=Ne(this,d);var _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(w),this.h+=1,this};function Ve(d,w){Oe(d),w=Ne(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function dn(d,w){return Oe(d),w=Ne(d,w),d.g.has(w)}t.forEach=function(d,w){Oe(this),this.g.forEach(function(_,F){_.forEach(function(z){d.call(w,z,F,this)},this)},this)},t.na=function(){Oe(this);const d=Array.from(this.g.values()),w=Array.from(this.g.keys()),_=[];for(let F=0;F<w.length;F++){const z=d[F];for(let Z=0;Z<z.length;Z++)_.push(w[F])}return _},t.V=function(d){Oe(this);let w=[];if(typeof d=="string")dn(this,d)&&(w=w.concat(this.g.get(Ne(this,d))));else{d=Array.from(this.g.values());for(let _=0;_<d.length;_++)w=w.concat(d[_])}return w},t.set=function(d,w){return Oe(this),this.i=null,d=Ne(this,d),dn(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},t.get=function(d,w){return d?(d=this.V(d),0<d.length?String(d[0]):w):w};function En(d,w,_){Ve(d,w),0<_.length&&(d.i=null,d.g.set(Ne(d,w),x(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(var _=0;_<w.length;_++){var F=w[_];const Z=encodeURIComponent(String(F)),ce=this.V(F);for(F=0;F<ce.length;F++){var z=Z;ce[F]!==""&&(z+="="+encodeURIComponent(String(ce[F]))),d.push(z)}}return this.i=d.join("&")};function Ne(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function mr(d,w){w&&!d.j&&(Oe(d),d.i=null,d.g.forEach(function(_,F){var z=F.toLowerCase();F!=z&&(Ve(this,F),En(this,z,_))},d)),d.j=w}function at(d,w){const _=new Ms;if(l.Image){const F=new Image;F.onload=B(Jn,_,"TestLoadImage: loaded",!0,w,F),F.onerror=B(Jn,_,"TestLoadImage: error",!1,w,F),F.onabort=B(Jn,_,"TestLoadImage: abort",!1,w,F),F.ontimeout=B(Jn,_,"TestLoadImage: timeout",!1,w,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=d}else w(!1)}function qA(d,w){const _=new Ms,F=new AbortController,z=setTimeout(()=>{F.abort(),Jn(_,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:F.signal}).then(Z=>{clearTimeout(z),Z.ok?Jn(_,"TestPingServer: ok",!0,w):Jn(_,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(z),Jn(_,"TestPingServer: error",!1,w)})}function Jn(d,w,_,F,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),F(_)}catch{}}function Oc(){this.g=new js}function Mc(d,w,_){const F=_||"";try{Le(d,function(z,Z){let ce=z;h(z)&&(ce=mi(z)),w.push(F+Z+"="+encodeURIComponent(ce))})}catch(z){throw w.push(F+"type="+encodeURIComponent("_badmap")),z}}function Xr(d){this.l=d.Ub||null,this.j=d.eb||!1}b(Xr,la),Xr.prototype.g=function(){return new pa(this.l,this.j)},Xr.prototype.i=function(d){return function(){return d}}({});function pa(d,w){Vt.call(this),this.D=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(pa,Vt),t=pa.prototype,t.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=w,this.readyState=1,Rr(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(w.body=d),(this.D||l).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rt(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ya(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ya(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?Rt(this):Rr(this),this.readyState==3&&ya(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Rt(this))},t.Qa=function(d){this.g&&(this.response=d,Rt(this))},t.ga=function(){this.g&&Rt(this)};function Rt(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Rr(d)}t.setRequestHeader=function(d,w){this.u.append(d,w)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var _=w.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=w.next();return d.join(`\r
`)};function Rr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Hc(d){let w="";return O(d,function(_,F){w+=F,w+=":",w+=_,w+=`\r
`}),w}function WA(d,w,_){e:{for(F in _){var F=!1;break e}F=!0}F||(_=Hc(_),typeof d=="string"?_!=null&&encodeURIComponent(String(_)):Ue(d,w,_))}function It(d){Vt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(It,Vt);var Bh=/^https?$/i,Vc=["POST","PUT"];t=It.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,w,_,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hs.g(),this.v=this.o?Ur(this.o):Ur(Hs),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(Z){bh(this,Z);return}if(d=_||"",_=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var z in F)_.set(z,F[z]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Z of F.keys())_.set(Z,F.get(Z));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Vc,w,void 0))||F||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ce]of _)this.g.setRequestHeader(Z,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gr(this),this.u=!0,this.g.send(d),this.u=!1}catch(Z){bh(this,Z)}};function bh(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.m=5,Kc(d),$A(d)}function Kc(d){d.A||(d.A=!0,nn(d,"complete"),nn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,nn(this,"complete"),nn(this,"abort"),$A(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$A(this,!0)),It.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?We(this):this.bb())},t.bb=function(){We(this)};function We(d){if(d.h&&typeof o<"u"&&(!d.v[1]||er(d)!=4||d.Z()!=2)){if(d.u&&er(d)==4)GA(d.Ea,0,d);else if(nn(d,"readystatechange"),er(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var _;if(!(_=w)){var F;if(F=ce===0){var z=String(d.D).match(gt)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),F=!Bh.test(z?z.toLowerCase():"")}_=F}if(_)nn(d,"complete"),nn(d,"success");else{d.m=6;try{var Z=2<er(d)?d.g.statusText:""}catch{Z=""}d.l=Z+" ["+d.Z()+"]",Kc(d)}}finally{$A(d)}}}}function $A(d,w){if(d.g){gr(d);const _=d.g,F=d.v[0]?()=>{}:null;d.g=null,d.v=null,w||nn(d,"ready");try{_.onreadystatechange=F}catch{}}}function gr(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function er(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),Eo(w)}};function Gc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Hp(d){const w={};d=(d.g&&2<=er(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<d.length;F++){if(E(d[F]))continue;var _=D(d[F]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=w[z]||[];w[z]=Z,Z.push(_)}T(w,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(d,w,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||w}function Ch(d){this.Aa=0,this.i=[],this.j=new Ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,d),this.cb=Ci("retryDelaySeedMs",1e4,d),this.Wa=Ci("forwardChannelMaxRetries",2,d),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Qo(d&&d.concurrentRequestLimit),this.Da=new Oc,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ch.prototype,t.la=8,t.G=1,t.connect=function(d,w,_,F){Pt(0),this.W=d,this.H=w||{},_&&F!==void 0&&(this.H.OSID=_,this.H.OAID=F),this.F=this.X,this.I=nl(this,null,this.W),wa(this)};function YA(d){if(Eh(d),d.G==3){var w=d.U++,_=Bt(d.I);if(Ue(_,"SID",d.K),Ue(_,"RID",w),Ue(_,"TYPE","terminate"),Lo(d,_),w=new Fr(d,d.j,w),w.L=2,w.v=Zn(Bt(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(w.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=w.v,_=!0),_||(w.g=Th(w.j,null),w.g.ea(w.v)),w.F=Date.now(),vi(w)}Ih(d)}function XA(d){d.g&&(JA(d),d.g.cancel(),d.g=null)}function Eh(d){XA(d),d.u&&(l.clearTimeout(d.u),d.u=null),tl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function wa(d){if(!Po(d.h)&&!d.s){d.s=!0;var w=d.Ga;Ae||ee(),G||(Ae(),G=!0),ae.add(w,d),d.B=0}}function Vp(d,w){return gs(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=w.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=yi(y(d.Ga,d,w),Wc(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new Fr(this,this.j,d);let Z=this.o;if(this.S&&(Z?(Z=C(Z),Q(Z,this.S)):Z=this.S),this.m!==null||this.O||(z.H=Z,Z=null),this.P)e:{for(var w=0,_=0;_<this.i.length;_++){t:{var F=this.i[_];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(w+=F,4096<w){w=_;break e}if(w===4096||_===this.i.length-1){w=_+1;break e}}w=1e3}else w=1e3;w=zc(this,z,w),_=Bt(this.I),Ue(_,"RID",d),Ue(_,"CVER",22),this.D&&Ue(_,"X-HTTP-Session-Id",this.D),Lo(this,_),Z&&(this.O?w="headers="+encodeURIComponent(String(Hc(Z)))+"&"+w:this.m&&WA(_,this.m,Z)),lt(this.h,z),this.Ua&&Ue(_,"TYPE","init"),this.P?(Ue(_,"$req",w),Ue(_,"SID","null"),z.T=!0,ur(z,_,null)):ur(z,_,w),this.G=2}}else this.G==3&&(d?Lr(this,d):this.i.length==0||Po(this.h)||Lr(this))};function Lr(d,w){var _;w?_=w.l:_=d.U++;const F=Bt(d.I);Ue(F,"SID",d.K),Ue(F,"RID",_),Ue(F,"AID",d.T),Lo(d,F),d.m&&d.o&&WA(F,d.m,d.o),_=new Fr(d,d.j,_,d.B+1),d.m===null&&(_.H=d.o),w&&(d.i=w.D.concat(d.i)),w=zc(d,_,1e3),_.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),lt(d.h,_),ur(_,F,w)}function Lo(d,w){d.H&&O(d.H,function(_,F){Ue(w,F,_)}),d.l&&Le({},function(_,F){Ue(w,F,_)})}function zc(d,w,_){_=Math.min(d.i.length,_);var F=d.l?y(d.l.Na,d.l,d):null;e:{var z=d.i;let Z=-1;for(;;){const ce=["count="+_];Z==-1?0<_?(Z=z[0].g,ce.push("ofs="+Z)):Z=0:ce.push("ofs="+Z);let ct=!0;for(let rn=0;rn<_;rn++){let tt=z[rn].g;const ht=z[rn].map;if(tt-=Z,0>tt)Z=Math.max(0,z[rn].g-100),ct=!1;else try{Mc(ht,ce,"req"+tt+"_")}catch{F&&F(ht)}}if(ct){F=ce.join("&");break e}}}return d=d.i.splice(0,_),w.D=d,F}function vs(d){if(!d.g&&!d.u){d.Y=1;var w=d.Fa;Ae||ee(),G||(Ae(),G=!0),ae.add(w,d),d.v=0}}function ZA(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=yi(y(d.Fa,d),Wc(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,el(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=yi(y(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),XA(this),el(this))};function JA(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function el(d){d.g=new Fr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var w=Bt(d.qa);Ue(w,"RID","rpc"),Ue(w,"SID",d.K),Ue(w,"AID",d.T),Ue(w,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ue(w,"TO",d.ja),Ue(w,"TYPE","xmlhttp"),Lo(d,w),d.m&&d.o&&WA(w,d.m,d.o),d.L&&(d.g.I=d.L);var _=d.g;d=d.ia,_.L=1,_.v=Zn(Bt(w)),_.m=null,_.P=!0,Kt(_,d)}t.Za=function(){this.C!=null&&(this.C=null,XA(this),ZA(this),Pt(19))};function tl(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function qc(d,w){var _=null;if(d.g==w){tl(d),JA(d),d.g=null;var F=2}else if(He(d.h,w))_=w.D,Bi(d.h,w),F=1;else return;if(d.G!=0){if(w.o)if(F==1){_=w.m?w.m.length:0,w=Date.now()-w.F;var z=d.B;F=ha(),nn(F,new pi(F,_)),wa(d)}else vs(d);else if(z=w.s,z==3||z==0&&0<w.X||!(F==1&&Vp(d,w)||F==2&&ZA(d)))switch(_&&0<_.length&&(w=d.h,w.i=w.i.concat(_)),z){case 1:Ei(d,5);break;case 4:Ei(d,10);break;case 3:Ei(d,6);break;default:Ei(d,2)}}}function Wc(d,w){let _=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(_*=2),_*w}function Ei(d,w){if(d.j.info("Error code "+w),w==2){var _=y(d.fb,d),F=d.Xa;const z=!F;F=new Se(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bi(F,"https"),Zn(F),z?at(F.toString(),_):qA(F.toString(),_)}else Pt(2);d.G=0,d.l&&d.l.sa(w),Ih(d),Eh(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Ih(d){if(d.G=0,d.ka=[],d.l){const w=ps(d.h);(w.length!=0||d.i.length!=0)&&(S(d.ka,w),S(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function nl(d,w,_){var F=_ instanceof Se?Bt(_):new Se(_);if(F.g!="")w&&(F.g=w+"."+F.g),Yr(F,F.s);else{var z=l.location;F=z.protocol,w=w?w+"."+z.hostname:z.hostname,z=+z.port;var Z=new Se(null);F&&bi(Z,F),w&&(Z.g=w),z&&Yr(Z,z),_&&(Z.l=_),F=Z}return _=d.D,w=d.ya,_&&w&&Ue(F,_,w),Ue(F,"VER",d.la),Lo(d,F),F}function Th(d,w,_){if(w&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Ca&&!d.pa?new It(new Xr({eb:_})):new It(d.pa),w.Ha(d.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}t=$c.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jo(){}jo.prototype.g=function(d,w){return new wn(d,w)};function wn(d,w){Vt.call(this),this.g=new Ch(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(d?d["X-WebChannel-Client-Profile"]=w.va:d={"X-WebChannel-Client-Profile":w.va}),this.g.S=d,(d=w&&w.Sb)&&!E(d)&&(this.g.m=d),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!E(w)&&(this.g.D=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new Zr(this)}b(wn,Vt),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){YA(this.g)},wn.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.u&&(_={},_.__data__=mi(d),d=_);w.i.push(new _i(w.Ya++,d)),w.G==3&&wa(w)},wn.prototype.N=function(){this.g.l=null,delete this.j,YA(this.g),delete this.g,wn.aa.N.call(this)};function Vs(d){ca.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const _ in w){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}b(Vs,ca);function Sh(){ua.call(this),this.status=1}b(Sh,ua);function Zr(d){this.g=d}b(Zr,$c),Zr.prototype.ua=function(){nn(this.g,"a")},Zr.prototype.ta=function(d){nn(this.g,new Vs(d))},Zr.prototype.sa=function(d){nn(this.g,new Sh)},Zr.prototype.ra=function(){nn(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,Sk=function(){return new jo},Tk=function(){return ha()},Ik=Yn,gw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,am=wi,fa.COMPLETE="complete",Ek=fa,Io.EventType=Ds,Ds.OPEN="a",Ds.CLOSE="b",Ds.ERROR="c",Ds.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Su=Io,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,Ck=It}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});const cC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new fx("@firebase/firestore");function _l(){return wA.logLevel}function se(t,...e){if(wA.logLevel<=Xe.DEBUG){const n=e.map(Ix);wA.debug(`Firestore (${Fc}): ${t}`,...n)}}function tn(t,...e){if(wA.logLevel<=Xe.ERROR){const n=e.map(Ix);wA.error(`Firestore (${Fc}): ${t}`,...n)}}function uc(t,...e){if(wA.logLevel<=Xe.WARN){const n=e.map(Ix);wA.warn(`Firestore (${Fc}): ${t}`,...n)}}function Ix(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${Fc}) INTERNAL ASSERTION FAILED: `+t;throw tn(e),new Error(e)}function Ie(t,e){t||be()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(On.UNAUTHENTICATED))}shutdown(){}}class XD{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new si;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new si,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new si)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new YD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new On(e)}}class ZD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ZD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new eO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=nO(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function dc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function Nk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new qe(0,0))}static max(){return new ke(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ud.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ud?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class At extends Ud{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new At(n)}static emptyPath(){return new At([])}}const rO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ud{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return rO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ue(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new ue(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(At.fromString(e))}static fromName(e){return new ge(At.fromString(e).popFirst(5))}static empty(){return new ge(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new At(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function pw(t){return t.fields.find(e=>e.kind===2)}function Ko(t){return t.fields.filter(e=>e.kind!==2)}Jm.UNKNOWN_ID=-1;class om{constructor(e,n){this.fieldPath=e,this.kind=n}}class Fd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Fd(0,qr.min())}}function Uk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new qr(s,ge.empty(),e)}function Fk(t){return new qr(t.readTime,t.key,-1)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(ke.min(),ge.empty(),-1)}static max(){return new qr(ke.max(),ge.empty(),-1)}}function Sx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==Qk)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++l,l===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new si,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Yu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=kx(r.target.error);this.V.reject(new Yu(e,s))}}static open(e,n,r,s){try{return new Zg(n,e.transaction(s,r))}catch(i){throw new Yu(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new iO(n)}}class to{constructor(e,n,r){this.name=e,this.version=n,this.p=r,to.S(gn())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),zo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hx())return!1;if(to.v())return!0;const e=gn(),n=to.S(e),r=0<n&&n<10,s=Rk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Yu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ue(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ue(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Yu(e,o))},s.onupgradeneeded=i=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=Zg.open(this.db,e,i?"readonly":"readwrite",r),c=s(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),$.reject(h))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,h=c.name!=="FirebaseError"&&o<3;if(se("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Rk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class sO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return zo(this.B.delete())}}class Yu extends ue{constructor(e,n){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function wo(t){return t.name==="IndexedDbTransactionError"}class iO{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zo(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),zo(this.store.add(e))}get(e){return zo(this.store.get(e)).next(n=>(n===void 0&&(n=null),se("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),zo(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),zo(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new $((o,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(l,c)=>{o.push(c)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new $((r,s)=>{n.onerror=i=>{const o=kx(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new $((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const c=new sO(l),h=n(l.primaryKey,l.value,c);if(h instanceof $){const m=h.catch(g=>(c.done(),$.reject(g)));r.push(m)}c.isDone?s():c.K===null?l.continue():l.continue(c.K)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zo(t){return new $((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=kx(r.target.error);n(s)}})}let uC=!1;function kx(t){const e=to.S(gn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uC||(uC=!0,setTimeout(()=>{throw r},0)),r}}return t}class aO{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){se("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{se("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){wo(n)?se("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await yo(n)}await this.X(6e4)})}}class oO{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return $.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return se("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(l=>{s-=l,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(l=>(se("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Fk(i);Sx(o,r)>0&&(r=o)}),new qr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}br.oe=-1;function Jg(t){return t==null}function Qd(t){return t===0&&1/t==-1/0}function Lk(t){return typeof t=="number"&&Number.isInteger(t)&&!Qd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dC(e)),e=AO(t.get(n),e);return dC(e)}function AO(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function dC(t){return t+""}function Ys(t){const e=t.length;if(Ie(e>=2),e===2)return Ie(t.charAt(0)===""&&t.charAt(1)===""),At.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&be(),t.charAt(o+1)){case"":const l=t.substring(i,o);let c;s.length===0?c=l:(s+=l,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:be()}i=o+2}return new At(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t,e){return[t,or(e)]}function jk(t,e,n){return[t,or(e),n]}const lO={},cO=["prefixPath","collectionGroup","readTime","documentId"],uO=["prefixPath","collectionGroup","documentId"],dO=["collectionGroup","readTime","prefixPath","documentId"],hO=["canonicalId","targetId"],fO=["targetId","path"],mO=["path","targetId"],gO=["collectionId","parent"],pO=["indexId","uid"],yO=["uid","sequenceNumber"],wO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vO=["indexId","uid","orderedDocumentKey"],xO=["userId","collectionPath","documentId"],_O=["userId","collectionPath","largestBatchId"],BO=["userId","collectionGroup","largestBatchId"],Dk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bO=[...Dk,"documentOverlays"],Ok=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mk=Ok,Nx=[...Mk,"indexConfiguration","indexState","indexEntries"],CO=Nx,EO=[...Nx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends Pk{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function pn(t,e){const n=Ce(t);return to.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jA(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new of(this.root,e,this.comparator,!1)}getReverseIterator(){return new of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new of(this.root,e,this.comparator,!0)}}class of{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Sn.RED,this.left=s??Sn.EMPTY,this.right=i??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Sn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Sn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ll(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Cr([])}unionWith(e){let n=new mt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Vk("Invalid base64 string: "+i):i}}(e);return new qt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const IO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=IO.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ao(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fx(t){const e=t.mapValue.fields.__previous_value__;return Ux(e)?Fx(e):e}function Pd(t){const e=ra(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,r,s,i,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lm={nullValue:"NULL_VALUE"};function vA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ux(t)?4:Kk(t)?9007199254740991:ep(t)?10:11:be()}function ii(t,e){if(t===e)return!0;const n=vA(t);if(n!==vA(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pd(t).isEqual(Pd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ra(s.timestampValue),l=ra(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ao(s.bytesValue).isEqual(ao(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Nt(s.doubleValue),l=Nt(i.doubleValue);return o===l?Qd(o)===Qd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return dc(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(fC(o)!==fC(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ii(o[c],l[c])))return!1;return!0}(t,e);default:return be()}}function Rd(t,e){return(t.values||[]).find(n=>ii(n,e))!==void 0}function Ao(t,e){if(t===e)return 0;const n=vA(t),r=vA(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Nt(i.integerValue||i.doubleValue),c=Nt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return gC(t.timestampValue,e.timestampValue);case 4:return gC(Pd(t),Pd(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ao(i),c=ao(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const m=je(l[h],c[h]);if(m!==0)return m}return je(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=je(Nt(i.latitude),Nt(o.latitude));return l!==0?l:je(Nt(i.longitude),Nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pC(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,m;const g=i.fields||{},y=o.fields||{},B=(l=g.value)===null||l===void 0?void 0:l.arrayValue,b=(c=y.value)===null||c===void 0?void 0:c.arrayValue,x=je(((h=B==null?void 0:B.values)===null||h===void 0?void 0:h.length)||0,((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0);return x!==0?x:pC(B,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ma.mapValue&&o===Ma.mapValue)return 0;if(i===Ma.mapValue)return 1;if(o===Ma.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const y=je(c[g],m[g]);if(y!==0)return y;const B=Ao(l[c[g]],h[m[g]]);if(B!==0)return B}return je(c.length,m.length)}(t.mapValue,e.mapValue);default:throw be()}}function gC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=ra(t),r=ra(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function pC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ao(n[s],r[s]);if(i)return i}return je(n.length,r.length)}function hc(t){return ww(t)}function ww(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ra(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ao(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ww(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ww(n.fields[o])}`;return s+"}"}(t.mapValue):be()}function Ld(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vw(t){return!!t&&"integerValue"in t}function jd(t){return!!t&&"arrayValue"in t}function yC(t){return!!t&&"nullValue"in t}function wC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cm(t){return!!t&&"mapValue"in t}function ep(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Xu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jA(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Kk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Gk={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function SO(t){return"nullValue"in t?lm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ld(oo.empty(),ge.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ep(t)?Gk:{mapValue:{}}:be()}function kO(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ld(oo.empty(),ge.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Gk:"mapValue"in t?ep(t)?{mapValue:{}}:Ma:be()}function vC(t,e){const n=Ao(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xC(t,e){const n=Ao(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(n)}setAll(e){let n=Qt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Xu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());cm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];cm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){jA(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vn(Xu(this.value))}}function zk(t){const e=[];return jA(t.fields,(n,r)=>{const s=new Qt([n]);if(cm(r)){const i=zk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new zt(e,0,ke.min(),ke.min(),ke.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,s){return new zt(e,1,n,ke.min(),r,s,0)}static newNoDocument(e,n){return new zt(e,2,n,ke.min(),ke.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,ke.min(),ke.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.position=e,this.inclusive=n}}function _C(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ge.comparator(ge.fromName(o.referenceValue),n.key):r=Ao(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function BC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n="asc"){this.field=e,this.dir=n}}function NO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{}class Ze extends qk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UO(e,n,r):n==="array-contains"?new PO(e,r):n==="in"?new Jk(e,r):n==="not-in"?new RO(e,r):n==="array-contains-any"?new LO(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FO(e,r):new QO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ao(n,this.value)):n!==null&&vA(this.value)===vA(n)&&this.matchesComparison(Ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ut extends qk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ut(e,n)}matches(e){return mc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mc(t){return t.op==="and"}function xw(t){return t.op==="or"}function Qx(t){return Wk(t)&&mc(t)}function Wk(t){for(const e of t.filters)if(e instanceof ut)return!1;return!0}function _w(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(Qx(t))return t.filters.map(e=>_w(e)).join(",");{const e=t.filters.map(n=>_w(n)).join(",");return`${t.op}(${e})`}}function $k(t,e){return t instanceof Ze?function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&ii(r.value,s.value)}(t,e):t instanceof ut?function(r,s){return s instanceof ut&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&$k(o,s.filters[l]),!0):!1}(t,e):void be()}function Yk(t,e){const n=t.filters.concat(e);return ut.create(n,t.op)}function Xk(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${hc(n.value)}`}(t):t instanceof ut?function(n){return n.op.toString()+" {"+n.getFilters().map(Xk).join(" ,")+"}"}(t):"Filter"}class UO extends Ze{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class FO extends Ze{constructor(e,n){super(e,"in",n),this.keys=Zk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QO extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=Zk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class PO extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jd(n)&&Rd(n.arrayValue,this.value)}}class Jk extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rd(this.value.arrayValue,n)}}class RO extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Rd(this.value.arrayValue,n)}}class LO extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Bw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new jO(t,e,n,r,s,i,o)}function xA(t){const e=Ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_w(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Jg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hc(r)).join(",")),e.ue=n}return e.ue}function ah(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$k(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BC(t.startAt,e.startAt)&&BC(t.endAt,e.endAt)}function eg(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function tg(t,e){return t.filters.filter(n=>n instanceof Ze&&n.field.isEqual(e))}function bC(t,e,n){let r=lm,s=!0;for(const i of tg(t,e)){let o=lm,l=!0;switch(i.op){case"<":case"<=":o=SO(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,l=!1;break;case"!=":case"not-in":o=lm}vC({value:r,inclusive:s},{value:o,inclusive:l})<0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];vC({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function CC(t,e,n){let r=Ma,s=!0;for(const i of tg(t,e)){let o=Ma,l=!0;switch(i.op){case">=":case">":o=kO(i.value),l=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,l=!1;break;case"!=":case"not-in":o=Ma}xC({value:r,inclusive:s},{value:o,inclusive:l})>0&&(r=o,s=l)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];xC({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eN(t,e,n,r,s,i,o,l){return new Qc(t,e,n,r,s,i,o,l)}function oh(t){return new Qc(t)}function EC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tN(t){return t.collectionGroup!==null}function Zu(t){const e=Ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new mt(Qt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Dd(i,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new Dd(Qt.keyField(),r))}return e.ce}function Kr(t){const e=Ce(t);return e.le||(e.le=DO(e,Zu(t))),e.le}function DO(t,e){if(t.limitType==="F")return Bw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Dd(s.field,i)});const n=t.endAt?new fc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fc(t.startAt.position,t.startAt.inclusive):null;return Bw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bw(t,e){const n=t.filters.concat([e]);return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ng(t,e,n){return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tp(t,e){return ah(Kr(t),Kr(e))&&t.limitType===e.limitType}function nN(t){return`${xA(Kr(t))}|lt:${t.limitType}`}function Bl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Xk(s)).join(", ")}]`),Jg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>hc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>hc(s)).join(",")),`Target(${r})`}(Kr(t))}; limitType=${t.limitType})`}function Ah(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ge.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Zu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=_C(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,Zu(r),s)||r.endAt&&!function(o,l,c){const h=_C(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,Zu(r),s))}(t,e)}function rN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sN(t){return(e,n)=>{let r=!1;for(const s of Zu(t)){const i=OO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function OO(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Ao(c,h):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){jA(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Hk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new wt(ge.comparator);function Mr(){return MO}const iN=new wt(ge.comparator);function ku(...t){let e=iN;for(const n of t)e=e.insert(n.key,n);return e}function aN(t){let e=iN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return Ju()}function oN(){return Ju()}function Ju(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const HO=new wt(ge.comparator),VO=new mt(ge.comparator);function Me(...t){let e=VO;for(const n of t)e=e.add(n);return e}const KO=new mt(je);function Px(){return KO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function AN(t){return{integerValue:""+t}}function GO(t,e){return Lk(e)?AN(e):Rx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this._=void 0}}function zO(t,e,n){return t instanceof gc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ux(i)&&(i=Fx(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof _A?cN(t,e):t instanceof BA?uN(t,e):function(s,i){const o=lN(s,i),l=IC(o)+IC(s.Pe);return vw(o)&&vw(s.Pe)?AN(l):Rx(s.serializer,l)}(t,e)}function qO(t,e,n){return t instanceof _A?cN(t,e):t instanceof BA?uN(t,e):n}function lN(t,e){return t instanceof Od?function(r){return vw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gc extends np{}class _A extends np{constructor(e){super(),this.elements=e}}function cN(t,e){const n=dN(e);for(const r of t.elements)n.some(s=>ii(s,r))||n.push(r);return{arrayValue:{values:n}}}class BA extends np{constructor(e){super(),this.elements=e}}function uN(t,e){let n=dN(e);for(const r of t.elements)n=n.filter(s=>!ii(s,r));return{arrayValue:{values:n}}}class Od extends np{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function IC(t){return Nt(t.integerValue||t.doubleValue)}function dN(t){return jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.field=e,this.transform=n}}function WO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof _A&&s instanceof _A||r instanceof BA&&s instanceof BA?dc(r.elements,s.elements,ii):r instanceof Od&&s instanceof Od?ii(r.Pe,s.Pe):r instanceof gc&&s instanceof gc}(t.transform,e.transform)}class $O{constructor(e,n){this.version=e,this.transformResults=n}}class Kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sp{}function hN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ip(t.key,Kn.none()):new Pc(t.key,t.data,Kn.none());{const n=t.data,r=Vn.empty();let s=new mt(Qt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Aa(t.key,r,new Cr(s.toArray()),Kn.none())}}function YO(t,e,n){t instanceof Pc?function(s,i,o){const l=s.value.clone(),c=SC(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Aa?function(s,i,o){if(!um(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=SC(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(fN(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ed(t,e,n,r){return t instanceof Pc?function(i,o,l,c){if(!um(i.precondition,o))return l;const h=i.value.clone(),m=kC(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Aa?function(i,o,l,c){if(!um(i.precondition,o))return l;const h=kC(i.fieldTransforms,c,o),m=o.data;return m.setAll(fN(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return um(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function XO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=lN(r.transform,s||null);i!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,i))}return n||null}function TC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dc(r,s,(i,o)=>WO(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pc extends sp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Aa extends sp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function SC(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,qO(o,l,n[s]))}return r}function kC(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,zO(i,o,e))}return r}class ip extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mN extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&YO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ed(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ed(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=hN(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,(n,r)=>TC(n,r))&&dc(this.baseMutations,e.baseMutations,(n,r)=>TC(n,r))}}class jx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=function(){return HO}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new jx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,nt;function JO(t){switch(t){default:return be();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0}}function gN(t){if(t===void 0)return tn("GRPC error has no .code"),te.UNKNOWN;switch(t){case an.OK:return te.OK;case an.CANCELLED:return te.CANCELLED;case an.UNKNOWN:return te.UNKNOWN;case an.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case an.INTERNAL:return te.INTERNAL;case an.UNAVAILABLE:return te.UNAVAILABLE;case an.UNAUTHENTICATED:return te.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case an.NOT_FOUND:return te.NOT_FOUND;case an.ALREADY_EXISTS:return te.ALREADY_EXISTS;case an.PERMISSION_DENIED:return te.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case an.ABORTED:return te.ABORTED;case an.OUT_OF_RANGE:return te.OUT_OF_RANGE;case an.UNIMPLEMENTED:return te.UNIMPLEMENTED;case an.DATA_LOSS:return te.DATA_LOSS;default:return be()}}(nt=an||(an={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new iA([4294967295,4294967295],0);function NC(t){const e=eM().encode(t),n=new bk;return n.update(e),new Uint8Array(n.digest())}function UC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new iA([n,r],0),new iA([s,i],0)]}class Ox{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nu(`Invalid padding: ${n}`);if(r<0)throw new Nu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=iA.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(iA.fromNumber(r)));return s.compare(tM)===1&&(s=new iA([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=NC(e),[r,s]=UC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ox(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=NC(e),[r,s]=UC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ch.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lh(ke.min(),s,new wt(je),Mr(),Me())}}class ch{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ch(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class pN{constructor(e,n){this.targetId=e,this.me=n}}class yN{constructor(e,n,r=qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class FC{constructor(){this.fe=0,this.ge=PC(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),n=Me(),r=Me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:be()}}),new ch(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=PC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mr(),this.qe=QC(),this.Qe=new wt(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(eg(i))if(r===0){const o=new ge(i.path);this.Ue(n,o,zt.newNoDocument(o,ke.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ao(r).toUint8Array()}catch(c){if(c instanceof Vk)return uc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ox(o,s,i)}catch(c){return uc(c instanceof Nu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&eg(l.target)){const c=new ge(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,zt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Me();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new lh(e,n,this.Qe,this.ke,r);return this.ke=Mr(),this.qe=QC(),this.Qe=new wt(je),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new FC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new FC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function QC(){return new wt(ge.comparator)}function PC(){return new wt(ge.comparator)}const rM={asc:"ASCENDING",desc:"DESCENDING"},sM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iM={and:"AND",or:"OR"};class aM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cw(t,e){return t.useProto3Json||Jg(e)?e:{value:e}}function pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oM(t,e){return pc(t,e.toTimestamp())}function Ar(t){return Ie(!!t),ke.fromTimestamp(function(n){const r=ra(n);return new qe(r.seconds,r.nanos)}(t))}function Mx(t,e){return Ew(t,e).canonicalString()}function Ew(t,e){const n=function(s){return new At(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vN(t){const e=At.fromString(t);return Ie(SN(e)),e}function rg(t,e){return Mx(t.databaseId,e.path)}function aA(t,e){const n=vN(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(BN(n))}function xN(t,e){return Mx(t.databaseId,e)}function _N(t){const e=vN(t);return e.length===4?At.emptyPath():BN(e)}function Iw(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BN(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function RC(t,e,n){return{name:rg(t,e),fields:n.value.mapValue.fields}}function AM(t,e,n){const r=aA(t,e.name),s=Ar(e.updateTime),i=e.createTime?Ar(e.createTime):ke.min(),o=new Vn({mapValue:{fields:e.fields}}),l=zt.newFoundDocument(r,s,i,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function lM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Ie(m===void 0||typeof m=="string"),qt.fromBase64String(m||"")):(Ie(m===void 0||m instanceof Buffer||m instanceof Uint8Array),qt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const m=h.code===void 0?te.UNKNOWN:gN(h.code);return new ue(m,h.message||"")}(o);n=new yN(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=aA(t,r.document.name),i=Ar(r.document.updateTime),o=r.document.createTime?Ar(r.document.createTime):ke.min(),l=new Vn({mapValue:{fields:r.document.fields}}),c=zt.newFoundDocument(s,i,o,l),h=r.targetIds||[],m=r.removedTargetIds||[];n=new dm(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=aA(t,r.document),i=r.readTime?Ar(r.readTime):ke.min(),o=zt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new dm([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=aA(t,r.document),i=r.removedTargetIds||[];n=new dm([],i,s,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ZO(s,i),l=r.targetId;n=new pN(l,o)}}return n}function sg(t,e){let n;if(e instanceof Pc)n={update:RC(t,e.key,e.value)};else if(e instanceof ip)n={delete:rg(t,e.key)};else if(e instanceof Aa)n={update:RC(t,e.key,e.data),updateMask:mM(e.fieldMask)};else{if(!(e instanceof mN))return be();n={verify:rg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof gc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _A)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof BA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Od)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:oM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:be()}(t,e.precondition)),n}function Tw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Kn.updateTime(Ar(i.updateTime)):i.exists!==void 0?Kn.exists(i.exists):Kn.none()}(e.currentDocument):Kn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,l){let c=null;if("setToServerValue"in l)Ie(l.setToServerValue==="REQUEST_TIME"),c=new gc;else if("appendMissingElements"in l){const m=l.appendMissingElements.values||[];c=new _A(m)}else if("removeAllFromArray"in l){const m=l.removeAllFromArray.values||[];c=new BA(m)}else"increment"in l?c=new Od(o,l.increment):be();const h=Qt.fromServerFormat(l.fieldPath);return new rp(h,c)}(t,s)):[];if(e.update){e.update.name;const s=aA(t,e.update.name),i=new Vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const h=c.fieldPaths||[];return new Cr(h.map(m=>Qt.fromServerFormat(m)))}(e.updateMask);return new Aa(s,i,o,n,r)}return new Pc(s,i,n,r)}if(e.delete){const s=aA(t,e.delete);return new ip(s,n)}if(e.verify){const s=aA(t,e.verify);return new mN(s,n)}return be()}function cM(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ar(s.updateTime):Ar(i);return o.isEqual(ke.min())&&(o=Ar(i)),new $O(o,s.transformResults||[])}(n,e))):[]}function bN(t,e){return{documents:[xN(t,e.path)]}}function CN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xN(t,s);const i=function(h){if(h.length!==0)return TN(ut.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(y){return{field:bl(y.field),direction:dM(y.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Cw(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function EN(t){let e=_N(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(g){const y=IN(g);return y instanceof ut&&Qx(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(b){return new Dd(Cl(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,Jg(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(g){const y=!!g.before,B=g.values||[];return new fc(B,y)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const y=!g.before,B=g.values||[];return new fc(B,y)}(n.endAt)),eN(e,s,o,i,l,"F",c,h)}function uM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cl(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Cl(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cl(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cl(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Cl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ut.create(n.compositeFilter.filters.map(r=>IN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function dM(t){return rM[t]}function hM(t){return sM[t]}function fM(t){return iM[t]}function bl(t){return{fieldPath:t.canonicalString()}}function Cl(t){return Qt.fromServerFormat(t.fieldPath)}function TN(t){return t instanceof Ze?function(n){if(n.op==="=="){if(wC(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NAN"}};if(yC(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wC(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NOT_NAN"}};if(yC(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(n.field),op:hM(n.op),value:n.value}}}(t):t instanceof ut?function(n){const r=n.getFilters().map(s=>TN(s));return r.length===1?r[0]:{compositeFilter:{op:fM(n.op),filters:r}}}(t):be()}function mM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,r,s,i=ke.min(),o=ke.min(),l=qt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.ct=e}}function gM(t,e){let n;if(e.document)n=AM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ge.fromSegments(e.noDocument.path),s=CA(e.noDocument.readTime);n=zt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return be();{const r=ge.fromSegments(e.unknownDocument.path),s=CA(e.unknownDocument.version);n=zt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new qe(s[0],s[1]);return ke.fromTimestamp(i)}(e.readTime)),n}function LC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ig(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:rg(i,o.key),fields:o.data.value.mapValue.fields,updateTime:pc(i,o.version.toTimestamp()),createTime:pc(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bA(e.version)};else{if(!e.isUnknownDocument())return be();r.unknownDocument={path:n.path.toArray(),version:bA(e.version)}}return r}function ig(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bA(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function CA(t){const e=new qe(t.seconds,t.nanoseconds);return ke.fromTimestamp(e)}function qo(t,e){const n=(e.baseMutations||[]).map(i=>Tw(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const l=e.mutations[i+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Tw(t.ct,i)),s=qe.fromMillis(e.localWriteTimeMs);return new Lx(e.batchId,s,n,r)}function Uu(t){const e=CA(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?CA(t.lastLimboFreeSnapshotVersion):ke.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return Ie(i.documents.length===1),Kr(oh(_N(i.documents[0])))}(t.query):function(i){return Kr(EN(i))}(t.query),new Vi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qt.fromBase64String(t.resumeToken))}function NN(t,e){const n=bA(e.snapshotVersion),r=bA(e.lastLimboFreeSnapshotVersion);let s;s=eg(e.target)?bN(t.ct,e.target):CN(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xA(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function UN(t){const e=EN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ng(e,e.limit,"L"):e}function S0(t,e){return new Dx(e.largestBatchId,Tw(t.ct,e.overlayMutation))}function jC(t,e){const n=e.path.lastSegment();return[t,or(e.path.popLast()),n]}function DC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:bA(r.readTime),documentKey:or(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{getBundleMetadata(e,n){return OC(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:CA(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return OC(e).put(function(s){return{bundleId:s.id,createTime:bA(Ar(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return MC(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:UN(i.bundledQuery),readTime:CA(i.readTime)}}(r)})}saveNamedQuery(e,n){return MC(e).put(function(s){return{name:s.name,readTime:bA(Ar(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function OC(t){return pn(t,"bundles")}function MC(t){return pn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new ap(e,r)}getOverlay(e,n){return Au(e).get(jC(this.userId,n)).next(r=>r?S0(this.serializer,r):null)}getOverlays(e,n){const r=Xs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const l=new Dx(n,o);s.push(this.ht(e,l))}),$.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(or(o.getCollectionPath())));const i=[];return s.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Au(e).j("collectionPathOverlayIndex",l))}),$.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Xs(),i=or(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Au(e).U("collectionPathOverlayIndex",o).next(l=>{for(const c of l){const h=S0(this.serializer,c);s.set(h.getKey(),h)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Xs();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Au(e).J({index:"collectionGroupOverlayIndex",range:l},(c,h,m)=>{const g=S0(this.serializer,h);i.size()<s||g.largestBatchId===o?(i.set(g.getKey(),g),o=g.largestBatchId):m.done()}).next(()=>i)}ht(e,n){return Au(e).put(function(s,i,o){const[l,c,h]=jC(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sg(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Au(t){return pn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{Pt(e){return pn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?qt.fromUint8Array(r):qt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Nt(e.integerValue));else if("doubleValue"in e){const r=Nt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Qd(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ra(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ao(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Kk(e)?this.dt(n,Number.MAX_SAFE_INTEGER):ep(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):be()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",l=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Nt(l)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),ge.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Wo.vt=new Wo;function wM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function HC(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=wM(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class vM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=HC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=HC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class xM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class _M{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class lu{constructor(){this.jt=new vM,this.Ht=new xM(this.jt),this.Jt=new _M(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $o(this.indexId,this.documentKey,this.arrayValue,r)}}function ba(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=VC(t.arrayValue,e.arrayValue),n!==0?n:(n=VC(t.directionalValue,e.directionalValue),n!==0?n:ge.comparator(t.documentKey,e.documentKey)))}function VC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.Xt=new mt((n,r)=>Qt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ie(e.collectionGroup===this.collectionId),this.nn)return!1;const n=pw(e);if(n!==void 0&&!this.sn(n))return!1;const r=Ko(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!s.has(l.field.canonicalString())){const c=r[i];if(!this.on(l,c)||!this._n(this.en[o++],c))return!1}++i}for(;i<r.length;++i){const l=r[i];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new mt(Qt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new om(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new om(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new om(r.field,r.dir==="asc"?0:1)));return new Jm(Jm.UNKNOWN_ID,this.collectionId,n,Fd.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){var e,n;if(Ie(t instanceof Ze||t instanceof ut),t instanceof Ze){if(t instanceof Jk){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Ze.create(t.field,"==",i)))||[];return ut.create(s,"or")}return t}const r=t.filters.map(s=>FN(s));return ut.create(r,t.op)}function BM(t){if(t.getFilters().length===0)return[];const e=Nw(FN(t));return Ie(QN(e)),Sw(e)||kw(e)?[e]:e.getFilters()}function Sw(t){return t instanceof Ze}function kw(t){return t instanceof ut&&Qx(t)}function QN(t){return Sw(t)||kw(t)||function(n){if(n instanceof ut&&xw(n)){for(const r of n.getFilters())if(!Sw(r)&&!kw(r))return!1;return!0}return!1}(t)}function Nw(t){if(Ie(t instanceof Ze||t instanceof ut),t instanceof Ze)return t;if(t.filters.length===1)return Nw(t.filters[0]);const e=t.filters.map(r=>Nw(r));let n=ut.create(e,t.op);return n=ag(n),QN(n)?n:(Ie(n instanceof ut),Ie(mc(n)),Ie(n.filters.length>1),n.filters.reduce((r,s)=>Hx(r,s)))}function Hx(t,e){let n;return Ie(t instanceof Ze||t instanceof ut),Ie(e instanceof Ze||e instanceof ut),n=t instanceof Ze?e instanceof Ze?function(s,i){return ut.create([s,i],"and")}(t,e):GC(t,e):e instanceof Ze?GC(e,t):function(s,i){if(Ie(s.filters.length>0&&i.filters.length>0),mc(s)&&mc(i))return Yk(s,i.getFilters());const o=xw(s)?s:i,l=xw(s)?i:s,c=o.filters.map(h=>Hx(h,l));return ut.create(c,"or")}(t,e),ag(n)}function GC(t,e){if(mc(e))return Yk(e,t.getFilters());{const n=e.filters.map(r=>Hx(t,r));return ut.create(n,"or")}}function ag(t){if(Ie(t instanceof Ze||t instanceof ut),t instanceof Ze)return t;const e=t.getFilters();if(e.length===1)return ag(e[0]);if(Wk(t))return t;const n=e.map(s=>ag(s)),r=[];return n.forEach(s=>{s instanceof Ze?r.push(s):s instanceof ut&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ut.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.un=new Vx}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(qr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class Vx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new mt(At.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Uint8Array(0);class CM{constructor(e,n){this.databaseId=n,this.cn=new Vx,this.ln=new vo(r=>xA(r),(r,s)=>ah(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:or(s)};return zC(e).put(i)}return $.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Nk(n),""],!1,!0);return zC(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Ys(o.parent))}return r})}addFieldIndex(e,n){const r=cu(e),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ul(e);return i.next(l=>{o.put(DC(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=cu(e),s=ul(e),i=cl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=cu(e),r=cl(e),s=ul(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return $.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new KC(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=cl(e);let s=!0;const i=new Map;return $.forEach(this.hn(n),o=>this.Pn(e,o).next(l=>{s&&(s=!!l),i.set(o,l)})).next(()=>{if(s){let o=Me();const l=[];return $.forEach(i,(c,h)=>{se("IndexedDbIndexManager",`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`}(c)} to execute ${xA(n)}`);const m=function(U,M){const H=pw(M);if(H===void 0)return null;for(const O of tg(U,H.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(h,c),g=function(U,M){const H=new Map;for(const O of Ko(M))for(const T of tg(U,O.fieldPath))switch(T.op){case"==":case"in":H.set(O.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return H.set(O.fieldPath.canonicalString(),T.value),Array.from(H.values())}return null}(h,c),y=function(U,M){const H=[];let O=!0;for(const T of Ko(M)){const C=T.kind===0?bC(U,T.fieldPath,U.startAt):CC(U,T.fieldPath,U.startAt);H.push(C.value),O&&(O=C.inclusive)}return new fc(H,O)}(h,c),B=function(U,M){const H=[];let O=!0;for(const T of Ko(M)){const C=T.kind===0?CC(U,T.fieldPath,U.endAt):bC(U,T.fieldPath,U.endAt);H.push(C.value),O&&(O=C.inclusive)}return new fc(H,O)}(h,c),b=this.In(c,h,y),x=this.In(c,h,B),S=this.Tn(c,h,g),I=this.En(c.indexId,m,b,y.inclusive,x,B.inclusive,S);return $.forEach(I,E=>r.G(E,n.limit).next(U=>{U.forEach(M=>{const H=ge.fromSegments(M.documentKey);o.has(H)||(o=o.add(H),l.push(H))})}))}).next(()=>l)}return $.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=BM(ut.create(e.filters,"and")).map(r=>Bw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,l){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),h=c/(n!=null?n.length:1),m=[];for(let g=0;g<c;++g){const y=n?this.dn(n[g/h]):Af,B=this.An(e,y,r[g%h],s),b=this.Rn(e,y,i[g%h],o),x=l.map(S=>this.An(e,y,S,!0));m.push(...this.createRange(B,b,x))}return m}An(e,n,r,s){const i=new $o(e,ge.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new $o(e,ge.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new KC(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const l of i)r.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return $.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let h=new mt(Qt.comparator),m=!1;for(const g of c.filters)for(const y of g.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?m=!0:h=h.add(y.field));for(const g of c.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new lu;for(const s of Ko(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);Wo.vt.It(i,o)}return r.zt()}dn(e){const n=new lu;return Wo.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new lu;return Wo.vt.It(Ld(this.databaseId,n),r.Yt(function(i){const o=Ko(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new lu);let i=0;for(const o of Ko(e)){const l=r[i++];for(const c of s)if(this.fn(n,o.fieldPath)&&jd(l))s=this.gn(s,o,l);else{const h=c.Yt(o.kind);Wo.vt.It(l,h)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const l of s){const c=new lu;c.seed(l.zt()),Wo.vt.It(o,c.Yt(n.kind)),i.push(c)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Ze&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=cu(e),s=ul(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return $.forEach(i,l=>s.get([l.indexId,this.uid]).next(c=>{o.push(function(m,g){const y=g?new Fd(g.sequenceNumber,new qr(CA(g.readTime),new ge(Ys(g.documentKey)),g.largestBatchId)):Fd.empty(),B=m.fields.map(([b,x])=>new om(Qt.fromServerFormat(b),x));return new Jm(m.indexId,m.collectionGroup,B,y)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:je(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=cu(e),i=ul(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>$.forEach(l,c=>i.put(DC(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(r.set(s.collectionGroup,l),$.forEach(l,c=>this.wn(e,s,c).next(h=>{const m=this.Sn(i,c);return h.isEqual(m)?$.resolve():this.bn(e,i,c,h,m)}))))})}Dn(e,n,r,s){return cl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return cl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=cl(e);let i=new mt(ba);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,l)=>{i=i.add(new $o(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>i)}Sn(e,n){let r=new mt(ba);const s=this.Vn(n,e);if(s==null)return r;const i=pw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(jd(o))for(const l of o.arrayValue.values||[])r=r.add(new $o(n.indexId,e.key,this.dn(l),s))}else r=r.add(new $o(n.indexId,e.key,Af,s));return r}bn(e,n,r,s,i){se("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,h,m,g,y){const B=c.getIterator(),b=h.getIterator();let x=ll(B),S=ll(b);for(;x||S;){let I=!1,E=!1;if(x&&S){const U=m(x,S);U<0?E=!0:U>0&&(I=!0)}else x!=null?E=!0:I=!0;I?(g(S),S=ll(b)):E?(y(x),x=ll(B)):(x=ll(B),S=ll(b))}}(s,i,ba,l=>{o.push(this.Dn(e,n,r,l))},l=>{o.push(this.vn(e,n,r,l))}),$.waitFor(o)}yn(e){let n=1;return ul(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>ba(o,l)).filter((o,l,c)=>!l||ba(o,c[l-1])!==0);const s=[];s.push(e);for(const o of r){const l=ba(o,e),c=ba(o,n);if(l===0)s[0]=e.Zt();else if(l>0&&c<0)s.push(o),s.push(o.Zt());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const l=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Af,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Af,[]];i.push(IDBKeyRange.bound(l,c))}return i}Cn(e,n){return ba(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qC)}getMinOffset(e,n){return $.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||be())).next(qC)}}function zC(t){return pn(t,"collectionParents")}function cl(t){return pn(t,"indexEntries")}function cu(t){return pn(t,"indexConfiguration")}function ul(t){return pn(t,"indexState")}function qC(t){Ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Sx(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new qr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wr(e,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let l=0;const c=r.J({range:o},(m,g,y)=>(l++,y.delete()));i.push(c.next(()=>{Ie(l===1)}));const h=[];for(const m of n.mutations){const g=jk(e,m.key.path,n.batchId);i.push(s.delete(g)),h.push(m.key)}return $.waitFor(i).next(()=>h)}function og(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw be();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr.DEFAULT_COLLECTION_PERCENTILE=10,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wr.DEFAULT=new wr(41943040,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wr.DISABLED=new wr(-1,0,0);class op{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){Ie(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new op(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=El(e),o=Ca(e);return o.add({}).next(l=>{Ie(typeof l=="number");const c=new Lx(l,n,r,s),h=function(B,b,x){const S=x.baseMutations.map(E=>sg(B.ct,E)),I=x.mutations.map(E=>sg(B.ct,E));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:S,mutations:I}}(this.serializer,this.userId,c),m=[];let g=new mt((y,B)=>je(y.canonicalString(),B.canonicalString()));for(const y of s){const B=jk(this.userId,y.key.path,l);g=g.add(y.key.path.popLast()),m.push(o.put(h)),m.push(i.put(B,lO))}return g.forEach(y=>{m.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),$.waitFor(m).next(()=>c)})}lookupMutationBatch(e,n){return Ca(e).get(n).next(r=>r?(Ie(r.userId===this.userId),qo(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?$.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ca(e).J({index:"userMutationsIndex",range:s},(o,l,c)=>{l.userId===this.userId&&(Ie(l.batchId>=r),i=qo(this.serializer,l)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ca(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).U("userMutationsIndex",n).next(r=>r.map(s=>qo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Am(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return El(e).J({range:s},(o,l,c)=>{const[h,m,g]=o,y=Ys(m);if(h===this.userId&&n.path.isEqual(y))return Ca(e).get(g).next(B=>{if(!B)throw be();Ie(B.userId===this.userId),i.push(qo(this.serializer,B))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(je);const s=[];return n.forEach(i=>{const o=Am(this.userId,i.path),l=IDBKeyRange.lowerBound(o),c=El(e).J({range:l},(h,m,g)=>{const[y,B,b]=h,x=Ys(B);y===this.userId&&i.path.isEqual(x)?r=r.add(b):g.done()});s.push(c)}),$.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Am(this.userId,r),o=IDBKeyRange.lowerBound(i);let l=new mt(je);return El(e).J({range:o},(c,h,m)=>{const[g,y,B]=c,b=Ys(y);g===this.userId&&r.isPrefixOf(b)?b.length===s&&(l=l.add(B)):m.done()}).next(()=>this.xn(e,l))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ca(e).get(i).next(o=>{if(o===null)throw be();Ie(o.userId===this.userId),r.push(qo(this.serializer,o))}))}),$.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return PN(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),$.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return El(e).J({range:r},(i,o,l)=>{if(i[0]===this.userId){const c=Ys(i[1]);s.push(c)}else l.done()}).next(()=>{Ie(s.length===0)})})}containsKey(e,n){return RN(e,this.userId,n)}Nn(e){return LN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function RN(t,e,n){const r=Am(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return El(t).J({range:i,H:!0},(l,c,h)=>{const[m,g,y]=l;m===e&&g===s&&(o=!0),h.done()}).next(()=>o)}function Ca(t){return pn(t,"mutations")}function El(t){return pn(t,"documentMutations")}function LN(t){return pn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new EA(0)}static kn(){return new EA(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new EA(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ke.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>dl(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Ie(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return dl(e).J((o,l)=>{const c=Uu(l);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>$.waitFor(i)).next(()=>s)}forEachTarget(e,n){return dl(e).J((r,s)=>{const i=Uu(s);n(i)})}qn(e){return $C(e).get("targetGlobalKey").next(n=>(Ie(n!==null),n))}Qn(e,n){return $C(e).put("targetGlobalKey",n)}Kn(e,n){return dl(e).put(NN(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=xA(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return dl(e).J({range:s,index:"queryTargetsIndex"},(o,l,c)=>{const h=Uu(l);ah(n,h.target)&&(i=h,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Ra(e);return n.forEach(o=>{const l=or(o.path);s.push(i.put({targetId:r,path:l})),s.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(s)}removeMatchingKeys(e,n,r){const s=Ra(e);return $.forEach(n,i=>{const o=or(i.path);return $.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Ra(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Ra(e);let i=Me();return s.J({range:r,H:!0},(o,l,c)=>{const h=Ys(o[1]),m=new ge(h);i=i.add(m)}).next(()=>i)}containsKey(e,n){const r=or(n.path),s=IDBKeyRange.bound([r],[Nk(r)],!1,!0);let i=0;return Ra(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,l],c,h)=>{o!==0&&(i++,h.done())}).next(()=>i>0)}ot(e,n){return dl(e).get(n).next(r=>r?Uu(r):null)}}function dl(t){return pn(t,"targets")}function $C(t){return pn(t,"targetGlobal")}function Ra(t){return pn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC([t,e],[n,r]){const s=je(t,n);return s===0?je(e,r):s}class IM{constructor(e){this.Un=e,this.buffer=new mt(YC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();YC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wo(n)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await yo(n)}await this.Hn(3e5)})}}class SM{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(br.oe);const r=new IM(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(WC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,l,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,o=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(r=g,l=Date.now(),this.removeTargets(e,r,n))).next(g=>(i=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),_l()<=Xe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g})))}}function kM(t,e){return new SM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n){this.db=e,this.garbageCollector=kM(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return lf(e,r)}removeReference(e,n,r){return lf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return lf(e,n)}nr(e,n){return function(s,i){let o=!1;return LN(s).Y(l=>RN(s,l,i).next(c=>(c&&(o=!0),$.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,l)=>{if(l<=n){const c=this.nr(e,o).next(h=>{if(!h)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ke.min()),Ra(e).delete(function(g){return[0,or(g.path)]}(o))))});s.push(c)}}).next(()=>$.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return lf(e,n)}tr(e,n){const r=Ra(e);let s,i=br.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:c,sequenceNumber:h})=>{o===0?(i!==br.oe&&n(new ge(Ys(s)),i),i=h,s=c):i=br.oe}).next(()=>{i!==br.oe&&n(new ge(Ys(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(t,e){return Ra(t).put(function(r,s){return{targetId:0,path:or(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Do(e).put(r)}removeEntry(e,n,r){return Do(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],ig(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=zt.newInvalidDocument(n);return Do(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:zt.newInvalidDocument(n)};return Do(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(n))},(s,i)=>{r={document:this.ir(n,i),size:og(i)}}).next(()=>r)}getEntries(e,n){let r=Mr();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Mr(),s=new wt(ge.comparator);return this._r(e,n,(i,o)=>{const l=this.ir(i,o);r=r.insert(i,l),s=s.insert(i,og(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return $.resolve();let s=new mt(JC);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(uu(s.first()),uu(s.last())),o=s.getIterator();let l=o.getNext();return Do(e).J({index:"documentKeyIndex",range:i},(c,h,m)=>{const g=ge.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&JC(l,g)<0;)r(l,null),l=o.getNext();l&&l.isEqual(g)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?m.$(uu(l)):m.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),ig(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Do(e).U(IDBKeyRange.bound(l,c,!0)).next(h=>{i==null||i.incrementDocumentReadCount(h.length);let m=Mr();for(const g of h){const y=this.ir(ge.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);y.isFoundDocument()&&(Ah(n,y)||s.has(y.key))&&(m=m.insert(y.key,y))}return m})}getAllFromCollectionGroup(e,n,r,s){let i=Mr();const o=ZC(n,r),l=ZC(n,qr.max());return Do(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(c,h,m)=>{const g=this.ir(ge.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(g.key,g),i.size===s&&m.done()}).next(()=>i)}newChangeBuffer(e){return new FM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return XC(e).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}rr(e,n){return XC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=gM(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ke.min())))return r}return zt.newInvalidDocument(e)}}function DN(t){return new UM(t)}class FM extends jN{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new vo(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new mt((i,o)=>je(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const l=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,l.readTime)),o.isValidDocument()){const c=LC(this.cr.serializer,o);s=s.add(i.path.popLast());const h=og(c);r+=h-l.size,n.push(this.cr.addEntry(e,i,c))}else if(r-=l.size,this.trackRemovals){const c=LC(this.cr.serializer,o.convertToNoDocument(ke.min()));n.push(this.cr.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function XC(t){return pn(t,"remoteDocumentGlobal")}function Do(t){return pn(t,"remoteDocumentsV14")}function uu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZC(t,e){const n=e.documentKey.path.toArray();return[t,ig(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function JC(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=je(n[i],r[i]),s)return s;return s=je(n.length,r.length),s||(s=je(n[n.length-2],r[r.length-2]),s||je(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ed(r.mutation,s,Cr.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const s=Xs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ku();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Mr();const o=Ju(),l=function(){return Ju()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Aa)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),ed(m.mutation,h,m.mutation.getFieldMask(),qe.now())):o.set(h.key,Cr.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var g;return l.set(h,new QM(m,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ju();let s=new wt((o,l)=>o-l),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||Cr.empty();m=l.applyToLocalView(h,m),r.set(c,m);const g=(s.get(l.batchId)||Me()).add(c);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,m=c.value,g=oN();m.forEach(y=>{if(!i.has(y)){const B=hN(n.get(y),r.get(y));B!==null&&g.set(y,B),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(Xs());let l=-1,c=i;return o.next(h=>$.forEach(h,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{c=c.insert(m,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,Me())).next(m=>({batchId:l,changes:aN(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let s=ku();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ku();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,c=>{const h=function(g,y){return new Qc(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,zt.newInvalidDocument(m)))});let l=ku();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&ed(m.mutation,h,Cr.empty(),qe.now()),Ah(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ar(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:UN(s.bundledQuery),readTime:Ar(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.overlays=new wt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=Xs(),i=n.length+1,o=new ge(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new wt((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=Xs(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const l=Xs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>l.set(h,m)),!(l.size()>=s)););return $.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Dx(n,r));let i=this.Ir.get(n);i===void 0&&(i=Me(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.Tr=new mt(_n.Er),this.dr=new mt(_n.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new _n(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new _n(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ge(new At([])),r=new _n(n,e),s=new _n(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new At([])),r=new _n(n,e),s=new _n(n,e+1);let i=Me();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new _n(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(_n.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lx(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new _n(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _n(n,0),s=new _n(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(je);return n.forEach(s=>{const i=new _n(s,0),o=new _n(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ge.isDocumentKey(i)||(i=i.child(""));const o=new _n(new ge(i),0);let l=new mt(je);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},o),$.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const i=new _n(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new _n(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.Mr=e,this.docs=function(){return new wt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=Mr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():zt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Mr();const o=n.path,l=new ge(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Sx(Fk(m),r)<=0||(s.has(m.key)||Ah(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){be()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OM(this)}getSize(e){return $.resolve(this.size)}}class OM extends jN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.persistence=e,this.Nr=new vo(n=>xA(n),ah),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kx,this.targetCount=0,this.kr=EA.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new EA(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new br(0),this.Kr=!1,this.Kr=!0,this.$r=new LM,this.referenceDelegate=e(this),this.Ur=new MM(this),this.indexManager=new bM,this.remoteDocumentCache=function(s){return new DM(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kN(n),this.Gr=new PM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new jM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new HM(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class HM extends Pk{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Jr=new Kx,this.Yr=null}static Zr(e){return new Ap(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=ge.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ke.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Zg("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hC,{unique:!0}),c.createObjectStore("documentMutations")}(e),eE(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=$.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),eE(e)),o=o.next(()=>function(c){const h=c.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,h){return h.store("mutations").U().next(m=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hC,{unique:!0});const g=h.store("mutations"),y=m.map(B=>g.put(B));return $.waitFor(y)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const h=c.createObjectStore("documentOverlays",{keyPath:xO});h.createIndex("collectionPathOverlayIndex",_O,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",BO,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:cO});h.createIndex("documentKeyIndex",uO),h.createIndex("collectionGroupIndex",dO)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:pO}).createIndex("sequenceNumberIndex",yO,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:wO}).createIndex("documentKeyIndex",vO,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=og(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>$.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>$.forEach(l,c=>{Ie(c.userId===i.userId);const h=qo(this.serializer,c);return PN(e,i.userId,h).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,l)=>{const c=new At(o),h=function(g){return[0,or(g)]}(c);i.push(n.get(h).next(m=>m?$.resolve():(g=>n.put({targetId:0,path:or(g),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>$.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:gO});const r=n.store("collectionParents"),s=new Vx,i=o=>{if(s.add(o)){const l=o.lastSegment(),c=o.popLast();return r.put({collectionId:l,parent:or(c)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const c=new At(o);return i(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,c],h)=>{const m=Ys(l);return i(m.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=Uu(s),o=NN(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const l=n.store("remoteDocumentsV14"),c=function(g){return g.document?new ge(At.fromString(g.document.name).popFirst(5)):g.noDocument?ge.fromSegments(g.noDocument.path):g.unknownDocument?ge.fromSegments(g.unknownDocument.path):be()}(o).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(l.put(h))}).next(()=>$.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=DN(this.serializer),i=new MN(Ap.Zr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(c=>{var h;let m=(h=l.get(c.userId))!==null&&h!==void 0?h:Me();qo(this.serializer,c).keys().forEach(g=>m=m.add(g)),l.set(c.userId,m)}),$.forEach(l,(c,h)=>{const m=new On(h),g=ap.lt(this.serializer,m),y=i.getIndexManager(m),B=op.lt(m,this.serializer,y,i.referenceDelegate);return new ON(s,B,g,y).recalculateAndSaveOverlaysForDocumentKeys(new yw(n,br.oe),c).next()})})}}function eE(t){t.createObjectStore("targetDocuments",{keyPath:fO}).createIndex("documentTargetsIndex",mO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hO,{unique:!0}),t.createObjectStore("targetGlobal")}const k0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gx{constructor(e,n,r,s,i,o,l,c,h,m,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=l,this.ci=h,this.li=m,this.hi=g,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!Gx.D())throw new ue(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NM(this,s),this.Ai=n+"main",this.serializer=new kN(c),this.Ri=new to(this.Ai,this.hi,new VM(this.serializer)),this.$r=new yM,this.Ur=new EM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DN(this.serializer),this.Gr=new pM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&tn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ue(te.FAILED_PRECONDITION,k0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new br(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(wo(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return du(e).get("owner").next(n=>$.resolve(this.vi(n)))}Ci(e){return cf(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=pn(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(l=>i.indexOf(l)===-1);return $.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):du(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ue(te.FAILED_PRECONDITION,k0);return!1}}return!(!this.networkEnabled||!this.inForeground)||cf(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(i||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&se("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new yw(e,br.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>cf(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return op.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ap.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===17?EO:c===16?CO:c===15?Nx:c===14?Mk:c===13?Ok:c===12?bO:c===11?Dk:void be()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,l=>(o=new yw(l,this.Qr?this.Qr.next():br.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ue(te.FAILED_PRECONDITION,Qk);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return du(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ue(te.FAILED_PRECONDITION,k0)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return du(e).put("owner",n)}static D(){return to.D()}bi(e){const n=du(e);return n.get("owner").next(r=>this.vi(r)?(se("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;QS()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function du(t){return pn(t,"owner")}function cf(t){return pn(t,"clientMetadata")}function HN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Me(),s=Me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QS()?8:Rk(gn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new KM;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(_l()<=Xe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Bl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(_l()<=Xe.DEBUG&&se("QueryEngine","Query:",Bl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(_l()<=Xe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Bl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(n))):$.resolve())}Yi(e,n){if(EC(n))return $.resolve(null);let r=Kr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ng(n,null,"F"),r=Kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Me(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,ng(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return EC(n)||s.isEqual(ke.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?$.resolve(null):(_l()<=Xe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bl(n)),this.rs(e,o,n,Uk(s,-1)).next(l=>l))})}ts(e,n){let r=new mt(sN(e));return n.forEach((s,i)=>{Ah(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return _l()<=Xe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Bl(n)),this.Ji.getDocumentsMatchingQuery(e,n,qr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new wt(je),this._s=new vo(i=>xA(i),ah),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ON(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function KN(t,e,n,r){return new GM(t,e,n,r)}async function GN(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Me();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){l.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function zM(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,m){const g=h.batch,y=g.keys();let B=$.resolve();return y.forEach(b=>{B=B.next(()=>m.getEntry(c,b)).next(x=>{const S=h.docVersions.get(b);Ie(S!==null),x.version.compareTo(S)<0&&(g.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),m.addEntry(x)))})}),B.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Me();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zN(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qM(t,e){const n=Ce(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((m,g)=>{const y=s.get(g);if(!y)return;l.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,g)));let B=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?B=B.withResumeToken(qt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):m.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(m.resumeToken,r)),s=s.insert(g,B),function(x,S,I){return x.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,B,m)&&l.push(n.Ur.updateTargetData(i,B))});let c=Mr(),h=Me();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(WM(i,o,e.documentUpdates).next(m=>{c=m.Ps,h=m.Is})),!r.isEqual(ke.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function WM(t,e,n){let r=Me(),s=Me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Mr();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):se("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function $M(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ag(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function yc(t,e,n){const r=Ce(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!wo(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Uw(t,e,n){const r=Ce(t);let s=ke.min(),i=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const g=Ce(c),y=g._s.get(m);return y!==void 0?$.resolve(g.os.get(y)):g.Ur.getTargetData(h,m)}(r,o,Kr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ke.min(),n?i:Me())).next(l=>($N(r,rN(e),l),{documents:l,Ts:i})))}function qN(t,e){const n=Ce(t),r=Ce(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function WN(t,e){const n=Ce(t),r=n.us.get(e)||ke.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,Uk(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>($N(n,e,s),s))}function $N(t,e,n){let r=t.us.get(e)||ke.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}function tE(t,e){return`firestore_clients_${t}_${e}`}function nE(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function N0(t,e){return`firestore_targets_${t}_${e}`}class lg{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ue(s.error.code,s.error.message))),o?new lg(e,n,s.state,i):(tn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class td{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ue(r.error.code,r.error.message))),i?new td(e,r.state,s):(tn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Px();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Lk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new cg(e,i):(tn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class qx{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new qx(n.clientId,n.onlineState):(tn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fw{constructor(){this.activeTargetIds=Px()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U0{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new wt(je),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=tE(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Fw),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(tE(this.persistenceKey,r));if(s){const i=cg.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(N0(this.persistenceKey,e));if(s){const i=td.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(N0(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return se("SharedClientState","READ",e,n),n}setItem(e,n){se("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(se("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=br.oe;if(i!=null)try{const l=JSON.parse(i);Ie(typeof l=="number"),o=l}catch(l){tn("SharedClientState","Failed to read sequence number from WebStorage",l)}return o}(n.newValue);r!==br.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new lg(this.currentUser,e,n,r),i=nE(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=nE(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=N0(this.persistenceKey,e),i=new td(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return cg.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return lg.Rs(new On(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return td.Rs(s,n)}Ls(e){return qx.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],l=[];return i.forEach(c=>{s.has(c)||o.push(c)}),s.forEach(c=>{i.has(c)||l.push(c)}),this.syncEngine.io(o,l).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Px();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class YN{constructor(){this.so=new Fw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf=null;function F0(){return uf===null?uf=function(){return 268435456+Math.round(2147483648*Math.random())}():uf++,"0x"+uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class JM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=F0(),c=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(m=>(se("RestConnection",`Received RPC '${n}' ${l}: `,m),m),m=>{throw uc("RestConnection",`RPC '${n}' ${l} failed with error: `,m,"url: ",c,"request:",s),m})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=XM[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=F0();return new Promise((o,l)=>{const c=new Ck;c.setWithCredentials(!0),c.listenOnce(Ek.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case am.NO_ERROR:const m=c.getResponseJson();se(jn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case am.TIMEOUT:se(jn,`RPC '${e}' ${i} timed out`),l(new ue(te.DEADLINE_EXCEEDED,"Request time out"));break;case am.HTTP_ERROR:const g=c.getStatus();if(se(jn,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const B=y==null?void 0:y.error;if(B&&B.status&&B.message){const b=function(S){const I=S.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(I)>=0?I:te.UNKNOWN}(B.status);l(new ue(b,B.message))}else l(new ue(te.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ue(te.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{se(jn,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);se(jn,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=F0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Sk(),l=Tk(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");se(jn,`Creating RPC '${e}' stream ${s}: ${m}`,c);const g=o.createWebChannel(m,c);let y=!1,B=!1;const b=new ZM({Io:S=>{B?se(jn,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(y||(se(jn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),se(jn,`RPC '${e}' stream ${s} sending:`,S),g.send(S))},To:()=>g.close()}),x=(S,I,E)=>{S.listen(I,U=>{try{E(U)}catch(M){setTimeout(()=>{throw M},0)}})};return x(g,Su.EventType.OPEN,()=>{B||(se(jn,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),x(g,Su.EventType.CLOSE,()=>{B||(B=!0,se(jn,`RPC '${e}' stream ${s} transport closed`),b.So())}),x(g,Su.EventType.ERROR,S=>{B||(B=!0,uc(jn,`RPC '${e}' stream ${s} transport errored:`,S),b.So(new ue(te.UNAVAILABLE,"The operation could not be completed")))}),x(g,Su.EventType.MESSAGE,S=>{var I;if(!B){const E=S.data[0];Ie(!!E);const U=E,M=U.error||((I=U[0])===null||I===void 0?void 0:I.error);if(M){se(jn,`RPC '${e}' stream ${s} received error:`,M);const H=M.status;let O=function(N){const Q=an[N];if(Q!==void 0)return gN(Q)}(H),T=M.message;O===void 0&&(O=te.INTERNAL,T="Unknown error status: "+H+" with message "+M.message),B=!0,b.So(new ue(O,T)),g.close()}else se(jn,`RPC '${e}' stream ${s} received:`,E),b.bo(E)}}),x(l,Ik.STAT_EVENT,S=>{S.stat===gw.PROXY?se(jn,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===gw.NOPROXY&&se(jn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return typeof window<"u"?window:null}function hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t){return new aM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(tn(n.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ue(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eH extends JN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=lM(this.serializer,e),r=function(i){if(!("targetChange"in i))return ke.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?Ar(o.readTime):ke.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Iw(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=eg(c)?{documents:bN(i,c)}:{query:CN(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=wN(i,o.resumeToken);const h=Cw(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ke.min())>0){l.readTime=pc(i,o.snapshotVersion.toTimestamp());const h=Cw(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=uM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Iw(this.serializer),n.removeTarget=e,this.a_(n)}}class tH extends JN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cM(e.writeResults,e.commitTime),r=Ar(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Iw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sg(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ew(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ue(te.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Ew(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(te.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tn(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{DA(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=Ce(c);h.L_.add(4),await uh(h),h.q_.set("Unknown"),h.L_.delete(4),await cp(h)}(this))})}),this.q_=new rH(r,s)}}async function cp(t){if(DA(t))for(const e of t.B_)await e(!0)}async function uh(t){for(const e of t.B_)await e(!1)}function up(t,e){const n=Ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Yx(n)?$x(n):Lc(n).r_()&&Wx(n,e))}function wc(t,e){const n=Ce(t),r=Lc(n);n.N_.delete(e),r.r_()&&e2(n,e),n.N_.size===0&&(r.r_()?r.o_():DA(n)&&n.q_.set("Unknown"))}function Wx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lc(t).A_(e)}function e2(t,e){t.Q_.xe(e),Lc(t).R_(e)}function $x(t){t.Q_=new nM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Lc(t).start(),t.q_.v_()}function Yx(t){return DA(t)&&!Lc(t).n_()&&t.N_.size>0}function DA(t){return Ce(t).L_.size===0}function t2(t){t.Q_=void 0}async function iH(t){t.q_.set("Online")}async function aH(t){t.N_.forEach((e,n)=>{Wx(t,e)})}async function oH(t,e){t2(t),Yx(t)?(t.q_.M_(e),$x(t)):t.q_.set("Unknown")}async function AH(t,e,n){if(t.q_.set("Online"),e instanceof yN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ug(t,r)}else if(e instanceof dm?t.Q_.Ke(e):e instanceof pN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ke.min()))try{const r=await zN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.N_.get(h);m&&i.N_.set(h,m.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const m=i.N_.get(c);if(!m)return;i.N_.set(c,m.withResumeToken(qt.EMPTY_BYTE_STRING,m.snapshotVersion)),e2(i,c);const g=new Vi(m.target,c,h,m.sequenceNumber);Wx(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await ug(t,r)}}async function ug(t,e,n){if(!wo(e))throw e;t.L_.add(1),await uh(t),t.q_.set("Offline"),n||(n=()=>zN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await cp(t)})}function n2(t,e){return e().catch(n=>ug(t,n,e))}async function Rc(t){const e=Ce(t),n=lo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lH(e);)try{const s=await $M(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,cH(e,s)}catch(s){await ug(e,s)}r2(e)&&s2(e)}function lH(t){return DA(t)&&t.O_.length<10}function cH(t,e){t.O_.push(e);const n=lo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function r2(t){return DA(t)&&!lo(t).n_()&&t.O_.length>0}function s2(t){lo(t).start()}async function uH(t){lo(t).p_()}async function dH(t){const e=lo(t);for(const n of t.O_)e.m_(n.mutations)}async function hH(t,e,n){const r=t.O_.shift(),s=jx.from(r,e,n);await n2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rc(t)}async function fH(t,e){e&&lo(t).V_&&await async function(r,s){if(function(o){return JO(o)&&o!==te.ABORTED}(s.code)){const i=r.O_.shift();lo(r).s_(),await n2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rc(r)}}(t,e),r2(t)&&s2(t)}async function sE(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=DA(n);n.L_.add(3),await uh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await cp(n)}async function Qw(t,e){const n=Ce(t);e?(n.L_.delete(2),await cp(n)):e||(n.L_.add(2),await uh(n),n.q_.set("Unknown"))}function Lc(t){return t.K_||(t.K_=function(n,r,s){const i=Ce(n);return i.w_(),new eH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:iH.bind(null,t),Ro:aH.bind(null,t),mo:oH.bind(null,t),d_:AH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yx(t)?$x(t):t.q_.set("Unknown")):(await t.K_.stop(),t2(t))})),t.K_}function lo(t){return t.U_||(t.U_=function(n,r,s){const i=Ce(n);return i.w_(),new tH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uH.bind(null,t),mo:fH.bind(null,t),f_:dH.bind(null,t),g_:hH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rc(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Xx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zx(t,e){if(tn("AsyncQueue",`${e}: ${t}`),wo(t))return new ue(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=ku(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new Zl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.W_=new wt(ge.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class vc{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new vc(e,n,Zl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class gH{constructor(){this.queries=aE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ce(n),i=s.queries;s.queries=aE(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new ue(te.ABORTED,"Firestore shutting down"))}}function aE(){return new vo(t=>nN(t),tp)}async function Jx(t,e){const n=Ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new mH,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Zx(o,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&t_(n)}async function e_(t,e){const n=Ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pH(t,e){const n=Ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&t_(n)}function yH(t,e,n){const r=Ce(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function t_(t){t.Y_.forEach(e=>{e.next()})}var Pw,oE;(oE=Pw||(Pw={})).ea="default",oE.Cache="cache";class n_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.key=e}}class a2{constructor(e){this.key=e}}class wH{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=sN(e),this.Ra=new Zl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iE,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const y=s.get(m),B=Ah(this.query,g)?g:null,b=!!y&&this.mutatedKeys.has(y.key),x=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let S=!1;y&&B?y.data.isEqual(B.data)?b!==x&&(r.track({type:3,doc:B}),S=!0):this.ga(y,B)||(r.track({type:2,doc:B}),S=!0,(c&&this.Aa(B,c)>0||h&&this.Aa(B,h)<0)&&(l=!0)):!y&&B?(r.track({type:0,doc:B}),S=!0):y&&!B&&(r.track({type:1,doc:y}),S=!0,(c||h)&&(l=!0)),S&&(B?(o=o.add(B),i=x?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,g)=>function(B,b){const x=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return x(B)-x(b)}(m.type,g.type)||this.Aa(m.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new vc(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new a2(r))}),this.da.forEach(r=>{e.has(r)||n.push(new i2(r))}),n}ba(e){this.Ta=e.Ts,this.da=Me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return vc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class vH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xH{constructor(e){this.key=e,this.va=!1}}class _H{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vo(l=>nN(l),tp),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(ge.comparator),this.Na=new Map,this.La=new Kx,this.Ba={},this.ka=new Map,this.qa=EA.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BH(t,e,n=!0){const r=dp(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await o2(r,e,n,!0),s}async function bH(t,e){const n=dp(t);await o2(n,e,!0,!1)}async function o2(t,e,n,r){const s=await Ag(t.localStore,Kr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await r_(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&up(t.remoteStore,s),l}async function r_(t,e,n,r,s){t.Ka=(g,y,B)=>async function(x,S,I,E){let U=S.view.ma(I);U.ns&&(U=await Uw(x.localStore,S.query,!1).then(({documents:T})=>S.view.ma(T,U)));const M=E&&E.targetChanges.get(S.targetId),H=E&&E.targetMismatches.get(S.targetId)!=null,O=S.view.applyChanges(U,x.isPrimaryClient,M,H);return Rw(x,S.targetId,O.wa),O.snapshot}(t,g,y,B);const i=await Uw(t.localStore,e,!0),o=new wH(e,i.Ts),l=o.ma(i.documents),c=ch.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);Rw(t,n,h.wa);const m=new vH(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function CH(t,e,n){const r=Ce(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!tp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await yc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wc(r.remoteStore,s.targetId),xc(r,s.targetId)}).catch(yo)):(xc(r,s.targetId),await yc(r.localStore,s.targetId,!0))}async function EH(t,e){const n=Ce(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wc(n.remoteStore,r.targetId))}async function IH(t,e,n){const r=o_(t);try{const s=await function(o,l){const c=Ce(o),h=qe.now(),m=l.reduce((B,b)=>B.add(b.key),Me());let g,y;return c.persistence.runTransaction("Locally write mutations","readwrite",B=>{let b=Mr(),x=Me();return c.cs.getEntries(B,m).next(S=>{b=S,b.forEach((I,E)=>{E.isValidDocument()||(x=x.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(B,b)).next(S=>{g=S;const I=[];for(const E of l){const U=XO(E,g.get(E.key).overlayedDocument);U!=null&&I.push(new Aa(E.key,U,zk(U.value.mapValue),Kn.exists(!0)))}return c.mutationQueue.addMutationBatch(B,h,I,l)}).next(S=>{y=S;const I=S.applyToLocalDocumentSet(g,x);return c.documentOverlayCache.saveOverlays(B,S.batchId,I)})}).then(()=>({batchId:y.batchId,changes:aN(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new wt(je)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await xo(r,s.changes),await Rc(r.remoteStore)}catch(s){const i=Zx(s,"Failed to persist write");n.reject(i)}}async function A2(t,e){const n=Ce(t);try{const r=await qM(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ie(o.va):s.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await xo(n,r,e)}catch(r){await yo(r)}}function AE(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Ce(o);c.onlineState=l;let h=!1;c.queries.forEach((m,g)=>{for(const y of g.j_)y.Z_(l)&&(h=!0)}),h&&t_(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TH(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new wt(ge.comparator);o=o.insert(i,zt.newNoDocument(i,ke.min()));const l=Me().add(i),c=new lh(ke.min(),new Map,new wt(je),o,l);await A2(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),a_(r)}else await yc(r.localStore,e,!1).then(()=>xc(r,e,n)).catch(yo)}async function SH(t,e){const n=Ce(t),r=e.batch.batchId;try{const s=await zM(n.localStore,e);i_(n,r,null),s_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xo(n,s)}catch(s){await yo(s)}}async function kH(t,e,n){const r=Ce(t);try{const s=await function(o,l){const c=Ce(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,l).next(g=>(Ie(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);i_(r,e,n),s_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xo(r,s)}catch(s){await yo(s)}}function s_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function i_(t,e,n){const r=Ce(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function xc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||l2(t,r)})}function l2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(wc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),a_(t))}function Rw(t,e,n){for(const r of n)r instanceof i2?(t.La.addReference(r.key,e),NH(t,r)):r instanceof a2?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||l2(t,r.key)):be()}function NH(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),a_(t))}function a_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(At.fromString(e)),r=t.qa.next();t.Na.set(r,new xH(n)),t.Oa=t.Oa.insert(n,r),up(t.remoteStore,new Vi(Kr(oh(n.path)),r,"TargetPurposeLimboResolution",br.oe))}}async function xo(t,e,n){const r=Ce(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){s.push(h);const g=zx.Wi(c.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const m=Ce(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>$.forEach(h,y=>$.forEach(y.$i,B=>m.persistence.referenceDelegate.addReference(g,y.targetId,B)).next(()=>$.forEach(y.Ui,B=>m.persistence.referenceDelegate.removeReference(g,y.targetId,B)))))}catch(g){if(!wo(g))throw g;se("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const B=m.os.get(y),b=B.snapshotVersion,x=B.withLastLimboFreeSnapshotVersion(b);m.os=m.os.insert(y,x)}}}(r.localStore,i))}async function UH(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await GN(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new ue(te.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xo(n,r.hs)}}function FH(t,e){const n=Ce(t),r=n.Na.get(e);if(r&&r.va)return Me().add(r.key);{let s=Me();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}async function QH(t,e){const n=Ce(t),r=await Uw(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&Rw(n,e.targetId,s.wa),s}async function PH(t,e){const n=Ce(t);return WN(n.localStore,e).then(r=>xo(n,r))}async function RH(t,e,n,r){const s=Ce(t),i=await function(l,c){const h=Ce(l),m=Ce(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>m.Mn(g,c).next(y=>y?h.localDocuments.getDocuments(g,y):$.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Rc(s.remoteStore):n==="acknowledged"||n==="rejected"?(i_(s,e,r||null),s_(s,e),function(l,c){Ce(Ce(l).mutationQueue).On(c)}(s.localStore,e)):be(),await xo(s,i)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function LH(t,e){const n=Ce(t);if(dp(n),o_(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await lE(n,r.toArray());n.Qa=!0,await Qw(n.remoteStore,!0);for(const i of s)up(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(xc(n,o),yc(n.localStore,o,!0))),wc(n.remoteStore,o)}),await s,await lE(n,r),function(o){const l=Ce(o);l.Na.forEach((c,h)=>{wc(l.remoteStore,h)}),l.La.pr(),l.Na=new Map,l.Oa=new wt(ge.comparator)}(n),n.Qa=!1,await Qw(n.remoteStore,!1)}}async function lE(t,e,n){const r=Ce(t),s=[],i=[];for(const o of e){let l;const c=r.Ma.get(o);if(c&&c.length!==0){l=await Ag(r.localStore,Kr(c[0]));for(const h of c){const m=r.Fa.get(h),g=await QH(r,m);g.snapshot&&i.push(g.snapshot)}}else{const h=await qN(r.localStore,o);l=await Ag(r.localStore,h),await r_(r,c2(h),o,!1,l.resumeToken)}s.push(l)}return r.Ca.d_(i),s}function c2(t){return eN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jH(t){return function(n){return Ce(Ce(n).persistence).Qi()}(Ce(t).localStore)}async function DH(t,e,n,r){const s=Ce(t);if(s.Qa)return void se("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await WN(s.localStore,rN(i[0])),l=lh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",qt.EMPTY_BYTE_STRING);await xo(s,o,l);break}case"rejected":await yc(s.localStore,e,!0),xc(s,e,r);break;default:be()}}async function OH(t,e,n){const r=dp(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){se("SyncEngine","Adding an already active target "+s);continue}const i=await qN(r.localStore,s),o=await Ag(r.localStore,i);await r_(r,c2(i),o.targetId,!1,o.resumeToken),up(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await yc(r.localStore,s,!1).then(()=>{wc(r.remoteStore,s),xc(r,s)}).catch(yo)}}function dp(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=A2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TH.bind(null,e),e.Ca.d_=pH.bind(null,e.eventManager),e.Ca.$a=yH.bind(null,e.eventManager),e}function o_(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kH.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return KN(this.persistence,new VN,e.initialUser,this.serializer)}Ga(e){return new MN(Ap.Zr,this.serializer)}Wa(e){return new YN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class u2 extends Md{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await o_(this.Ja.syncEngine),await Rc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return KN(this.persistence,new VN,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new TM(r,e.asyncQueue,n)}Ha(e,n){const r=new oO(n,this.persistence);return new aO(e.asyncQueue,r)}Ga(e){const n=HN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new Gx(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,XN(),hm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new YN}}class MH extends u2{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof U0&&(this.sharedClientState.syncEngine={no:RH.bind(null,n),ro:DH.bind(null,n),io:OH.bind(null,n),Qi:jH.bind(null,n),eo:PH.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await LH(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=XN();if(!U0.D(n))throw new ue(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new U0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Hd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>AE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UH.bind(null,this.syncEngine),await Qw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gH}()}createDatastore(e){const n=lp(e.databaseInfo.databaseId),r=function(i){return new JM(i)}(e.databaseInfo);return function(i,o,l,c){return new nH(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new sH(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>AE(this.syncEngine,n,0),function(){return rE.D()?new rE:new YM}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,m){const g=new _H(s,i,o,l,c,h);return m&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ce(s);se("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await uh(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=On.UNAUTHENTICATED,this.clientId=Tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Q0(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await GN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VH(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sE(e.remoteStore,s)),t._onlineComponents=e}async function VH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Q0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;uc("Error using user provided cache. Falling back to memory cache: "+n),await Q0(t,new Md)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Q0(t,new Md);return t._offlineComponents}async function d2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await cE(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await cE(t,new Hd))),t._onlineComponents}function KH(t){return d2(t).then(e=>e.syncEngine)}async function dg(t){const e=await d2(t),n=e.eventManager;return n.onListen=BH.bind(null,e.syncEngine),n.onUnlisten=CH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EH.bind(null,e.syncEngine),n}function GH(t,e,n={}){const r=new si;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const m=new A_({next:y=>{m.Za(),o.enqueueAndForget(()=>e_(i,g));const B=y.docs.has(l);!B&&y.fromCache?h.reject(new ue(te.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&y.fromCache&&c&&c.source==="server"?h.reject(new ue(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new n_(oh(l.path),m,{includeMetadataChanges:!0,_a:!0});return Jx(i,g)}(await dg(t),t.asyncQueue,e,n,r)),r.promise}function zH(t,e,n={}){const r=new si;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const m=new A_({next:y=>{m.Za(),o.enqueueAndForget(()=>e_(i,g)),y.fromCache&&c.source==="server"?h.reject(new ue(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new n_(l,m,{includeMetadataChanges:!0,_a:!0});return Jx(i,g)}(await dg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e,n){if(!n)throw new ue(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m2(t,e,n,r){if(e===!0&&r===!0)throw new ue(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dE(t){if(!ge.isDocumentKey(t))throw new ue(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hE(t){if(ge.isDocumentKey(t))throw new ue(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function Sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hp(t);throw new ue(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class l_{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kk;switch(r.type){case"firstParty":return new JD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uE.get(n);r&&(se("ComponentProvider","Removing Datastore"),uE.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new li(this.firestore,e,this._query)}}class Un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class $i extends li{constructor(e,n,r){super(e,n,oh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new ge(e))}withConverter(e){return new $i(this.firestore,e,this._path)}}function cn(t,e,...n){if(t=it(t),f2("collection","path",e),t instanceof l_){const r=At.fromString(e,...n);return hE(r),new $i(t,null,r)}{if(!(t instanceof Un||t instanceof $i))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return hE(r),new $i(t.firestore,null,r)}}function ze(t,e,...n){if(t=it(t),arguments.length===1&&(e=Tx.newId()),f2("doc","path",e),t instanceof l_){const r=At.fromString(e,...n);return dE(r),new Un(t,null,new ge(r))}{if(!(t instanceof Un||t instanceof $i))throw new ue(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return dE(r),new Un(t.firestore,t instanceof $i?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ZN(this,"async_queue_retry"),this.Vu=()=>{const r=hm();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new si;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wo(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw tn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Xx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ai extends l_{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mE(e),this._firestoreClient=void 0,await e}}}function g2(t,e,n){const r=po(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(gA(i,e))return s;throw new ue(te.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ue(te.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function dh(t){if(t._terminated)throw new ue(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qH(t),t._firestoreClient}function qH(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,m){return new TO(l,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,h2(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new HH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new IA(qt.fromBase64String(e))}catch(n){throw new ue(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new IA(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH=/^__.*__$/;class $H{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pc(e,this.data,n,this.fieldTransforms)}}class p2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class gp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(y2(this.Cu)&&WH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class YH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lp(e)}Qu(e,n,r,s=!1){return new gp({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pp(t){const e=t._freezeSettings(),n=lp(t._databaseId);return new YH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function w2(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);h_("Data must be an object, but it was:",o,r);const l=x2(r,o);let c,h;if(i.merge)c=new Cr(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const g of i.mergeFields){const y=Lw(e,g,n);if(!o.contains(y))throw new ue(te.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);B2(m,y)||m.push(y)}c=new Cr(m),h=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=o.fieldTransforms;return new $H(new Vn(l),c,h)}class yp extends OA{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yp}}function v2(t,e,n){return new gp({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class c_ extends OA{_toFieldTransform(e){return new rp(e.path,new gc)}isEqual(e){return e instanceof c_}}class u_ extends OA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=v2(this,e,!0),r=this.Ku.map(i=>MA(i,n)),s=new _A(r);return new rp(e.path,s)}isEqual(e){return e instanceof u_&&gA(this.Ku,e.Ku)}}class d_ extends OA{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=v2(this,e,!0),r=this.Ku.map(i=>MA(i,n)),s=new BA(r);return new rp(e.path,s)}isEqual(e){return e instanceof d_&&gA(this.Ku,e.Ku)}}function XH(t,e,n,r){const s=t.Qu(1,e,n);h_("Data must be an object, but it was:",s,r);const i=[],o=Vn.empty();jA(r,(c,h)=>{const m=f_(e,c,n);h=it(h);const g=s.Nu(m);if(h instanceof yp)i.push(m);else{const y=MA(h,g);y!=null&&(i.push(m),o.set(m,y))}});const l=new Cr(i);return new p2(o,l,s.fieldTransforms)}function ZH(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Lw(e,r,n)],c=[s];if(i.length%2!=0)throw new ue(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)l.push(Lw(e,i[y])),c.push(i[y+1]);const h=[],m=Vn.empty();for(let y=l.length-1;y>=0;--y)if(!B2(h,l[y])){const B=l[y];let b=c[y];b=it(b);const x=o.Nu(B);if(b instanceof yp)h.push(B);else{const S=MA(b,x);S!=null&&(h.push(B),m.set(B,S))}}const g=new Cr(h);return new p2(m,g,o.fieldTransforms)}function JH(t,e,n,r=!1){return MA(n,t.Qu(r?4:3,e))}function MA(t,e){if(_2(t=it(t)))return h_("Unsupported field value:",e,t),x2(t,e);if(t instanceof OA)return function(r,s){if(!y2(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=MA(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:pc(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pc(s.serializer,i)}}if(r instanceof fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof IA)return{bytesValue:wN(s.serializer,r._byteString)};if(r instanceof Un){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Rx(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${hp(r)}`)}(t,e)}function x2(t,e){const n={};return Hk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jA(t,(r,s)=>{const i=MA(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function _2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof fp||t instanceof IA||t instanceof Un||t instanceof OA||t instanceof mp)}function h_(t,e,n){if(!_2(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=hp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Lw(t,e,n){if((e=it(e))instanceof hh)return e._internalPath;if(typeof e=="string")return f_(t,e);throw hg("Field path arguments must be of type string or ",t,!1,void 0,n)}const eV=new RegExp("[~\\*/\\[\\]]");function f_(t,e,n){if(e.search(eV)>=0)throw hg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hh(...e.split("."))._internalPath}catch{throw hg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hg(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ue(te.INVALID_ARGUMENT,l+t+c)}function B2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tV extends b2{data(){return super.data()}}function wp(t,e){return typeof e=="string"?f_(t,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m_{}class vp extends m_{}function HA(t,e,...n){let r=[];e instanceof m_&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof xp).length,l=i.filter(c=>c instanceof fh).length;if(o>1||o>0&&l>0)throw new ue(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fh extends vp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fh(e,n,r)}_apply(e){const n=this._parse(e);return I2(e._query,n),new li(e.firestore,e.converter,bw(e._query,n))}_parse(e){const n=pp(e.firestore);return function(i,o,l,c,h,m,g){let y;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ue(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){yE(g,m);const B=[];for(const b of g)B.push(pE(c,i,b));y={arrayValue:{values:B}}}else y=pE(c,i,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||yE(g,m),y=JH(l,o,g,m==="in"||m==="not-in");return Ze.create(h,m,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mh(t,e,n){const r=e,s=wp("where",t);return fh._create(s,r,n)}class xp extends m_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ut.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)I2(o,c),o=bw(o,c)}(e._query,n),new li(e.firestore,e.converter,bw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _p extends vp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _p(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dd(i,o)}(e._query,this._field,this._direction);return new li(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Qc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function g_(t,e="asc"){const n=e,r=wp("orderBy",t);return _p._create(r,n)}class Bp extends vp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bp(e,n,r)}_apply(e){return new li(e.firestore,e.converter,ng(e._query,this._limit,this._limitType))}}function E2(t){return Bp._create("limit",t,"F")}function pE(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new ue(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tN(e)&&n.indexOf("/")!==-1)throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(At.fromString(n));if(!ge.isDocumentKey(r))throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ld(t,new ge(r))}if(n instanceof Un)return Ld(t,n._key);throw new ue(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(n)}.`)}function yE(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I2(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class T2{convertValue(e,n="none"){switch(vA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jA(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Nt(o.doubleValue));return new mp(i)}convertGeoPoint(e){return new fp(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const n=ra(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);Ie(SN(r));const s=new oo(r.get(1),r.get(3)),i=new ge(r.popFirst(5));return s.isEqual(n)||tn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class p_ extends b2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nd extends p_{data(e={}){return super.data(e)}}class y_{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ml(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nd(this._firestore,this._userDataWriter,r.key,r,new Ml(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new nd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ml(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new nd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ml(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:nV(l.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){t=Sr(t,Un);const e=Sr(t.firestore,ai);return GH(dh(e),t._key).then(n=>k2(e,t,n))}class w_ extends T2{constructor(e){super(),this.firestore=e}convertBytes(e){return new IA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function Li(t){t=Sr(t,li);const e=Sr(t.firestore,ai),n=dh(e),r=new w_(e);return C2(t._query),zH(n,t._query).then(s=>new y_(e,r,t,s))}function Gn(t,e,n){t=Sr(t,Un);const r=Sr(t.firestore,ai),s=S2(t.converter,e,n);return ph(r,[w2(pp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Kn.none())])}function TA(t,e,n,...r){t=Sr(t,Un);const s=Sr(t.firestore,ai),i=pp(s);let o;return o=typeof(e=it(e))=="string"||e instanceof hh?ZH(i,"updateDoc",t._key,e,n,r):XH(i,"updateDoc",t._key,e),ph(s,[o.toMutation(t._key,Kn.exists(!0))])}function gh(t){return ph(Sr(t.firestore,ai),[new ip(t._key,Kn.none())])}function _c(t,e){const n=Sr(t.firestore,ai),r=ze(t),s=S2(t.converter,e);return ph(n,[w2(pp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Kn.exists(!1))]).then(()=>r)}function Zs(t,...e){var n,r,s;t=it(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gE(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gE(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let c,h,m;if(t instanceof Un)h=Sr(t.firestore,ai),m=oh(t._key.path),c={next:g=>{e[o]&&e[o](k2(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Sr(t,li);h=Sr(g.firestore,ai),m=g._query;const y=new w_(h);c={next:B=>{e[o]&&e[o](new y_(h,y,g,B))},error:e[o+1],complete:e[o+2]},C2(t._query)}return function(y,B,b,x){const S=new A_(x),I=new n_(B,S,b);return y.asyncQueue.enqueueAndForget(async()=>Jx(await dg(y),I)),()=>{S.Za(),y.asyncQueue.enqueueAndForget(async()=>e_(await dg(y),I))}}(dh(h),m,l,c)}function ph(t,e){return function(r,s){const i=new si;return r.asyncQueue.enqueueAndForget(async()=>IH(await KH(r),s,i)),i.promise}(dh(t),e)}function k2(t,e,n){const r=n.docs.get(e._key),s=new w_(t);return new p_(t,s,e._key,r,new Ml(n.hasPendingWrites,n.fromCache),e.converter)}class rV{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=U2(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function N2(t){return new rV(t)}class sV{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hd.provider,this._offlineComponentProvider={build:n=>new u2(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class iV{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hd.provider,this._offlineComponentProvider={build:n=>new MH(n,e==null?void 0:e.cacheSizeBytes)}}}function U2(t){return new sV(void 0)}function F2(){return new iV}function fg(){return new c_("serverTimestamp")}function Q2(...t){return new u_("arrayUnion",t)}function P2(...t){return new d_("arrayRemove",t)}(function(e,n=!0){(function(s){Fc=s})(LA),cs(new zr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ai(new XD(r.getProvider("auth-internal")),new tO(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ue(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(h.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),zn(cC,"4.7.3",e),zn(cC,"4.7.3","esm2017")})();const wE=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:T2,Bytes:IA,CollectionReference:$i,DocumentReference:Un,DocumentSnapshot:p_,FieldPath:hh,FieldValue:OA,Firestore:ai,FirestoreError:ue,GeoPoint:fp,Query:li,QueryCompositeFilterConstraint:xp,QueryConstraint:vp,QueryDocumentSnapshot:nd,QueryFieldFilterConstraint:fh,QueryLimitConstraint:Bp,QueryOrderByConstraint:_p,QuerySnapshot:y_,SnapshotMetadata:Ml,Timestamp:qe,VectorValue:mp,_AutoId:Tx,_ByteString:qt,_DatabaseId:oo,_DocumentKey:ge,_EmptyAuthCredentialsProvider:kk,_FieldPath:Qt,_cast:Sr,_logWarn:uc,_validateIsNotUsedTogether:m2,addDoc:_c,arrayRemove:P2,arrayUnion:Q2,collection:cn,deleteDoc:gh,doc:ze,ensureFirestoreConfigured:dh,executeWrite:ph,getDoc:Is,getDocs:Li,initializeFirestore:g2,limit:E2,onSnapshot:Zs,orderBy:g_,persistentLocalCache:N2,persistentMultipleTabManager:F2,persistentSingleTabManager:U2,query:HA,serverTimestamp:fg,setDoc:Gn,updateDoc:TA,where:mh},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="type.googleapis.com/google.protobuf.Int64Value",oV="type.googleapis.com/google.protobuf.UInt64Value";function R2(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function jw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>jw(e));if(typeof t=="function"||typeof t=="object")return R2(t,e=>jw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function mg(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case aV:case oV:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>mg(e)):typeof t=="function"||typeof t=="object"?R2(t,e=>mg(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jl extends ds{constructor(e,n,r){super(`${v_}/${e}`,n||""),this.details=r}}function AV(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function lV(t,e){let n=AV(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!vE[o])return new Jl("internal","internal");n=vE[o],r=o}const l=i.message;typeof l=="string"&&(r=l),s=i.details,s!==void 0&&(s=mg(s))}}catch{}return n==="ok"?null:new Jl(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="us-central1";function uV(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Jl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class dV{constructor(e,n,r,s,i=Dw,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new cV(n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Dw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function hV(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function fV(t,e,n){return r=>gV(t,e,r,{})}async function mV(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function gV(t,e,n,r){const s=t._url(e);return pV(t,s,n,r)}async function pV(t,e,n,r){n=jw(n);const s={data:n},i={},o=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const l=r.timeout||7e4,c=uV(l),h=await Promise.race([mV(e,s,i,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!h)throw new Jl("cancelled","Firebase Functions instance was deleted.");const m=lV(h.status,h.json);if(m)throw m;if(!h.json)throw new Jl("internal","Response is not valid JSON object.");let g=h.json.data;if(typeof g>"u"&&(g=h.json.result),typeof g>"u")throw new Jl("internal","Response is missing data field.");return{data:mg(g)}}const xE="@firebase/functions",_E="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="auth-internal",wV="app-check-internal",vV="messaging-internal";function xV(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(yV),l=r.getProvider(vV),c=r.getProvider(wV);return new dV(i,o,l,c,s,t)};cs(new zr(v_,n,"PUBLIC").setMultipleInstances(!0)),zn(xE,_E,e),zn(xE,_E,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t=Wg(),e=Dw){const r=po(it(t),v_).getImmediate({identifier:e}),s=NS("functions");return s&&_V(r,...s),r}function _V(t,e,n){hV(it(t),e,n)}function Dt(t,e,n){return fV(it(t),e)}xV(fetch.bind(self));var BV="firebase",bV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(BV,bV,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="firebasestorage.googleapis.com",j2="storageBucket",CV=2*60*1e3,EV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t extends ds{constructor(e,n,r=0){super(P0(e),`Firebase Storage: ${n} (${P0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return P0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function P0(t){return"storage/"+t}function x_(){const t="An unknown error occurred, please check the error payload for server response.";return new $t(Wt.UNKNOWN,t)}function IV(t){return new $t(Wt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TV(t){return new $t(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $t(Wt.UNAUTHENTICATED,t)}function kV(){return new $t(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function NV(t){return new $t(Wt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function UV(){return new $t(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FV(){return new $t(Wt.CANCELED,"User canceled the upload/download.")}function QV(t){return new $t(Wt.INVALID_URL,"Invalid URL '"+t+"'.")}function PV(t){return new $t(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function RV(){return new $t(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+j2+"' property when initializing the app?")}function LV(){return new $t(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jV(){return new $t(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DV(t){return new $t(Wt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ow(t){return new $t(Wt.INVALID_ARGUMENT,t)}function D2(){return new $t(Wt.APP_DELETED,"The Firebase app was deleted.")}function OV(t){return new $t(Wt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rd(t,e){return new $t(Wt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function hu(t){throw new $t(Wt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Hr.makeFromUrl(e,n)}catch{return new Hr(e,"")}if(r.path==="")return r;throw PV(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function h(M){M.path_=decodeURIComponent(M.path)}const m="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",B=new RegExp(`^https?://${g}/${m}/b/${s}/o${y}`,"i"),b={bucket:1,path:3},x=n===L2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",I=new RegExp(`^https?://${x}/${s}/${S}`,"i"),U=[{regex:l,indices:c,postModify:i},{regex:B,indices:b,postModify:h},{regex:I,indices:{bucket:1,path:2},postModify:h}];for(let M=0;M<U.length;M++){const H=U[M],O=H.regex.exec(e);if(O){const T=O[H.indices.bucket];let C=O[H.indices.path];C||(C=""),r=new Hr(T,C),H.postModify(r);break}}if(r==null)throw QV(e);return r}}class MV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let h=!1;function m(...S){h||(h=!0,e.apply(null,S))}function g(S){s=setTimeout(()=>{s=null,t(B,c())},S)}function y(){i&&clearTimeout(i)}function B(S,...I){if(h){y();return}if(S){y(),m.call(null,S,...I);return}if(c()||o){y(),m.call(null,S,...I);return}r<64&&(r*=2);let U;l===1?(l=2,U=0):U=(r+Math.random())*1e3,g(U)}let b=!1;function x(S){b||(b=!0,y(),!h&&(s!==null?(S||(l=2),clearTimeout(s),g(0)):S||(l=1)))}return g(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function VV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t){return t!==void 0}function GV(t){return typeof t=="object"&&!Array.isArray(t)}function __(t){return typeof t=="string"||t instanceof String}function BE(t){return B_()&&t instanceof Blob}function B_(){return typeof Blob<"u"}function bE(t,e,n,r){if(r<e)throw Ow(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ow(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function O2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var oA;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oA||(oA={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,r,s,i,o,l,c,h,m,g,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,b)=>{this.resolve_=B,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new df(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===oA.NO_ERROR,c=i.getStatus();if(!l||zV(c,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===oA.ABORT;r(!1,new df(!1,null,m));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new df(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());KV(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=x_();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?D2():FV();o(c)}else{const c=UV();o(c)}};this.canceled_?n(!1,new df(!1,null,!0)):this.backoffId_=HV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class df{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function WV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $V(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZV(t,e,n,r,s,i,o=!0){const l=O2(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return YV(h,e),WV(h,n),$V(h,i),XV(h,r),new qV(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function e5(...t){const e=JV();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(B_())return new Blob(t);throw new $t(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function t5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t){if(typeof atob>"u")throw DV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class R0{constructor(e,n){this.data=e,this.contentType=n||null}}function r5(t,e){switch(t){case Js.RAW:return new R0(M2(e));case Js.BASE64:case Js.BASE64URL:return new R0(H2(t,e));case Js.DATA_URL:return new R0(i5(e),a5(e))}throw x_()}function M2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function s5(t){let e;try{e=decodeURIComponent(t)}catch{throw rd(Js.DATA_URL,"Malformed data URL.")}return M2(e)}function H2(t,e){switch(t){case Js.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw rd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Js.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw rd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=n5(e)}catch(s){throw s.message.includes("polyfill")?s:rd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class V2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw rd(Js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=o5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function i5(t){const e=new V2(t);return e.base64?H2(Js.BASE64,e.rest):s5(e.rest)}function a5(t){return new V2(t).contentType}function o5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){let r=0,s="";BE(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(BE(this.data_)){const r=this.data_,s=t5(r,e,n);return s===null?null:new La(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new La(r,!0)}}static getBlob(...e){if(B_()){const n=e.map(r=>r instanceof La?r.data_:r);return new La(e5.apply(null,n))}else{const n=e.map(o=>__(o)?r5(Js.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new La(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){let e;try{e=JSON.parse(t)}catch{return null}return GV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function l5(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function G2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t,e){return e}class nr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||c5}}let hf=null;function u5(t){return!__(t)||t.length<2?t:G2(t)}function z2(){if(hf)return hf;const t=[];t.push(new nr("bucket")),t.push(new nr("generation")),t.push(new nr("metageneration")),t.push(new nr("name","fullPath",!0));function e(i,o){return u5(o)}const n=new nr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new nr("size");return s.xform=r,t.push(s),t.push(new nr("timeCreated")),t.push(new nr("updated")),t.push(new nr("md5Hash",null,!0)),t.push(new nr("cacheControl",null,!0)),t.push(new nr("contentDisposition",null,!0)),t.push(new nr("contentEncoding",null,!0)),t.push(new nr("contentLanguage",null,!0)),t.push(new nr("contentType",null,!0)),t.push(new nr("metadata","customMetadata",!0)),hf=t,hf}function d5(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Hr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function h5(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return d5(r,t),r}function q2(t,e,n){const r=K2(e);return r===null?null:h5(t,r,n)}function f5(t,e,n,r){const s=K2(e);if(s===null||!__(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const m=t.bucket,g=t.fullPath,y="/b/"+o(m)+"/o/"+o(g),B=bp(y,n,r),b=O2({alt:"media",token:h});return B+b})[0]}function m5(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class b_{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){if(!t)throw x_()}function g5(t,e){function n(r,s){const i=q2(t,s,e);return W2(i!==null),i}return n}function p5(t,e){function n(r,s){const i=q2(t,s,e);return W2(i!==null),f5(i,s,t.host,t._protocol)}return n}function $2(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=kV():s=SV():n.getStatus()===402?s=TV(t.bucket):n.getStatus()===403?s=NV(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Y2(t){const e=$2(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=IV(t.path)),i.serverResponse=s.serverResponse,i}return n}function y5(t,e,n){const r=e.fullServerUrl(),s=bp(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new b_(s,i,p5(t,n),o);return l.errorHandler=Y2(e),l}function w5(t,e){const n=e.fullServerUrl(),r=bp(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(c,h){}const l=new b_(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=Y2(e),l}function v5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function x5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=v5(null,e)),r}function _5(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let U="";for(let M=0;M<2;M++)U=U+Math.random().toString().slice(2);return U}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const h=x5(e,r,s),m=m5(h,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+c+"--",B=La.getBlob(g,r,y);if(B===null)throw LV();const b={name:h.fullPath},x=bp(i,t.host,t._protocol),S="POST",I=t.maxUploadRetryTime,E=new b_(x,S,g5(t,n),I);return E.urlParams=b,E.headers=o,E.body=B.uploadData(),E.errorHandler=$2(e),E}class B5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oA.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oA.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oA.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw hu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class b5 extends B5{initXhr(){this.xhr_.responseType="text"}}function C_(){return new b5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this._service=e,n instanceof Hr?this._location=n:this._location=Hr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new SA(e,n)}get root(){const e=new Hr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G2(this._location.path)}get storage(){return this._service}get parent(){const e=A5(this._location.path);if(e===null)return null;const n=new Hr(this._location.bucket,e);return new SA(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OV(e)}}function C5(t,e,n){t._throwIfRoot("uploadBytes");const r=_5(t.storage,t._location,z2(),new La(e,!0),n);return t.storage.makeRequestWithTokens(r,C_).then(s=>({metadata:s,ref:t}))}function E5(t){t._throwIfRoot("getDownloadURL");const e=y5(t.storage,t._location,z2());return t.storage.makeRequestWithTokens(e,C_).then(n=>{if(n===null)throw jV();return n})}function I5(t){t._throwIfRoot("deleteObject");const e=w5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,C_)}function T5(t,e){const n=l5(t._location.path,e),r=new Hr(t._location.bucket,n);return new SA(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t){return/^[A-Za-z]+:\/\//.test(t)}function k5(t,e){return new SA(t,e)}function X2(t,e){if(t instanceof E_){const n=t;if(n._bucket==null)throw RV();const r=new SA(n,n._bucket);return e!=null?X2(r,e):r}else return e!==void 0?T5(t,e):t}function N5(t,e){if(e&&S5(e)){if(t instanceof E_)return k5(t,e);throw Ow("To use ref(service, url), the first argument must be a Storage instance.")}else return X2(t,e)}function CE(t,e){const n=e==null?void 0:e[j2];return n==null?null:Hr.makeFromBucketSpec(n,t)}function U5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:hL(s,t.app.options.projectId))}class E_{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=L2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CV,this._maxUploadRetryTime=EV,this._requests=new Set,s!=null?this._bucket=Hr.makeFromBucketSpec(s,this._host):this._bucket=CE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hr.makeFromBucketSpec(this._url,e):this._bucket=CE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new SA(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new MV(D2());{const o=ZV(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const EE="@firebase/storage",IE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="storage";function Bc(t,e,n){return t=it(t),C5(t,e,n)}function bc(t){return t=it(t),E5(t)}function J2(t){return t=it(t),I5(t)}function co(t,e){return t=it(t),N5(t,e)}function F5(t=Wg(),e){t=it(t);const r=po(t,Z2).getImmediate({identifier:e}),s=NS("storage");return s&&Q5(r,...s),r}function Q5(t,e,n,r={}){U5(t,e,n,r)}function P5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new E_(n,r,s,e,LA)}function R5(){cs(new zr(Z2,P5,"PUBLIC").setMultipleInstances(!0)),zn(EE,IE,""),zn(EE,IE,"esm2017")}R5();const eU="@firebase/installations",I_="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=1e4,nU=`w:${I_}`,rU="FIS_v2",L5="https://firebaseinstallations.googleapis.com/v1",j5=60*60*1e3,D5="installations",O5="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},kA=new RA(D5,O5,M5);function sU(t){return t instanceof ds&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU({projectId:t}){return`${L5}/projects/${t}/installations`}function aU(t){return{token:t.token,requestStatus:2,expiresIn:V5(t.expiresIn),creationTime:Date.now()}}async function oU(t,e){const r=(await e.json()).error;return kA.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function AU({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function H5(t,{refreshToken:e}){const n=AU(t);return n.append("Authorization",K5(e)),n}async function lU(t){const e=await t();return e.status>=500&&e.status<600?t():e}function V5(t){return Number(t.replace("s","000"))}function K5(t){return`${rU} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=iU(t),s=AU(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={fid:n,authVersion:rU,appId:t.appId,sdkVersion:nU},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await lU(()=>fetch(r,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:aU(h.authToken)}}else throw await oU("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=/^[cdef][\w-]{21}$/,Mw="";function W5(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$5(t);return q5.test(n)?n:Mw}catch{return Mw}}function $5(t){return z5(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=new Map;function dU(t,e){const n=Cp(t);hU(n,e),Y5(n,e)}function hU(t,e){const n=uU.get(t);if(n)for(const r of n)r(e)}function Y5(t,e){const n=X5();n&&n.postMessage({key:t,fid:e}),Z5()}let tA=null;function X5(){return!tA&&"BroadcastChannel"in self&&(tA=new BroadcastChannel("[Firebase] FID Change"),tA.onmessage=t=>{hU(t.data.key,t.data.fid)}),tA}function Z5(){uU.size===0&&tA&&(tA.close(),tA=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="firebase-installations-database",e3=1,NA="firebase-installations-store";let L0=null;function T_(){return L0||(L0=qg(J5,e3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(NA)}}})),L0}async function gg(t,e){const n=Cp(t),s=(await T_()).transaction(NA,"readwrite"),i=s.objectStore(NA),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&dU(t,e.fid),e}async function fU(t){const e=Cp(t),r=(await T_()).transaction(NA,"readwrite");await r.objectStore(NA).delete(e),await r.done}async function Ep(t,e){const n=Cp(t),s=(await T_()).transaction(NA,"readwrite"),i=s.objectStore(NA),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&dU(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(t){let e;const n=await Ep(t.appConfig,r=>{const s=t3(r),i=n3(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Mw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function t3(t){const e=t||{fid:W5(),registrationStatus:0};return mU(e)}function n3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(kA.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=r3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:s3(t)}:{installationEntry:e}}async function r3(t,e){try{const n=await G5(t,e);return gg(t.appConfig,n)}catch(n){throw sU(n)&&n.customData.serverCode===409?await fU(t.appConfig):await gg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function s3(t){let e=await TE(t.appConfig);for(;e.registrationStatus===1;)await cU(100),e=await TE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await S_(t);return r||n}return e}function TE(t){return Ep(t,e=>{if(!e)throw kA.create("installation-not-found");return mU(e)})}function mU(t){return i3(t)?{fid:t.fid,registrationStatus:0}:t}function i3(t){return t.registrationStatus===1&&t.registrationTime+tU<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a3({appConfig:t,heartbeatServiceProvider:e},n){const r=o3(t,n),s=H5(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const o={installation:{sdkVersion:nU,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await lU(()=>fetch(r,l));if(c.ok){const h=await c.json();return aU(h)}else throw await oU("Generate Auth Token",c)}function o3(t,{fid:e}){return`${iU(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k_(t,e=!1){let n;const r=await Ep(t.appConfig,i=>{if(!gU(i))throw kA.create("not-registered");const o=i.authToken;if(!e&&c3(o))return i;if(o.requestStatus===1)return n=A3(t,e),i;{if(!navigator.onLine)throw kA.create("app-offline");const l=d3(i);return n=l3(t,l),l}});return n?await n:r.authToken}async function A3(t,e){let n=await SE(t.appConfig);for(;n.authToken.requestStatus===1;)await cU(100),n=await SE(t.appConfig);const r=n.authToken;return r.requestStatus===0?k_(t,e):r}function SE(t){return Ep(t,e=>{if(!gU(e))throw kA.create("not-registered");const n=e.authToken;return h3(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function l3(t,e){try{const n=await a3(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await gg(t.appConfig,r),n}catch(n){if(sU(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await fU(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await gg(t.appConfig,r)}throw n}}function gU(t){return t!==void 0&&t.registrationStatus===2}function c3(t){return t.requestStatus===2&&!u3(t)}function u3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+j5}function d3(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function h3(t){return t.requestStatus===1&&t.requestTime+tU<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(t){const e=t,{installationEntry:n,registrationPromise:r}=await S_(e);return r?r.catch(console.error):k_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(t,e=!1){const n=t;return await g3(n),(await k_(n,e)).token}async function g3(t){const{registrationPromise:e}=await S_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t){if(!t||!t.options)throw j0("App Configuration");if(!t.name)throw j0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw j0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function j0(t){return kA.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="installations",y3="installations-internal",w3=t=>{const e=t.getProvider("app").getImmediate(),n=p3(e),r=po(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},v3=t=>{const e=t.getProvider("app").getImmediate(),n=po(e,pU).getImmediate();return{getId:()=>f3(n),getToken:s=>m3(n,s)}};function x3(){cs(new zr(pU,w3,"PUBLIC")),cs(new zr(y3,v3,"PRIVATE"))}x3();zn(eU,I_);zn(eU,I_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="/firebase-messaging-sw.js",B3="/firebase-cloud-messaging-push-scope",yU="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",b3="https://fcmregistrations.googleapis.com/v1",wU="google.c.a.c_id",C3="google.c.a.c_l",E3="google.c.a.ts",I3="google.c.a.e";var kE;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(kE||(kE={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Vd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Vd||(Vd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function T3(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="fcm_token_details_db",S3=5,NE="fcm_token_object_Store";async function k3(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(D0))return null;let e=null;return(await qg(D0,S3,{upgrade:async(r,s,i,o)=>{var l;if(s<2||!r.objectStoreNames.contains(NE))return;const c=o.objectStore(NE),h=await c.index("fcmSenderId").get(t);if(await c.clear(),!!h){if(s===2){const m=h;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:(l=m.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:Qi(m.vapidKey)}}}else if(s===3){const m=h;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Qi(m.auth),p256dh:Qi(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Qi(m.vapidKey)}}}else if(s===4){const m=h;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Qi(m.auth),p256dh:Qi(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Qi(m.vapidKey)}}}}}})).close(),await b0(D0),await b0("fcm_vapid_details_db"),await b0("undefined"),N3(e)?e:null}function N3(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="firebase-messaging-database",F3=1,Kd="firebase-messaging-store";let O0=null;function vU(){return O0||(O0=qg(U3,F3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Kd)}}})),O0}async function Q3(t){const e=xU(t),r=await(await vU()).transaction(Kd).objectStore(Kd).get(e);if(r)return r;{const s=await k3(t.appConfig.senderId);if(s)return await N_(t,s),s}}async function N_(t,e){const n=xU(t),s=(await vU()).transaction(Kd,"readwrite");return await s.objectStore(Kd).put(e,n),await s.done,e}function xU({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},qn=new RA("messaging","Messaging",P3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R3(t,e){const n=await F_(t),r=_U(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(U_(t.appConfig),s)).json()}catch(o){throw qn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw qn.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw qn.create("token-subscribe-no-token");return i.token}async function L3(t,e){const n=await F_(t),r=_U(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${U_(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw qn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw qn.create("token-update-failed",{errorInfo:o})}if(!i.token)throw qn.create("token-update-no-token");return i.token}async function j3(t,e){const r={method:"DELETE",headers:await F_(t)};try{const i=await(await fetch(`${U_(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw qn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw qn.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function U_({projectId:t}){return`${b3}/projects/${t}/registrations`}async function F_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function _U({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==yU&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=7*24*60*60*1e3;async function O3(t){const e=await H3(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Qi(e.getKey("auth")),p256dh:Qi(e.getKey("p256dh"))},r=await Q3(t.firebaseDependencies);if(r){if(V3(r.subscriptionOptions,n))return Date.now()>=r.createTime+D3?M3(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await j3(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return UE(t.firebaseDependencies,n)}else return UE(t.firebaseDependencies,n)}async function M3(t,e){try{const n=await L3(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await N_(t.firebaseDependencies,r),n}catch(n){throw n}}async function UE(t,e){const r={token:await R3(t,e),createTime:Date.now(),subscriptionOptions:e};return await N_(t,r),r.token}async function H3(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:T3(e)})}function V3(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return K3(e,t),G3(e,t),z3(e,t),e}function K3(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function G3(t,e){e.data&&(t.data=e.data)}function z3(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;l&&(t.fcmOptions.link=l);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(t){return typeof t=="object"&&!!t&&wU in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){if(!t||!t.options)throw M0("App Configuration Object");if(!t.name)throw M0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw M0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function M0(t){return qn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=W3(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(t){try{t.swRegistration=await navigator.serviceWorker.register(_3,{scope:B3}),t.swRegistration.update().catch(()=>{})}catch(e){throw qn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t,e){if(!e&&!t.swRegistration&&await Y3(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=yU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e){if(!navigator)throw qn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw qn.create("permission-blocked");return await Z3(t,e==null?void 0:e.vapidKey),await X3(t,e==null?void 0:e.serviceWorkerRegistration),O3(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,e,n){const r=e6(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[wU],message_name:n[C3],message_time:n[E3],message_device_time:Math.floor(Date.now()/1e3)})}function e6(t){switch(t){case Vd.NOTIFICATION_CLICKED:return"notification_open";case Vd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Vd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(FE(n)):t.onMessageHandler.next(FE(n)));const r=n.data;q3(r)&&r[I3]==="1"&&await J3(t,n.messageType,r)}const QE="@firebase/messaging",PE="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=t=>{const e=new $3(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>t6(e,n)),e},r6=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>BU(e,r)}};function s6(){cs(new zr("messaging",n6,"PUBLIC")),cs(new zr("messaging-internal",r6,"PRIVATE")),zn(QE,PE),zn(QE,PE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(){try{await PS()}catch{return!1}return typeof window<"u"&&hx()&&vL()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t,e){if(!navigator)throw qn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(t=Wg()){return bU().then(e=>{if(!e)throw qn.create("unsupported-browser")},e=>{throw qn.create("indexed-db-unsupported")}),po(it(t),"messaging").getImmediate()}async function o6(t,e){return t=it(t),BU(t,e)}function RE(t,e){return t=it(t),i6(t,e)}s6();const A6={apiKey:"AIzaSyCWp0X6bLJBsyYKTjUaVsXBSuVD8KeeEqY",authDomain:"carnival-planner.firebaseapp.com",projectId:"carnival-planner",storageBucket:"carnival-planner.firebasestorage.app",messagingSenderId:"1036340118282",appId:"1:1036340118282:web:809dc12c298ff1b8f2f0f3",measurementId:"G-XC1K69PSVC"},Ft=jS(A6),Ha=WD(Ft),Te=g2(Ft,{localCache:N2({tabManager:F2()})},"squad-db"),uo=F5(Ft);Promise.resolve(!0);console.log("Firestore initialized");let Ki=null;const Q_=async()=>{try{return await bU()?(Ki=a6(Ft),console.log("Firebase Messaging initialized"),Ki):(console.log("Firebase Messaging not supported in this browser"),null)}catch(t){return console.log("Error initializing Firebase Messaging:",t),null}},l6=async t=>{try{if(await Notification.requestPermission()!=="granted")return console.log("Notification permission denied"),null;if(Ki||await Q_(),!Ki)return null;const n=await o6(Ki,{vapidKey:t});return console.log("FCM Token:",n),n}catch(e){return console.log("Error getting FCM token:",e),null}},c6=t=>{Ki?RE(Ki,t):Q_().then(()=>{Ki&&RE(Ki,t)})};Q_();const ff="/assets/carnival-logo-CBA9n7vt.png",H0=[{name:"Sugar Mas (St. Kitts)",date:"2026-01-01"},{name:"St. Croix Carnival",date:"2026-01-03"},{name:"Carnaval Ponceno (Puerto Rico)",date:"2026-02-12"},{name:"Aruba Carnival",date:"2026-02-14"},{name:"Barranquilla Carnival (Colombia)",date:"2026-02-14"},{name:"Martinique Carnival",date:"2026-02-15"},{name:"Rio Carnival (Brazil)",date:"2026-02-15"},{name:"Carnaval De Saint-Martin",date:"2026-02-15"},{name:"Mas Domnik (Dominica)",date:"2026-02-16"},{name:"Carriacou & Petite Martinique",date:"2026-02-16"},{name:"Venezuela Carnival",date:"2026-02-16"},{name:"Trinidad Carnival",date:"2026-02-16"},{name:"Guyana Mashramani",date:"2026-02-23"},{name:"Carnaval De San Pedro (Belize)",date:"2026-02-23"},{name:"Cape Town Carnival (South Africa)",date:"2026-03-21"},{name:"Virgin Gorda Easter Festival",date:"2026-04-05"},{name:"Jamaica Carnival",date:"2026-04-12"},{name:"Tampa Bay Carnival (USA)",date:"2026-04-18"},{name:"St. Maarten Carnival",date:"2026-04-30"},{name:"St. Thomas Carnival (USVI)",date:"2026-05-02"},{name:"Cayman Carnival Batabano",date:"2026-05-09"},{name:"Braccanal (Cayman Islands)",date:"2026-05-13"},{name:"Berlin Carnival (Germany)",date:"2026-05-22"},{name:"Atlanta Caribbean Carnival",date:"2026-05-23"},{name:"Aalborg Karneval (Denmark)",date:"2026-05-23"},{name:"Orlando Carnival",date:"2026-05-24"},{name:"Luton International Carnival (UK)",date:"2026-05-24"},{name:"Guyana Independence",date:"2026-05-26"},{name:"Munich Carnival (Germany)",date:"2026-06-04"},{name:"Bahamas Carnival",date:"2026-06-06"},{name:"South Carolina Carnival",date:"2026-06-11"},{name:"Bermuda Carnival",date:"2026-06-15"},{name:"Hollywood Carnival (USA)",date:"2026-06-20"},{name:"Caymas Carnival (Cayman Islands)",date:"2026-06-20"},{name:"Philadelphia Carnival",date:"2026-06-20"},{name:"Vienna Carnival (Austria)",date:"2026-06-26"},{name:"Vincy Mas (St. Vincent)",date:"2026-07-06"},{name:"Saint Lucia Carnival",date:"2026-07-20"},{name:"Anguilla Summer Festival",date:"2026-07-24"},{name:"Zomercarnaval (Rotterdam)",date:"2026-07-25"},{name:"Toronto Caribbean Carnival (Caribana)",date:"2026-08-01"},{name:"Crop Over (Barbados)",date:"2026-08-03"},{name:"Antigua Carnival",date:"2026-08-03"},{name:"Nevis Culturama Festival",date:"2026-08-04"},{name:"Cariwest (Canada)",date:"2026-08-07"},{name:"Spice Mas (Grenada)",date:"2026-08-10"},{name:"Notting Hill Carnival (London)",date:"2026-08-31"},{name:"New York Carnival (Labor Day)",date:"2026-09-07"},{name:"Japan Caribbean Carnival",date:"2026-09-23"},{name:"Miami Carnival",date:"2026-10-11"},{name:"Tobago Carnival",date:"2026-11-01"}];function CU(t,e){const n=R.useRef(e);R.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const u6=1;function d6(t){return Object.freeze({__version:u6,map:t})}function h6(t,e){return Object.freeze({...t,...e})}const EU=R.createContext(null),IU=EU.Provider;function P_(){const t=R.useContext(EU);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function f6(t){function e(n,r){const{instance:s,context:i}=t(n).current;return R.useImperativeHandle(r,()=>s),n.children==null?null:Gi.createElement(IU,{value:i},n.children)}return R.forwardRef(e)}function m6(t){function e(n,r){const[s,i]=R.useState(!1),{instance:o}=t(n,i).current;R.useImperativeHandle(r,()=>o),R.useEffect(function(){s&&o.update()},[o,s,n.children]);const l=o._contentNode;return l?ES.createPortal(n.children,l):null}return R.forwardRef(e)}function g6(t){function e(n,r){const{instance:s}=t(n).current;return R.useImperativeHandle(r,()=>s),null}return R.forwardRef(e)}function TU(t,e){const n=R.useRef();R.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function R_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function p6(t,e){return function(r,s){const i=P_(),o=t(R_(r,i),i);return CU(i.map,r.attribution),TU(o.current,r.eventHandlers),e(o.current,i,r,s),o}}var Hw={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(NQ,function(n){var r="1.9.4";function s(a){var u,f,p,v;for(f=1,p=arguments.length;f<p;f++){v=arguments[f];for(u in v)a[u]=v[u]}return a}var i=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function o(a,u){var f=Array.prototype.slice;if(a.bind)return a.bind.apply(a,f.call(arguments,1));var p=f.call(arguments,2);return function(){return a.apply(u,p.length?p.concat(f.call(arguments)):arguments)}}var l=0;function c(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,u,f){var p,v,k,V;return V=function(){p=!1,v&&(k.apply(f,v),v=!1)},k=function(){p?v=arguments:(a.apply(f,arguments),setTimeout(V,u),p=!0)},k}function m(a,u,f){var p=u[1],v=u[0],k=p-v;return a===p&&f?a:((a-v)%k+k)%k+v}function g(){return!1}function y(a,u){if(u===!1)return a;var f=Math.pow(10,u===void 0?6:u);return Math.round(a*f)/f}function B(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function b(a){return B(a).split(/\s+/)}function x(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var f in u)a.options[f]=u[f];return a.options}function S(a,u,f){var p=[];for(var v in a)p.push(encodeURIComponent(f?v.toUpperCase():v)+"="+encodeURIComponent(a[v]));return(!u||u.indexOf("?")===-1?"?":"&")+p.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function E(a,u){return a.replace(I,function(f,p){var v=u[p];if(v===void 0)throw new Error("No value provided for variable "+f);return typeof v=="function"&&(v=v(u)),v})}var U=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function M(a,u){for(var f=0;f<a.length;f++)if(a[f]===u)return f;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var T=0;function C(a){var u=+new Date,f=Math.max(0,16-(u-T));return T=u+f,window.setTimeout(a,f)}var N=window.requestAnimationFrame||O("RequestAnimationFrame")||C,Q=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function D(a,u,f){if(f&&N===C)a.call(u);else return N.call(window,o(a,u))}function K(a){a&&Q.call(window,a)}var j={__proto__:null,extend:s,create:i,bind:o,get lastId(){return l},stamp:c,throttle:h,wrapNum:m,falseFn:g,formatNum:y,trim:B,splitWords:b,setOptions:x,getParamString:S,template:E,isArray:U,indexOf:M,emptyImageUrl:H,requestFn:N,cancelFn:Q,requestAnimFrame:D,cancelAnimFrame:K};function X(){}X.extend=function(a){var u=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=u.__super__=this.prototype,p=i(f);p.constructor=u,u.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(u[v]=this[v]);return a.statics&&s(u,a.statics),a.includes&&(J(a.includes),s.apply(null,[p].concat(a.includes))),s(p,a),delete p.statics,delete p.includes,p.options&&(p.options=f.options?i(f.options):{},s(p.options,a.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,V=p._initHooks.length;k<V;k++)p._initHooks[k].call(this)}},u},X.include=function(a){var u=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},X.mergeOptions=function(a){return s(this.prototype.options,a),this},X.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),f=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function J(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=U(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var oe={on:function(a,u,f){if(typeof a=="object")for(var p in a)this._on(p,a[p],u);else{a=b(a);for(var v=0,k=a.length;v<k;v++)this._on(a[v],u,f)}return this},off:function(a,u,f){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var p in a)this._off(p,a[p],u);else{a=b(a);for(var v=arguments.length===1,k=0,V=a.length;k<V;k++)v?this._off(a[k]):this._off(a[k],u,f)}return this},_on:function(a,u,f,p){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,f)===!1){f===this&&(f=void 0);var v={fn:u,ctx:f};p&&(v.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(v)}},_off:function(a,u,f){var p,v,k;if(this._events&&(p=this._events[a],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,k=p.length;v<k;v++)p[v].fn=g;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var V=this._listens(a,u,f);if(V!==!1){var W=p[V];this._firingCount&&(W.fn=g,this._events[a]=p=p.slice()),p.splice(V,1)}}},fire:function(a,u,f){if(!this.listens(a,f))return this;var p=s({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var v=this._events[a];if(v){this._firingCount=this._firingCount+1||1;for(var k=0,V=v.length;k<V;k++){var W=v[k],Y=W.fn;W.once&&this.off(a,Y,W.ctx),Y.call(W.ctx||this,p)}this._firingCount--}}return f&&this._propagateEvent(p),this},listens:function(a,u,f,p){typeof a!="string"&&console.warn('"string" type argument expected');var v=u;typeof u!="function"&&(p=!!u,v=void 0,f=void 0);var k=this._events&&this._events[a];if(k&&k.length&&this._listens(a,v,f)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(a,u,f,p))return!0}return!1},_listens:function(a,u,f){if(!this._events)return!1;var p=this._events[a]||[];if(!u)return!!p.length;f===this&&(f=void 0);for(var v=0,k=p.length;v<k;v++)if(p[v].fn===u&&p[v].ctx===f)return v;return!1},once:function(a,u,f){if(typeof a=="object")for(var p in a)this._on(p,a[p],u,!0);else{a=b(a);for(var v=0,k=a.length;v<k;v++)this._on(a[v],u,f,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[c(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[c(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};oe.addEventListener=oe.on,oe.removeEventListener=oe.clearAllEventListeners=oe.off,oe.addOneTimeEventListener=oe.once,oe.fireEvent=oe.fire,oe.hasEventListeners=oe.listens;var Ae=X.extend(oe);function G(a,u,f){this.x=f?Math.round(a):a,this.y=f?Math.round(u):u}var ae=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(a){return this.clone()._add(ee(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ee(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new G(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new G(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(a){a=ee(a);var u=a.x-this.x,f=a.y-this.y;return Math.sqrt(u*u+f*f)},equals:function(a){return a=ee(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ee(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function ee(a,u,f){return a instanceof G?a:U(a)?new G(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new G(a.x,a.y):new G(a,u,f)}function we(a,u){if(a)for(var f=u?[a,u]:a,p=0,v=f.length;p<v;p++)this.extend(f[p])}we.prototype={extend:function(a){var u,f;if(!a)return this;if(a instanceof G||typeof a[0]=="number"||"x"in a)u=f=ee(a);else if(a=de(a),u=a.min,f=a.max,!u||!f)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=f.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(a){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,f;return typeof a[0]=="number"||a instanceof G?a=ee(a):a=de(a),a instanceof we?(u=a.min,f=a.max):u=f=a,u.x>=this.min.x&&f.x<=this.max.x&&u.y>=this.min.y&&f.y<=this.max.y},intersects:function(a){a=de(a);var u=this.min,f=this.max,p=a.min,v=a.max,k=v.x>=u.x&&p.x<=f.x,V=v.y>=u.y&&p.y<=f.y;return k&&V},overlaps:function(a){a=de(a);var u=this.min,f=this.max,p=a.min,v=a.max,k=v.x>u.x&&p.x<f.x,V=v.y>u.y&&p.y<f.y;return k&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,f=this.max,p=Math.abs(u.x-f.x)*a,v=Math.abs(u.y-f.y)*a;return de(ee(u.x-p,u.y-v),ee(f.x+p,f.y+v))},equals:function(a){return a?(a=de(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function de(a,u){return!a||a instanceof we?a:new we(a,u)}function me(a,u){if(a)for(var f=u?[a,u]:a,p=0,v=f.length;p<v;p++)this.extend(f[p])}me.prototype={extend:function(a){var u=this._southWest,f=this._northEast,p,v;if(a instanceof he)p=a,v=a;else if(a instanceof me){if(p=a._southWest,v=a._northEast,!p||!v)return this}else return a?this.extend(ie(a)||pe(a)):this;return!u&&!f?(this._southWest=new he(p.lat,p.lng),this._northEast=new he(v.lat,v.lng)):(u.lat=Math.min(p.lat,u.lat),u.lng=Math.min(p.lng,u.lng),f.lat=Math.max(v.lat,f.lat),f.lng=Math.max(v.lng,f.lng)),this},pad:function(a){var u=this._southWest,f=this._northEast,p=Math.abs(u.lat-f.lat)*a,v=Math.abs(u.lng-f.lng)*a;return new me(new he(u.lat-p,u.lng-v),new he(f.lat+p,f.lng+v))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof he||"lat"in a?a=ie(a):a=pe(a);var u=this._southWest,f=this._northEast,p,v;return a instanceof me?(p=a.getSouthWest(),v=a.getNorthEast()):p=v=a,p.lat>=u.lat&&v.lat<=f.lat&&p.lng>=u.lng&&v.lng<=f.lng},intersects:function(a){a=pe(a);var u=this._southWest,f=this._northEast,p=a.getSouthWest(),v=a.getNorthEast(),k=v.lat>=u.lat&&p.lat<=f.lat,V=v.lng>=u.lng&&p.lng<=f.lng;return k&&V},overlaps:function(a){a=pe(a);var u=this._southWest,f=this._northEast,p=a.getSouthWest(),v=a.getNorthEast(),k=v.lat>u.lat&&p.lat<f.lat,V=v.lng>u.lng&&p.lng<f.lng;return k&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=pe(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(a,u){return a instanceof me?a:new me(a,u)}function he(a,u,f){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,f!==void 0&&(this.alt=+f)}he.prototype={equals:function(a,u){if(!a)return!1;a=ie(a);var f=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return f<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+y(this.lat,a)+", "+y(this.lng,a)+")"},distanceTo:function(a){return Je.distance(this,ie(a))},wrap:function(){return Je.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,f=u/Math.cos(Math.PI/180*this.lat);return pe([this.lat-u,this.lng-f],[this.lat+u,this.lng+f])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function ie(a,u,f){return a instanceof he?a:U(a)&&typeof a[0]!="object"?a.length===3?new he(a[0],a[1],a[2]):a.length===2?new he(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new he(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new he(a,u,f)}var Qe={latLngToPoint:function(a,u){var f=this.projection.project(a),p=this.scale(u);return this.transformation._transform(f,p)},pointToLatLng:function(a,u){var f=this.scale(u),p=this.transformation.untransform(a,f);return this.projection.unproject(p)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,f=this.scale(a),p=this.transformation.transform(u.min,f),v=this.transformation.transform(u.max,f);return new we(p,v)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?m(a.lng,this.wrapLng,!0):a.lng,f=this.wrapLat?m(a.lat,this.wrapLat,!0):a.lat,p=a.alt;return new he(f,u,p)},wrapLatLngBounds:function(a){var u=a.getCenter(),f=this.wrapLatLng(u),p=u.lat-f.lat,v=u.lng-f.lng;if(p===0&&v===0)return a;var k=a.getSouthWest(),V=a.getNorthEast(),W=new he(k.lat-p,k.lng-v),Y=new he(V.lat-p,V.lng-v);return new me(W,Y)}},Je=s({},Qe,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var f=Math.PI/180,p=a.lat*f,v=u.lat*f,k=Math.sin((u.lat-a.lat)*f/2),V=Math.sin((u.lng-a.lng)*f/2),W=k*k+Math.cos(p)*Math.cos(v)*V*V,Y=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*Y}}),Nr=6378137,Ht={R:Nr,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,f=this.MAX_LATITUDE,p=Math.max(Math.min(f,a.lat),-f),v=Math.sin(p*u);return new G(this.R*a.lng*u,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(a){var u=180/Math.PI;return new he((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:function(){var a=Nr*Math.PI;return new we([-a,-a],[a,a])}()};function $n(a,u,f,p){if(U(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=f,this._d=p}$n.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new G((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function Qn(a,u,f,p){return new $n(a,u,f,p)}var vt=s({},Je,{code:"EPSG:3857",projection:Ht,transformation:function(){var a=.5/(Math.PI*Ht.R);return Qn(a,.5,-a,.5)}()}),xt=s({},vt,{code:"EPSG:900913"});function et(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function un(a,u){var f="",p,v,k,V,W,Y;for(p=0,k=a.length;p<k;p++){for(W=a[p],v=0,V=W.length;v<V;v++)Y=W[v],f+=(v?"L":"M")+Y.x+" "+Y.y;f+=u?Ee.svg?"z":"x":""}return f||"M0 0"}var _t=document.documentElement.style,yn="ActiveXObject"in window,VA=yn&&!document.addEventListener,_o="msLaunchUri"in navigator&&!("documentMode"in document),di=Xn("webkit"),Bo=Xn("android"),Ps=Xn("android 2")||Xn("android 3"),bo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),KA=Bo&&Xn("Google")&&bo<537&&!("AudioNode"in window),Vt=!!window.opera,nn=!_o&&Xn("chrome"),Rs=Xn("gecko")&&!di&&!Vt&&!yn,GA=!nn&&Xn("safari"),hi=Xn("phantom"),Pn="OTransition"in _t,Ls=navigator.platform.indexOf("Win")===0,Co=yn&&"transition"in _t,fi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ps,mi="MozPerspective"in _t,Eo=!window.L_DISABLE_3D&&(Co||fi||mi)&&!Pn&&!hi,js=typeof orientation<"u"||Xn("mobile"),la=js&&di,Ur=js&&fi,Io=!window.PointerEvent&&window.MSPointerEvent,Ds=!!(window.PointerEvent||Io),ca="ontouchstart"in window||!!window.TouchEvent,ua=!window.L_NO_TOUCH&&(ca||Ds),Yn=js&&Vt,da=js&&Rs,ha=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,To=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",g,u),window.removeEventListener("testPassiveEventSupport",g,u)}catch{}return a}(),gi=function(){return!!document.createElement("canvas").getContext}(),Os=!!(document.createElementNS&&et("svg").createSVGRect),Pt=!!Os&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),pi=!Os&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),yi=navigator.platform.indexOf("Mac")===0,Ms=navigator.platform.indexOf("Linux")===0;function Xn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ee={ie:yn,ielt9:VA,edge:_o,webkit:di,android:Bo,android23:Ps,androidStock:KA,opera:Vt,chrome:nn,gecko:Rs,safari:GA,phantom:hi,opera12:Pn,win:Ls,ie3d:Co,webkit3d:fi,gecko3d:mi,any3d:Eo,mobile:js,mobileWebkit:la,mobileWebkit3d:Ur,msPointer:Io,pointer:Ds,touch:ua,touchNative:ca,mobileOpera:Yn,mobileGecko:da,retina:ha,passiveEvents:To,canvas:gi,svg:Os,vml:pi,inlineSvg:Pt,mac:yi,linux:Ms},fs=Ee.msPointer?"MSPointerDown":"pointerdown",So=Ee.msPointer?"MSPointerMove":"pointermove",ko=Ee.msPointer?"MSPointerUp":"pointerup",wi=Ee.msPointer?"MSPointerCancel":"pointercancel",fa={touchstart:fs,touchmove:So,touchend:ko,touchcancel:wi},Hs={touchstart:vi,touchmove:Yt,touchend:Yt,touchcancel:Yt},Cn={},Fr=!1;function zA(a,u,f){return u==="touchstart"&&dr(),Hs[u]?(f=Hs[u].bind(this,f),a.addEventListener(fa[u],f,!1),f):(console.warn("wrong event specified:",u),g)}function No(a,u,f){if(!fa[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(fa[u],f,!1)}function Uo(a){Cn[a.pointerId]=a}function ur(a){Cn[a.pointerId]&&(Cn[a.pointerId]=a)}function Kt(a){delete Cn[a.pointerId]}function dr(){Fr||(document.addEventListener(fs,Uo,!0),document.addEventListener(So,ur,!0),document.addEventListener(ko,Kt,!0),document.addEventListener(wi,Kt,!0),Fr=!0)}function Yt(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var f in Cn)u.touches.push(Cn[f]);u.changedTouches=[u],a(u)}}function vi(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Rt(u),Yt(a,u)}function Fo(a){var u={},f,p;for(p in a)f=a[p],u[p]=f&&f.bind?f.bind(a):f;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var ma=200;function st(a,u){a.addEventListener("dblclick",u);var f=0,p;function v(k){if(k.detail!==1){p=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var V=Hc(k);if(!(V.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!V.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var W=Date.now();W-f<=ma?(p++,p===2&&u(Fo(k))):p=1,f=W}}}return a.addEventListener("click",v),{dblclick:u,simDblclick:v}}function ms(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var xi=Yr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_i=Yr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Qo=_i==="webkitTransition"||_i==="OTransition"?_i+"End":"transitionend";function Po(a){return typeof a=="string"?document.getElementById(a):a}function gs(a,u){var f=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!f||f==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(a,null);f=p?p[u]:null}return f==="auto"?null:f}function He(a,u,f){var p=document.createElement(a);return p.className=u||"",f&&f.appendChild(p),p}function lt(a){var u=a.parentNode;u&&u.removeChild(a)}function Bi(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ps(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function ys(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function Ro(a,u){if(a.classList!==void 0)return a.classList.contains(u);var f=Se(a);return f.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(f)}function Le(a,u){if(a.classList!==void 0)for(var f=b(u),p=0,v=f.length;p<v;p++)a.classList.add(f[p]);else if(!Ro(a,u)){var k=Se(a);Qr(a,(k?k+" ":"")+u)}}function gt(a,u){a.classList!==void 0?a.classList.remove(u):Qr(a,B((" "+Se(a)+" ").replace(" "+u+" "," ")))}function Qr(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function Se(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Bt(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&bi(a,u)}function bi(a,u){var f=!1,p="DXImageTransform.Microsoft.Alpha";try{f=a.filters.item(p)}catch{if(u===1)return}u=Math.round(u*100),f?(f.Enabled=u!==100,f.Opacity=u):a.style.filter+=" progid:"+p+"(opacity="+u+")"}function Yr(a){for(var u=document.documentElement.style,f=0;f<a.length;f++)if(a[f]in u)return a[f];return!1}function Pr(a,u,f){var p=u||new G(0,0);a.style[xi]=(Ee.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(f?" scale("+f+")":"")}function Ue(a,u){a._leaflet_pos=u,Ee.any3d?Pr(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function Zn(a){return a._leaflet_pos||new G(0,0)}var hr,fr,ga;if("onselectstart"in document)hr=function(){Ne(window,"selectstart",Rt)},fr=function(){at(window,"selectstart",Rt)};else{var ws=Yr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);hr=function(){if(ws){var a=document.documentElement.style;ga=a[ws],a[ws]="none"}},fr=function(){ws&&(document.documentElement.style[ws]=ga,ga=void 0)}}function P(){Ne(window,"dragstart",Rt)}function q(){at(window,"dragstart",Rt)}var ne,Be;function Re(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Oe(),ne=a,Be=a.style.outlineStyle,a.style.outlineStyle="none",Ne(window,"keydown",Oe))}function Oe(){ne&&(ne.style.outlineStyle=Be,ne=void 0,Be=void 0,at(window,"keydown",Oe))}function Ve(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function dn(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var En={__proto__:null,TRANSFORM:xi,TRANSITION:_i,TRANSITION_END:Qo,get:Po,getStyle:gs,create:He,remove:lt,empty:Bi,toFront:ps,toBack:ys,hasClass:Ro,addClass:Le,removeClass:gt,setClass:Qr,getClass:Se,setOpacity:Bt,testProp:Yr,setTransform:Pr,setPosition:Ue,getPosition:Zn,get disableTextSelection(){return hr},get enableTextSelection(){return fr},disableImageDrag:P,enableImageDrag:q,preventOutline:Re,restoreOutline:Oe,getSizedParentNode:Ve,getScale:dn};function Ne(a,u,f,p){if(u&&typeof u=="object")for(var v in u)Oc(a,v,u[v],f);else{u=b(u);for(var k=0,V=u.length;k<V;k++)Oc(a,u[k],f,p)}return this}var mr="_leaflet_events";function at(a,u,f,p){if(arguments.length===1)qA(a),delete a[mr];else if(u&&typeof u=="object")for(var v in u)Mc(a,v,u[v],f);else if(u=b(u),arguments.length===2)qA(a,function(W){return M(u,W)!==-1});else for(var k=0,V=u.length;k<V;k++)Mc(a,u[k],f,p);return this}function qA(a,u){for(var f in a[mr]){var p=f.split(/\d/)[0];(!u||u(p))&&Mc(a,p,null,null,f)}}var Jn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Oc(a,u,f,p){var v=u+c(f)+(p?"_"+c(p):"");if(a[mr]&&a[mr][v])return this;var k=function(W){return f.call(p||a,W||window.event)},V=k;!Ee.touchNative&&Ee.pointer&&u.indexOf("touch")===0?k=zA(a,u,k):Ee.touch&&u==="dblclick"?k=st(a,k):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Jn[u]||u,k,Ee.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(k=function(W){W=W||window.event,Vc(a,W)&&V(W)},a.addEventListener(Jn[u],k,!1)):a.addEventListener(u,V,!1):a.attachEvent("on"+u,k),a[mr]=a[mr]||{},a[mr][v]=k}function Mc(a,u,f,p,v){v=v||u+c(f)+(p?"_"+c(p):"");var k=a[mr]&&a[mr][v];if(!k)return this;!Ee.touchNative&&Ee.pointer&&u.indexOf("touch")===0?No(a,u,k):Ee.touch&&u==="dblclick"?ms(a,k):"removeEventListener"in a?a.removeEventListener(Jn[u]||u,k,!1):a.detachEvent("on"+u,k),a[mr][v]=null}function Xr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function pa(a){return Oc(a,"wheel",Xr),this}function ya(a){return Ne(a,"mousedown touchstart dblclick contextmenu",Xr),a._leaflet_disable_click=!0,this}function Rt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Rr(a){return Rt(a),Xr(a),this}function Hc(a){if(a.composedPath)return a.composedPath();for(var u=[],f=a.target;f;)u.push(f),f=f.parentNode;return u}function WA(a,u){if(!u)return new G(a.clientX,a.clientY);var f=dn(u),p=f.boundingClientRect;return new G((a.clientX-p.left)/f.x-u.clientLeft,(a.clientY-p.top)/f.y-u.clientTop)}var It=Ee.linux&&Ee.chrome?window.devicePixelRatio:Ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bh(a){return Ee.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/It:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Vc(a,u){var f=u.relatedTarget;if(!f)return!0;try{for(;f&&f!==a;)f=f.parentNode}catch{return!1}return f!==a}var bh={__proto__:null,on:Ne,off:at,stopPropagation:Xr,disableScrollPropagation:pa,disableClickPropagation:ya,preventDefault:Rt,stop:Rr,getPropagationPath:Hc,getMousePosition:WA,getWheelDelta:Bh,isExternalTarget:Vc,addListener:Ne,removeListener:at},Kc=Ae.extend({run:function(a,u,f,p){this.stop(),this._el=a,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Zn(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,f=this._duration*1e3;u<f?this._runFrame(this._easeOut(u/f),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var f=this._startPos.add(this._offset.multiplyBy(a));u&&f._round(),Ue(this._el,f),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),We=Ae.extend({options:{crs:vt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=x(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(ie(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_i&&Ee.any3d&&!Ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,Qo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,f){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(ie(a),u,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=s({animate:f.animate},f.zoom),f.pan=s({animate:f.animate,duration:f.duration},f.pan));var p=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,f.zoom):this._tryAnimatedPan(a,f.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,f.pan&&f.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,f){var p=this.getZoomScale(u),v=this.getSize().divideBy(2),k=a instanceof G?a:this.latLngToContainerPoint(a),V=k.subtract(v).multiplyBy(1-1/p),W=this.containerPointToLatLng(v.add(V));return this.setView(W,u,{zoom:f})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():pe(a);var f=ee(u.paddingTopLeft||u.padding||[0,0]),p=ee(u.paddingBottomRight||u.padding||[0,0]),v=this.getBoundsZoom(a,!1,f.add(p));if(v=typeof u.maxZoom=="number"?Math.min(u.maxZoom,v):v,v===1/0)return{center:a.getCenter(),zoom:v};var k=p.subtract(f).divideBy(2),V=this.project(a.getSouthWest(),v),W=this.project(a.getNorthEast(),v),Y=this.unproject(V.add(W).divideBy(2).add(k),v);return{center:Y,zoom:v}},fitBounds:function(a,u){if(a=pe(a),!a.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(a,u);return this.setView(f.center,f.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=ee(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Kc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Le(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,f,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,f){if(f=f||{},f.animate===!1||!Ee.any3d)return this.setView(a,u,f);this._stop();var p=this.project(this.getCenter()),v=this.project(a),k=this.getSize(),V=this._zoom;a=ie(a),u=u===void 0?V:u;var W=Math.max(k.x,k.y),Y=W*this.getZoomScale(V,u),re=v.distanceTo(p)||1,ve=1.42,Fe=ve*ve;function Ke(sn){var Oh=sn?-1:1,IQ=sn?Y:W,TQ=Y*Y-W*W+Oh*Fe*Fe*re*re,SQ=2*IQ*Fe*re,Wp=TQ/SQ,BB=Math.sqrt(Wp*Wp+1)-Wp,kQ=BB<1e-9?-18:Math.log(BB);return kQ}function tr(sn){return(Math.exp(sn)-Math.exp(-sn))/2}function vn(sn){return(Math.exp(sn)+Math.exp(-sn))/2}function Jr(sn){return tr(sn)/vn(sn)}var pr=Ke(0);function ol(sn){return W*(vn(pr)/vn(pr+ve*sn))}function BQ(sn){return W*(vn(pr)*Jr(pr+ve*sn)-tr(pr))/Fe}function bQ(sn){return 1-Math.pow(1-sn,1.5)}var CQ=Date.now(),xB=(Ke(1)-pr)/ve,EQ=f.duration?1e3*f.duration:1e3*xB*.8;function _B(){var sn=(Date.now()-CQ)/EQ,Oh=bQ(sn)*xB;sn<=1?(this._flyToFrame=D(_B,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(BQ(Oh)/re)),V),this.getScaleZoom(W/ol(Oh),V),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),_B.call(this),this},flyToBounds:function(a,u){var f=this._getBoundsCenterZoom(a,u);return this.flyTo(f.center,f.zoom,u)},setMaxBounds:function(a){return a=pe(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var f=this.getCenter(),p=this._limitCenter(f,this._zoom,pe(a));return f.equals(p)||this.panTo(p,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var f=ee(u.paddingTopLeft||u.padding||[0,0]),p=ee(u.paddingBottomRight||u.padding||[0,0]),v=this.project(this.getCenter()),k=this.project(a),V=this.getPixelBounds(),W=de([V.min.add(f),V.max.subtract(p)]),Y=W.getSize();if(!W.contains(k)){this._enforcingBounds=!0;var re=k.subtract(W.getCenter()),ve=W.extend(k).getSize().subtract(Y);v.x+=re.x<0?-ve.x:ve.x,v.y+=re.y<0?-ve.y:ve.y,this.panTo(this.unproject(v),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),p=u.divideBy(2).round(),v=f.divideBy(2).round(),k=p.subtract(v);return!k.x&&!k.y?this:(a.animate&&a.pan?this.panBy(k):(a.pan&&this._rawPanBy(k),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,f,a):navigator.geolocation.getCurrentPosition(u,f,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,f=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,f=a.coords.longitude,p=new he(u,f),v=p.toBounds(a.coords.accuracy*2),k=this._locateOptions;if(k.setView){var V=this.getBoundsZoom(v);this.setView(p,k.maxZoom?Math.min(V,k.maxZoom):V)}var W={latlng:p,bounds:v,timestamp:a.timestamp};for(var Y in a.coords)typeof a.coords[Y]=="number"&&(W[Y]=a.coords[Y]);this.fire("locationfound",W)}},addHandler:function(a,u){if(!u)return this;var f=this[a]=new u(this);return this._handlers.push(f),this.options[a]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)lt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var f="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),p=He("div",f,u||this._mapPane);return a&&(this._panes[a]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),f=this.unproject(a.getTopRight());return new me(u,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,f){a=pe(a),f=ee(f||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),k=this.getMaxZoom(),V=a.getNorthWest(),W=a.getSouthEast(),Y=this.getSize().subtract(f),re=de(this.project(W,p),this.project(V,p)).getSize(),ve=Ee.any3d?this.options.zoomSnap:1,Fe=Y.x/re.x,Ke=Y.y/re.y,tr=u?Math.max(Fe,Ke):Math.min(Fe,Ke);return p=this.getScaleZoom(tr,p),ve&&(p=Math.round(p/(ve/100))*(ve/100),p=u?Math.ceil(p/ve)*ve:Math.floor(p/ve)*ve),Math.max(v,Math.min(k,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var f=this._getTopLeftPoint(a,u);return new we(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var f=this.options.crs;return u=u===void 0?this._zoom:u,f.scale(a)/f.scale(u)},getScaleZoom:function(a,u){var f=this.options.crs;u=u===void 0?this._zoom:u;var p=f.zoom(a*f.scale(u));return isNaN(p)?1/0:p},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(ie(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ee(a),u)},layerPointToLatLng:function(a){var u=ee(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(ie(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ie(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(pe(a))},distance:function(a,u){return this.options.crs.distance(ie(a),ie(u))},containerPointToLayerPoint:function(a){return ee(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ee(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(ee(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(a)))},mouseEventToContainerPoint:function(a){return WA(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=Po(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ne(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ee.any3d,Le(a,"leaflet-container"+(Ee.touch?" leaflet-touch":"")+(Ee.retina?" leaflet-retina":"")+(Ee.ielt9?" leaflet-oldie":"")+(Ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=gs(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ue(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Le(a.markerPane,"leaflet-zoom-hide"),Le(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,f){Ue(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var v=this._zoom!==u;this._moveStart(v,f)._move(a,u)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,f,p){u===void 0&&(u=this._zoom);var v=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),p?f&&f.pinch&&this.fire("zoom",f):((v||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ue(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[c(this._container)]=this;var u=a?at:Ne;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ee.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var f=[],p,v=u==="mouseout"||u==="mouseover",k=a.target||a.srcElement,V=!1;k;){if(p=this._targets[c(k)],p&&(u==="click"||u==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(u,!0)&&(v&&!Vc(k,a)||(f.push(p),v))||k===this._container)break;k=k.parentNode}return!f.length&&!V&&!v&&this.listens(u,!0)&&(f=[this]),f},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var f=a.type;f==="mousedown"&&Re(u),this._fireDOMEvent(a,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,f){if(a.type==="click"){var p=s({},a);p.type="preclick",this._fireDOMEvent(p,p.type,f)}var v=this._findEventTargets(a,u);if(f){for(var k=[],V=0;V<f.length;V++)f[V].listens(u,!0)&&k.push(f[V]);v=k.concat(v)}if(v.length){u==="contextmenu"&&Rt(a);var W=v[0],Y={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var re=W.getLatLng&&(!W._radius||W._radius<=10);Y.containerPoint=re?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(a),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=re?W.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(V=0;V<v.length;V++)if(v[V].fire(u,Y,!0),Y.originalEvent._stopped||v[V].options.bubblingMouseEvents===!1&&M(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return Zn(this._mapPane)||new G(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var f=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var f=this.getSize()._divideBy(2);return this.project(a,u)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,f){var p=this._getNewPixelOrigin(f,u);return this.project(a,u)._subtract(p)},_latLngBoundsToNewLayerBounds:function(a,u,f){var p=this._getNewPixelOrigin(f,u);return de([this.project(a.getSouthWest(),u)._subtract(p),this.project(a.getNorthWest(),u)._subtract(p),this.project(a.getSouthEast(),u)._subtract(p),this.project(a.getNorthEast(),u)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,f){if(!f)return a;var p=this.project(a,u),v=this.getSize().divideBy(2),k=new we(p.subtract(v),p.add(v)),V=this._getBoundsOffset(k,f,u);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?a:this.unproject(p.add(V),u)},_limitOffset:function(a,u){if(!u)return a;var f=this.getPixelBounds(),p=new we(f.min.add(a),f.max.add(a));return a.add(this._getBoundsOffset(p,u))},_getBoundsOffset:function(a,u,f){var p=de(this.project(u.getNorthEast(),f),this.project(u.getSouthWest(),f)),v=p.min.subtract(a.min),k=p.max.subtract(a.max),V=this._rebound(v.x,-k.x),W=this._rebound(v.y,-k.y);return new G(V,W)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),f=this.getMaxZoom(),p=Ee.any3d?this.options.zoomSnap:1;return p&&(a=Math.round(a/p)*p),Math.max(u,Math.min(f,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var f=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,u),!0)},_createAnimProxy:function(){var a=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var f=xi,p=this._proxy.style[f];Pr(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),p===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();Pr(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(u),v=this._getCenterOffset(a)._divideBy(1-1/p);return f.animate!==!0&&!this.getSize().contains(v)?!1:(D(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,f,p){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,Le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $A(a,u){return new We(a,u)}var gr=X.extend({options:{position:"topright"},initialize:function(a){x(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),f=this.getPosition(),p=a._controlCorners[f];return Le(u,"leaflet-control"),f.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),er=function(a){return new gr(a)};We.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",f=this._controlContainer=He("div",u+"control-container",this._container);function p(v,k){var V=u+v+" "+u+k;a[v+k]=He("div",V,f)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)lt(this._controlCorners[a]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Gc=gr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,f,p){return f<p?-1:p<f?1:0}},initialize:function(a,u,f){x(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in a)this._addLayer(a[p],p);for(p in u)this._addLayer(u[p],p,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return gr.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=He("div",a),f=this.options.collapsed;u.setAttribute("aria-haspopup",!0),ya(u),pa(u);var p=this._section=He("section",a+"-list");f&&(this._map.on("click",this.collapse,this),Ne(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=He("a",a+"-toggle",u);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ne(v,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Rt(k),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=He("div",a+"-base",p),this._separator=He("div",a+"-separator",p),this._overlaysList=He("div",a+"-overlays",p),u.appendChild(p)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,f){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bi(this._baseLayersList),Bi(this._overlaysList),this._layerControlInputs=[];var a,u,f,p,v=0;for(f=0;f<this._layers.length;f++)p=this._layers[f],this._addItem(p),u=u||p.overlay,a=a||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(a=a&&v>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(c(a.target)),f=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;f&&this._map.fire(f,u)},_createRadioElement:function(a,u){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=f,p.firstChild},_addItem:function(a){var u=document.createElement("label"),f=this._map.hasLayer(a.layer),p;a.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=f):p=this._createRadioElement("leaflet-base-layers_"+c(this),f),this._layerControlInputs.push(p),p.layerId=c(a.layer),Ne(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+a.name;var k=document.createElement("span");u.appendChild(k),k.appendChild(p),k.appendChild(v);var V=a.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,f,p=[],v=[];this._handlingClick=!0;for(var k=a.length-1;k>=0;k--)u=a[k],f=this._getLayer(u.layerId).layer,u.checked?p.push(f):u.checked||v.push(f);for(k=0;k<v.length;k++)this._map.hasLayer(v[k])&&this._map.removeLayer(v[k]);for(k=0;k<p.length;k++)this._map.hasLayer(p[k])||this._map.addLayer(p[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,f,p=this._map.getZoom(),v=a.length-1;v>=0;v--)u=a[v],f=this._getLayer(u.layerId).layer,u.disabled=f.options.minZoom!==void 0&&p<f.options.minZoom||f.options.maxZoom!==void 0&&p>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ne(a,"click",Rt),this.expand();var u=this;setTimeout(function(){at(a,"click",Rt),u._preventClick=!1})}}),Hp=function(a,u,f){return new Gc(a,u,f)},Ci=gr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",f=He("div",u+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,u+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,u+"-out",f,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,f,p,v){var k=He("a",f,p);return k.innerHTML=a,k.href="#",k.title=u,k.setAttribute("role","button"),k.setAttribute("aria-label",u),ya(k),Ne(k,"click",Rr),Ne(k,"click",v,this),Ne(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";gt(this._zoomInButton,u),gt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Le(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Le(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});We.mergeOptions({zoomControl:!0}),We.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ci,this.addControl(this.zoomControl))});var Ch=function(a){return new Ci(a)},YA=gr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",f=He("div",u),p=this.options;return this._addScales(p,u+"-line",f),a.on(p.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),f},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,f){a.metric&&(this._mScale=He("div",u,f)),a.imperial&&(this._iScale=He("div",u,f))},_update:function(){var a=this._map,u=a.getSize().y/2,f=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(f)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),f=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,f,u/a)},_updateImperial:function(a){var u=a*3.2808399,f,p,v;u>5280?(f=u/5280,p=this._getRoundNum(f),this._updateScale(this._iScale,p+" mi",p/f)):(v=this._getRoundNum(u),this._updateScale(this._iScale,v+" ft",v/u))},_updateScale:function(a,u,f){a.style.width=Math.round(this.options.maxWidth*f)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),f=a/u;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,u*f}}),XA=function(a){return new YA(a)},Eh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',wa=gr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ee.inlineSvg?Eh+" ":"")+"Leaflet</a>"},initialize:function(a){x(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=He("div","leaflet-control-attribution"),ya(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var f=[];this.options.prefix&&f.push(this.options.prefix),a.length&&f.push(a.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});We.mergeOptions({attributionControl:!0}),We.addInitHook(function(){this.options.attributionControl&&new wa().addTo(this)});var Vp=function(a){return new wa(a)};gr.Layers=Gc,gr.Zoom=Ci,gr.Scale=YA,gr.Attribution=wa,er.layers=Hp,er.zoom=Ch,er.scale=XA,er.attribution=Vp;var Lr=X.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Lr.addTo=function(a,u){return a.addHandler(u,this),this};var Lo={Events:oe},zc=Ee.touch?"touchstart mousedown":"mousedown",vs=Ae.extend({options:{clickTolerance:3},initialize:function(a,u,f,p){x(this,p),this._element=a,this._dragStartTarget=u||a,this._preventOutline=f},enable:function(){this._enabled||(Ne(this._dragStartTarget,zc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vs._dragging===this&&this.finishDrag(!0),at(this._dragStartTarget,zc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Ro(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){vs._dragging===this&&this.finishDrag();return}if(!(vs._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(vs._dragging=this,this._preventOutline&&Re(this._element),P(),hr(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,f=Ve(this._element);this._startPoint=new G(u.clientX,u.clientY),this._startPos=Zn(this._element),this._parentScale=dn(f);var p=a.type==="mousedown";Ne(document,p?"mousemove":"touchmove",this._onMove,this),Ne(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,f=new G(u.clientX,u.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Rt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Le(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ue(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),at(document,"mousemove touchmove",this._onMove,this),at(document,"mouseup touchend touchcancel",this._onUp,this),q(),fr();var u=this._moved&&this._moving;this._moving=!1,vs._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function ZA(a,u,f){var p,v=[1,4,2,8],k,V,W,Y,re,ve,Fe,Ke;for(k=0,ve=a.length;k<ve;k++)a[k]._code=Vs(a[k],u);for(W=0;W<4;W++){for(Fe=v[W],p=[],k=0,ve=a.length,V=ve-1;k<ve;V=k++)Y=a[k],re=a[V],Y._code&Fe?re._code&Fe||(Ke=wn(re,Y,Fe,u,f),Ke._code=Vs(Ke,u),p.push(Ke)):(re._code&Fe&&(Ke=wn(re,Y,Fe,u,f),Ke._code=Vs(Ke,u),p.push(Ke)),p.push(Y));a=p}return a}function JA(a,u){var f,p,v,k,V,W,Y,re,ve;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Fe=ie([0,0]),Ke=pe(a),tr=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());tr<1700&&(Fe=el(a));var vn=a.length,Jr=[];for(f=0;f<vn;f++){var pr=ie(a[f]);Jr.push(u.project(ie([pr.lat-Fe.lat,pr.lng-Fe.lng])))}for(W=Y=re=0,f=0,p=vn-1;f<vn;p=f++)v=Jr[f],k=Jr[p],V=v.y*k.x-k.y*v.x,Y+=(v.x+k.x)*V,re+=(v.y+k.y)*V,W+=V*3;W===0?ve=Jr[0]:ve=[Y/W,re/W];var ol=u.unproject(ee(ve));return ie([ol.lat+Fe.lat,ol.lng+Fe.lng])}function el(a){for(var u=0,f=0,p=0,v=0;v<a.length;v++){var k=ie(a[v]);u+=k.lat,f+=k.lng,p++}return ie([u/p,f/p])}var tl={__proto__:null,clipPolygon:ZA,polygonCenter:JA,centroid:el};function qc(a,u){if(!u||!a.length)return a.slice();var f=u*u;return a=Th(a,f),a=Ih(a,f),a}function Wc(a,u,f){return Math.sqrt(Zr(a,u,f,!0))}function Ei(a,u,f){return Zr(a,u,f)}function Ih(a,u){var f=a.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(f);v[0]=v[f-1]=1,nl(a,v,u,0,f-1);var k,V=[];for(k=0;k<f;k++)v[k]&&V.push(a[k]);return V}function nl(a,u,f,p,v){var k=0,V,W,Y;for(W=p+1;W<=v-1;W++)Y=Zr(a[W],a[p],a[v],!0),Y>k&&(V=W,k=Y);k>f&&(u[V]=1,nl(a,u,f,p,V),nl(a,u,f,V,v))}function Th(a,u){for(var f=[a[0]],p=1,v=0,k=a.length;p<k;p++)Sh(a[p],a[v])>u&&(f.push(a[p]),v=p);return v<k-1&&f.push(a[k-1]),f}var $c;function jo(a,u,f,p,v){var k=p?$c:Vs(a,f),V=Vs(u,f),W,Y,re;for($c=V;;){if(!(k|V))return[a,u];if(k&V)return!1;W=k||V,Y=wn(a,u,W,f,v),re=Vs(Y,f),W===k?(a=Y,k=re):(u=Y,V=re)}}function wn(a,u,f,p,v){var k=u.x-a.x,V=u.y-a.y,W=p.min,Y=p.max,re,ve;return f&8?(re=a.x+k*(Y.y-a.y)/V,ve=Y.y):f&4?(re=a.x+k*(W.y-a.y)/V,ve=W.y):f&2?(re=Y.x,ve=a.y+V*(Y.x-a.x)/k):f&1&&(re=W.x,ve=a.y+V*(W.x-a.x)/k),new G(re,ve,v)}function Vs(a,u){var f=0;return a.x<u.min.x?f|=1:a.x>u.max.x&&(f|=2),a.y<u.min.y?f|=4:a.y>u.max.y&&(f|=8),f}function Sh(a,u){var f=u.x-a.x,p=u.y-a.y;return f*f+p*p}function Zr(a,u,f,p){var v=u.x,k=u.y,V=f.x-v,W=f.y-k,Y=V*V+W*W,re;return Y>0&&(re=((a.x-v)*V+(a.y-k)*W)/Y,re>1?(v=f.x,k=f.y):re>0&&(v+=V*re,k+=W*re)),V=a.x-v,W=a.y-k,p?V*V+W*W:new G(v,k)}function d(a){return!U(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function w(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(a)}function _(a,u){var f,p,v,k,V,W,Y,re;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ve=ie([0,0]),Fe=pe(a),Ke=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());Ke<1700&&(ve=el(a));var tr=a.length,vn=[];for(f=0;f<tr;f++){var Jr=ie(a[f]);vn.push(u.project(ie([Jr.lat-ve.lat,Jr.lng-ve.lng])))}for(f=0,p=0;f<tr-1;f++)p+=vn[f].distanceTo(vn[f+1])/2;if(p===0)re=vn[0];else for(f=0,k=0;f<tr-1;f++)if(V=vn[f],W=vn[f+1],v=V.distanceTo(W),k+=v,k>p){Y=(k-p)/v,re=[W.x-Y*(W.x-V.x),W.y-Y*(W.y-V.y)];break}var pr=u.unproject(ee(re));return ie([pr.lat+ve.lat,pr.lng+ve.lng])}var F={__proto__:null,simplify:qc,pointToSegmentDistance:Wc,closestPointOnSegment:Ei,clipSegment:jo,_getEdgeIntersection:wn,_getBitCode:Vs,_sqClosestPointOnSegment:Zr,isFlat:d,_flat:w,polylineCenter:_},z={project:function(a){return new G(a.lng,a.lat)},unproject:function(a){return new he(a.y,a.x)},bounds:new we([-180,-90],[180,90])},Z={R:6378137,R_MINOR:6356752314245179e-9,bounds:new we([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,f=this.R,p=a.lat*u,v=this.R_MINOR/f,k=Math.sqrt(1-v*v),V=k*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),k/2);return p=-f*Math.log(Math.max(W,1e-10)),new G(a.lng*u*f,p)},unproject:function(a){for(var u=180/Math.PI,f=this.R,p=this.R_MINOR/f,v=Math.sqrt(1-p*p),k=Math.exp(-a.y/f),V=Math.PI/2-2*Math.atan(k),W=0,Y=.1,re;W<15&&Math.abs(Y)>1e-7;W++)re=v*Math.sin(V),re=Math.pow((1-re)/(1+re),v/2),Y=Math.PI/2-2*Math.atan(k*re)-V,V+=Y;return new he(V*u,a.x*u/f)}},ce={__proto__:null,LonLat:z,Mercator:Z,SphericalMercator:Ht},ct=s({},Je,{code:"EPSG:3395",projection:Z,transformation:function(){var a=.5/(Math.PI*Z.R);return Qn(a,.5,-a,.5)}()}),rn=s({},Je,{code:"EPSG:4326",projection:z,transformation:Qn(1/180,1,-1/180,.5)}),tt=s({},Qe,{projection:z,transformation:Qn(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var f=u.lng-a.lng,p=u.lat-a.lat;return Math.sqrt(f*f+p*p)},infinite:!0});Qe.Earth=Je,Qe.EPSG3395=ct,Qe.EPSG3857=vt,Qe.EPSG900913=xt,Qe.EPSG4326=rn,Qe.Simple=tt;var ht=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[c(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[c(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var f=this.getEvents();u.on(f,this),this.once("remove",function(){u.off(f,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});We.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=c(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return c(a)in this._layers},eachLayer:function(a,u){for(var f in this._layers)a.call(u,this._layers[f]);return this},_addLayers:function(a){a=a?U(a)?a:[a]:[];for(var u=0,f=a.length;u<f;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[c(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=c(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,f=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;a=v.minZoom===void 0?a:Math.min(a,v.minZoom),u=v.maxZoom===void 0?u:Math.max(u,v.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Lt=ht.extend({initialize:function(a,u){x(this,u),this._layers={};var f,p;if(a)for(f=0,p=a.length;f<p;f++)this.addLayer(a[f])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),f,p;for(f in this._layers)p=this._layers[f],p[a]&&p[a].apply(p,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var f in this._layers)a.call(u,this._layers[f]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c(a)}}),va=function(a,u){return new Lt(a,u)},Xt=Lt.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Lt.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Lt.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new me;for(var u in this._layers){var f=this._layers[u];a.extend(f.getBounds?f.getBounds():f.getLatLng())}return a}}),rl=function(a,u){return new Xt(a,u)},Ks=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){x(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var f=this._getIconUrl(a);if(!f){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(f,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(p,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(a,u){var f=this.options,p=f[u+"Size"];typeof p=="number"&&(p=[p,p]);var v=ee(p),k=ee(u==="shadow"&&f.shadowAnchor||f.iconAnchor||v&&v.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(f.className||""),k&&(a.style.marginLeft=-k.x+"px",a.style.marginTop=-k.y+"px"),v&&(a.style.width=v.x+"px",a.style.height=v.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return Ee.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function sQ(a){return new Ks(a)}var Yc=Ks.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Yc.imagePath!="string"&&(Yc.imagePath=this._detectIconPath()),(this.options.imagePath||Yc.imagePath)+Ks.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(f,p,v){var k=p.exec(f);return k&&k[v]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=He("div","leaflet-default-icon-path",document.body),u=gs(a,"background-image")||gs(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),nB=Lr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new vs(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Le(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,f=u._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,k=Zn(u._icon),V=f.getPixelBounds(),W=f.getPixelOrigin(),Y=de(V.min._subtract(W).add(v),V.max._subtract(W).subtract(v));if(!Y.contains(k)){var re=ee((Math.max(Y.max.x,k.x)-Y.max.x)/(V.max.x-Y.max.x)-(Math.min(Y.min.x,k.x)-Y.min.x)/(V.min.x-Y.min.x),(Math.max(Y.max.y,k.y)-Y.max.y)/(V.max.y-Y.max.y)-(Math.min(Y.min.y,k.y)-Y.min.y)/(V.min.y-Y.min.y)).multiplyBy(p);f.panBy(re,{animate:!1}),this._draggable._newPos._add(re),this._draggable._startPos._add(re),Ue(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=D(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,f=u._shadow,p=Zn(u._icon),v=u._map.layerPointToLatLng(p);f&&Ue(f,p),u._latlng=v,a.latlng=v,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),kh=ht.extend({options:{icon:new Yc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){x(this,u),this._latlng=ie(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=ie(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=a.icon.createIcon(this._icon),p=!1;f!==this._icon&&(this._icon&&this._removeIcon(),p=!0,a.title&&(f.title=a.title),f.tagName==="IMG"&&(f.alt=a.alt||"")),Le(f,u),a.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(f,"focus",this._panOnFocus,this);var v=a.icon.createShadow(this._shadow),k=!1;v!==this._shadow&&(this._removeShadow(),k=!0),v&&(Le(v,u),v.alt=""),this._shadow=v,a.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&k&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ue(this._icon,a),this._shadow&&Ue(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),nB)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new nB(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Bt(this._icon,a),this._shadow&&Bt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,f=u.iconSize?ee(u.iconSize):ee(0,0),p=u.iconAnchor?ee(u.iconAnchor):ee(0,0);a.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:f.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function iQ(a,u){return new kh(a,u)}var xa=ht.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return x(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nh=xa.extend({options:{fill:!0,radius:10},initialize:function(a,u){x(this,u),this._latlng=ie(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=ie(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return xa.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,f=this._clickTolerance(),p=[a+f,u+f];this._pxBounds=new we(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function aQ(a,u){return new Nh(a,u)}var Kp=Nh.extend({initialize:function(a,u,f){if(typeof u=="number"&&(u=s({},f,{radius:u})),x(this,u),this._latlng=ie(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:xa.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,f=this._map,p=f.options.crs;if(p.distance===Je.distance){var v=Math.PI/180,k=this._mRadius/Je.R/v,V=f.project([u+k,a]),W=f.project([u-k,a]),Y=V.add(W).divideBy(2),re=f.unproject(Y).lat,ve=Math.acos((Math.cos(k*v)-Math.sin(u*v)*Math.sin(re*v))/(Math.cos(u*v)*Math.cos(re*v)))/v;(isNaN(ve)||ve===0)&&(ve=k/Math.cos(Math.PI/180*u)),this._point=Y.subtract(f.getPixelOrigin()),this._radius=isNaN(ve)?0:Y.x-f.project([re,a-ve]).x,this._radiusY=Y.y-V.y}else{var Fe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Fe).x}this._updateBounds()}});function oQ(a,u,f){return new Kp(a,u,f)}var Ii=xa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){x(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,f=null,p=Zr,v,k,V=0,W=this._parts.length;V<W;V++)for(var Y=this._parts[V],re=1,ve=Y.length;re<ve;re++){v=Y[re-1],k=Y[re];var Fe=p(a,v,k,!0);Fe<u&&(u=Fe,f=p(a,v,k))}return f&&(f.distance=Math.sqrt(u)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=ie(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new me,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],f=d(a),p=0,v=a.length;p<v;p++)f?(u[p]=ie(a[p]),this._bounds.extend(u[p])):u[p]=this._convertLatLngs(a[p]);return u},_project:function(){var a=new we;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new G(a,a);this._rawPxBounds&&(this._pxBounds=new we([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,f){var p=a[0]instanceof he,v=a.length,k,V;if(p){for(V=[],k=0;k<v;k++)V[k]=this._map.latLngToLayerPoint(a[k]),f.extend(V[k]);u.push(V)}else for(k=0;k<v;k++)this._projectLatlngs(a[k],u,f)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,f,p,v,k,V,W,Y;for(f=0,v=0,k=this._rings.length;f<k;f++)for(Y=this._rings[f],p=0,V=Y.length;p<V-1;p++)W=jo(Y[p],Y[p+1],a,p,!0),W&&(u[v]=u[v]||[],u[v].push(W[0]),(W[1]!==Y[p+1]||p===V-2)&&(u[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,f=0,p=a.length;f<p;f++)a[f]=qc(a[f],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var f,p,v,k,V,W,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(f=0,k=this._parts.length;f<k;f++)for(W=this._parts[f],p=0,V=W.length,v=V-1;p<V;v=p++)if(!(!u&&p===0)&&Wc(a,W[v],W[p])<=Y)return!0;return!1}});function AQ(a,u){return new Ii(a,u)}Ii._flat=w;var sl=Ii.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return JA(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Ii.prototype._convertLatLngs.call(this,a),f=u.length;return f>=2&&u[0]instanceof he&&u[0].equals(u[f-1])&&u.pop(),u},_setLatLngs:function(a){Ii.prototype._setLatLngs.call(this,a),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,f=new G(u,u);if(a=new we(a.min.subtract(f),a.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,k;p<v;p++)k=ZA(this._rings[p],a,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,f,p,v,k,V,W,Y,re;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(k=0,Y=this._parts.length;k<Y;k++)for(f=this._parts[k],V=0,re=f.length,W=re-1;V<re;W=V++)p=f[V],v=f[W],p.y>a.y!=v.y>a.y&&a.x<(v.x-p.x)*(a.y-p.y)/(v.y-p.y)+p.x&&(u=!u);return u||Ii.prototype._containsPoint.call(this,a,!0)}});function lQ(a,u){return new sl(a,u)}var Ti=Xt.extend({initialize:function(a,u){x(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=U(a)?a:a.features,f,p,v;if(u){for(f=0,p=u.length;f<p;f++)v=u[f],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var k=this.options;if(k.filter&&!k.filter(a))return this;var V=Uh(a,k);return V?(V.feature=Ph(a),V.defaultOptions=V.options,this.resetStyle(V),k.onEachFeature&&k.onEachFeature(a,V),this.addLayer(V)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function Uh(a,u){var f=a.type==="Feature"?a.geometry:a,p=f?f.coordinates:null,v=[],k=u&&u.pointToLayer,V=u&&u.coordsToLatLng||Gp,W,Y,re,ve;if(!p&&!f)return null;switch(f.type){case"Point":return W=V(p),rB(k,a,W,u);case"MultiPoint":for(re=0,ve=p.length;re<ve;re++)W=V(p[re]),v.push(rB(k,a,W,u));return new Xt(v);case"LineString":case"MultiLineString":return Y=Fh(p,f.type==="LineString"?0:1,V),new Ii(Y,u);case"Polygon":case"MultiPolygon":return Y=Fh(p,f.type==="Polygon"?1:2,V),new sl(Y,u);case"GeometryCollection":for(re=0,ve=f.geometries.length;re<ve;re++){var Fe=Uh({geometry:f.geometries[re],type:"Feature",properties:a.properties},u);Fe&&v.push(Fe)}return new Xt(v);case"FeatureCollection":for(re=0,ve=f.features.length;re<ve;re++){var Ke=Uh(f.features[re],u);Ke&&v.push(Ke)}return new Xt(v);default:throw new Error("Invalid GeoJSON object.")}}function rB(a,u,f,p){return a?a(u,f):new kh(f,p&&p.markersInheritOptions&&p)}function Gp(a){return new he(a[1],a[0],a[2])}function Fh(a,u,f){for(var p=[],v=0,k=a.length,V;v<k;v++)V=u?Fh(a[v],u-1,f):(f||Gp)(a[v]),p.push(V);return p}function zp(a,u){return a=ie(a),a.alt!==void 0?[y(a.lng,u),y(a.lat,u),y(a.alt,u)]:[y(a.lng,u),y(a.lat,u)]}function Qh(a,u,f,p){for(var v=[],k=0,V=a.length;k<V;k++)v.push(u?Qh(a[k],d(a[k])?0:u-1,f,p):zp(a[k],p));return!u&&f&&v.length>0&&v.push(v[0].slice()),v}function il(a,u){return a.feature?s({},a.feature,{geometry:u}):Ph(u)}function Ph(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var qp={toGeoJSON:function(a){return il(this,{type:"Point",coordinates:zp(this.getLatLng(),a)})}};kh.include(qp),Kp.include(qp),Nh.include(qp),Ii.include({toGeoJSON:function(a){var u=!d(this._latlngs),f=Qh(this._latlngs,u?1:0,!1,a);return il(this,{type:(u?"Multi":"")+"LineString",coordinates:f})}}),sl.include({toGeoJSON:function(a){var u=!d(this._latlngs),f=u&&!d(this._latlngs[0]),p=Qh(this._latlngs,f?2:u?1:0,!0,a);return u||(p=[p]),il(this,{type:(f?"Multi":"")+"Polygon",coordinates:p})}}),Lt.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(f){u.push(f.toGeoJSON(a).geometry.coordinates)}),il(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var f=u==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var k=v.toGeoJSON(a);if(f)p.push(k.geometry);else{var V=Ph(k);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),f?il(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function sB(a,u){return new Ti(a,u)}var cQ=sB,Rh=ht.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,f){this._url=a,this._bounds=pe(u),x(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&ps(this._image),this},bringToBack:function(){return this._map&&ys(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=pe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:He("img");if(Le(u,"leaflet-image-layer"),this._zoomAnimated&&Le(u,"leaflet-zoom-animated"),this.options.className&&Le(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onload=o(this.fire,this,"load"),u.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Pr(this._image,f,u)},_reset:function(){var a=this._image,u=new we(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=u.getSize();Ue(a,u.min),a.style.width=f.x+"px",a.style.height=f.y+"px"},_updateOpacity:function(){Bt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),uQ=function(a,u,f){return new Rh(a,u,f)},iB=Rh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:He("video");if(Le(u,"leaflet-image-layer"),this._zoomAnimated&&Le(u,"leaflet-zoom-animated"),this.options.className&&Le(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onloadeddata=o(this.fire,this,"load"),a){for(var f=u.getElementsByTagName("source"),p=[],v=0;v<f.length;v++)p.push(f[v].src);this._url=f.length>0?p:[u.src];return}U(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var V=He("source");V.src=this._url[k],u.appendChild(V)}}});function dQ(a,u,f){return new iB(a,u,f)}var aB=Rh.extend({_initImage:function(){var a=this._image=this._url;Le(a,"leaflet-image-layer"),this._zoomAnimated&&Le(a,"leaflet-zoom-animated"),this.options.className&&Le(a,this.options.className),a.onselectstart=g,a.onmousemove=g}});function hQ(a,u,f){return new aB(a,u,f)}var Gs=ht.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof he||U(a))?(this._latlng=ie(a),x(this,u)):(x(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Bt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Bt(this._container,1),this.bringToFront(),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Bt(this._container,0),this._removeTimeout=setTimeout(o(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ie(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ps(this._container),this},bringToBack:function(){return this._map&&ys(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof Xt){u=null;var f=this._source._layers;for(var p in f)if(f[p]._map){u=f[p];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=ee(this.options.offset),f=this._getAnchor();this._zoomAnimated?Ue(this._container,a.add(f)):u=u.add(a).add(f);var p=this._containerBottom=-u.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});We.include({_initOverlay:function(a,u,f,p){var v=u;return v instanceof a||(v=new a(p).setContent(u)),f&&v.setLatLng(f),v}}),ht.include({_initOverlay:function(a,u,f,p){var v=f;return v instanceof a?(x(v,p),v._source=this):(v=u&&!p?u:new a(p,this),v.setContent(f)),v}});var Lh=Gs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Gs.prototype.openOn.call(this,a)},onAdd:function(a){Gs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xa||this._source.on("preclick",Xr))},onRemove:function(a){Gs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xa||this._source.off("preclick",Xr))},getEvents:function(){var a=Gs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=He("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=He("div",a+"-content-wrapper",u);if(this._contentNode=He("div",a+"-content",f),ya(u),pa(this._contentNode),Ne(u,"contextmenu",Xr),this._tipContainer=He("div",a+"-tip-container",u),this._tip=He("div",a+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=He("a",a+"-close-button",u);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(p,"click",function(v){Rt(v),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var f=a.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),u.width=f+1+"px",u.whiteSpace="",u.height="";var p=a.offsetHeight,v=this.options.maxHeight,k="leaflet-popup-scrolled";v&&p>v?(u.height=v+"px",Le(a,k)):gt(a,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),f=this._getAnchor();Ue(this._container,u.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(gs(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+u,p=this._containerWidth,v=new G(this._containerLeft,-f-this._containerBottom);v._add(Zn(this._container));var k=a.layerPointToContainerPoint(v),V=ee(this.options.autoPanPadding),W=ee(this.options.autoPanPaddingTopLeft||V),Y=ee(this.options.autoPanPaddingBottomRight||V),re=a.getSize(),ve=0,Fe=0;k.x+p+Y.x>re.x&&(ve=k.x+p-re.x+Y.x),k.x-ve-W.x<0&&(ve=k.x-W.x),k.y+f+Y.y>re.y&&(Fe=k.y+f-re.y+Y.y),k.y-Fe-W.y<0&&(Fe=k.y-W.y),(ve||Fe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([ve,Fe]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),fQ=function(a,u){return new Lh(a,u)};We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(a,u,f){return this._initOverlay(Lh,a,u,f).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),ht.include({bindPopup:function(a,u){return this._popup=this._initOverlay(Lh,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Xt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Rr(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof xa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var jh=Gs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Gs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Gs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Gs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,f,p=this._map,v=this._container,k=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(a),W=this.options.direction,Y=v.offsetWidth,re=v.offsetHeight,ve=ee(this.options.offset),Fe=this._getAnchor();W==="top"?(u=Y/2,f=re):W==="bottom"?(u=Y/2,f=0):W==="center"?(u=Y/2,f=re/2):W==="right"?(u=0,f=re/2):W==="left"?(u=Y,f=re/2):V.x<k.x?(W="right",u=0,f=re/2):(W="left",u=Y+(ve.x+Fe.x)*2,f=re/2),a=a.subtract(ee(u,f,!0)).add(ve).add(Fe),gt(v,"leaflet-tooltip-right"),gt(v,"leaflet-tooltip-left"),gt(v,"leaflet-tooltip-top"),gt(v,"leaflet-tooltip-bottom"),Le(v,"leaflet-tooltip-"+W),Ue(v,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Bt(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mQ=function(a,u){return new jh(a,u)};We.include({openTooltip:function(a,u,f){return this._initOverlay(jh,a,u,f).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),ht.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(jh,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[u](f),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Xt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(Ne(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ne(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,f,p;this._tooltip.options.sticky&&a.originalEvent&&(f=this._map.mouseEventToContainerPoint(a.originalEvent),p=this._map.containerPointToLayerPoint(f),u=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(u)}});var oB=Ks.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Bi(u),u.appendChild(f.html)):u.innerHTML=f.html!==!1?f.html:"",f.bgPos){var p=ee(f.bgPos);u.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function gQ(a){return new oB(a)}Ks.Default=Yc;var Xc=ht.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){x(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),lt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ps(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ys(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof G?a:new G(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,f=-a(-1/0,1/0),p=0,v=u.length,k;p<v;p++)k=u[p].style.zIndex,u[p]!==this._container&&k&&(f=a(f,+k));isFinite(f)&&(this.options.zIndex=f+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ee.ielt9){Bt(this._container,this.options.opacity);var a=+new Date,u=!1,f=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var k=Math.min(1,(a-v.loaded)/200);Bt(v.el,k),k<1?u=!0:(v.active?f=!0:this._onOpaqueTile(v),v.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),u&&(K(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===a?(this._levels[f].el.style.zIndex=u-Math.abs(a-f),this._onUpdateLevel(f)):(lt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var p=this._levels[a],v=this._map;return p||(p=this._levels[a]={},p.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=u,p.origin=v.project(v.unproject(v.getPixelOrigin()),a).round(),p.zoom=a,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var a,u,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var p=u.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)lt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,f,p){var v=Math.floor(a/2),k=Math.floor(u/2),V=f-1,W=new G(+v,+k);W.z=+V;var Y=this._tileCoordsToKey(W),re=this._tiles[Y];return re&&re.active?(re.retain=!0,!0):(re&&re.loaded&&(re.retain=!0),V>p?this._retainParent(v,k,V,p):!1)},_retainChildren:function(a,u,f,p){for(var v=2*a;v<2*a+2;v++)for(var k=2*u;k<2*u+2;k++){var V=new G(v,k);V.z=f+1;var W=this._tileCoordsToKey(V),Y=this._tiles[W];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);f+1<p&&this._retainChildren(v,k,f+1,p)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,f,p){var v=Math.round(u);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var k=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||k)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(a),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var f in this._levels)this._setZoomTransform(this._levels[f],a,u)},_setZoomTransform:function(a,u,f){var p=this._map.getZoomScale(f,a.zoom),v=a.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(u,f)).round();Ee.any3d?Pr(a.el,v,p):Ue(a.el,v)},_resetGrid:function(){var a=this._map,u=a.options.crs,f=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],p).x/f.x),Math.ceil(a.project([0,u.wrapLng[1]],p).x/f.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],p).y/f.x),Math.ceil(a.project([u.wrapLat[1],0],p).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,f=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),p=u.getZoomScale(f,this._tileZoom),v=u.project(a,this._tileZoom).floor(),k=u.getSize().divideBy(p*2);return new we(v.subtract(k),v.add(k))},_update:function(a){var u=this._map;if(u){var f=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(a),v=this._pxBoundsToTileRange(p),k=v.getCenter(),V=[],W=this.options.keepBuffer,Y=new we(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var re in this._tiles){var ve=this._tiles[re].coords;(ve.z!==this._tileZoom||!Y.contains(new G(ve.x,ve.y)))&&(this._tiles[re].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(a,f);return}for(var Fe=v.min.y;Fe<=v.max.y;Fe++)for(var Ke=v.min.x;Ke<=v.max.x;Ke++){var tr=new G(Ke,Fe);if(tr.z=this._tileZoom,!!this._isValidTile(tr)){var vn=this._tiles[this._tileCoordsToKey(tr)];vn?vn.current=!0:V.push(tr)}}if(V.sort(function(pr,ol){return pr.distanceTo(k)-ol.distanceTo(k)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Jr=document.createDocumentFragment();for(Ke=0;Ke<V.length;Ke++)this._addTile(V[Ke],Jr);this._level.el.appendChild(Jr)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var f=this._globalTileRange;if(!u.wrapLng&&(a.x<f.min.x||a.x>f.max.x)||!u.wrapLat&&(a.y<f.min.y||a.y>f.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(a);return pe(this.options.bounds).overlaps(p)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,f=this.getTileSize(),p=a.scaleBy(f),v=p.add(f),k=u.unproject(p,a.z),V=u.unproject(v,a.z);return[k,V]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),f=new me(u[0],u[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),f=new G(+u[0],+u[1]);return f.z=+u[2],f},_removeTile:function(a){var u=this._tiles[a];u&&(lt(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Le(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=g,a.onmousemove=g,Ee.ielt9&&this.options.opacity<1&&Bt(a,this.options.opacity)},_addTile:function(a,u){var f=this._getTilePos(a),p=this._tileCoordsToKey(a),v=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(v),this.createTile.length<2&&D(o(this._tileReady,this,a,null,v)),Ue(v,f),this._tiles[p]={el:v,coords:a,current:!0},u.appendChild(v),this.fire("tileloadstart",{tile:v,coords:a})},_tileReady:function(a,u,f){u&&this.fire("tileerror",{error:u,tile:f,coords:a});var p=this._tileCoordsToKey(a);f=this._tiles[p],f&&(f.loaded=+new Date,this._map._fadeAnimated?(Bt(f.el,0),K(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),u||(Le(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ee.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new G(this._wrapX?m(a.x,this._wrapX):a.x,this._wrapY?m(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new we(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function pQ(a){return new Xc(a)}var al=Xc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=x(this,u),u.detectRetina&&Ee.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var f=document.createElement("img");return Ne(f,"load",o(this._tileOnLoad,this,u,f)),Ne(f,"error",o(this._tileOnError,this,u,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(a),f},getTileUrl:function(a){var u={r:Ee.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=f),u["-y"]=f}return E(this._url,s(u,this.options))},_tileOnLoad:function(a,u){Ee.ielt9?setTimeout(o(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,f){var p=this.options.errorTileUrl;p&&u.getAttribute("src")!==p&&(u.src=p),a(f,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,f=this.options.zoomReverse,p=this.options.zoomOffset;return f&&(a=u-a),a+p},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=g,u.onerror=g,!u.complete)){u.src=H;var f=this._tiles[a].coords;lt(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:f})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",H),Xc.prototype._removeTile.call(this,a)},_tileReady:function(a,u,f){if(!(!this._map||f&&f.getAttribute("src")===H))return Xc.prototype._tileReady.call(this,a,u,f)}});function AB(a,u){return new al(a,u)}var lB=al.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var f=s({},this.defaultWmsParams);for(var p in u)p in this.options||(f[p]=u[p]);u=x(this,u);var v=u.detectRetina&&Ee.retina?2:1,k=this.getTileSize();f.width=k.x*v,f.height=k.y*v,this.wmsParams=f},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,al.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),f=this._crs,p=de(f.project(u[0]),f.project(u[1])),v=p.min,k=p.max,V=(this._wmsVersion>=1.3&&this._crs===rn?[v.y,v.x,k.y,k.x]:[v.x,v.y,k.x,k.y]).join(","),W=al.prototype.getTileUrl.call(this,a);return W+S(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(a,u){return s(this.wmsParams,a),u||this.redraw(),this}});function yQ(a,u){return new lB(a,u)}al.WMS=lB,AB.wms=yQ;var Si=ht.extend({options:{padding:.1},initialize:function(a){x(this,a),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var f=this._map.getZoomScale(u,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,u),k=p.multiplyBy(-f).add(v).subtract(this._map._getNewPixelOrigin(a,u));Ee.any3d?Pr(this._container,k,f):Ue(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),f=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new we(f,f.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cB=Si.extend({options:{tolerance:0},getEvents:function(){var a=Si.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ne(a,"mousemove",this._onMouseMove,this),Ne(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,lt(this._container),at(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Si.prototype._update.call(this);var a=this._bounds,u=this._container,f=a.getSize(),p=Ee.retina?2:1;Ue(u,a.min),u.width=p*f.x,u.height=p*f.y,u.style.width=f.x+"px",u.style.height=f.y+"px",Ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[c(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,f=u.next,p=u.prev;f?f.prev=p:this._drawLast=p,p?p.next=f:this._drawFirst=f,delete a._order,delete this._layers[c(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),f=[],p,v;for(v=0;v<u.length;v++){if(p=Number(u[v]),isNaN(p))return;f.push(p)}a.options._dashArray=f}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new we,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var f=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)a=p.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var f,p,v,k,V=a._parts,W=V.length,Y=this._ctx;if(W){for(Y.beginPath(),f=0;f<W;f++){for(p=0,v=V[f].length;p<v;p++)k=V[f][p],Y[p?"lineTo":"moveTo"](k.x,k.y);u&&Y.closePath()}this._fillStroke(Y,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,f=this._ctx,p=Math.max(Math.round(a._radius),1),v=(Math.max(Math.round(a._radiusY),1)||p)/p;v!==1&&(f.save(),f.scale(1,v)),f.beginPath(),f.arc(u.x,u.y/v,p,0,Math.PI*2,!1),v!==1&&f.restore(),this._fillStroke(f,a)}},_fillStroke:function(a,u){var f=u.options;f.fill&&(a.globalAlpha=f.fillOpacity,a.fillStyle=f.fillColor||f.color,a.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=f.opacity,a.lineWidth=f.weight,a.strokeStyle=f.color,a.lineCap=f.lineCap,a.lineJoin=f.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),f,p,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(f))&&(p=f);this._fireEvent(p?[p]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(gt(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var f,p,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(u)&&(p=f);p!==this._hoveredLayer&&(this._handleMouseOut(a),p&&(Le(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,f){this._map._fireDOMEvent(u,f||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var f=u.next,p=u.prev;if(f)f.prev=p;else return;p?p.next=f:f&&(this._drawFirst=f),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var f=u.next,p=u.prev;if(p)p.next=f;else return;f?f.prev=p:p&&(this._drawLast=p),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function uB(a){return Ee.canvas?new cB(a):null}var Zc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),wQ={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Si.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=Zc("shape");Le(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=Zc("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;lt(u),a.removeInteractiveTarget(u),delete this._layers[c(a)]},_updateStyle:function(a){var u=a._stroke,f=a._fill,p=a.options,v=a._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(u||(u=a._stroke=Zc("stroke")),v.appendChild(u),u.weight=p.weight+"px",u.color=p.color,u.opacity=p.opacity,p.dashArray?u.dashStyle=U(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=p.lineCap.replace("butt","flat"),u.joinstyle=p.lineJoin):u&&(v.removeChild(u),a._stroke=null),p.fill?(f||(f=a._fill=Zc("fill")),v.appendChild(f),f.color=p.fillColor||p.color,f.opacity=p.fillOpacity):f&&(v.removeChild(f),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),f=Math.round(a._radius),p=Math.round(a._radiusY||f);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+f+","+p+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){ps(a._container)},_bringToBack:function(a){ys(a._container)}},Dh=Ee.vml?Zc:et,Jc=Si.extend({_initContainer:function(){this._container=Dh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Dh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),at(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Si.prototype._update.call(this);var a=this._bounds,u=a.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,f.setAttribute("width",u.x),f.setAttribute("height",u.y)),Ue(f,a.min),f.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=Dh("path");a.options.className&&Le(u,a.options.className),a.options.interactive&&Le(u,"leaflet-interactive"),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){lt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[c(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,f=a.options;u&&(f.stroke?(u.setAttribute("stroke",f.color),u.setAttribute("stroke-opacity",f.opacity),u.setAttribute("stroke-width",f.weight),u.setAttribute("stroke-linecap",f.lineCap),u.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?u.setAttribute("stroke-dasharray",f.dashArray):u.removeAttribute("stroke-dasharray"),f.dashOffset?u.setAttribute("stroke-dashoffset",f.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),f.fill?(u.setAttribute("fill",f.fillColor||f.color),u.setAttribute("fill-opacity",f.fillOpacity),u.setAttribute("fill-rule",f.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,un(a._parts,u))},_updateCircle:function(a){var u=a._point,f=Math.max(Math.round(a._radius),1),p=Math.max(Math.round(a._radiusY),1)||f,v="a"+f+","+p+" 0 1,0 ",k=a._empty()?"M0 0":"M"+(u.x-f)+","+u.y+v+f*2+",0 "+v+-f*2+",0 ";this._setPath(a,k)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){ps(a._path)},_bringToBack:function(a){ys(a._path)}});Ee.vml&&Jc.include(wQ);function dB(a){return Ee.svg||Ee.vml?new Jc(a):null}We.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&uB(a)||dB(a)}});var hB=sl.extend({initialize:function(a,u){sl.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=pe(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function vQ(a,u){return new hB(a,u)}Jc.create=Dh,Jc.pointsToPath=un,Ti.geometryToLayer=Uh,Ti.coordsToLatLng=Gp,Ti.coordsToLatLngs=Fh,Ti.latLngToCoords=zp,Ti.latLngsToCoords=Qh,Ti.getFeature=il,Ti.asFeature=Ph,We.mergeOptions({boxZoom:!0});var fB=Lr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),hr(),P(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ne(document,{contextmenu:Rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),Le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new we(this._point,this._startPoint),f=u.getSize();Ue(this._box,u.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(lt(this._box),gt(this._container,"leaflet-crosshair")),fr(),q(),at(document,{contextmenu:Rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var u=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});We.addInitHook("addHandler","boxZoom",fB),We.mergeOptions({doubleClickZoom:!0});var mB=Lr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,f=u.getZoom(),p=u.options.zoomDelta,v=a.originalEvent.shiftKey?f-p:f+p;u.options.doubleClickZoom==="center"?u.setZoom(v):u.setZoomAround(a.containerPoint,v)}});We.addInitHook("addHandler","doubleClickZoom",mB),We.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gB=Lr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new vs(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=pe(this._map.options.maxBounds);this._offsetLimit=de(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),f=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-u+f)%a+u-f,k=(p+u+f)%a-u-f,V=Math.abs(v+f)<Math.abs(k+f)?v:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(a){var u=this._map,f=u.options,p=!f.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),p)u.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,V=f.easeLinearity,W=v.multiplyBy(V/k),Y=W.distanceTo([0,0]),re=Math.min(f.inertiaMaxSpeed,Y),ve=W.multiplyBy(re/Y),Fe=re/(f.inertiaDeceleration*V),Ke=ve.multiplyBy(-Fe/2).round();!Ke.x&&!Ke.y?u.fire("moveend"):(Ke=u._limitOffset(Ke,u.options.maxBounds),D(function(){u.panBy(Ke,{duration:Fe,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});We.addInitHook("addHandler","dragging",gB),We.mergeOptions({keyboard:!0,keyboardPanDelta:80});var pB=Lr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ne(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),at(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,f=a.scrollTop||u.scrollTop,p=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(p,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},f=this.keyCodes,p,v;for(p=0,v=f.left.length;p<v;p++)u[f.left[p]]=[-1*a,0];for(p=0,v=f.right.length;p<v;p++)u[f.right[p]]=[a,0];for(p=0,v=f.down.length;p<v;p++)u[f.down[p]]=[0,a];for(p=0,v=f.up.length;p<v;p++)u[f.up[p]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},f=this.keyCodes,p,v;for(p=0,v=f.zoomIn.length;p<v;p++)u[f.zoomIn[p]]=a;for(p=0,v=f.zoomOut.length;p<v;p++)u[f.zoomOut[p]]=-a},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){at(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,f=this._map,p;if(u in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(p=this._panKeys[u],a.shiftKey&&(p=ee(p).multiplyBy(3)),f.options.maxBounds&&(p=f._limitOffset(ee(p),f.options.maxBounds)),f.options.worldCopyJump){var v=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(p)));f.panTo(v)}else f.panBy(p)}else if(u in this._zoomKeys)f.setZoom(f.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Rr(a)}}});We.addInitHook("addHandler","keyboard",pB),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yB=Lr.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=Bh(a),f=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var p=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),p),Rr(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),f=this._map.options.zoomSnap||0;a._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,k=f?Math.ceil(v/f)*f:v,V=a._limitZoom(u+(this._delta>0?k:-k))-u;this._delta=0,this._startTime=null,V&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+V):a.setZoomAround(this._lastMousePos,u+V))}});We.addInitHook("addHandler","scrollWheelZoom",yB);var xQ=600;We.mergeOptions({tapHold:Ee.touchNative&&Ee.safari&&Ee.mobile,tapTolerance:15});var wB=Lr.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new G(u.clientX,u.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",Rt),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),xQ),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){at(document,"touchend",Rt),at(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new G(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var f=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});f._simulated=!0,u.target.dispatchEvent(f)}});We.addInitHook("addHandler","tapHold",wB),We.mergeOptions({touchZoom:Ee.touch,bounceAtZoomLimits:!0});var vB=Lr.extend({addHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var f=u.mouseEventToContainerPoint(a.touches[0]),p=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(f.add(p)._divideBy(2))),this._startDist=f.distanceTo(p),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),Rt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,f=u.mouseEventToContainerPoint(a.touches[0]),p=u.mouseEventToContainerPoint(a.touches[1]),v=f.distanceTo(p)/this._startDist;if(this._zoom=u.getScaleZoom(v,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&v<1||this._zoom>u.getMaxZoom()&&v>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var k=f._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&k.x===0&&k.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var V=o(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(V,this,!0),Rt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});We.addInitHook("addHandler","touchZoom",vB),We.BoxZoom=fB,We.DoubleClickZoom=mB,We.Drag=gB,We.Keyboard=pB,We.ScrollWheelZoom=yB,We.TapHold=wB,We.TouchZoom=vB,n.Bounds=we,n.Browser=Ee,n.CRS=Qe,n.Canvas=cB,n.Circle=Kp,n.CircleMarker=Nh,n.Class=X,n.Control=gr,n.DivIcon=oB,n.DivOverlay=Gs,n.DomEvent=bh,n.DomUtil=En,n.Draggable=vs,n.Evented=Ae,n.FeatureGroup=Xt,n.GeoJSON=Ti,n.GridLayer=Xc,n.Handler=Lr,n.Icon=Ks,n.ImageOverlay=Rh,n.LatLng=he,n.LatLngBounds=me,n.Layer=ht,n.LayerGroup=Lt,n.LineUtil=F,n.Map=We,n.Marker=kh,n.Mixin=Lo,n.Path=xa,n.Point=G,n.PolyUtil=tl,n.Polygon=sl,n.Polyline=Ii,n.Popup=Lh,n.PosAnimation=Kc,n.Projection=ce,n.Rectangle=hB,n.Renderer=Si,n.SVG=Jc,n.SVGOverlay=aB,n.TileLayer=al,n.Tooltip=jh,n.Transformation=$n,n.Util=j,n.VideoOverlay=iB,n.bind=o,n.bounds=de,n.canvas=uB,n.circle=oQ,n.circleMarker=aQ,n.control=er,n.divIcon=gQ,n.extend=s,n.featureGroup=rl,n.geoJSON=sB,n.geoJson=cQ,n.gridLayer=pQ,n.icon=sQ,n.imageOverlay=uQ,n.latLng=ie,n.latLngBounds=pe,n.layerGroup=va,n.map=$A,n.marker=iQ,n.point=ee,n.polygon=lQ,n.polyline=AQ,n.popup=fQ,n.rectangle=vQ,n.setOptions=x,n.stamp=c,n.svg=dB,n.svgOverlay=hQ,n.tileLayer=AB,n.tooltip=mQ,n.transformation=Qn,n.version=r,n.videoOverlay=dQ;var _Q=window.L;n.noConflict=function(){return window.L=_Q,this},window.L=n})})(Hw,Hw.exports);var yh=Hw.exports;const L_=Tc(yh);function j_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function D_(t,e){return e==null?function(r,s){const i=R.useRef();return i.current||(i.current=t(r,s)),i}:function(r,s){const i=R.useRef();i.current||(i.current=t(r,s));const o=R.useRef(r),{instance:l}=i.current;return R.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),i}}function y6(t,e){R.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var i;(i=e.layerContainer)==null||i.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function SU(t){return function(n){const r=P_(),s=t(R_(n,r),r);return CU(r.map,n.attribution),TU(s.current,n.eventHandlers),y6(s.current,r),s}}function w6(t,e){const n=D_(t,e),r=SU(n);return f6(r)}function v6(t,e){const n=D_(t),r=p6(n,e);return m6(r)}function x6(t,e){const n=D_(t,e),r=SU(n);return g6(r)}function _6(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function B6(){return P_().map}function Vw(){return Vw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(this,arguments)}function b6({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:i,placeholder:o,style:l,whenReady:c,zoom:h,...m},g){const[y]=R.useState({className:s,id:i,style:l}),[B,b]=R.useState(null);R.useImperativeHandle(g,()=>(B==null?void 0:B.map)??null,[B]);const x=R.useCallback(I=>{if(I!==null&&B===null){const E=new yh.Map(I,m);n!=null&&h!=null?E.setView(n,h):t!=null&&E.fitBounds(t,e),c!=null&&E.whenReady(c),b(d6(E))}},[]);R.useEffect(()=>()=>{B==null||B.map.remove()},[B]);const S=B?Gi.createElement(IU,{value:B},r):o??null;return Gi.createElement("div",Vw({},y,{ref:x}),S)}const C6=R.forwardRef(b6),LE=w6(function({position:e,...n},r){const s=new yh.Marker(e,n);return j_(s,h6(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),jE=v6(function(e,n){const r=new yh.Popup(e,n.overlayContainer);return j_(r,n)},function(e,n,{position:r},s){R.useEffect(function(){const{instance:o}=e;function l(h){h.popup===o&&(o.update(),s(!0))}function c(h){h.popup===o&&s(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(r!=null&&o.setLatLng(r),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var m;n.map.off({popupopen:l,popupclose:c}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(o)}},[e,n,s,r])}),E6=x6(function({url:e,...n},r){const s=new yh.TileLayer(e,R_(n,r));return j_(s,r)},function(e,n,r){_6(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...h},m)=>R.createElement("svg",{ref:m,...I6,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${T6(t)}`,l].join(" "),...h},[...e.map(([g,y])=>R.createElement(g,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=fe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=fe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=fe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=fe("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=fe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=fe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=fe("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=fe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=fe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=fe("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=fe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=fe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=fe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=fe("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=fe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=fe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=fe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=fe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=fe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=fe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=fe("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"bpx1uq"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17",key:"1pd0s7"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7",key:"zq5xbz"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=fe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=fe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=fe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=fe("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=fe("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=fe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=fe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=fe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=fe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=fe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=fe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=fe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);delete L_.Icon.Default.prototype._getIconUrl;L_.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const HE=t=>L_.divIcon({className:"custom-marker",html:`<div style="background-color: ${t}; width: 24px; height: 24px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>`,iconSize:[24,24],iconAnchor:[12,24],popupAnchor:[0,-24]}),fu={accommodation:{label:"Accommodation",color:"#3B82F6",icon:kU},costume:{label:"Costume Pickup",color:"#F59E0B",icon:Z6},fete:{label:"Fete Location",color:"#EC4899",icon:PU},meetup:{label:"Meetup Spot",color:"#10B981",icon:ir},scraped:{label:"Live Events",color:"#8B5CF6",icon:kr}};function nK({center:t,zoom:e}){const n=B6();return R.useEffect(()=>{t&&n.setView(t,e||13)},[t,e,n]),null}function rK(t,e,n,r){const i=(n-t)*Math.PI/180,o=(r-e)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}const VE={trinidad:{center:[10.6918,-61.2225],zoom:11,country:"Trinidad & Tobago"},"stkitts-sugar-mas":{center:[17.3026,-62.7177],zoom:12,country:"St. Kitts"},stcroix:{center:[17.7246,-64.8348],zoom:11,country:"St. Croix, USVI"},dominica:{center:[15.415,-61.371],zoom:11,country:"Dominica"},aruba:{center:[12.5211,-69.9683],zoom:12,country:"Aruba"},"guyana-mashramani":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},guyana:{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},"guyana-independence":{center:[6.8013,-58.1551],zoom:12,country:"Guyana"},jamaica:{center:[18.0179,-76.8099],zoom:11,country:"Jamaica"},stmaarten:{center:[18.0425,-63.0548],zoom:12,country:"St. Maarten"},bahamas:{center:[25.0343,-77.3963],zoom:12,country:"Bahamas"},bermuda:{center:[32.3078,-64.7505],zoom:13,country:"Bermuda"},vincymas:{center:[13.1587,-61.2248],zoom:12,country:"St. Vincent"},antigua:{center:[17.1274,-61.8468],zoom:12,country:"Antigua"},stlucia:{center:[14.0101,-60.987],zoom:11,country:"St. Lucia"},tobago:{center:[11.1889,-60.732],zoom:11,country:"Tobago"},nottinghill:{center:[51.5156,-.205],zoom:14,country:"London, UK"},miami:{center:[25.7617,-80.1918],zoom:11,country:"Miami, FL"},tampa:{center:[27.9506,-82.4572],zoom:12,country:"Tampa, FL"},"cayman-batabano":{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},stthomas:{center:[18.3358,-64.8963],zoom:13,country:"St. Thomas, USVI"},atlanta:{center:[33.749,-84.388],zoom:12,country:"Atlanta, GA"},hollywood:{center:[34.0928,-118.3287],zoom:13,country:"Hollywood, CA"},caymas:{center:[19.2869,-81.3674],zoom:13,country:"Cayman Islands"},toronto:{center:[43.65107,-79.347015],zoom:12,country:"Toronto, Canada"},barbados:{center:[13.1939,-59.5432],zoom:12,country:"Barbados"},nevis:{center:[17.15,-62.58],zoom:12,country:"Nevis"},grenada:{center:[12.0529,-61.7523],zoom:12,country:"Grenada"},"ny-labor-day":{center:[40.6782,-73.9442],zoom:13,country:"Brooklyn, NY"},japan:{center:[35.6762,139.6503],zoom:10,country:"Tokyo, Japan"}};function sK({locations:t=[],scrapedEvents:e=[],onLocationsChange:n,carnivalName:r,carnivalId:s}){const[i,o]=R.useState(!1),[l,c]=R.useState({name:"",type:"fete",lat:"",lng:""}),[h,m]=R.useState(""),[g,y]=R.useState([]),[B,b]=R.useState(!1),x=t.find(T=>T.type==="accommodation"),S=VE[s]||VE.trinidad,I=R.useMemo(()=>{if(x)return[x.lat,x.lng];if(t.length>0)return[t[0].lat,t[0].lng];const T=e.find(C=>C.lat&&C.lng);return T?[T.lat,T.lng]:S.center},[t,x,S,e]),E=async()=>{if(h.trim()){b(!0);try{const C=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h)}`)).json();y(C.slice(0,5))}catch(T){console.error("Search error:",T)}b(!1)}},U=T=>{c({...l,lat:parseFloat(T.lat),lng:parseFloat(T.lon),name:l.name||T.display_name.split(",")[0]}),y([]),m("")},M=()=>{if(!l.name||!l.lat||!l.lng)return;const T={id:Date.now().toString(),name:l.name,type:l.type,lat:parseFloat(l.lat),lng:parseFloat(l.lng)};n([...t,T]),c({name:"",type:"fete",lat:"",lng:""}),o(!1)},H=T=>{n(t.filter(C=>C.id!==T))},O=T=>{if(!x||T.type==="accommodation")return null;const C=rK(x.lat,x.lng,T.lat,T.lng);return C<1?`${Math.round(C*1e3)}m`:`${C.toFixed(1)}km`};return A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(kr,{className:"w-5 h-5 text-purple-500"}),"Fete Map - ",r]}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-7",children:[" ",S.country]})]}),A.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition",children:[A.jsx(tc,{className:"w-4 h-4"}),"Add Pin"]})]}),i&&A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"text",placeholder:"Location name",value:l.name,onChange:T=>c({...l,name:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("select",{value:l.type,onChange:T=>c({...l,type:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white",children:Object.entries(fu).map(([T,{label:C}])=>A.jsx("option",{value:T,children:C},T))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Search for a place...",value:h,onChange:T=>m(T.target.value),onKeyPress:T=>T.key==="Enter"&&E(),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("button",{onClick:E,disabled:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:B?"...":"Search"})]}),g.length>0&&A.jsx("ul",{className:"bg-white dark:bg-gray-600 border dark:border-gray-500 rounded-lg max-h-40 overflow-y-auto",children:g.map((T,C)=>A.jsx("li",{onClick:()=>U(T),className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-500 cursor-pointer text-sm truncate dark:text-white",children:T.display_name},C))}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsx("input",{type:"number",step:"any",placeholder:"Latitude",value:l.lat,onChange:T=>c({...l,lat:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),A.jsx("input",{type:"number",step:"any",placeholder:"Longitude",value:l.lng,onChange:T=>c({...l,lng:T.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:M,disabled:!l.name||!l.lat||!l.lng,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Location"}),A.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}),A.jsx("div",{className:"h-[400px] rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-600",children:A.jsxs(C6,{center:I,zoom:S.zoom,style:{height:"100%",width:"100%"},children:[A.jsx(E6,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),A.jsx(nK,{center:I,zoom:S.zoom}),t.map(T=>{var C,N;return A.jsx(LE,{position:[T.lat,T.lng],icon:HE(((C=fu[T.type])==null?void 0:C.color)||"#6B7280"),children:A.jsxs(jE,{children:[A.jsx("div",{className:"font-medium",children:T.name}),A.jsx("div",{className:"text-xs text-gray-500",children:(N=fu[T.type])==null?void 0:N.label}),O(T)&&A.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-1 mt-1",children:[A.jsx(q6,{className:"w-3 h-3"}),O(T)," from accommodation"]})]})},T.id)}),e.filter(T=>T.lat&&T.lng).map(T=>A.jsx(LE,{position:[T.lat,T.lng],icon:HE(fu.scraped.color),children:A.jsxs(jE,{children:[A.jsx("div",{className:"font-medium",children:T.title}),A.jsx("div",{className:"text-xs text-purple-600 font-bold mb-1",children:"Live Event"}),T.venue&&A.jsx("div",{className:"text-xs text-gray-500 mb-2",children:T.venue}),A.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"block text-center px-2 py-1 bg-purple-100 text-purple-700 text-[10px] font-bold rounded uppercase hover:bg-purple-200 transition",children:"Find Tickets"})]})},T.id))]})}),t.length>0&&A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Saved Locations"}),A.jsx("div",{className:"grid gap-2",children:t.map(T=>{const C=fu[T.type],N=(C==null?void 0:C.icon)||kr,Q=O(T);return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:(C==null?void 0:C.color)||"#6B7280"},children:A.jsx(N,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{children:[A.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:T.name}),A.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[C==null?void 0:C.label,Q&&`  ${Q} from stay`]})]})]}),A.jsx("button",{onClick:()=>H(T.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(oi,{className:"w-4 h-4"})})]},T.id)})})]}),!x&&t.length===0&&A.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[A.jsx(kU,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),A.jsx("p",{children:"Start by adding your accommodation location"}),A.jsx("p",{className:"text-sm",children:"Then add fetes, costume pickup, and meetup spots"})]})]})}let Go=[{id:"1",text:"Who's ready for the road?! ",senderId:"2",senderName:"Soca Junkie",createdAt:new Date(Date.now()-864e5).toISOString(),isBot:!1},{id:"2",text:"My costume is ready! The Monarch section looks fire ",senderId:"3",senderName:"Fete King",createdAt:new Date(Date.now()-8e7).toISOString(),isBot:!1},{id:"3",text:"Just waiting on my flight confirmation.",senderId:"4",senderName:"Carnival Baby",createdAt:new Date(Date.now()-7e7).toISOString(),isBot:!1},{id:"4",text:"Welcome to Trinidad! I'm your Carnival Concierge. Ask me anything about fete locations, transport, or safety tips!",senderId:"bot",senderName:"Carnival Concierge",createdAt:new Date(Date.now()-6e4).toISOString(),isBot:!0}];const iK=(t,e,n)=>{if(e)return n(Go),()=>{};if(!t)return console.warn("subscribeToMessages aborted: No squadId provided."),()=>{};console.log("Subscribing to messages for squad:",t);const r=cn(Te,"squads",t,"messages"),s=HA(r,g_("createdAt","asc"),E2(50));return Zs(s,o=>{const l=o.docs.map(c=>{var h;return{id:c.id,...c.data(),createdAt:(h=c.data().createdAt)!=null&&h.toDate?c.data().createdAt.toDate().toISOString():new Date().toISOString()}});n(l)},o=>{console.error(" Chat subscription error:",o)})},aK=async(t,e,n,r,s,i)=>{let o=null;if(r)if(s)o=URL.createObjectURL(r);else try{const c=co(uo,`squads/${t}/${Date.now()}_${r.name}`),h=await Bc(c,r);o=await bc(h.ref)}catch(c){console.error("Image upload failed:",c)}const l={text:n,imageUrl:o,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString(),senderId:e.uid||"demo-user",senderName:e.displayName||"Me",senderPhoto:e.photoURL||null,createdAt:s?new Date().toISOString():fg(),isBot:!1};if(s){const c={id:Date.now().toString(),...l};Go=[...Go,c],i([...Go]),setTimeout(()=>{const h=KE(n||(r?"Nice photo! ":"...")),m={id:(Date.now()+1).toString(),text:h,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:new Date().toISOString(),isBot:!0};Go=[...Go,m],i([...Go])},1500);return}if(!t){console.warn("sendMessage aborted: No squadId provided.");return}console.log("Sending message to Firestore...",{squadId:t,messageData:l}),await _c(cn(Te,"squads",t,"messages"),l),l.isBot||setTimeout(async()=>{const c=KE(n||(r?"Nice photo! ":"...")),h={text:c,senderId:"bot",senderName:"Carnival Concierge",senderPhoto:null,createdAt:fg(),isBot:!0,expiresAt:new Date(Date.now()+24*60*60*1e3).toISOString()};try{await _c(cn(Te,"squads",t,"messages"),h),console.log(" AI Concierge replied:",c)}catch(m){console.error("Failed to send AI reply:",m)}},2e3)},KE=t=>{const e=t.toLowerCase();return e.includes("fete")||e.includes("party")?"Based on your schedule, I recommend 'Phuket' on Friday night. It's close to your Airbnb in Woodbrook and tickets are running low! ":e.includes("food")||e.includes("hungry")||e.includes("eat")?"You have to try 'Sauce Doubles' in Curepe! Or if you're near the Savannah, check out the corn soup vendor near the exit. ":e.includes("transport")||e.includes("taxi")||e.includes("uber")?"Rideshare apps like TT RideShare are reliable. For late nights, I recommend pre-booking a driver for your squad. Safety first! ":e.includes("costume")||e.includes("mas")?"Costume pickup for Tribe is at the Queen's Park Savannah. Don't forget your distribution slip and ID! ":"That sounds like a vibe! Remember to stay hydrated . Need help with transport or fete tickets?"};function oK({squadId:t,user:e,isDemoMode:n}){const[r,s]=R.useState([]),[i,o]=R.useState(""),[l,c]=R.useState(null),[h,m]=R.useState(null),g=R.useRef(null),y=R.useRef(null);console.log("SquadChat Rendered. squadId:",t,"User:",e==null?void 0:e.uid),R.useEffect(()=>{const S=iK(n?"demo-squad":t,n,I=>{s(I)});return()=>S()},[t,n]),R.useEffect(()=>{var x;(x=g.current)==null||x.scrollIntoView({behavior:"smooth"})},[r]),R.useEffect(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);const B=x=>{if(x.target.files&&x.target.files[0]){const S=x.target.files[0];c(S),m(URL.createObjectURL(S))}},b=async x=>{if(x.preventDefault(),!i.trim()&&!l)return;const S=i,I=l;o(""),c(null),m(null);try{await aK(n?"demo-squad":t,e,S,I,n,s)}catch(E){console.error("Failed to send:",E),o(S)}};return t?A.jsxs("div",{className:"flex flex-col h-[65vh] sm:h-[600px] bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700 relative",children:[A.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center shadow-md z-10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-full backdrop-blur-sm",children:A.jsx(DE,{className:"w-5 h-5 text-white"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Squad Chat"}),A.jsxs("p",{className:"text-xs text-purple-100 opacity-90 flex items-center gap-1",children:[A.jsx("span",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),"Carnival Concierge Active"]})]})]}),n&&A.jsx("span",{className:"px-2 py-1 text-[10px] font-black tracking-widest bg-yellow-400 text-yellow-900 rounded uppercase",children:"Demo"})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900/50",children:[r.length===0?A.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 opacity-50",children:A.jsx("p",{children:"No messages yet. Say hi!"})}):r.map(x=>{const S=x.senderId===((e==null?void 0:e.uid)||"demo-user"),I=x.isBot;let E=!1,U=null;return x.expiresAt&&(U=new Date(x.expiresAt),new Date>U&&(E=!0)),A.jsx("div",{className:`flex w-full ${S?"justify-end":"justify-start"}`,children:A.jsxs("div",{className:`flex max-w-[85%] sm:max-w-[80%] gap-2 ${S?"flex-row-reverse":"flex-row"}`,children:[A.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center shadow-sm 
                    ${I?"bg-gradient-to-br from-pink-500 to-orange-400":"bg-gray-300 dark:bg-gray-700"}`,children:I?A.jsx(DE,{className:"w-4 h-4 text-white"}):A.jsx(ei,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{className:`flex flex-col ${S?"items-end":"items-start"}`,children:[A.jsx("span",{className:"text-[10px] text-gray-400 mb-1 ml-1",children:x.senderName}),A.jsxs("div",{className:`px-4 py-2 sm:py-3 rounded-2xl shadow-sm text-sm leading-relaxed relative break-words
                        ${S?"bg-blue-600 text-white rounded-tr-none":I?"bg-white dark:bg-gray-800 border-l-4 border-pink-500 text-gray-800 dark:text-gray-100 rounded-tl-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-tl-none"}
                    `,children:[x.imageUrl&&A.jsx("div",{className:"mb-2",children:E?A.jsxs("div",{className:"w-48 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg flex flex-col items-center justify-center text-gray-500",children:[A.jsx(sd,{className:"w-8 h-8 mb-1 opacity-50"}),A.jsx("span",{className:"text-xs italic",children:"Image expired"})]}):A.jsxs("div",{className:"relative group",children:[A.jsx("img",{src:x.imageUrl,alt:"Shared",className:"w-48 h-48 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(x.imageUrl,"_blank")}),A.jsx("span",{className:"absolute top-2 right-2 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded backdrop-blur-sm",children:" 24h"})]})}),x.text]}),A.jsx("span",{className:"text-[10px] text-gray-400 mt-1 opacity-50",children:new Date(x.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},x.id)}),A.jsx("div",{ref:g})]}),A.jsxs("form",{onSubmit:b,className:"p-2 sm:p-4 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700",children:[h&&A.jsxs("div",{className:"mb-3 relative inline-block",children:[A.jsx("img",{src:h,alt:"Preview",className:"h-20 w-20 object-cover rounded-lg border border-purple-200"}),A.jsx("button",{type:"button",onClick:()=>{c(null),m(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600",children:A.jsx(hs,{className:"w-3 h-3"})})]}),A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("input",{type:"file",ref:y,onChange:B,accept:"image/*",className:"hidden"}),A.jsx("button",{type:"button",onClick:()=>{var x;return(x=y.current)==null?void 0:x.click()},className:"p-2 sm:p-3 flex-shrink-0 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-xl transition-colors",title:"Upload Image (Expires in 24h)",children:A.jsx(Cc,{className:"w-5 h-5"})}),A.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:l?"Add caption...":"Message squad...",className:"flex-1 px-3 py-2 sm:px-4 sm:py-3 bg-gray-100 dark:bg-gray-900 border-0 rounded-xl focus:ring-2 focus:ring-purple-500 dark:text-white placeholder-gray-400 transition-all text-sm sm:text-base min-w-0"}),A.jsx("button",{type:"submit",disabled:!i.trim()&&!l,className:"p-2 sm:p-3 flex-shrink-0 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-purple-500/30",children:A.jsx(jU,{className:"w-5 h-5"})})]})]})]}):A.jsxs("div",{className:"flex flex-col h-[300px] items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700 p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:A.jsx(ei,{className:"w-8 h-8 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:"No Active Squad"}),A.jsx("p",{className:"text-gray-500 text-sm max-w-xs mx-auto",children:"Join or create a squad above to verify your Road Mode connection and start chatting!"})]})}const Gw={ticket:{label:"Ticket",icon:Us,color:"#F59E0B"},photo:{label:"Photo",icon:mm,color:"#3B82F6"}};function AK({files:t=[],onFilesChange:e,carnivalName:n,carnivalId:r,userId:s}){const[i,o]=R.useState(!1),[l,c]=R.useState(""),[h,m]=R.useState(null),[g,y]=R.useState("ticket"),[B,b]=R.useState(""),x=R.useRef(null),S=async H=>{const O=H.target.files[0];if(!O)return;const T=10*1024*1024;if(O.size>T){alert("File too large. Maximum size is 10MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp","application/pdf"].includes(O.type)){alert("Invalid file type. Please upload an image (JPG, PNG, GIF, WebP) or PDF.");return}o(!0),c("Uploading...");try{const N=Date.now(),Q=O.name.split(".").pop(),D=`users/${s}/carnivals/${r}/${N}.${Q}`,K=co(uo,D);await Bc(K,O);const j=await bc(K),X={id:N.toString(),name:B||O.name.split(".")[0],type:g,url:j,storagePath:D,originalName:O.name,uploadedAt:new Date().toISOString(),fileType:O.type};e([...t,X]),b(""),c(""),x.current&&(x.current.value="")}catch(N){console.error("Upload error:",N),alert("Failed to upload file. Please try again.")}o(!1)},I=async H=>{if(confirm("Are you sure you want to delete this file?"))try{const O=co(uo,H.storagePath);await J2(O),e(t.filter(T=>T.id!==H.id))}catch(O){console.error("Delete error:",O),e(t.filter(T=>T.id!==H.id))}},E=H=>{const O=document.createElement("a");O.href=H.url,O.download=H.originalName||H.name,O.target="_blank",document.body.appendChild(O),O.click(),document.body.removeChild(O)},U=t.filter(H=>H.type==="ticket"),M=t.filter(H=>H.type==="photo");return A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(mm,{className:"w-5 h-5 text-purple-500"}),"Media Vault"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Store your tickets, photos, and important documents for ",n]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-4 border border-purple-100 dark:border-purple-800",children:[A.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Upload New File"}),A.jsxs("div",{className:"grid gap-3",children:[A.jsxs("div",{className:"flex gap-3",children:[A.jsx("input",{type:"text",placeholder:"File label (e.g., 'Tribe Costume Receipt')",value:B,onChange:H=>b(H.target.value),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:g,onChange:H=>y(H.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:Object.entries(Gw).map(([H,{label:O}])=>A.jsx("option",{value:H,children:O},H))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{ref:x,type:"file",accept:"image/*,.pdf",onChange:S,className:"hidden",id:"file-upload"}),A.jsx("label",{htmlFor:"file-upload",className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed rounded-lg cursor-pointer transition ${i?"border-gray-300 bg-gray-50 dark:bg-gray-800 cursor-not-allowed":"border-purple-300 hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20"}`,children:i?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-5 h-5 animate-spin text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:l})]}):A.jsxs(A.Fragment,{children:[A.jsx(eK,{className:"w-5 h-5 text-purple-500"}),A.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Click to upload image or PDF (max 10MB)"})]})})]})]})]}),U.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(Us,{className:"w-4 h-4 text-yellow-500"}),"Tickets (",U.length,")"]}),A.jsx("div",{className:"grid gap-3",children:U.map(H=>A.jsx(lK,{file:H,onView:m,onDownload:E,onDelete:I},H.id))})]}),M.length>0&&A.jsxs("div",{children:[A.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[A.jsx(mm,{className:"w-4 h-4 text-blue-500"}),"Photos (",M.length,")"]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:M.map(H=>A.jsx(cK,{file:H,onView:m,onDownload:E,onDelete:I},H.id))})]}),t.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(mm,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No files uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload your tickets, costume receipts, and travel photos"})]}),h&&A.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>m(null),children:A.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",onClick:H=>H.stopPropagation(),children:[A.jsx("button",{onClick:()=>m(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300",children:A.jsx(hs,{className:"w-8 h-8"})}),h.fileType==="application/pdf"?A.jsx("iframe",{src:h.url,className:"w-full h-[80vh] rounded-lg"}):A.jsx("img",{src:h.url,alt:h.name,className:"max-w-full max-h-[80vh] mx-auto rounded-lg"}),A.jsx("p",{className:"text-white text-center mt-4 font-medium",children:h.name})]})})]})}function lK({file:t,onView:e,onDownload:n,onDelete:r}){const s=Gw[t.type]||Gw.ticket,i=s.icon;return A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${s.color}20`},children:A.jsx(i,{className:"w-5 h-5",style:{color:s.color}})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:t.name}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.uploadedAt).toLocaleDateString()})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(G_,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 text-gray-500 hover:text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition",children:A.jsx(jc,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(oi,{className:"w-4 h-4"})})]})]})}function cK({file:t,onView:e,onDownload:n,onDelete:r}){return A.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600",children:[A.jsx("img",{src:t.url,alt:t.name,className:"w-full h-32 object-cover cursor-pointer",onClick:()=>e(t)}),A.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[A.jsx("button",{onClick:()=>e(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(G_,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>n(t),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:A.jsx(jc,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(t),className:"p-2 bg-red-500/50 hover:bg-red-500/70 rounded-full text-white transition",children:A.jsx(oi,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-2 truncate",children:t.name})]})}const mf={trinidad:"https://open.spotify.com/embed/playlist/2H61cIhlAeFVmreSMqvui3",jamaica:"https://open.spotify.com/embed/playlist/37i9dQZF1DX82pCGH5USnM",miami:"https://open.spotify.com/embed/playlist/37i9dQZF1DXS1X4r7p38D5",stlucia:"https://open.spotify.com/embed/playlist/37i9dQZF1DX62XscWx9t6h",barbados:"https://open.spotify.com/embed/playlist/37i9dQZF1DX23V8kYg8jC2",stkitts:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stcroix:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",stthomas:"https://open.spotify.com/embed/playlist/37i9dQZF1E4v6hGc9x5z4y",default:"https://open.spotify.com/embed/playlist/28bCuQ5IhyPbmvJx30ZMea"};function uK({activeCarnivalId:t,isPremium:e}){const[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,l]=R.useState(!1),c=()=>{if(!t)return{key:"default",url:mf.default};const g=Object.keys(mf).find(B=>t.toLowerCase().includes(B)),y=mf[g]||mf.default;return{key:g||"default (fallback)",url:y}},{key:h,url:m}=c();return n?A.jsxs("div",{className:`fixed z-40 transition-all duration-300 shadow-2xl overflow-hidden bg-black/90 backdrop-blur-md border border-white/20 rounded-t-2xl sm:rounded-2xl
      ${s?"bottom-24 right-4 w-64 h-16 rounded-full":"bottom-0 sm:bottom-24 right-0 sm:right-4 w-full sm:w-80 h-[400px]"}`,children:[A.jsxs("div",{className:`flex items-center justify-between p-3 bg-gradient-to-r from-pink-600 to-purple-700 text-white
        ${s?"h-full":""}`,children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(FA,{className:"w-5 h-5 animate-pulse"}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-bold text-sm",children:s?"Carnival Vibes":o?"Team Soca Live":"Soca Vibes Player"}),!s&&A.jsx("button",{onClick:()=>l(!o),className:"text-[10px] bg-white/20 px-2 py-0.5 rounded-full hover:bg-white/30 transition text-left w-fit",children:o?"Switch to Playlist":"Switch to Live Radio"})]})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[s?A.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(V6,{className:"w-4 h-4"})}):A.jsx("button",{onClick:()=>i(!0),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(z6,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>r(!1),className:"p-1 hover:bg-white/20 rounded",children:A.jsx(hs,{className:"w-4 h-4"})})]})]}),!s&&A.jsxs("div",{className:"h-[calc(100%-48px)] bg-black relative",children:[!e&&!o&&A.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-yellow-500/90 text-black text-xs font-bold px-2 py-1 text-center",children:"Upgrade directly in Spotify for ad-free listening"}),o?A.jsx("iframe",{src:"https://ice23.securenetsystems.net/TSDC",width:"100%",height:"100%",frameBorder:"0",allow:"autoplay; encrypted-media;",title:"Team Soca Live"}):A.jsx("iframe",{style:{borderRadius:"12px"},src:m,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Soca Playlist"})]})]}):A.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-24 right-4 z-40 bg-gradient-to-r from-pink-500 to-purple-600 text-white p-3 rounded-full shadow-lg hover:scale-110 transition-transform animate-bounce-slow","aria-label":"Open Vibes Player",children:A.jsx(FA,{className:"w-6 h-6"})})}function dK({users:t,onDeleteUser:e,onDeleteAll:n,onClose:r}){const[s,i]=R.useState(new Set),[o,l]=R.useState(!1),c=R.useMemo(()=>t.filter(y=>{var x,S;const B=((x=y.profile)==null?void 0:x.email)&&y.profile.email.trim()!=="",b=((S=y.profile)==null?void 0:S.displayName)&&y.profile.displayName.trim()!==""&&y.profile.displayName!=="User";return!B&&!b}),[t]),h=y=>{const B=new Set(s);B.has(y)?B.delete(y):B.add(y),i(B)},m=()=>{s.size===c.length?i(new Set):i(new Set(c.map(y=>y.id)))},g=()=>{o?(n(Array.from(s)),l(!1),i(new Set)):l(!0)};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-xl overflow-hidden animate-fadeIn",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-red-50 dark:bg-red-900/10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400",children:A.jsx(OU,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Database Cleanup"}),A.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:["Found ",c.length," incomplete records"]})]})]}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition",children:A.jsx(hs,{className:"w-5 h-5 text-gray-500"})})]}),A.jsx("div",{className:"p-4",children:c.length===0?A.jsxs("div",{className:"text-center py-12 text-gray-500",children:[A.jsx(wh,{className:"w-12 h-12 mx-auto mb-3 text-green-500 opacity-50"}),A.jsx("p",{children:"Database is clean! No incomplete users found."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:s.size>0&&s.size===c.length,onChange:m,className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),A.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select All (",c.length,")"]})]}),s.size>0&&A.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition ${o?"bg-red-600 text-white hover:bg-red-700":"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-300"}`,children:[A.jsx(oi,{className:"w-4 h-4"}),o?"CONFIRM DELETION":`Delete (${s.size})`]})]}),A.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:A.jsxs("table",{className:"w-full text-sm text-left",children:[A.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-xs uppercase text-gray-500 font-medium sticky top-0 backdrop-blur-sm",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-3 w-10"}),A.jsx("th",{className:"p-3",children:"User ID"}),A.jsx("th",{className:"p-3",children:"Created"}),A.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),A.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:c.map(y=>{var B;return A.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition",children:[A.jsx("td",{className:"p-3",children:A.jsx("input",{type:"checkbox",checked:s.has(y.id),onChange:()=>h(y.id),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"})}),A.jsx("td",{className:"p-3 font-mono text-xs text-gray-500",children:y.id}),A.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-300",children:(B=y.createdAt)!=null&&B.toDate?y.createdAt.toDate().toLocaleDateString():"Unknown"}),A.jsx("td",{className:"p-3 text-right",children:A.jsx("button",{onClick:()=>e(y.id),className:"text-gray-400 hover:text-red-500 transition",title:"Delete single user",children:A.jsx(oi,{className:"w-4 h-4"})})})]},y.id)})})]})})]})}),c.length>0&&A.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 border-t border-yellow-100 dark:border-yellow-900/20 flex items-start gap-3 text-xs text-yellow-800 dark:text-yellow-200",children:[A.jsx(O_,{className:"w-4 h-4 shrink-0 mt-0.5"}),A.jsxs("p",{children:[A.jsx("strong",{children:"Warning:"})," Deleting users is permanent. This will remove their record from the 'users' collection. If they sign in again, a new record will be created."]})]})]})}const hK=({onScheduleDetected:t})=>{const[e,n]=R.useState(!1),[r,s]=R.useState(""),[i,o]=R.useState(""),l=window.SpeechRecognition||window.webkitSpeechRecognition;if(!l)return null;const c=new l;c.continuous=!1,c.lang="en-US",c.interimResults=!1;const h=()=>{n(!0),o('Listening... Say "Add [Event] for [Day] at [Time]"'),c.start()},m=()=>{n(!1),c.stop()};c.onresult=y=>{const B=y.results[0][0].transcript;s(B),o("Processing..."),g(B),n(!1)},c.onerror=y=>{console.error("Voice Error:",y.error),n(!1),o("Error listening. Try again.")};const g=y=>{let B=y,b="",x="";const S=y.toLowerCase();(S.startsWith("add")||S.startsWith("schedule")||S.startsWith("remind me to"))&&(B=y.replace(/^(Add|Schedule|Remind me to)\s+/i,""));const I=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];for(const U of I)S.includes(U.toLowerCase())&&(b=U,B=B.replace(new RegExp(`(on|for)?\\s*${U}`,"i"),""));const E=B.match(/(\d{1,2}(?::\d{2})?\s?(?:am|pm)?)/i);E&&(E[0].toLowerCase().includes("am")||E[0].toLowerCase().includes("pm")||E[0].includes(":"))&&(x=E[0],B=B.replace(E[0],"")),B=B.replace(/\s+(at|for|on)\s*$/i,"").trim(),B=B.replace(/^\s+(at|for|on)\s+/i,"").trim(),B?(o(`Found: ${B} (${b||"No Day"} @ ${x||"No Time"})`),t({name:B,day:b||"Friday",time:x||"12:00 PM",note:`Voice: "${y}"`})):o("Could not understand event name.")};return A.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-700 mt-4",children:[A.jsxs("button",{onClick:e?m:h,className:`
            flex items-center gap-2 px-6 py-3 rounded-full font-bold transition-all transform hover:scale-105
            ${e?"bg-red-500 text-white animate-pulse shadow-red-500/50 shadow-lg":"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg"}
        `,children:[e?A.jsx(G6,{className:"w-5 h-5"}):A.jsx(FU,{className:"w-5 h-5"}),e?"Stop Listening":"Voice Add Event (Free)"]}),(r||i)&&A.jsxs("div",{className:"mt-3 text-center",children:[A.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r&&`"${r}"`}),A.jsx("p",{className:"text-xs text-blue-500 mt-1 font-mono",children:i})]})]})},gf=[{id:"default-fete-map-banner",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-banner",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-banner",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-banner",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"banner",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-fete-map-inline",title:"Unlock Interactive Fete Map",imageUrl:"/images/promo/premium_fete_map_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-media-vault-inline",title:"Store Your Tickets & Photos",imageUrl:"/images/promo/premium_media_vault_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-offline-inline",title:"Plan Offline, Anywhere",imageUrl:"/images/promo/premium_offline_mode_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"default-premium-inline",title:"Go Premium - Ad Free Experience",imageUrl:"/images/promo/premium_subscription_promo_banner.png",placement:"inline",mediaType:"image",linkUrl:null,isDefault:!0},{id:"madd-colors-banner-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"banner",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1},{id:"madd-colors-inline-v2",title:"Madd Colors Carnival - Atlanta",imageUrl:"https://www.atlanta-carnival.com/uploads/2/6/6/0/26602334/madd-logo26.jpg",placement:"inline",mediaType:"image",linkUrl:"https://maddcolorscarnival.com/",isDefault:!1}];function pf({placement:t="banner",className:e="",onUpgradeClick:n}){const[r,s]=R.useState([]),[i,o]=R.useState(0),[l,c]=R.useState(!1),[h,m]=R.useState(!0),[g,y]=R.useState(null);if(R.useEffect(()=>{m(!0),y(null);const E=cn(Te,"promoAds"),U=HA(E,mh("active","==",!0)),M=Zs(U,H=>{const O=[];H.forEach(Q=>{O.push({id:Q.id,...Q.data()})});const T=O.filter(Q=>Q.placement===t),C=gf.find(Q=>Q.id.includes("madd-colors")&&Q.placement===t);let N=T;if(T.length===0?N=gf.filter(Q=>Q.placement===t):C&&(T.some(D=>D.id.includes("madd-colors"))||(N=[...T,{...C,isDefault:!1}])),N.length>0)s(N);else{const Q=gf.filter(D=>D.placement===t);s(Q)}m(!1)},H=>{console.error(`PromoAd [${t}] error:`,H);const O=gf.filter(T=>T.placement===t);s(O),y(null),m(!1)});return()=>M()},[t]),R.useEffect(()=>{if(r.length<=1)return;const E=setInterval(()=>{o(U=>(U+1)%r.length)},8e3);return()=>clearInterval(E)},[r.length]),h||l||r.length===0)return null;const B=Math.min(i,r.length-1),b=r[B];if(!b||!b.imageUrl)return null;const x=b.mediaType==="video",S=b.id.includes("madd-colors")?!1:b.isDefault;b.id.includes("madd-colors")||b.linkUrl;const I=()=>{S&&n?n():b.linkUrl&&window.open(b.linkUrl,"_blank","noopener,noreferrer")};return A.jsx("div",{className:`p-4 relative ${e}`,children:A.jsxs("div",{onClick:I,className:`relative overflow-hidden rounded-lg shadow-md ${b.linkUrl||S?"cursor-pointer hover:shadow-lg transition-shadow":""}`,children:[x?A.jsx("video",{src:b.imageUrl,className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onError:E=>console.error("Video load error:",E)}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Promotion",className:"w-full h-auto object-cover",style:{maxHeight:t==="banner"?"120px":"250px"},onError:E=>{console.error("Image load error:",b.imageUrl),E.target.style.display="none"}}),b.title&&A.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:[A.jsx("p",{className:"text-white text-sm font-bold truncate",children:b.title}),S&&A.jsx("p",{className:"text-yellow-300 text-xs font-medium",children:"Tap to upgrade to Premium"})]}),A.jsx("div",{className:"absolute top-1 left-1 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded",children:S?"PREMIUM":"AD"}),A.jsx("button",{onClick:E=>{E.stopPropagation(),c(!0)},className:"absolute top-1 right-1 p-1 bg-black/50 hover:bg-black/70 text-white rounded-full transition",children:A.jsx(hs,{className:"w-3 h-3"})}),r.length>1&&A.jsx("div",{className:"absolute bottom-2 right-2 flex gap-1",children:r.map((E,U)=>A.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition ${U===i?"bg-white":"bg-white/50"}`},U))})]})})}const GE=[{id:"banner",label:"Top Banner"},{id:"sidebar",label:"Sidebar"},{id:"inline",label:"Inline (Between Sections)"}];function fK(){const[t,e]=R.useState([]),[n,r]=R.useState(!1),[s,i]=R.useState(""),[o,l]=R.useState(!1),[c,h]=R.useState({title:"",linkUrl:"",placement:"banner"}),m=R.useRef(null);R.useEffect(()=>{const b=cn(Te,"promoAds"),x=Zs(b,S=>{const I=[];S.forEach(E=>{I.push({id:E.id,...E.data()})}),I.sort((E,U)=>(U.createdAt||0)-(E.createdAt||0)),e(I)});return()=>x()},[]);const g=async b=>{const x=b.target.files[0];if(!x)return;const S=x.type.startsWith("video/"),I=S?10*1024*1024:5*1024*1024;if(x.size>I){alert(`File too large. Maximum size is ${S?"10MB for videos":"5MB for images"}.`);return}const E=["image/jpeg","image/png","image/gif","image/webp"],U=["video/mp4","video/webm"];if(![...E,...U].includes(x.type)){alert("Invalid file type. Please upload JPG, PNG, GIF, WebP, MP4, or WebM.");return}r(!0),i("Preparing upload...");const H=setTimeout(()=>{r(!1),i(""),alert("Upload timed out after 60 seconds. Please check your connection and try again."),m.current&&(m.current.value="")},6e4);try{const O=Date.now(),T=x.name.split(".").pop(),C=`promoAds/${O}.${T}`,N=co(uo,C);i("Uploading to storage..."),console.log("Uploading file to Storage...",C),await Bc(N,x),i("Getting download URL...");const Q=await bc(N);console.log("File uploaded, URL:",Q);const D=x.type.startsWith("video/"),K={title:c.title||"",linkUrl:c.linkUrl||"",placement:c.placement,imageUrl:Q,mediaType:D?"video":"image",storagePath:C,active:!0,createdAt:O};i("Saving ad data..."),console.log("Saving ad metadata to Firestore...",K);const j=await _c(cn(Te,"promoAds"),K);console.log("Ad saved to Firestore successfully, ID:",j.id),clearTimeout(H),alert("Ad uploaded successfully!"),h({title:"",linkUrl:"",placement:"banner"}),l(!1),m.current&&(m.current.value="")}catch(O){clearTimeout(H),console.error("Upload error:",O),console.error("Error code:",O.code),console.error("Error message:",O.message),console.error("Full error:",JSON.stringify(O,null,2)),O.code==="storage/unauthorized"?alert("Upload failed: You do not have permission to upload ads. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):O.code==="storage/canceled"?alert("Upload was cancelled."):O.code==="permission-denied"?alert("Firestore permission denied: You do not have permission to save ad metadata. Make sure you are logged in with the admin account (djkrss1@gmail.com)."):alert(`Failed to upload ad: ${O.code||"Unknown error"} - ${O.message||"Please try again."}`)}r(!1),i("")},y=async b=>{try{await TA(ze(Te,"promoAds",b.id),{active:!b.active})}catch(x){console.error("Toggle error:",x)}},B=async b=>{if(confirm("Delete this ad?"))try{if(b.storagePath){const x=co(uo,b.storagePath);await J2(x).catch(()=>{})}await gh(ze(Te,"promoAds",b.id))}catch(x){console.error("Delete error:",x)}};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(sd,{className:"w-5 h-5 text-orange-500"}),"Ad Manager"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload promotional ads and flyers for free users"})]}),A.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition",children:[A.jsx(tc,{className:"w-4 h-4"}),"New Ad"]})]}),o&&A.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4 border border-orange-200 dark:border-orange-800 space-y-3",children:[A.jsxs("div",{className:"grid gap-3",children:[A.jsx("input",{type:"text",placeholder:"Ad title (optional)",value:c.title,onChange:b=>h({...c,title:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"url",placeholder:"Link URL (optional) - where to go when clicked",value:c.linkUrl,onChange:b=>h({...c,linkUrl:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("select",{value:c.placement,onChange:b=>h({...c,placement:b.target.value}),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:GE.map(b=>A.jsx("option",{value:b.id,children:b.label},b.id))})]}),A.jsx("input",{ref:m,type:"file",accept:"image/*,video/mp4,video/webm",onChange:g,className:"hidden",id:"ad-upload"}),A.jsx("label",{htmlFor:"ad-upload",className:`flex flex-col items-center justify-center gap-2 px-4 py-4 border-2 border-dashed rounded-lg cursor-pointer transition ${n?"border-gray-300 bg-gray-50 cursor-not-allowed":"border-orange-300 hover:border-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/30"}`,children:n?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-5 h-5 animate-spin text-orange-500"}),A.jsx("span",{className:"text-orange-600",children:s||"Uploading..."})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(sd,{className:"w-5 h-5 text-orange-500"}),A.jsx(tK,{className:"w-5 h-5 text-orange-500"})]}),A.jsx("span",{className:"text-orange-600 font-medium",children:"Click to upload image or video"}),A.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Images: max 5MB (1200x300 recommended) | Videos: max 10MB (MP4, WebM)"})]})})]}),t.length>0?A.jsx("div",{className:"space-y-3",children:t.map(b=>{var x;return A.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-lg border transition ${b.active?"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600":"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 opacity-60"}`,children:[b.mediaType==="video"?A.jsx("video",{src:b.imageUrl,className:"w-20 h-14 object-cover rounded",muted:!0}):A.jsx("img",{src:b.imageUrl,alt:b.title||"Ad",className:"w-20 h-14 object-cover rounded"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:b.title||"Untitled Ad"}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((x=GE.find(S=>S.id===b.placement))==null?void 0:x.label)||b.placement,b.linkUrl&&"  Has link"]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>y(b),className:`p-2 rounded-lg transition ${b.active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:b.active?"Active - Click to disable":"Inactive - Click to enable",children:b.active?A.jsx(HU,{className:"w-5 h-5"}):A.jsx(MU,{className:"w-5 h-5"})}),b.linkUrl&&A.jsx("a",{href:b.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:A.jsx(K_,{className:"w-4 h-4"})}),A.jsx("button",{onClick:()=>B(b),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:A.jsx(oi,{className:"w-4 h-4"})})]})]},b.id)})}):A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(sd,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),A.jsx("p",{className:"font-medium",children:"No ads uploaded yet"}),A.jsx("p",{className:"text-sm",children:"Upload flyers and promotions to show to free users"})]})]})}const mu="carnival-planner-v1",mK=["djkrss1@gmail.com"],gK=on(Ft);function pK(){const[t,e]=R.useState([]),[n,r]=R.useState(!0),[s,i]=R.useState(null),[o,l]=R.useState(""),[c,h]=R.useState(null),[m,g]=R.useState({total:0,premium:0,free:0}),[y,B]=R.useState(!1),[b,x]=R.useState(!1),[S,I]=R.useState(null),[E,U]=R.useState(!1),[M,H]=R.useState(!1),O=async X=>{if(confirm("Are you sure you want to delete this user? This cannot be undone."))try{await ow(async()=>{const{deleteDoc:J}=await Promise.resolve().then(()=>wE);return{deleteDoc:J}},void 0).then(({deleteDoc:J})=>{J(ze(Te,"users",X))}),e(J=>J.filter(oe=>oe.id!==X)),g(J=>({...J,total:J.total-1,free:J.free-1}))}catch(J){console.error("Delete error:",J),alert("Failed to delete user: "+J.message)}},T=async X=>{try{const{deleteDoc:J}=await ow(async()=>{const{deleteDoc:Ae}=await Promise.resolve().then(()=>wE);return{deleteDoc:Ae}},void 0);let oe=0;for(const Ae of X)await J(ze(Te,"users",Ae)),oe++;e(Ae=>Ae.filter(G=>!X.includes(G.id))),g(Ae=>({...Ae,total:Ae.total-oe,free:Ae.free-oe})),alert(`Successfully deleted ${oe} users.`)}catch(J){console.error("Batch delete error:",J),alert("Batch delete failed partially: "+J.message)}},C=async()=>{U(!0),I("Migrating users from Firebase Auth...");try{const J=await Dt(gK,"migrateAuthUsers")({});I(J.data.message),await Q()}catch(X){console.error("Auth migration error:",X),I(`Auth migration failed: ${X.message}`)}U(!1)},N=async()=>{var X,J,oe,Ae,G,ae,ee,we,de,me,pe,he,ie,Qe,Je,Nr;x(!0),I("Starting migration...");try{const Ht=new Map;let $n=[];try{const vt=await Li(cn(Te,"user-activity"));console.log("[Migration] Found",vt.size,"user-activity records"),$n.push(`${vt.size} activity records`);for(const xt of vt.docs){const et=xt.data(),un=et.uid;if(un)if(!Ht.has(un))Ht.set(un,{createdAt:et.loginAt,lastLoginAt:et.loginAt,email:et.email||null,displayName:et.displayName||null});else{const _t=Ht.get(un);((J=(X=et.loginAt)==null?void 0:X.toMillis)==null?void 0:J.call(X))<((Ae=(oe=_t.createdAt)==null?void 0:oe.toMillis)==null?void 0:Ae.call(oe))&&(_t.createdAt=et.loginAt),((ae=(G=et.loginAt)==null?void 0:G.toMillis)==null?void 0:ae.call(G))>((we=(ee=_t.lastLoginAt)==null?void 0:ee.toMillis)==null?void 0:we.call(ee))&&(_t.lastLoginAt=et.loginAt),!_t.email&&et.email&&(_t.email=et.email),!_t.displayName&&et.displayName&&(_t.displayName=et.displayName)}}}catch(vt){console.log("[Migration] Could not fetch user-activity:",vt.message)}try{const vt=await Li(cn(Te,"artifacts",mu,"users"));console.log("[Migration] Found",vt.size,"artifact users"),$n.push(`${vt.size} artifact users`);for(const xt of vt.docs){const et=xt.id,un=xt.data();Ht.has(et)||Ht.set(et,{createdAt:un.createdAt||qe.now(),lastLoginAt:un.lastLoginAt||qe.now(),email:null,displayName:null})}}catch(vt){console.log("[Migration] Could not fetch artifacts:",vt.message)}I(`Found ${Ht.size} unique users (${$n.join(", ")})...`);let Qn=0;for(const[vt,xt]of Ht)try{const et=ze(Te,"users",vt),un=await Is(et);if(!un.exists())await Gn(et,xt),Qn++;else{const _t=un.data(),yn={};xt.createdAt&&(!_t.createdAt||((me=(de=xt.createdAt).toMillis)==null?void 0:me.call(de))<((he=(pe=_t.createdAt)==null?void 0:pe.toMillis)==null?void 0:he.call(pe)))&&(yn.createdAt=xt.createdAt),xt.lastLoginAt&&(!_t.lastLoginAt||((Qe=(ie=xt.lastLoginAt).toMillis)==null?void 0:Qe.call(ie))>((Nr=(Je=_t.lastLoginAt)==null?void 0:Je.toMillis)==null?void 0:Nr.call(Je)))&&(yn.lastLoginAt=xt.lastLoginAt),!_t.email&&xt.email&&(yn.email=xt.email),!_t.displayName&&xt.displayName&&(yn.displayName=xt.displayName),Object.keys(yn).length>0&&(await Gn(et,yn,{merge:!0}),Qn++)}}catch(et){console.error(`Failed to migrate user ${vt}:`,et)}I(`Migration complete! Migrated ${Qn} users.`),await Q()}catch(Ht){console.error("Migration error:",Ht),I(`Migration failed: ${Ht.message}`)}x(!1)},Q=async()=>{var X,J,oe,Ae,G;r(!0),i(null);try{console.log("[AdminAnalytics] Fetching users...");const ae=new Map;try{console.log("[AdminAnalytics] Attempting to fetch users collection...");const de=await Li(cn(Te,"users"));console.log("[AdminAnalytics] SUCCESS: Found",de.size,"user documents in users collection"),de.docs.forEach(me=>console.log("[AdminAnalytics] User doc:",me.id,me.data()));for(const me of de.docs){const pe=me.id,he=me.data();ae.set(pe,{id:pe,createdAt:he.createdAt,lastLoginAt:he.lastLoginAt,profile:{email:he.email||null,displayName:he.displayName||null},source:"users"})}}catch(de){console.log("[AdminAnalytics] Could not fetch users collection:",de.message)}try{console.log("[AdminAnalytics] Attempting to fetch user-activity collection...");const de=await Li(cn(Te,"user-activity"));console.log("[AdminAnalytics] SUCCESS: Found",de.size,"activity records");for(const me of de.docs){const pe=me.data(),he=pe.uid;if(he&&!ae.has(he))ae.set(he,{id:he,createdAt:pe.loginAt||null,lastLoginAt:pe.loginAt||null,profile:{email:pe.email||null,displayName:pe.displayName||null},source:"user-activity"});else if(he&&ae.has(he)){const ie=ae.get(he);pe.loginAt&&(!ie.lastLoginAt||((J=(X=pe.loginAt).toMillis)==null?void 0:J.call(X))>((Ae=(oe=ie.lastLoginAt).toMillis)==null?void 0:Ae.call(oe)))&&(ie.lastLoginAt=pe.loginAt),!ie.profile.email&&pe.email&&(ie.profile.email=pe.email)}}}catch(de){console.log("[AdminAnalytics] Could not fetch user-activity collection:",de.message)}try{console.log("[AdminAnalytics] Attempting to fetch artifacts collection...");const de=await Li(cn(Te,"artifacts",mu,"users"));console.log("[AdminAnalytics] SUCCESS: Found",de.size,"users in artifacts collection");for(const me of de.docs){const pe=me.id;if(!ae.has(pe)){const he=me.data();ae.set(pe,{id:pe,createdAt:he.createdAt||null,lastLoginAt:he.lastLoginAt||null,profile:{email:null,displayName:null},source:"artifacts"})}}}catch(de){console.log("[AdminAnalytics] Could not fetch artifacts collection:",de.message)}const ee=[];for(const[de,me]of ae){try{const he=ze(Te,"users",de,"profile","info"),ie=await Is(he);if(ie.exists()){const Qe=ie.data();me.profile={...me.profile,...Qe,email:Qe.email||me.profile.email,displayName:Qe.displayName||me.profile.displayName}}}catch{}me.isPremium=!1,me.carnivalCount=0;try{const he=ze(Te,"users",de,"apps",mu),ie=await Is(he);if(ie.exists()){const Qe=ie.data();me.isPremium=!!Qe.premiumActive,Qe.selectedCarnivals&&(me.carnivalCount=Object.keys(Qe.selectedCarnivals).length)}}catch{try{const ie=ze(Te,"artifacts",mu,"users",de),Qe=await Is(ie);if(Qe.exists()){const Je=Qe.data();me.isPremium=!!Je.premiumActive,Je.selectedCarnivals&&(me.carnivalCount=Object.keys(Je.selectedCarnivals).length)}}catch{}}const pe=((G=me.profile)==null?void 0:G.email)||"";pe&&mK.includes(pe.toLowerCase())&&(me.isPremium=!0,me.premiumOverride=!0),ee.push(me)}console.log("[AdminAnalytics] Total unique users found:",ee.length),ee.sort((de,me)=>{var ie,Qe,Je,Nr;const pe=((Qe=(ie=de.createdAt)==null?void 0:ie.toDate)==null?void 0:Qe.call(ie))||new Date(0);return(((Nr=(Je=me.createdAt)==null?void 0:Je.toDate)==null?void 0:Nr.call(Je))||new Date(0))-pe}),e(ee);const we=ee.filter(de=>de.isPremium).length;g({total:ee.length,premium:we,free:ee.length-we})}catch(ae){console.error("Error fetching users:",ae),i(ae.message||"Failed to fetch users")}r(!1)};R.useEffect(()=>{Q()},[]);const D=async()=>{B(!0),await Q(),B(!1)},K=async(X,J,oe)=>{if(oe){alert("This user has premium via email override. Cannot toggle manually.");return}try{const Ae=ze(Te,"users",X,"apps",mu);await Gn(Ae,{premiumActive:!J,premiumUpdatedAt:qe.now(),premiumUpdatedBy:"admin-manual"},{merge:!0}),e(G=>G.map(ae=>ae.id===X?{...ae,isPremium:!J}:ae)),g(G=>({...G,premium:J?G.premium-1:G.premium+1,free:J?G.free+1:G.free-1})),alert(`Premium ${J?"disabled":"enabled"} for user.`)}catch(Ae){console.error("Error toggling premium:",Ae),alert("Failed to update premium status: "+Ae.message)}},j=t.filter(X=>{var G,ae;const J=((G=X.profile)==null?void 0:G.email)||X.id,oe=((ae=X.profile)==null?void 0:ae.displayName)||"",Ae=o.toLowerCase();return J.toLowerCase().includes(Ae)||oe.toLowerCase().includes(Ae)});return n?A.jsxs("div",{className:"flex items-center justify-center py-12",children:[A.jsx(Et,{className:"w-8 h-8 animate-spin text-blue-500"}),A.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Loading user data..."})]}):s?A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:s}),A.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(ir,{className:"w-5 h-5 text-blue-500"}),"User Analytics"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View and manage registered users"})]}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[A.jsxs("button",{onClick:C,disabled:E,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition disabled:opacity-50",children:[E?A.jsx(Et,{className:"w-4 h-4 animate-spin"}):A.jsx(jc,{className:"w-4 h-4"}),"Migrate Auth Users"]}),A.jsxs("button",{onClick:N,disabled:b,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:[b?A.jsx(Et,{className:"w-4 h-4 animate-spin"}):A.jsx(ir,{className:"w-4 h-4"}),"Migrate Data"]}),A.jsxs("button",{onClick:()=>H(!M),className:`flex items-center gap-1 px-3 py-1.5 text-sm rounded-lg transition ${M?"bg-red-600 text-white hover:bg-red-700":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}`,children:[A.jsx(OU,{className:"w-4 h-4"}),M?"Close Cleanup":"Cleanup Tool"]}),A.jsxs("button",{onClick:D,disabled:y,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:[A.jsx($6,{className:`w-4 h-4 ${y?"animate-spin":""}`}),"Refresh"]})]})]}),M&&A.jsx(dK,{users:t,onDeleteUser:O,onDeleteAll:T,onClose:()=>H(!1)}),S&&A.jsx("div",{className:`p-3 rounded-lg text-sm ${S.includes("failed")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:S}),A.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(ir,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Total Users"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.total})]}),A.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(pg,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Premium"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.premium})]}),A.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl p-4 text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(ir,{className:"w-5 h-5 opacity-80"}),A.jsx("span",{className:"text-sm font-medium opacity-80",children:"Free"})]}),A.jsx("p",{className:"text-3xl font-bold",children:m.free})]})]}),A.jsxs("div",{className:"relative",children:[A.jsx(LU,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search by email or name...",value:o,onChange:X=>l(X.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),A.jsx("div",{className:"space-y-2",children:j.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:o?"No users match your search":"No users found"}):j.map(X=>{var J,oe,Ae,G;return A.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[A.jsxs("div",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600",onClick:()=>h(c===X.id?null:X.id),children:[(J=X.profile)!=null&&J.avatarUrl?A.jsx("img",{src:X.profile.avatarUrl,alt:"",className:"w-10 h-10 rounded-full object-cover"}):A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-500 flex items-center justify-center",children:A.jsx(ir,{className:"w-5 h-5 text-gray-400 dark:text-gray-300"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("p",{className:"font-medium text-gray-800 dark:text-white truncate",children:((oe=X.profile)==null?void 0:oe.displayName)||"No name"}),X.isPremium&&A.jsxs("span",{className:`px-1.5 py-0.5 text-xs rounded-full flex items-center gap-1 ${X.premiumOverride?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:[A.jsx(pg,{className:"w-3 h-3"}),X.premiumOverride?"Admin":"Premium"]})]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:((Ae=X.profile)==null?void 0:Ae.email)||X.id})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[X.carnivalCount>0&&A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[A.jsx(kr,{className:"w-4 h-4"}),X.carnivalCount," carnival",X.carnivalCount!==1?"s":""]}),c===X.id?A.jsx(Q6,{className:"w-5 h-5 text-gray-400"}):A.jsx(F6,{className:"w-5 h-5 text-gray-400"})]})]}),c===X.id&&A.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"User ID"}),A.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 truncate",children:X.id})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:((G=X.profile)==null?void 0:G.bio)||"No bio"})]})]}),A.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-600",children:[A.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Premium Status"}),A.jsx("button",{onClick:ae=>{ae.stopPropagation(),K(X.id,X.isPremium,X.premiumOverride)},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition ${X.isPremium?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:X.isPremium?A.jsxs(A.Fragment,{children:[A.jsx(HU,{className:"w-5 h-5"}),A.jsx("span",{children:"Premium Active"})]}):A.jsxs(A.Fragment,{children:[A.jsx(MU,{className:"w-5 h-5"}),A.jsx("span",{children:"Free User"})]})})]})]})]},X.id)})}),A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:["Showing ",j.length," of ",t.length," users"]})]})}const yK=[{name:"TRIBE Carnival",carnivalId:"trinidad",type:"mas",website:"https://tribecarnival.com",tags:["Premium","High Energy","Popular"]},{name:"The Lost Tribe",carnivalId:"trinidad",type:"mas",website:"https://losttribecarnival.com",tags:["Creative","Thematic","Premium"]},{name:"Bliss Carnival",carnivalId:"trinidad",type:"mas",website:"https://blisscarnival.com",tags:["Premium","Exclusive"]},{name:"YUMA Vibe",carnivalId:"trinidad",type:"mas",website:"https://yumavibe.com",tags:["Young","Energetic","Party"]},{name:"Harts Carnival",carnivalId:"trinidad",type:"mas",website:"https://hartscarnival.com",tags:["Traditional","Family","Fun"]},{name:"Pure Carnival",carnivalId:"trinidad",type:"mas",website:"https://pure.carnival-tribe.com",tags:["Fun","All Inclusive"]},{name:"Paparazzi Carnival",carnivalId:"trinidad",type:"mas",website:"https://paparazzicarnival.com",tags:["Thematic","Design"]},{name:"Ronnie and Caro",carnivalId:"trinidad",type:"mas",website:"https://ronnieandcaro.com",tags:["Big Band","Winner"]},{name:"K2K Alliance",carnivalId:"trinidad",type:"mas",website:"https://k2k-alliance.com",tags:["Artistic","Couture"]},{name:"Resonate Carnival",carnivalId:"trinidad",type:"mas",tags:["New","Vibes"]},{name:"Showtime Carnival",carnivalId:"trinidad",type:"mas",tags:["Affordable","Fun"]},{name:"Spirit Mas",carnivalId:"trinidad",type:"mas",tags:["Inaugural","Exciting"]},{name:"Exousia Mas",carnivalId:"trinidad",type:"mas",tags:["Small Band","Detailed"]},{name:"Just Wee and Friends",carnivalId:"trinidad",type:"mas",tags:["J'ouvert","Fun"]},{name:"Xodus Carnival",carnivalId:"jamaica",type:"mas",website:"https://xoduscarnival.com",tags:["Premium","Big Band"]},{name:"Bacchanal Jamaica",carnivalId:"jamaica",type:"mas",website:"https://bacchanaljamaica.com",tags:["Legacy","Big Band"]},{name:"Xaymaca International",carnivalId:"jamaica",type:"mas",website:"https://xaymacainternational.com",tags:["Premium","Vibes"]},{name:"Yardmas Carnival",carnivalId:"jamaica",type:"mas",website:"https://yardmas.com",tags:["New","Local"]},{name:"GenX Jamaica",carnivalId:"jamaica",type:"mas",website:"https://genxcarnival.com",tags:["Miami Link","Fun"]},{name:"Ocho Rios Carnival",carnivalId:"jamaica",type:"mas",tags:["North Coast","Holiday"]},{name:"GenX Carnival",carnivalId:"miami",type:"mas",website:"https://genx.carnival-tribe.com",tags:["Big Band","Winner"]},{name:"Ramajay Mas",carnivalId:"miami",type:"mas",website:"https://ramajaymas.com",tags:["Vibes","Party"]},{name:"Revel Nation",carnivalId:"miami",type:"mas",tags:["Premium","Service"]},{name:"One Island Band",carnivalId:"miami",type:"mas",website:"https://oneislandband.com",tags:["Big Band","Fun"]},{name:"Freaks Mas",carnivalId:"miami",type:"mas",website:"https://freaksmas.com",tags:["Energy","New York Link"]},{name:"Dingolay Mas",carnivalId:"miami",type:"mas",tags:["Vibrant","Fun"]},{name:"K-Paya",carnivalId:"miami",type:"mas",tags:["Party","Vibes"]},{name:"Savage Mas",carnivalId:"miami",type:"mas",tags:["Sexy","Fun"]},{name:"Euphoria Mas",carnivalId:"miami",type:"mas",tags:["Service","Quality"]},{name:"UCOM (United Colours of Mas)",carnivalId:"nottinghill",type:"mas",website:"https://unitedcoloursofmas.com",tags:["Modern","Premium"]},{name:"Chocolate Nation",carnivalId:"nottinghill",type:"mas",website:"https://chocolatenationmas.com",tags:["Vibes","Service"]},{name:"Mangrove Carnival",carnivalId:"nottinghill",type:"mas",tags:["Traditional","Community"]},{name:"Gemz Mas",carnivalId:"nottinghill",type:"mas",tags:["Sexy","Fun"]},{name:"Caribbean Sessions",carnivalId:"nottinghill",type:"mas",tags:["Party","Inclusive"]},{name:"Colours Carnival",carnivalId:"nottinghill",type:"mas",tags:["Colourful","Fun"]},{name:"Saldenah Carnival",carnivalId:"toronto",type:"mas",website:"https://saldenahcarnival.com",tags:["Legendary","Big Band","Winner"]},{name:"Carnival Nationz",carnivalId:"toronto",type:"mas",website:"https://carnivalnationz.com",tags:["Big Band","Vibes"]},{name:"Toronto Revellers",carnivalId:"toronto",type:"mas",website:"https://torontorevellers.com",tags:["Community","Fun"]},{name:"Tribal Carnival",carnivalId:"toronto",type:"mas",tags:["Culture","Mas"]},{name:"Venom Mas",carnivalId:"toronto",type:"mas",tags:["Sexy","Party"]},{name:"Fantazia",carnivalId:"toronto",type:"mas",tags:["Fun","Service"]},{name:"Krave The Band",carnivalId:"barbados",type:"mas",website:"https://kravetheband.com",tags:["Premium","Luxury"]},{name:"Aura Experience",carnivalId:"barbados",type:"mas",website:"https://auraexperience.com",tags:["Rihanna","Vibes"]},{name:"Zulu International",carnivalId:"barbados",type:"mas",tags:["Fun","Party"]},{name:"Baje International",carnivalId:"barbados",type:"mas",tags:["Legacy","Service"]},{name:"Erup The Band",carnivalId:"barbados",type:"mas",tags:["Energy","Soca"]},{name:"Oro Luxury Carnival",carnivalId:"grenada",type:"mas",tags:["Premium","Luxury"]},{name:"Xtravo",carnivalId:"grenada",type:"mas",tags:["Party","Vibes"]},{name:"Lavish The Band",carnivalId:"grenada",type:"mas",tags:["Service","Costumes"]},{name:"Legends Carnival",carnivalId:"stlucia",type:"mas",tags:["Big Band","Fun"]},{name:"Xuovo",carnivalId:"stlucia",type:"mas",tags:["Vibes","Party"]},{name:"Fuzion Mas",carnivalId:"stlucia",type:"mas",tags:["Premium","Service"]},{name:"Insane Carnival",carnivalId:"antigua",type:"mas",tags:["Fun","Party"]},{name:"Myst Carnival",carnivalId:"antigua",type:"mas",tags:["Sexy","Vibes"]},{name:"Seaduced",carnivalId:"antigua",type:"mas",tags:["Luxury","Premium"]},{name:"Madd Colors Carnival",carnivalId:"atlanta",type:"mas",website:"https://maddcolorscarnival.com/",tags:["Premium","#1 Band"]},{name:"We Kinda Ting",carnivalId:"atlanta",type:"mas",tags:["Fun","Local"]},{name:"Savage Mas",carnivalId:"atlanta",type:"mas",tags:["Sexy","Vibes"]},{name:"Panache",carnivalId:"atlanta",type:"mas",tags:["Service","Costumes"]}];function wK({carnivalId:t}){const[e,n]=R.useState(""),[r,s]=R.useState("all"),i=R.useMemo(()=>yK.filter(l=>{if(t&&l.carnivalId!==t)return!1;const c=e.toLowerCase(),h=l.name.toLowerCase().includes(c)||l.tags.some(g=>g.toLowerCase().includes(c)),m=r==="all"||l.type===r;return h&&m}),[t,e,r]),o=l=>{switch(l){case"trinidad":return"Trinidad";case"jamaica":return"Jamaica";case"miami":return"Miami";case"nottinghill":return"London";case"toronto":return"Toronto";case"barbados":return"Barbados";case"grenada":return"Grenada";case"antigua":return"Antigua";case"stlucia":return"St. Lucia";case"atlanta":return"Atlanta";default:return l}};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:A.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[A.jsx(OE,{className:"w-5 h-5 text-purple-500"}),"Costume Bands"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Find your perfect fit for ",t?o(t):"Carnival"]})]}),A.jsxs("div",{className:"relative w-full md:w-64",children:[A.jsx(LU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Search bands...",value:e,onChange:l=>n(l.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 transition"})]})]})}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((l,c)=>A.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-300 hover:border-purple-300 dark:hover:border-purple-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:l.name}),!t&&A.jsxs("span",{className:"text-xs font-medium text-gray-500 flex items-center gap-1 mt-1",children:[A.jsx(kr,{className:"w-3 h-3"}),o(l.carnivalId)]})]}),l.website&&A.jsx("a",{href:l.website,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-full hover:bg-purple-100 hover:text-purple-600 dark:hover:bg-purple-900/40 dark:hover:text-purple-400 transition",children:A.jsx(K_,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:l.tags.map((h,m)=>A.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-300 rounded-md",children:h},m))})]},c))}),i.length===0&&A.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[A.jsx(OE,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),A.jsx("p",{children:"No bands found matching your search."})]})]})}function vK({onGetStarted:t,logo:e,onTryDemo:n}){const[r,s]=R.useState(0),[i,o]=R.useState({x:0,y:0});return R.useEffect(()=>{const l=()=>s(window.scrollY),c=h=>o({x:h.clientX,y:h.clientY});return window.addEventListener("scroll",l),window.addEventListener("mousemove",c),()=>{window.removeEventListener("scroll",l),window.removeEventListener("mousemove",c)}},[]),A.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden selection:bg-pink-500 selection:text-white font-sans",children:[A.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[A.jsx("div",{className:"absolute w-[800px] h-[800px] bg-indigo-600/20 rounded-full blur-[120px] mix-blend-screen transition-transform duration-100 ease-out",style:{top:-200,left:-200,transform:`translate(${i.x*.02}px, ${i.y*.02}px)`}}),A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-pink-600/20 rounded-full blur-[100px] mix-blend-screen transition-transform duration-100 ease-out",style:{bottom:-100,right:-100,transform:`translate(${i.x*-.03}px, ${i.y*-.03}px)`}})]}),A.jsx("nav",{className:"fixed top-0 w-full z-50 px-6 py-4 backdrop-blur-md border-b border-white/5 bg-black/50",children:A.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-pink-500 to-indigo-600 flex items-center justify-center font-bold text-sm",children:"CP"}),A.jsx("span",{className:"font-bold tracking-tight text-white/90",children:"Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-sm font-semibold transition-all",children:"Log In"})]})}),A.jsxs("section",{className:"relative z-10 pt-40 pb-20 px-6 max-w-7xl mx-auto flex flex-col items-center text-center",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm mb-8 animate-fadeIn",children:[A.jsxs("span",{className:"relative flex h-2 w-2",children:[A.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),A.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),A.jsx("span",{className:"text-xs font-medium text-gray-400 tracking-wide uppercase",children:"V2.0 Now Live"})]}),A.jsxs("h1",{className:"text-6xl md:text-8xl font-black tracking-tighter mb-8 bg-clip-text text-transparent bg-gradient-to-b from-white via-white to-gray-500 leading-tight",children:["The Operating System",A.jsx("br",{}),A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500",children:"For Carnival."})]}),A.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mb-12 leading-relaxed",children:"The all-in-one workspace for your next carnival. Budget, schedule, squad sync, and ticketing  seamlessly integrated."}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[A.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-white text-black rounded-full font-bold text-lg shadow-[0_0_40px_-10px_rgba(255,255,255,0.3)] hover:shadow-[0_0_60px_-10px_rgba(255,255,255,0.5)] transition-all transform hover:scale-105",children:["Start Planning For Free",A.jsx(fm,{className:"inline-block ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),A.jsx("button",{onClick:n,className:"px-8 py-4 bg-white/10 hover:bg-white/20 border border-white/10 text-white rounded-full font-bold text-lg backdrop-blur-sm transition-all transform hover:scale-105",children:"Try Live Demo"})]}),A.jsxs("div",{className:"mt-20 relative w-full max-w-5xl aspect-[16/9] bg-gray-900/50 rounded-xl border border-white/10 backdrop-blur-sm overflow-hidden shadow-2xl group",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"}),A.jsxs("div",{className:"absolute top-4 left-4 right-4 h-4 flex gap-2",children:[A.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]}),A.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:A.jsxs("div",{className:"text-center space-y-4",children:[A.jsx("div",{className:"inline-block p-4 rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 shadow-xl mb-4 group-hover:scale-110 transition-transform duration-500",children:A.jsx(Gd,{className:"w-12 h-12 text-white"})}),A.jsx("div",{className:"text-2xl font-bold text-white/50",children:"Mission Control"})]})})]})]}),A.jsx("div",{className:"w-full bg-white/5 border-y border-white/5 py-4 overflow-hidden relative z-10 backdrop-blur-sm",children:A.jsxs("div",{className:"flex animate-marquee whitespace-nowrap gap-12 text-sm font-medium text-gray-400 uppercase tracking-widest",children:[A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"}),A.jsx("span",{children:"  350+ Live Squads"}),A.jsx("span",{children:"  Trinidad 2026 Ready"}),A.jsx("span",{children:"  Expense Tracking"}),A.jsx("span",{children:"  Soca Included"}),A.jsx("span",{children:"  Passport Sync Active"}),A.jsx("span",{children:"  Global Carnival Database"})]})}),A.jsxs("section",{className:"relative z-10 py-32 px-6 max-w-7xl mx-auto",children:[A.jsx("div",{className:"mb-16",children:A.jsxs("h2",{className:"text-4xl md:text-5xl font-black mb-6",children:["Everything you need.",A.jsx("br",{}),"Nothing you don't."]})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]",children:[A.jsxs("div",{className:"md:col-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col justify-between",children:[A.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-20 group-hover:opacity-40 transition-opacity",children:A.jsx(ir,{className:"w-48 h-48 text-indigo-500 transform rotate-12 translate-x-12 -translate-y-12"})}),A.jsxs("div",{children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center mb-4 text-indigo-400",children:A.jsx(ir,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Squad Sync"}),A.jsx("p",{className:"text-gray-400 max-w-sm",children:"Real-time collaboration. See when your friends add events, update budgets, or get road ready."})]}),A.jsxs("div",{className:"flex -space-x-4 mt-8",children:[[1,2,3,4].map(l=>A.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-800 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-gray-500 transform transition-transform group-hover:translate-x-2",style:{transitionDelay:`${l*50}ms`},children:"User"},l)),A.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-600 border-4 border-gray-900 flex items-center justify-center text-xs font-bold text-white z-10",children:"+3"})]})]}),A.jsxs("div",{className:"md:row-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8 flex flex-col",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center mb-4 text-green-400",children:A.jsx(Sp,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Smart Budget"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Track every costume payment, fete ticket, and flight."}),A.jsxs("div",{className:"mt-auto space-y-4",children:[A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Costume Deposit"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$300"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-3/4 h-full rounded-full"})})]}),A.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 group-hover:bg-gray-750 transition-colors",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{children:"Flight (MIA  POS)"}),A.jsx("span",{className:"font-mono text-green-400",children:"-$850"})]}),A.jsx("div",{className:"w-full bg-gray-700 h-1.5 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 w-full h-full rounded-full"})})]})]})]}),A.jsxs("div",{className:"relative group overflow-hidden rounded-3xl bg-gray-900 border border-white/10 hover:border-white/20 transition-all p-8",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"}),A.jsx("div",{className:"absolute inset-0 opacity-30 grayscale group-hover:grayscale-0 transition-all duration-700",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0)",backgroundSize:"24px 24px"}}),A.jsxs("div",{className:"relative z-20 h-full flex flex-col justify-end",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center mb-4 text-purple-400",children:A.jsx(H6,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Live Map"}),A.jsx("p",{className:"text-gray-400",children:"Discover events near your AirBnb."})]})]}),A.jsxs("div",{className:"col-span-1 md:col-span-2 relative group overflow-hidden rounded-3xl bg-gradient-to-br from-teal-900 to-gray-900 border border-white/10 hover:border-teal-500/30 transition-all p-8 flex items-center justify-between",children:[A.jsxs("div",{className:"max-w-xs",children:[A.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-500/20 flex items-center justify-center mb-4 text-teal-400",children:A.jsx(Tp,{})}),A.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Soca Passport"}),A.jsx("p",{className:"text-gray-400",children:"Your digital carnival identity. Syncs seamlessly with the Soca Passport app."})]}),A.jsxs("div",{className:"hidden sm:block relative w-64 h-40 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 shadow-2xl transform rotate-3 group-hover:rotate-0 transition-transform duration-500",children:[A.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 rounded-full bg-teal-500"}),A.jsx("div",{className:"absolute top-4 right-4 text-[10px] font-mono opacity-50",children:"9438-2910"}),A.jsx("div",{className:"absolute bottom-4 left-4 text-xs font-bold",children:"FEBUARY 2026"})]})]})]})]}),A.jsxs("section",{className:"relative z-10 py-32 text-center px-6",children:[A.jsx("h2",{className:"text-5xl md:text-7xl font-black mb-8",children:"Ready to jump?"}),A.jsx("button",{onClick:t,className:"px-10 py-5 bg-white text-black rounded-full font-bold text-xl hover:scale-105 transition-transform shadow-2xl",children:"Get Started Now"}),A.jsxs("div",{className:"mt-16 text-sm text-gray-500 flex flex-col md:flex-row items-center justify-center gap-8",children:[A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(z_,{className:"w-4 h-4"})," Global Support"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(vh,{className:"w-4 h-4"})," Secure Data"]}),A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx(FA,{className:"w-4 h-4"})," Vibes Included"]})]})]}),A.jsx("div",{className:"w-full border-t border-white/10 p-8 text-center text-gray-600 text-sm",children:" 2026 Carnival Planner. Built for the culture."})]})}const ja="Carnival Planner",_r="support@carnival-planner.com",kp="December 12, 2025";function xK({onBack:t,logo:e}){return A.jsxs(Np,{title:"Privacy Policy",icon:vh,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",kp]}),A.jsx(Ge,{title:"1. Introduction",children:A.jsxs("p",{children:[ja,' ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application and website (collectively, the "Service").']})}),A.jsxs(Ge,{title:"2. Information We Collect",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Personal Information"}),A.jsx("p",{className:"mb-4",children:"When you sign in with Google, we collect:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Email address"}),A.jsx("li",{children:"Display name"}),A.jsx("li",{children:"Profile picture URL"}),A.jsx("li",{children:"Google account unique identifier"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 User-Generated Content"}),A.jsx("p",{className:"mb-4",children:"Information you voluntarily provide includes:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"Carnival planning data (budgets, schedules, packing lists)"}),A.jsx("li",{children:"Costume and band information"}),A.jsx("li",{children:"Squad member names and coordination data"}),A.jsx("li",{children:"Uploaded media files (tickets, photos, documents)"}),A.jsx("li",{children:"Map pins and location notes"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Payment Information"}),A.jsx("p",{children:"For premium subscriptions, payment processing is handled securely by Stripe. We do not store your credit card numbers. We receive only transaction confirmation, subscription status, and billing email from Stripe."})]}),A.jsx(Ge,{title:"3. How We Use Your Information",children:A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsx("li",{children:"To provide and maintain the Service"}),A.jsx("li",{children:"To authenticate your identity via Google Sign-In"}),A.jsx("li",{children:"To process premium subscription payments via Stripe"}),A.jsx("li",{children:"To sync your carnival planning data across devices"}),A.jsx("li",{children:"To send push notifications for squad alerts (if enabled)"}),A.jsx("li",{children:"To improve and optimize our Service"}),A.jsx("li",{children:"To respond to your inquiries and support requests"})]})}),A.jsxs(Ge,{title:"4. Data Storage and Security",children:[A.jsx("p",{className:"mb-4",children:"Your data is stored using Firebase services provided by Google:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Manages secure sign-in"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Cloud Firestore:"})," Stores your planning data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Storage:"})," Stores uploaded media files"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Cloud Messaging:"})," Delivers push notifications"]})]}),A.jsx("p",{children:"We implement industry-standard security measures including encryption in transit (TLS) and at rest. Firebase services are SOC 2 and ISO 27001 certified."})]}),A.jsxs(Ge,{title:"5. Third-Party Services",children:[A.jsx("p",{className:"mb-4",children:"We use the following third-party services:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Google (Firebase):"})," Authentication, database, storage, and hosting. ",A.jsx("a",{href:"https://firebase.google.com/support/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Firebase Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing. ",A.jsx("a",{href:"https://stripe.com/privacy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Stripe Privacy Policy"})]}),A.jsxs("li",{children:[A.jsx("strong",{children:"OpenStreetMap:"})," Map tiles for the Fete Map feature. ",A.jsx("a",{href:"https://wiki.osmfoundation.org/wiki/Privacy_Policy",className:"text-pink-400 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"OSM Privacy Policy"})]})]})]}),A.jsxs(Ge,{title:"6. Your Rights (GDPR/CCPA)",children:[A.jsx("p",{className:"mb-4",children:"Depending on your location, you may have the following rights:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Rectification:"})," Correct inaccurate personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Erasure:"})," Request deletion of your personal data"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Portability:"})," Receive your data in a portable format"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Opt-out:"})," Opt out of certain data processing"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Non-discrimination:"})," We will not discriminate against you for exercising your rights"]})]}),A.jsxs("p",{className:"mt-4",children:["To exercise these rights, contact us at ",A.jsx("a",{href:`mailto:${_r}`,className:"text-pink-400 hover:underline",children:_r}),"."]})]}),A.jsx(Ge,{title:"7. Data Retention",children:A.jsx("p",{children:"We retain your personal data for as long as your account is active. If you delete your account, we will delete your data within 30 days, except where we are legally required to retain it."})}),A.jsx(Ge,{title:"8. Children's Privacy",children:A.jsx("p",{children:"Our Service is not intended for children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected such information, please contact us immediately."})}),A.jsx(Ge,{title:"9. Changes to This Policy",children:A.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'})}),A.jsxs(Ge,{title:"10. Contact Us",children:[A.jsx("p",{children:"If you have questions about this Privacy Policy, please contact us at:"}),A.jsx("p",{className:"mt-2",children:A.jsx("a",{href:`mailto:${_r}`,className:"text-pink-400 hover:underline",children:_r})})]})]})}function _K({onBack:t,logo:e}){return A.jsxs(Np,{title:"Terms of Service",icon:j6,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",kp]}),A.jsx(Ge,{title:"1. Acceptance of Terms",children:A.jsxs("p",{children:["By accessing or using ",ja,' ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.']})}),A.jsx(Ge,{title:"2. Description of Service",children:A.jsxs("p",{children:[ja," is a Progressive Web App that helps users plan and organize Caribbean carnival events. The Service includes free features (budget planning, scheduling, squad coordination) and premium subscription features (interactive maps, media vault, offline mode)."]})}),A.jsxs(Ge,{title:"3. User Accounts",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Registration"}),A.jsx("p",{className:"mb-4",children:"You must sign in with a valid Google account to use the Service. You are responsible for maintaining the security of your account."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Account Responsibilities"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"You must provide accurate information"}),A.jsx("li",{children:"You are responsible for all activities under your account"}),A.jsx("li",{children:"You must notify us immediately of any unauthorized use"})]})]}),A.jsxs(Ge,{title:"4. Premium Subscriptions",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.1 Subscription Plans"}),A.jsx("p",{className:"mb-4",children:"We offer monthly ($4.99/month) and yearly ($39.99/year) subscription plans. Prices are subject to change with reasonable notice."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.2 Billing"}),A.jsx("p",{className:"mb-4",children:"Subscriptions are billed in advance on a recurring basis. Payment is processed through Stripe. Your subscription will automatically renew unless you cancel before the renewal date."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"4.3 Cancellation"}),A.jsx("p",{children:"You may cancel your subscription at any time. You will continue to have access to premium features until the end of your current billing period. See our Refund Policy for details."})]}),A.jsxs(Ge,{title:"5. User Content",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.1 Your Content"}),A.jsx("p",{className:"mb-4",children:"You retain ownership of all content you upload to the Service (schedules, media, notes). By uploading content, you grant us a limited license to store, display, and process it to provide the Service."}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"5.2 Content Restrictions"}),A.jsx("p",{className:"mb-2",children:"You agree not to upload content that:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Is illegal, harmful, or offensive"}),A.jsx("li",{children:"Infringes on intellectual property rights"}),A.jsx("li",{children:"Contains malware or malicious code"}),A.jsx("li",{children:"Violates others' privacy"})]})]}),A.jsxs(Ge,{title:"6. Acceptable Use",children:[A.jsx("p",{className:"mb-2",children:"You agree not to:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Use the Service for any unlawful purpose"}),A.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),A.jsx("li",{children:"Interfere with or disrupt the Service"}),A.jsx("li",{children:"Reverse engineer or decompile the Service"}),A.jsx("li",{children:"Use automated systems to access the Service without permission"})]})]}),A.jsx(Ge,{title:"7. Intellectual Property",children:A.jsxs("p",{children:["The Service, including its design, features, and content (excluding user content), is owned by ",ja," and protected by intellectual property laws. You may not copy, modify, or distribute our intellectual property without permission."]})}),A.jsx(Ge,{title:"8. Disclaimer of Warranties",children:A.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE. YOUR USE OF THE SERVICE IS AT YOUR OWN RISK.'})}),A.jsx(Ge,{title:"9. Limitation of Liability",children:A.jsxs("p",{children:["TO THE MAXIMUM EXTENT PERMITTED BY LAW, ",ja.toUpperCase()," SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE, EVEN IF WE HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."]})}),A.jsx(Ge,{title:"10. Termination",children:A.jsx("p",{children:"We may terminate or suspend your account at any time for violation of these Terms. You may delete your account at any time. Upon termination, your right to use the Service will immediately cease."})}),A.jsx(Ge,{title:"11. Governing Law",children:A.jsxs("p",{children:["These Terms shall be governed by the laws of the jurisdiction in which ",ja," operates, without regard to conflict of law principles."]})}),A.jsx(Ge,{title:"12. Changes to Terms",children:A.jsx("p",{children:"We may modify these Terms at any time. We will notify you of significant changes via email or in-app notification. Continued use of the Service after changes constitutes acceptance of the new Terms."})}),A.jsx(Ge,{title:"13. Contact",children:A.jsxs("p",{children:["For questions about these Terms, contact us at ",A.jsx("a",{href:`mailto:${_r}`,className:"text-pink-400 hover:underline",children:_r}),"."]})})]})}function BK({onBack:t,logo:e}){return A.jsxs(Np,{title:"Cookie Policy",icon:P6,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",kp]}),A.jsx(Ge,{title:"1. What Are Cookies",children:A.jsx("p",{children:"Cookies are small text files stored on your device when you visit a website. They help websites remember your preferences and improve your experience."})}),A.jsxs(Ge,{title:"2. How We Use Cookies",children:[A.jsxs("p",{className:"mb-4",children:[ja," uses cookies and similar technologies for the following purposes:"]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 Essential Cookies (Required)"}),A.jsx("p",{className:"mb-4",children:"These cookies are necessary for the Service to function and cannot be disabled:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase Authentication:"})," Maintains your signed-in session securely"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Session Management:"})," Remembers your authentication state"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Functional Cookies"}),A.jsx("p",{className:"mb-4",children:"These cookies enhance your experience:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Preferences:"})," Remembers your dark mode setting"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Local Storage:"})," Caches carnival data for offline access (Premium feature)"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.3 Third-Party Cookies"}),A.jsx("p",{className:"mb-2",children:"Our third-party services may set their own cookies:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Firebase/Google:"})," Authentication and analytics"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Stripe:"})," Payment processing security"]})]})]}),A.jsx(Ge,{title:"3. Cookie Details",children:A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full text-left text-sm mb-4",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b border-gray-700",children:[A.jsx("th",{className:"py-2 pr-4",children:"Cookie Name"}),A.jsx("th",{className:"py-2 pr-4",children:"Purpose"}),A.jsx("th",{className:"py-2 pr-4",children:"Duration"}),A.jsx("th",{className:"py-2",children:"Type"})]})}),A.jsxs("tbody",{className:"text-gray-400",children:[A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"firebase-auth"}),A.jsx("td",{className:"py-2 pr-4",children:"User authentication"}),A.jsx("td",{className:"py-2 pr-4",children:"Session"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"__stripe_mid"}),A.jsx("td",{className:"py-2 pr-4",children:"Fraud prevention"}),A.jsx("td",{className:"py-2 pr-4",children:"1 year"}),A.jsx("td",{className:"py-2",children:"Essential"})]}),A.jsxs("tr",{className:"border-b border-gray-800",children:[A.jsx("td",{className:"py-2 pr-4",children:"darkMode"}),A.jsx("td",{className:"py-2 pr-4",children:"Theme preference"}),A.jsx("td",{className:"py-2 pr-4",children:"Persistent"}),A.jsx("td",{className:"py-2",children:"Functional"})]})]})]})})}),A.jsxs(Ge,{title:"4. Local Storage",children:[A.jsx("p",{className:"mb-4",children:"In addition to cookies, we use browser local storage for:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Caching carnival data for offline access (Premium)"}),A.jsx("li",{children:"Storing FCM tokens for push notifications"}),A.jsx("li",{children:"Temporary UI state"})]})]}),A.jsxs(Ge,{title:"5. Managing Cookies",children:[A.jsx("p",{className:"mb-4",children:"You can manage cookies through your browser settings:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Chrome:"})," Settings  Privacy and security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Firefox:"})," Settings  Privacy & Security  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Safari:"})," Preferences  Privacy  Cookies"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Edge:"})," Settings  Cookies and site permissions"]})]}),A.jsx("p",{className:"mt-4 text-yellow-400",children:"Note: Disabling essential cookies may prevent you from using the Service."})]}),A.jsx(Ge,{title:"6. Updates to This Policy",children:A.jsx("p",{children:"We may update this Cookie Policy to reflect changes in our practices or for legal reasons. Check this page periodically for updates."})}),A.jsx(Ge,{title:"7. Contact",children:A.jsxs("p",{children:["For questions about our use of cookies, contact us at ",A.jsx("a",{href:`mailto:${_r}`,className:"text-pink-400 hover:underline",children:_r}),"."]})})]})}function bK({onBack:t,logo:e}){return A.jsxs(Np,{title:"Refund Policy",icon:Tp,onBack:t,logo:e,children:[A.jsxs("p",{className:"text-gray-400 mb-6",children:["Last Updated: ",kp]}),A.jsx(Ge,{title:"1. Premium Subscription",children:A.jsxs("p",{children:[ja," offers premium subscriptions at $4.99/month or $39.99/year. This policy explains our refund terms for these subscriptions."]})}),A.jsxs(Ge,{title:"2. Subscription Cancellation",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.1 How to Cancel"}),A.jsx("p",{className:"mb-4",children:"You can cancel your subscription at any time by:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:["Contacting us at ",A.jsx("a",{href:`mailto:${_r}`,className:"text-pink-400 hover:underline",children:_r})]}),A.jsx("li",{children:"Managing your subscription through Stripe's customer portal (link provided in your confirmation email)"})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"2.2 Effect of Cancellation"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Your premium access continues until the end of your current billing period"}),A.jsx("li",{children:"You will not be charged again after cancellation"}),A.jsx("li",{children:"No partial refunds are provided for unused time in the current billing period"})]})]}),A.jsxs(Ge,{title:"3. Refund Eligibility",children:[A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.1 Eligible for Refund"}),A.jsx("p",{className:"mb-2",children:"We offer refunds in the following situations:"}),A.jsxs("ul",{className:"list-disc list-inside mb-4 space-y-1",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Technical Issues:"})," If the Service was unavailable or significantly impaired for an extended period"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Accidental Purchase:"})," If you accidentally subscribed and request a refund within 48 hours, without using premium features"]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Duplicate Charges:"})," If you were charged multiple times for the same subscription period"]})]}),A.jsx("h4",{className:"font-semibold text-white mb-2",children:"3.2 Not Eligible for Refund"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Change of mind after using premium features"}),A.jsx("li",{children:"Requests made after 30 days from the charge date"}),A.jsx("li",{children:"Failure to cancel before renewal (you must cancel before renewal to avoid charges)"}),A.jsx("li",{children:"Issues caused by your device, browser, or internet connection"})]})]}),A.jsxs(Ge,{title:"4. How to Request a Refund",children:[A.jsx("p",{className:"mb-4",children:"To request a refund:"}),A.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[A.jsxs("li",{children:["Email us at ",A.jsx("a",{href:`mailto:${_r}`,className:"text-pink-400 hover:underline",children:_r})]}),A.jsx("li",{children:"Include your account email and the date of the charge"}),A.jsx("li",{children:"Explain the reason for your refund request"})]}),A.jsx("p",{className:"mt-4",children:"We will review your request and respond within 5 business days."})]}),A.jsxs(Ge,{title:"5. Refund Processing",children:[A.jsx("p",{className:"mb-4",children:"If your refund is approved:"}),A.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[A.jsx("li",{children:"Refunds are processed through Stripe to your original payment method"}),A.jsx("li",{children:"Allow 5-10 business days for the refund to appear on your statement"}),A.jsx("li",{children:"Your premium access will be revoked upon refund"})]})]}),A.jsx(Ge,{title:"6. Free Trial",children:A.jsx("p",{children:"We do not currently offer free trials. All core features are free to use. Premium features require a paid subscription."})}),A.jsx(Ge,{title:"7. Price Changes",children:A.jsx("p",{children:"If we increase subscription prices, existing subscribers will be notified at least 30 days in advance. You may cancel before the new price takes effect to avoid being charged at the higher rate."})}),A.jsx(Ge,{title:"8. Contact",children:A.jsxs("p",{children:["For refund requests or questions about this policy, contact us at ",A.jsx("a",{href:`mailto:${_r}`,className:"text-pink-400 hover:underline",children:_r}),"."]})})]})}function Np({title:t,icon:e,onBack:n,logo:r,children:s}){return A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(M_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r&&A.jsx("img",{src:r,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(e,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:t})]})]}),A.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:s}),A.jsx("footer",{className:"mt-12 text-center text-gray-500 text-sm",children:A.jsx("p",{children:"Carnival Planner - Plan your Mas. Track your Fetes. Coordinate your Squad."})})]})]})}function Ge({title:t,children:e}){return A.jsxs("div",{className:"mb-8",children:[A.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:t}),A.jsx("div",{className:"text-gray-300 leading-relaxed",children:e})]})}function CK(){const[t,e]=R.useState(null),[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,l]=R.useState(!1);R.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const m=localStorage.getItem("pwa-install-dismissed");m&&(Date.now()-parseInt(m))/864e5<7&&l(!0);const g=B=>{B.preventDefault(),e(B),o||r(!0)},y=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",g),window.addEventListener("appinstalled",y),()=>{window.removeEventListener("beforeinstallprompt",g),window.removeEventListener("appinstalled",y)}},[o]);const c=async()=>{if(!t)return;t.prompt();const{outcome:m}=await t.userChoice;m==="accepted"&&i(!0),e(null),r(!1)},h=()=>{r(!1),l(!0),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return!n||s?null:A.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 animate-slideUp md:left-auto md:right-4 md:max-w-sm safe-bottom",children:A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-2xl p-4 text-white",children:[A.jsx("button",{onClick:h,className:"absolute top-2 right-2 p-1 hover:bg-white/20 rounded-full transition-colors",children:A.jsx(hs,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx(J6,{className:"w-6 h-6"})}),A.jsxs("div",{className:"flex-1 pr-6",children:[A.jsx("h3",{className:"font-bold text-lg mb-1",children:"Add to Home Screen"}),A.jsx("p",{className:"text-white/80 text-sm mb-3",children:"Install Carnival Planner for quick access and offline use!"}),A.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-colors",children:[A.jsx(jc,{className:"w-4 h-4"}),"Install App"]})]})]})]})})}function EK({onBack:t,logo:e,user:n}){const[r,s]=R.useState(""),[i,o]=R.useState(""),[l,c]=R.useState((n==null?void 0:n.email)||""),[h,m]=R.useState(!1),[g,y]=R.useState(!1),[B,b]=R.useState(""),x=async S=>{if(S.preventDefault(),!i.trim()||!l.trim()){b("Please fill in all required fields");return}m(!0),b("");try{await _c(cn(Te,"support-requests"),{email:l.trim(),subject:r.trim()||"General Inquiry",message:i.trim(),userId:(n==null?void 0:n.uid)||null,userName:(n==null?void 0:n.displayName)||null,status:"new",createdAt:qe.now()}),y(!0),s(""),o("")}catch(I){console.error("Error submitting support request:",I),b("Failed to send message. Please try again.")}finally{m(!1)}};return g?A.jsx("div",{className:"min-h-screen bg-slate-950 text-white flex items-center justify-center p-6",children:A.jsxs("div",{className:"text-center max-w-md",children:[A.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx(U6,{className:"w-10 h-10 text-green-400"})}),A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Message Sent!"}),A.jsx("p",{className:"text-gray-400 mb-8",children:"Thank you for reaching out. We'll get back to you as soon as possible."}),A.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold hover:opacity-90 transition-opacity",children:"Back to App"})]})}):A.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[A.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute w-[600px] h-[600px] bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-full blur-3xl -top-48 -right-48"}),A.jsx("div",{className:"absolute w-[400px] h-[400px] bg-gradient-to-r from-blue-500/15 to-cyan-500/15 rounded-full blur-3xl bottom-0 left-0"})]}),A.jsxs("div",{className:"relative max-w-2xl mx-auto px-6 py-12",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8",children:[A.jsx(M_,{className:"w-5 h-5"}),"Back"]}),A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e&&A.jsx("img",{src:e,alt:"Logo",className:"w-12 h-12 rounded-xl"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500/30 to-purple-500/30 rounded-xl flex items-center justify-center",children:A.jsx(W_,{className:"w-6 h-6 text-pink-400"})}),A.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Contact Support"})]})]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8",children:[A.jsx("p",{className:"text-gray-400 mb-6",children:"Have a question, feedback, or need help? Send us a message and we'll get back to you as soon as possible."}),A.jsxs("form",{onSubmit:x,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address *"}),A.jsxs("div",{className:"relative",children:[A.jsx(q_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:l,onChange:S=>c(S.target.value),placeholder:"your@email.com",required:!0,className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Subject"}),A.jsxs("select",{value:r,onChange:S=>s(S.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-pink-500 transition-colors",children:[A.jsx("option",{value:"",className:"bg-gray-900",children:"Select a topic..."}),A.jsx("option",{value:"General Question",className:"bg-gray-900",children:"General Question"}),A.jsx("option",{value:"Premium Subscription",className:"bg-gray-900",children:"Premium Subscription"}),A.jsx("option",{value:"Technical Issue",className:"bg-gray-900",children:"Technical Issue"}),A.jsx("option",{value:"Feature Request",className:"bg-gray-900",children:"Feature Request"}),A.jsx("option",{value:"Refund Request",className:"bg-gray-900",children:"Refund Request"}),A.jsx("option",{value:"Account Issue",className:"bg-gray-900",children:"Account Issue"}),A.jsx("option",{value:"Other",className:"bg-gray-900",children:"Other"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message *"}),A.jsx("textarea",{value:i,onChange:S=>o(S.target.value),placeholder:"How can we help you?",required:!0,rows:6,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500 transition-colors resize-none"})]}),B&&A.jsx("p",{className:"text-red-400 text-sm",children:B}),A.jsx("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl font-bold text-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:h?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):A.jsxs(A.Fragment,{children:[A.jsx(jU,{className:"w-5 h-5"}),"Send Message"]})})]})]}),A.jsxs("p",{className:"text-gray-500 text-sm text-center mt-8",children:["You can also email us directly at"," ",A.jsx("a",{href:"mailto:support@carnival-planner.com",className:"text-pink-400 hover:underline",children:"support@carnival-planner.com"})]})]})]})}function IK(){const[t,e]=R.useState([]),[n,r]=R.useState(!0),[s,i]=R.useState(null);R.useEffect(()=>{const l=HA(cn(Te,"support-requests"),g_("createdAt","desc")),c=Zs(l,h=>{const m=h.docs.map(g=>({id:g.id,...g.data()}));e(m),r(!1),i(null)},h=>{console.error("SupportAdmin query failed:",h),i(h.message),r(!1)});return()=>c()},[]);const o=async l=>{confirm("Delete this support request?")&&await gh(ze(Te,"support-requests",l))};return n?A.jsx("div",{className:"text-center py-8 text-gray-500",children:A.jsx(Et,{className:"w-6 h-6 animate-spin mx-auto"})}):s?A.jsxs("div",{className:"p-8 text-center bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:[A.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load support requests: ",s]}),A.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This may require a Firestore index. Check the console."})]}):A.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h3",{className:"font-bold text-lg mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[A.jsx(W_,{className:"w-5 h-5"}),"Support Requests (",t.length,")"]}),t.length===0?A.jsx("p",{className:"text-gray-500 text-center py-4",children:"No support requests yet"}):A.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.map(l=>{var c,h;return A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:l.email}),A.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),A.jsx("span",{className:"text-sm text-gray-500",children:l.subject||"General"})]}),A.jsx("button",{onClick:()=>o(l.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:A.jsx(oi,{className:"w-4 h-4"})})]}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm whitespace-pre-wrap",children:l.message}),A.jsx("p",{className:"text-xs text-gray-400 mt-2",children:((h=(c=l.createdAt)==null?void 0:c.toDate)==null?void 0:h.call(c).toLocaleString())||"Unknown date"})]},l.id)})})]})}function TK({user:t,onClose:e}){const[n,r]=R.useState(!1),[s,i]=R.useState(""),[o,l]=R.useState(!1),[c,h]=R.useState(""),[m,g]=R.useState({displayName:"",bio:"",avatarUrl:""}),[y,B]=R.useState(!1),[b,x]=R.useState(!1),[S,I]=R.useState(!1),[E,U]=R.useState(""),M=R.useRef(null);R.useEffect(()=>{if(!t)return;(async()=>{try{const N=ze(Te,"users",t.uid,"profile","info"),Q=await Is(N);if(Q.exists()){const D=Q.data();g({displayName:D.displayName||t.displayName||"",bio:D.bio||"",avatarUrl:D.avatarUrl||t.photoURL||""})}else g({displayName:t.displayName||"",bio:"",avatarUrl:t.photoURL||""})}catch(N){console.log("Could not load profile:",N)}})()},[t]);const H=async()=>{if(t){x(!0),h("");try{const C=ze(Te,"users",t.uid,"profile","info");await Gn(C,{displayName:m.displayName,bio:m.bio,avatarUrl:m.avatarUrl,updatedAt:qe.now()},{merge:!0}),B(!1),U("Profile saved!"),setTimeout(()=>U(""),3e3)}catch(C){console.error("Error saving profile:",C),h("Could not save profile. Please try again.")}finally{x(!1)}}},O=async C=>{const N=C.target.files[0];if(!N||!t)return;if(N.size>2*1024*1024){h("Image too large. Max 2MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(N.type)){h("Please upload a JPG, PNG, GIF, or WebP image.");return}I(!0),h("");try{const D=Date.now(),K=N.name.split(".").pop(),j=`avatars/${t.uid}/${D}.${K}`,X=co(uo,j);await Bc(X,N);const J=await bc(X);g(Ae=>({...Ae,avatarUrl:J}));const oe=ze(Te,"users",t.uid,"profile","info");await Gn(oe,{avatarUrl:J,updatedAt:qe.now()},{merge:!0}),U("Avatar updated!"),setTimeout(()=>U(""),3e3)}catch(D){console.error("Avatar upload error:",D),h("Could not upload avatar. Please try again.")}finally{I(!1),M.current&&(M.current.value="")}},T=async()=>{if(s!=="DELETE"){h("Please type DELETE to confirm");return}l(!0),h("");try{const C=on(Ft);await Dt(C,"deleteUserAccount")(),await uk(Ha),window.location.reload()}catch(C){console.error("Error deleting account:",C),h(C.message||"Failed to delete account. Please try again."),l(!1)}};return A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Account Settings"}),e&&A.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:A.jsx(hs,{className:"w-5 h-5"})})]}),E&&A.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 text-sm",children:E}),c&&A.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:c}),A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-5",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:m.avatarUrl?A.jsx("img",{src:m.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):A.jsx(ei,{className:"w-10 h-10 text-gray-400"})}),A.jsx("input",{ref:M,type:"file",accept:"image/*",onChange:O,className:"hidden",id:"avatar-upload"}),A.jsx("label",{htmlFor:"avatar-upload",className:"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 rounded-full text-white cursor-pointer hover:bg-blue-700 transition",children:S?A.jsx(Et,{className:"w-4 h-4 animate-spin"}):A.jsx(Cc,{className:"w-4 h-4"})})]}),A.jsx("div",{className:"flex-1",children:y?A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:m.displayName,onChange:C=>g(N=>({...N,displayName:C.target.value})),placeholder:"Your name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Bio"}),A.jsx("textarea",{value:m.bio,onChange:C=>g(N=>({...N,bio:C.target.value})),placeholder:"Tell us about yourself...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm resize-none",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[m.bio.length,"/200"]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{onClick:H,disabled:b,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[b?A.jsx(Et,{className:"w-4 h-4 animate-spin"}):A.jsx(Y6,{className:"w-4 h-4"}),"Save"]}),A.jsx("button",{onClick:()=>B(!1),className:"px-3 py-1.5 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancel"})]})]}):A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white mb-1",children:m.displayName||"No name set"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:t==null?void 0:t.email}),m.bio&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:m.bio}),A.jsxs("button",{onClick:()=>B(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:[A.jsx(RU,{className:"w-4 h-4"}),"Edit Profile"]})]})})]})}),A.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[A.jsxs("h4",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[A.jsx(O_,{className:"w-5 h-5"}),"Danger Zone"]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),n?A.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[A.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3",children:"This will permanently delete:"}),A.jsxs("ul",{className:"text-sm text-red-500 dark:text-red-400 list-disc list-inside mb-4 space-y-1",children:[A.jsx("li",{children:"All your carnival plans and data"}),A.jsx("li",{children:"Uploaded photos and documents"}),A.jsx("li",{children:"Squad memberships"}),A.jsx("li",{children:"Your account and login"})]}),A.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Type ",A.jsx("span",{className:"font-mono bg-gray-200 dark:bg-gray-700 px-1 rounded",children:"DELETE"})," to confirm:"]}),A.jsx("input",{type:"text",value:s,onChange:C=>i(C.target.value),placeholder:"Type DELETE",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-3"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>{r(!1),i(""),h("")},disabled:o,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",children:"Cancel"}),A.jsx("button",{onClick:T,disabled:o||s!=="DELETE",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:o?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):A.jsxs(A.Fragment,{children:[A.jsx(oi,{className:"w-4 h-4"}),"Delete Forever"]})})]})]}):A.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[A.jsx(oi,{className:"w-4 h-4"}),"Delete My Account"]})]})]})]})}const SK={BRONZE:{name:"Bronze",color:"from-amber-600 to-amber-800",textColor:"text-amber-600",bgColor:"bg-amber-100 dark:bg-amber-900/30",icon:"",medalImage:"/images/passport/medal_bronze.png",bgImage:"/images/passport/bg_bronze.png"},SILVER:{name:"Silver",color:"from-gray-400 to-gray-600",textColor:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-700/30",icon:"",medalImage:"/images/passport/medal_silver.png",bgImage:"/images/passport/bg_silver.png"},GOLD:{name:"Gold",color:"from-yellow-400 to-amber-500",textColor:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",icon:"",medalImage:"/images/passport/medal_gold.png",bgImage:"/images/passport/bg_gold.png"},PLATINUM:{name:"Platinum",color:"from-purple-400 to-indigo-600",textColor:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30",icon:"",medalImage:"/images/passport/medal_platinum.png",bgImage:"/images/passport/bg_platinum.png"}},kK={COMMON:"border-gray-300 dark:border-gray-600",RARE:"border-blue-400 dark:border-blue-500",EPIC:"border-purple-500 dark:border-purple-400",LEGENDARY:"border-yellow-400 dark:border-yellow-500"};function NK({user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s,onOpenCheckin:i,onViewStamps:o,onViewAchievements:l,onViewLeaderboard:c,onViewRewards:h}){const[m,g]=R.useState(null),[y,B]=R.useState([]),[b,x]=R.useState(!0),[S,I]=R.useState(null),[E,U]=R.useState(null);if(R.useEffect(()=>{if(!r||!t||!r||!t)return;if(s){U({inSquad:!0,squadName:"Insane Carnival Squad",stats:{totalCredits:1250,totalEvents:8,countriesVisited:2,memberCount:3},members:[{userId:t.uid,displayName:t.displayName||"You",profilePictureUrl:t.photoURL,totalCredits:350,currentTier:"BRONZE"},{userId:"demo-2",displayName:"Sarah J",profilePictureUrl:null,totalCredits:500,currentTier:"SILVER"},{userId:"demo-3",displayName:"Mike T",profilePictureUrl:null,totalCredits:400,currentTier:"BRONZE"}].sort((N,Q)=>Q.totalCredits-N.totalCredits)});return}(async()=>{const N=on(Ft),Q=Dt(N,"getSquadPassportStats");try{const D=await Q({planId:r});D.data.inSquad&&U(D.data)}catch(D){console.error("Failed to load squad stats",D)}})()},[r,t]),R.useEffect(()=>{if(!t)return;if(s){g({totalCredits:1250,currentTier:"GOLD",tierProgress:{nextTier:"PLATINUM",creditsToNextTier:750,progressPercent:62},totalEvents:8,countriesVisited:["TT","BB"],unlockedAchievements:["first-checkin","island-hopper"],achievementPoints:150,achievementDefinitions:{}}),B([{id:"1",eventTitle:"Soca Brainwash",countryCode:"TT",rarity:"LEGENDARY"},{id:"2",eventTitle:"Roast Cruise",countryCode:"BB",rarity:"RARE"},{id:"3",eventTitle:"AM Bush",countryCode:"TT",rarity:"EPIC"}]),x(!1);return}(async()=>{x(!0),I(null);try{const N=on(Ft),D=await Dt(N,"getPassportProfile")();g(D.data);try{const j=await Dt(N,"getPassportStamps")({limit:5});B(j.data.stamps||[])}catch(K){console.warn("Error loading stamps (non-critical):",K),B([])}}catch(N){console.error("Error loading passport data:",N),I(N.message)}finally{x(!1)}})()},[t,s]),b)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] animate-pulse",children:[A.jsx("div",{className:"p-4 bg-teal-100 dark:bg-teal-900/30 rounded-full mb-4",children:A.jsx(Et,{className:"w-8 h-8 text-teal-500 animate-spin"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your passport..."})]});if(S)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[A.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:A.jsx(Tp,{className:"w-8 h-8 text-red-500"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Unable to Load Passport"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:S}),A.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-teal-500 text-white rounded-xl font-medium hover:bg-teal-600 transition-colors",children:"Try Again"})]});const M=SK[(m==null?void 0:m.currentTier)||"BRONZE"],H=(m==null?void 0:m.tierProgress)||{},O=(m==null?void 0:m.unlockedAchievements)||[],T=(m==null?void 0:m.achievementDefinitions)||{};return A.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[A.jsxs("div",{className:"relative overflow-hidden rounded-3xl p-6 text-white shadow-xl min-h-[180px]",style:{backgroundImage:`url(${M.bgImage})`,backgroundSize:"cover",backgroundPosition:"center"},children:[A.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${M.color} opacity-60`}),A.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full -ml-10 -mb-10 blur-xl"}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-20 h-20 flex items-center justify-center",children:A.jsx("img",{src:M.medalImage,alt:`${M.name} Medal`,className:"w-full h-full object-contain drop-shadow-lg"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black tracking-tight drop-shadow-md",children:"SOCA PASSPORT"}),A.jsxs("p",{className:"text-white/90 text-sm font-medium drop-shadow",children:[M.name," Tier"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-3xl font-black drop-shadow-md",children:(m==null?void 0:m.totalCredits)||0}),A.jsx("p",{className:"text-xs text-white/80 uppercase tracking-wider font-medium",children:"Credits"})]})]}),H.nextTier&&A.jsxs("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-4",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[A.jsx("span",{className:"font-medium",children:M.name}),A.jsxs("span",{className:"text-white/90",children:[H.creditsToNextTier," to ",H.nextTier]})]}),A.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:A.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:`${H.progressPercent}%`}})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-teal-100 dark:bg-teal-900/30 flex items-center justify-center",children:A.jsx(Us,{className:"w-5 h-5 text-teal-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(m==null?void 0:m.totalEvents)||0}),A.jsx("p",{className:"text-xs text-gray-500",children:"Events"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:A.jsx(kr,{className:"w-5 h-5 text-blue-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((m==null?void 0:m.countriesVisited)||[]).length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Countries"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:A.jsx(id,{className:"w-5 h-5 text-yellow-500"})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:O.length}),A.jsx("p",{className:"text-xs text-gray-500",children:"Achievements"})]})]}),A.jsxs("button",{onClick:i,className:"w-full group relative overflow-hidden bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl p-5 shadow-lg shadow-teal-500/20 transition-all hover:-translate-y-1 active:scale-[0.99]",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),A.jsxs("div",{className:"relative flex items-center justify-center gap-3",children:[A.jsx(Gd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-lg font-bold",children:"CHECK IN TO EVENT"}),A.jsx(V0,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),A.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl p-5 text-white shadow-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(ec,{className:"w-6 h-6"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Rewards Market"}),A.jsx("p",{className:"text-white/80 text-sm",children:"Redeem your credits"})]})]}),A.jsx("button",{onClick:h,className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"Browse Rewards"})]})}),E&&A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-5 shadow-lg text-white",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:A.jsx(ir,{className:"w-6 h-6 text-white"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:E.squadName}),A.jsx("p",{className:"text-white/70 text-sm",children:"Squad Passport Stats"})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-2xl font-bold",children:E.stats.totalCredits.toLocaleString()}),A.jsx("p",{className:"text-xs text-white/70",children:"Total Credits"})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-black/20 rounded-xl p-3 flex items-center gap-3",children:[A.jsx(Us,{className:"w-5 h-5 text-purple-200"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:E.stats.totalEvents}),A.jsx("p",{className:"text-xs text-white/60",children:"Squad Events"})]})]}),A.jsxs("div",{className:"bg-black/20 rounded-xl p-3 flex items-center gap-3",children:[A.jsx(kr,{className:"w-5 h-5 text-blue-200"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:E.stats.countriesVisited}),A.jsx("p",{className:"text-xs text-white/60",children:"Countries"})]})]})]}),A.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center gap-2 overflow-x-auto pb-1 scrollbar-hide",children:E.members.map((C,N)=>A.jsxs("div",{className:"flex-shrink-0 relative",children:[A.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${C.userId===t.uid?"border-yellow-400":"border-white/20"} overflow-hidden bg-gray-800`,children:C.profilePictureUrl?A.jsx("img",{src:C.profilePictureUrl,alt:"",className:"w-10 h-10 object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold text-white/50",children:C.displayName?C.displayName.charAt(0):"?"})}),A.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-gray-900 text-[8px] font-bold px-1 rounded-full border border-gray-700",children:["#",N+1]})]},C.userId))})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(yg,{className:"w-5 h-5 text-yellow-500"}),"Recent Stamps"]}),y.length>0&&A.jsxs("button",{onClick:o,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(V0,{className:"w-4 h-4"})]})]}),y.length===0?A.jsxs("div",{className:"text-center py-8",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:A.jsx(Us,{className:"w-8 h-8 text-gray-400"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"No stamps yet"}),A.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Check in to your first event!"})]}):A.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-1 px-1",children:y.map(C=>A.jsxs("div",{className:`flex-shrink-0 w-24 h-24 rounded-2xl border-2 ${kK[C.rarity]} bg-gray-50 dark:bg-gray-700 flex flex-col items-center justify-center p-2 text-center`,children:[A.jsx("span",{className:"text-2xl mb-1",children:C.countryCode==="TT"?"":C.countryCode==="US"?"":C.countryCode==="JM"?"":C.countryCode==="BB"?"":C.countryCode==="LC"?"":C.countryCode==="VC"?"":""}),A.jsx("p",{className:"text-[10px] font-medium text-gray-700 dark:text-gray-300 truncate w-full",children:C.eventTitle}),A.jsx("p",{className:"text-[8px] text-gray-400 uppercase",children:C.rarity})]},C.id))})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(H_,{className:"w-5 h-5 text-purple-500"}),"Achievements",A.jsxs("span",{className:"text-xs font-normal text-gray-400",children:[O.length,"/",Object.keys(T).length]})]}),A.jsxs("button",{onClick:l,className:"text-sm text-teal-500 hover:text-teal-600 font-medium flex items-center gap-1",children:["View All ",A.jsx(V0,{className:"w-4 h-4"})]})]}),A.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.values(T).map(C=>{const N=O.includes(C.id);return A.jsx("div",{className:`aspect-square rounded-xl flex items-center justify-center text-2xl transition-all ${N?"bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40 shadow-sm":"bg-gray-100 dark:bg-gray-700 opacity-40 grayscale"}`,title:`${C.name}${N?" ":""}`,children:C.icon},C.id)})}),(m==null?void 0:m.achievementPoints)>0&&A.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-purple-500",children:[A.jsx(Ec,{className:"w-4 h-4"}),A.jsxs("span",{className:"font-medium",children:[m.achievementPoints," Achievement Points"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-5 text-white shadow-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(VU,{className:"w-6 h-6"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg",children:"Leaderboard"}),A.jsx("p",{className:"text-white/70 text-sm",children:"See how you rank"})]})]}),A.jsx("button",{onClick:c,className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl text-sm font-medium hover:bg-white/30 transition-colors",children:"View Rankings"})]})})]})}function UK({isOpen:t,onClose:e,onSuccess:n}){var B,b,x,S,I,E,U,M;const[r,s]=R.useState(""),[i,o]=R.useState(!1),[l,c]=R.useState(null),[h,m]=R.useState(null);R.useEffect(()=>{t&&(s(""),c(null),m(null))},[t]);const g=async H=>{if(H.preventDefault(),!r.trim()){c("Please enter an access code");return}o(!0),c(null);try{const O=on(Ft),C=await Dt(O,"passportCheckin")({accessCode:r.trim()});m(C.data),setTimeout(()=>{n==null||n(C.data)},3e3)}catch(O){console.error("Check-in error:",O);const T=O.message||"Check-in failed. Please try again.";O.code==="functions/not-found"?c("Invalid or expired access code."):O.code==="functions/already-exists"?c("You have already checked in to this event."):c(T)}finally{o(!1)}},y=H=>H.toUpperCase().replace(/[^A-Z0-9-]/g,"");return t?A.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:[A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden animate-slideUp",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-10",children:A.jsx(hs,{className:"w-5 h-5"})}),h?A.jsxs("div",{className:"p-8 text-center",children:[A.jsxs("div",{className:"relative mb-6",children:[A.jsx("div",{className:"w-32 h-32 mx-auto bg-gradient-to-br from-teal-400 to-emerald-500 rounded-3xl flex items-center justify-center shadow-lg shadow-teal-500/30 animate-bounce",children:A.jsx(wh,{className:"w-16 h-16 text-white"})}),A.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:A.jsx(Ec,{className:"w-4 h-4 text-yellow-900"})})]}),A.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2",children:"Check-in Complete!"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"You earned a new stamp"}),A.jsx("div",{className:"inline-block mb-6",children:A.jsxs("div",{className:`px-6 py-4 rounded-2xl border-2 ${((B=h.stamp)==null?void 0:B.rarity)==="LEGENDARY"?"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":((b=h.stamp)==null?void 0:b.rarity)==="EPIC"?"border-purple-400 bg-purple-50 dark:bg-purple-900/20":((x=h.stamp)==null?void 0:x.rarity)==="RARE"?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 bg-gray-50 dark:bg-gray-700/50"}`,children:[A.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(S=h.stamp)==null?void 0:S.eventTitle}),A.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[(E=(I=h.stamp)==null?void 0:I.rarity)==null?void 0:E.toLowerCase()," Stamp  #",(U=h.stamp)==null?void 0:U.editionNumber]})]})}),A.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 rounded-2xl p-4 text-white mb-4",children:[A.jsxs("div",{className:"flex items-center justify-center gap-3",children:[A.jsx(Gd,{className:"w-6 h-6"}),A.jsxs("span",{className:"text-3xl font-black",children:["+",h.creditsEarned]}),A.jsx("span",{className:"text-white/80",children:"Credits"})]}),h.bonusCredits>0&&A.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 text-sm text-white/90",children:[A.jsx(ec,{className:"w-4 h-4"}),A.jsxs("span",{children:["+",h.bonusCredits," Achievement Bonus!"]})]})]}),((M=h.newAchievements)==null?void 0:M.length)>0&&A.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-2xl p-4 mb-4",children:[A.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:" Achievement Unlocked!"}),h.newAchievements.map(H=>A.jsxs("div",{className:"flex items-center justify-center gap-2",children:[A.jsx("span",{className:"text-2xl",children:H.icon}),A.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:H.name})]},H.id))]}),h.tierChanged&&A.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 rounded-2xl p-4 text-white mb-4",children:A.jsxs("p",{className:"font-bold text-lg",children:[" You ranked up to ",h.newTier,"!"]})}),A.jsx("button",{onClick:e,className:"w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-2xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Done"})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-emerald-500 p-6 text-white text-center",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(Us,{className:"w-8 h-8"})}),A.jsx("h2",{className:"text-2xl font-black",children:"Event Check-in"}),A.jsx("p",{className:"text-teal-100 text-sm mt-1",children:"Enter your access code to earn stamps"})]}),A.jsxs("form",{onSubmit:g,className:"p-6",children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Access Code"}),A.jsx("input",{type:"text",value:r,onChange:H=>s(y(H.target.value)),placeholder:"e.g. PRO-123-4567",className:"w-full px-5 py-4 text-2xl font-mono font-bold text-center tracking-widest bg-gray-50 dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 dark:text-white transition-all uppercase",disabled:i,autoFocus:!0}),A.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Get this code from the event host or promoter"})]}),l&&A.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm",children:[A.jsx(Ip,{className:"w-5 h-5 flex-shrink-0"}),A.jsx("span",{children:l})]}),A.jsx("button",{type:"submit",disabled:i||!r.trim(),className:"w-full py-4 bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 text-white rounded-2xl font-bold text-lg shadow-lg shadow-teal-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:i?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-5 h-5 animate-spin"}),"Checking in..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Gd,{className:"w-5 h-5"}),"Claim Stamp"]})})]})]})]}),A.jsx("style",{children:`
                @keyframes slideUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-slideUp {
                    animation: slideUp 0.3s ease-out;
                }
            `})]}):null}const zE={TT:"",US:"",JM:"",BB:"",LC:"",VC:"",GD:"",AG:"",KN:"",BS:"",BM:"",GY:"",CA:"",GB:"",VG:"",VI:"",KY:"",SX:"",MQ:"",GP:"",PR:"",CU:"",HT:"",DO:"",AW:"",CW:"",JP:"",XX:""},hl={LEGENDARY:{name:"Legendary",borderColor:"border-yellow-400",bgColor:"bg-gradient-to-br from-yellow-50 to-amber-100 dark:from-yellow-900/20 dark:to-amber-900/30",textColor:"text-yellow-600 dark:text-yellow-400",glow:"shadow-lg shadow-yellow-400/30"},EPIC:{name:"Epic",borderColor:"border-purple-400",bgColor:"bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/30",textColor:"text-purple-600 dark:text-purple-400",glow:"shadow-lg shadow-purple-400/20"},RARE:{name:"Rare",borderColor:"border-blue-400",bgColor:"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-900/20 dark:to-cyan-900/30",textColor:"text-blue-600 dark:text-blue-400",glow:""},COMMON:{name:"Common",borderColor:"border-gray-300 dark:border-gray-600",bgColor:"bg-gray-50 dark:bg-gray-700/50",textColor:"text-gray-600 dark:text-gray-400",glow:""}};function FK({user:t,onBack:e}){const[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,l]=R.useState(null),[c,h]=R.useState("ALL"),[m,g]=R.useState(new Set);R.useEffect(()=>{if(!t)return;(async()=>{var S;i(!0),l(null);try{const I=on(Ft),U=await Dt(I,"getPassportStamps")({limit:100,rarity:c==="ALL"?null:c});r(U.data.stamps||[]);const M=new Set(((S=U.data.stamps)==null?void 0:S.filter(H=>H.isFavorite).map(H=>H.id))||[]);g(M)}catch(I){console.error("Error loading stamps:",I),l(I.message)}finally{i(!1)}})()},[t,c]);const y=x=>{g(S=>{const I=new Set(S);return I.has(x)?I.delete(x):I.add(x),I})},B=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",b=n.reduce((x,S)=>(x[S.rarity]=(x[S.rarity]||0)+1,x),{});return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(V_,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(yg,{className:"w-6 h-6 text-yellow-500"}),"Stamp Collection"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," stamps collected"]})]})]}),A.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 -mx-1 px-1",children:[A.jsxs("button",{onClick:()=>h("ALL"),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${c==="ALL"?"bg-teal-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["All (",n.length,")"]}),["LEGENDARY","EPIC","RARE","COMMON"].map(x=>A.jsxs("button",{onClick:()=>h(x),className:`flex-shrink-0 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${c===x?`${hl[x].bgColor} ${hl[x].textColor} border ${hl[x].borderColor}`:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[hl[x].name," (",b[x]||0,")"]},x))]}),s&&A.jsx("div",{className:"flex items-center justify-center py-20",children:A.jsx(Et,{className:"w-8 h-8 text-teal-500 animate-spin"})}),o&&!s&&A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-red-500 mb-4",children:o}),A.jsx("button",{onClick:()=>h("ALL"),className:"px-4 py-2 bg-teal-500 text-white rounded-xl",children:"Retry"})]}),!s&&!o&&n.length===0&&A.jsxs("div",{className:"text-center py-16",children:[A.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center",children:A.jsx(yg,{className:"w-10 h-10 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 mb-2",children:"No Stamps Yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Check in to events to start collecting stamps!"})]}),!s&&n.length>0&&A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n.map(x=>{const S=hl[x.rarity]||hl.COMMON,I=m.has(x.id);return A.jsxs("div",{className:`relative rounded-2xl border-2 ${S.borderColor} ${S.bgColor} ${S.glow} p-4 transition-all hover:scale-[1.02] cursor-pointer`,children:[A.jsx("button",{onClick:()=>y(x.id),className:"absolute top-2 right-2 p-1.5 rounded-full bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 transition-colors",children:A.jsx(O6,{className:`w-4 h-4 ${I?"fill-red-500 text-red-500":"text-gray-400"}`})}),A.jsx("div",{className:"text-4xl mb-3 text-center",children:zE[x.countryCode]||zE.XX}),A.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm text-center truncate mb-1",children:x.eventTitle}),A.jsxs("p",{className:`text-xs ${S.textColor} text-center font-medium uppercase tracking-wide`,children:[S.name," #",x.editionNumber]}),A.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 space-y-1",children:[A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(UA,{className:"w-3 h-3"}),A.jsx("span",{children:B(x.stampedAt)})]}),x.location&&A.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500",children:[A.jsx(kr,{className:"w-3 h-3"}),A.jsx("span",{className:"truncate",children:x.location})]})]}),A.jsx("div",{className:"mt-2 text-center",children:A.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 rounded-full text-xs font-medium",children:["+",x.creditsEarned," credits"]})})]},x.id)})})]})}const QK={first_stamp:{id:"first_stamp",name:"First Steps",description:"Claim your first stamp",icon:"",category:"MILESTONE",points:50,criteria:{type:"EVENT_COUNT",target:1}},island_hopper:{id:"island_hopper",name:"Island Hopper",description:"Check in at 3 different countries",icon:"",category:"TRAVEL",points:500,criteria:{type:"COUNTRY_COUNT",target:3}},sunrise_warrior:{id:"sunrise_warrior",name:"Sunrise Warrior",description:"Check in at 5 J'ouvert or early morning events",icon:"",category:"EVENTS",points:300,criteria:{type:"EVENT_TYPE",target:5}},loyal_fan:{id:"loyal_fan",name:"Loyal Fan",description:"Check in to 10 events total",icon:"",category:"MILESTONE",points:250,criteria:{type:"EVENT_COUNT",target:10}},tier_up:{id:"tier_up",name:"Moving Up",description:"Reach Silver tier",icon:"",category:"MILESTONE",points:200,criteria:{type:"TIER_REACHED",target:"SILVER"}}},yf={MILESTONE:"from-blue-500 to-indigo-500",TRAVEL:"from-teal-500 to-cyan-500",EVENTS:"from-orange-500 to-amber-500",SOCIAL:"from-pink-500 to-rose-500"};function PK({profile:t,onBack:e}){const n=(t==null?void 0:t.unlockedAchievements)||[],r=(t==null?void 0:t.achievementPoints)||0,s=(t==null?void 0:t.totalEvents)||0,i=((t==null?void 0:t.countriesVisited)||[]).length,o=(t==null?void 0:t.currentTier)||"BRONZE",l=(t==null?void 0:t.eventTypeStats)||{},c=g=>{const{criteria:y}=g;let B=0,b=y.target;switch(y.type){case"EVENT_COUNT":B=s;break;case"COUNTRY_COUNT":B=i;break;case"TIER_REACHED":const x=["BRONZE","SILVER","GOLD","PLATINUM"],S=x.indexOf(o),I=x.indexOf(y.target);B=S>=I?1:0,b=1;break;case"EVENT_TYPE":B=(l.jouvert||0)+(l.breakfast||0)+(l.early_morning||0);break;default:B=0}return{current:Math.min(B,b),target:b,percent:Math.min(100,Math.floor(B/b*100))}},h=Object.values(QK).map(g=>({...g,isUnlocked:n.includes(g.id),progress:c(g)})),m=h.filter(g=>g.isUnlocked).length;return A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:A.jsx(V_,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(H_,{className:"w-6 h-6 text-purple-500"}),"Achievements"]}),A.jsxs("p",{className:"text-sm text-gray-500",children:[m,"/",h.length," unlocked"]})]})]}),A.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-5 text-white mb-6 shadow-lg shadow-purple-500/20",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-purple-200 text-sm",children:"Total Points Earned"}),A.jsx("p",{className:"text-4xl font-black",children:r})]}),A.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:A.jsx(Ec,{className:"w-8 h-8"})})]})}),A.jsx("div",{className:"space-y-4",children:h.map(g=>A.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-2xl border overflow-hidden transition-all ${g.isUnlocked?"border-purple-200 dark:border-purple-800 shadow-sm":"border-gray-200 dark:border-gray-700 opacity-75"}`,children:[A.jsx("div",{className:`h-1 bg-gradient-to-r ${yf[g.category]||yf.MILESTONE}`}),A.jsx("div",{className:"p-4",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center text-2xl ${g.isUnlocked?"bg-purple-100 dark:bg-purple-900/30":"bg-gray-100 dark:bg-gray-700 grayscale"}`,children:g.icon}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-start justify-between gap-2",children:[A.jsxs("div",{children:[A.jsx("h3",{className:`font-bold ${g.isUnlocked?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:g.name}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.description})]}),g.isUnlocked?A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg text-xs font-medium",children:[A.jsx(wh,{className:"w-3 h-3"}),"Unlocked"]}):A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-500 rounded-lg text-xs font-medium",children:[A.jsx(Kw,{className:"w-3 h-3"}),"Locked"]})]}),!g.isUnlocked&&A.jsxs("div",{className:"mt-3",children:[A.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[A.jsx("span",{children:"Progress"}),A.jsxs("span",{children:[g.progress.current,"/",g.progress.target]})]}),A.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:A.jsx("div",{className:`h-full rounded-full bg-gradient-to-r ${yf[g.category]||yf.MILESTONE} transition-all duration-500`,style:{width:`${g.progress.percent}%`}})})]}),A.jsx("div",{className:"mt-2",children:A.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium ${g.isUnlocked?"text-purple-600 dark:text-purple-400":"text-gray-400"}`,children:[A.jsx(Ec,{className:"w-3 h-3"}),g.isUnlocked?`+${g.points} points earned`:`${g.points} points`]})})]})]})})]},g.id))}),A.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-2xl text-center",children:[A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"More achievements coming soon!"}),A.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Squad Leader  Ocean Voyager  Carnival Royalty  and more..."})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zw=function(t,e){return zw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},zw(t,e)};function Qs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qw=function(){return qw=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qw.apply(this,arguments)};function rr(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(m){try{h(r.next(m))}catch(g){o(g)}}function c(m){try{h(r.throw(m))}catch(g){o(g)}}function h(m){m.done?i(m.value):s(m.value).then(l,c)}h((r=r.apply(t,[])).next())})}function Dn(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(m){return c([h,m])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function wf(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var sa=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Up=function(t,e){return sa.fromClientRect(t,e.getBoundingClientRect())},RK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new sa(0,0,r,s)},Fp=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Jt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},qE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vf=0;vf<qE.length;vf++)LK[qE.charCodeAt(vf)]=vf;var WE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xf=0;xf<WE.length;xf++)Fu[WE.charCodeAt(xf)]=xf;var jK=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)i=Fu[t.charCodeAt(r)],o=Fu[t.charCodeAt(r+1)],l=Fu[t.charCodeAt(r+2)],c=Fu[t.charCodeAt(r+3)],m[s++]=i<<2|o>>4,m[s++]=(o&15)<<4|l>>2,m[s++]=(l&3)<<6|c&63;return h},DK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},OK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},AA=5,$_=11,K0=2,MK=$_-AA,GU=65536>>AA,HK=1<<AA,G0=HK-1,VK=1024>>AA,KK=GU+VK,GK=KK,zK=32,qK=GK+zK,WK=65536>>$_,$K=1<<MK,YK=$K-1,$E=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},XK=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},ZK=function(t,e){var n=jK(t),r=Array.isArray(n)?OK(n):new Uint32Array(n),s=Array.isArray(n)?DK(n):new Uint16Array(n),i=24,o=$E(s,i/2,r[4]/2),l=r[5]===2?$E(s,(i+r[4])/2):XK(r,Math.ceil((i+r[4])/4));return new JK(r[0],r[1],r[2],r[3],o,l)},JK=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>AA],n=(n<<K0)+(e&G0),this.data[n];if(e<=65535)return n=this.index[GU+(e-55296>>AA)],n=(n<<K0)+(e&G0),this.data[n];if(e<this.highStart)return n=qK-WK+(e>>$_),n=this.index[n],n+=e>>AA&YK,n=this.index[n],n=(n<<K0)+(e&G0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),YE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e8=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _f=0;_f<YE.length;_f++)e8[YE.charCodeAt(_f)]=_f;var t8="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",XE=50,n8=1,zU=2,qU=3,r8=4,s8=5,ZE=7,WU=8,JE=9,Va=10,Ww=11,eI=12,$w=13,i8=14,Qu=15,Yw=16,Bf=17,gu=18,a8=19,tI=20,Xw=21,pu=22,z0=23,fl=24,jr=25,Pu=26,Ru=27,ml=28,o8=29,Yo=30,A8=31,bf=32,Cf=33,Zw=34,Jw=35,ev=36,zd=37,tv=38,gm=39,pm=40,q0=41,$U=42,l8=43,c8=[9001,65288],YU="!",Ye="",Ef="",nv=ZK(t8),ki=[Yo,ev],rv=[n8,zU,qU,s8],XU=[Va,WU],nI=[Ru,Pu],u8=rv.concat(XU),rI=[tv,gm,pm,Zw,Jw],d8=[Qu,$w],h8=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(i,o){var l=nv.get(i);if(l>XE?(s.push(!0),l-=XE):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),n.push(Yw);if(l===r8||l===Ww){if(o===0)return r.push(o),n.push(Yo);var c=n[o-1];return u8.indexOf(c)===-1?(r.push(r[o-1]),n.push(c)):(r.push(o),n.push(Yo))}if(r.push(o),l===A8)return n.push(e==="strict"?Xw:zd);if(l===$U||l===o8)return n.push(Yo);if(l===l8)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(zd):n.push(Yo);n.push(l)}),[r,n,s]},W0=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=n;i<=r.length;){i++;var o=r[i];if(o===e)return!0;if(o!==Va)break}if(s===Va)for(var i=n;i>0;){i--;var l=r[i];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=n;c<=r.length;){c++;var o=r[c];if(o===e)return!0;if(o!==Va)break}if(l!==Va)break}return!1},sI=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Va)n--;else return r}return 0},f8=function(t,e,n,r,s){if(n[r]===0)return Ye;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return Ye;var o=i-1,l=i+1,c=e[i],h=o>=0?e[o]:0,m=e[l];if(c===zU&&m===qU)return Ye;if(rv.indexOf(c)!==-1)return YU;if(rv.indexOf(m)!==-1||XU.indexOf(m)!==-1)return Ye;if(sI(i,e)===WU)return Ef;if(nv.get(t[i])===Ww||(c===bf||c===Cf)&&nv.get(t[l])===Ww||c===ZE||m===ZE||c===JE||[Va,$w,Qu].indexOf(c)===-1&&m===JE||[Bf,gu,a8,fl,ml].indexOf(m)!==-1||sI(i,e)===pu||W0(z0,pu,i,e)||W0([Bf,gu],Xw,i,e)||W0(eI,eI,i,e))return Ye;if(c===Va)return Ef;if(c===z0||m===z0)return Ye;if(m===Yw||c===Yw)return Ef;if([$w,Qu,Xw].indexOf(m)!==-1||c===i8||h===ev&&d8.indexOf(c)!==-1||c===ml&&m===ev||m===tI||ki.indexOf(m)!==-1&&c===jr||ki.indexOf(c)!==-1&&m===jr||c===Ru&&[zd,bf,Cf].indexOf(m)!==-1||[zd,bf,Cf].indexOf(c)!==-1&&m===Pu||ki.indexOf(c)!==-1&&nI.indexOf(m)!==-1||nI.indexOf(c)!==-1&&ki.indexOf(m)!==-1||[Ru,Pu].indexOf(c)!==-1&&(m===jr||[pu,Qu].indexOf(m)!==-1&&e[l+1]===jr)||[pu,Qu].indexOf(c)!==-1&&m===jr||c===jr&&[jr,ml,fl].indexOf(m)!==-1)return Ye;if([jr,ml,fl,Bf,gu].indexOf(m)!==-1)for(var g=i;g>=0;){var y=e[g];if(y===jr)return Ye;if([ml,fl].indexOf(y)!==-1)g--;else break}if([Ru,Pu].indexOf(m)!==-1)for(var g=[Bf,gu].indexOf(c)!==-1?o:i;g>=0;){var y=e[g];if(y===jr)return Ye;if([ml,fl].indexOf(y)!==-1)g--;else break}if(tv===c&&[tv,gm,Zw,Jw].indexOf(m)!==-1||[gm,Zw].indexOf(c)!==-1&&[gm,pm].indexOf(m)!==-1||[pm,Jw].indexOf(c)!==-1&&m===pm||rI.indexOf(c)!==-1&&[tI,Pu].indexOf(m)!==-1||rI.indexOf(m)!==-1&&c===Ru||ki.indexOf(c)!==-1&&ki.indexOf(m)!==-1||c===fl&&ki.indexOf(m)!==-1||ki.concat(jr).indexOf(c)!==-1&&m===pu&&c8.indexOf(t[l])===-1||ki.concat(jr).indexOf(m)!==-1&&c===gu)return Ye;if(c===q0&&m===q0){for(var B=n[i],b=1;B>0&&(B--,e[B]===q0);)b++;if(b%2!==0)return Ye}return c===bf&&m===Cf?Ye:Ef},m8=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=h8(t,e.lineBreak),r=n[0],s=n[1],i=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(l){return[jr,Yo,$U].indexOf(l)!==-1?zd:l}));var o=e.wordBreak==="keep-all"?i.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[r,s,o]},g8=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===YU,this.start=r,this.end=s}return t.prototype.slice=function(){return Jt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),p8=function(t,e){var n=Fp(t),r=m8(n,e),s=r[0],i=r[1],o=r[2],l=n.length,c=0,h=0;return{next:function(){if(h>=l)return{done:!0,value:null};for(var m=Ye;h<l&&(m=f8(n,i,s,++h,o))===Ye;);if(m!==Ye||h===l){var g=new g8(n,m,c,h);return c=h,{value:g,done:!1}}return{done:!0,value:null}}}},y8=1,w8=2,xh=4,iI=8,wg=10,aI=47,ad=92,v8=9,x8=32,If=34,yu=61,_8=35,B8=36,b8=37,Tf=39,Sf=40,wu=41,C8=95,vr=45,E8=33,I8=60,T8=62,S8=64,k8=91,N8=93,U8=61,F8=123,kf=63,Q8=125,oI=124,P8=126,R8=128,AI=65533,$0=42,nA=43,L8=44,j8=58,D8=59,qd=46,O8=0,M8=8,H8=11,V8=14,K8=31,G8=127,qs=-1,ZU=48,JU=97,eF=101,z8=102,q8=117,W8=122,tF=65,nF=69,rF=70,$8=85,Y8=90,Mn=function(t){return t>=ZU&&t<=57},X8=function(t){return t>=55296&&t<=57343},gl=function(t){return Mn(t)||t>=tF&&t<=rF||t>=JU&&t<=z8},Z8=function(t){return t>=JU&&t<=W8},J8=function(t){return t>=tF&&t<=Y8},e9=function(t){return Z8(t)||J8(t)},t9=function(t){return t>=R8},Nf=function(t){return t===wg||t===v8||t===x8},vg=function(t){return e9(t)||t9(t)||t===C8},lI=function(t){return vg(t)||Mn(t)||t===vr},n9=function(t){return t>=O8&&t<=M8||t===H8||t>=V8&&t<=K8||t===G8},ka=function(t,e){return t!==ad?!1:e!==wg},Uf=function(t,e,n){return t===vr?vg(e)||ka(e,n):vg(t)?!0:!!(t===ad&&ka(t,e))},Y0=function(t,e,n){return t===nA||t===vr?Mn(e)?!0:e===qd&&Mn(n):Mn(t===qd?e:t)},r9=function(t){var e=0,n=1;(t[e]===nA||t[e]===vr)&&(t[e]===vr&&(n=-1),e++);for(var r=[];Mn(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Jt.apply(void 0,r),10):0;t[e]===qd&&e++;for(var i=[];Mn(t[e]);)i.push(t[e++]);var o=i.length,l=o?parseInt(Jt.apply(void 0,i),10):0;(t[e]===nF||t[e]===eF)&&e++;var c=1;(t[e]===nA||t[e]===vr)&&(t[e]===vr&&(c=-1),e++);for(var h=[];Mn(t[e]);)h.push(t[e++]);var m=h.length?parseInt(Jt.apply(void 0,h),10):0;return n*(s+l*Math.pow(10,-o))*Math.pow(10,c*m)},s9={type:2},i9={type:3},a9={type:4},o9={type:13},A9={type:8},l9={type:21},c9={type:9},u9={type:10},d9={type:11},h9={type:12},f9={type:14},Ff={type:23},m9={type:1},g9={type:25},p9={type:24},y9={type:26},w9={type:27},v9={type:28},x9={type:29},_9={type:31},sv={type:32},sF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Fp(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==sv;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case If:return this.consumeStringToken(If);case _8:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(lI(n)||ka(r,s)){var i=Uf(n,r,s)?w8:y8,o=this.consumeName();return{type:5,value:o,flags:i}}break;case B8:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),o9;break;case Tf:return this.consumeStringToken(Tf);case Sf:return s9;case wu:return i9;case $0:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),f9;break;case nA:if(Y0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case L8:return a9;case vr:var l=e,c=this.peekCodePoint(0),h=this.peekCodePoint(1);if(Y0(l,c,h))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Uf(l,c,h))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===vr&&h===T8)return this.consumeCodePoint(),this.consumeCodePoint(),p9;break;case qd:if(Y0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case aI:if(this.peekCodePoint(0)===$0)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===$0&&(m=this.consumeCodePoint(),m===aI))return this.consumeToken();if(m===qs)return this.consumeToken()}break;case j8:return y9;case D8:return w9;case I8:if(this.peekCodePoint(0)===E8&&this.peekCodePoint(1)===vr&&this.peekCodePoint(2)===vr)return this.consumeCodePoint(),this.consumeCodePoint(),g9;break;case S8:var g=this.peekCodePoint(0),y=this.peekCodePoint(1),B=this.peekCodePoint(2);if(Uf(g,y,B)){var o=this.consumeName();return{type:7,value:o}}break;case k8:return v9;case ad:if(ka(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case N8:return x9;case U8:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),A9;break;case F8:return d9;case Q8:return h9;case q8:case $8:var b=this.peekCodePoint(0),x=this.peekCodePoint(1);return b===nA&&(gl(x)||x===kf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case oI:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),c9;if(this.peekCodePoint(0)===oI)return this.consumeCodePoint(),l9;break;case P8:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),u9;break;case qs:return sv}return Nf(e)?(this.consumeWhiteSpace(),_9):Mn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):vg(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Jt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();gl(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===kf&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Jt.apply(void 0,e.map(function(c){return c===kf?ZU:c})),16),i=parseInt(Jt.apply(void 0,e.map(function(c){return c===kf?rF:c})),16);return{type:30,start:s,end:i}}var o=parseInt(Jt.apply(void 0,e),16);if(this.peekCodePoint(0)===vr&&gl(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var l=[];gl(n)&&l.length<6;)l.push(n),n=this.consumeCodePoint();var i=parseInt(Jt.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Sf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Sf?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===qs)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Tf||n===If){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===qs||this.peekCodePoint(0)===wu)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Ff)}for(;;){var s=this.consumeCodePoint();if(s===qs||s===wu)return{type:22,value:Jt.apply(void 0,e)};if(Nf(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===qs||this.peekCodePoint(0)===wu?(this.consumeCodePoint(),{type:22,value:Jt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ff);if(s===If||s===Tf||s===Sf||n9(s))return this.consumeBadUrlRemnants(),Ff;if(s===ad)if(ka(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ff;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Nf(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===wu||e===qs)return;ka(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Jt.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===qs||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===wg)return this._value.splice(0,r),m9;if(s===ad){var i=this._value[r+1];i!==qs&&i!==void 0&&(i===wg?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):ka(s,i)&&(n+=this.consumeStringSlice(r),n+=Jt(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=xh,r=this.peekCodePoint(0);for((r===nA||r===vr)&&e.push(this.consumeCodePoint());Mn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===qd&&Mn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=iI;Mn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===nF||r===eF)&&((s===nA||s===vr)&&Mn(i)||Mn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=iI;Mn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[r9(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Uf(s,i,o)){var l=this.consumeName();return{type:15,number:n,flags:r,unit:l}}return s===b8?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(gl(e)){for(var n=Jt(e);gl(this.peekCodePoint(0))&&n.length<6;)n+=Jt(this.consumeCodePoint());Nf(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||X8(r)||r>1114111?AI:r}return e===qs?AI:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(lI(n))e+=Jt(n);else if(ka(n,this.peekCodePoint(0)))e+=Jt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),iF=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new sF;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||b9(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?sv:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),_h=function(t){return t.type===15},Dc=function(t){return t.type===17},ft=function(t){return t.type===20},B9=function(t){return t.type===0},iv=function(t,e){return ft(t)&&t.value===e},aF=function(t){return t.type!==31},Ic=function(t){return t.type!==31&&t.type!==4},ci=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},b9=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ho=function(t){return t.type===17||t.type===15},An=function(t){return t.type===16||ho(t)},oF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},kn={type:17,number:0,flags:xh},Y_={type:16,number:50,flags:xh},Ka={type:16,number:100,flags:xh},Lu=function(t,e,n){var r=t[0],s=t[1];return[pt(r,e),pt(typeof s<"u"?s:r,n)]},pt=function(t,e){if(t.type===16)return t.number/100*e;if(_h(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},AF="deg",lF="grad",cF="rad",uF="turn",Qp={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case AF:return Math.PI*e.number/180;case lF:return Math.PI/200*e.number;case cF:return e.number;case uF:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},dF=function(t){return t.type===15&&(t.unit===AF||t.unit===lF||t.unit===cF||t.unit===uF)},hF=function(t){var e=t.filter(ft).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[kn,kn];case"to top":case"bottom":return is(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[kn,Ka];case"to right":case"left":return is(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ka,Ka];case"to bottom":case"top":return is(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ka,kn];case"to left":case"right":return is(270)}return 0},is=function(t){return Math.PI*t/180},no={name:"color",parse:function(t,e){if(e.type===18){var n=C9[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return Ga(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return Ga(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return Ga(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return Ga(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var l=Yi[e.value.toUpperCase()];if(typeof l<"u")return l}return Yi.TRANSPARENT}},ro=function(t){return(255&t)===0},xn=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},Ga=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},cI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},uI=function(t,e){var n=e.filter(Ic);if(n.length===3){var r=n.map(cI),s=r[0],i=r[1],o=r[2];return Ga(s,i,o,1)}if(n.length===4){var l=n.map(cI),s=l[0],i=l[1],o=l[2],c=l[3];return Ga(s,i,o,c)}return 0};function X0(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var dI=function(t,e){var n=e.filter(Ic),r=n[0],s=n[1],i=n[2],o=n[3],l=(r.type===17?is(r.number):Qp.parse(t,r))/(Math.PI*2),c=An(s)?s.number/100:0,h=An(i)?i.number/100:0,m=typeof o<"u"&&An(o)?pt(o,1):1;if(c===0)return Ga(h*255,h*255,h*255,1);var g=h<=.5?h*(c+1):h+c-h*c,y=h*2-g,B=X0(y,g,l+1/3),b=X0(y,g,l),x=X0(y,g,l-1/3);return Ga(B*255,b*255,x*255,m)},C9={hsl:dI,hsla:dI,rgb:uI,rgba:uI},od=function(t,e){return no.parse(t,iF.create(e).parseComponentValue())},Yi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},E9={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ft(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},I9={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Pp=function(t,e){var n=no.parse(t,e[0]),r=e[1];return r&&An(r)?{color:n,stop:r}:{color:n,stop:null}},hI=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=kn),r.stop===null&&(r.stop=Ka);for(var s=[],i=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var c=pt(l,e);c>i?s.push(c):s.push(i),i=c}else s.push(null)}for(var h=null,o=0;o<s.length;o++){var m=s[o];if(m===null)h===null&&(h=o);else if(h!==null){for(var g=o-h,y=s[h-1],B=(m-y)/(g+1),b=1;b<=g;b++)s[h+b-1]=B*b;h=null}}return t.map(function(x,S){var I=x.color;return{color:I,stop:Math.max(Math.min(1,s[S]/e),0)}})},T9=function(t,e,n){var r=e/2,s=n/2,i=pt(t[0],e)-r,o=s-pt(t[1],n);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},S9=function(t,e,n){var r=typeof t=="number"?t:T9(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),i=e/2,o=n/2,l=s/2,c=Math.sin(r-Math.PI/2)*l,h=Math.cos(r-Math.PI/2)*l;return[s,i-h,i+h,o-c,o+c]},_s=function(t,e){return Math.sqrt(t*t+e*e)},fI=function(t,e,n,r,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(o,l){var c=l[0],h=l[1],m=_s(n-c,r-h);return(s?m<o.optimumDistance:m>o.optimumDistance)?{optimumCorner:l,optimumDistance:m}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},k9=function(t,e,n,r,s){var i=0,o=0;switch(t.size){case 0:t.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)i=o=Math.min(_s(e,n),_s(e,n-s),_s(e-r,n),_s(e-r,n-s));else if(t.shape===1){var l=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),c=fI(r,s,e,n,!0),h=c[0],m=c[1];i=_s(h-e,(m-n)/l),o=l*i}break;case 1:t.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)i=o=Math.max(_s(e,n),_s(e,n-s),_s(e-r,n),_s(e-r,n-s));else if(t.shape===1){var l=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),g=fI(r,s,e,n,!1),h=g[0],m=g[1];i=_s(h-e,(m-n)/l),o=l*i}break}return Array.isArray(t.size)&&(i=pt(t.size[0],r),o=t.size.length===2?pt(t.size[1],s):i),[i,o]},N9=function(t,e){var n=is(180),r=[];return ci(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&o.value==="to"){n=hF(s);return}else if(dF(o)){n=Qp.parse(t,o);return}}var l=Pp(t,s);r.push(l)}),{angle:n,stops:r,type:1}},Qf=function(t,e){var n=is(180),r=[];return ci(e).forEach(function(s,i){if(i===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=hF(s);return}else if(dF(o)){n=(Qp.parse(t,o)+is(270))%is(360);return}}var l=Pp(t,s);r.push(l)}),{angle:n,stops:r,type:1}},U9=function(t,e){var n=is(180),r=[],s=1,i=0,o=3,l=[];return ci(e).forEach(function(c,h){var m=c[0];if(h===0){if(ft(m)&&m.value==="linear"){s=1;return}else if(ft(m)&&m.value==="radial"){s=2;return}}if(m.type===18){if(m.name==="from"){var g=no.parse(t,m.values[0]);r.push({stop:kn,color:g})}else if(m.name==="to"){var g=no.parse(t,m.values[0]);r.push({stop:Ka,color:g})}else if(m.name==="color-stop"){var y=m.values.filter(Ic);if(y.length===2){var g=no.parse(t,y[1]),B=y[0];Dc(B)&&r.push({stop:{type:16,number:B.number*100,flags:B.flags},color:g})}}}}),s===1?{angle:(n+is(180))%is(360),stops:r,type:s}:{size:o,shape:i,stops:r,position:l,type:s}},fF="closest-side",mF="farthest-side",gF="closest-corner",pF="farthest-corner",yF="circle",wF="ellipse",vF="cover",xF="contain",F9=function(t,e){var n=0,r=3,s=[],i=[];return ci(e).forEach(function(o,l){var c=!0;if(l===0){var h=!1;c=o.reduce(function(g,y){if(h)if(ft(y))switch(y.value){case"center":return i.push(Y_),g;case"top":case"left":return i.push(kn),g;case"right":case"bottom":return i.push(Ka),g}else(An(y)||ho(y))&&i.push(y);else if(ft(y))switch(y.value){case yF:return n=0,!1;case wF:return n=1,!1;case"at":return h=!0,!1;case fF:return r=0,!1;case vF:case mF:return r=1,!1;case xF:case gF:return r=2,!1;case pF:return r=3,!1}else if(ho(y)||An(y))return Array.isArray(r)||(r=[]),r.push(y),!1;return g},c)}if(c){var m=Pp(t,o);s.push(m)}}),{size:r,shape:n,stops:s,position:i,type:2}},Pf=function(t,e){var n=0,r=3,s=[],i=[];return ci(e).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(m,g){if(ft(g))switch(g.value){case"center":return i.push(Y_),!1;case"top":case"left":return i.push(kn),!1;case"right":case"bottom":return i.push(Ka),!1}else if(An(g)||ho(g))return i.push(g),!1;return m},c):l===1&&(c=o.reduce(function(m,g){if(ft(g))switch(g.value){case yF:return n=0,!1;case wF:return n=1,!1;case xF:case fF:return r=0,!1;case mF:return r=1,!1;case gF:return r=2,!1;case vF:case pF:return r=3,!1}else if(ho(g)||An(g))return Array.isArray(r)||(r=[]),r.push(g),!1;return m},c)),c){var h=Pp(t,o);s.push(h)}}),{size:r,shape:n,stops:s,position:i,type:2}},Q9=function(t){return t.type===1},P9=function(t){return t.type===2},X_={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=_F[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function R9(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!_F[t.name])}var _F={"linear-gradient":N9,"-moz-linear-gradient":Qf,"-ms-linear-gradient":Qf,"-o-linear-gradient":Qf,"-webkit-linear-gradient":Qf,"radial-gradient":F9,"-moz-radial-gradient":Pf,"-ms-radial-gradient":Pf,"-o-radial-gradient":Pf,"-webkit-radial-gradient":Pf,"-webkit-gradient":U9},L9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Ic(r)&&R9(r)}).map(function(r){return X_.parse(t,r)})}},j9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(ft(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},D9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ci(e).map(function(n){return n.filter(An)}).map(oF)}},O9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ci(e).map(function(n){return n.filter(ft).map(function(r){return r.value}).join(" ")}).map(M9)}},M9=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},nc;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(nc||(nc={}));var H9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ci(e).map(function(n){return n.filter(V9)})}},V9=function(t){return ft(t)||An(t)},Rp=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},K9=Rp("top"),G9=Rp("right"),z9=Rp("bottom"),q9=Rp("left"),Lp=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return oF(n.filter(An))}}},W9=Lp("top-left"),$9=Lp("top-right"),Y9=Lp("bottom-right"),X9=Lp("bottom-left"),jp=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Z9=jp("top"),J9=jp("right"),eG=jp("bottom"),tG=jp("left"),Dp=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return _h(n)?n.number:0}}},nG=Dp("top"),rG=Dp("right"),sG=Dp("bottom"),iG=Dp("left"),aG={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},oG={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},AG={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ft).reduce(function(n,r){return n|lG(r.value)},0)}},lG=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},cG={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},uG={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},xg;(function(t){t.NORMAL="normal",t.STRICT="strict"})(xg||(xg={}));var dG={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return xg.STRICT;case"normal":default:return xg.NORMAL}}},hG={name:"line-height",initialValue:"normal",prefix:!1,type:4},mI=function(t,e){return ft(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:An(t)?pt(t,e):e},fG={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:X_.parse(t,e)}},mG={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},av={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Op=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},gG=Op("top"),pG=Op("right"),yG=Op("bottom"),wG=Op("left"),vG={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ft).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},xG={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Mp=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},_G=Mp("top"),BG=Mp("right"),bG=Mp("bottom"),CG=Mp("left"),EG={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},IG={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},TG={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&iv(e[0],"none")?[]:ci(e).map(function(n){for(var r={color:Yi.TRANSPARENT,offsetX:kn,offsetY:kn,blur:kn},s=0,i=0;i<n.length;i++){var o=n[i];ho(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:r.blur=o,s++):r.color=no.parse(t,o)}return r})}},SG={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},kG={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=FG[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},NG=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},UG=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[n,r,s,i,o,l]:null},FG={matrix:NG,matrix3d:UG},gI={type:16,number:50,flags:xh},QG=[gI,gI],PG={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(An);return n.length!==2?QG:[n[0],n[1]]}},RG={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ad;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Ad||(Ad={}));var LG={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Ad.BREAK_ALL;case"keep-all":return Ad.KEEP_ALL;case"normal":default:return Ad.NORMAL}}},jG={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Dc(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},BF={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},DG={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Dc(e)?e.number:1}},OG={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},MG={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ft).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},HG={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},VG={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},KG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Dc(e))return e.number;if(ft(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},GG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ft).map(function(n){return n.value})}},zG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},fn=function(t,e){return(t&e)!==0},qG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},WG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(aF),i=0;i<s.length;i++){var o=s[i],l=s[i+1];if(o.type===20){var c=l&&Dc(l)?l.number:1;r.push({counter:o.value,increment:c})}}return r}},$G={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(aF),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(ft(i)&&i.value!=="none"){var l=o&&Dc(o)?o.number:0;n.push({counter:i.value,reset:l})}}return n}},YG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(_h).map(function(n){return BF.parse(t,n)})}},XG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(B9);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var o=s[i].value,l=s[i+1].value;r.push({open:o,close:l})}return r}},pI=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},ZG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&iv(e[0],"none")?[]:ci(e).map(function(n){for(var r={color:255,offsetX:kn,offsetY:kn,blur:kn,spread:kn,inset:!1},s=0,i=0;i<n.length;i++){var o=n[i];iv(o,"inset")?r.inset=!0:ho(o)?(s===0?r.offsetX=o:s===1?r.offsetY=o:s===2?r.blur=o:r.spread=o,s++):r.color=no.parse(t,o)}return r})}},JG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(ft).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},ez={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},tz={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return _h(e)?e.number:0}},nz=function(){function t(e,n){var r,s;this.animationDuration=xe(e,YG,n.animationDuration),this.backgroundClip=xe(e,E9,n.backgroundClip),this.backgroundColor=xe(e,I9,n.backgroundColor),this.backgroundImage=xe(e,L9,n.backgroundImage),this.backgroundOrigin=xe(e,j9,n.backgroundOrigin),this.backgroundPosition=xe(e,D9,n.backgroundPosition),this.backgroundRepeat=xe(e,O9,n.backgroundRepeat),this.backgroundSize=xe(e,H9,n.backgroundSize),this.borderTopColor=xe(e,K9,n.borderTopColor),this.borderRightColor=xe(e,G9,n.borderRightColor),this.borderBottomColor=xe(e,z9,n.borderBottomColor),this.borderLeftColor=xe(e,q9,n.borderLeftColor),this.borderTopLeftRadius=xe(e,W9,n.borderTopLeftRadius),this.borderTopRightRadius=xe(e,$9,n.borderTopRightRadius),this.borderBottomRightRadius=xe(e,Y9,n.borderBottomRightRadius),this.borderBottomLeftRadius=xe(e,X9,n.borderBottomLeftRadius),this.borderTopStyle=xe(e,Z9,n.borderTopStyle),this.borderRightStyle=xe(e,J9,n.borderRightStyle),this.borderBottomStyle=xe(e,eG,n.borderBottomStyle),this.borderLeftStyle=xe(e,tG,n.borderLeftStyle),this.borderTopWidth=xe(e,nG,n.borderTopWidth),this.borderRightWidth=xe(e,rG,n.borderRightWidth),this.borderBottomWidth=xe(e,sG,n.borderBottomWidth),this.borderLeftWidth=xe(e,iG,n.borderLeftWidth),this.boxShadow=xe(e,ZG,n.boxShadow),this.color=xe(e,aG,n.color),this.direction=xe(e,oG,n.direction),this.display=xe(e,AG,n.display),this.float=xe(e,cG,n.cssFloat),this.fontFamily=xe(e,HG,n.fontFamily),this.fontSize=xe(e,VG,n.fontSize),this.fontStyle=xe(e,zG,n.fontStyle),this.fontVariant=xe(e,GG,n.fontVariant),this.fontWeight=xe(e,KG,n.fontWeight),this.letterSpacing=xe(e,uG,n.letterSpacing),this.lineBreak=xe(e,dG,n.lineBreak),this.lineHeight=xe(e,hG,n.lineHeight),this.listStyleImage=xe(e,fG,n.listStyleImage),this.listStylePosition=xe(e,mG,n.listStylePosition),this.listStyleType=xe(e,av,n.listStyleType),this.marginTop=xe(e,gG,n.marginTop),this.marginRight=xe(e,pG,n.marginRight),this.marginBottom=xe(e,yG,n.marginBottom),this.marginLeft=xe(e,wG,n.marginLeft),this.opacity=xe(e,DG,n.opacity);var i=xe(e,vG,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=xe(e,xG,n.overflowWrap),this.paddingTop=xe(e,_G,n.paddingTop),this.paddingRight=xe(e,BG,n.paddingRight),this.paddingBottom=xe(e,bG,n.paddingBottom),this.paddingLeft=xe(e,CG,n.paddingLeft),this.paintOrder=xe(e,JG,n.paintOrder),this.position=xe(e,IG,n.position),this.textAlign=xe(e,EG,n.textAlign),this.textDecorationColor=xe(e,OG,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=xe(e,MG,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=xe(e,TG,n.textShadow),this.textTransform=xe(e,SG,n.textTransform),this.transform=xe(e,kG,n.transform),this.transformOrigin=xe(e,PG,n.transformOrigin),this.visibility=xe(e,RG,n.visibility),this.webkitTextStrokeColor=xe(e,ez,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=xe(e,tz,n.webkitTextStrokeWidth),this.wordBreak=xe(e,LG,n.wordBreak),this.zIndex=xe(e,jG,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return ro(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return fn(this.display,4)||fn(this.display,33554432)||fn(this.display,268435456)||fn(this.display,536870912)||fn(this.display,67108864)||fn(this.display,134217728)},t}(),rz=function(){function t(e,n){this.content=xe(e,qG,n.content),this.quotes=xe(e,XG,n.quotes)}return t}(),yI=function(){function t(e,n){this.counterIncrement=xe(e,WG,n.counterIncrement),this.counterReset=xe(e,$G,n.counterReset)}return t}(),xe=function(t,e,n){var r=new sF,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var i=new iF(r.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(t,ft(o)?o.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return Qp.parse(t,i.parseComponentValue());case"color":return no.parse(t,i.parseComponentValue());case"image":return X_.parse(t,i.parseComponentValue());case"length":var l=i.parseComponentValue();return ho(l)?l:kn;case"length-percentage":var c=i.parseComponentValue();return An(c)?c:kn;case"time":return BF.parse(t,i.parseComponentValue())}break}},sz="data-html2canvas-debug",iz=function(t){var e=t.getAttribute(sz);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ov=function(t,e){var n=iz(t);return n===1||e===n},ui=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ov(n,3))debugger;this.styles=new nz(e,window.getComputedStyle(n,null)),cv(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Up(this.context,n),ov(n,4)&&(this.flags|=16)}return t}(),az="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",wI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ju=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Rf=0;Rf<wI.length;Rf++)ju[wI.charCodeAt(Rf)]=Rf;var oz=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(h)?h:new Uint8Array(h);for(r=0;r<n;r+=4)i=ju[t.charCodeAt(r)],o=ju[t.charCodeAt(r+1)],l=ju[t.charCodeAt(r+2)],c=ju[t.charCodeAt(r+3)],m[s++]=i<<2|o>>4,m[s++]=(o&15)<<4|l>>2,m[s++]=(l&3)<<6|c&63;return h},Az=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},lz=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},lA=5,Z_=11,Z0=2,cz=Z_-lA,bF=65536>>lA,uz=1<<lA,J0=uz-1,dz=1024>>lA,hz=bF+dz,fz=hz,mz=32,gz=fz+mz,pz=65536>>Z_,yz=1<<cz,wz=yz-1,vI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},vz=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},xz=function(t,e){var n=oz(t),r=Array.isArray(n)?lz(n):new Uint32Array(n),s=Array.isArray(n)?Az(n):new Uint16Array(n),i=24,o=vI(s,i/2,r[4]/2),l=r[5]===2?vI(s,(i+r[4])/2):vz(r,Math.ceil((i+r[4])/4));return new _z(r[0],r[1],r[2],r[3],o,l)},_z=function(){function t(e,n,r,s,i,o){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=o}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>lA],n=(n<<Z0)+(e&J0),this.data[n];if(e<=65535)return n=this.index[bF+(e-55296>>lA)],n=(n<<Z0)+(e&J0),this.data[n];if(e<this.highStart)return n=gz-pz+(e>>Z_),n=this.index[n],n+=e>>lA&wz,n=this.index[n],n=(n<<Z0)+(e&J0),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),xI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bz=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lf=0;Lf<xI.length;Lf++)Bz[xI.charCodeAt(Lf)]=Lf;var bz=1,ey=2,ty=3,_I=4,BI=5,Cz=7,bI=8,ny=9,ry=10,CI=11,EI=12,II=13,TI=14,sy=15,Ez=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Iz=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var o=t[s];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},Tz=xz(az),es="",iy="",Sz=function(t){return Tz.get(t)},kz=function(t,e,n){var r=n-2,s=e[r],i=e[n-1],o=e[n];if(i===ey&&o===ty)return es;if(i===ey||i===ty||i===_I||o===ey||o===ty||o===_I)return iy;if(i===bI&&[bI,ny,CI,EI].indexOf(o)!==-1||(i===CI||i===ny)&&(o===ny||o===ry)||(i===EI||i===ry)&&o===ry||o===II||o===BI||o===Cz||i===bz)return es;if(i===II&&o===TI){for(;s===BI;)s=e[--r];if(s===TI)return es}if(i===sy&&o===sy){for(var l=0;s===sy;)l++,s=e[--r];if(l%2===0)return es}return iy},Nz=function(t){var e=Ez(t),n=e.length,r=0,s=0,i=e.map(Sz);return{next:function(){if(r>=n)return{done:!0,value:null};for(var o=es;r<n&&(o=kz(e,i,++r))===es;);if(o!==es||r===n){var l=Iz.apply(null,e.slice(s,r));return s=r,{value:l,done:!1}}return{done:!0,value:null}}}},Uz=function(t){for(var e=Nz(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},Fz=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(r),i===e)return!0}}return!1},Qz=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=Fp(r.data).map(function(c){return Jt(c)}),i=0,o={},l=s.every(function(c,h){n.setStart(r,i),n.setEnd(r,i+c.length);var m=n.getBoundingClientRect();i+=c.length;var g=m.x>o.x||m.y>o.y;return o=m,h===0?!0:g});return t.body.removeChild(e),l},Pz=function(){return typeof new Image().crossOrigin<"u"},Rz=function(){return typeof new XMLHttpRequest().responseType=="string"},Lz=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},SI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},jz=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=e.toDataURL();s.src=i;var o=Av(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),kI(o).then(function(l){r.drawImage(l,0,0);var c=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var h=t.createElement("div");return h.style.backgroundImage="url("+i+")",h.style.height=n+"px",SI(c)?kI(Av(n,n,0,0,h)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),SI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Av=function(t,e,n,r,s){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(s),o},kI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Tn={get SUPPORT_RANGE_BOUNDS(){var t=Fz(document);return Object.defineProperty(Tn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Tn.SUPPORT_RANGE_BOUNDS&&Qz(document);return Object.defineProperty(Tn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Lz(document);return Object.defineProperty(Tn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?jz(document):Promise.resolve(!1);return Object.defineProperty(Tn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Pz();return Object.defineProperty(Tn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Rz();return Object.defineProperty(Tn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Tn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Tn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ld=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),Dz=function(t,e,n,r){var s=Hz(e,n),i=[],o=0;return s.forEach(function(l){if(n.textDecorationLine.length||l.trim().length>0)if(Tn.SUPPORT_RANGE_BOUNDS){var c=NI(r,o,l.length).getClientRects();if(c.length>1){var h=J_(l),m=0;h.forEach(function(y){i.push(new ld(y,sa.fromDOMRectList(t,NI(r,m+o,y.length).getClientRects()))),m+=y.length})}else i.push(new ld(l,sa.fromDOMRectList(t,c)))}else{var g=r.splitText(l.length);i.push(new ld(l,Oz(t,r))),r=g}else Tn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));o+=l.length}),i},Oz=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var i=Up(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return sa.EMPTY},NI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},J_=function(t){if(Tn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Uz(t)},Mz=function(t,e){if(Tn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return Kz(t,e)},Hz=function(t,e){return e.letterSpacing!==0?J_(t):Mz(t,e)},Vz=[32,160,4961,65792,65793,4153,4241],Kz=function(t,e){for(var n=p8(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,i=function(){if(s.value){var o=s.value.slice(),l=Fp(o),c="";l.forEach(function(h){Vz.indexOf(h)===-1?c+=Jt(h):(c.length&&r.push(c),r.push(Jt(h)),c="")}),c.length&&r.push(c)}};!(s=n.next()).done;)i();return r},Gz=function(){function t(e,n,r){this.text=zz(n.data,r.textTransform),this.textBounds=Dz(e,this.text,r,n)}return t}(),zz=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(qz,Wz);case 2:return t.toUpperCase();default:return t}},qz=/(^|\s|:|-|\(|\))([a-z])/g,Wz=function(t,e,n){return t.length>0?e+n.toUpperCase():t},CF=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(ui),EF=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(ui),IF=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=new XMLSerializer,o=Up(n,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(ui),TF=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(ui),lv=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(ui),$z=[{type:15,flags:0,unit:"px",number:3}],Yz=[{type:16,flags:0,number:50}],Xz=function(t){return t.width>t.height?new sa(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new sa(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Zz=function(t){var e=t.type===Jz?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},_g="checkbox",Bg="radio",Jz="password",UI=707406591,eB=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=Zz(r),(s.type===_g||s.type===Bg)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Xz(s.bounds)),s.type){case _g:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=$z;break;case Bg:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Yz;break}return s}return e}(ui),SF=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(ui),kF=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(ui),NF=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=FF(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?od(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Yi.TRANSPARENT,o=r.contentWindow.document.body?od(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Yi.TRANSPARENT;s.backgroundColor=ro(i)?ro(o)?s.styles.backgroundColor:o:i}}catch{}return s}return e}(ui),e7=["OL","UL","MENU"],ym=function(t,e,n,r){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,QF(s)&&s.data.trim().length>0)n.textNodes.push(new Gz(t,s,n.styles));else if(Hl(s))if(jF(s)&&s.assignedNodes)s.assignedNodes().forEach(function(l){return ym(t,l,n,r)});else{var o=UF(t,s);o.styles.isVisible()&&(t7(s,o,r)?o.flags|=4:n7(o.styles)&&(o.flags|=2),e7.indexOf(s.tagName)!==-1&&(o.flags|=8),n.elements.push(o),s.slot,s.shadowRoot?ym(t,s.shadowRoot,o,r):!bg(s)&&!PF(s)&&!Cg(s)&&ym(t,s,o,r))}},UF=function(t,e){return uv(e)?new CF(t,e):RF(e)?new EF(t,e):PF(e)?new IF(t,e):r7(e)?new TF(t,e):s7(e)?new lv(t,e):i7(e)?new eB(t,e):Cg(e)?new SF(t,e):bg(e)?new kF(t,e):LF(e)?new NF(t,e):new ui(t,e)},FF=function(t,e){var n=UF(t,e);return n.flags|=4,ym(t,e,n,n),n},t7=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||tB(t)&&n.styles.isTransparent()},n7=function(t){return t.isPositioned()||t.isFloating()},QF=function(t){return t.nodeType===Node.TEXT_NODE},Hl=function(t){return t.nodeType===Node.ELEMENT_NODE},cv=function(t){return Hl(t)&&typeof t.style<"u"&&!wm(t)},wm=function(t){return typeof t.className=="object"},r7=function(t){return t.tagName==="LI"},s7=function(t){return t.tagName==="OL"},i7=function(t){return t.tagName==="INPUT"},a7=function(t){return t.tagName==="HTML"},PF=function(t){return t.tagName==="svg"},tB=function(t){return t.tagName==="BODY"},RF=function(t){return t.tagName==="CANVAS"},FI=function(t){return t.tagName==="VIDEO"},uv=function(t){return t.tagName==="IMG"},LF=function(t){return t.tagName==="IFRAME"},QI=function(t){return t.tagName==="STYLE"},o7=function(t){return t.tagName==="SCRIPT"},bg=function(t){return t.tagName==="TEXTAREA"},Cg=function(t){return t.tagName==="SELECT"},jF=function(t){return t.tagName==="SLOT"},PI=function(t){return t.tagName.indexOf("-")>0},A7=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,i=!0;r!==null&&r.forEach(function(l){var c=n.counters[l.counter];c&&l.increment!==0&&(i=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return i&&s.forEach(function(l){var c=n.counters[l.counter];o.push(l.counter),c||(c=n.counters[l.counter]=[]),c.push(l.reset)}),o},t}(),RI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},LI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},l7={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},c7={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pl=function(t,e,n,r,s,i){return t<e||t>n?Wd(t,s,i.length>0):r.integers.reduce(function(o,l,c){for(;t>=l;)t-=l,o+=r.values[c];return o},"")+i},DF=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Zt=function(t,e,n,r,s){var i=n-e+1;return(t<0?"-":"")+(DF(Math.abs(t),i,r,function(o){return Jt(Math.floor(o%i)+e)})+s)},Oo=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return DF(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Il=1,Ea=2,Ia=4,Du=8,Ni=function(t,e,n,r,s,i){if(t<-9999||t>9999)return Wd(t,4,s.length>0);var o=Math.abs(t),l=s;if(o===0)return e[0]+l;for(var c=0;o>0&&c<=4;c++){var h=o%10;h===0&&fn(i,Il)&&l!==""?l=e[h]+l:h>1||h===1&&c===0||h===1&&c===1&&fn(i,Ea)||h===1&&c===1&&fn(i,Ia)&&t>100||h===1&&c>1&&fn(i,Du)?l=e[h]+(c>0?n[c-1]:"")+l:h===1&&c>0&&(l=n[c-1]+l),o=Math.floor(o/10)}return(t<0?r:"")+l},jI="",DI="",OI="",ay="",Wd=function(t,e,n){var r=n?". ":"",s=n?"":"",i=n?", ":"",o=n?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Zt(t,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return Oo(t,"",s);case 6:return pl(t,1,3999,RI,3,r).toLowerCase();case 7:return pl(t,1,3999,RI,3,r);case 8:return Zt(t,945,969,!1,r);case 9:return Zt(t,97,122,!1,r);case 10:return Zt(t,65,90,!1,r);case 11:return Zt(t,1632,1641,!0,r);case 12:case 49:return pl(t,1,9999,LI,3,r);case 35:return pl(t,1,9999,LI,3,r).toLowerCase();case 13:return Zt(t,2534,2543,!0,r);case 14:case 30:return Zt(t,6112,6121,!0,r);case 15:return Oo(t,"",s);case 16:return Oo(t,"",s);case 17:case 48:return Ni(t,"",jI,"",s,Ea|Ia|Du);case 47:return Ni(t,"",DI,"",s,Il|Ea|Ia|Du);case 42:return Ni(t,"",jI,"",s,Ea|Ia|Du);case 41:return Ni(t,"",DI,"",s,Il|Ea|Ia|Du);case 26:return Ni(t,"","",OI,s,0);case 25:return Ni(t,"","",OI,s,Il|Ea|Ia);case 31:return Ni(t,"","",ay,i,Il|Ea|Ia);case 33:return Ni(t,"","",ay,i,0);case 32:return Ni(t,"","",ay,i,Il|Ea|Ia);case 18:return Zt(t,2406,2415,!0,r);case 20:return pl(t,1,19999,c7,3,r);case 21:return Zt(t,2790,2799,!0,r);case 22:return Zt(t,2662,2671,!0,r);case 22:return pl(t,1,10999,l7,3,r);case 23:return Oo(t,"");case 24:return Oo(t,"");case 27:return Zt(t,3302,3311,!0,r);case 28:return Oo(t,"",s);case 29:return Oo(t,"",s);case 34:return Zt(t,3792,3801,!0,r);case 37:return Zt(t,6160,6169,!0,r);case 38:return Zt(t,4160,4169,!0,r);case 39:return Zt(t,2918,2927,!0,r);case 40:return Zt(t,1776,1785,!0,r);case 43:return Zt(t,3046,3055,!0,r);case 44:return Zt(t,3174,3183,!0,r);case 45:return Zt(t,3664,3673,!0,r);case 46:return Zt(t,3872,3881,!0,r);case 3:default:return Zt(t,48,57,!0,r)}},OF="data-html2canvas-ignore",MI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new A7,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=u7(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=s.contentWindow,c=l.document,h=f7(s).then(function(){return rr(r,void 0,void 0,function(){var m,g;return Dn(this,function(y){switch(y.label){case 0:return this.scrolledElements.forEach(y7),l&&(l.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==n.top||l.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-n.left,l.scrollY-n.top,0,0))),m=this.options.onclone,g=this.clonedReferenceElement,typeof g>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:y.sent(),y.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,h7(c)]:[3,4];case 3:y.sent(),y.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(c,g)}).then(function(){return s})]:[2,s]}})})});return c.open(),c.write(g7(document.doctype)+"<html></html>"),p7(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),h},t.prototype.createElementClone=function(e){if(ov(e,2))debugger;if(RF(e))return this.createCanvasClone(e);if(FI(e))return this.createVideoClone(e);if(QI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return uv(n)&&(uv(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),PI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return oy(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var l=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!Hl(n)||!o7(n)&&!n.hasAttribute(OF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Hl(n)||!QI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Hl(i)&&jF(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return s.appendChildNode(n,l,r)})}else this.appendChildNode(n,i,r)},t.prototype.cloneNode=function(e,n){if(QF(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Hl(e)&&(cv(e)||wm(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),l=r.getComputedStyle(e,":after");this.referenceElement===e&&cv(s)&&(this.clonedReferenceElement=s),tB(s)&&x7(s);var c=this.counters.parse(new yI(this.context,i)),h=this.resolvePseudoContent(e,s,o,cd.BEFORE);PI(e)&&(n=!0),FI(e)||this.cloneChildNodes(e,s,n),h&&s.insertBefore(h,s.firstChild);var m=this.resolvePseudoContent(e,s,l,cd.AFTER);return m&&s.appendChild(m),this.counters.pop(c),(i&&(this.options.copyStyles||wm(e))&&!LF(e)||n)&&oy(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(bg(e)||Cg(e))&&(bg(s)||Cg(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var i=this;if(r){var o=r.content,l=n.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new yI(this.context,r));var c=new rz(this.context,r),h=l.createElement("html2canvaspseudoelement");oy(r,h),c.content.forEach(function(g){if(g.type===0)h.appendChild(l.createTextNode(g.value));else if(g.type===22){var y=l.createElement("img");y.src=g.value,y.style.opacity="1",h.appendChild(y)}else if(g.type===18){if(g.name==="attr"){var B=g.values.filter(ft);B.length&&h.appendChild(l.createTextNode(e.getAttribute(B[0].value)||""))}else if(g.name==="counter"){var b=g.values.filter(Ic),x=b[0],S=b[1];if(x&&ft(x)){var I=i.counters.getCounterValue(x.value),E=S&&ft(S)?av.parse(i.context,S.value):3;h.appendChild(l.createTextNode(Wd(I,E,!1)))}}else if(g.name==="counters"){var U=g.values.filter(Ic),x=U[0],M=U[1],S=U[2];if(x&&ft(x)){var H=i.counters.getCounterValues(x.value),O=S&&ft(S)?av.parse(i.context,S.value):3,T=M&&M.type===0?M.value:"",C=H.map(function(D){return Wd(D,O,!1)}).join(T);h.appendChild(l.createTextNode(C))}}}else if(g.type===20)switch(g.value){case"open-quote":h.appendChild(l.createTextNode(pI(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":h.appendChild(l.createTextNode(pI(c.quotes,--i.quoteDepth,!1)));break;default:h.appendChild(l.createTextNode(g.value))}}),h.className=dv+" "+hv;var m=s===cd.BEFORE?" "+dv:" "+hv;return wm(n)?n.className.baseValue+=m:n.className+=m,h}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),cd;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(cd||(cd={}));var u7=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(OF,"true"),t.body.appendChild(n),n},d7=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},h7=function(t){return Promise.all([].slice.call(t.images,0).map(d7))},f7=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},m7=["all","d","content"],oy=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);m7.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},g7=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},p7=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},y7=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},w7=":before",v7=":after",dv="___html2canvas___pseudoelement_before",hv="___html2canvas___pseudoelement_after",HI=`{
    content: "" !important;
    display: none !important;
}`,x7=function(t){_7(t,"."+dv+w7+HI+`
         .`+hv+v7+HI)},_7=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},MF=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),B7=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(ly(e)||I7(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return rr(this,void 0,void 0,function(){var n,r,s,i,o=this;return Dn(this,function(l){switch(l.label){case 0:return n=MF.isSameOrigin(e),r=!Ay(e)&&this._options.useCORS===!0&&Tn.SUPPORT_CORS_IMAGES&&!n,s=!Ay(e)&&!n&&!ly(e)&&typeof this._options.proxy=="string"&&Tn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!Ay(e)&&!ly(e)&&!s&&!r?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,h){var m=new Image;m.onload=function(){return c(m)},m.onerror=h,(T7(i)||r)&&(m.crossOrigin="anonymous"),m.src=i,m.complete===!0&&setTimeout(function(){return c(m)},500),o._options.imageTimeout>0&&setTimeout(function(){return h("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,o){var l=Tn.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")i(c.response);else{var g=new FileReader;g.addEventListener("load",function(){return i(g.result)},!1),g.addEventListener("error",function(y){return o(y)},!1),g.readAsDataURL(c.response)}else o("Failed to proxy resource "+s+" with status code "+c.status)},c.onerror=o;var h=r.indexOf("?")>-1?"&":"?";if(c.open("GET",""+r+h+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),n._options.imageTimeout){var m=n._options.imageTimeout;c.timeout=m,c.ontimeout=function(){return o("Timed out ("+m+"ms) proxying "+s)}}c.send()})},t}(),b7=/^data:image\/svg\+xml/i,C7=/^data:image\/.*;base64,/i,E7=/^data:image\/.*/i,I7=function(t){return Tn.SUPPORT_SVG_DRAWING||!S7(t)},Ay=function(t){return E7.test(t)},T7=function(t){return C7.test(t)},ly=function(t){return t.substr(0,4)==="blob"},S7=function(t){return t.substr(-3).toLowerCase()==="svg"||b7.test(t)},ye=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),yl=function(t,e,n){return new ye(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},jf=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=yl(this.start,this.startControl,e),s=yl(this.startControl,this.endControl,e),i=yl(this.endControl,this.end,e),o=yl(r,s,e),l=yl(s,i,e),c=yl(o,l,e);return n?new t(this.start,r,o,c):new t(c,l,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),rs=function(t){return t.type===1},k7=function(){function t(e){var n=e.styles,r=e.bounds,s=Lu(n.borderTopLeftRadius,r.width,r.height),i=s[0],o=s[1],l=Lu(n.borderTopRightRadius,r.width,r.height),c=l[0],h=l[1],m=Lu(n.borderBottomRightRadius,r.width,r.height),g=m[0],y=m[1],B=Lu(n.borderBottomLeftRadius,r.width,r.height),b=B[0],x=B[1],S=[];S.push((i+c)/r.width),S.push((b+g)/r.width),S.push((o+x)/r.height),S.push((h+y)/r.height);var I=Math.max.apply(Math,S);I>1&&(i/=I,o/=I,c/=I,h/=I,g/=I,y/=I,b/=I,x/=I);var E=r.width-c,U=r.height-y,M=r.width-g,H=r.height-x,O=n.borderTopWidth,T=n.borderRightWidth,C=n.borderBottomWidth,N=n.borderLeftWidth,Q=pt(n.paddingTop,e.bounds.width),D=pt(n.paddingRight,e.bounds.width),K=pt(n.paddingBottom,e.bounds.width),j=pt(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Tt(r.left+N/3,r.top+O/3,i-N/3,o-O/3,ot.TOP_LEFT):new ye(r.left+N/3,r.top+O/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Tt(r.left+E,r.top+O/3,c-T/3,h-O/3,ot.TOP_RIGHT):new ye(r.left+r.width-T/3,r.top+O/3),this.bottomRightBorderDoubleOuterBox=g>0||y>0?Tt(r.left+M,r.top+U,g-T/3,y-C/3,ot.BOTTOM_RIGHT):new ye(r.left+r.width-T/3,r.top+r.height-C/3),this.bottomLeftBorderDoubleOuterBox=b>0||x>0?Tt(r.left+N/3,r.top+H,b-N/3,x-C/3,ot.BOTTOM_LEFT):new ye(r.left+N/3,r.top+r.height-C/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Tt(r.left+N*2/3,r.top+O*2/3,i-N*2/3,o-O*2/3,ot.TOP_LEFT):new ye(r.left+N*2/3,r.top+O*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Tt(r.left+E,r.top+O*2/3,c-T*2/3,h-O*2/3,ot.TOP_RIGHT):new ye(r.left+r.width-T*2/3,r.top+O*2/3),this.bottomRightBorderDoubleInnerBox=g>0||y>0?Tt(r.left+M,r.top+U,g-T*2/3,y-C*2/3,ot.BOTTOM_RIGHT):new ye(r.left+r.width-T*2/3,r.top+r.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||x>0?Tt(r.left+N*2/3,r.top+H,b-N*2/3,x-C*2/3,ot.BOTTOM_LEFT):new ye(r.left+N*2/3,r.top+r.height-C*2/3),this.topLeftBorderStroke=i>0||o>0?Tt(r.left+N/2,r.top+O/2,i-N/2,o-O/2,ot.TOP_LEFT):new ye(r.left+N/2,r.top+O/2),this.topRightBorderStroke=i>0||o>0?Tt(r.left+E,r.top+O/2,c-T/2,h-O/2,ot.TOP_RIGHT):new ye(r.left+r.width-T/2,r.top+O/2),this.bottomRightBorderStroke=g>0||y>0?Tt(r.left+M,r.top+U,g-T/2,y-C/2,ot.BOTTOM_RIGHT):new ye(r.left+r.width-T/2,r.top+r.height-C/2),this.bottomLeftBorderStroke=b>0||x>0?Tt(r.left+N/2,r.top+H,b-N/2,x-C/2,ot.BOTTOM_LEFT):new ye(r.left+N/2,r.top+r.height-C/2),this.topLeftBorderBox=i>0||o>0?Tt(r.left,r.top,i,o,ot.TOP_LEFT):new ye(r.left,r.top),this.topRightBorderBox=c>0||h>0?Tt(r.left+E,r.top,c,h,ot.TOP_RIGHT):new ye(r.left+r.width,r.top),this.bottomRightBorderBox=g>0||y>0?Tt(r.left+M,r.top+U,g,y,ot.BOTTOM_RIGHT):new ye(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=b>0||x>0?Tt(r.left,r.top+H,b,x,ot.BOTTOM_LEFT):new ye(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?Tt(r.left+N,r.top+O,Math.max(0,i-N),Math.max(0,o-O),ot.TOP_LEFT):new ye(r.left+N,r.top+O),this.topRightPaddingBox=c>0||h>0?Tt(r.left+Math.min(E,r.width-T),r.top+O,E>r.width+T?0:Math.max(0,c-T),Math.max(0,h-O),ot.TOP_RIGHT):new ye(r.left+r.width-T,r.top+O),this.bottomRightPaddingBox=g>0||y>0?Tt(r.left+Math.min(M,r.width-N),r.top+Math.min(U,r.height-C),Math.max(0,g-T),Math.max(0,y-C),ot.BOTTOM_RIGHT):new ye(r.left+r.width-T,r.top+r.height-C),this.bottomLeftPaddingBox=b>0||x>0?Tt(r.left+N,r.top+Math.min(H,r.height-C),Math.max(0,b-N),Math.max(0,x-C),ot.BOTTOM_LEFT):new ye(r.left+N,r.top+r.height-C),this.topLeftContentBox=i>0||o>0?Tt(r.left+N+j,r.top+O+Q,Math.max(0,i-(N+j)),Math.max(0,o-(O+Q)),ot.TOP_LEFT):new ye(r.left+N+j,r.top+O+Q),this.topRightContentBox=c>0||h>0?Tt(r.left+Math.min(E,r.width+N+j),r.top+O+Q,E>r.width+N+j?0:c-N+j,h-(O+Q),ot.TOP_RIGHT):new ye(r.left+r.width-(T+D),r.top+O+Q),this.bottomRightContentBox=g>0||y>0?Tt(r.left+Math.min(M,r.width-(N+j)),r.top+Math.min(U,r.height+O+Q),Math.max(0,g-(T+D)),y-(C+K),ot.BOTTOM_RIGHT):new ye(r.left+r.width-(T+D),r.top+r.height-(C+K)),this.bottomLeftContentBox=b>0||x>0?Tt(r.left+N+j,r.top+H,Math.max(0,b-(N+j)),x-(C+K),ot.BOTTOM_LEFT):new ye(r.left+N+j,r.top+r.height-(C+K))}return t}(),ot;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ot||(ot={}));var Tt=function(t,e,n,r,s){var i=4*((Math.sqrt(2)-1)/3),o=n*i,l=r*i,c=t+n,h=e+r;switch(s){case ot.TOP_LEFT:return new jf(new ye(t,h),new ye(t,h-l),new ye(c-o,e),new ye(c,e));case ot.TOP_RIGHT:return new jf(new ye(t,e),new ye(t+o,e),new ye(c,h-l),new ye(c,h));case ot.BOTTOM_RIGHT:return new jf(new ye(c,e),new ye(c,e+l),new ye(t+o,h),new ye(t,h));case ot.BOTTOM_LEFT:default:return new jf(new ye(c,h),new ye(c-o,h),new ye(t,e+l),new ye(t,e))}},Eg=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},N7=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Ig=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},U7=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),Df=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),F7=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Q7=function(t){return t.type===0},HF=function(t){return t.type===1},P7=function(t){return t.type===2},VI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},R7=function(t,e,n,r,s){return t.map(function(i,o){switch(o){case 0:return i.add(e,n);case 1:return i.add(e+r,n);case 2:return i.add(e+r,n+s);case 3:return i.add(e,n+s)}return i})},VF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),KF=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new k7(this.container),this.container.styles.opacity<1&&this.effects.push(new F7(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new U7(r,s,i))}if(this.container.styles.overflowX!==0){var o=Eg(this.curves),l=Ig(this.curves);VI(o,l)?this.effects.push(new Df(o,6)):(this.effects.push(new Df(o,2)),this.effects.push(new Df(l,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(c){return!HF(c)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=Eg(r.curves),l=Ig(r.curves);VI(o,l)||s.unshift(new Df(l,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(c){return fn(c.target,e)})},t}(),fv=function(t,e,n,r){t.container.elements.forEach(function(s){var i=fn(s.flags,4),o=fn(s.flags,2),l=new KF(s,t);fn(s.styles.display,2048)&&r.push(l);var c=fn(s.flags,8)?[]:r;if(i||o){var h=i||s.styles.isPositioned()?n:e,m=new VF(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var g=s.styles.zIndex.order;if(g<0){var y=0;h.negativeZIndex.some(function(b,x){return g>b.element.container.styles.zIndex.order?(y=x,!1):y>0}),h.negativeZIndex.splice(y,0,m)}else if(g>0){var B=0;h.positiveZIndex.some(function(b,x){return g>=b.element.container.styles.zIndex.order?(B=x+1,!1):B>0}),h.positiveZIndex.splice(B,0,m)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else s.styles.isFloating()?h.nonPositionedFloats.push(m):h.nonPositionedInlineLevel.push(m);fv(l,m,i?m:n,c)}else s.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),fv(l,e,n,c);fn(s.flags,8)&&GF(s,c)})},GF=function(t,e){for(var n=t instanceof lv?t.start:1,r=t instanceof lv?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof TF&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=Wd(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},L7=function(t){var e=new KF(t,null),n=new VF(e),r=[];return fv(e,n,n,r),GF(e.container,r),n},KI=function(t,e){switch(e){case 0:return as(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return as(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return as(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return as(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},j7=function(t,e){switch(e){case 0:return as(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return as(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return as(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return as(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},D7=function(t,e){switch(e){case 0:return as(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return as(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return as(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return as(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},O7=function(t,e){switch(e){case 0:return Of(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Of(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Of(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Of(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Of=function(t,e){var n=[];return rs(t)?n.push(t.subdivide(.5,!1)):n.push(t),rs(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},as=function(t,e,n,r){var s=[];return rs(t)?s.push(t.subdivide(.5,!1)):s.push(t),rs(n)?s.push(n.subdivide(.5,!0)):s.push(n),rs(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),rs(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},zF=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Tg=function(t){var e=t.styles,n=t.bounds,r=pt(e.paddingLeft,n.width),s=pt(e.paddingRight,n.width),i=pt(e.paddingTop,n.width),o=pt(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+i+o))},M7=function(t,e){return t===0?e.bounds:t===2?Tg(e):zF(e)},H7=function(t,e){return t===0?e.bounds:t===2?Tg(e):zF(e)},cy=function(t,e,n){var r=M7(Tl(t.styles.backgroundOrigin,e),t),s=H7(Tl(t.styles.backgroundClip,e),t),i=V7(Tl(t.styles.backgroundSize,e),n,r),o=i[0],l=i[1],c=Lu(Tl(t.styles.backgroundPosition,e),r.width-o,r.height-l),h=K7(Tl(t.styles.backgroundRepeat,e),c,i,r,s),m=Math.round(r.left+c[0]),g=Math.round(r.top+c[1]);return[h,m,g,o,l]},wl=function(t){return ft(t)&&t.value===nc.AUTO},Mf=function(t){return typeof t=="number"},V7=function(t,e,n){var r=e[0],s=e[1],i=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(An(o)&&l&&An(l))return[pt(o,n.width),pt(l,n.height)];var c=Mf(i);if(ft(o)&&(o.value===nc.CONTAIN||o.value===nc.COVER)){if(Mf(i)){var h=n.width/n.height;return h<i!=(o.value===nc.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var m=Mf(r),g=Mf(s),y=m||g;if(wl(o)&&(!l||wl(l))){if(m&&g)return[r,s];if(!c&&!y)return[n.width,n.height];if(y&&c){var B=m?r:s*i,b=g?s:r/i;return[B,b]}var x=m?r:n.width,S=g?s:n.height;return[x,S]}if(c){var I=0,E=0;return An(o)?I=pt(o,n.width):An(l)&&(E=pt(l,n.height)),wl(o)?I=E*i:(!l||wl(l))&&(E=I/i),[I,E]}var U=null,M=null;if(An(o)?U=pt(o,n.width):l&&An(l)&&(M=pt(l,n.height)),U!==null&&(!l||wl(l))&&(M=m&&g?U/r*s:n.height),M!==null&&wl(o)&&(U=m&&g?M/s*r:n.width),U!==null&&M!==null)return[U,M];throw new Error("Unable to calculate background-size for element")},Tl=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},K7=function(t,e,n,r,s){var i=e[0],o=e[1],l=n[0],c=n[1];switch(t){case 2:return[new ye(Math.round(r.left),Math.round(r.top+o)),new ye(Math.round(r.left+r.width),Math.round(r.top+o)),new ye(Math.round(r.left+r.width),Math.round(c+r.top+o)),new ye(Math.round(r.left),Math.round(c+r.top+o))];case 3:return[new ye(Math.round(r.left+i),Math.round(r.top)),new ye(Math.round(r.left+i+l),Math.round(r.top)),new ye(Math.round(r.left+i+l),Math.round(r.height+r.top)),new ye(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new ye(Math.round(r.left+i),Math.round(r.top+o)),new ye(Math.round(r.left+i+l),Math.round(r.top+o)),new ye(Math.round(r.left+i+l),Math.round(r.top+o+c)),new ye(Math.round(r.left+i),Math.round(r.top+o+c))];default:return[new ye(Math.round(s.left),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.height+s.top)),new ye(Math.round(s.left),Math.round(s.height+s.top))]}},G7="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",GI="Hidden Text",z7=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),s.src=G7,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(GI)),r.appendChild(i),r.appendChild(s);var l=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(GI)),r.style.lineHeight="normal",s.style.verticalAlign="super";var c=s.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),qF=function(){function t(e,n){this.context=e,this.options=n}return t}(),q7=1e4,W7=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new z7(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),P7(n)&&(this.ctx.globalAlpha=n.opacity),Q7(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),HF(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return rr(this,void 0,void 0,function(){var r;return Dn(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return rr(this,void 0,void 0,function(){return Dn(this,function(r){switch(r.label){case 0:if(fn(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var o=J_(n.text);o.reduce(function(l,c){return i.ctx.fillText(c,l,n.bounds.top+s),l+i.ctx.measureText(c).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=J7(n.fontFamily).join(", "),i=_h(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(n,r){return rr(this,void 0,void 0,function(){var s,i,o,l,c,h,m,g,y=this;return Dn(this,function(B){return s=this.createFontStyle(r),i=s[0],o=s[1],l=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),h=c.baseline,m=c.middle,g=r.paintOrder,n.textBounds.forEach(function(b){g.forEach(function(x){switch(x){case 0:y.ctx.fillStyle=xn(r.color),y.renderTextWithLetterSpacing(b,r.letterSpacing,h);var S=r.textShadow;S.length&&b.text.trim().length&&(S.slice(0).reverse().forEach(function(I){y.ctx.shadowColor=xn(I.color),y.ctx.shadowOffsetX=I.offsetX.number*y.options.scale,y.ctx.shadowOffsetY=I.offsetY.number*y.options.scale,y.ctx.shadowBlur=I.blur.number,y.renderTextWithLetterSpacing(b,r.letterSpacing,h)}),y.ctx.shadowColor="",y.ctx.shadowOffsetX=0,y.ctx.shadowOffsetY=0,y.ctx.shadowBlur=0),r.textDecorationLine.length&&(y.ctx.fillStyle=xn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(I){switch(I){case 1:y.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+h),b.bounds.width,1);break;case 2:y.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:y.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+m),b.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&b.text.trim().length&&(y.ctx.strokeStyle=xn(r.webkitTextStrokeColor),y.ctx.lineWidth=r.webkitTextStrokeWidth,y.ctx.lineJoin=window.chrome?"miter":"round",y.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+h)),y.ctx.strokeStyle="",y.ctx.lineWidth=0,y.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=Tg(n),o=Ig(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return rr(this,void 0,void 0,function(){var r,s,i,o,l,c,E,E,h,m,g,y,M,B,b,H,x,S,I,E,U,M,H;return Dn(this,function(O){switch(O.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,o=0,l=r.textNodes,O.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:O.sent(),O.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof CF))return[3,8];O.label=5;case 5:return O.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return E=O.sent(),this.renderReplacedElement(r,s,E),[3,8];case 7:return O.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof EF&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof IF))return[3,12];O.label=9;case 9:return O.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return E=O.sent(),this.renderReplacedElement(r,s,E),[3,12];case 11:return O.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof NF&&r.tree?(h=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,h.render(r.tree)]):[3,14];case 13:m=O.sent(),r.width&&r.height&&this.ctx.drawImage(m,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),O.label=14;case 14:if(r instanceof eB&&(g=Math.min(r.bounds.width,r.bounds.height),r.type===_g?r.checked&&(this.ctx.save(),this.path([new ye(r.bounds.left+g*.39363,r.bounds.top+g*.79),new ye(r.bounds.left+g*.16,r.bounds.top+g*.5549),new ye(r.bounds.left+g*.27347,r.bounds.top+g*.44071),new ye(r.bounds.left+g*.39694,r.bounds.top+g*.5649),new ye(r.bounds.left+g*.72983,r.bounds.top+g*.23),new ye(r.bounds.left+g*.84,r.bounds.top+g*.34085),new ye(r.bounds.left+g*.39363,r.bounds.top+g*.79)]),this.ctx.fillStyle=xn(UI),this.ctx.fill(),this.ctx.restore()):r.type===Bg&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+g/2,r.bounds.top+g/2,g/4,0,Math.PI*2,!0),this.ctx.fillStyle=xn(UI),this.ctx.fill(),this.ctx.restore())),$7(r)&&r.value.length){switch(y=this.createFontStyle(i),M=y[0],B=y[1],b=this.fontMetrics.getMetrics(M,B).baseline,this.ctx.font=M,this.ctx.fillStyle=xn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=X7(r.styles.textAlign),H=Tg(r),x=0,r.styles.textAlign){case 1:x+=H.width/2;break;case 2:x+=H.width;break}S=H.add(x,0,0,-H.height/2+1),this.ctx.save(),this.path([new ye(H.left,H.top),new ye(H.left+H.width,H.top),new ye(H.left+H.width,H.top+H.height),new ye(H.left,H.top+H.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ld(r.value,S),i.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!fn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(I=r.styles.listStyleImage,I.type!==0)return[3,18];E=void 0,U=I.url,O.label=15;case 15:return O.trys.push([15,17,,18]),[4,this.context.cache.match(U)];case 16:return E=O.sent(),this.ctx.drawImage(E,r.bounds.left-(E.width+10),r.bounds.top),[3,18];case 17:return O.sent(),this.context.logger.error("Error loading list-style-image "+U),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(M=this.createFontStyle(i)[0],this.ctx.font=M,this.ctx.fillStyle=xn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",H=new sa(r.bounds.left,r.bounds.top+pt(r.styles.paddingTop,r.bounds.width),r.bounds.width,mI(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ld(n.listValue,H),i.letterSpacing,mI(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),O.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return rr(this,void 0,void 0,function(){var r,s,I,i,o,I,l,c,I,h,m,I,g,y,I,B,b,I,x,S,I;return Dn(this,function(E){switch(E.label){case 0:if(fn(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:E.sent(),r=0,s=n.negativeZIndex,E.label=2;case 2:return r<s.length?(I=s[r],[4,this.renderStack(I)]):[3,5];case 3:E.sent(),E.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:E.sent(),i=0,o=n.nonInlineLevel,E.label=7;case 7:return i<o.length?(I=o[i],[4,this.renderNode(I)]):[3,10];case 8:E.sent(),E.label=9;case 9:return i++,[3,7];case 10:l=0,c=n.nonPositionedFloats,E.label=11;case 11:return l<c.length?(I=c[l],[4,this.renderStack(I)]):[3,14];case 12:E.sent(),E.label=13;case 13:return l++,[3,11];case 14:h=0,m=n.nonPositionedInlineLevel,E.label=15;case 15:return h<m.length?(I=m[h],[4,this.renderStack(I)]):[3,18];case 16:E.sent(),E.label=17;case 17:return h++,[3,15];case 18:g=0,y=n.inlineLevel,E.label=19;case 19:return g<y.length?(I=y[g],[4,this.renderNode(I)]):[3,22];case 20:E.sent(),E.label=21;case 21:return g++,[3,19];case 22:B=0,b=n.zeroOrAutoZIndexOrTransformedOrOpacity,E.label=23;case 23:return B<b.length?(I=b[B],[4,this.renderStack(I)]):[3,26];case 24:E.sent(),E.label=25;case 25:return B++,[3,23];case 26:x=0,S=n.positiveZIndex,E.label=27;case 27:return x<S.length?(I=S[x],[4,this.renderStack(I)]):[3,30];case 28:E.sent(),E.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var o=rs(s)?s.start:s;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),rs(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,s);var c=l.getContext("2d");return c.drawImage(n,0,0,n.width,n.height,0,0,r,s),l},e.prototype.renderBackgroundImage=function(n){return rr(this,void 0,void 0,function(){var r,s,i,o,l,c;return Dn(this,function(h){switch(h.label){case 0:r=n.styles.backgroundImage.length-1,s=function(m){var g,y,B,Q,oe,Ae,j,X,C,b,Q,oe,Ae,j,X,x,S,I,E,U,M,H,O,T,C,N,Q,D,K,j,X,J,oe,Ae,G,ae,ee,we,de,me,pe,he;return Dn(this,function(ie){switch(ie.label){case 0:if(m.type!==0)return[3,5];g=void 0,y=m.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,i.context.cache.match(y)];case 2:return g=ie.sent(),[3,4];case 3:return ie.sent(),i.context.logger.error("Error loading background-image "+y),[3,4];case 4:return g&&(B=cy(n,r,[g.width,g.height,g.width/g.height]),Q=B[0],oe=B[1],Ae=B[2],j=B[3],X=B[4],C=i.ctx.createPattern(i.resizeImage(g,j,X),"repeat"),i.renderRepeat(Q,C,oe,Ae)),[3,6];case 5:Q9(m)?(b=cy(n,r,[null,null,null]),Q=b[0],oe=b[1],Ae=b[2],j=b[3],X=b[4],x=S9(m.angle,j,X),S=x[0],I=x[1],E=x[2],U=x[3],M=x[4],H=document.createElement("canvas"),H.width=j,H.height=X,O=H.getContext("2d"),T=O.createLinearGradient(I,U,E,M),hI(m.stops,S).forEach(function(Qe){return T.addColorStop(Qe.stop,xn(Qe.color))}),O.fillStyle=T,O.fillRect(0,0,j,X),j>0&&X>0&&(C=i.ctx.createPattern(H,"repeat"),i.renderRepeat(Q,C,oe,Ae))):P9(m)&&(N=cy(n,r,[null,null,null]),Q=N[0],D=N[1],K=N[2],j=N[3],X=N[4],J=m.position.length===0?[Y_]:m.position,oe=pt(J[0],j),Ae=pt(J[J.length-1],X),G=k9(m,oe,Ae,j,X),ae=G[0],ee=G[1],ae>0&&ee>0&&(we=i.ctx.createRadialGradient(D+oe,K+Ae,0,D+oe,K+Ae,ae),hI(m.stops,ae*2).forEach(function(Qe){return we.addColorStop(Qe.stop,xn(Qe.color))}),i.path(Q),i.ctx.fillStyle=we,ae!==ee?(de=n.bounds.left+.5*n.bounds.width,me=n.bounds.top+.5*n.bounds.height,pe=ee/ae,he=1/pe,i.ctx.save(),i.ctx.translate(de,me),i.ctx.transform(1,0,0,pe,0,0),i.ctx.translate(-de,-me),i.ctx.fillRect(D,he*(K-me)+me,j,X*he),i.ctx.restore()):i.ctx.fill())),ie.label=6;case 6:return r--,[2]}})},i=this,o=0,l=n.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return o<l.length?(c=l[o],[5,s(c)]):[3,4];case 2:h.sent(),h.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return rr(this,void 0,void 0,function(){return Dn(this,function(i){return this.path(KI(s,r)),this.ctx.fillStyle=xn(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,i){return rr(this,void 0,void 0,function(){var o,l;return Dn(this,function(c){switch(c.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return c.sent(),[2];case 2:return o=j7(i,s),this.path(o),this.ctx.fillStyle=xn(n),this.ctx.fill(),l=D7(i,s),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return rr(this,void 0,void 0,function(){var r,s,i,o,l,c,h,m,g=this;return Dn(this,function(y){switch(y.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!ro(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=Y7(Tl(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),ro(r.backgroundColor)||(this.ctx.fillStyle=xn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:y.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(B){g.ctx.save();var b=Eg(n.curves),x=B.inset?0:q7,S=R7(b,-x+(B.inset?1:-1)*B.spread.number,(B.inset?1:-1)*B.spread.number,B.spread.number*(B.inset?-2:2),B.spread.number*(B.inset?-2:2));B.inset?(g.path(b),g.ctx.clip(),g.mask(S)):(g.mask(b),g.ctx.clip(),g.path(S)),g.ctx.shadowOffsetX=B.offsetX.number+x,g.ctx.shadowOffsetY=B.offsetY.number,g.ctx.shadowColor=xn(B.color),g.ctx.shadowBlur=B.blur.number,g.ctx.fillStyle=B.inset?xn(B.color):"rgba(0,0,0,1)",g.ctx.fill(),g.ctx.restore()}),y.label=2;case 2:l=0,c=0,h=i,y.label=3;case 3:return c<h.length?(m=h[c],m.style!==0&&!ro(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,l,n.curves,2)]:[3,11]):[3,13];case 4:return y.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,l,n.curves,3)];case 6:return y.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,l,n.curves)];case 8:return y.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,l,n.curves)];case 10:y.sent(),y.label=11;case 11:l++,y.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,i,o){return rr(this,void 0,void 0,function(){var l,c,h,m,g,y,B,b,x,S,I,E,U,M,H,O,H,O;return Dn(this,function(T){return this.ctx.save(),l=O7(i,s),c=KI(i,s),o===2&&(this.path(c),this.ctx.clip()),rs(c[0])?(h=c[0].start.x,m=c[0].start.y):(h=c[0].x,m=c[0].y),rs(c[1])?(g=c[1].end.x,y=c[1].end.y):(g=c[1].x,y=c[1].y),s===0||s===2?B=Math.abs(h-g):B=Math.abs(m-y),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),b=r<3?r*3:r*2,x=r<3?r*2:r,o===3&&(b=r,x=r),S=!0,B<=b*2?S=!1:B<=b*2+x?(I=B/(2*b+x),b*=I,x*=I):(E=Math.floor((B+x)/(b+x)),U=(B-E*b)/(E-1),M=(B-(E+1)*b)/E,x=M<=0||Math.abs(x-U)<Math.abs(x-M)?U:M),S&&(o===3?this.ctx.setLineDash([0,b+x]):this.ctx.setLineDash([b,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=xn(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(rs(c[0])&&(H=c[3],O=c[0],this.ctx.beginPath(),this.formatPath([new ye(H.end.x,H.end.y),new ye(O.start.x,O.start.y)]),this.ctx.stroke()),rs(c[1])&&(H=c[1],O=c[2],this.ctx.beginPath(),this.formatPath([new ye(H.end.x,H.end.y),new ye(O.start.x,O.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return rr(this,void 0,void 0,function(){var r;return Dn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=xn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=L7(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(qF),$7=function(t){return t instanceof kF||t instanceof SF?!0:t instanceof eB&&t.type!==Bg&&t.type!==_g},Y7=function(t,e){switch(t){case 0:return Eg(e);case 2:return N7(e);case 1:default:return Ig(e)}},X7=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Z7=["-apple-system","system-ui"],J7=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return Z7.indexOf(e)===-1}):t},eq=function(t){Qs(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return rr(this,void 0,void 0,function(){var r,s;return Dn(this,function(i){switch(i.label){case 0:return r=Av(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,tq(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=xn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(qF),tq=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},nq=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,wf([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,wf([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,wf([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,wf([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),rq=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new nq({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new B7(this,e)}return t.instanceCount=1,t}(),WF=function(t,e){return e===void 0&&(e={}),sq(t,e)};typeof window<"u"&&MF.setContext(window);var sq=function(t,e){return rr(void 0,void 0,void 0,function(){var n,r,s,i,o,l,c,h,m,g,y,B,b,x,S,I,E,U,M,H,T,O,T,C,N,Q,D,K,j,X,J,oe,Ae,G,ae,ee,we,de,me,pe;return Dn(this,function(he){switch(he.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(C=e.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},i=qw({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},s),o={windowWidth:(K=e.windowWidth)!==null&&K!==void 0?K:r.innerWidth,windowHeight:(j=e.windowHeight)!==null&&j!==void 0?j:r.innerHeight,scrollX:(X=e.scrollX)!==null&&X!==void 0?X:r.pageXOffset,scrollY:(J=e.scrollY)!==null&&J!==void 0?J:r.pageYOffset},l=new sa(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new rq(i,l),h=(oe=e.foreignObjectRendering)!==null&&oe!==void 0?oe:!1,m={allowTaint:(Ae=e.allowTaint)!==null&&Ae!==void 0?Ae:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:h,copyStyles:h},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),g=new MI(c,t,m),y=g.clonedReferenceElement,y?[4,g.toIFrame(n,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return B=he.sent(),b=tB(y)||a7(y)?RK(y.ownerDocument):Up(c,y),x=b.width,S=b.height,I=b.left,E=b.top,U=iq(c,y,e.backgroundColor),M={canvas:e.canvas,backgroundColor:U,scale:(ae=(G=e.scale)!==null&&G!==void 0?G:r.devicePixelRatio)!==null&&ae!==void 0?ae:1,x:((ee=e.x)!==null&&ee!==void 0?ee:0)+I,y:((we=e.y)!==null&&we!==void 0?we:0)+E,width:(de=e.width)!==null&&de!==void 0?de:Math.ceil(x),height:(me=e.height)!==null&&me!==void 0?me:Math.ceil(S)},h?(c.logger.debug("Document cloned, using foreign object rendering"),T=new eq(c,M),[4,T.render(y)]):[3,3];case 2:return H=he.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+I+","+E+" with size "+x+"x"+S+" using computed rendering"),c.logger.debug("Starting DOM parsing"),O=FF(c,y),U===O.styles.backgroundColor&&(O.styles.backgroundColor=Yi.TRANSPARENT),c.logger.debug("Starting renderer for element at "+M.x+","+M.y+" with size "+M.width+"x"+M.height),T=new W7(c,M),[4,T.render(O)];case 4:H=he.sent(),he.label=5;case 5:return(!((pe=e.removeContainer)!==null&&pe!==void 0)||pe)&&(MI.destroy(B)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,H]}})})},iq=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?od(t,getComputedStyle(r.documentElement).backgroundColor):Yi.TRANSPARENT,i=r.body?od(t,getComputedStyle(r.body).backgroundColor):Yi.TRANSPARENT,o=typeof n=="string"?od(t,n):n===null?Yi.TRANSPARENT:4294967295;return e===r.documentElement?ro(s)?ro(i)?o:i:s:o};const aq={BRONZE:{gradient:"from-amber-600 via-amber-500 to-orange-600",accent:"bg-amber-400",icon:""},SILVER:{gradient:"from-gray-400 via-gray-300 to-slate-400",accent:"bg-gray-300",icon:""},GOLD:{gradient:"from-yellow-400 via-amber-400 to-yellow-500",accent:"bg-yellow-300",icon:""},PLATINUM:{gradient:"from-purple-500 via-indigo-500 to-purple-600",accent:"bg-purple-400",icon:""}};function oq({profile:t,isOpen:e,onClose:n}){const r=R.useRef(null),[s,i]=R.useState(!1),[o,l]=R.useState(!1);if(!e)return null;const c=(t==null?void 0:t.currentTier)||"BRONZE",h=aq[c],m=async()=>{var B;if(r.current){i(!0);try{const b=await WF(r.current,{scale:2,backgroundColor:null,useCORS:!0}),x=document.createElement("a");x.download=`soca-passport-${((B=t==null?void 0:t.displayName)==null?void 0:B.replace(/\s+/g,"-").toLowerCase())||"card"}.png`,x.href=b.toDataURL("image/png"),x.click()}catch(b){console.error("Error generating card:",b),alert("Could not download card. Please try again.")}finally{i(!1)}}},g=async()=>{const B={title:"My Soca Passport",text:`I'm a ${c} tier carnivalist with ${(t==null?void 0:t.totalCredits)||0} credits! Check out my Soca Passport on Carnival Planner.`,url:window.location.origin};if(navigator.share)try{await navigator.share(B)}catch(b){b.name!=="AbortError"&&console.error("Share error:",b)}else y()},y=async()=>{try{await navigator.clipboard.writeText(window.location.origin),l(!0),setTimeout(()=>l(!1),2e3)}catch(B){console.error("Copy error:",B)}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fadeIn",children:A.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden",children:[A.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-20",children:A.jsx(hs,{className:"w-5 h-5"})}),A.jsxs("div",{className:"p-6",children:[A.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 text-center",children:"Your Passport Card"}),A.jsxs("div",{ref:r,className:`relative bg-gradient-to-br ${h.gradient} rounded-2xl p-6 text-white shadow-xl overflow-hidden aspect-[1.586/1]`,children:[A.jsxs("div",{className:"absolute inset-0 opacity-10",children:[A.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 border-2 border-white rounded-full -translate-x-1/2 -translate-y-1/2"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 border-2 border-white rounded-full translate-x-1/4 translate-y-1/4"}),A.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 border border-white/50 rounded-full -translate-x-1/2 -translate-y-1/2"})]}),A.jsxs("div",{className:"relative flex items-center justify-between mb-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm text-xl",children:h.icon}),A.jsxs("div",{children:[A.jsx("p",{className:"text-[10px] font-medium text-white/70 uppercase tracking-wider",children:"Soca Passport"}),A.jsxs("p",{className:"text-sm font-bold",children:[c," TIER"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-2xl font-black",children:(t==null?void 0:t.totalCredits)||0}),A.jsx("p",{className:"text-[10px] text-white/70 uppercase",children:"Credits"})]})]}),A.jsx("div",{className:"relative mb-4",children:A.jsx("p",{className:"text-xl font-black truncate",children:(t==null?void 0:t.displayName)||"Carnival Lover"})}),A.jsxs("div",{className:"relative grid grid-cols-3 gap-2 mb-4",children:[A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(Us,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:(t==null?void 0:t.totalEvents)||0}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Events"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(kr,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.countriesVisited)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Countries"})]}),A.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-2 text-center",children:[A.jsx(id,{className:"w-4 h-4 mx-auto mb-1 opacity-80"}),A.jsx("p",{className:"text-lg font-bold",children:((t==null?void 0:t.unlockedAchievements)||[]).length}),A.jsx("p",{className:"text-[8px] uppercase opacity-70",children:"Badges"})]})]}),A.jsxs("div",{className:"relative flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(Ec,{className:"w-3 h-3 opacity-70"}),A.jsx("span",{className:"text-[10px] font-medium opacity-70",children:"Carnival Planner"})]}),A.jsx("p",{className:"text-[10px] font-mono opacity-50",children:new Date().getFullYear()})]})]})]}),A.jsxs("div",{className:"p-6 pt-0 grid grid-cols-2 gap-3",children:[A.jsxs("button",{onClick:m,disabled:s,className:"flex items-center justify-center gap-2 py-3 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-bold transition-colors disabled:opacity-50",children:[s?A.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):A.jsx(jc,{className:"w-5 h-5"}),"Download"]}),A.jsx("button",{onClick:g,className:"flex items-center justify-center gap-2 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-bold transition-colors",children:o?A.jsxs(A.Fragment,{children:[A.jsx(wh,{className:"w-5 h-5 text-green-500"}),"Copied!"]}):A.jsxs(A.Fragment,{children:[A.jsx(DU,{className:"w-5 h-5"}),"Share"]})})]}),A.jsx("p",{className:"px-6 pb-4 text-xs text-gray-400 text-center",children:"Note: For best results, download requires the html2canvas library."})]})})}const uy={BRONZE:{bg:"bg-gradient-to-r from-amber-600 to-amber-700",text:"text-amber-100",border:"border-amber-500"},SILVER:{bg:"bg-gradient-to-r from-gray-400 to-gray-500",text:"text-gray-100",border:"border-gray-400"},GOLD:{bg:"bg-gradient-to-r from-yellow-400 to-amber-500",text:"text-yellow-100",border:"border-yellow-400"},PLATINUM:{bg:"bg-gradient-to-r from-purple-500 to-indigo-600",text:"text-purple-100",border:"border-purple-400"}},Aq={1:{icon:pg,color:"text-yellow-400",bg:"bg-yellow-400/20"},2:{icon:ME,color:"text-gray-300",bg:"bg-gray-400/20"},3:{icon:ME,color:"text-amber-600",bg:"bg-amber-600/20"}};function lq({user:t,onBack:e}){const[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,l]=R.useState(null),[c,h]=R.useState(null);return R.useEffect(()=>{(async()=>{var g;i(!0),l(null);try{const y=on(Ft),b=await Dt(y,"getPassportLeaderboard")({limit:50});if(r(b.data.leaderboard||[]),t){const x=(g=b.data.leaderboard)==null?void 0:g.findIndex(S=>S.userId===t.uid);x!==-1&&h(x+1)}}catch(y){console.error("Error loading leaderboard:",y),l(y.message)}finally{i(!1)}})()},[t]),s?A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] animate-pulse",children:[A.jsx("div",{className:"p-4 bg-purple-100 dark:bg-purple-900/30 rounded-full mb-4",children:A.jsx(Et,{className:"w-8 h-8 text-purple-500 animate-spin"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading leaderboard..."})]}):o?A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[A.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full mb-4",children:A.jsx(id,{className:"w-8 h-8 text-red-500"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Unable to Load Leaderboard"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:o}),A.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Go Back"})]}):A.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:A.jsx(V_,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[A.jsx(id,{className:"w-6 h-6 text-yellow-500"}),"Leaderboard"]}),A.jsx("p",{className:"text-sm text-gray-500",children:"Top Carnival Passport Holders"})]}),c&&A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-sm text-gray-500",children:"Your Rank"}),A.jsxs("p",{className:"text-2xl font-black text-purple-500",children:["#",c]})]})]}),n.length>=3&&A.jsxs("div",{className:"flex items-end justify-center gap-2 mb-6 px-4",children:[A.jsxs("div",{className:"flex-1 max-w-[120px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-gray-200 to-gray-300 dark:from-gray-600 dark:to-gray-700 rounded-t-2xl p-3 text-center relative",children:[A.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",children:"2"}),A.jsx("div",{className:"w-12 h-12 mx-auto mb-2 mt-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden",children:n[1].profilePictureUrl?A.jsx("img",{src:n[1].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(ei,{className:"w-6 h-6 text-gray-400"})}),A.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 truncate",children:n[1].displayName}),A.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:n[1].totalCredits})]}),A.jsx("div",{className:"h-16 bg-gray-300 dark:bg-gray-600 rounded-b-lg"})]}),A.jsxs("div",{className:"flex-1 max-w-[140px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-yellow-300 to-amber-400 dark:from-yellow-500 dark:to-amber-600 rounded-t-2xl p-4 text-center relative shadow-lg",children:[A.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:A.jsx(pg,{className:"w-8 h-8 text-yellow-500 drop-shadow-lg"})}),A.jsx("div",{className:"w-14 h-14 mx-auto mb-2 mt-4 rounded-full bg-white/80 dark:bg-gray-800 flex items-center justify-center overflow-hidden ring-4 ring-yellow-400/50",children:n[0].profilePictureUrl?A.jsx("img",{src:n[0].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(ei,{className:"w-7 h-7 text-gray-400"})}),A.jsx("p",{className:"text-sm font-bold text-amber-900 dark:text-white truncate",children:n[0].displayName}),A.jsx("p",{className:"text-xl font-black text-amber-800 dark:text-yellow-100",children:n[0].totalCredits}),A.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${uy[n[0].currentTier||"BRONZE"].bg} ${uy[n[0].currentTier||"BRONZE"].text}`,children:n[0].currentTier})]}),A.jsx("div",{className:"h-24 bg-yellow-400 dark:bg-yellow-600 rounded-b-lg"})]}),A.jsxs("div",{className:"flex-1 max-w-[120px]",children:[A.jsxs("div",{className:"bg-gradient-to-b from-amber-200 to-amber-300 dark:from-amber-700 dark:to-amber-800 rounded-t-2xl p-3 text-center relative",children:[A.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",children:"3"}),A.jsx("div",{className:"w-12 h-12 mx-auto mb-2 mt-4 rounded-full bg-amber-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden",children:n[2].profilePictureUrl?A.jsx("img",{src:n[2].profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(ei,{className:"w-6 h-6 text-gray-400"})}),A.jsx("p",{className:"text-xs font-medium text-amber-800 dark:text-amber-100 truncate",children:n[2].displayName}),A.jsx("p",{className:"text-lg font-bold text-amber-900 dark:text-white",children:n[2].totalCredits})]}),A.jsx("div",{className:"h-10 bg-amber-400 dark:bg-amber-700 rounded-b-lg"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[A.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-2",children:[A.jsx(VU,{className:"w-5 h-5 text-purple-500"}),A.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:"All Rankings"}),A.jsxs("span",{className:"text-sm text-gray-400",children:["(",n.length," users)"]})]}),A.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:n.map((m,g)=>{const y=g+1,B=t&&m.userId===t.uid,b=Aq[y],x=uy[m.currentTier||"BRONZE"];return A.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${B?"bg-purple-50 dark:bg-purple-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[A.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold ${b?`${b.bg} ${b.color}`:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:b?A.jsx(b.icon,{className:"w-5 h-5"}):A.jsx("span",{className:"text-sm",children:y})}),A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:m.profilePictureUrl?A.jsx("img",{src:m.profilePictureUrl,alt:"",className:"w-full h-full object-cover"}):A.jsx(ei,{className:"w-5 h-5 text-gray-400"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs("p",{className:`font-medium truncate ${B?"text-purple-600 dark:text-purple-400":"text-gray-800 dark:text-white"}`,children:[m.displayName,B&&A.jsx("span",{className:"ml-1 text-xs",children:"(You)"})]}),A.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${x.bg} ${x.text}`,children:m.currentTier})]}),A.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(yg,{className:"w-3 h-3"}),m.totalEvents," events"]}),A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(H_,{className:"w-3 h-3"}),m.achievementCount," badges"]})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m.totalCredits.toLocaleString()}),A.jsx("p",{className:"text-xs text-gray-400",children:"credits"})]})]},m.userId)})}),n.length===0&&A.jsxs("div",{className:"p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:A.jsx(id,{className:"w-8 h-8 text-gray-400"})}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No rankings yet"}),A.jsx("p",{className:"text-sm text-gray-400",children:"Be the first to check in and earn credits!"})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl p-5 text-white text-center",children:[A.jsx(D6,{className:"w-8 h-8 mx-auto mb-2"}),A.jsx("h3",{className:"font-bold text-lg",children:"Keep the vibes going!"}),A.jsx("p",{className:"text-white/80 text-sm",children:"Check in to more events to climb the leaderboard"})]})]})}function cq({user:t,profile:e,onBack:n}){const[r,s]=R.useState([]),[i,o]=R.useState(!0),[l,c]=R.useState(null),[h,m]=R.useState(null),[g,y]=R.useState(null);R.useEffect(()=>{B()},[]);const B=async()=>{o(!0);try{const x=on(Ft),I=await Dt(x,"getAvailableRewards")();s(I.data.rewards)}catch(x){console.error("Failed to load rewards:",x),x.message.includes("internal")||x.message.includes("offline")?s([{id:"1",title:"Free Drink",cost:500,description:"Redeem for a rum punch",promoterId:"demo"},{id:"2",title:"VIP Upgrade",cost:1e3,description:"Skip the line access",promoterId:"demo"},{id:"3",title:"Band Discount",cost:2e3,description:"10% off costume",promoterId:"demo"}]):c("Failed to load rewards. Please try again.")}finally{o(!1)}},b=async x=>{if(!(e.totalCredits<x.cost)){m(x.id),c(null);try{const S=on(Ft),E=await Dt(S,"redeemPromoterReward")({rewardId:x.id});y({title:x.title,code:E.data.redemptionCode}),B()}catch(S){console.error("Redemption failed:",S),S.message.includes("internal")||S.message.includes("offline")?y({title:x.title,code:"MOCK-"+Math.random().toString(36).substr(2,6).toUpperCase()}):c(S.message)}finally{m(null)}}};return g?A.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-in fade-in zoom-in duration-300",children:[A.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:A.jsx(N6,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),A.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Reward Redeemed!"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["You currently have access to ",A.jsx("strong",{children:g.title})]}),A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-xl mb-6 w-full max-w-sm",children:[A.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Redemption Code"}),A.jsx("p",{className:"text-3xl font-mono font-bold text-teal-600 dark:text-teal-400 tracking-widest",children:g.code})]}),A.jsxs("div",{className:"flex gap-3 w-full max-w-sm",children:[A.jsx("button",{onClick:()=>{y(null),n()},className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors",children:"Close"}),A.jsx("button",{onClick:()=>y(null),className:"flex-1 px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-medium transition-colors",children:"Redeem Another"})]})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[A.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:""}),A.jsx("h3",{className:"text-lg font-bold",children:"Rewards Market"}),A.jsx("div",{className:"ml-auto bg-teal-50 dark:bg-teal-900/20 px-3 py-1 rounded-full",children:A.jsxs("span",{className:"text-sm font-medium text-teal-700 dark:text-teal-300",children:[(e==null?void 0:e.totalCredits)||0," Credits"]})})]}),l&&A.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm flex items-center gap-2",children:[A.jsx(Ip,{className:"w-4 h-4"}),l]}),i?A.jsx("div",{className:"flex justify-center p-12",children:A.jsx(Et,{className:"w-8 h-8 text-teal-600 animate-spin"})}):r.length===0?A.jsxs("div",{className:"text-center py-12 text-gray-500",children:[A.jsx(ec,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),A.jsx("p",{children:"No rewards available right now."})]}):A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.map(x=>{const S=((e==null?void 0:e.totalCredits)||0)>=x.cost;return A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsx("h4",{className:"font-bold text-lg",children:x.title}),A.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-medium",children:[x.cost," pts"]})]}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex-1",children:x.description}),A.jsx("button",{onClick:()=>b(x),disabled:!S||h===x.id,className:`w-full py-2 rounded-lg font-medium transition-colors flex items-center justify-center gap-2
                                        ${S?"bg-teal-600 hover:bg-teal-700 text-white shadow-sm hover:shadow":"bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed"}
                                    `,children:h===x.id?A.jsx(Et,{className:"w-4 h-4 animate-spin"}):A.jsxs(A.Fragment,{children:[A.jsx(Us,{className:"w-4 h-4"}),S?"Redeem Reward":"Insufficient Credits"]})})]},x.id)})})]})}function uq({user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s}){const[i,o]=R.useState("home"),[l,c]=R.useState(!1),[h,m]=R.useState(!1),[g,y]=R.useState(null),[B,b]=R.useState(0);R.useEffect(()=>{if(!t)return;if(s){y({totalCredits:1250,currentTier:"GOLD",tierProgress:{nextTier:"PLATINUM",creditsToNextTier:750,progressPercent:62},totalEvents:8,countriesVisited:["TT","BB"],unlockedAchievements:["first-checkin","island-hopper"],achievementPoints:150,achievementDefinitions:{}});return}(async()=>{try{const E=on(Ft),M=await Dt(E,"getPassportProfile")();y(M.data)}catch(E){console.error("Error loading passport profile:",E)}})()},[t,B,s]);const x=I=>{c(!1),b(E=>E+1)},S=()=>{switch(i){case"stamps":return A.jsx(FK,{user:t,onBack:()=>o("home")});case"achievements":return A.jsx(PK,{profile:g,onBack:()=>o("home")});case"leaderboard":return A.jsx(lq,{user:t,onBack:()=>o("home")});case"rewards":return A.jsx(cq,{user:t,profile:g,onBack:()=>o("home")});default:return A.jsx(NK,{user:t,isPremium:e,activeCarnivalId:n,activePlanId:r,isDemoMode:s,onOpenCheckin:()=>c(!0),onViewStamps:()=>o("stamps"),onViewAchievements:()=>o("achievements"),onViewLeaderboard:()=>o("leaderboard"),onViewRewards:()=>o("rewards")},B)}};return A.jsxs("div",{className:"min-h-[500px]",children:[i==="home"&&A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"p-2.5 bg-teal-100 dark:bg-teal-900/30 rounded-xl",children:A.jsx(Tp,{className:"w-6 h-6 text-teal-600 dark:text-teal-400"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Soca Passport"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Your carnival journey"})]})]}),A.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-medium transition-colors",children:[A.jsx(DU,{className:"w-4 h-4"}),"Share"]})]}),S(),A.jsx(UK,{isOpen:l,onClose:()=>c(!1),onSuccess:x}),A.jsx(oq,{profile:g,isOpen:h,onClose:()=>m(!1)})]})}function zI({user:t,activeCarnivalId:e,carnivalData:n,scrapedEvents:r=[],squadMembers:s=[],budgetTotal:i=0,budgetSpent:o=0,isPremium:l,onAction:c}){var B;const h=R.useMemo(()=>{if(e){const I={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[e]||e.replace(/-/g," ");return n.find(U=>U.name.toLowerCase().includes(I.toLowerCase())||I.toLowerCase().includes(U.name.split("(")[0].trim().toLowerCase()))||n[0]}const b=new Date,x=[...n].sort((S,I)=>new Date(S.date)-new Date(I.date));return x.find(S=>new Date(S.date)>=b)||x[0]},[e,n]),[m,g]=R.useState({days:0,hours:0});R.useEffect(()=>{if(!h)return;const b=()=>{const E=new Date(h.date+"T00:00:00")-new Date;if(E>0){const U=Math.ceil(E/864e5),M=Math.floor(E/(1e3*60*60)%24);g({days:U,hours:M})}else g({days:0,hours:0})};b();const x=setInterval(b,6e4);return()=>clearInterval(x)},[h]);const y=R.useMemo(()=>r.length>0?r.slice(0,5):null,[r]);return A.jsxs("div",{className:"space-y-6 mb-8 animate-fadeIn",children:[A.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 shadow-2xl text-white",children:[A.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-pink-500/20 rounded-full blur-3xl -ml-10 -mb-10 animate-pulse"}),A.jsxs("div",{className:"relative z-10 p-6 sm:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"px-2 py-1 rounded-full bg-white/20 backdrop-blur-sm text-[10px] font-bold uppercase tracking-widest border border-white/10",children:e?"CURRENT MISSION":"UP NEXT"}),l&&A.jsxs("span",{className:"flex items-center px-2 py-1 rounded-full bg-yellow-400/20 text-yellow-300 text-[10px] font-bold uppercase tracking-widest",children:[A.jsx(Gd,{className:"w-3 h-3 mr-1"})," Premium"]})]}),A.jsx("h2",{className:"text-3xl sm:text-4xl font-black tracking-tight leading-none mb-1",children:((B=h==null?void 0:h.name)==null?void 0:B.split("(")[0].trim())||"Carnival"}),A.jsx("p",{className:"text-white/80 text-sm font-medium",children:"Get ready for the road."})]}),A.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:m.days}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Days"})]}),A.jsx("div",{className:"h-8 w-px bg-white/20"}),A.jsxs("div",{className:"text-center",children:[A.jsx("span",{className:"block text-2xl sm:text-3xl font-black",children:m.hours}),A.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"Hrs"})]})]})]}),y&&A.jsxs("div",{className:"mt-8 flex items-center gap-3 bg-black/20 rounded-xl p-2.5 backdrop-blur-sm overflow-hidden",children:[A.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 px-2 py-0.5 bg-red-500 rounded text-[10px] font-bold uppercase animate-pulse",children:[A.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Live"]}),A.jsx("div",{className:"flex-1 overflow-hidden whitespace-nowrap",children:A.jsx("div",{className:"inline-block animate-marquee text-xs font-medium",children:y.map((b,x)=>A.jsxs("span",{className:"mr-8",children:[" ",A.jsx("span",{className:"font-bold text-pink-200",children:b.title}),b.venue&&A.jsxs("span",{className:"opacity-75",children:[" @ ",b.venue]}),b.price&&A.jsxs("span",{className:"text-green-300 ml-1",children:["($",b.price,")"]})]},b.id||x))})})]})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[A.jsxs("div",{onClick:()=>c("Budget"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:A.jsx(Sp,{className:"w-5 h-5"})}),A.jsx(fm,{className:"w-4 h-4 text-gray-300 group-hover:text-blue-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Budget Spent"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:["$",o.toLocaleString(),A.jsxs("span",{className:"text-xs text-gray-400 font-normal ml-1",children:["/ $",i.toLocaleString()]})]}),i>0&&A.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full mt-2",children:A.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.min(o/i*100,100)}%`}})})]}),A.jsxs("div",{onClick:()=>c("Squad"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg text-green-600 dark:text-green-400",children:A.jsx(ir,{className:"w-5 h-5"})}),A.jsx(fm,{className:"w-4 h-4 text-gray-300 group-hover:text-green-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Squad Online"}),A.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:[s.length+1,A.jsx("span",{className:"text-xs text-gray-400 font-normal ml-1",children:"members"})]}),A.jsx("div",{className:"flex -space-x-2 mt-2",children:[...Array(Math.min(s.length+1,4))].map((b,x)=>A.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-600 border-2 border-white dark:border-gray-800"},x))})]}),A.jsxs("div",{onClick:()=>c("Map"),className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-md transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600 dark:text-purple-400",children:A.jsx(kr,{className:"w-5 h-5"})}),A.jsx(fm,{className:"w-4 h-4 text-gray-300 group-hover:text-purple-500 transition-colors"})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Live Events"}),A.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white mt-0.5",children:r.length||"30+"}),A.jsx("p",{className:"text-[10px] text-purple-500 font-bold mt-1",children:" View Map"})]}),A.jsxs("div",{onClick:()=>c("Passport"),className:"bg-gradient-to-br from-teal-500 to-emerald-600 p-4 rounded-2xl shadow-sm shadow-teal-500/20 cursor-pointer hover:shadow-md hover:scale-[1.02] transition-all group",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("div",{className:"p-2 bg-white/20 rounded-lg text-white",children:A.jsx(Us,{className:"w-5 h-5"})}),A.jsx(K_,{className:"w-4 h-4 text-white/70 group-hover:text-white transition-colors"})]}),A.jsx("p",{className:"text-xs text-teal-100 font-medium",children:"Identity"}),A.jsx("p",{className:"text-lg font-bold text-white mt-0.5",children:"Passport"}),A.jsx("p",{className:"text-[10px] text-white/80 font-bold mt-1",children:"Launch App"})]})]})]})}function dq({onClose:t}){const e=[{icon:UA,title:"Plan Your Schedule",desc:"Add fetes, mas, and events to your itinerary"},{icon:Sp,title:"Track Your Budget",desc:"Keep tabs on costume costs, accommodations, and more"},{icon:ir,title:"Squad Up",desc:"Create or join a squad to share plans with friends"},{icon:kr,title:"Map Your Adventure",desc:"Pin venues and see event locations (Premium)"},{icon:Cc,title:"Share Memories",desc:"Upload photos to your private media vault (Premium)"},{icon:FA,title:"Vibes Player",desc:"Stream soca playlists while you plan"}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 p-6 rounded-t-2xl text-white text-center",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:A.jsx(hs,{className:"w-6 h-6"})}),A.jsx("h2",{className:"text-2xl font-black mb-1",children:"Welcome to Carnival Planner! "}),A.jsx("p",{className:"text-white/90 text-sm",children:"Your all-in-one Caribbean carnival companion"})]}),A.jsxs("div",{className:"p-6 space-y-4",children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm text-center mb-4",children:"Here's what you can do:"}),A.jsx("div",{className:"grid gap-3",children:e.map((n,r)=>A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[A.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg text-white flex-shrink-0",children:A.jsx(n.icon,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-sm",children:n.title}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:n.desc})]})]},r))})]}),A.jsxs("div",{className:"p-6 pt-0",children:[A.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-bold rounded-xl hover:opacity-90 transition-opacity shadow-lg shadow-purple-500/30",children:"Let's Go! "}),A.jsx("p",{className:"text-center text-xs text-gray-400 mt-3",children:'Tap "Help" in the footer anytime for guidance'})]})]})})}function hq({onClose:t}){const e=[{title:"Getting Started",items:[{icon:"",text:"Select your carnival from the dropdown at the top"},{icon:"",text:"Use the tabs to add budget items, schedule events, and more"},{icon:"",text:"Everything saves automatically to your account"}]},{title:"Free Features",items:[{icon:UA,text:"Schedule  Add fetes, mas bands, and events"},{icon:Sp,text:"Budget  Track all your carnival expenses"},{icon:ir,text:"Squad  Create/join a group and chat with friends"},{icon:FU,text:'Voice Add  Say "Add Tribe Friday 3pm" to quick-add events'},{icon:FA,text:"Vibes Player  Stream soca playlists while planning"}]},{title:"Premium Features",items:[{icon:kr,text:"Map  Pin venues and view event locations"},{icon:Cc,text:"Media Vault  Store and share carnival photos"},{icon:"",text:"Live Events  Daily-updated fete listings from ticket sites"},{icon:"",text:"Road Mode  Offline mesh chat via Bitchat"}]},{title:"Squad Mode",items:[{icon:"",text:"Create a squad to get a 6-digit share code"},{icon:"",text:"Friends join with your code to sync plans"},{icon:"",text:"Chat with your squad and the AI Carnival Concierge"},{icon:"",text:"Leaders can remove members if needed"}]}];return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-100 dark:border-gray-800 p-4 flex items-center justify-between rounded-t-2xl",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(M6,{className:"w-6 h-6 text-purple-500"}),A.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"How to Use Carnival Planner"})]}),A.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(hs,{className:"w-5 h-5"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[e.map((n,r)=>A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-purple-600 dark:text-purple-400 text-sm uppercase tracking-wider mb-3",children:n.title}),A.jsx("div",{className:"space-y-2",children:n.items.map((s,i)=>A.jsxs("div",{className:"flex items-start gap-3 p-2",children:[A.jsx("span",{className:"text-lg flex-shrink-0",children:typeof s.icon=="string"?s.icon:A.jsx(s.icon,{className:"w-5 h-5 text-gray-500"})}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:s.text})]},i))})]},r)),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:[A.jsx("h3",{className:"font-bold text-purple-800 dark:text-purple-300 mb-2",children:" Pro Tips"}),A.jsxs("ul",{className:"text-sm text-purple-700 dark:text-purple-400 space-y-1",children:[A.jsx("li",{children:" Use Demo Mode to try all features without signing up"}),A.jsx("li",{children:" Export your itinerary from the Info tab as a backup"}),A.jsx("li",{children:" The AI Concierge in Squad Chat can answer carnival questions"})]})]})]}),A.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 p-4 rounded-b-2xl",children:A.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Got it!"})})]})})}const qI={trinidad:"",jamaica:"",barbados:"",grenada:"",stlucia:"",antigua:"",bahamas:"",bermuda:"",stmaarten:"","stkitts-sugar-mas":"",nevis:"",dominica:"",vincymas:"",stthomas:"",stcroix:"",guyana:"",miami:"",atlanta:"","ny-labor-day":"",hollywood:"",tampa:"",toronto:"",nottinghill:"",japan:"","cayman-batabano":"",tobago:"",caymas:""},fq={trinidad:"Trinidad",jamaica:"Jamaica",barbados:"Crop Over",grenada:"Spicemas",stlucia:"St. Lucia",antigua:"Antigua",miami:"Miami",toronto:"Caribana",nottinghill:"Notting Hill",vincymas:"Vincy Mas",stmaarten:"St. Maarten",atlanta:"Atlanta","ny-labor-day":"NY Labor Day",bahamas:"Bahamas",bermuda:"Bermuda"};function mq({profileData:t,isOwnProfile:e,onEdit:n,currentUser:r}){const[s,i]=R.useState(!1);if(!t)return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-gray-500 dark:text-gray-400",children:[A.jsx(ei,{className:"w-16 h-16 mb-4 opacity-50"}),A.jsx("p",{className:"text-lg font-medium",children:"Profile not found"}),A.jsx("p",{className:"text-sm",children:"This masquerader hasn't created a public profile yet."})]});const{displayName:o="Carnival Lover",username:l,bio:c="",profilePhoto:h,coverPhoto:m,isPublic:g,carnivalHistory:y=[],stats:B={},socialLinks:b={}}=t,x=[...new Set(y.map(S=>S.carnivalId))];return A.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn",children:[A.jsxs("div",{className:"relative h-48 md:h-64 rounded-t-3xl overflow-hidden bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400",children:[m&&A.jsx("img",{src:m,alt:"Cover",className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e&&A.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[A.jsxs("button",{onClick:t.onAccessPromoter,className:"bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-full text-white text-xs font-bold hover:bg-white/30 transition-colors flex items-center gap-1.5",children:[A.jsx(Us,{className:"w-3.5 h-3.5"}),t.isPromoter?"Promoter Dashboard":"Become a Promoter"]}),A.jsx("button",{onClick:n,className:"p-2 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/30 transition-colors",children:A.jsx(RU,{className:"w-5 h-5 text-white"})})]}),A.jsx("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:g?A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-green-500/20 backdrop-blur-md rounded-full text-green-200 text-xs font-medium",children:[A.jsx(z_,{className:"w-3.5 h-3.5"})," Public"]}):A.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-gray-500/20 backdrop-blur-md rounded-full text-gray-200 text-xs font-medium",children:[A.jsx(vh,{className:"w-3.5 h-3.5"})," Private"]})})]}),A.jsxs("div",{className:"relative px-6 pb-6 bg-white dark:bg-gray-800 rounded-b-3xl shadow-lg",children:[A.jsx("div",{className:"absolute -top-16 left-6",children:A.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:h?A.jsx("img",{src:h,alt:o,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(ei,{className:"w-12 h-12 text-white"})})})}),A.jsxs("div",{className:"pt-20 md:pt-6 md:ml-40",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:o}),l&&A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",l]})]}),A.jsxs("div",{className:"flex gap-3",children:[b.instagram&&A.jsx("a",{href:`https://instagram.com/${b.instagram}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-full text-pink-600 dark:text-pink-400 hover:scale-110 transition-transform",children:A.jsx(NU,{className:"w-5 h-5"})}),b.twitter&&A.jsx("a",{href:`https://twitter.com/${b.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full text-blue-500 dark:text-blue-400 hover:scale-110 transition-transform",children:A.jsx(KU,{className:"w-5 h-5"})}),b.tiktok&&A.jsx("a",{href:`https://tiktok.com/@${b.tiktok}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-full text-gray-700 dark:text-gray-300 hover:scale-110 transition-transform",children:A.jsx(FA,{className:"w-5 h-5"})})]})]}),c&&A.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300 max-w-2xl",children:c})]}),A.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl",children:[A.jsx(PU,{className:"w-6 h-6 mx-auto mb-2 text-purple-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carnivals"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl",children:[A.jsx(W6,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Countries"})]}),A.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-2xl",children:[A.jsx(ir,{className:"w-6 h-6 mx-auto mb-2 text-orange-500"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[...new Set(y.map(S=>S.band).filter(Boolean))].length}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Bands"})]})]})]}),y.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(UA,{className:"w-5 h-5 text-purple-500"}),"Carnival History"]}),A.jsx("div",{className:"grid gap-3",children:y.sort((S,I)=>(I.year||0)-(S.year||0)).map((S,I)=>A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[A.jsx("div",{className:"text-3xl",children:qI[S.carnivalId]||""}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[fq[S.carnivalId]||S.carnivalId,S.year&&A.jsx("span",{className:"text-gray-400 font-normal ml-2",children:S.year})]}),S.band&&A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[S.band,S.section&&A.jsxs("span",{className:"ml-1",children:[" ",S.section]})]})]})]},I))})]}),x.length>0&&A.jsxs("div",{className:"mt-6",children:[A.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[A.jsx(kr,{className:"w-5 h-5 text-pink-500"}),"Countries Visited"]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:[...new Set(x.map(S=>qI[S]||""))].map((S,I)=>A.jsx("span",{className:"text-4xl hover:scale-125 transition-transform cursor-default",children:S},I))})]})]})}function gq({user:t,currentProfile:e,onSave:n,onClose:r,carnivals:s}){const[i,o]=R.useState(!1),[l,c]=R.useState(!1),[h,m]=R.useState(""),[g,y]=R.useState(""),[B,b]=R.useState(!1),[x,S]=R.useState({displayName:"",username:"",bio:"",isPublic:!1,socialLinks:{instagram:"",twitter:"",tiktok:""}}),[I,E]=R.useState(null),[U,M]=R.useState(null),[H,O]=R.useState(""),[T,C]=R.useState("");R.useEffect(()=>{var X,J,oe;e?(S({displayName:e.displayName||(t==null?void 0:t.displayName)||"",username:e.username||"",bio:e.bio||"",isPublic:e.isPublic||!1,socialLinks:{instagram:((X=e.socialLinks)==null?void 0:X.instagram)||"",twitter:((J=e.socialLinks)==null?void 0:J.twitter)||"",tiktok:((oe=e.socialLinks)==null?void 0:oe.tiktok)||""}}),O(e.profilePhoto||""),C(e.coverPhoto||"")):S(Ae=>({...Ae,displayName:(t==null?void 0:t.displayName)||""}))},[e,t]);const N=async X=>{if(!X)return y(""),!0;if(!/^[a-z0-9_]{3,20}$/.test(X))return y("3-20 chars, lowercase letters, numbers, underscores only"),!1;if((e==null?void 0:e.username)===X)return y(""),!0;b(!0);try{return(await Is(ze(Te,"usernames",X))).exists()?(y("This username is taken"),b(!1),!1):(y(""),b(!1),!0)}catch(oe){return console.error("Error checking username:",oe),b(!1),!0}},Q=X=>{const J=X.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");S(Ae=>({...Ae,username:J}));const oe=setTimeout(()=>N(J),500);return()=>clearTimeout(oe)},D=(X,J)=>{var G;const oe=(G=X.target.files)==null?void 0:G[0];if(!oe)return;if(oe.size>5*1024*1024){m("Image must be under 5MB");return}const Ae=new FileReader;Ae.onload=()=>{J==="profile"?(E(oe),O(Ae.result)):(M(oe),C(Ae.result))},Ae.readAsDataURL(oe)},K=()=>{if(!s)return[];const X=[];return Object.entries(s).forEach(([J,oe])=>{var Ae;(Ae=oe.costume)!=null&&Ae.band&&X.push({carnivalId:J,year:new Date().getFullYear(),band:oe.costume.band,section:oe.costume.section||null})}),X},j=async()=>{if(t&&!(x.username&&!await N(x.username))){c(!0),m("");try{let X=(e==null?void 0:e.profilePhoto)||"",J=(e==null?void 0:e.coverPhoto)||"";if(I){const ee=co(uo,`profiles/${t.uid}/avatar_${Date.now()}`);await Bc(ee,I),X=await bc(ee)}if(U){const ee=co(uo,`profiles/${t.uid}/cover_${Date.now()}`);await Bc(ee,U),J=await bc(ee)}const oe=e==null?void 0:e.username,Ae=x.username;oe&&oe!==Ae&&await gh(ze(Te,"usernames",oe)),Ae&&Ae!==oe&&await Gn(ze(Te,"usernames",Ae),{userId:t.uid,claimedAt:qe.now()});const G=K(),ae={userId:t.uid,displayName:x.displayName||t.displayName||"Carnival Lover",username:x.username||null,bio:x.bio||"",profilePhoto:X,coverPhoto:J,isPublic:x.isPublic,socialLinks:x.socialLinks,carnivalHistory:G,stats:{carnivalsAttended:G.length,countriesVisited:[...new Set(G.map(ee=>ee.carnivalId))].length,bandsPlayedWith:[...new Set(G.map(ee=>ee.band).filter(Boolean))]},updatedAt:qe.now(),...e?{}:{createdAt:qe.now()}};await Gn(ze(Te,"userProfiles",t.uid),ae,{merge:!0}),n==null||n(ae),r==null||r()}catch(X){console.error("Error saving profile:",X),m(X.message||"Failed to save profile")}finally{c(!1)}}};return A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700",children:[A.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Profile"}),A.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:A.jsx(hs,{className:"w-5 h-5 text-gray-500"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"h-32 rounded-2xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:T&&A.jsx("img",{src:T,alt:"Cover",className:"w-full h-full object-cover"})}),A.jsxs("label",{className:"absolute bottom-2 right-2 p-2 bg-white/90 dark:bg-gray-800/90 rounded-full cursor-pointer hover:scale-110 transition-transform shadow-lg",children:[A.jsx(Cc,{className:"w-4 h-4 text-gray-700 dark:text-gray-300"}),A.jsx("input",{type:"file",accept:"image/*",onChange:X=>D(X,"cover"),className:"hidden"})]})]}),A.jsx("div",{className:"flex justify-center -mt-16 relative z-10",children:A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white dark:border-gray-800 shadow-xl overflow-hidden bg-gradient-to-br from-purple-500 to-pink-500",children:H?A.jsx("img",{src:H,alt:"Profile",className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center",children:A.jsx(ei,{className:"w-10 h-10 text-white"})})}),A.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-purple-500 rounded-full cursor-pointer hover:bg-purple-600 transition-colors shadow-lg",children:[A.jsx(Cc,{className:"w-4 h-4 text-white"}),A.jsx("input",{type:"file",accept:"image/*",onChange:X=>D(X,"profile"),className:"hidden"})]})]})}),h&&A.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-sm",children:[A.jsx(Ip,{className:"w-4 h-4 flex-shrink-0"}),h]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Name"}),A.jsx("input",{type:"text",value:x.displayName,onChange:X=>S(J=>({...J,displayName:X.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Your carnival name",maxLength:50})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),A.jsxs("div",{className:"relative",children:[A.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),A.jsx("input",{type:"text",value:x.username,onChange:Q,className:`w-full pl-8 pr-10 py-3 rounded-xl border ${g?"border-red-300 dark:border-red-500":"border-gray-200 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all`,placeholder:"your_username",maxLength:20}),B&&A.jsx(Et,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 animate-spin"})]}),g&&A.jsx("p",{className:"mt-1 text-xs text-red-500",children:g}),A.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Your public profile URL: carnivalplanner.app/profile/",x.username||"username"]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),A.jsx("textarea",{value:x.bio,onChange:X=>S(J=>({...J,bio:X.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-none",placeholder:"Tell the fete world about your carnival journey... ",rows:3,maxLength:200}),A.jsxs("p",{className:"text-xs text-gray-400 text-right",children:[x.bio.length,"/200"]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Social Links"}),A.jsxs("div",{className:"relative",children:[A.jsx(NU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-pink-500"}),A.jsx("input",{type:"text",value:x.socialLinks.instagram,onChange:X=>S(J=>({...J,socialLinks:{...J.socialLinks,instagram:X.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Instagram username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(KU,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-400"}),A.jsx("input",{type:"text",value:x.socialLinks.twitter,onChange:X=>S(J=>({...J,socialLinks:{...J.socialLinks,twitter:X.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"Twitter/X username"})]}),A.jsxs("div",{className:"relative",children:[A.jsx(FA,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-600"}),A.jsx("input",{type:"text",value:x.socialLinks.tiktok,onChange:X=>S(J=>({...J,socialLinks:{...J.socialLinks,tiktok:X.target.value.replace("@","")}})),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:"TikTok username"})]})]}),A.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[x.isPublic?A.jsx(z_,{className:"w-5 h-5 text-green-500"}):A.jsx(vh,{className:"w-5 h-5 text-gray-400"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Public Profile"}),A.jsx("p",{className:"text-xs text-gray-500",children:"Anyone can view your carnival history"})]})]}),A.jsx("button",{onClick:()=>S(X=>({...X,isPublic:!X.isPublic})),className:`relative w-12 h-7 rounded-full transition-colors ${x.isPublic?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:A.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${x.isPublic?"translate-x-5":""}`})})]}),A.jsx("button",{onClick:j,disabled:l||!!g,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):A.jsxs(A.Fragment,{children:[A.jsx(wh,{className:"w-5 h-5"}),"Save Profile"]})})]})]})})}const pq="price_1SsDVdJR9xpdRiXiMw7dGtpC";function yq({user:t,isPremium:e,onExit:n}){const[r,s]=R.useState("overview"),[i,o]=R.useState(null),[l,c]=R.useState([]),[h,m]=R.useState([]),[g,y]=R.useState(!0),[B,b]=R.useState(!1),[x,S]=R.useState(!1),[I,E]=R.useState({title:"",date:"",time:"",location:"",capacity:"",type:"fete",description:""}),[U,M]=R.useState(!1),[H,O]=R.useState(""),[T,C]=R.useState({title:"",cost:"",description:"",quantity:""}),[N,Q]=R.useState(!1);R.useEffect(()=>{D()},[t]);const D=async()=>{y(!0);try{const J=on(Ft),Ae=await Dt(J,"getPromoterStats")();o(Ae.data.stats),c(Ae.data.events),b(Ae.data.isPro||!1);try{const ae=await Dt(J,"getPromoterRewards")();m(ae.data.rewards||[])}catch(G){console.warn("Failed to fetch rewards",G),m([])}}catch(J){console.error("Failed to load promoter data:",J),o({totalCheckins:142,activeEvents:2,totalRevenue:0,todayCheckins:12}),c([{id:"evt-1",title:"Soca Sunset",date:"2026-02-14",checkins:85,capacity:200,status:"active",accessCode:"SUNSET-14"},{id:"evt-2",title:"Cooler Fete",date:"2026-02-20",checkins:57,capacity:500,status:"active",accessCode:"COOLER-20"}])}finally{y(!1)}},K=async J=>{J.preventDefault(),M(!0),O("");const oe=l.filter(Ae=>Ae.status==="active").length;if(!B&&oe>=3){O("Free limit reached (3 events). Upgrade to Pro to create more."),M(!1);return}try{const Ae=on(Ft);await Dt(Ae,"createPromoterEvent")(I),s("events"),D(),E({title:"",date:"",time:"",location:"",capacity:"",type:"fete",description:""})}catch(Ae){console.error("Create event error:",Ae),O(Ae.message||"Failed to create event")}finally{M(!1)}},j=async J=>{J.preventDefault(),Q(!0);try{const oe=on(Ft);await Dt(oe,"createPromoterReward")(T);const ae=await Dt(oe,"getPromoterRewards")();m(ae.data.rewards||[]),C({title:"",cost:"",description:"",quantity:""})}catch(oe){console.warn("Failed to create reward (backend may be offline), using mock:",oe),m([...h,{...T,id:`mock-${Date.now()}`}]),C({title:"",cost:"",description:"",quantity:""})}finally{Q(!1)}},X=async()=>{if(!t){alert("You must be signed in to upgrade.");return}S(!0);try{const J=on(Ft),Ae=await Dt(J,"createCheckoutSession")({priceId:pq,success_url:window.location.origin,cancel_url:window.location.origin}),{data:G}=Ae||{};G&&(G.url||G.checkoutUrl)?window.location.href=G.url||G.checkoutUrl:alert("Unable to start checkout. Please try again.")}catch(J){console.error("Error starting checkout:",J),alert("There was a problem starting your checkout: "+J.message)}finally{S(!1)}};return g?A.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:A.jsx(Et,{className:"w-8 h-8 text-teal-500 animate-spin"})}):A.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-50 dark:bg-gray-900",children:[A.jsxs("div",{className:"w-full md:w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-8 px-2",children:[A.jsx("div",{className:"p-2 bg-gradient-to-br from-teal-400 to-blue-500 rounded-lg",children:A.jsx(Us,{className:"w-6 h-6 text-white"})}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:"Promoter"}),A.jsx("span",{className:"text-xs text-uppercase bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-gray-500 font-medium",children:B?"PRO":"FREE"})]})]}),A.jsxs("nav",{className:"space-y-1",children:[A.jsx(vl,{active:r==="overview",label:"Overview",icon:A.jsx(UU,{className:"w-5 h-5"}),onClick:()=>s("overview")}),A.jsx(vl,{active:r==="events",label:"My Events",icon:A.jsx(UA,{className:"w-5 h-5"}),onClick:()=>s("events")}),A.jsx(vl,{active:r==="create",label:"Create Event",icon:A.jsx(tc,{className:"w-5 h-5"}),onClick:()=>s("create")}),A.jsx(vl,{active:r==="rewards",label:"Rewards",icon:A.jsx(ec,{className:"w-5 h-5"}),onClick:()=>s("rewards")}),A.jsx(vl,{active:r==="resources",label:"Resources",icon:A.jsx(sd,{className:"w-5 h-5"}),onClick:()=>s("resources")}),A.jsx(vl,{active:r==="analytics",label:"Analytics",icon:A.jsx(k6,{className:"w-5 h-5"}),onClick:()=>s("analytics"),pro:!B})]}),!B&&A.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl text-white",children:[A.jsxs("h3",{className:"font-bold mb-1 flex items-center gap-2",children:[A.jsx(Ec,{className:"w-4 h-4 text-yellow-300"}),"Go Pro"]}),A.jsx("p",{className:"text-sm opacity-90 mb-3",children:"Unlimited events & custom codes."}),A.jsx("button",{onClick:X,disabled:x,className:"w-full py-2 bg-white text-purple-600 font-bold rounded-lg text-sm hover:bg-gray-50 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:x?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):"Upgrade $9.99/mo"})]})]}),A.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:r}),A.jsx("button",{onClick:n,className:"text-sm text-gray-500 hover:text-gray-700",children:" Back to Profile"})]}),r==="overview"&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[A.jsx(Hf,{label:"Total Check-ins",value:i==null?void 0:i.totalCheckins,icon:A.jsx(ir,{className:"text-blue-500"})}),A.jsx(Hf,{label:"Active Events",value:i==null?void 0:i.activeEvents,icon:A.jsx(UA,{className:"text-teal-500"})}),A.jsx(Hf,{label:"Today's Activity",value:`+${(i==null?void 0:i.todayCheckins)||0}`,icon:A.jsx(S6,{className:"text-green-500"})}),A.jsx(Hf,{label:"Revenue Est.",value:"-",icon:A.jsx(R6,{className:"text-gray-400"})})]}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Recent Events"}),A.jsx(WI,{events:l.slice(0,3)})]})]}),r==="events"&&A.jsx("div",{children:A.jsx(WI,{events:l,full:!0})}),r==="create"&&A.jsxs("div",{className:"max-w-2xl bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsx("h2",{className:"text-lg font-bold mb-4",children:"Create New Event"}),!B&&A.jsxs("div",{className:"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-center gap-3",children:[A.jsx(Ip,{className:"w-5 h-5 text-blue-500"}),A.jsxs("div",{className:"text-sm",children:[A.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-300",children:"Free Tier Status:"}),A.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:[l.filter(J=>J.status==="active").length," / 3 active events used."]})]})]}),A.jsxs("form",{onSubmit:K,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Event Title"}),A.jsx("input",{type:"text",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. Soca Brainwash",value:I.title,onChange:J=>E({...I,title:J.target.value})})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),A.jsx("input",{type:"date",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:I.date,onChange:J=>E({...I,date:J.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time"}),A.jsx("input",{type:"time",required:!0,className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:I.time,onChange:J=>E({...I,time:J.target.value})})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location / Venue"}),A.jsxs("div",{className:"relative",children:[A.jsx(kr,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-400"}),A.jsx("input",{type:"text",required:!0,className:"w-full pl-10 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. O2 Park",value:I.location,onChange:J=>E({...I,location:J.target.value})})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Capacity"}),A.jsx("input",{type:"number",className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",placeholder:"e.g. 500",value:I.capacity,onChange:J=>E({...I,capacity:J.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),A.jsxs("select",{className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700",value:I.type,onChange:J=>E({...I,type:J.target.value}),children:[A.jsx("option",{value:"fete",children:"Fete / Party"}),A.jsx("option",{value:"jouvert",children:"J'ouvert"}),A.jsx("option",{value:"boat_ride",children:"Boat Ride"}),A.jsx("option",{value:"concert",children:"Concert"})]})]})]}),H&&A.jsx("p",{className:"text-red-500 text-sm",children:H}),A.jsxs("button",{type:"submit",disabled:U,className:"w-full py-3 bg-teal-500 text-white font-bold rounded-xl hover:bg-teal-600 transition-colors flex items-center justify-center gap-2",children:[U?A.jsx(Et,{className:"animate-spin"}):A.jsx(tc,{className:"w-5 h-5"}),"Create Event"]})]})]}),r==="rewards"&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[A.jsx(ec,{className:"w-5 h-5 text-pink-500"})," Create Reward"]}),A.jsxs("form",{onSubmit:j,className:"grid md:grid-cols-2 gap-4 items-end",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reward Title"}),A.jsx("input",{type:"text",required:!0,className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"e.g. Free Rum & Coke",value:T.title,onChange:J=>C({...T,title:J.target.value})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cost (Credits)"}),A.jsx("input",{type:"number",required:!0,className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"e.g. 500",value:T.cost,onChange:J=>C({...T,cost:J.target.value})})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),A.jsx("input",{type:"text",className:"w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",placeholder:"Details for redemption...",value:T.description,onChange:J=>C({...T,description:J.target.value})})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsxs("button",{type:"submit",disabled:N,className:"w-full py-2.5 bg-pink-500 text-white font-bold rounded-lg hover:bg-pink-600 transition-colors flex items-center justify-center gap-2",children:[N?A.jsx(Et,{className:"animate-spin w-4 h-4"}):A.jsx(tc,{className:"w-4 h-4"}),"Add Reward"]})})]})]}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Active Rewards"}),h.length===0?A.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[A.jsx(ec,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),A.jsx("p",{className:"text-gray-500",children:"No rewards created yet."})]}):A.jsx("div",{className:"grid gap-3",children:h.map(J=>A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:J.title}),A.jsx("p",{className:"text-sm text-gray-500",children:J.description}),A.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A.jsxs("span",{className:"text-xs font-bold text-pink-600 bg-pink-50 dark:bg-pink-900/20 px-2 py-0.5 rounded-full",children:[J.cost," Credits"]}),J.quantity&&A.jsxs("span",{className:"text-xs text-gray-500",children:["Limit: ",J.quantity]})]})]}),A.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500",children:A.jsx(QU,{className:"w-5 h-5"})})]},J.id))})]})]}),r==="resources"&&A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-blue-600 rounded-xl p-8 text-white mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Promoter Toolkit"}),A.jsx("p",{className:"opacity-90 max-w-xl",children:"High-quality visual assets to help you promote your events and the Carnival Planner app. Download and share on your social media channels."})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsx(dy,{title:"Instagram Post",description:"Square format (1:1) perfect for Feed posts.",image:"/assets/promoter-ads/ad-social-square.png",type:"Social Media"}),A.jsx(dy,{title:"Story / Reel",description:"Portrait format (9:16) for Stories and TikTok.",image:"/assets/promoter-ads/ad-story-portrait.png",type:"Social Media",portrait:!0}),A.jsx(dy,{title:"Web Banner",description:"Landscape format for banners and headers.",image:"/assets/promoter-ads/ad-banner-landscape.png",type:"Web Asset",className:"lg:col-span-2"})]})]})]})]})}function dy({title:t,description:e,image:n,type:r,portrait:s,className:i=""}){return A.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col ${i}`,children:[A.jsxs("div",{className:`relative bg-gray-100 dark:bg-gray-900 group ${s?"aspect-[9/16]":"aspect-video"}`,children:[A.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-sm",children:A.jsxs("a",{href:n,download:!0,className:"px-4 py-2 bg-white text-gray-900 rounded-lg font-bold flex items-center gap-2 hover:bg-gray-100 transition-colors",children:[A.jsx(jc,{className:"w-4 h-4"})," Download"]})})]}),A.jsx("div",{className:"p-4 flex-1 flex flex-col",children:A.jsxs("div",{className:"flex justify-between items-start mb-2",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:t}),A.jsx("p",{className:"text-sm text-gray-500",children:e})]}),A.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:r})]})})]})}function vl({active:t,label:e,icon:n,onClick:r,pro:s}){return A.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${t?"bg-teal-50 dark:bg-teal-900/20 text-teal-600 dark:text-teal-400 font-bold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[A.jsxs("div",{className:"flex items-center gap-3",children:[n,A.jsx("span",{children:e})]}),s&&A.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded uppercase font-bold",children:"PRO"})]})}function Hf({label:t,value:e,icon:n}){return A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[A.jsx("div",{className:"flex justify-between items-start mb-2",children:A.jsx("div",{className:"p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:n})}),A.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),A.jsx("p",{className:"text-xs text-gray-500",children:t})]})}function WI({events:t,full:e}){return t!=null&&t.length?A.jsx("div",{className:"grid gap-3",children:t.map(n=>A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex items-center justify-between group",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center text-center",children:A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-bold text-purple-600 dark:text-purple-400 uppercase",children:new Date(n.date).toLocaleString("default",{month:"short"})}),A.jsx("p",{className:"text-lg font-black text-purple-800 dark:text-purple-200 leading-none",children:new Date(n.date).getDate()})]})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.title}),A.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(ir,{className:"w-3.5 h-3.5"})," ",n.checkins," checked-in"]}),A.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Active"})]})]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"hidden md:block px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-md",children:A.jsx("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-300",children:n.accessCode})}),A.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:A.jsx(QU,{className:"w-5 h-5"})})]})]},n.id))}):A.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[A.jsx(UA,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),A.jsx("p",{className:"text-gray-500",children:"No events found."})]})}function wq({user:t}){const[e,n]=R.useState("Overview"),[r,s]=R.useState(!1),[i,o]=R.useState(!0);if(R.useEffect(()=>{t&&(t.email==="djkrss1@gmail.com"&&s(!0),o(!1))},[t]),i)return A.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading Admin Dashboard..."});const l=[{id:"Overview",label:"Overview",icon:UU},{id:"Ads",label:"Ad Manager",icon:K6},{id:"Support",label:"Support",icon:W_},{id:"Settings",label:"Admins",icon:X6}];return A.jsxs("div",{className:"bg-white dark:bg-gray-900 min-h-screen rounded-3xl overflow-hidden shadow-2xl border border-gray-200 dark:border-gray-800",children:[A.jsxs("div",{className:"bg-gray-900 text-white p-4 md:p-6 border-b border-gray-800 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[A.jsx(vh,{className:"text-pink-500"}),"Admin Console"]}),A.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your entire carnival platform"})]}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 hide-scrollbar",children:l.map(c=>A.jsxs("button",{onClick:()=>n(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap ${e===c.id?"bg-pink-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:[A.jsx(c.icon,{className:"w-4 h-4"}),c.label]},c.id))})]}),A.jsxs("div",{className:"p-6",children:[e==="Overview"&&A.jsx(pK,{}),e==="Ads"&&A.jsx(fK,{}),e==="Support"&&A.jsx(IK,{}),e==="Settings"&&A.jsx(vq,{user:t,isSuperAdmin:r})]})]})}function vq({user:t,isSuperAdmin:e}){const[n,r]=R.useState([]),[s,i]=R.useState(""),[o,l]=R.useState(!1),[c,h]=R.useState(null),[m,g]=R.useState(!0);R.useEffect(()=>{const b=Zs(cn(Te,"admins"),x=>{r(x.docs.map(S=>({id:S.id,...S.data()}))),g(!1),h(null)},x=>{console.error("AdminManagement query failed:",x),h(x.message),g(!1)});return()=>b()},[]);const y=async b=>{if(b.preventDefault(),!!s.trim()){l(!0);try{const x=cn(Te,"users"),S=HA(x,mh("email","==",s)),I=await Li(S);if(I.empty){alert("User not found! They must log in to the app at least once."),l(!1);return}const U=I.docs[0].id;await Gn(ze(Te,"admins",U),{email:s,role:"admin",addedBy:t.email,addedAt:qe.now()}),i(""),alert(`Added ${s} as admin!`)}catch(x){console.error(x),alert("Failed to add admin: "+x.message)}finally{l(!1)}}},B=async b=>{if(confirm("Remove this admin? They will lose access immediately."))try{await gh(ze(Te,"admins",b))}catch(x){console.error(x),alert("Failed to remove admin")}};return m?A.jsx("div",{className:"text-center p-8",children:A.jsx(Et,{className:"animate-spin mx-auto text-pink-500"})}):c?A.jsx("div",{className:"p-8 text-center bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800",children:A.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Failed to load admins: ",c]})}):A.jsxs("div",{className:"space-y-8 max-w-4xl",children:[A.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl border border-amber-200 dark:border-amber-800 flex gap-3 text-amber-800 dark:text-amber-200",children:[A.jsx(O_,{className:"shrink-0"}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold",children:"Access Control"}),A.jsx("p",{className:"text-sm opacity-90",children:"Admins have full access to analytics, support messages, and ad management. Only grant this to trusted team members."})]})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700",children:[A.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:"Add New Admin"}),A.jsxs("form",{onSubmit:y,className:"flex gap-4",children:[A.jsx("input",{type:"email",placeholder:"Enter user email address",value:s,onChange:b=>i(b.target.value),className:"flex-1 p-3 rounded-xl border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-pink-500",required:!0}),A.jsxs("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-xl hover:bg-pink-700 disabled:opacity-50 flex items-center gap-2",children:[o?A.jsx(Et,{className:"animate-spin w-5 h-5"}):A.jsx(tc,{className:"w-5 h-5"}),"Add Admin"]})]})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:"Current Admins"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 opacity-75",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:"D"}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold dark:text-white",children:"djkrss1@gmail.com"}),A.jsx("p",{className:"text-xs text-pink-500 font-bold uppercase",children:"Super Admin"})]})]}),A.jsx("span",{className:"text-xs text-gray-400",children:"Owner"})]}),n.map(b=>{var x;return A.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center text-gray-500 dark:text-gray-300 font-bold",children:b.email[0].toUpperCase()}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold dark:text-white",children:b.email}),A.jsxs("p",{className:"text-xs text-gray-500",children:["Added by ",(x=b.addedBy)==null?void 0:x.split("@")[0]]})]})]}),A.jsx("button",{onClick:()=>B(b.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:A.jsx(oi,{className:"w-5 h-5"})})]},b.id)})]})]})]})}const xq={colors:{royal_purple:"#4B0082",metallic_gold:"Gold"},imagery_keywords:["High-definition feathers","champagne bubbles","confetti","blurred city lights","smartphone interfaces"]},_q=["Own the road. Download the app.","Don't get left behind. Map your season now.","The vibes are calling. Are you ready?","Your fete, your rules. Plan it better."],vu={visual_style:xq,cta_library:_q};var $I;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})($I||($I={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YI;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(YI||(YI={}));var XI;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(XI||(XI={}));var ZI;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ZI||(ZI={}));var JI;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(JI||(JI={}));var eT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(eT||(eT={}));var tT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(tT||(tT={}));var ud;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(ud||(ud={}));var nT;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(nT||(nT={}));var rT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(rT||(rT={}));var sT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(sT||(sT={}));var iT;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(iT||(iT={}));ud.RECITATION,ud.SAFETY,ud.LANGUAGE;console.log("[MarketingService] API_KEY exists:",!1);console.log("[MarketingService] API_KEY value (first 10 chars):","undefined");const Bq=!0;console.log("[MarketingService] isSimulationMode:",Bq);const bq=async(t,e)=>{function n(i){const o=["","","","","",""],l=["Ready for de road?","Yuh not ready yet?","The countdown is ON!","Who drinking with we?","Mas is life!"],c=vu.cta_library[Math.floor(Math.random()*vu.cta_library.length)],h=()=>o[Math.floor(Math.random()*o.length)];let m=`${l[Math.floor(Math.random()*l.length)]} ${h()}

`;return m+=`${t} We making sure your carnival experience is seamless. No stress, just vibes. ${h()}

`,i==="TikTok"||i==="IG"?m+=`tap the link in bio! ${c}`:m+=`${c}`,m}function r(){const i=vu.visual_style.imagery_keywords;return`Focus on: ${i[Math.floor(Math.random()*i.length)]}. 

Idea: Show a high-energy clip related to "${t}" with a ${vu.visual_style.colors.royal_purple} and ${vu.visual_style.colors.metallic_gold} overlay. Keep it under 15s for high retention.`}function s(){const i=["#Carnival2026","#CarnivalPlanner","#Soca","#Mas","#FeteList"],l=["#TrinidadCarnival","#CropOver","#MiamiCarnival","#Spicemas","#VincyMas"].sort(()=>.5-Math.random());return[...i,...l.slice(0,3)]}return await new Promise(i=>setTimeout(i,1500)),e.map(i=>({platform:i,caption:n(i),visualStrategy:r(),hashtags:s()}))};async function Cq(t,e){return console.warn("No Google API Key found (VITE_GOOGLE_API_KEY). Using simulation mode."),bq(t,e)}var $F={exports:{}},Eq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Iq=Eq,Tq=Iq;function YF(){}function XF(){}XF.resetWarningCache=YF;var Sq=function(){function t(r,s,i,o,l,c){if(c!==Tq){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:XF,resetWarningCache:YF};return n.PropTypes=n,n};$F.exports=Sq();var kq=$F.exports;const St=Tc(kq);function Nq(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ZF=R,Uq=Nq(ZF);function aT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fq(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Qq=!!(typeof window<"u"&&window.document&&window.document.createElement);function Pq(t,e,n){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(s){return s.displayName||s.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],l;function c(){l=t(o.map(function(m){return m.props})),h.canUseDOM?e(l):n&&(l=n(l))}var h=function(m){Fq(g,m);function g(){return m.apply(this,arguments)||this}g.peek=function(){return l},g.rewind=function(){if(g.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var b=l;return l=void 0,o=[],b};var y=g.prototype;return y.UNSAFE_componentWillMount=function(){o.push(this),c()},y.componentDidUpdate=function(){c()},y.componentWillUnmount=function(){var b=o.indexOf(this);o.splice(b,1),c()},y.render=function(){return Uq.createElement(i,this.props)},g}(ZF.PureComponent);return aT(h,"displayName","SideEffect("+r(i)+")"),aT(h,"canUseDOM",Qq),h}}var Rq=Pq;const Lq=Tc(Rq);var jq=typeof Element<"u",Dq=typeof Map=="function",Oq=typeof Set=="function",Mq=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function vm(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!vm(t[r],e[r]))return!1;return!0}var i;if(Dq&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!vm(r.value[1],e.get(r.value[0])))return!1;return!0}if(Oq&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Mq&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(jq&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!vm(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var Hq=function(e,n){try{return vm(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Vq=Tc(Hq);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var oT=Object.getOwnPropertySymbols,Kq=Object.prototype.hasOwnProperty,Gq=Object.prototype.propertyIsEnumerable;function zq(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function qq(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(r.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Wq=qq()?Object.assign:function(t,e){for(var n,r=zq(t),s,i=1;i<arguments.length;i++){n=Object(arguments[i]);for(var o in n)Kq.call(n,o)&&(r[o]=n[o]);if(oT){s=oT(n);for(var l=0;l<s.length;l++)Gq.call(n,s[l])&&(r[s[l]]=n[s[l]])}}return r};const $q=Tc(Wq);var cA={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},De={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(De).map(function(t){return De[t]});var kt={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Sg={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},$d={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Yq=Object.keys(Sg).reduce(function(t,e){return t[Sg[e]]=e,t},{}),Xq=[De.NOSCRIPT,De.SCRIPT,De.STYLE],Ts="data-react-helmet",Zq=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jq=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},eW=function(){function t(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tW=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},AT=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},nW=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},mv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},rW=function(e){var n=rc(e,De.TITLE),r=rc(e,$d.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var s=rc(e,$d.DEFAULT_TITLE);return n||s||void 0},sW=function(e){return rc(e,$d.ON_CHANGE_CLIENT_STATE)||function(){}},hy=function(e,n){return n.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,s){return yr({},r,s)},{})},iW=function(e,n){return n.filter(function(r){return typeof r[De.BASE]<"u"}).map(function(r){return r[De.BASE]}).reverse().reduce(function(r,s){if(!r.length)for(var i=Object.keys(s),o=0;o<i.length;o++){var l=i[o],c=l.toLowerCase();if(e.indexOf(c)!==-1&&s[c])return r.concat(s)}return r},[])},xu=function(e,n,r){var s={};return r.filter(function(i){return Array.isArray(i[e])?!0:(typeof i[e]<"u"&&lW("Helmet: "+e+' should be of type "Array". Instead found type "'+Zq(i[e])+'"'),!1)}).map(function(i){return i[e]}).reverse().reduce(function(i,o){var l={};o.filter(function(y){for(var B=void 0,b=Object.keys(y),x=0;x<b.length;x++){var S=b[x],I=S.toLowerCase();n.indexOf(I)!==-1&&!(B===kt.REL&&y[B].toLowerCase()==="canonical")&&!(I===kt.REL&&y[I].toLowerCase()==="stylesheet")&&(B=I),n.indexOf(S)!==-1&&(S===kt.INNER_HTML||S===kt.CSS_TEXT||S===kt.ITEM_PROP)&&(B=S)}if(!B||!y[B])return!1;var E=y[B].toLowerCase();return s[B]||(s[B]={}),l[B]||(l[B]={}),s[B][E]?!1:(l[B][E]=!0,!0)}).reverse().forEach(function(y){return i.push(y)});for(var c=Object.keys(l),h=0;h<c.length;h++){var m=c[h],g=$q({},s[m],l[m]);s[m]=g}return i},[]).reverse()},rc=function(e,n){for(var r=e.length-1;r>=0;r--){var s=e[r];if(s.hasOwnProperty(n))return s[n]}return null},aW=function(e){return{baseTag:iW([kt.HREF,kt.TARGET],e),bodyAttributes:hy(cA.BODY,e),defer:rc(e,$d.DEFER),encode:rc(e,$d.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:hy(cA.HTML,e),linkTags:xu(De.LINK,[kt.REL,kt.HREF],e),metaTags:xu(De.META,[kt.NAME,kt.CHARSET,kt.HTTPEQUIV,kt.PROPERTY,kt.ITEM_PROP],e),noscriptTags:xu(De.NOSCRIPT,[kt.INNER_HTML],e),onChangeClientState:sW(e),scriptTags:xu(De.SCRIPT,[kt.SRC,kt.INNER_HTML],e),styleTags:xu(De.STYLE,[kt.CSS_TEXT],e),title:rW(e),titleAttributes:hy(cA.TITLE,e)}},gv=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout(function(){gv(e)},0)}}(),lT=function(e){return clearTimeout(e)},oW=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||gv:global.requestAnimationFrame||gv,AW=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||lT:global.cancelAnimationFrame||lT,lW=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},_u=null,cW=function(e){_u&&AW(_u),e.defer?_u=oW(function(){cT(e,function(){_u=null})}):(cT(e),_u=null)},cT=function(e,n){var r=e.baseTag,s=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,l=e.metaTags,c=e.noscriptTags,h=e.onChangeClientState,m=e.scriptTags,g=e.styleTags,y=e.title,B=e.titleAttributes;pv(De.BODY,s),pv(De.HTML,i),uW(y,B);var b={baseTag:xl(De.BASE,r),linkTags:xl(De.LINK,o),metaTags:xl(De.META,l),noscriptTags:xl(De.NOSCRIPT,c),scriptTags:xl(De.SCRIPT,m),styleTags:xl(De.STYLE,g)},x={},S={};Object.keys(b).forEach(function(I){var E=b[I],U=E.newTags,M=E.oldTags;U.length&&(x[I]=U),M.length&&(S[I]=b[I].oldTags)}),n&&n(),h(e,x,S)},JF=function(e){return Array.isArray(e)?e.join(""):e},uW=function(e,n){typeof e<"u"&&document.title!==e&&(document.title=JF(e)),pv(De.TITLE,n)},pv=function(e,n){var r=document.getElementsByTagName(e)[0];if(r){for(var s=r.getAttribute(Ts),i=s?s.split(","):[],o=[].concat(i),l=Object.keys(n),c=0;c<l.length;c++){var h=l[c],m=n[h]||"";r.getAttribute(h)!==m&&r.setAttribute(h,m),i.indexOf(h)===-1&&i.push(h);var g=o.indexOf(h);g!==-1&&o.splice(g,1)}for(var y=o.length-1;y>=0;y--)r.removeAttribute(o[y]);i.length===o.length?r.removeAttribute(Ts):r.getAttribute(Ts)!==l.join(",")&&r.setAttribute(Ts,l.join(","))}},xl=function(e,n){var r=document.head||document.querySelector(De.HEAD),s=r.querySelectorAll(e+"["+Ts+"]"),i=Array.prototype.slice.call(s),o=[],l=void 0;return n&&n.length&&n.forEach(function(c){var h=document.createElement(e);for(var m in c)if(c.hasOwnProperty(m))if(m===kt.INNER_HTML)h.innerHTML=c.innerHTML;else if(m===kt.CSS_TEXT)h.styleSheet?h.styleSheet.cssText=c.cssText:h.appendChild(document.createTextNode(c.cssText));else{var g=typeof c[m]>"u"?"":c[m];h.setAttribute(m,g)}h.setAttribute(Ts,"true"),i.some(function(y,B){return l=B,h.isEqualNode(y)})?i.splice(l,1):o.push(h)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),o.forEach(function(c){return r.appendChild(c)}),{oldTags:i,newTags:o}},eQ=function(e){return Object.keys(e).reduce(function(n,r){var s=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return n?n+" "+s:s},"")},dW=function(e,n,r,s){var i=eQ(r),o=JF(n);return i?"<"+e+" "+Ts+'="true" '+i+">"+mv(o,s)+"</"+e+">":"<"+e+" "+Ts+'="true">'+mv(o,s)+"</"+e+">"},hW=function(e,n,r){return n.reduce(function(s,i){var o=Object.keys(i).filter(function(h){return!(h===kt.INNER_HTML||h===kt.CSS_TEXT)}).reduce(function(h,m){var g=typeof i[m]>"u"?m:m+'="'+mv(i[m],r)+'"';return h?h+" "+g:g},""),l=i.innerHTML||i.cssText||"",c=Xq.indexOf(e)===-1;return s+"<"+e+" "+Ts+'="true" '+o+(c?"/>":">"+l+"</"+e+">")},"")},tQ=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,s){return r[Sg[s]||s]=e[s],r},n)},fW=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,s){return r[Yq[s]||s]=e[s],r},n)},mW=function(e,n,r){var s,i=(s={key:n},s[Ts]=!0,s),o=tQ(r,i);return[Gi.createElement(De.TITLE,o,n)]},gW=function(e,n){return n.map(function(r,s){var i,o=(i={key:s},i[Ts]=!0,i);return Object.keys(r).forEach(function(l){var c=Sg[l]||l;if(c===kt.INNER_HTML||c===kt.CSS_TEXT){var h=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:h}}else o[c]=r[l]}),Gi.createElement(e,o)})},Ui=function(e,n,r){switch(e){case De.TITLE:return{toComponent:function(){return mW(e,n.title,n.titleAttributes)},toString:function(){return dW(e,n.title,n.titleAttributes,r)}};case cA.BODY:case cA.HTML:return{toComponent:function(){return tQ(n)},toString:function(){return eQ(n)}};default:return{toComponent:function(){return gW(e,n)},toString:function(){return hW(e,n,r)}}}},nQ=function(e){var n=e.baseTag,r=e.bodyAttributes,s=e.encode,i=e.htmlAttributes,o=e.linkTags,l=e.metaTags,c=e.noscriptTags,h=e.scriptTags,m=e.styleTags,g=e.title,y=g===void 0?"":g,B=e.titleAttributes;return{base:Ui(De.BASE,n,s),bodyAttributes:Ui(cA.BODY,r,s),htmlAttributes:Ui(cA.HTML,i,s),link:Ui(De.LINK,o,s),meta:Ui(De.META,l,s),noscript:Ui(De.NOSCRIPT,c,s),script:Ui(De.SCRIPT,h,s),style:Ui(De.STYLE,m,s),title:Ui(De.TITLE,{title:y,titleAttributes:B},s)}},pW=function(e){var n,r;return r=n=function(s){tW(i,s);function i(){return Jq(this,i),nW(this,s.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(l){return!Vq(this.props,l)},i.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case De.SCRIPT:case De.NOSCRIPT:return{innerHTML:c};case De.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(l){var c,h=l.child,m=l.arrayTypeChildren,g=l.newChildProps,y=l.nestedChildren;return yr({},m,(c={},c[h.type]=[].concat(m[h.type]||[],[yr({},g,this.mapNestedChildrenToProps(h,y))]),c))},i.prototype.mapObjectTypeChildren=function(l){var c,h,m=l.child,g=l.newProps,y=l.newChildProps,B=l.nestedChildren;switch(m.type){case De.TITLE:return yr({},g,(c={},c[m.type]=B,c.titleAttributes=yr({},y),c));case De.BODY:return yr({},g,{bodyAttributes:yr({},y)});case De.HTML:return yr({},g,{htmlAttributes:yr({},y)})}return yr({},g,(h={},h[m.type]=yr({},y),h))},i.prototype.mapArrayTypeChildrenToProps=function(l,c){var h=yr({},c);return Object.keys(l).forEach(function(m){var g;h=yr({},h,(g={},g[m]=l[m],g))}),h},i.prototype.warnOnInvalidChildren=function(l,c){return!0},i.prototype.mapChildrenToProps=function(l,c){var h=this,m={};return Gi.Children.forEach(l,function(g){if(!(!g||!g.props)){var y=g.props,B=y.children,b=AT(y,["children"]),x=fW(b);switch(h.warnOnInvalidChildren(g,B),g.type){case De.LINK:case De.META:case De.NOSCRIPT:case De.SCRIPT:case De.STYLE:m=h.flattenArrayTypeChildren({child:g,arrayTypeChildren:m,newChildProps:x,nestedChildren:B});break;default:c=h.mapObjectTypeChildren({child:g,newProps:c,newChildProps:x,nestedChildren:B});break}}}),c=this.mapArrayTypeChildrenToProps(m,c),c},i.prototype.render=function(){var l=this.props,c=l.children,h=AT(l,["children"]),m=yr({},h);return c&&(m=this.mapChildrenToProps(c,m)),Gi.createElement(e,m)},eW(i,null,[{key:"canUseDOM",set:function(l){e.canUseDOM=l}}]),i}(Gi.Component),n.propTypes={base:St.object,bodyAttributes:St.object,children:St.oneOfType([St.arrayOf(St.node),St.node]),defaultTitle:St.string,defer:St.bool,encodeSpecialCharacters:St.bool,htmlAttributes:St.object,link:St.arrayOf(St.object),meta:St.arrayOf(St.object),noscript:St.arrayOf(St.object),onChangeClientState:St.func,script:St.arrayOf(St.object),style:St.arrayOf(St.object),title:St.string,titleAttributes:St.object,titleTemplate:St.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=e.peek,n.rewind=function(){var s=e.rewind();return s||(s=nQ({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),s},r},yW=function(){return null},wW=Lq(aW,cW,nQ)(yW),yv=pW(wW);yv.renderStatic=yv.rewind;const uT=({children:t,onClick:e,disabled:n,className:r,variant:s="primary"})=>{const i="px-4 py-2 rounded-md font-medium transition-colors flex items-center justify-center",o={primary:"bg-purple-600 hover:bg-purple-700 text-white",secondary:"bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",ghost:"bg-transparent hover:bg-gray-800 text-purple-400"};return A.jsx("button",{onClick:e,disabled:n,className:`${i} ${o[s]} ${r} ${n?"opacity-50 cursor-not-allowed":""}`,children:t})},vW=({value:t,onChange:e,placeholder:n,className:r})=>A.jsx("textarea",{value:t,onChange:e,placeholder:n,className:`w-full p-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-600 ${r}`}),xW=({id:t,checked:e,onCheckedChange:n})=>A.jsx("input",{type:"checkbox",id:t,checked:e,onChange:r=>n(r.target.checked),className:"w-5 h-5 text-purple-600 rounded bg-gray-700 border-gray-600 focus:ring-purple-500"});function _W(){const[t,e]=R.useState(""),[n,r]=R.useState(["IG"]),[s,i]=R.useState(!1),[o,l]=R.useState([]),[c,h]=R.useState("vibrant"),m={vibrant:{name:"Vibrant",bg:"bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",text:"text-white",accent:"bg-white/10",border:"border-white/10"},midnight:{name:"Midnight",bg:"bg-gray-950",text:"text-white",accent:"bg-purple-900/30",border:"border-gray-800"},gold:{name:"Carnival Gold",bg:"bg-gradient-to-br from-yellow-600 via-amber-500 to-yellow-700",text:"text-white",accent:"bg-black/20",border:"border-white/20"}};R.useRef(null);const g=["IG","FB","TikTok","X"],y=S=>{r(I=>I.includes(S)?I.filter(E=>E!==S):[...I,S])},B=async()=>{if(!t.trim()){alert("Please tell us what you want to post about!");return}if(n.length===0){alert("Please select at least one platform.");return}i(!0);try{const S=await Cq(t,n);l(S)}catch(S){console.error("Generation error:",S),alert("Something went wrong generating the content.")}finally{i(!1)}},b=S=>{navigator.clipboard.writeText(S),alert("Copied to clipboard!")},x=async S=>{const I=document.getElementById(`flyer-${S.platform}`);if(I)try{const E=await WF(I,{scale:2,backgroundColor:"#1f2937",useCORS:!0}),U=document.createElement("a");U.download=`carnival-flyer-${S.platform}.png`,U.href=E.toDataURL(),U.click()}catch(E){console.error("Flyer generation failed:",E),alert("Could not generate flyer image.")}};return A.jsxs("div",{className:"min-h-screen bg-gray-950 text-white p-4 md:p-8 space-y-8",children:[A.jsx(yv,{children:A.jsx("title",{children:"Carnival Marketing Agent | Carnival Planner"})}),A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight bg-gradient-to-r from-purple-400 to-pink-500 bg-clip-text text-transparent",children:"Carnival Marketing Agent "}),A.jsx("p",{className:"text-gray-400 text-lg",children:"Turn your fete updates into viral vibes. Powered by Google Gemini AI & Carnival Brand Engine."})]}),A.jsx("div",{className:"bg-yellow-900/30 text-yellow-500 text-xs p-2 rounded border border-yellow-800 max-w-[200px]",children:" Simulation Mode. Add VITE_GOOGLE_API_KEY to .env for Real AI."})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-1 h-fit border border-purple-900/50 bg-gray-900/60 p-6 rounded-xl backdrop-blur",children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Input Your Vibe"}),A.jsx("p",{className:"text-sm text-gray-500",children:`What's happening? (e.g., "Costume pickup starts tomorrow")`})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Topic / Idea"}),A.jsx(vW,{placeholder:"Ex: New fete added to the lineup! It's a cooler fete...",className:"min-h-[150px] resize-none",value:t,onChange:S=>e(S.target.value)})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Target Platforms"}),A.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.map(S=>A.jsxs("div",{className:"flex items-center space-x-2 border border-gray-700 rounded-md p-3 hover:bg-gray-800 cursor-pointer",onClick:()=>y(S),children:[A.jsx(xW,{id:S,checked:n.includes(S),onCheckedChange:()=>y(S)}),A.jsx("label",{htmlFor:S,className:"text-sm font-medium cursor-pointer",children:S})]},S))})]}),A.jsx(uT,{className:"w-full h-12 text-lg",onClick:B,disabled:s,children:s?A.jsxs("span",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Generating..."]}):"Generate Content "})]})]}),A.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.length>0?o.map((S,I)=>A.jsxs("div",{className:"border border-gray-800 rounded-xl overflow-hidden bg-gray-900",children:[A.jsx("div",{className:"bg-purple-900/20 p-3 border-b border-gray-800 flex justify-between items-center",children:A.jsxs("span",{className:"font-bold text-purple-400 flex items-center gap-2",children:[S.platform==="IG"&&"Instagram",S.platform==="FB"&&"Facebook",S.platform==="TikTok"&&"TikTok",S.platform==="X"&&"X (Twitter)"]})}),A.jsx("div",{className:"p-6 space-y-6",children:A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Caption"}),A.jsx("button",{className:"text-xs text-purple-400 hover:text-purple-300 font-medium",onClick:()=>b(S.caption+`

`+S.hashtags.join(" ")),children:"Copy Text"})]}),A.jsx("textarea",{className:"w-full bg-gray-800/50 p-4 rounded-md text-sm leading-relaxed border border-gray-700/50 h-[250px] focus:ring-2 focus:ring-purple-600 focus:outline-none resize-none",value:S.caption,onChange:E=>{const U=[...o];U[I].caption=E.target.value,l(U)}}),A.jsxs("div",{className:"text-xs text-gray-500",children:["Hashtags: ",A.jsx("span",{className:"text-purple-400/80",children:S.hashtags.join(" ")})]})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:"Flyer Preview"}),A.jsx(uT,{variant:"secondary",className:"px-3 py-1 text-xs",onClick:()=>x(S),children:"Download Image "})]}),A.jsx("div",{className:"flex gap-2",children:Object.entries(m).map(([E,U])=>A.jsx("button",{onClick:()=>h(E),className:`px-3 py-1 rounded-full text-xs font-medium transition-all ${c===E?"bg-white text-purple-900 ring-2 ring-purple-500":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:U.name},E))}),A.jsxs("div",{id:`flyer-${S.platform}`,className:`relative aspect-[4/5] ${m[c].bg} rounded-lg p-6 flex flex-col justify-between overflow-hidden shadow-2xl border ${m[c].border}`,children:[A.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-yellow-500/20 rounded-full blur-3xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/20 rounded-full blur-3xl"}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("div",{className:`w-8 h-8 rounded-full ${m[c].accent} flex items-center justify-center text-lg`,children:""}),A.jsx("span",{className:`text-xs font-bold tracking-widest uppercase ${m[c].text} opacity-70`,children:"Carnival Planner"})]}),A.jsx("h2",{className:`text-2xl font-black ${m[c].text} leading-tight drop-shadow-lg`,children:t.length>30?t.substring(0,30)+"...":t})]}),A.jsx("div",{className:`relative z-10 my-4 ${m[c].accent} backdrop-blur-sm p-3 rounded border ${m[c].border}`,children:A.jsx("p",{className:`text-sm font-medium ${m[c].text} opacity-90 leading-relaxed line-clamp-4`,children:S.caption?S.caption.split(`
`)[0]:"Enjoy the vibes!"})}),A.jsxs("div",{className:"relative z-10 text-center",children:[A.jsx("div",{className:"inline-block px-4 py-2 bg-yellow-500 text-black font-bold text-xs uppercase tracking-wider rounded-full shadow-lg",children:"Download App "}),A.jsx("p",{className:"mt-2 text-[10px] text-white/50",children:"www.carnival-planner.com"})]})]}),A.jsxs("div",{className:"text-xs text-gray-400 italic",children:[" AI Suggestion: ",S.visualStrategy]})]})]})})]},I)):A.jsxs("div",{className:"h-full min-h-[400px] flex flex-col items-center justify-center text-gray-500 border-2 border-dashed border-gray-800 rounded-xl bg-gray-900/20 p-8 text-center",children:[A.jsx("div",{className:"bg-purple-900/20 p-4 rounded-full mb-4 text-purple-400",children:A.jsx("span",{className:"text-4xl",children:""})}),A.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-300",children:"Ready to Promote?"}),A.jsx("p",{className:"max-w-md",children:"Enter your event details or update on the left, select your platforms, and let the AI handle the rest."})]})})]})]})}function BW({onBack:t,onSuccess:e}){const[n,r]=R.useState("login"),[s,i]=R.useState(""),[o,l]=R.useState(""),[c,h]=R.useState(""),[m,g]=R.useState(!1),[y,B]=R.useState(!1),[b,x]=R.useState(""),[S,I]=R.useState(""),E=T=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T),U=T=>{switch(T){case"auth/email-already-in-use":return"This email is already registered. Try logging in instead.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-credential":return"Invalid email or password. Please check and try again.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"Something went wrong. Please try again."}},M=async T=>{if(T.preventDefault(),x(""),I(""),!E(s)){x("Please enter a valid email address.");return}if(o.length<6){x("Password must be at least 6 characters.");return}if(o!==c){x("Passwords do not match.");return}B(!0);try{const C=await Fj(Ha,s,o);await ck(C.user),I("Account created! Please check your email to verify your account."),e&&e(C.user)}catch(C){console.error("Sign up error:",C),x(U(C.code))}finally{B(!1)}},H=async T=>{if(T.preventDefault(),x(""),I(""),!E(s)){x("Please enter a valid email address.");return}if(!o){x("Please enter your password.");return}B(!0);try{const C=await Qj(Ha,s,o);e&&e(C.user)}catch(C){console.error("Login error:",C),x(U(C.code))}finally{B(!1)}},O=async()=>{if(x(""),I(""),!E(s)){x("Please enter your email address first.");return}B(!0);try{await Uj(Ha,s),I("Password reset email sent! Check your inbox.")}catch(T){console.error("Password reset error:",T),x(U(T.code))}finally{B(!1)}};return A.jsxs("div",{className:"w-full max-w-md mx-auto",children:[A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[A.jsx(M_,{className:"w-4 h-4"}),"Back"]}),A.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:n==="login"?"Welcome Back":"Create Account"}),b&&A.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:b}),S&&A.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300 text-sm",children:S}),A.jsxs("form",{onSubmit:n==="login"?H:M,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),A.jsxs("div",{className:"relative",children:[A.jsx(q_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:"email",value:s,onChange:T=>i(T.target.value),placeholder:"your@email.com",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:y})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(Kw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:m?"text":"password",value:o,onChange:T=>l(T.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:y}),A.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:m?A.jsx(L6,{className:"w-5 h-5"}):A.jsx(G_,{className:"w-5 h-5"})})]})]}),n==="signup"&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm Password"}),A.jsxs("div",{className:"relative",children:[A.jsx(Kw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),A.jsx("input",{type:m?"text":"password",value:c,onChange:T=>h(T.target.value),placeholder:"Confirm your password",className:"w-full pl-10 pr-4 py-3 bg-gray-900/80 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 transition-colors",disabled:y})]})]}),n==="login"&&A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"button",onClick:O,className:"text-sm text-pink-400 hover:text-pink-300 transition-colors",disabled:y,children:"Forgot password?"})}),A.jsx("button",{type:"submit",disabled:y,className:"w-full py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-xl font-bold text-white hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:y?A.jsxs(A.Fragment,{children:[A.jsx(Et,{className:"w-5 h-5 animate-spin"}),n==="login"?"Signing in...":"Creating account..."]}):n==="login"?"Sign In":"Create Account"})]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsxs("p",{className:"text-gray-400 text-sm",children:[n==="login"?"Don't have an account?":"Already have an account?",A.jsx("button",{onClick:()=>{r(n==="login"?"signup":"login"),x(""),I("")},className:"ml-2 text-pink-400 hover:text-pink-300 font-semibold transition-colors",children:n==="login"?"Sign Up":"Sign In"})]})})]})]})}function bW({user:t,onResend:e}){const[n,r]=R.useState(!1),[s,i]=R.useState(!1);if(!t||t.emailVerified||!t.email)return null;const o=async()=>{r(!0);try{await ck(t),i(!0),setTimeout(()=>i(!1),5e3)}catch(l){console.error("Error sending verification:",l)}finally{r(!1)}};return A.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 text-yellow-200 px-4 py-3 flex items-center justify-between gap-4 flex-wrap",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(q_,{className:"w-5 h-5"}),A.jsx("span",{className:"text-sm",children:"Please verify your email address to access all features."})]}),A.jsx("button",{onClick:o,disabled:n||s,className:"text-sm font-semibold bg-yellow-500/30 hover:bg-yellow-500/40 px-3 py-1 rounded-lg transition-colors disabled:opacity-50",children:s?"Email Sent!":n?"Sending...":"Resend Email"})]})}const rQ=()=>Math.random().toString(36).substring(2,8).toUpperCase(),CW=async(t,e,n)=>{if(!t)throw new Error("User not authenticated");const r=rQ(),s={name:e,leaderId:t.uid,leaderName:t.displayName||t.email,members:[t.uid],memberDetails:{[t.uid]:{name:t.displayName||t.email,role:"leader",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}},carnivalId:n,inviteCode:r,createdAt:fg(),sharedItinerary:[]};console.log("Attempting to create squad doc...",s);const i=await _c(cn(Te,"squads"),s);console.log("Squad doc created with ID:",i.id);const o=ze(Te,"users",t.uid);return console.log("Updating user profile for squad:",t.uid),await Gn(o,{currentSquadId:i.id},{merge:!0}),console.log("User profile updated."),{id:i.id,...s}},EW=async(t,e)=>{if(console.log("joinSquadByCode started",{uid:t==null?void 0:t.uid,inviteCode:e}),!t)throw new Error("Must be logged in");const n=cn(Te,"squads"),r=HA(n,mh("inviteCode","==",e.toUpperCase())),s=await Li(r);if(s.empty)throw new Error("Invalid Squad Code");const i=s.docs[0],o=i.id,l=i.data();console.log("Squad found:",{squadId:o,squadData:l});const c=ze(Te,"squads",o),h=t.displayName||t.email||"Unknown User";console.log("Adding user to squad:",h),!l.members||!l.members.includes(t.uid)?(await TA(c,{members:Q2(t.uid),[`memberDetails.${t.uid}`]:{name:h,role:"member",photoURL:t.photoURL||null,joinedAt:new Date().toISOString()}}),console.log("Squad doc updated")):console.log("User already in squad (skipping array update)");const m=ze(Te,"users",t.uid);return await Gn(m,{currentSquadId:o},{merge:!0}),console.log("User profile updated with squadId:",o),{id:o,...l}},IW=async(t,e)=>{if(!t||!e)return;const n=ze(Te,"squads",e),r=ze(Te,"users",t.uid);await TA(n,{members:P2(t.uid)}),await TA(r,{currentSquadId:null})},TW=async(t,e)=>{if(!t||!e)throw new Error("Missing required parameters");const n=ze(Te,"squads",e),r=await Is(n);if(!r.exists())throw new Error("Squad not found");if(r.data().leaderId!==t)throw new Error("Only the squad leader can regenerate the invite code");const i=rQ();return await TA(n,{inviteCode:i}),console.log(`New invite code generated for squad ${e}: ${i}`),i},SW=async t=>{if(!t)throw new Error("User ID required");const e=cn(Te,"squads"),n=HA(e,mh("members","array-contains",t)),r=await Li(n),s=[];return r.forEach(i=>{var l;const o=i.data();s.push({id:i.id,name:o.name||"Unnamed Squad",carnivalId:o.carnivalId,memberCount:((l=o.members)==null?void 0:l.length)||0,isLeader:o.leaderId===t,inviteCode:o.inviteCode})}),s},dT=async(t,e)=>{if(!t)throw new Error("User ID required");const n=ze(Te,"users",t);await Gn(n,{currentSquadId:e},{merge:!0})},Vf="carnival-planner-v1",kW="price_1SanHUJR9xpdRiXijLesRPVt",NW="price_1SanMhJR9xpdRiXinv2F9knM",hT={trinidad:[{title:"Soca Brainwash",note:"The main event. Bring drinks."},{title:"AM Bush",note:"J'ouvert style. Wear old clothes."},{title:"Phuket",note:"All inclusive."},{title:"Soaka Street Festival",note:"Iron park."}],stlucia:[{title:"Remedy",note:"Beachside."},{title:"Mess",note:"Paint and Powder."},{title:"Indulgence",note:"Breakfast fete."}],default:[{title:"Catamaran Cruise",note:"Boat ride."},{title:"J'ouvert",note:"Paint and powder."},{title:"Monday Mas",note:"On the road."}]};function UW(){var Pr,Ue,Zn,hr,fr,ga,ws;const[t,e]=R.useState(null),[n,r]=R.useState(!1),[s,i]=R.useState({}),[o,l]=R.useState(null),[c,h]=R.useState("Budget"),[m,g]=R.useState(!1),[y,B]=R.useState(!0),[b,x]=R.useState(!1),[S,I]=R.useState(!0),[E,U]=R.useState(!1),[M,H]=R.useState(""),[O,T]=R.useState(""),[C,N]=R.useState(""),[Q,D]=R.useState(""),[K,j]=R.useState(""),[X,J]=R.useState(""),[oe,Ae]=R.useState(""),[G,ae]=R.useState({band:"",section:"",total:"",paid:""}),[ee,we]=R.useState(""),[de,me]=R.useState(""),[pe,he]=R.useState([]),[ie,Qe]=R.useState(null),[Je,Nr]=R.useState(null),[Ht,$n]=R.useState(!1),[Qn,vt]=R.useState(!1),[xt,et]=R.useState(""),[un,_t]=R.useState(""),[yn,VA]=R.useState([]),[_o,di]=R.useState(!1),Bo=async()=>{const{DEMO_USER:P,DEMO_CARNIVALS:q,DEMO_SQUAD:ne}=await ow(async()=>{const{DEMO_USER:Be,DEMO_CARNIVALS:Re,DEMO_SQUAD:Oe}=await import("./demoData-59eL2sCn.js");return{DEMO_USER:Be,DEMO_CARNIVALS:Re,DEMO_SQUAD:Oe}},[]);r(!0),e(P),i(q),l("trinidad"),he(ne),g(!0),B(!1),Yt(q.trinidad)},Ps=()=>{r(!1),e(null),i({}),l(null),he([]),g(!1),B(!0),Yt(null)};R.useEffect(()=>{new URLSearchParams(window.location.search).get("demo")==="true"&&Bo()},[]);const bo=async()=>{if(n){alert("This feature is simulated in Demo Mode.");return}if(t){$n(!0),et("");try{const P=await CW(t,`${t.displayName||"User"}'s Squad`,o);Qe(P),we(P.inviteCode),Pn("Only Premium users can lead a squad!")}catch(P){console.error("Error creating squad:",P),et(`Failed: ${P.message}`)}finally{$n(!1)}}},KA=async()=>{if(n){alert("Joining squads is simulated in Demo Mode.");return}if(!t||!de)return;const P=de.trim().toUpperCase();vt(!0),et(""),console.log("HandleJoinSquad: Attempting to join with code:",P);try{const q=await EW(t,P);console.log("HandleJoinSquad: Join success. Squad result:",q),q||console.warn("HandleJoinSquad: No squad object returned, but execution did not throw. Assuming success via listener."),_t("Joined Squad!"),me("")}catch(q){console.error("Error joining squad:",q),et(q.message||"Invalid code")}finally{vt(!1)}},Vt=async()=>{if(n){confirm("Exit Demo Mode?")&&Ps();return}if(!(!t||!ie)&&confirm("Are you sure you want to leave this squad?")){const P=ie.id;await IW(t,P);const q=yn.filter(ne=>ne.id!==P);q.length>0?(await dT(t.uid,q[0].id),Pn(`Switched to ${q[0].name}`)):(Qe(null),he([])),Rs()}},nn=async(P,q)=>{if(n){alert("Member removal is disabled in Demo Mode.");return}if(!(!t||!ie)){if(ie.leaderId!==t.uid){alert("Only the squad leader can remove members.");return}if(confirm(`Remove ${q} from your squad?`))try{if(await ys(t.uid,ie.id,P),Pn(`${q} has been removed from the squad.`),confirm(`${q} was removed.

Would you like to generate a new invite code?
(This prevents them from rejoining with the old code)`)){const ne=await TW(t.uid,ie.id);we(ne),Pn(`New invite code: ${ne}`)}}catch(ne){console.error("Error removing member:",ne),alert(`Failed to remove member: ${ne.message}`)}}},Rs=async()=>{if(!(!t||n)){di(!0);try{const P=await SW(t.uid);VA(P)}catch(P){console.error("Failed to load user squads:",P)}finally{di(!1)}}},GA=async P=>{if(!(!t||n)&&P!==(ie==null?void 0:ie.id))try{await dT(t.uid,P),Pn("Switched squad!")}catch(q){console.error("Failed to switch squad:",q),alert("Failed to switch squad: "+q.message)}},[hi,Pn]=R.useState(null),[Ls,Co]=R.useState(!0),[fi,mi]=R.useState(!1),[Eo,js]=R.useState(navigator.onLine);R.useEffect(()=>{const P=()=>js(!0),q=()=>js(!1);return window.addEventListener("online",P),window.addEventListener("offline",q),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",q)}},[]);const[la,Ur]=R.useState(null),[Io,Ds]=R.useState(()=>!localStorage.getItem("carnival-planner-welcomed")),[ca,ua]=R.useState(!1),[Yn,da]=R.useState(null),[ha,To]=R.useState(!1),[gi,Os]=R.useState(!1),[Pt,pi]=R.useState([]),[yi,Ms]=R.useState(!1),[Xn,Ee]=R.useState(null),fs=[{id:"stkitts-sugar-mas",name:"St. Kitts (Sugar Mas)",monthIndex:0},{id:"stcroix",name:"St. Croix Carnival",monthIndex:0},{id:"trinidad",name:"Trinidad Carnival",monthIndex:1},{id:"dominica",name:"Dominica (Mas Domnik)",monthIndex:1},{id:"jamaica",name:"Jamaica Carnival",monthIndex:3},{id:"tampa",name:"Tampa Bay Carnival",monthIndex:3},{id:"stmaarten",name:"St. Maarten Carnival",monthIndex:3},{id:"cayman-batabano",name:"Cayman Batabano",monthIndex:4},{id:"stthomas",name:"St. Thomas Carnival",monthIndex:4},{id:"atlanta",name:"Atlanta Caribbean Carnival",monthIndex:4},{id:"guyana",name:"Guyana Independence",monthIndex:4},{id:"bahamas",name:"Bahamas Carnival",monthIndex:5},{id:"bermuda",name:"Bermuda Carnival",monthIndex:5},{id:"hollywood",name:"Hollywood Carnival",monthIndex:5},{id:"caymas",name:"Caymas Carnival",monthIndex:5},{id:"vincymas",name:"St. Vincent (Vincy Mas)",monthIndex:6},{id:"stlucia",name:"St. Lucia Carnival",monthIndex:6},{id:"toronto",name:"Toronto (Caribana)",monthIndex:7},{id:"barbados",name:"Barbados Crop Over",monthIndex:7},{id:"nevis",name:"Nevis Culturama",monthIndex:7},{id:"antigua",name:"Antigua Carnival",monthIndex:7},{id:"grenada",name:"Grenada Spicemas",monthIndex:7},{id:"ny-labor-day",name:"New York Carnival",monthIndex:8},{id:"japan",name:"Japan Caribbean",monthIndex:8},{id:"miami",name:"Miami Carnival",monthIndex:9},{id:"tobago",name:"Tobago Carnival",monthIndex:10}],So=["bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500","bg-gradient-to-r from-green-400 to-blue-500","bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500","bg-gradient-to-r from-teal-400 to-cyan-500","bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500","bg-gradient-to-r from-purple-600 to-indigo-600"],ko=["January","February","March","April","May","June","July","August","September","October","November","December"];R.useEffect(()=>{S?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[S]),R.useEffect(()=>{if(!t||n)return;(async()=>{try{const q=ze(Te,"users",t.uid,"preferences","theme"),ne=await Is(q);if(ne.exists()){const Be=ne.data();typeof Be.darkMode=="boolean"&&I(Be.darkMode)}}catch(q){console.log("Could not load theme preference:",q)}})()},[t,n]);const wi=async P=>{if(!(!t||n))try{const q=ze(Te,"users",t.uid,"preferences","theme");await Gn(q,{darkMode:P,updatedAt:qe.now()},{merge:!0})}catch(q){console.log("Could not save theme preference:",q)}},fa=()=>{const P=!S;I(P),wi(P)};R.useEffect(()=>{if(n)return;const P=Lj(Ha,async q=>{if(e(q),q){console.log("[Analytics] Creating/updating user doc for:",q.uid,q.email);try{const ne=ze(Te,"users",q.uid);await Gn(ne,{lastLoginAt:qe.now(),email:q.email||null,displayName:q.displayName||null},{merge:!0}),console.log("[Analytics] User document updated successfully"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(Be=>{const{latitude:Re,longitude:Oe}=Be.coords;Gn(ne,{lastLocation:{lat:Re,lng:Oe},lastLocationAt:qe.now()},{merge:!0}).then(()=>console.log("Location saved")).catch(Ve=>console.error("Loc save error",Ve))},Be=>{console.log("Geolocation denied/error:",Be.message)})}catch(ne){console.error("[Analytics] Failed to update user doc:",ne.code,ne.message)}}});return()=>P()},[n]),R.useEffect(()=>{if(!t||n){Nr(null);return}const P=Zs(ze(Te,"users",t.uid),q=>{const ne=q.data(),Be=(ne==null?void 0:ne.currentSquadId)||null;Be!==Je&&(console.log("App: User changed squad to:",Be),Nr(Be))});return()=>P()},[t,n,Je]),R.useEffect(()=>{t&&!n&&Rs()},[t,n,Je]),R.useEffect(()=>{if(!t||n)return;if(!Je){console.log("App: No target squad, clearing state."),Qe(null),he([]),Yt(null);return}console.log("App: Subscribing to squad:",Je);const P=Zs(ze(Te,"squads",Je),q=>{if(q.exists()){const ne=q.data();console.log("App: Squad loaded:",q.id),Qe({id:q.id,...ne}),Yt(ne);const Be=Object.values(ne.memberDetails||{});he(Be),we(ne.inviteCode)}else console.warn("App: Target squad does not exist/deleted:",Je),Qe(null),Yt(null),he([]),we("")});return()=>{console.log("App: Unsubscribing from squad:",Je),P(),we("")}},[Je,t,n]),R.useEffect(()=>{!ie&&pe.length>0&&(console.warn("App: DETECTED GHOST MEMBERS! Self-healing state."),he([]),we(""))},[ie,pe]),R.useEffect(()=>{if(!t){n||g(!1);return}if(n){g(!0);return}const P=["djkrss1@gmail.com","maikacooke@gmail.com"];P.includes(t.email)&&g(!0);const q=ze(Te,"users",t.uid,"apps",Vf),ne=Zs(q,Be=>{if(P.includes(t.email)){g(!0);return}if(Be.exists()){const Re=Be.data();g(!!Re.premiumActive)}else g(!1)});return()=>ne()},[t,n]);const[Hs,Cn]=R.useState(!1);R.useEffect(()=>{if(!t){Cn(!1);return}(async()=>{if(n){Cn(!0);return}if(t.email==="djkrss1@gmail.com"){Cn(!0);return}try{const q=ze(Te,"admins",t.uid),ne=await Is(q);Cn(ne.exists())}catch(q){console.error("Admin check failed:",q),Cn(!1)}})()},[t,n]),R.useEffect(()=>{if(!t){n||(i({}),l(null));return}if(n)return;const P=cn(Te,"users",t.uid,"apps",Vf,"carnivals"),q=Zs(P,ne=>{const Be={};ne.forEach(Re=>{Be[Re.id]=Re.data()}),i(Be),!o&&ne.docs.length>0&&l(ne.docs[0].id)});return()=>q()},[t,n]),R.useEffect(()=>{if(!t||n){da(null);return}(async()=>{try{const q=await Is(ze(Te,"userProfiles",t.uid));q.exists()&&da({id:q.id,...q.data()})}catch(q){console.log("Could not load profile:",q)}})()},[t,n]),R.useEffect(()=>{n||cD(Ha).catch(P=>console.error(P))},[n]),R.useEffect(()=>{if(!t||n)return;(async()=>{try{const ne=await l6("BLbW7EjHjQ9_YjKrRbJwgBgRqnkSmZsXMnEWTQZpqYwSRbVgYLmXW5RvXA2_aS3vH9XJpCxHu4VmXnZL2wQxMvI");if(ne){const Be=on(Ft);await Dt(Be,"saveFcmToken")({fcmToken:ne}),console.log("FCM token saved")}}catch(q){console.log("Error setting up notifications:",q)}})(),c6(q=>{var ne,Be;console.log("Foreground message:",q),Pn({title:((ne=q.notification)==null?void 0:ne.title)||"Squad Alert",body:((Be=q.notification)==null?void 0:Be.body)||"Someone in your squad is Road Ready!"}),setTimeout(()=>Pn(null),5e3)})},[t,n]);const Fr=async()=>{const P=new Ri;try{await rD(Ha,P)}catch(q){console.error("Sign in error:",q)}},zA=async()=>{if(n){Ps();return}await uk(Ha),B(!0),x(!1),h("Budget"),I(!0)},No=async P=>{if(n){alert("Subscriptions are disabled in Demo Mode.");return}if(!t){alert("You must be signed in to subscribe.");return}const q=P==="yearly"?"yearly":"monthly",ne=q==="yearly"?NW:kW;U(!0);try{const Be=on(Ft),Re=Dt(Be,"createCheckoutSession");console.log(`Starting checkout... Interval: ${q}, PriceID: ${ne}`);const Oe=await Re({priceId:ne,success_url:window.location.origin,cancel_url:window.location.origin}),{data:Ve}=Oe||{};Ve&&(Ve.url||Ve.checkoutUrl)?window.location.href=Ve.url||Ve.checkoutUrl:(console.error("No checkout URL returned:",Ve),alert("Unable to start checkout. Please try again."))}catch(Be){console.error("Error starting checkout:",Be),alert("There was a problem starting your checkout: "+Be.message)}finally{U(!1)}},Uo=async(P,q)=>{if(t){if(l(P),n){s[P]?P==="trinidad"&&s.trinidad?Yt(s.trinidad):Yt(null):(i(ne=>({...ne,[P]:{name:q,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:new Date().toISOString()}})),Yt(null));return}if(!s[P])try{const ne=ze(Te,"users",t.uid,"apps",Vf,"carnivals",P);await Gn(ne,{name:q,budget:[],schedule:[],packing:[],squad:[],costume:null,createdAt:qe.now()},{merge:!0})}catch(ne){console.error(ne)}}},ur=(Pr=s[o])==null?void 0:Pr.sharedPlanId,Kt=!!ur,[dr,Yt]=R.useState(null),[vi,Fo]=R.useState(!1),ma=async()=>{if(!n){if(!ur||!t){Yt(null);return}Fo(!0);try{const P=on(Ft),ne=await Dt(P,"getSharedCarnivalData")({planId:ur,uid:t.uid});Yt(ne.data)}catch(P){console.log("Could not load shared carnival data:",P.message),Yt(null)}finally{Fo(!1)}}};R.useEffect(()=>{ur&&!n?ma():n||Yt(null)},[ur,t,n]);const st=async(P,q,ne="set")=>{var Re;if(!t||!o)return;if(n){const Oe=Ve=>{let dn=q;return ne==="add"&&Array.isArray(Ve[P])?dn=[...Ve[P]||[],...q]:ne==="remove"&&Array.isArray(Ve[P])?dn=(Ve[P]||[]).filter(En=>En.id!==q.id):ne==="update"&&Array.isArray(Ve[P])&&q.id!==void 0&&(dn=(Ve[P]||[]).map(En=>En.id===q.id?{...En,...q}:En)),ne==="set"&&(dn=q),{...Ve,[P]:dn}};Kt?(Yt(Ve=>Oe(Ve)),i(Ve=>({...Ve,[o]:Oe(Ve[o])}))):i(Ve=>({...Ve,[o]:Oe(Ve[o])}));return}if(ur&&["budget","schedule","packing","costume","squad"].includes(P))try{const Oe=on(Ft),dn=await Dt(Oe,"updateSharedCarnivalData")({planId:ur,field:P,data:q,action:ne,uid:t.uid,userEmail:t.email});(Re=dn.data)!=null&&Re.data&&Yt(dn.data.data);return}catch(Oe){console.error("Error updating shared data:",Oe)}const Be=ze(Te,"users",t.uid,"apps",Vf,"carnivals",o);await TA(Be,{[P]:q})};R.useEffect(()=>{if(!t||!o||!m){pi([]);return}(async()=>{var q;Ms(!0);try{const ne=on(Ft),Re=await Dt(ne,"getScrapedEvents")({carnivalId:o});(q=Re.data)!=null&&q.success?(pi(Re.data.events||[]),Ee(Re.data.lastScrapedAt)):(pi([]),Ee(null))}catch(ne){console.log("Error fetching scraped events:",ne),pi([])}finally{Ms(!1)}})()},[t,o,m]);const ms=async()=>{var P,q;if(x(!0),m&&Ls&&Se){mi(!0);try{const ne=on(Ft),Re=await Dt(ne,"sendRoadReadyAlert")({carnivalId:o,carnivalName:Se.name,userName:(t==null?void 0:t.displayName)||((P=t==null?void 0:t.email)==null?void 0:P.split("@")[0])||"Squad Member"});((q=Re.data)==null?void 0:q.notified)>0&&(Pn({title:"Squad Notified!",body:`${Re.data.notified} squad member(s) alerted that you're Road Ready!`}),setTimeout(()=>Pn(null),5e3))}catch(ne){console.log("Error sending Road Ready alert:",ne)}finally{mi(!1)}}},xi=()=>{var q;if(!M.trim()||!O)return;const P={id:Date.now().toString(),name:M.trim(),cost:parseFloat(O)};if(Kt)st("budget",[P],"add");else{const ne=((q=s[o])==null?void 0:q.budget)||[];st("budget",[...ne,P])}H(""),T("")},_i=P=>{var q;if(Kt)st("budget",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.budget)||[];st("budget",ne.filter(Be=>Be.id!==P))}},Qo=()=>{var q;if(!C.trim()||!Q)return;const P={id:Date.now().toString(),title:C.trim(),datetime:Q,note:K.trim()};if(Kt)st("schedule",[P],"add");else{const ne=((q=s[o])==null?void 0:q.schedule)||[];st("schedule",[...ne,P])}N(""),D(""),j("")},Po=P=>{var q;if(Kt)st("schedule",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.schedule)||[];st("schedule",ne.filter(Be=>Be.id!==P))}},gs=P=>{var Re;const q=new Date;q.setDate(q.getDate()+1),q.setHours(12,0,0,0);const ne=q.toISOString().slice(0,16),Be={id:Date.now().toString(),title:P.title,datetime:ne,note:P.note||"Added from curated list"};if(Kt)st("schedule",[Be],"add");else{const Oe=((Re=s[o])==null?void 0:Re.schedule)||[];st("schedule",[...Oe,Be])}},He=()=>{var q;if(!X.trim())return;const P={id:Date.now().toString(),item:X.trim(),checked:!1};if(Kt)st("packing",[P],"add");else{const ne=((q=s[o])==null?void 0:q.packing)||[];st("packing",[...ne,P])}J("")},lt=P=>{var Be;const q=Kt?(dr==null?void 0:dr.packing)||[]:((Be=s[o])==null?void 0:Be.packing)||[],ne=q.find(Re=>Re.id===P);ne&&(Kt?st("packing",{id:P,checked:!ne.checked},"update"):st("packing",q.map(Re=>Re.id===P?{...Re,checked:!Re.checked}:Re)))},Bi=P=>{var q;if(Kt)st("packing",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.packing)||[];st("packing",ne.filter(Be=>Be.id!==P))}},ps=()=>{var q;if(!oe.trim())return;const P={id:Date.now().toString(),name:oe.trim()};if(Kt)st("squad",[P],"add");else{const ne=((q=s[o])==null?void 0:q.squad)||[];st("squad",[...ne,P])}Ae("")},ys=P=>{var q;if(Kt)st("squad",{id:P},"remove");else{const ne=((q=s[o])==null?void 0:q.squad)||[];st("squad",ne.filter(Be=>Be.id!==P))}};R.useEffect(()=>{const P=o?s[o]:null;P!=null&&P.shareCode?we(P.shareCode):we("")},[o,s]);const Ro=()=>{ee&&(navigator.clipboard.writeText(ee),_t("Code copied to clipboard!"),setTimeout(()=>_t(""),2e3))},Le=()=>{st("costume",{...G,total:parseFloat(G.total)||0,paid:parseFloat(G.paid)||0,updatedAt:Date.now()}),alert("Costume details saved!")},gt=()=>{if(!Se)return;const P=[];P.push(`CARNIVAL PLANNER: ${Se.name}`),P.push(`==========================================
`),P.push("-- SQUAD --"),(Se.squad||[]).forEach(Oe=>P.push(`- ${Oe.name}`)),P.push(`
`),P.push("-- COSTUME --"),Se.costume?(P.push(`Band: ${Se.costume.band}`),P.push(`Section: ${Se.costume.section}`),P.push(`Balance Due: $${((Se.costume.total||0)-(Se.costume.paid||0)).toFixed(2)}`)):P.push("No costume details."),P.push(`
`),P.push("-- SCHEDULE --"),(Se.schedule||[]).slice().sort((Oe,Ve)=>new Date(Oe.datetime)-new Date(Ve.datetime)).forEach(Oe=>P.push(`${new Date(Oe.datetime).toLocaleString()} | ${Oe.title}`));const ne=new Blob([P.join(`
`)],{type:"text/plain"}),Be=URL.createObjectURL(ne),Re=document.createElement("a");Re.href=Be,Re.download=`${Se.name.replace(/\s+/g,"_")}_Plan.txt`,Re.click()},Qr=o?s[o]:null,Se=Qr?{...Qr,...Kt&&dr?{budget:dr.budget||Qr.budget||[],schedule:dr.schedule||Qr.schedule||[],packing:dr.packing||Qr.packing||[],costume:dr.costume||Qr.costume,squad:dr.squad||Qr.squad||[]}:{}}:null,Bt=((Ue=Se==null?void 0:Se.budget)==null?void 0:Ue.reduce((P,q)=>P+(q.cost||0),0))||0,bi=Se!=null&&Se.costume?Se.costume.total-Se.costume.paid:0,Yr=Se?hT[o]||hT.default:[];if(la){const P={onBack:()=>Ur(null),logo:ff};switch(la){case"privacy":return A.jsx(xK,{...P});case"terms":return A.jsx(_K,{...P});case"cookies":return A.jsx(BK,{...P});case"refund":return A.jsx(bK,{...P});case"contact":return A.jsx(EK,{...P,user:t});default:Ur(null)}}if(y&&!t)return A.jsx(vK,{onGetStarted:()=>B(!1),logo:ff,onLegalPage:Ur,onTryDemo:Bo});if(t&&b&&Se){const P=(Se.schedule||[]).slice().sort((q,ne)=>new Date(q.datetime)-new Date(ne.datetime)).find(q=>new Date(q.datetime)>new Date);return A.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6 flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsx("h1",{className:"text-2xl font-bold italic",children:"ROAD MODE"}),A.jsx("button",{onClick:()=>x(!1),className:"text-sm bg-gray-800 px-3 py-1 rounded",children:"Exit"})]}),A.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[A.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 rounded-2xl shadow-lg",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-1",children:"Up Next"}),P?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-3xl font-black mb-1",children:P.title}),A.jsx("div",{className:"text-xl opacity-90",children:new Date(P.datetime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),A.jsx("div",{className:"mt-2 text-sm bg-white/20 inline-block px-2 py-1 rounded",children:P.note||"No notes"})]}):A.jsx("div",{className:"text-xl italic opacity-75",children:"No more fetes scheduled! Sleep time?"})]}),A.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700",children:[A.jsx("h2",{className:"text-sm font-bold opacity-75 uppercase tracking-wider mb-2",children:"Costume Pickup"}),Se.costume?A.jsxs("div",{children:[A.jsx("div",{className:"text-xl font-bold text-yellow-400",children:Se.costume.band}),A.jsxs("div",{className:"text-gray-400",children:["Section: ",Se.costume.section]}),bi>0&&A.jsxs("div",{className:"text-red-400 font-bold mt-1",children:["Balance Due: $",bi]})]}):A.jsx("div",{className:"text-gray-500 italic",children:"No costume details saved."})]})]})]})}return A.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[hi&&A.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slideIn",children:A.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-xl shadow-2xl max-w-sm",children:A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:hi.title}),A.jsx("p",{className:"text-sm opacity-90",children:hi.body})]}),A.jsx("button",{onClick:()=>Pn(null),className:"ml-2 text-white/70 hover:text-white",children:""})]})})}),A.jsx(CK,{}),A.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm py-4 px-4 flex justify-between items-center sticky top-0 z-20 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("img",{src:ff,alt:"Logo",className:"w-8 h-8"}),A.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white hidden sm:block",children:"Carnival Planner"})]}),t&&A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:fa,className:"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-yellow-300",children:S?"":""}),n&&A.jsx("button",{onClick:Ps,className:"px-3 py-1 text-xs font-bold rounded-full bg-red-100 text-red-700 hover:bg-red-200 border border-red-200 transition-colors",children:"EXIT DEMO"}),Se&&A.jsx("button",{onClick:ms,disabled:fi,className:"px-3 py-1 text-xs font-bold rounded-full transition bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-200 disabled:opacity-50",children:fi?"...":"GO ROAD READY"}),m?A.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full font-bold",children:"Premium"}):A.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Free Plan"}),A.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${Eo?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300"}`,children:[A.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Eo?"bg-green-500":"bg-orange-500 animate-pulse"}`}),Eo?"Online":"Offline Mode"]}),A.jsx("button",{onClick:zA,className:"text-sm font-medium text-gray-500 hover:text-red-500 dark:text-gray-400",children:"Sign Out"})]})]}),t&&A.jsx(bW,{user:t}),A.jsx("main",{className:"flex-1 p-4 max-w-4xl mx-auto w-full",children:t?A.jsxs("div",{children:[A.jsx("div",{className:"mb-8",children:A.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x",children:fs.map((P,q)=>{const ne=o===P.id,Be=So[q%So.length],Oe={"stkitts-sugar-mas":"Sugar Mas",stcroix:"St. Croix Carnival",trinidad:"Trinidad Carnival",dominica:"Mas Domnik",jamaica:"Jamaica Carnival",tampa:"Tampa Bay Carnival",stmaarten:"St. Maarten Carnival","cayman-batabano":"Cayman Carnival Batabano",stthomas:"St. Thomas Carnival",atlanta:"Atlanta Caribbean Carnival",guyana:"Guyana Independence",bahamas:"Bahamas Carnival",bermuda:"Bermuda Carnival",hollywood:"Hollywood Carnival",caymas:"Caymas Carnival",vincymas:"Vincy Mas",stlucia:"Saint Lucia Carnival",toronto:"Toronto Caribbean Carnival",barbados:"Crop Over",nevis:"Nevis Culturama",antigua:"Antigua Carnival",grenada:"Spice Mas","ny-labor-day":"New York Carnival",japan:"Japan Caribbean Carnival",miami:"Miami Carnival",tobago:"Tobago Carnival"}[P.id]||P.name,Ve=H0.find(En=>En.name.toLowerCase().includes(Oe.toLowerCase())||Oe.toLowerCase().includes(En.name.split("(")[0].trim().toLowerCase()));let dn=null;if(Ve){const En=new Date,Ne=new Date(En.getFullYear(),En.getMonth(),En.getDate()),[mr,at,qA]=Ve.date.split("-").map(Number),Jn=new Date(mr,at-1,qA);Jn>=Ne&&(dn=Math.round((Jn-Ne)/(1e3*60*60*24)))}return A.jsx("div",{onClick:()=>Uo(P.id,`${P.name} - ${ko[P.monthIndex]}`),className:`snap-center min-w-[200px] cursor-pointer rounded-2xl p-5 shadow-lg relative overflow-hidden transition-all duration-300 ${ne?"ring-4 ring-offset-2 ring-blue-400 scale-105":"hover:scale-105 opacity-90"} ${Be}`,children:A.jsxs("div",{className:"relative z-10 text-white",children:[A.jsx("h4",{className:"font-bold text-lg leading-tight mb-1",children:P.name}),A.jsx("p",{className:"text-xs font-medium uppercase tracking-wider opacity-90",children:ko[P.monthIndex]}),Ve&&A.jsx("p",{className:"text-xs font-medium opacity-80 mt-1",children:new Date(Ve.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),dn!==null&&A.jsxs("div",{className:"mt-2 bg-white/20 backdrop-blur-sm rounded-lg px-2 py-1 inline-block",children:[A.jsx("span",{className:"text-lg font-black",children:dn}),A.jsx("span",{className:"text-xs ml-1 opacity-90",children:"days"})]})]})},P.id)})})}),Se?A.jsxs(A.Fragment,{children:[A.jsx(zI,{user:t,activeCarnivalId:o,carnivalData:H0,scrapedEvents:Pt,squadMembers:pe,budgetTotal:2e4,budgetSpent:Bt,isPremium:m,onAction:h}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden transition-colors",children:[!m&&A.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-pink-500 p-4 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-bold text-sm",children:"Unlock Premium Features"}),A.jsx("p",{className:"text-white/80 text-xs",children:"Go ad-free and get a Premium badge!"})]})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-4 py-2 bg-white text-orange-600 font-bold text-sm rounded-full hover:bg-gray-100 transition",children:"Upgrade"})]}),!m&&A.jsx("div",{className:"border-b border-gray-100 dark:border-gray-700",children:A.jsx(pf,{placement:"banner",onUpgradeClick:()=>h("Info")})}),A.jsx("div",{className:"flex border-b border-gray-100 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:["Budget","Costume","Bands","Schedule","Squad","Passport","Packing","Map","Media","Profile","Promoter","Marketing","Info"].filter(P=>(m||!["Map","Media","Passport"].includes(P))&&(Hs||P!=="Marketing")).map(P=>A.jsxs("button",{onClick:()=>{console.log("Switching to tab:",P,"isPremium:",m),h(P)},className:`flex-shrink-0 px-3 sm:px-4 py-3 sm:py-4 text-xs sm:text-sm font-medium transition-colors relative whitespace-nowrap ${c===P?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[P,["Map","Media","Passport"].includes(P)&&A.jsx("span",{className:"ml-1 text-xs text-yellow-500",children:""}),c===P&&A.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400"})]},P))}),Kt&&A.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 px-4 py-2 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-white text-lg",children:""}),A.jsxs("div",{children:[A.jsx("p",{className:"text-white font-medium text-sm",children:"Squad Mode Active"}),A.jsxs("p",{className:"text-white/80 text-xs",children:["Changes sync with ",pe.length," squad member(s)"]})]})]}),A.jsx("button",{onClick:ma,disabled:vi,className:"px-3 py-1 bg-white/20 text-white text-xs font-medium rounded-full hover:bg-white/30 transition disabled:opacity-50",children:vi?"Syncing...":"Refresh"})]}),A.jsxs("div",{className:"p-6",children:[c==="Budget"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-end mb-6",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Budget"}),A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Estimate"}),A.jsxs("p",{className:"text-2xl font-black text-green-600 dark:text-green-400",children:["$",Bt.toFixed(2)]})]})]}),A.jsx("div",{className:"space-y-3 mb-6",children:(Se.budget||[]).map(P=>{var q;return A.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg group hover:bg-gray-100 dark:hover:bg-gray-600",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:P.name}),P.addedBy&&Kt&&A.jsxs("span",{className:"ml-2 text-xs text-gray-400 dark:text-gray-500",children:["by ",((q=P.addedBy.email)==null?void 0:q.split("@")[0])||"squad member"]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["$",P.cost.toFixed(2)]}),A.jsx("button",{onClick:()=>_i(P.id),className:"text-gray-400 hover:text-red-500",children:""})]})]},P.id)})}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsxs("div",{className:"flex gap-2 flex-1",children:[A.jsx("input",{type:"text",placeholder:"Item",value:M,onChange:P=>H(P.target.value),className:"flex-[2] p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("input",{type:"number",placeholder:"0.00",value:O,onChange:P=>T(P.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"})]}),A.jsx("button",{onClick:xi,className:"w-full sm:w-auto px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!m&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(pf,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),c==="Bands"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(wK,{carnivalId:o})}),c==="Costume"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Mas Costume"}),A.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl border border-pink-100 dark:border-pink-900 mb-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Band Name"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.band||((Zn=Se.costume)==null?void 0:Zn.band)||"",onChange:P=>ae({...G,band:P.target.value}),placeholder:"e.g. Tribe, Bliss..."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Section"}),A.jsx("input",{type:"text",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.section||((hr=Se.costume)==null?void 0:hr.section)||"",onChange:P=>ae({...G,section:P.target.value}),placeholder:"e.g. The Monarch"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Total Cost"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.total||((fr=Se.costume)==null?void 0:fr.total)||"",onChange:P=>ae({...G,total:P.target.value}),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-pink-800 dark:text-pink-300 uppercase mb-1",children:"Amount Paid"}),A.jsx("input",{type:"number",className:"w-full p-2 border border-pink-200 dark:border-pink-800 rounded dark:bg-gray-700 dark:text-white",value:G.paid||((ga=Se.costume)==null?void 0:ga.paid)||"",onChange:P=>ae({...G,paid:P.target.value}),placeholder:"0.00"})]})]}),A.jsx("button",{onClick:Le,className:"mt-4 w-full py-2 bg-pink-600 text-white font-bold rounded hover:bg-pink-700",children:"Save Details"})]})]}),c==="Schedule"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Itinerary"}),Yr.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Popular Events (Click to Add)"}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Yr.map((P,q)=>A.jsxs("button",{onClick:()=>gs(P),className:"min-w-[140px] p-3 text-left rounded-lg border transition bg-blue-50 dark:bg-blue-900/30 border-blue-100 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-800",children:[A.jsx("div",{className:"font-bold text-blue-900 dark:text-blue-300 text-sm",children:P.title}),A.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400 opacity-75 truncate",children:P.note})]},q))})]}),m?A.jsxs("div",{className:"mb-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase flex items-center gap-1",children:[A.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Live Events from Fete Sites"]}),Xn&&A.jsxs("span",{className:"text-xs text-gray-400",children:["Updated: ",new Date(Xn).toLocaleDateString()]})]}),yi?A.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[A.jsx("div",{className:"animate-spin inline-block w-5 h-5 border-2 border-emerald-500 border-t-transparent rounded-full mb-2"}),A.jsx("p",{className:"text-sm",children:"Loading live events..."})]}):Pt.length>0?A.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Pt.slice(0,10).map((P,q)=>A.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg hover:shadow-md transition",children:[P.image&&A.jsx("img",{src:P.image,alt:"",className:"w-12 h-12 rounded object-cover flex-shrink-0"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h5",{className:"font-bold text-emerald-900 dark:text-emerald-300 text-sm truncate",children:P.title}),P.date&&A.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-400",children:[new Date(P.date+"T00:00:00").toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),P.time&&` at ${P.time}`]}),P.venue&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:P.venue}),A.jsxs("p",{className:"text-xs text-gray-400",children:["via ",P.source]})]}),A.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[P.url&&A.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 text-xs bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Tickets"}),A.jsx("button",{onClick:()=>gs({title:P.title,note:P.venue||`via ${P.source}`}),className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"+ Add"})]})]},P.id||q))}):A.jsxs("div",{className:"text-center py-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[A.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-400",children:"No live events found for this carnival yet."}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Events are updated daily from fetelist.com & frontlineticketing.com"})]})]}):A.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-bold text-amber-900 dark:text-amber-300",children:"Unlock Live Event Listings"}),A.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"Premium members get daily-updated fete listings from fetelist.com & frontlineticketing.com"})]}),A.jsx("button",{onClick:()=>h("Info"),className:"px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-sm font-bold rounded-lg hover:opacity-90 flex-shrink-0",children:"Upgrade"})]})}),A.jsx("div",{className:"space-y-4 mb-6",children:(Se.schedule||[]).map(P=>{var q;return A.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-blue-400 relative group",children:[A.jsxs("div",{className:"text-center min-w-[60px]",children:[A.jsx("span",{className:"block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:new Date(P.datetime).toLocaleDateString(void 0,{month:"short"})}),A.jsx("span",{className:"block text-xl font-black text-gray-800 dark:text-white",children:new Date(P.datetime).getDate()}),A.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:new Date(P.datetime).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"font-bold text-gray-800 dark:text-white",children:P.title}),P.note&&A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:P.note}),P.addedBy&&Kt&&A.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Added by ",((q=P.addedBy.email)==null?void 0:q.split("@")[0])||"squad member"]})]}),A.jsx("button",{onClick:()=>Po(P.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100",children:""})]},P.id)})}),A.jsx("div",{className:"mb-6",children:A.jsx(hK,{onScheduleDetected:async P=>{if(console.log("Voice Command:",P),!t)return;const q={name:P.name,date:P.day+" "+P.time,note:P.note,completed:!1};try{await createScheduleItem(t,o,q);const ne={...s},Be=ne[o];Be&&(Be.schedule=[...Be.schedule||[],{id:Date.now().toString(),...q}],i(ne)),alert(`Added: ${P.name}`)}catch(ne){console.error("Voice Add Failed",ne),alert("Could not add voice event.")}}})}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Event Name (e.g. Scorch, Tribe)",value:C,onChange:P=>N(P.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Date/Time (e.g. Fri 2PM)",value:Q,onChange:P=>D(P.target.value),className:"p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("input",{type:"text",placeholder:"Type (Fete, Mas, transport...)",value:K,onChange:P=>j(P.target.value),className:"md:col-span-2 p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),A.jsx("button",{onClick:Qo,className:"md:col-span-2 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700",children:"Add Event"})]})]}),c==="Squad"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Your Squad"}),A.jsxs("span",{className:"text-sm bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:[((ws=Se.squad)==null?void 0:ws.length)||0," members"]})]}),yn.length>1&&A.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4 mb-4",children:[A.jsxs("h4",{className:"text-sm font-bold text-indigo-800 dark:text-indigo-300 mb-3 flex items-center gap-2",children:[A.jsx("span",{children:""})," My Squads (",yn.length,")"]}),A.jsx("div",{className:"grid gap-2",children:yn.map(P=>A.jsxs("button",{onClick:()=>GA(P.id),className:`w-full text-left p-3 rounded-lg border transition-all flex items-center justify-between ${(ie==null?void 0:ie.id)===P.id?"bg-indigo-100 dark:bg-indigo-900/40 border-indigo-400 dark:border-indigo-600":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/20"}`,children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:P.name}),P.isLeader&&A.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 px-1.5 py-0.5 rounded font-bold uppercase",children:"Leader"})]}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[P.memberCount," member",P.memberCount!==1?"s":""]})]}),(ie==null?void 0:ie.id)===P.id&&A.jsx("span",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded-full font-medium",children:"Active"})]},P.id))})]}),A.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl p-4 mb-6 shadow-lg border border-gray-700",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[A.jsx("span",{children:""})," Road Mode: Offline Chat"]}),A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Mesh chat for when cell service dies. Open Bitchat and join your squad channel."})]}),A.jsx("span",{className:"bg-blue-600 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:"No Data Needed"})]}),!o||!ie?A.jsx("div",{className:"text-center py-4 bg-white/5 rounded-lg border border-white/10",children:A.jsx("p",{className:"text-sm text-gray-300",children:"Create or join a squad to enable offline comms."})}):A.jsxs("div",{className:"space-y-4",children:[(()=>{const q=`#CP-${ie.id.slice(0,8).toUpperCase()}`;return A.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-white/10",children:[A.jsx("p",{className:"text-[10px] uppercase text-gray-400 font-bold mb-2",children:"Join this channel in Bitchat"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("p",{className:"font-mono text-2xl font-bold text-blue-400 tracking-wider select-all flex-1",children:q}),A.jsx("button",{onClick:()=>{navigator.clipboard.writeText(q),Pn("Channel name copied!")},className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold rounded-lg transition-colors",children:"Copy"})]})]})})(),A.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[A.jsxs("a",{href:"https://apps.apple.com/us/app/bitchat-mesh/id6748219622",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," iOS App"]}),A.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.bitchat.droid",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:""})," Android App"]})]})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4 mb-4",children:[A.jsxs("h4",{className:"font-bold text-purple-800 dark:text-purple-300 mb-3 flex items-center gap-2",children:[A.jsx("span",{children:""})," Squad Sharing"]}),xt&&A.jsx("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm",children:xt}),un&&A.jsx("div",{className:"mb-3 p-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-sm",children:un}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Share your carnival plan with friends:"}),ee?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-2xl font-mono font-bold text-purple-600 dark:text-purple-400 tracking-wider",children:ee}),A.jsx("button",{onClick:Ro,className:"text-sm bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 px-3 py-1 rounded hover:bg-purple-200",children:"Copy"})]}):A.jsx("button",{onClick:bo,disabled:Ht,className:"w-full py-2 bg-purple-600 text-white rounded font-medium hover:bg-purple-700 disabled:opacity-50",children:Ht?"Creating...":"Start a Squad"})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3",children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Join a friend's squad:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Enter 6-digit code",value:de,onChange:P=>me(P.target.value.toUpperCase().slice(0,6)),className:"flex-1 p-2 border rounded font-mono text-center tracking-wider uppercase dark:bg-gray-700 dark:border-gray-600 dark:text-white",maxLength:6}),A.jsx("button",{onClick:KA,disabled:Qn||de.length!==6,className:"bg-pink-600 text-white px-4 rounded hover:bg-pink-700 disabled:opacity-50",children:Qn?"...":"Join"})]})]})]}),ie&&A.jsx("div",{className:"mt-4 text-center",children:A.jsx("button",{onClick:Vt,className:"text-sm text-red-500 hover:text-red-700 underline",children:"Leave Squad"})})]}),m&&A.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:A.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:Ls,onChange:P=>Co(P.target.checked),className:"w-5 h-5 text-purple-600 rounded"}),A.jsxs("div",{children:[A.jsx("span",{className:"font-medium text-purple-800 dark:text-purple-300",children:"Notify squad when I go Road Ready"}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Send push notification to squad members"})]}),A.jsx("span",{className:"ml-auto text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full",children:"Premium"})]})}),pe.length>0&&A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-green-200 dark:border-green-800 rounded-xl p-4 mb-4",children:[A.jsx("div",{className:"flex items-center justify-between mb-3",children:A.jsxs("h4",{className:"font-medium text-green-700 dark:text-green-400 flex items-center gap-2",children:[A.jsx("span",{children:""})," Connected Squad Members"]})}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:'These users joined using your share code and can see this carnival plan. Click "Refresh" to check for new members.'}),A.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((P,q)=>{var ne;return A.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full border ${P.role==="leader"?"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800":"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800"}`,children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-bold",children:(P.name||P.email||P.uid||"?").charAt(0).toUpperCase()}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:`font-medium text-sm ${P.role==="leader"?"text-yellow-800 dark:text-yellow-300":"text-green-800 dark:text-green-300"}`,children:P.name||P.email||`User ${(ne=P.uid)==null?void 0:ne.slice(0,6)}...`}),A.jsx("span",{className:`text-xs ${P.role==="leader"?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:P.role==="leader"?" Leader":" Member"})]}),(ie==null?void 0:ie.leaderId)===(t==null?void 0:t.uid)&&P.role!=="leader"&&P.uid&&A.jsx("button",{onClick:()=>nn(P.uid,P.name||P.email||"this member"),className:"ml-auto text-red-400 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full p-1 transition-colors",title:"Remove from squad",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},P.uid||q)})})]}),A.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 mb-4",children:[A.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Quick Add (Offline List)"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Add friend's name",value:oe,onChange:P=>Ae(P.target.value),className:"flex-1 p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:ps,className:"w-full sm:w-auto bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 font-medium",children:"Add"})]}),A.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[pe.map(P=>A.jsxs("div",{className:"flex items-center gap-2 bg-purple-50 dark:bg-purple-900/30 px-3 py-1 rounded-full border border-purple-100 dark:border-purple-800",children:[A.jsx("span",{className:"text-purple-900 dark:text-purple-200 font-medium",children:P.name}),A.jsx("button",{onClick:()=>ys(P.id),className:"text-purple-400 hover:text-red-500 text-xs font-bold",children:""})]},P.id)),(Se.squad||[]).length===0&&A.jsx("p",{className:"text-gray-400 italic text-sm",children:"No squad members added yet. Riding solo?"})]})]}),A.jsx("div",{className:"mt-8 mb-8",children:A.jsx(oK,{squadId:ie==null?void 0:ie.id,user:t,isDemoMode:n})}),!m&&A.jsx("div",{className:"mt-4",children:A.jsx(pf,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),c==="Packing"&&A.jsxs("div",{className:"animate-fadeIn",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Packing List"}),A.jsx("div",{className:"space-y-2 mb-6",children:(Se.packing||[]).map(P=>A.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 border border-gray-100 dark:border-gray-600 shadow-sm rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("input",{type:"checkbox",checked:P.checked,onChange:()=>lt(P.id),className:"w-5 h-5 text-blue-600 rounded"}),A.jsx("span",{className:`text-gray-700 dark:text-gray-200 ${P.checked?"line-through opacity-50":""}`,children:P.item})]}),A.jsx("button",{onClick:()=>Bi(P.id),className:"text-gray-400 hover:text-red-500",children:""})]},P.id))}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("input",{type:"text",placeholder:"Item",value:X,onChange:P=>J(P.target.value),className:"flex-1 p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"}),A.jsx("button",{onClick:He,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add"})]}),!m&&A.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:A.jsx(pf,{placement:"inline",onUpgradeClick:()=>h("Info")})})]}),c==="Map"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(sK,{locations:Se.mapLocations||[],scrapedEvents:Pt,onLocationsChange:P=>st("mapLocations",P),carnivalName:Se.name,carnivalId:o})}),c==="Passport"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(uq,{user:t,activeCarnivalId:o,activePlanId:ur,isDemoMode:n})}),c==="Media"&&m&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(AK,{files:Se.mediaFiles||[],onFilesChange:P=>st("mediaFiles",P),carnivalName:Se.name,carnivalId:o,userId:t.uid})}),c==="Profile"&&A.jsxs("div",{className:"animate-fadeIn",children:[console.log("Rendering MasqueraderProfile, isOwnProfile: true"),A.jsx(mq,{currentUser:t,profileData:{...Yn||{displayName:(t==null?void 0:t.displayName)||"Carnival Lover",bio:"",isPublic:!1,carnivalHistory:Object.entries(s||{}).filter(([P,q])=>{var ne;return(ne=q==null?void 0:q.costume)==null?void 0:ne.band}).map(([P,q])=>{var ne,Be;return{carnivalId:P,year:new Date().getFullYear(),band:(ne=q.costume)==null?void 0:ne.band,section:(Be=q.costume)==null?void 0:Be.section}})},activeCarnivalId:o,isPromoter:(Yn==null?void 0:Yn.isPromoter)||!1,onAccessPromoter:()=>h("Promoter")},isOwnProfile:!0,onEdit:()=>To(!0)})]}),c==="Marketing"&&Hs&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(_W,{})}),c==="Promoter"&&A.jsx("div",{className:"animate-fadeIn",children:A.jsx(yq,{user:t,isPremium:m,onExit:()=>h("Profile")})}),c==="Info"&&A.jsxs("div",{className:"animate-fadeIn text-center",children:[A.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-2xl p-8 mb-6 shadow-xl",children:[A.jsx("img",{src:ff,alt:"Logo",className:"w-20 h-20 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-2",children:m?"Premium Supporter":"Support the App"}),A.jsx("p",{className:"text-gray-400 mb-6",children:m?"Thank you for supporting Carnival Planner!":"All features are free! Premium removes ads and shows your support."}),A.jsxs("button",{onClick:gt,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 rounded-full font-bold transition-colors bg-white text-gray-900 hover:bg-gray-100",children:[A.jsx("span",{children:""})," Export Itinerary"]})]}),!m&&A.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[A.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400 mb-2",children:"Become a Premium Supporter"}),A.jsx("p",{className:"text-yellow-700 dark:text-yellow-500 text-sm mb-4",children:"Get an ad-free experience and a Premium badge to show your support!"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[A.jsx("button",{onClick:()=>No("monthly"),disabled:E,className:"px-4 py-2 bg-blue-600 text-white font-bold rounded shadow hover:bg-blue-700 disabled:opacity-50",children:E?"Loading...":"Monthly - $4.99"}),A.jsx("button",{onClick:()=>No("yearly"),disabled:E,className:"px-4 py-2 bg-yellow-400 text-yellow-900 font-bold rounded shadow hover:bg-yellow-500 disabled:opacity-50",children:E?"Loading...":"Yearly - $39.99"})]})]}),A.jsx("div",{className:"mt-6",children:A.jsx(TK,{user:t})}),Hs&&A.jsx("div",{className:"mt-6 text-left space-y-8",children:A.jsx(wq,{user:t})})]})]})]})]}):A.jsx(zI,{user:t,activeCarnivalId:null,carnivalData:H0,scrapedEvents:Pt,squadMembers:[],budgetTotal:0,budgetSpent:0,isPremium:m,onAction:h})]}):A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:gi?A.jsx(BW,{onBack:()=>Os(!1),onSuccess:()=>Os(!1)}):A.jsxs(A.Fragment,{children:[A.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-white",children:"Welcome Back"}),A.jsxs("div",{className:"space-y-3 w-full max-w-sm",children:[A.jsxs("button",{onClick:Fr,className:"w-full flex items-center justify-center px-6 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-white transition-colors",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5 mr-3",alt:"G"}),"Continue with Google"]}),A.jsxs("div",{className:"flex items-center gap-3 text-gray-400 dark:text-gray-500",children:[A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),A.jsx("span",{className:"text-sm",children:"or"}),A.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]}),A.jsx("button",{onClick:()=>Os(!0),className:"w-full flex items-center justify-center px-6 py-3 bg-gradient-to-r from-pink-500 to-orange-500 rounded-lg shadow-sm hover:opacity-90 text-white font-semibold transition-opacity",children:"Continue with Email"})]}),A.jsx("button",{onClick:()=>B(!0),className:"mt-6 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Back to home"})]})})}),A.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6 px-4 mt-auto",children:A.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[A.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[A.jsx("button",{onClick:()=>Ur("privacy"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Privacy"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Ur("terms"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Terms"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Ur("cookies"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cookies"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Ur("refund"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Refunds"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>Ur("contact"),className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Contact"}),A.jsx("span",{children:"|"}),A.jsx("button",{onClick:()=>ua(!0),className:"hover:text-gray-900 dark:hover:text-white transition-colors font-medium",children:"Help"})]}),A.jsxs("p",{className:"text-gray-400 dark:text-gray-500 text-xs mt-3",children:[" ",new Date().getFullYear()," Carnival Planner"]})]})}),t&&A.jsx(uK,{activeCarnivalId:o,isPremium:m}),Io&&A.jsx(dq,{onClose:()=>{Ds(!1),localStorage.setItem("carnival-planner-welcomed","true")}}),ca&&A.jsx(hq,{onClose:()=>ua(!1)}),ha&&A.jsx(gq,{user:t,currentProfile:Yn,carnivals:s,onSave:P=>da(P),onClose:()=>To(!1)})]})}fy.createRoot(document.getElementById("root")).render(A.jsx(Gi.StrictMode,{children:A.jsx(UW,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered:",t.scope)}).catch(t=>{console.log("SW registration failed:",t)})});
